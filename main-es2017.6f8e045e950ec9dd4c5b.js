(self.webpackChunkjunkyard_stories=self.webpackChunkjunkyard_stories||[]).push([[179],{8255:function(e){function t(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=function(){return[]},t.resolve=t,t.id=8255,e.exports=t},3018:function(e,t,n){"use strict";n.d(t,{deG:function(){return Xt},tb:function(){return kc},AFp:function(){return bc},ip1:function(){return vc},CZH:function(){return _c},hGG:function(){return vu},z2F:function(){return cu},sBO:function(){return ba},Sil:function(){return Mc},_Vd:function(){return $o},EJc:function(){return xc},SBq:function(){return Ko},qLn:function(){return yr},vpe:function(){return Xa},gxx:function(){return Qi},tBr:function(){return _n},XFs:function(){return P},OlP:function(){return Qt},zs3:function(){return ps},ZZ4:function(){return pa},aQg:function(){return ga},soG:function(){return Cc},YKP:function(){return Da},v3s:function(){return lu},h0i:function(){return Aa},PXZ:function(){return ru},R0b:function(){return Fc},FiY:function(){return bn},Lbi:function(){return Ic},g9A:function(){return Tc},Qsj:function(){return Yo},FYo:function(){return Jo},JOm:function(){return wr},Tiy:function(){return Xo},q3G:function(){return ur},tp0:function(){return wn},EAV:function(){return pu},Rgc:function(){return ka},dDg:function(){return zc},DyG:function(){return en},q4F:function(){return ta},GfV:function(){return ea},s_b:function(){return Ra},ifc:function(){return Z},eFA:function(){return iu},G48:function(){return tu},Gpc:function(){return g},f3M:function(){return mn},X6Q:function(){return eu},_c5:function(){return mu},VLi:function(){return Wc},c2e:function(){return Ec},zSh:function(){return es},wAp:function(){return Po},vHH:function(){return v},EiD:function(){return ar},mCW:function(){return $n},qzn:function(){return Nn},JVY:function(){return Ln},pB0:function(){return Fn},eBb:function(){return Zn},L6k:function(){return Mn},LAX:function(){return Un},cg1:function(){return xo},Tjo:function(){return gu},kL8:function(){return Ao},yhl:function(){return On},dqk:function(){return j},sIi:function(){return Ts},CqO:function(){return Vs},QGY:function(){return Fs},F4k:function(){return qs},RDi:function(){return Ie},AaK:function(){return d},z3N:function(){return Rn},qOj:function(){return gs},TTD:function(){return ve},_Bn:function(){return Vo},xp6:function(){return ri},uIk:function(){return Cs},Gre:function(){return To},ekj:function(){return so},Suo:function(){return pc},Xpm:function(){return X},lG2:function(){return oe},Yz7:function(){return S},cJS:function(){return T},oAB:function(){return re},Yjl:function(){return ae},Y36:function(){return Ds},_UZ:function(){return Ls},BQk:function(){return Zs},ynx:function(){return Ms},qZA:function(){return Os},TgZ:function(){return Ns},EpF:function(){return Us},n5z:function(){return Kt},Ikx:function(){return Io},LFG:function(){return gn},$8M:function(){return Jt},NdJ:function(){return js},CRH:function(){return fc},oxw:function(){return Hs},ALo:function(){return Ja},lcZ:function(){return Ya},Q6J:function(){return Ps},s9C:function(){return zs},DdM:function(){return Ga},VKq:function(){return Ka},iGM:function(){return hc},evT:function(){return _r},CHM:function(){return je},oJD:function(){return lr},LSH:function(){return hr},kYT:function(){return ie},Akn:function(){return oo},YNc:function(){return As},_uU:function(){return bo},Oqu:function(){return wo},hij:function(){return So},Gf:function(){return dc}});var r=n(9765),i=n(5319),s=n(7574),o=n(6682),a=n(2441),c=n(1307);function u(){return new r.xQ}function l(e){for(let t in e)if(e[t]===l)return t;throw Error("Could not find renamed property on target object.")}function h(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function d(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(d).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function p(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const f=l({__forward_ref__:l});function g(e){return e.__forward_ref__=g,e.toString=function(){return d(this())},e}function m(e){return y(e)?e():e}function y(e){return"function"==typeof e&&e.hasOwnProperty(f)&&e.__forward_ref__===g}class v extends Error{constructor(e,t){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(e,t)),this.code=e}}function _(e){return"string"==typeof e?e:null==e?"":String(e)}function b(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():_(e)}function w(e,t){const n=t?` in ${t}`:"";throw new v("201",`No provider for ${b(e)} found${n}`)}function S(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function T(e){return{providers:e.providers||[],imports:e.imports||[]}}function I(e){return k(e,C)||k(e,A)}function k(e,t){return e.hasOwnProperty(t)?e[t]:null}function E(e){return e&&(e.hasOwnProperty(x)||e.hasOwnProperty(D))?e[x]:null}const C=l({"\u0275prov":l}),x=l({"\u0275inj":l}),A=l({ngInjectableDef:l}),D=l({ngInjectorDef:l});var P=(()=>((P=P||{})[P.Default=0]="Default",P[P.Host=1]="Host",P[P.Self=2]="Self",P[P.SkipSelf=4]="SkipSelf",P[P.Optional=8]="Optional",P))();let R;function N(e){const t=R;return R=e,t}function O(e,t,n){const r=I(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&P.Optional?null:void 0!==t?t:void w(d(e),"Injector")}function L(e){return{toString:e}.toString()}var M=(()=>((M=M||{})[M.OnPush=0]="OnPush",M[M.Default=1]="Default",M))(),Z=(()=>((Z=Z||{})[Z.Emulated=0]="Emulated",Z[Z.None=2]="None",Z[Z.ShadowDom=3]="ShadowDom",Z))();const U="undefined"!=typeof globalThis&&globalThis,F="undefined"!=typeof window&&window,q="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,V="undefined"!=typeof global&&global,j=U||V||F||q,B={},$=[],H=l({"\u0275cmp":l}),z=l({"\u0275dir":l}),G=l({"\u0275pipe":l}),K=l({"\u0275mod":l}),W=l({"\u0275loc":l}),J=l({"\u0275fac":l}),Y=l({__NG_ELEMENT_ID__:l});let Q=0;function X(e){return L(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===M.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||$,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||Z.Emulated,id:"c",styles:e.styles||$,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,s=e.pipes;return n.id+=Q++,n.inputs=se(e.inputs,t),n.outputs=se(e.outputs),i&&i.forEach(e=>e(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(ee):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(te):null,n})}function ee(e){return ce(e)||function(e){return e[z]||null}(e)}function te(e){return function(e){return e[G]||null}(e)}const ne={};function re(e){return L(()=>{const t={type:e.type,bootstrap:e.bootstrap||$,declarations:e.declarations||$,imports:e.imports||$,exports:e.exports||$,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(ne[e.id]=e.type),t})}function ie(e,t){return L(()=>{const n=ue(e,!0);n.declarations=t.declarations||$,n.imports=t.imports||$,n.exports=t.exports||$})}function se(e,t){if(null==e)return B;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}const oe=X;function ae(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function ce(e){return e[H]||null}function ue(e,t){const n=e[K]||null;if(!n&&!0===t)throw new Error(`Type ${d(e)} does not have '\u0275mod' property.`);return n}function le(e){return Array.isArray(e)&&"object"==typeof e[1]}function he(e){return Array.isArray(e)&&!0===e[1]}function de(e){return 0!=(8&e.flags)}function pe(e){return 2==(2&e.flags)}function fe(e){return 1==(1&e.flags)}function ge(e){return null!==e.template}function me(e,t){return e.hasOwnProperty(J)?e[J]:null}class ye{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function ve(){return _e}function _e(e){return e.type.prototype.ngOnChanges&&(e.setInput=we),be}function be(){const e=Se(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===B)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function we(e,t,n,r){const i=Se(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:B,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],c=o[a];s[a]=new ye(c&&c.currentValue,t,o===B),e[r]=t}function Se(e){return e.__ngSimpleChanges__||null}let Te;function Ie(e){Te=e}function ke(){return void 0!==Te?Te:"undefined"!=typeof document?document:void 0}function Ee(e){return!!e.listen}ve.ngInherit=!0;const Ce={createRenderer:(e,t)=>ke()};function xe(e){for(;Array.isArray(e);)e=e[0];return e}function Ae(e,t){return xe(t[e])}function De(e,t){return xe(t[e.index])}function Pe(e,t){return e.data[t]}function Re(e,t){const n=t[e];return le(n)?n:n[0]}function Ne(e){return 4==(4&e[2])}function Oe(e){return 128==(128&e[2])}function Le(e,t){return null==t?null:e[t]}function Me(e){e[18]=0}function Ze(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const Ue={lFrame:at(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Fe(){return Ue.bindingsEnabled}function qe(){return Ue.lFrame.lView}function Ve(){return Ue.lFrame.tView}function je(e){return Ue.lFrame.contextLView=e,e[8]}function Be(){let e=$e();for(;null!==e&&64===e.type;)e=e.parent;return e}function $e(){return Ue.lFrame.currentTNode}function He(e,t){const n=Ue.lFrame;n.currentTNode=e,n.isParent=t}function ze(){return Ue.lFrame.isParent}function Ge(){Ue.lFrame.isParent=!1}function Ke(){return Ue.isInCheckNoChangesMode}function We(e){Ue.isInCheckNoChangesMode=e}function Je(){const e=Ue.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Ye(){return Ue.lFrame.bindingIndex++}function Qe(e){const t=Ue.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Xe(e,t){const n=Ue.lFrame;n.bindingIndex=n.bindingRootIndex=e,et(t)}function et(e){Ue.lFrame.currentDirectiveIndex=e}function tt(){return Ue.lFrame.currentQueryIndex}function nt(e){Ue.lFrame.currentQueryIndex=e}function rt(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function it(e,t,n){if(n&P.SkipSelf){let r=t,i=e;for(;r=r.parent,!(null!==r||n&P.Host||(r=rt(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;t=r,e=i}const r=Ue.lFrame=ot();return r.currentTNode=t,r.lView=e,!0}function st(e){const t=ot(),n=e[1];Ue.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function ot(){const e=Ue.lFrame,t=null===e?null:e.child;return null===t?at(e):t}function at(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function ct(){const e=Ue.lFrame;return Ue.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const ut=ct;function lt(){const e=ct();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function ht(){return Ue.lFrame.selectedIndex}function dt(e){Ue.lFrame.selectedIndex=e}function pt(){const e=Ue.lFrame;return Pe(e.tView,e.selectedIndex)}function ft(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=t;r&&(e.contentHooks||(e.contentHooks=[])).push(-n,r),i&&((e.contentHooks||(e.contentHooks=[])).push(n,i),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),o&&((e.viewHooks||(e.viewHooks=[])).push(n,o),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,o)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function gt(e,t,n){vt(e,t,3,n)}function mt(e,t,n,r){(3&e[2])===n&&vt(e,t,n,r)}function yt(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function vt(e,t,n,r){const i=null!=r?r:-1,s=t.length-1;let o=0;for(let a=void 0!==r?65535&e[18]:0;a<s;a++)if("number"==typeof t[a+1]){if(o=t[a],null!=r&&o>=r)break}else t[a]<0&&(e[18]+=65536),(o<i||-1==i)&&(_t(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function _t(e,t,n,r){const i=n[r]<0,s=n[r+1],o=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}class bt{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function wt(e,t,n){const r=Ee(e);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],c=n[i++];r?e.setAttribute(t,a,c,o):t.setAttributeNS(o,a,c)}else{const o=s,a=n[++i];Tt(o)?r&&e.setProperty(t,o,a):r?e.setAttribute(t,o,a):t.setAttribute(o,a),i++}}return i}function St(e){return 3===e||4===e||6===e}function Tt(e){return 64===e.charCodeAt(0)}function It(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||kt(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function kt(e,t,n,r,i){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const n=e[s++];if("number"==typeof n){if(n===t){o=-1;break}if(n>t){o=s-1;break}}}for(;s<e.length;){const t=e[s];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function Et(e){return-1!==e}function Ct(e){return 32767&e}function xt(e,t){let n=e>>16,r=t;for(;n>0;)r=r[15],n--;return r}let At=!0;function Dt(e){const t=At;return At=e,t}let Pt=0;function Rt(e,t){const n=Ot(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Nt(r.data,e),Nt(t,null),Nt(r.blueprint,null));const i=Lt(e,t),s=e.injectorIndex;if(Et(i)){const e=Ct(i),n=xt(i,t),r=n[1].data;for(let i=0;i<8;i++)t[s+i]=n[e+i]|r[e+i]}return t[s+8]=i,s}function Nt(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Ot(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Lt(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){const e=i[1],t=e.type;if(r=2===t?e.declTNode:1===t?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Mt(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Y)&&(r=n[Y]),null==r&&(r=n[Y]=Pt++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function Zt(e,t,n){if(n&P.Optional)return e;w(t,"NodeInjector")}function Ut(e,t,n,r){if(n&P.Optional&&void 0===r&&(r=null),0==(n&(P.Self|P.Host))){const i=e[9],s=N(void 0);try{return i?i.get(t,r,n&P.Optional):O(t,r,n&P.Optional)}finally{N(s)}}return Zt(r,t,n)}function Ft(e,t,n,r=P.Default,i){if(null!==e){const s=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Y)?e[Y]:void 0;return"number"==typeof t?t>=0?255&t:Vt:t}(n);if("function"==typeof s){if(!it(t,e,r))return r&P.Host?Zt(i,n,r):Ut(t,n,r,i);try{const e=s(r);if(null!=e||r&P.Optional)return e;w(n)}finally{ut()}}else if("number"==typeof s){let i=null,o=Ot(e,t),a=-1,c=r&P.Host?t[16][6]:null;for((-1===o||r&P.SkipSelf)&&(a=-1===o?Lt(e,t):t[o+8],-1!==a&&zt(r,!1)?(i=t[1],o=Ct(a),t=xt(a,t)):o=-1);-1!==o;){const e=t[1];if(Ht(s,o,e.data)){const e=jt(o,t,n,i,r,c);if(e!==qt)return e}a=t[o+8],-1!==a&&zt(r,t[1].data[o+8]===c)&&Ht(s,o,t)?(i=e,o=Ct(a),t=xt(a,t)):o=-1}}}return Ut(t,n,r,i)}const qt={};function Vt(){return new Gt(Be(),qe())}function jt(e,t,n,r,i,s){const o=t[1],a=o.data[e+8],c=Bt(a,o,n,null==r?pe(a)&&At:r!=o&&0!=(3&a.type),i&P.Host&&s===a);return null!==c?$t(t,o,c,a):qt}function Bt(e,t,n,r,i){const s=e.providerIndexes,o=t.data,a=1048575&s,c=e.directiveStart,u=s>>20,l=i?a+u:e.directiveEnd;for(let h=r?a:a+u;h<l;h++){const e=o[h];if(h<c&&n===e||h>=c&&e.type===n)return h}if(i){const e=o[c];if(e&&ge(e)&&e.type===n)return c}return null}function $t(e,t,n,r){let i=e[n];const s=t.data;if(i instanceof bt){const o=i;o.resolving&&function(e,t){throw new v("200",`Circular dependency in DI detected for ${e}`)}(b(s[n]));const a=Dt(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?N(o.injectImpl):null;it(e,r,P.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const r=_e(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==c&&N(c),Dt(a),o.resolving=!1,ut()}}return i}function Ht(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function zt(e,t){return!(e&P.Self||e&P.Host&&t)}class Gt{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return Ft(this._tNode,this._lView,e,void 0,t)}}function Kt(e){return L(()=>{const t=e.prototype.constructor,n=t[J]||Wt(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const e=i[J]||Wt(i);if(e&&e!==n)return e;i=Object.getPrototypeOf(i)}return e=>new e})}function Wt(e){return y(e)?()=>{const t=Wt(m(e));return t&&t()}:me(e)}function Jt(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const e=n.length;let r=0;for(;r<e;){const i=n[r];if(St(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<e&&"string"==typeof n[r];)r++;else{if(i===t)return n[r+1];r+=2}}}return null}(Be(),e)}function Yt(e,t,n){return L(()=>{const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class Qt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=S({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Xt=new Qt("AnalyzeForEntryComponents"),en=Function;function tn(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),tn(r,t)):t!==e&&t.push(r)}return t}function nn(e,t){e.forEach(e=>Array.isArray(e)?nn(e,t):t(e))}function rn(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function sn(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function on(e,t,n){let r=cn(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function an(e,t){const n=cn(e,t);if(n>=0)return e[1|n]}function cn(e,t){return function(e,t,n){let r=0,i=e.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=e[n<<1];if(t===s)return n<<1;s>t?i=n:r=n+1}return~(i<<1)}(e,t)}const un={},ln=/\n/gm,hn=l({provide:String,useValue:l});let dn;function pn(e){const t=dn;return dn=e,t}function fn(e,t=P.Default){if(void 0===dn)throw new Error("inject() must be called from an injection context");return null===dn?O(e,void 0,t):dn.get(e,t&P.Optional?null:void 0,t)}function gn(e,t=P.Default){return(R||fn)(m(e),t)}const mn=gn;function yn(e){const t=[];for(let n=0;n<e.length;n++){const r=m(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e,n=P.Default;for(let t=0;t<r.length;t++){const i=r[t],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?e=i.token:n|=s:e=i}t.push(gn(e,n))}else t.push(gn(r))}return t}function vn(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}const _n=vn(Yt("Inject",e=>({token:e})),-1),bn=vn(Yt("Optional"),8),wn=vn(Yt("SkipSelf"),4);let Sn,Tn;function In(e){var t;return(null===(t=function(){if(void 0===Sn&&(Sn=null,j.trustedTypes))try{Sn=j.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(t){}return Sn}())||void 0===t?void 0:t.createHTML(e))||e}function kn(e){var t;return(null===(t=function(){if(void 0===Tn&&(Tn=null,j.trustedTypes))try{Tn=j.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(t){}return Tn}())||void 0===t?void 0:t.createHTML(e))||e}class En{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Cn extends En{getTypeName(){return"HTML"}}class xn extends En{getTypeName(){return"Style"}}class An extends En{getTypeName(){return"Script"}}class Dn extends En{getTypeName(){return"URL"}}class Pn extends En{getTypeName(){return"ResourceURL"}}function Rn(e){return e instanceof En?e.changingThisBreaksApplicationSecurity:e}function Nn(e,t){const n=On(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}function On(e){return e instanceof En&&e.getTypeName()||null}function Ln(e){return new Cn(e)}function Mn(e){return new xn(e)}function Zn(e){return new An(e)}function Un(e){return new Dn(e)}function Fn(e){return new Pn(e)}class qn{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(In(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class Vn{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const t=this.inertDocument.createElement("body");e.appendChild(t)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=In(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=In(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const n=t.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const jn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Bn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function $n(e){return(e=String(e)).match(jn)||e.match(Bn)?e:"unsafe:"+e}function Hn(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function zn(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const Gn=Hn("area,br,col,hr,img,wbr"),Kn=Hn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Wn=Hn("rp,rt"),Jn=zn(Wn,Kn),Yn=zn(Gn,zn(Kn,Hn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),zn(Wn,Hn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Jn),Qn=Hn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Xn=Hn("srcset"),er=zn(Qn,Xn,Hn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Hn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),tr=Hn("script,style,template");class nr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Yn.hasOwnProperty(t))return this.sanitizedSomething=!0,!tr.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let i=0;i<n.length;i++){const e=n.item(i),t=e.name,s=t.toLowerCase();if(!er.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=e.value;Qn[s]&&(o=$n(o)),Xn[s]&&(r=o,o=(r=String(r)).split(",").map(e=>$n(e.trim())).join(", ")),this.buf.push(" ",t,'="',sr(o),'"')}var r;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Yn.hasOwnProperty(t)&&!Gn.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(sr(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const rr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ir=/([^\#-~ |!])/g;function sr(e){return e.replace(/&/g,"&amp;").replace(rr,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(ir,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let or;function ar(e,t){let n=null;try{or=or||function(e){const t=new Vn(e);return function(){try{return!!(new window.DOMParser).parseFromString(In(""),"text/html")}catch(e){return!1}}()?new qn(t):t}(e);let r=t?String(t):"";n=or.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=or.getInertBodyElement(r)}while(r!==s);return In((new nr).sanitizeChildren(cr(n)||n))}finally{if(n){const e=cr(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}function cr(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var ur=(()=>((ur=ur||{})[ur.NONE=0]="NONE",ur[ur.HTML=1]="HTML",ur[ur.STYLE=2]="STYLE",ur[ur.SCRIPT=3]="SCRIPT",ur[ur.URL=4]="URL",ur[ur.RESOURCE_URL=5]="RESOURCE_URL",ur))();function lr(e){const t=dr();return t?kn(t.sanitize(ur.HTML,e)||""):Nn(e,"HTML")?kn(Rn(e)):ar(ke(),_(e))}function hr(e){const t=dr();return t?t.sanitize(ur.URL,e)||"":Nn(e,"URL")?Rn(e):$n(_(e))}function dr(){const e=qe();return e&&e[12]}function pr(e,t){e.__ngContext__=t}function fr(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function gr(e){return e.ngOriginalError}function mr(e,...t){e.error(...t)}class yr{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e&&e.ngErrorLogger||mr}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?function(e){return e.ngDebugContext}(e)||this._findContext(gr(e)):null}_findOriginalError(e){let t=e&&gr(e);for(;t&&gr(t);)t=gr(t);return t||null}}const vr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(j))();function _r(e){return e.ownerDocument}function br(e){return e instanceof Function?e():e}var wr=(()=>((wr=wr||{})[wr.Important=1]="Important",wr[wr.DashCase=2]="DashCase",wr))();function Sr(e,t){return(void 0)(e,t)}function Tr(e){const t=e[3];return he(t)?t[3]:t}function Ir(e){return Er(e[13])}function kr(e){return Er(e[4])}function Er(e){for(;null!==e&&!he(e);)e=e[4];return e}function Cr(e,t,n,r,i){if(null!=r){let s,o=!1;he(r)?s=r:le(r)&&(o=!0,r=r[0]);const a=xe(r);0===e&&null!==n?null==i?Or(t,n,a):Nr(t,n,a,i||null,!0):1===e&&null!==n?Nr(t,n,a,i||null,!0):2===e?function(e,t,n){const r=Mr(e,t);r&&function(e,t,n,r){Ee(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function(e,t,n,r,i){const s=n[7];s!==xe(n)&&Cr(t,e,r,s,i);for(let o=10;o<n.length;o++){const i=n[o];jr(i[1],i,e,t,r,s)}}(t,e,s,n,i)}}function xr(e,t,n){return Ee(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Ar(e,t){const n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,Ze(i,-1)),n.splice(r,1)}function Dr(e,t){if(e.length<=10)return;const n=10+t,r=e[n];if(r){const s=r[17];null!==s&&s!==e&&Ar(s,r),t>0&&(e[n-1][4]=r[4]);const o=sn(e,10+t);jr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Pr(e,t){if(!(256&t[2])){const n=t[11];Ee(n)&&n.destroyNode&&jr(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Rr(e[1],e);for(;t;){let n=null;if(le(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)le(t)&&Rr(t[1],t),t=t[3];null===t&&(t=e),le(t)&&Rr(t[1],t),n=t&&t[4]}t=n}}(t)}}function Rr(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof bt)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2){const r=e[t[n]],i=t[n+1];try{i.call(r)}finally{}}else try{t.call(e)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const e=n[s+1],o="function"==typeof e?e(t):xe(t[e]),a=r[i=n[s+2]],c=n[s+3];"boolean"==typeof c?o.removeEventListener(n[s],a,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),s+=2}else{const e=r[i=n[s+1]];n[s].call(e)}if(null!==r){for(let e=i+1;e<r.length;e++)(0,r[e])();t[7]=null}}(e,t),1===t[1].type&&Ee(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&he(t[3])){n!==t[3]&&Ar(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function Nr(e,t,n,r,i){Ee(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function Or(e,t,n){Ee(e)?e.appendChild(t,n):t.appendChild(n)}function Lr(e,t,n,r,i){null!==r?Nr(e,t,n,r,i):Or(e,t,n)}function Mr(e,t){return Ee(e)?e.parentNode(t):t.parentNode}function Zr(e,t,n,r){const i=function(e,t,n){return function(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const t=e.data[r.directiveStart].encapsulation;if(t===Z.None||t===Z.Emulated)return null}return De(r,n)}(e,t.parent,n)}(e,r,t),s=t[11],o=function(e,t,n){return function(e,t,n){return 40&e.type?De(e,n):null}(e,0,n)}(r.parent||t[6],0,t);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Lr(s,i,n[a],o,!1);else Lr(s,i,n,o,!1)}function Ur(e,t){if(null!==t){const n=t.type;if(3&n)return De(t,e);if(4&n)return qr(-1,e[t.index]);if(8&n){const n=t.child;if(null!==n)return Ur(e,n);{const n=e[t.index];return he(n)?qr(-1,n):xe(n)}}if(32&n)return Sr(t,e)()||xe(e[t.index]);{const n=Fr(e,t);return null!==n?Array.isArray(n)?n[0]:Ur(Tr(e[16]),n):Ur(e,t.next)}}return null}function Fr(e,t){return null!==t?e[16][6].projection[t.projection]:null}function qr(e,t){const n=10+e+1;if(n<t.length){const e=t[n],r=e[1].firstChild;if(null!==r)return Ur(e,r)}return t[7]}function Vr(e,t,n,r,i,s,o){for(;null!=n;){const a=r[n.index],c=n.type;if(o&&0===t&&(a&&pr(xe(a),r),n.flags|=4),64!=(64&n.flags))if(8&c)Vr(e,t,n.child,r,i,s,!1),Cr(t,e,i,a,s);else if(32&c){const o=Sr(n,r);let c;for(;c=o();)Cr(t,e,i,c,s);Cr(t,e,i,a,s)}else 16&c?Br(e,t,r,n,i,s):Cr(t,e,i,a,s);n=o?n.projectionNext:n.next}}function jr(e,t,n,r,i,s){Vr(n,r,e.firstChild,t,i,s,!1)}function Br(e,t,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let c=0;c<a.length;c++)Cr(t,e,i,a[c],s);else Vr(e,t,a,o[3],i,s,!0)}function $r(e,t,n){Ee(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function Hr(e,t,n){Ee(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function zr(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const n=t.length;if(i+n===r||e.charCodeAt(i+n)<=32)return i}n=i+1}}function Gr(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==zr(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function Kr(e){return 4===e.type&&"ng-template"!==e.value}function Wr(e,t,n){return t===(4!==e.type||n?e.value:"ng-template")}function Jr(e,t,n){let r=4;const i=e.attrs||[],s=function(e){for(let t=0;t<e.length;t++)if(St(e[t]))return t;return e.length}(i);let o=!1;for(let a=0;a<t.length;a++){const c=t[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!Wr(e,c,n)||""===c&&1===t.length){if(Yr(r))return!1;o=!0}}else{const u=8&r?c:t[++a];if(8&r&&null!==e.attrs){if(!Gr(e.attrs,u,n)){if(Yr(r))return!1;o=!0}continue}const l=Qr(8&r?"class":c,i,Kr(e),n);if(-1===l){if(Yr(r))return!1;o=!0;continue}if(""!==u){let e;e=l>s?"":i[l+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==zr(t,u,0)||2&r&&u!==e){if(Yr(r))return!1;o=!0}}}}else{if(!o&&!Yr(r)&&!Yr(c))return!1;if(o&&Yr(c))continue;o=!1,r=c|1&r}}return Yr(r)||o}function Yr(e){return 0==(1&e)}function Qr(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let n=!1;for(;i<t.length;){const r=t[i];if(r===e)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++i];for(;"string"==typeof e;)e=t[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Xr(e,t,n=!1){for(let r=0;r<t.length;r++)if(Jr(e,t[r],n))return!0;return!1}function ei(e,t){return e?":not("+t.trim()+")":t}function ti(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const t=e[++n];i+="["+o+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||Yr(o)||(t+=ei(s,i),i=""),r=o,s=s||!Yr(r);n++}return""!==i&&(t+=ei(s,i)),t}const ni={};function ri(e){ii(Ve(),qe(),ht()+e,Ke())}function ii(e,t,n,r){if(!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&gt(t,r,n)}else{const r=e.preOrderHooks;null!==r&&mt(t,r,0,n)}dt(n)}function si(e,t){return e<<17|t<<2}function oi(e){return e>>17&32767}function ai(e){return 2|e}function ci(e){return(131068&e)>>2}function ui(e,t){return-131069&e|t<<2}function li(e){return 1|e}function hi(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=e.data[s];nt(i),n.contentQueries(2,t[s],s)}}}function di(e,t,n,r,i,s,o,a,c,u){const l=t.blueprint.slice();return l[0]=i,l[2]=140|r,Me(l),l[3]=l[15]=e,l[8]=n,l[10]=o||e&&e[10],l[11]=a||e&&e[11],l[12]=c||e&&e[12]||null,l[9]=u||e&&e[9]||null,l[6]=s,l[16]=2==t.type?e[16]:l,l}function pi(e,t,n,r,i){let s=e.data[t];if(null===s)s=function(e,t,n,r,i){const s=$e(),o=ze(),a=e.data[t]=function(e,t,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(e,t,n,r,i),Ue.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const e=function(){const e=Ue.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===e?-1:e.injectorIndex}return He(s,!0),s}function fi(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function gi(e,t,n){st(t);try{const r=e.viewQuery;null!==r&&Hi(1,r,n);const i=e.template;null!==i&&vi(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&hi(e,t),e.staticViewQueries&&Hi(2,e.viewQuery,n);const s=e.components;null!==s&&function(e,t){for(let n=0;n<t.length;n++)qi(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),r}finally{t[2]&=-5,lt()}}function mi(e,t,n,r){const i=t[2];if(256==(256&i))return;st(t);const s=Ke();try{Me(t),Ue.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&vi(e,t,n,2,r);const o=3==(3&i);if(!s)if(o){const n=e.preOrderCheckHooks;null!==n&&gt(t,n,null)}else{const n=e.preOrderHooks;null!==n&&mt(t,n,0,null),yt(t,0)}if(function(e){for(let t=Ir(e);null!==t;t=kr(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&Ze(r,1),n[2]|=1024}}}(t),function(e){for(let t=Ir(e);null!==t;t=kr(t))for(let e=10;e<t.length;e++){const n=t[e],r=n[1];Oe(n)&&mi(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&hi(e,t),!s)if(o){const n=e.contentCheckHooks;null!==n&&gt(t,n)}else{const n=e.contentHooks;null!==n&&mt(t,n,1),yt(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const r=n[e];if(r<0)dt(~r);else{const i=r,s=n[++e],o=n[++e];Xe(s,i),o(2,t[i])}}}finally{dt(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)Ui(e,t[n])}(t,a);const c=e.viewQuery;if(null!==c&&Hi(2,c,r),!s)if(o){const n=e.viewCheckHooks;null!==n&&gt(t,n)}else{const n=e.viewHooks;null!==n&&mt(t,n,2),yt(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Ze(t[3],-1))}finally{lt()}}function yi(e,t,n,r){const i=t[10],s=!Ke(),o=Ne(t);try{s&&!o&&i.begin&&i.begin(),o&&gi(e,t,r),mi(e,t,n,r)}finally{s&&!o&&i.end&&i.end()}}function vi(e,t,n,r,i){const s=ht(),o=2&r;try{dt(-1),o&&t.length>20&&ii(e,t,20,Ke()),n(r,i)}finally{dt(s)}}function _i(e,t,n){if(de(t)){const r=t.directiveEnd;for(let i=t.directiveStart;i<r;i++){const t=e.data[i];t.contentQueries&&t.contentQueries(1,n[i],i)}}}function bi(e,t,n){Fe()&&(function(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||Rt(n,t),pr(r,t);const o=n.initialInputs;for(let a=i;a<s;a++){const r=e.data[a],s=ge(r);s&&Oi(t,n,r);const c=$t(t,e,a,n);pr(c,t),null!==o&&Li(0,a-i,c,r,0,o),s&&(Re(n.index,t)[8]=c)}}(e,t,n,De(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=Ue.lFrame.currentDirectiveIndex;try{dt(s);for(let n=r;n<i;n++){const r=e.data[n],i=t[n];et(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ai(r,i)}}finally{dt(-1),et(o)}}(e,t,n))}function wi(e,t,n=De){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(t,e):e[o];e[i++]=a}}}function Si(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Ti(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Ti(e,t,n,r,i,s,o,a,c,u){const l=20+r,h=l+i,d=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:ni);return n}(l,h),p="function"==typeof u?u():u;return d[1]={type:e,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1}}function Ii(e,t,n,r){const i=Gi(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&Ki(e).push(r,i.length-1))}function ki(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Ei(e,t,n,r,i,s,o,a){const c=De(t,n);let u,l=t.inputs;var h;!a&&null!=l&&(u=l[r])?(Ji(e,n,u,r,i),pe(t)&&function(e,t){const n=Re(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,t.value||"",r):i,Ee(s)?s.setProperty(c,r,i):Tt(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function Ci(e,t,n,r){let i=!1;if(Fe()){const s=function(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];Xr(n,o.selectors,!1)&&(i||(i=[]),Mt(Rt(n,t),e,o.type),ge(o)?(Di(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==s){i=!0,Ri(n,e.data.length,s.length);for(let e=0;e<s.length;e++){const t=s[e];t.providersResolver&&t.providersResolver(t)}let r=!1,a=!1,c=fi(e,t,s.length,null);for(let i=0;i<s.length;i++){const u=s[i];n.mergedAttrs=It(n.mergedAttrs,u.hostAttrs),Ni(e,n,t,c,u),Pi(c,u,o),null!==u.contentQueries&&(n.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(n.flags|=128);const l=u.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),c++}!function(e,t){const n=t.directiveEnd,r=e.data,i=t.attrs,s=[];let o=null,a=null;for(let c=t.directiveStart;c<n;c++){const e=r[c],n=e.inputs,u=null===i||Kr(t)?null:Mi(n,i);s.push(u),o=ki(n,c,o),a=ki(e.outputs,c,a)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=o,t.outputs=a}(e,n)}o&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const i=n[t[e+1]];if(null==i)throw new v("301",`Export of name '${t[e+1]}' not found!`);r.push(t[e],i)}}}(n,r,o)}return n.mergedAttrs=It(n.mergedAttrs,n.attrs),i}function xi(e,t,n,r,i,s){const o=s.hostBindings;if(o){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const s=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function Ai(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Di(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Pi(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;ge(t)&&(n[""]=e)}}function Ri(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Ni(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=me(i.type)),o=new bt(s,ge(i),null);e.blueprint[r]=o,n[r]=o,xi(e,t,0,r,fi(e,n,i.hostVars,ni),i)}function Oi(e,t,n){const r=De(t,e),i=Si(n),s=e[10],o=Vi(e,di(e,i,null,n.onPush?64:16,r,t,s,s.createRenderer(r,n),null,null));e[t.index]=o}function Li(e,t,n,r,i,s){const o=s[t];if(null!==o){const e=r.setInput;for(let t=0;t<o.length;){const i=o[t++],s=o[t++],a=o[t++];null!==e?r.setInput(n,a,i,s):n[s]=a}}}function Mi(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Zi(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function Ui(e,t){const n=Re(t,e);if(Oe(n)){const e=n[1];80&n[2]?mi(e,n,e.template,n[8]):n[5]>0&&Fi(n)}}function Fi(e){for(let n=Ir(e);null!==n;n=kr(n))for(let e=10;e<n.length;e++){const t=n[e];if(1024&t[2]){const e=t[1];mi(e,t,e.template,t[8])}else t[5]>0&&Fi(t)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=Re(t[n],e);Oe(r)&&r[5]>0&&Fi(r)}}function qi(e,t){const n=Re(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),gi(r,n,n[8])}function Vi(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function ji(e){for(;e;){e[2]|=64;const t=Tr(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function Bi(e,t,n){const r=t[10];r.begin&&r.begin();try{mi(e,t,e.template,n)}catch(i){throw Wi(t,i),i}finally{r.end&&r.end()}}function $i(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=fr(n),i=r[1];yi(i,r,i.template,n)}}(e[8])}function Hi(e,t,n){nt(0),t(e,n)}const zi=(()=>Promise.resolve(null))();function Gi(e){return e[7]||(e[7]=[])}function Ki(e){return e.cleanup||(e.cleanup=[])}function Wi(e,t){const n=e[9],r=n?n.get(yr,null):null;r&&r.handleError(t)}function Ji(e,t,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],c=t[o],u=e.data[o];null!==u.setInput?u.setInput(c,i,r,a):c[a]=i}}function Yi(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const e=t[o];"number"==typeof e?s=e:1==s?i=p(i,e):2==s&&(r=p(r,e+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}const Qi=new Qt("INJECTOR",-1);class Xi{get(e,t=un){if(t===un){const t=new Error(`NullInjectorError: No provider for ${d(e)}!`);throw t.name="NullInjectorError",t}return t}}const es=new Qt("Set Injector scope."),ts={},ns={};let rs;function is(){return void 0===rs&&(rs=new Xi),rs}function ss(e,t=null,n=null,r){return new os(e,n,t||is(),r)}class os{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];t&&nn(t,n=>this.processProvider(n,e,t)),nn([e],e=>this.processInjectorType(e,[],i)),this.records.set(Qi,us(void 0,this));const s=this.records.get(es);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof e?null:d(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=un,n=P.Default){this.assertNotDestroyed();const r=pn(this),i=N(void 0);try{if(!(n&P.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(s=e)||"object"==typeof s&&s instanceof Qt)&&I(e);t=n&&this.injectableDefInScope(n)?us(as(e),ts):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&P.Self?is():this.parent).get(e,t=n&P.Optional&&t===un?null:t)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(d(e)),r)throw o;return function(e,t,n,r){const i=e.ngTempTokenPath;throw t.__source&&i.unshift(t.__source),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=d(t);if(Array.isArray(t))i=t.map(d).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):d(r)))}i=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(ln,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(o,e,"R3InjectorError",this.source)}throw o}finally{N(i),pn(r)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(d(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=m(e)))return!1;let r=E(e);const i=null==r&&e.ngModule||void 0,s=void 0===i?e:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=E(i)),null==r)return!1;if(null!=r.imports&&!o){let e;n.push(s);try{nn(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];nn(r,e=>this.processProvider(e,n,r||$))}}this.injectorDefTypes.add(s);const a=me(s)||(()=>new s);this.records.set(s,us(a,ts));const c=r.providers;if(null!=c&&!o){const t=e;nn(c,e=>this.processProvider(e,t,c))}return void 0!==i&&void 0!==e.providers}processProvider(e,t,n){let r=hs(e=m(e))?e:m(e&&e.provide);const i=function(e,t,n){return ls(e)?us(void 0,e.useValue):us(cs(e),ts)}(e);if(hs(e)||!0!==e.multi)this.records.get(r);else{let t=this.records.get(r);t||(t=us(void 0,ts,!0),t.factory=()=>yn(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,i)}hydrate(e,t){var n;return t.value===ts&&(t.value=ns,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=m(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function as(e){const t=I(e),n=null!==t?t.factory:me(e);if(null!==n)return n;if(e instanceof Qt)throw new Error(`Token ${d(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=function(e,t){const n=[];for(let r=0;r<e;r++)n.push("?");return n}(t);throw new Error(`Can't resolve all parameters for ${d(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[C]||e[A]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function cs(e,t,n){let r;if(hs(e)){const t=m(e);return me(t)||as(t)}if(ls(e))r=()=>m(e.useValue);else if((i=e)&&i.useFactory)r=()=>e.useFactory(...yn(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>gn(m(e.useExisting));else{const t=m(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return me(t)||as(t);r=()=>new t(...yn(e.deps))}var i;return r}function us(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function ls(e){return null!==e&&"object"==typeof e&&hn in e}function hs(e){return"function"==typeof e}const ds=function(e,t,n){return function(e,t=null,n=null,r){const i=ss(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)};class ps{static create(e,t){return Array.isArray(e)?ds(e,t,""):ds(e.providers,e.parent,e.name||"")}}function fs(e,t){ft(fr(e)[1],Be())}function gs(e){let t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0;const r=[e];for(;t;){let i;if(ge(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);const t=e;t.inputs=ms(e.inputs),t.declaredInputs=ms(e.declaredInputs),t.outputs=ms(e.outputs);const n=i.hostBindings;n&&_s(e,n);const s=i.viewQuery,o=i.contentQueries;if(s&&ys(e,s),o&&vs(e,o),h(e.inputs,i.inputs),h(e.declaredInputs,i.declaredInputs),h(e.outputs,i.outputs),ge(i)&&i.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(i.data.animation)}}const t=i.features;if(t)for(let r=0;r<t.length;r++){const i=t[r];i&&i.ngInherit&&i(e),i===gs&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=It(i.hostAttrs,n=It(n,i.hostAttrs))}}(r)}function ms(e){return e===B?{}:e===$?[]:e}function ys(e,t){const n=e.viewQuery;e.viewQuery=n?(e,r)=>{t(e,r),n(e,r)}:t}function vs(e,t){const n=e.contentQueries;e.contentQueries=n?(e,r,i)=>{t(e,r,i),n(e,r,i)}:t}function _s(e,t){const n=e.hostBindings;e.hostBindings=n?(e,r)=>{t(e,r),n(e,r)}:t}ps.THROW_IF_NOT_FOUND=un,ps.NULL=new Xi,ps.\u0275prov=S({token:ps,providedIn:"any",factory:()=>gn(Qi)}),ps.__NG_ELEMENT_ID__=-1;let bs=null;function ws(){if(!bs){const e=j.Symbol;if(e&&e.iterator)bs=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(bs=n)}}}return bs}class Ss{constructor(e){this.wrapped=e}static wrap(e){return new Ss(e)}static unwrap(e){return Ss.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Ss}}function Ts(e){return!!Is(e)&&(Array.isArray(e)||!(e instanceof Map)&&ws()in e)}function Is(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function ks(e,t,n){return e[t]=n}function Es(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Cs(e,t,n,r){const i=qe();return Es(i,Ye(),t)&&(Ve(),function(e,t,n,r,i,s){const o=De(e,t);!function(e,t,n,r,i,s,o){if(null==s)Ee(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{const a=null==o?_(s):o(s,r||"",i);Ee(e)?e.setAttribute(t,i,a,n):n?t.setAttributeNS(n,i,a):t.setAttribute(i,a)}}(t[11],o,s,e.value,n,r,i)}(pt(),i,e,t,n,r)),Cs}function xs(e,t,n,r){return Es(e,Ye(),n)?t+_(n)+r:ni}function As(e,t,n,r,i,s,o,a){const c=qe(),u=Ve(),l=e+20,h=u.firstCreatePass?function(e,t,n,r,i,s,o,a,c){const u=t.consts,l=pi(t,e,4,o||null,Le(u,a));Ci(t,n,l,Le(u,c)),ft(t,l);const h=l.tViews=Ti(2,l,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u);return null!==t.queries&&(t.queries.template(t,l),h.queries=t.queries.embeddedTView(l)),l}(l,u,c,t,n,r,i,s,o):u.data[l];He(h,!1);const d=c[11].createComment("");Zr(u,c,d,h),pr(d,c),Vi(c,c[l]=Zi(d,c,d,h)),fe(h)&&bi(u,c,h),null!=o&&wi(c,h,a)}function Ds(e,t=P.Default){const n=qe();return null===n?gn(e,t):Ft(Be(),n,m(e),t)}function Ps(e,t,n){const r=qe();return Es(r,Ye(),t)&&Ei(Ve(),pt(),r,e,t,r[11],n,!1),Ps}function Rs(e,t,n,r,i){const s=i?"class":"style";Ji(e,n,t.inputs[s],s,r)}function Ns(e,t,n,r){const i=qe(),s=Ve(),o=20+e,a=i[11],c=i[o]=xr(a,t,Ue.lFrame.currentNamespace),u=s.firstCreatePass?function(e,t,n,r,i,s,o){const a=t.consts,c=pi(t,e,2,i,Le(a,s));return Ci(t,n,c,Le(a,o)),null!==c.attrs&&Yi(c,c.attrs,!1),null!==c.mergedAttrs&&Yi(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(o,s,i,0,t,n,r):s.data[o];He(u,!0);const l=u.mergedAttrs;null!==l&&wt(a,c,l);const h=u.classes;null!==h&&Hr(a,c,h);const d=u.styles;null!==d&&$r(a,c,d),64!=(64&u.flags)&&Zr(s,i,c,u),0===Ue.lFrame.elementDepthCount&&pr(c,i),Ue.lFrame.elementDepthCount++,fe(u)&&(bi(s,i,u),_i(s,u,i)),null!==r&&wi(i,u)}function Os(){let e=Be();ze()?Ge():(e=e.parent,He(e,!1));const t=e;Ue.lFrame.elementDepthCount--;const n=Ve();n.firstCreatePass&&(ft(n,e),de(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Rs(n,t,qe(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Rs(n,t,qe(),t.stylesWithoutHost,!1)}function Ls(e,t,n,r){Ns(e,t,n,r),Os()}function Ms(e,t,n){const r=qe(),i=Ve(),s=e+20,o=i.firstCreatePass?function(e,t,n,r,i){const s=t.consts,o=Le(s,r),a=pi(t,e,8,"ng-container",o);return null!==o&&Yi(a,o,!0),Ci(t,n,a,Le(s,i)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,i,r,t,n):i.data[s];He(o,!0);const a=r[s]=r[11].createComment("");Zr(i,r,a,o),pr(a,r),fe(o)&&(bi(i,r,o),_i(i,o,r)),null!=n&&wi(r,o)}function Zs(){let e=Be();const t=Ve();ze()?Ge():(e=e.parent,He(e,!1)),t.firstCreatePass&&(ft(t,e),de(e)&&t.queries.elementEnd(e))}function Us(){return qe()}function Fs(e){return!!e&&"function"==typeof e.then}function qs(e){return!!e&&"function"==typeof e.subscribe}const Vs=qs;function js(e,t,n,r){const i=qe(),s=Ve(),o=Be();return function(e,t,n,r,i,s,o,a){const c=fe(r),u=e.firstCreatePass&&Ki(e),l=Gi(t);let h=!0;if(3&r.type||a){const d=De(r,t),p=a?a(d):d,f=l.length,g=a?e=>a(xe(e[r.index])):r.index;if(Ee(n)){let o=null;if(!a&&c&&(o=function(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const e=i[s];if(e===n&&i[s+1]===r){const e=t[7],n=i[s+2];return e.length>n?e[n]:null}"string"==typeof e&&(s+=2)}return null}(e,t,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=$s(r,t,0,s,!1);const e=n.listen(p,i,s);l.push(s,e),u&&u.push(i,g,f,f+1)}}else s=$s(r,t,0,s,!0),p.addEventListener(i,s,o),l.push(s),u&&u.push(i,g,f,o)}else s=$s(r,t,0,s,!1);const d=r.outputs;let p;if(h&&null!==d&&(p=d[i])){const e=p.length;if(e)for(let n=0;n<e;n+=2){const e=t[p[n]][p[n+1]].subscribe(s),o=l.length;l.push(s,e),u&&u.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,e,t,!!n,r),js}function Bs(e,t,n,r){try{return!1!==n(r)}catch(i){return Wi(e,i),!1}}function $s(e,t,n,r,i){return function n(s){if(s===Function)return r;const o=2&e.flags?Re(e.index,t):t;0==(32&t[2])&&ji(o);let a=Bs(t,0,r,s),c=n.__ngNextListenerFn__;for(;c;)a=Bs(t,0,c,s)&&a,c=c.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Hs(e=1){return function(e){return(Ue.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,Ue.lFrame.contextLView))[8]}(e)}function zs(e,t,n){return Gs(e,"",t,"",n),zs}function Gs(e,t,n,r,i){const s=qe(),o=xs(s,t,n,r);return o!==ni&&Ei(Ve(),pt(),s,e,o,s[11],i,!1),Gs}function Ks(e,t,n,r,i){const s=e[n+1],o=null===t;let a=r?oi(s):ci(s),c=!1;for(;0!==a&&(!1===c||o);){const n=e[a+1];Ws(e[a],t)&&(c=!0,e[a+1]=r?li(n):ai(n)),a=r?oi(n):ci(n)}c&&(e[n+1]=r?ai(s):li(s))}function Ws(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&cn(e,t)>=0}const Js={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ys(e){return e.substring(Js.key,Js.keyEnd)}function Qs(e){return e.substring(Js.value,Js.valueEnd)}function Xs(e,t){const n=Js.textEnd;return n===t?-1:(t=Js.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,Js.key=t,n),no(e,t,n))}function eo(e,t){const n=Js.textEnd;let r=Js.key=no(e,t,n);return n===r?-1:(r=Js.keyEnd=function(e,t,n){let r;for(;t<n&&(45===(r=e.charCodeAt(t))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)t++;return t}(e,r,n),r=ro(e,r,n),r=Js.value=no(e,r,n),r=Js.valueEnd=function(e,t,n){let r=-1,i=-1,s=-1,o=t,a=o;for(;o<n;){const c=e.charCodeAt(o++);if(59===c)return a;34===c||39===c?a=o=io(e,c,o,n):t===o-4&&85===s&&82===i&&76===r&&40===c?a=o=io(e,41,o,n):c>32&&(a=o),s=i,i=r,r=-33&c}return a}(e,r,n),ro(e,r,n))}function to(e){Js.key=0,Js.keyEnd=0,Js.value=0,Js.valueEnd=0,Js.textEnd=e.length}function no(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function ro(e,t,n,r){return(t=no(e,t,n))<n&&t++,t}function io(e,t,n,r){let i=-1,s=n;for(;s<r;){const n=e.charCodeAt(s++);if(n==t&&92!==i)return s;i=92==n&&92===i?0:n}throw new Error}function so(e,t){return function(e,t,n,r){const i=qe(),s=Ve(),o=Qe(2);s.firstUpdatePass&&ho(s,e,o,true),t!==ni&&Es(i,o,t)&&mo(s,s.data[ht()],i,i[11],e,i[o+1]=function(e,t){return null==e||"object"==typeof e&&(e=d(Rn(e))),e}(t),true,o)}(e,t),so}function oo(e){uo(go,ao,e,!1)}function ao(e,t){for(let n=function(e){return to(e),eo(e,no(e,0,Js.textEnd))}(t);n>=0;n=eo(t,n))go(e,Ys(t),Qs(t))}function co(e,t){for(let n=function(e){return to(e),Xs(e,no(e,0,Js.textEnd))}(t);n>=0;n=Xs(t,n))on(e,Ys(t),!0)}function uo(e,t,n,r){const i=Ve(),s=Qe(2);i.firstUpdatePass&&ho(i,null,s,r);const o=qe();if(n!==ni&&Es(o,s,n)){const a=i.data[ht()];if(_o(a,r)&&!lo(i,s)){let e=r?a.classesWithoutHost:a.stylesWithoutHost;null!==e&&(n=p(e,n||"")),Rs(i,a,o,n,r)}else!function(e,t,n,r,i,s,o,a){i===ni&&(i=$);let c=0,u=0,l=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==l||null!==h;){const d=c<i.length?i[c+1]:void 0,p=u<s.length?s[u+1]:void 0;let f,g=null;l===h?(c+=2,u+=2,d!==p&&(g=h,f=p)):null===h||null!==l&&l<h?(c+=2,g=l):(u+=2,g=h,f=p),null!==g&&mo(e,t,n,r,g,f,o,a),l=c<i.length?i[c]:null,h=u<s.length?s[u]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function(e,t,n){if(null==n||""===n)return $;const r=[],i=Rn(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)e(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&e(r,s,i[s]);else"string"==typeof i&&t(r,i);return r}(e,t,n),r,s)}}function lo(e,t){return t>=e.expandoStartIndex}function ho(e,t,n,r){const i=e.data;if(null===i[n+1]){const s=i[ht()],o=lo(e,n);_o(s,r)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){const i=function(e){const t=Ue.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let s=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=fo(n=po(null,e,t,n,r),t.attrs,r),s=null);else{const o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=po(i,e,t,n,r),null===s){let n=function(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==ci(r))return e[oi(r)]}(e,t,r);void 0!==n&&Array.isArray(n)&&(n=po(null,e,t,n[1],r),n=fo(n,t.attrs,r),function(e,t,n,r){e[oi(n?t.classBindings:t.styleBindings)]=r}(e,t,r,n))}else s=function(e,t,n){let r;const i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++)r=fo(r,e[s].hostAttrs,n);return fo(r,t.attrs,n)}(e,t,r)}return void 0!==s&&(r?t.residualClasses=s:t.residualStyles=s),n}(i,s,t,r),function(e,t,n,r,i,s){let o=s?t.classBindings:t.styleBindings,a=oi(o),c=ci(o);e[r]=n;let u,l=!1;if(Array.isArray(n)){const e=n;u=e[1],(null===u||cn(e,u)>0)&&(l=!0)}else u=n;if(i)if(0!==c){const t=oi(e[a+1]);e[r+1]=si(t,a),0!==t&&(e[t+1]=ui(e[t+1],r)),e[a+1]=131071&e[a+1]|r<<17}else e[r+1]=si(a,0),0!==a&&(e[a+1]=ui(e[a+1],r)),a=r;else e[r+1]=si(c,0),0===a?a=r:e[c+1]=ui(e[c+1],r),c=r;l&&(e[r+1]=ai(e[r+1])),Ks(e,u,r,!0),Ks(e,u,r,!1),function(e,t,n,r,i){const s=i?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof t&&cn(s,t)>=0&&(n[r+1]=li(n[r+1]))}(t,u,e,r,s),o=si(a,c),s?t.classBindings=o:t.styleBindings=o}(i,s,t,n,o,r)}}function po(e,t,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=t[a],r=fo(r,s.hostAttrs,i),s!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function fo(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),on(e,o,!!n||t[++s]))}return void 0===e?null:e}function go(e,t,n){on(e,t,Rn(n))}function mo(e,t,n,r,i,s,o,a){if(!(3&t.type))return;const c=e.data,u=c[a+1];vo(1==(1&u)?yo(c,t,n,i,ci(u),o):void 0)||(vo(s)||2==(2&u)&&(s=yo(c,null,n,i,a,o)),function(e,t,n,r,i){const s=Ee(e);if(t)i?s?e.addClass(n,r):n.classList.add(r):s?e.removeClass(n,r):n.classList.remove(r);else{let t=-1===r.indexOf("-")?void 0:wr.DashCase;if(null==i)s?e.removeStyle(n,r,t):n.style.removeProperty(r);else{const o="string"==typeof i&&i.endsWith("!important");o&&(i=i.slice(0,-10),t|=wr.Important),s?e.setStyle(n,r,i,t):n.style.setProperty(r,i,o?"important":"")}}}(r,o,Ae(ht(),n),i,s))}function yo(e,t,n,r,i,s){const o=null===t;let a;for(;i>0;){const t=e[i],s=Array.isArray(t),c=s?t[1]:t,u=null===c;let l=n[i+1];l===ni&&(l=u?$:void 0);let h=u?an(l,r):c===r?l:void 0;if(s&&!vo(h)&&(h=an(t,r)),vo(h)&&(a=h,o))return a;const d=e[i+1];i=o?oi(d):ci(d)}if(null!==t){let e=s?t.residualClasses:t.residualStyles;null!=e&&(a=an(e,r))}return a}function vo(e){return void 0!==e}function _o(e,t){return 0!=(e.flags&(t?16:32))}function bo(e,t=""){const n=qe(),r=Ve(),i=e+20,s=r.firstCreatePass?pi(r,i,1,t,null):r.data[i],o=n[i]=function(e,t){return Ee(e)?e.createText(t):e.createTextNode(t)}(n[11],t);Zr(r,n,o,s),He(s,!1)}function wo(e){return So("",e,""),wo}function So(e,t,n){const r=qe(),i=xs(r,e,t,n);return i!==ni&&function(e,t,n){const r=Ae(t,e);!function(e,t,n){Ee(e)?e.setValue(t,n):t.textContent=n}(e[11],r,n)}(r,ht(),i),So}function To(e,t,n){uo(on,co,xs(qe(),e,t,n),!0)}function Io(e,t,n){const r=qe();return Es(r,Ye(),t)&&Ei(Ve(),pt(),r,e,t,r[11],n,!0),Io}const ko=void 0;var Eo=["en",[["a","p"],["AM","PM"],ko],[["AM","PM"],ko,ko],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ko,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ko,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ko,"{1} 'at' {0}",ko],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let Co={};function xo(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=Do(t);if(n)return n;const r=t.split("-")[0];if(n=Do(r),n)return n;if("en"===r)return Eo;throw new Error(`Missing locale data for the locale "${e}".`)}function Ao(e){return xo(e)[Po.PluralCase]}function Do(e){return e in Co||(Co[e]=j.ng&&j.ng.common&&j.ng.common.locales&&j.ng.common.locales[e]),Co[e]}var Po=(()=>((Po=Po||{})[Po.LocaleId=0]="LocaleId",Po[Po.DayPeriodsFormat=1]="DayPeriodsFormat",Po[Po.DayPeriodsStandalone=2]="DayPeriodsStandalone",Po[Po.DaysFormat=3]="DaysFormat",Po[Po.DaysStandalone=4]="DaysStandalone",Po[Po.MonthsFormat=5]="MonthsFormat",Po[Po.MonthsStandalone=6]="MonthsStandalone",Po[Po.Eras=7]="Eras",Po[Po.FirstDayOfWeek=8]="FirstDayOfWeek",Po[Po.WeekendRange=9]="WeekendRange",Po[Po.DateFormat=10]="DateFormat",Po[Po.TimeFormat=11]="TimeFormat",Po[Po.DateTimeFormat=12]="DateTimeFormat",Po[Po.NumberSymbols=13]="NumberSymbols",Po[Po.NumberFormats=14]="NumberFormats",Po[Po.CurrencyCode=15]="CurrencyCode",Po[Po.CurrencySymbol=16]="CurrencySymbol",Po[Po.CurrencyName=17]="CurrencyName",Po[Po.Currencies=18]="Currencies",Po[Po.Directionality=19]="Directionality",Po[Po.PluralCase=20]="PluralCase",Po[Po.ExtraData=21]="ExtraData",Po))();let Ro="en-US";function No(e){var t,n;n="Expected localeId to be defined",null==(t=e)&&function(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e} [Expected=> null != ${t} <=Actual]`)}(n,t),"string"==typeof e&&(Ro=e.toLowerCase().replace(/_/g,"-"))}function Oo(e,t,n,r,i){if(e=m(e),Array.isArray(e))for(let s=0;s<e.length;s++)Oo(e[s],t,n,r,i);else{const s=Ve(),o=qe();let a=hs(e)?e:m(e.provide),c=cs(e);const u=Be(),l=1048575&u.providerIndexes,h=u.directiveStart,d=u.providerIndexes>>20;if(hs(e)||!e.multi){const r=new bt(c,i,Ds),p=Zo(a,t,i?l:l+d,h);-1===p?(Mt(Rt(u,o),s,a),Lo(s,e,t.length),t.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(r),o.push(r)):(n[p]=r,o[p]=r)}else{const p=Zo(a,t,l+d,h),f=Zo(a,t,l,l+d),g=p>=0&&n[p],m=f>=0&&n[f];if(i&&!m||!i&&!g){Mt(Rt(u,o),s,a);const l=function(e,t,n,r,i){const s=new bt(e,n,Ds);return s.multi=[],s.index=t,s.componentProviders=0,Mo(s,i,r&&!n),s}(i?Fo:Uo,n.length,i,r,c);!i&&m&&(n[f].providerFactory=l),Lo(s,e,t.length,0),t.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(l),o.push(l)}else Lo(s,e,p>-1?p:f,Mo(n[i?f:p],c,!i&&r));!i&&r&&m&&n[f].componentProviders++}}}function Lo(e,t,n,r){const i=hs(t);if(i||t.useClass){const s=(t.useClass||t).prototype.ngOnDestroy;if(s){const o=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const e=o.indexOf(n);-1===e?o.push(n,[r,s]):o[e+1].push(r,s)}else o.push(n,s)}}}function Mo(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Zo(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function Uo(e,t,n,r){return qo(this.multi,[])}function Fo(e,t,n,r){const i=this.multi;let s;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=$t(n,n[1],this.providerFactory.index,r);s=t.slice(0,e),qo(i,s);for(let n=e;n<t.length;n++)s.push(t[n])}else s=[],qo(i,s);return s}function qo(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function Vo(e,t=[]){return n=>{n.providersResolver=(n,r)=>function(e,t,n){const r=Ve();if(r.firstCreatePass){const i=ge(e);Oo(n,r.data,r.blueprint,i,!0),Oo(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}class jo{}class Bo{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${d(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}class $o{}function Ho(...e){}function zo(e,t){return new Ko(De(e,t))}$o.NULL=new Bo;const Go=function(){return zo(Be(),qe())};let Ko=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=Go,e})();function Wo(e){return e instanceof Ko?e.nativeElement:e}class Jo{}let Yo=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Qo(),e})();const Qo=function(){const e=qe(),t=Re(Be().index,e);return function(e){return e[11]}(le(t)?t:e)};let Xo=(()=>{class e{}return e.\u0275prov=S({token:e,providedIn:"root",factory:()=>null}),e})();class ea{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const ta=new ea("12.1.5");class na{constructor(){}supports(e){return Ts(e)}create(e){return new ia(e)}}const ra=(e,t)=>t;class ia{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||ra}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const s=!n||t&&t.currentIndex<ca(n,r,i)?t:n,o=ca(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{i||(i=[]);const e=o-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;t<=s&&s<e&&(i[n]=r+1)}i[s.previousIndex]=t-e}}o!==a&&e(s,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ts(e))throw new Error(`Error trying to diff '${d(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,t)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),s=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[ws()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,e,r,t)),Object.is(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),s=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new sa(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new aa),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new aa),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class sa{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class oa{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class aa{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new oa,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ca(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class ua{constructor(){}supports(e){return e instanceof Map||Is(e)}create(){return new la}}class la{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Is(e)))throw new Error(`Error trying to diff '${d(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new ha(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class ha{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function da(){return new pa([new na])}let pa=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||da()),deps:[[e,new wn,new bn]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=S({token:e,providedIn:"root",factory:da}),e})();function fa(){return new ga([new ua])}let ga=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||fa()),deps:[[e,new wn,new bn]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=S({token:e,providedIn:"root",factory:fa}),e})();function ma(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&r.push(xe(s)),he(s))for(let e=10;e<s.length;e++){const t=s[e],n=t[1].firstChild;null!==n&&ma(t[1],t,n,r)}const o=n.type;if(8&o)ma(e,t,n.child,r);else if(32&o){const e=Sr(n,t);let i;for(;i=e();)r.push(i)}else if(16&o){const e=Fr(t,n);if(Array.isArray(e))r.push(...e);else{const n=Tr(t[16]);ma(n[1],n,e,r,!0)}}n=i?n.projectionNext:n.next}return r}class ya{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return ma(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(he(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(Dr(e,n),sn(t,n))}this._attachedToViewContainer=!1}Pr(this._lView[1],this._lView)}onDestroy(e){Ii(this._lView[1],this._lView,null,e)}markForCheck(){ji(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Bi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){We(!0);try{Bi(e,t,n)}finally{We(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,jr(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class va extends ya{constructor(e){super(e),this._view=e}detectChanges(){$i(this._view)}checkNoChanges(){!function(e){We(!0);try{$i(e)}finally{We(!1)}}(this._view)}get context(){return null}}const _a=function(e){return function(e,t,n){if(pe(e)&&!n){const n=Re(e.index,t);return new ya(n,n)}return 47&e.type?new ya(t[16],t):null}(Be(),qe(),16==(16&e))};let ba=(()=>{class e{}return e.__NG_ELEMENT_ID__=_a,e})();const wa=[new ua],Sa=new pa([new na]),Ta=new ga(wa),Ia=function(){return xa(Be(),qe())};let ka=(()=>{class e{}return e.__NG_ELEMENT_ID__=Ia,e})();const Ea=ka,Ca=class extends Ea{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=di(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),gi(t,n,e),new ya(n)}};function xa(e,t){return 4&e.type?new Ca(t,e,zo(e,t)):null}class Aa{}class Da{}const Pa=function(){return Za(Be(),qe())};let Ra=(()=>{class e{}return e.__NG_ELEMENT_ID__=Pa,e})();const Na=Ra,Oa=class extends Na{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return zo(this._hostTNode,this._hostLView)}get injector(){return new Gt(this._hostTNode,this._hostLView)}get parentInjector(){const e=Lt(this._hostTNode,this._hostLView);if(Et(e)){const t=xt(e,this._hostLView),n=Ct(e);return new Gt(t[1].data[n+8],t)}return new Gt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=La(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,i){const s=n||this.parentInjector;if(!i&&null==e.ngModule&&s){const e=s.get(Aa,null);e&&(i=e)}const o=e.create(s,r,void 0,i);return this.insert(o.hostView,t),o}insert(e,t){const n=e._lView,r=n[1];if(he(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],r=new Oa(t,t[6],t[3]);r.detach(r.indexOf(e))}}const i=this._adjustIndex(t),s=this._lContainer;!function(e,t,n,r){const i=10+r,s=n.length;r>0&&(n[i-1][4]=t),r<s-10?(t[4]=n[i],rn(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;const o=t[17];null!==o&&n!==o&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,n,s,i);const o=qr(i,s),a=n[11],c=Mr(a,s[7]);return null!==c&&function(e,t,n,r,i,s){r[0]=i,r[6]=t,jr(e,r,n,1,i,s)}(r,s[6],a,n,c,o),e.attachToViewContainerRef(),rn(Ma(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=La(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=Dr(this._lContainer,t);n&&(sn(Ma(this._lContainer),t),Pr(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=Dr(this._lContainer,t);return n&&null!=sn(Ma(this._lContainer),t)?new ya(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function La(e){return e[8]}function Ma(e){return e[8]||(e[8]=[])}function Za(e,t){let n;const r=t[e.index];if(he(r))n=r;else{let i;if(8&e.type)i=xe(r);else{const n=t[11];i=n.createComment("");const r=De(e,t);Nr(n,Mr(n,r),i,function(e,t){return Ee(e)?e.nextSibling(t):t.nextSibling}(n,r),!1)}t[e.index]=n=Zi(r,t,i,e),Vi(t,n)}return new Oa(n,e,t)}const Ua={};class Fa extends $o{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=ce(e);return new ja(t,this.ngModule)}}function qa(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const Va=new Qt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>vr});class ja extends jo{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(ti).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return qa(this.componentDef.inputs)}get outputs(){return qa(this.componentDef.outputs)}create(e,t,n,r){const i=(r=r||this.ngModule)?function(e,t){return{get:(n,r,i)=>{const s=e.get(n,Ua,i);return s!==Ua||r===Ua?s:t.get(n,r,i)}}}(e,r.injector):e,s=i.get(Jo,Ce),o=i.get(Xo,null),a=s.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=n?function(e,t,n){if(Ee(e))return e.selectRootElement(t,n===Z.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(a,n,this.componentDef.encapsulation):xr(s.createRenderer(null,this.componentDef),c,function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(c)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:vr,clean:zi,playerHandler:null,flags:0},d=Ti(0,null,null,1,0,null,null,null,null,null),p=di(null,d,h,l,null,null,s,a,o,i);let f,g;st(p);try{const e=function(e,t,n,r,i,s){const o=n[1];n[20]=e;const a=pi(o,20,2,"#host",null),c=a.mergedAttrs=t.hostAttrs;null!==c&&(Yi(a,c,!0),null!==e&&(wt(i,e,c),null!==a.classes&&Hr(i,e,a.classes),null!==a.styles&&$r(i,e,a.styles)));const u=r.createRenderer(e,t),l=di(n,Si(t),null,t.onPush?64:16,n[20],a,r,u,null,null);return o.firstCreatePass&&(Mt(Rt(a,n),o,t.type),Di(o,a),Ri(a,n.length,1)),Vi(n,l),n[20]=l}(u,this.componentDef,p,s,a);if(u)if(n)wt(a,u,["ng-version",ta.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!Yr(i))break;i=s}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&wt(a,u,e),t&&t.length>0&&Hr(a,u,t.join(" "))}if(g=Pe(d,20),void 0!==t){const e=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}f=function(e,t,n,r,i){const s=n[1],o=function(e,t,n){const r=Be();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ni(e,r,t,fi(e,t,1,null),n));const i=$t(t,e,r.directiveStart,r);pr(i,t);const s=De(r,t);return s&&pr(s,t),i}(s,n,t);if(r.components.push(o),e[8]=o,i&&i.forEach(e=>e(o,t)),t.contentQueries){const e=Be();t.contentQueries(1,o,e.directiveStart)}const a=Be();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(dt(a.index),xi(n[1],a,0,a.directiveStart,a.directiveEnd,t),Ai(t,o)),o}(e,this.componentDef,p,h,[fs]),gi(d,p,null)}finally{lt()}return new Ba(this.componentType,f,zo(g,p),p,g)}}class Ba extends class{}{constructor(e,t,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=t,this.hostView=this.changeDetectorRef=new va(r),this.componentType=e}get injector(){return new Gt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const $a=new Map;class Ha extends Aa{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Fa(this);const n=ue(e),r=e[W]||null;r&&No(r),this._bootstrapComponents=br(n.bootstrap),this._r3Injector=ss(e,t,[{provide:Aa,useValue:this},{provide:$o,useValue:this.componentFactoryResolver}],d(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=ps.THROW_IF_NOT_FOUND,n=P.Default){return e===ps||e===Aa||e===Qi?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class za extends Da{constructor(e){super(),this.moduleType=e,null!==ue(e)&&function(e){const t=new Set;!function e(n){const r=ue(n,!0),i=r.id;null!==i&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${d(t)} vs ${d(t.name)}`)}(i,$a.get(i),n),$a.set(i,n));const s=br(r.imports);for(const o of s)t.has(o)||(t.add(o),e(o))}(e)}(e)}create(e){return new Ha(this.moduleType,e)}}function Ga(e,t,n){const r=Je()+e,i=qe();return i[r]===ni?ks(i,r,n?t.call(n):t()):function(e,t){return e[t]}(i,r)}function Ka(e,t,n,r){return Wa(qe(),Je(),e,t,n,r)}function Wa(e,t,n,r,i,s){const o=t+n;return Es(e,o,i)?ks(e,o+1,s?r.call(s,i):r(i)):function(e,t){const n=e[t];return n===ni?void 0:n}(e,o+1)}function Ja(e,t){const n=Ve();let r;const i=e+20;n.firstCreatePass?(r=function(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}throw new v("302",`The pipe '${e}' could not be found!`)}(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=me(r.type)),o=N(Ds);try{const e=Dt(!1),t=s();return Dt(e),function(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(n,qe(),i,t),t}finally{N(o)}}function Ya(e,t,n){const r=e+20,i=qe(),s=function(e,t){return e[t]}(i,r);return function(e,t){return Ss.isWrapped(t)&&(t=Ss.unwrap(t),e[Ue.lFrame.bindingIndex]=ni),t}(i,function(e,t){return e[1].data[t].pure}(i,r)?Wa(i,Je(),t,s.transform,n,s):s.transform(n))}function Qa(e){return t=>{setTimeout(e,void 0,t)}}const Xa=class extends r.xQ{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){var r,s,o;let a=e,c=t||(()=>null),u=n;if(e&&"object"==typeof e){const t=e;a=null===(r=t.next)||void 0===r?void 0:r.bind(t),c=null===(s=t.error)||void 0===s?void 0:s.bind(t),u=null===(o=t.complete)||void 0===o?void 0:o.bind(t)}this.__isAsync&&(c=Qa(c),a&&(a=Qa(a)),u&&(u=Qa(u)));const l=super.subscribe({next:a,error:c,complete:u});return e instanceof i.w&&e.add(l),l}};function ec(){return this._results[ws()]()}class tc{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=ws(),n=tc.prototype;n[t]||(n[t]=ec)}get changes(){return this._changes||(this._changes=new Xa)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const n=tn(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(this._results,n,t))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class nc{constructor(e){this.queryList=e,this.matches=null}clone(){return new nc(this.queryList)}setDirty(){this.queryList.setDirty()}}class rc{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let e=0;e<n;e++){const n=t.getByIndex(e);r.push(this.queries[n.indexInDeclarationView].clone())}return new rc(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==yc(e,t).matches&&this.queries[t].setDirty()}}class ic{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class sc{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,i=this.getByIndex(n).embeddedTView(e,r);i&&(i.indexInDeclarationView=n,null!==t?t.push(i):t=[i])}return null!==t?new sc(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class oc{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new oc(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(e,t,ac(t,i)),this.matchTNodeWithReadOption(e,t,Bt(t,e,i,!1,!1))}else n===ka?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Bt(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Ko||r===Ra||r===ka&&4&t.type)this.addMatch(t.index,-2);else{const n=Bt(t,e,r,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function ac(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function cc(e,t,n,r){return-1===n?function(e,t){return 11&e.type?zo(e,t):4&e.type?xa(e,t):null}(t,e):-2===n?function(e,t,n){return n===Ko?zo(t,e):n===ka?xa(t,e):n===Ra?Za(t,e):void 0}(e,t,r):$t(e,e[1],n,t)}function uc(e,t,n,r){const i=t[19].queries[r];if(null===i.matches){const r=e.data,s=n.matches,o=[];for(let e=0;e<s.length;e+=2){const i=s[e];o.push(i<0?null:cc(t,r[i],s[e+1],n.metadata.read))}i.matches=o}return i.matches}function lc(e,t,n,r){const i=e.queries.getByIndex(n),s=i.matches;if(null!==s){const o=uc(e,t,i,n);for(let e=0;e<s.length;e+=2){const n=s[e];if(n>0)r.push(o[e/2]);else{const i=s[e+1],o=t[-n];for(let e=10;e<o.length;e++){const t=o[e];t[17]===t[3]&&lc(t[1],t,i,r)}if(null!==o[9]){const e=o[9];for(let t=0;t<e.length;t++){const n=e[t];lc(n[1],n,i,r)}}}}}return r}function hc(e){const t=qe(),n=Ve(),r=tt();nt(r+1);const i=yc(n,r);if(e.dirty&&Ne(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const s=i.crossesNgTemplate?lc(n,t,r,[]):uc(n,t,i,r);e.reset(s,Wo),e.notifyOnChanges()}return!0}return!1}function dc(e,t,n){const r=Ve();r.firstCreatePass&&(mc(r,new ic(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),gc(r,qe(),t)}function pc(e,t,n,r){const i=Ve();if(i.firstCreatePass){const s=Be();mc(i,new ic(t,n,r),s.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}gc(i,qe(),n)}function fc(){return e=qe(),t=tt(),e[19].queries[t].queryList;var e,t}function gc(e,t,n){const r=new tc(4==(4&n));Ii(e,t,r,r.destroy),null===t[19]&&(t[19]=new rc),t[19].queries.push(new nc(r))}function mc(e,t,n){null===e.queries&&(e.queries=new sc),e.queries.track(new oc(t,n))}function yc(e,t){return e.queries.getByIndex(t)}const vc=new Qt("Application Initializer");let _c=(()=>{class e{constructor(e){this.appInits=e,this.resolve=Ho,this.reject=Ho,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();if(Fs(t))e.push(t);else if(Vs(t)){const n=new Promise((e,n)=>{t.subscribe({complete:e,error:n})});e.push(n)}}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(gn(vc,8))},e.\u0275prov=S({token:e,factory:e.\u0275fac}),e})();const bc=new Qt("AppId"),wc={provide:bc,useFactory:function(){return`${Sc()}${Sc()}${Sc()}`},deps:[]};function Sc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Tc=new Qt("Platform Initializer"),Ic=new Qt("Platform ID"),kc=new Qt("appBootstrapListener");let Ec=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac}),e})();const Cc=new Qt("LocaleId"),xc=new Qt("DefaultCurrencyCode");class Ac{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const Dc=function(e){return new za(e)},Pc=Dc,Rc=function(e){return Promise.resolve(Dc(e))},Nc=function(e){const t=Dc(e),n=br(ue(e).declarations).reduce((e,t)=>{const n=ce(t);return n&&e.push(new ja(n)),e},[]);return new Ac(t,n)},Oc=Nc,Lc=function(e){return Promise.resolve(Nc(e))};let Mc=(()=>{class e{constructor(){this.compileModuleSync=Pc,this.compileModuleAsync=Rc,this.compileModuleAndAllComponentsSync=Oc,this.compileModuleAndAllComponentsAsync=Lc}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac}),e})();const Zc=(()=>Promise.resolve(0))();function Uc(e){"undefined"==typeof Zone?Zc.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Fc{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xa(!1),this.onMicrotaskEmpty=new Xa(!1),this.onStable=new Xa(!1),this.onError=new Xa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=!n&&t,this.shouldCoalesceRunChangeDetection=n,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let e=j.requestAnimationFrame,t=j.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(j,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,jc(e),e.isCheckStableRunning=!0,Vc(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),jc(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return Bc(e),n.invokeTask(i,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),$c(e)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return Bc(e),n.invoke(i,s,o,a,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),$c(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,jc(e),Vc(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Fc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Fc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,e,qc,Ho,Ho);try{return i.runTask(s,t,n)}finally{i.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const qc={};function Vc(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function jc(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Bc(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function $c(e){e._nesting--,Vc(e)}class Hc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xa,this.onMicrotaskEmpty=new Xa,this.onStable=new Xa,this.onError=new Xa}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let zc=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Fc.assertNotInAngularZone(),Uc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Uc(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(gn(Fc))},e.\u0275prov=S({token:e,factory:e.\u0275fac}),e})(),Gc=(()=>{class e{constructor(){this._applications=new Map,Yc.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return Yc.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac}),e})();class Kc{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}function Wc(e){Yc=e}let Jc,Yc=new Kc,Qc=!0,Xc=!1;function eu(){return Xc=!0,Qc}function tu(){if(Xc)throw new Error("Cannot enable prod mode after platform setup.");Qc=!1}const nu=new Qt("AllowMultipleToken");class ru{constructor(e,t){this.name=e,this.token=t}}function iu(e,t,n=[]){const r=`Platform: ${t}`,i=new Qt(r);return(t=[])=>{let s=su();if(!s||s.injector.get(nu,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0},{provide:es,useValue:"platform"});!function(e){if(Jc&&!Jc.destroyed&&!Jc.injector.get(nu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Jc=e.get(ou);const t=e.get(Tc,null);t&&t.forEach(e=>e())}(ps.create({providers:e,name:r}))}return function(e){const t=su();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function su(){return Jc&&!Jc.destroyed?Jc:null}let ou=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new Hc:("zone.js"===e?void 0:e)||new Fc({enableLongStackTrace:eu(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),r=[{provide:Fc,useValue:n}];return n.run(()=>{const t=ps.create({providers:r,parent:this.injector,name:e.moduleType.name}),i=e.create(t),s=i.injector.get(yr,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const e=n.onError.subscribe({next:e=>{s.handleError(e)}});i.onDestroy(()=>{uu(this._modules,i),e.unsubscribe()})}),function(e,t,n){try{const r=n();return Fs(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,n,()=>{const e=i.injector.get(_c);return e.runInitializers(),e.donePromise.then(()=>(No(i.injector.get(Cc,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,t=[]){const n=au({},t);return function(e,t,n){const r=new za(n);return Promise.resolve(r)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(cu);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${d(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(gn(ps))},e.\u0275prov=S({token:e,factory:e.\u0275fac}),e})();function au(e,t){return Array.isArray(t)?t.reduce(au,e):Object.assign(Object.assign({},e),t)}let cu=(()=>{class e{constructor(e,t,n,r,i){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new s.y(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),h=new s.y(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{Fc.assertNotInAngularZone(),Uc(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Fc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(l,h.pipe(e=>{return(0,c.x)()((t=u,function(e){let n;n="function"==typeof t?t:function(){return t};const r=Object.create(e,a.N);return r.source=e,r.subjectFactory=n,r})(e));var t}))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof jo?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Aa),i=n.create(ps.NULL,[],t||n.selector,r),s=i.location.nativeElement,o=i.injector.get(zc,null),a=o&&i.injector.get(Gc);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),uu(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;uu(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(kc,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(gn(Fc),gn(ps),gn(yr),gn($o),gn(_c))},e.\u0275prov=S({token:e,factory:e.\u0275fac}),e})();function uu(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class lu{}class hu{}const du={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let pu=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||du}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split("#");return void 0===r&&(r="default"),n(8255)(t).then(e=>e[r]).then(e=>fu(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+i]).then(e=>fu(e,t,r))}}return e.\u0275fac=function(t){return new(t||e)(gn(Mc),gn(hu,8))},e.\u0275prov=S({token:e,factory:e.\u0275fac}),e})();function fu(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const gu=function(e){return null},mu=iu(null,"core",[{provide:Ic,useValue:"unknown"},{provide:ou,deps:[ps]},{provide:Gc,deps:[]},{provide:Ec,deps:[]}]),yu=[{provide:cu,useClass:cu,deps:[Fc,ps,yr,$o,_c]},{provide:Va,deps:[Fc],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:_c,useClass:_c,deps:[[new bn,vc]]},{provide:Mc,useClass:Mc,deps:[]},wc,{provide:pa,useFactory:function(){return Sa},deps:[]},{provide:ga,useFactory:function(){return Ta},deps:[]},{provide:Cc,useFactory:function(e){return No(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new _n(Cc),new bn,new wn]]},{provide:xc,useValue:"USD"}];let vu=(()=>{class e{constructor(e){}}return e.\u0275fac=function(t){return new(t||e)(gn(cu))},e.\u0275mod=re({type:e}),e.\u0275inj=T({providers:yu}),e})()},8939:function(e,t,n){"use strict";n.d(t,{hO:function(){return g},xv:function(){return h},Dh:function(){return l},GT:function(){return c},cc:function(){return m},on:function(){return d},pX:function(){return a}});var r=n(3018),i=n(7841),s=n(4459);e=n.hmd(e);const o=["ngOnDestroy"],a=(e,t,n,r={})=>new Proxy(e,{get:(i,s)=>n.runOutsideAngular(()=>{var i;if(e[s])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(s,e[s]),e[s];if(o.indexOf(s)>-1)return()=>{};const a=t.toPromise().then(e=>{const t=e&&e[s];return"function"==typeof t?t.bind(e):t&&t.then?t.then(e=>n.run(()=>e)):n.run(()=>t)});return new Proxy(()=>{},{get:(e,t)=>a[t],apply:(e,t,n)=>a.then(e=>{var t;const i=e&&e(...n);return(null===(t=null==r?void 0:r.spy)||void 0===t?void 0:t.apply)&&r.spy.apply(s,n,i),i})})})}),c=(e,t)=>{t.forEach(t=>{Object.getOwnPropertyNames(t.prototype||t).forEach(n=>{Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype||t,n))})})};class u{constructor(e){return e}}const l=new r.OlP("angularfire2.app.options"),h=new r.OlP("angularfire2.app.name");function d(t,n,r){const s="object"==typeof r&&r||{};s.name=s.name||"string"==typeof r&&r||"[DEFAULT]";const o=i.Z.apps.filter(e=>e&&e.name===s.name)[0]||n.runOutsideAngular(()=>i.Z.initializeApp(t,s));try{JSON.stringify(t)!==JSON.stringify(o.options)&&p("error",`${o.name} Firebase App already initialized with different options${e.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(a){}return new u(o)}const p=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)},f={provide:u,useFactory:d,deps:[l,r.R0b,[new r.FiY,h]]};let g=(()=>{class e{constructor(e){i.Z.registerVersion("angularfire",s.q4.full,"core"),i.Z.registerVersion("angularfire",s.q4.full,"app-compat"),i.Z.registerVersion("angular",r.q4F.full,e.toString())}static initializeApp(t,n){return{ngModule:e,providers:[{provide:l,useValue:t},{provide:h,useValue:n}]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.Lbi))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[f]}),e})();function m(e,t,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(t=>t[0]===e)||[];if(s)return function(e,t){try{return e.toString()===t.toString()}catch(n){return e===t}}(i,o)||(v("error",`${t} was already initialized on the ${n} Firebase App with different settings.${y?" You may need to reload as Firebase is not HMR aware.":""}`),v("warn",{is:i,was:o})),s;{const t=r();return globalThis.\u0275AngularfireInstanceCache.push([e,t,i]),t}}const y=!!e.hot,v=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4459:function(e,t,n){"use strict";n.d(t,{q4:function(){return gn},iC:function(){return En},fc:function(){return kn},HU:function(){return wn},vb:function(){return yn},JM:function(){return mn},u3:function(){return xn}});var r=n(3018),i=n(2329),s=n(6304),o=n(279),a=n(3854),c=n(8604),u=n(9306),l=n(6508);const h=new a.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function d(e){return e instanceof a.ZR&&e.code.includes("request-failed")}function p({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function f(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function g(e,t){return m.apply(this,arguments)}function m(){return(m=(0,s.Z)(function*(e,t){const n=(yield t.json()).error;return h.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})})).apply(this,arguments)}function y({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function v(e,{refreshToken:t}){const n=y(e);return n.append("Authorization",function(e){return`FIS_v2 ${e}`}(t)),n}function _(e){return b.apply(this,arguments)}function b(){return(b=(0,s.Z)(function*(e){const t=yield e();return t.status>=500&&t.status<600?e():t})).apply(this,arguments)}function w(e,t){return S.apply(this,arguments)}function S(){return(S=(0,s.Z)(function*({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=p(e),i=y(e),s=t.getImmediate({optional:!0});if(s){const e=yield s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:"FIS_v2",appId:e.appId,sdkVersion:"w:0.5.9"})},a=yield _(()=>fetch(r,o));if(a.ok){const e=yield a.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:f(e.authToken)}}throw yield g("Create Installation",a)})).apply(this,arguments)}function T(e){return new Promise(t=>{setTimeout(t,e)})}const I=/^[cdef][\w-]{21}$/;function k(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return I.test(t)?t:""}catch(e){return""}}function E(e){return`${e.appName}!${e.appId}`}const C=new Map;function x(e,t){const n=E(e);A(n,t),function(e,t){const n=(!D&&"BroadcastChannel"in self&&(D=new BroadcastChannel("[Firebase] FID Change"),D.onmessage=e=>{A(e.data.key,e.data.fid)}),D);n&&n.postMessage({key:e,fid:t}),0===C.size&&D&&(D.close(),D=null)}(n,t)}function A(e,t){const n=C.get(e);if(n)for(const r of n)r(t)}let D=null;const P="firebase-installations-store";let R=null;function N(){return R||(R=(0,l.X3)("firebase-installations-database",1,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(P)}}})),R}function O(e,t){return L.apply(this,arguments)}function L(){return(L=(0,s.Z)(function*(e,t){const n=E(e),r=(yield N()).transaction(P,"readwrite"),i=r.objectStore(P),s=yield i.get(n);return yield i.put(t,n),yield r.done,s&&s.fid===t.fid||x(e,t.fid),t})).apply(this,arguments)}function M(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,s.Z)(function*(e){const t=E(e),n=(yield N()).transaction(P,"readwrite");yield n.objectStore(P).delete(t),yield n.done})).apply(this,arguments)}function U(e,t){return F.apply(this,arguments)}function F(){return(F=(0,s.Z)(function*(e,t){const n=E(e),r=(yield N()).transaction(P,"readwrite"),i=r.objectStore(P),s=yield i.get(n),o=t(s);return void 0===o?yield i.delete(n):yield i.put(o,n),yield r.done,!o||s&&s.fid===o.fid||x(e,o.fid),o})).apply(this,arguments)}function q(e){return V.apply(this,arguments)}function V(){return(V=(0,s.Z)(function*(e){let t;const n=yield U(e.appConfig,n=>{const r=j(n),i=B(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}})).apply(this,arguments)}function j(e){return K(e||{fid:k(),registrationStatus:0})}function B(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(h.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return $.apply(this,arguments)}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:H(e)}:{installationEntry:t}}function $(){return($=(0,s.Z)(function*(e,t){try{const n=yield w(e,t);return O(e.appConfig,n)}catch(n){throw d(n)&&409===n.customData.serverCode?yield M(e.appConfig):yield O(e.appConfig,{fid:t.fid,registrationStatus:0}),n}})).apply(this,arguments)}function H(e){return z.apply(this,arguments)}function z(){return(z=(0,s.Z)(function*(e){let t=yield G(e.appConfig);for(;1===t.registrationStatus;)yield T(100),t=yield G(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=yield q(e);return n||t}return t})).apply(this,arguments)}function G(e){return U(e,e=>{if(!e)throw h.create("installation-not-found");return K(e)})}function K(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function W(e,t){return J.apply(this,arguments)}function J(){return(J=(0,s.Z)(function*({appConfig:e,heartbeatServiceProvider:t},n){const r=Y(e,n),i=v(e,n),s=t.getImmediate({optional:!0});if(s){const e=yield s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:"w:0.5.9",appId:e.appId}})},a=yield _(()=>fetch(r,o));if(a.ok)return f(yield a.json());throw yield g("Generate Auth Token",a)})).apply(this,arguments)}function Y(e,{fid:t}){return`${p(e)}/${t}/authTokens:generate`}function Q(e){return X.apply(this,arguments)}function X(){return(X=(0,s.Z)(function*(e,t=!1){let n;const r=yield U(e.appConfig,r=>{if(!se(r))throw h.create("not-registered");const i=r.authToken;if(!t&&oe(i))return r;if(1===i.requestStatus)return n=ee(e,t),r;{if(!navigator.onLine)throw h.create("app-offline");const t=ae(r);return n=re(e,t),t}});return n?yield n:r.authToken})).apply(this,arguments)}function ee(e,t){return te.apply(this,arguments)}function te(){return(te=(0,s.Z)(function*(e,t){let n=yield ne(e.appConfig);for(;1===n.authToken.requestStatus;)yield T(100),n=yield ne(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Q(e,t):r})).apply(this,arguments)}function ne(e){return U(e,e=>{if(!se(e))throw h.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t})}function re(e,t){return ie.apply(this,arguments)}function ie(){return(ie=(0,s.Z)(function*(e,t){try{const n=yield W(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return yield O(e.appConfig,r),n}catch(n){if(!d(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});yield O(e.appConfig,n)}else yield M(e.appConfig);throw n}})).apply(this,arguments)}function se(e){return void 0!==e&&2===e.registrationStatus}function oe(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(e)}function ae(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function ce(){return(ce=(0,s.Z)(function*(e){const t=e,{installationEntry:n,registrationPromise:r}=yield q(t);return r?r.catch(console.error):Q(t).catch(console.error),n.fid})).apply(this,arguments)}function ue(){return(ue=(0,s.Z)(function*(e,t=!1){const n=e;return yield le(n),(yield Q(n,t)).token})).apply(this,arguments)}function le(e){return he.apply(this,arguments)}function he(){return(he=(0,s.Z)(function*(e){const{registrationPromise:t}=yield q(e);t&&(yield t)})).apply(this,arguments)}function de(e){return h.create("missing-app-config-values",{valueName:e})}(0,o._registerComponent)(new c.wA("installations",e=>{const t=e.getProvider("app").getImmediate();return{app:t,appConfig:function(e){if(!e||!e.options)throw de("App Configuration");if(!e.name)throw de("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw de(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),heartbeatServiceProvider:(0,o._getProvider)(t,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,o._registerComponent)(new c.wA("installations-internal",e=>{const t=e.getProvider("app").getImmediate(),n=(0,o._getProvider)(t,"installations").getImmediate();return{getId:()=>function(e){return ce.apply(this,arguments)}(n),getToken:e=>function(e){return ue.apply(this,arguments)}(n,e)}},"PRIVATE")),(0,o.registerVersion)("@firebase/installations","0.5.9"),(0,o.registerVersion)("@firebase/installations","0.5.9","esm2017");const pe=new a.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class fe{constructor(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const n=Date.now()-t,r=n<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${n}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}fetch(e){var t=this;return(0,s.Z)(function*(){const[n,r]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(r&&t.isCachedDataFresh(e.cacheMaxAgeMillis,n))return r;e.eTag=r&&r.eTag;const i=yield t.client.fetch(e),s=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===i.status&&s.push(t.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(s),i})()}}function ge(e=navigator){return e.languages&&e.languages[0]||e.language}class me{constructor(e,t,n,r,i,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=s}fetch(e){var t=this;return(0,s.Z)(function*(){const[n,r]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),i=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},o={sdk_version:t.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:t.appId,language_code:ge()},a={method:"POST",headers:s,body:JSON.stringify(o)},c=fetch(i,a),u=new Promise((t,n)=>{e.signal.addEventListener(()=>{const e=new Error("The operation was aborted.");e.name="AbortError",n(e)})});let l;try{yield Promise.race([c,u]),l=yield c}catch(g){let e="fetch-client-network";throw"AbortError"===g.name&&(e="fetch-timeout"),pe.create(e,{originalErrorMessage:g.message})}let h=l.status;const d=l.headers.get("ETag")||void 0;let p,f;if(200===l.status){let e;try{e=yield l.json()}catch(g){throw pe.create("fetch-client-parse",{originalErrorMessage:g.message})}p=e.entries,f=e.state}if("INSTANCE_STATE_UNSPECIFIED"===f?h=500:"NO_CHANGE"===f?h=304:"NO_TEMPLATE"!==f&&"EMPTY_CONFIG"!==f||(p={}),304!==h&&200!==h)throw pe.create("fetch-status",{httpStatus:h});return{status:h,eTag:d,config:p}})()}}class ye{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,s.Z)(function*(){const n=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,n)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:n}){var r=this;return(0,s.Z)(function*(){yield function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(pe.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(e.signal,t);try{const t=yield r.client.fetch(e);return yield r.storage.deleteThrottleMetadata(),t}catch(i){if(!function(e){if(!(e instanceof a.ZR&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(i))throw i;const t={throttleEndTimeMillis:Date.now()+(0,a.$s)(n),backoffCount:n+1};return yield r.storage.setThrottleMetadata(t),r.attemptFetch(e,t)}})()}}class ve{constructor(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function _e(e,t){const n=e.target.error||void 0;return pe.create(t,{originalErrorMessage:n&&n.message})}class be{constructor(e,t,n,r=function(){return new Promise((e,t)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=e=>{t(_e(e,"storage-open"))},n.onsuccess=t=>{e(t.target.result)},n.onupgradeneeded=e=>{const t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore("app_namespace_store",{keyPath:"compositeKey"})}}}catch(n){t(pe.create("storage-open",{originalErrorMessage:n}))}})}()){this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,s.Z)(function*(){const n=yield t.openDbPromise;return new Promise((r,i)=>{const s=n.transaction(["app_namespace_store"],"readonly").objectStore("app_namespace_store"),o=t.createCompositeKey(e);try{const e=s.get(o);e.onerror=e=>{i(_e(e,"storage-get"))},e.onsuccess=e=>{const t=e.target.result;r(t?t.value:void 0)}}catch(a){i(pe.create("storage-get",{originalErrorMessage:a&&a.message}))}})})()}set(e,t){var n=this;return(0,s.Z)(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const o=r.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),a=n.createCompositeKey(e);try{const e=o.put({compositeKey:a,value:t});e.onerror=e=>{s(_e(e,"storage-set"))},e.onsuccess=()=>{i()}}catch(c){s(pe.create("storage-set",{originalErrorMessage:c&&c.message}))}})})()}delete(e){var t=this;return(0,s.Z)(function*(){const n=yield t.openDbPromise;return new Promise((r,i)=>{const s=n.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),o=t.createCompositeKey(e);try{const e=s.delete(o);e.onerror=e=>{i(_e(e,"storage-delete"))},e.onsuccess=()=>{r()}}catch(a){i(pe.create("storage-delete",{originalErrorMessage:a&&a.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class we{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,s.Z)(function*(){const t=e.storage.getLastFetchStatus(),n=e.storage.getLastSuccessfulFetchTimestampMillis(),r=e.storage.getActiveConfig(),i=yield t;i&&(e.lastFetchStatus=i);const s=yield n;s&&(e.lastSuccessfulFetchTimestampMillis=s);const o=yield r;o&&(e.activeConfig=o)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Se(){return Te.apply(this,arguments)}function Te(){return(Te=(0,s.Z)(function*(){if(!(0,a.hl)())return!1;try{return yield(0,a.eu)()}catch(e){return!1}})).apply(this,arguments)}(0,o._registerComponent)(new c.wA("remote-config",function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw pe.create("registration-window");if(!(0,a.hl)())throw pe.create("indexed-db-unavailable");const{projectId:i,apiKey:s,appId:c}=n.options;if(!i)throw pe.create("registration-project-id");if(!s)throw pe.create("registration-api-key");if(!c)throw pe.create("registration-app-id");const l=new be(c,n.name,t=t||"firebase"),h=new we(l),d=new u.Yd("@firebase/remote-config");d.logLevel=u.in.ERROR;const p=new me(r,o.SDK_VERSION,t,i,s,c),f=new ye(p,l),g=new fe(f,l,h,d),m=new ve(n,g,h,l,d);return function(e){const t=(0,a.m9)(e);t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0}))}(m),m},"PUBLIC").setMultipleInstances(!0)),(0,o.registerVersion)("@firebase/remote-config","0.3.8"),(0,o.registerVersion)("@firebase/remote-config","0.3.8","esm2017");const Ie="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";var ke=(()=>(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(ke||(ke={})),ke))();function Ee(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ce(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}const xe="fcm_token_details_db";function Ae(e){return De.apply(this,arguments)}function De(){return(De=(0,s.Z)(function*(e){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(e=>e.name).includes(xe))return null;let t=null;var n;return(yield(0,l.X3)(xe,5,{upgrade:(n=(0,s.Z)(function*(n,r,i,s){var o;if(r<2)return;if(!n.objectStoreNames.contains("fcm_token_object_Store"))return;const a=s.objectStore("fcm_token_object_Store"),c=yield a.index("fcmSenderId").get(e);if(yield a.clear(),c)if(2===r){const e=c;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(o=e.createTime)&&void 0!==o?o:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"==typeof e.vapidKey?e.vapidKey:Ee(e.vapidKey)}}}else if(3===r){const e=c;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:Ee(e.auth),p256dh:Ee(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:Ee(e.vapidKey)}}}else if(4===r){const e=c;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:Ee(e.auth),p256dh:Ee(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:Ee(e.vapidKey)}}}}),function(e,t,r,i){return n.apply(this,arguments)})})).close(),yield(0,l.Lj)(xe),yield(0,l.Lj)("fcm_vapid_details_db"),yield(0,l.Lj)("undefined"),Pe(t)?t:null})).apply(this,arguments)}function Pe(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}let Re=null;function Ne(){return Re||(Re=(0,l.X3)("firebase-messaging-database",1,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore("firebase-messaging-store")}}})),Re}function Oe(e){return Le.apply(this,arguments)}function Le(){return(Le=(0,s.Z)(function*(e){const t=qe(e),n=yield Ne(),r=yield n.transaction("firebase-messaging-store").objectStore("firebase-messaging-store").get(t);if(r)return r;{const t=yield Ae(e.appConfig.senderId);if(t)return yield Me(e,t),t}})).apply(this,arguments)}function Me(e,t){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,s.Z)(function*(e,t){const n=qe(e),r=(yield Ne()).transaction("firebase-messaging-store","readwrite");return yield r.objectStore("firebase-messaging-store").put(t,n),yield r.done,t})).apply(this,arguments)}function Ue(e){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,s.Z)(function*(e){const t=qe(e),n=(yield Ne()).transaction("firebase-messaging-store","readwrite");yield n.objectStore("firebase-messaging-store").delete(t),yield n.done})).apply(this,arguments)}function qe({appConfig:e}){return e.appId}const Ve=new a.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function je(e,t){return Be.apply(this,arguments)}function Be(){return(Be=(0,s.Z)(function*(e,t){const n=yield We(e),r=Ye(t),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{const t=yield fetch(Ke(e.appConfig),i);s=yield t.json()}catch(o){throw Ve.create("token-subscribe-failed",{errorInfo:o})}if(s.error)throw Ve.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw Ve.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function $e(e,t){return He.apply(this,arguments)}function He(){return(He=(0,s.Z)(function*(e,t){const n=yield We(e),r=Ye(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{const n=yield fetch(`${Ke(e.appConfig)}/${t.token}`,i);s=yield n.json()}catch(o){throw Ve.create("token-update-failed",{errorInfo:o})}if(s.error)throw Ve.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw Ve.create("token-update-no-token");return s.token})).apply(this,arguments)}function ze(e,t){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,s.Z)(function*(e,t){const n={method:"DELETE",headers:yield We(e)};try{const r=yield fetch(`${Ke(e.appConfig)}/${t}`,n),i=yield r.json();if(i.error)throw Ve.create("token-unsubscribe-failed",{errorInfo:i.error.message})}catch(r){throw Ve.create("token-unsubscribe-failed",{errorInfo:r})}})).apply(this,arguments)}function Ke({projectId:e}){return`https://fcmregistrations.googleapis.com/v1/projects/${e}/registrations`}function We(e){return Je.apply(this,arguments)}function Je(){return(Je=(0,s.Z)(function*({appConfig:e,installations:t}){const n=yield t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function Ye({p256dh:e,auth:t,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:t,p256dh:e}};return r!==Ie&&(i.web.applicationPubKey=r),i}function Qe(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,s.Z)(function*(e){const t=yield ot(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:Ee(t.getKey("auth")),p256dh:Ee(t.getKey("p256dh"))},r=yield Oe(e.firebaseDependencies);if(r){if(ct(r.subscriptionOptions,n))return Date.now()>=r.createTime+6048e5?nt(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield ze(e.firebaseDependencies,r.token)}catch(i){console.warn(i)}return it(e.firebaseDependencies,n)}return it(e.firebaseDependencies,n)})).apply(this,arguments)}function et(e){return tt.apply(this,arguments)}function tt(){return(tt=(0,s.Z)(function*(e){const t=yield Oe(e.firebaseDependencies);t&&(yield ze(e.firebaseDependencies,t.token),yield Ue(e.firebaseDependencies));const n=yield e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()})).apply(this,arguments)}function nt(e,t){return rt.apply(this,arguments)}function rt(){return(rt=(0,s.Z)(function*(e,t){try{const n=yield $e(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return yield Me(e.firebaseDependencies,r),n}catch(n){throw yield et(e),n}})).apply(this,arguments)}function it(e,t){return st.apply(this,arguments)}function st(){return(st=(0,s.Z)(function*(e,t){const n={token:yield je(e,t),createTime:Date.now(),subscriptionOptions:t};return yield Me(e,n),n.token})).apply(this,arguments)}function ot(e,t){return at.apply(this,arguments)}function at(){return(at=(0,s.Z)(function*(e,t){return(yield e.pushManager.getSubscription())||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ce(t)})})).apply(this,arguments)}function ct(e,t){return t.vapidKey===e.vapidKey&&t.endpoint===e.endpoint&&t.auth===e.auth&&t.p256dh===e.p256dh}function ut(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const i=t.notification.image;i&&(e.notification.image=i)}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){if(!t.fcmOptions)return;e.fcmOptions={};const n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);const r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}(t,e),t}function lt(e){return"object"==typeof e&&!!e&&"google.c.a.c_id"in e}function ht(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function dt(e){return Ve.create("missing-app-config-values",{valueName:e})}ht("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ht("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class pt{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(e){if(!e||!e.options)throw dt("App Configuration Object");if(!e.name)throw dt("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw dt(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}function ft(e){return gt.apply(this,arguments)}function gt(){return(gt=(0,s.Z)(function*(e){try{e.swRegistration=yield navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),e.swRegistration.update().catch(()=>{})}catch(t){throw Ve.create("failed-service-worker-registration",{browserErrorMessage:t.message})}})).apply(this,arguments)}function mt(e,t){return yt.apply(this,arguments)}function yt(){return(yt=(0,s.Z)(function*(e,t){if(t||e.swRegistration||(yield ft(e)),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw Ve.create("invalid-sw-registration");e.swRegistration=t}})).apply(this,arguments)}function vt(e,t){return _t.apply(this,arguments)}function _t(){return(_t=(0,s.Z)(function*(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=Ie)})).apply(this,arguments)}function bt(){return(bt=(0,s.Z)(function*(e,t){if(!navigator)throw Ve.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ve.create("permission-blocked");return yield vt(e,null==t?void 0:t.vapidKey),yield mt(e,null==t?void 0:t.serviceWorkerRegistration),Qe(e)})).apply(this,arguments)}function wt(e,t,n){return St.apply(this,arguments)}function St(){return(St=(0,s.Z)(function*(e,t,n){const r=Tt(t);(yield e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n["google.c.a.c_id"],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Tt(e){switch(e){case ke.NOTIFICATION_CLICKED:return"notification_open";case ke.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function It(){return(It=(0,s.Z)(function*(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===ke.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(ut(n)):e.onMessageHandler.next(ut(n)));const r=n.data;lt(r)&&"1"===r["google.c.a.e"]&&(yield wt(e,n.messageType,r))})).apply(this,arguments)}function kt(){return Et.apply(this,arguments)}function Et(){return(Et=(0,s.Z)(function*(){try{yield(0,a.eu)()}catch(e){return!1}return"undefined"!=typeof window&&(0,a.hl)()&&(0,a.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,o._registerComponent)(new c.wA("messaging",e=>{const t=new pt(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>function(e,t){return It.apply(this,arguments)}(t,e)),t},"PUBLIC")),(0,o._registerComponent)(new c.wA("messaging-internal",e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>function(e,t){return bt.apply(this,arguments)}(t,e)}},"PRIVATE")),(0,o.registerVersion)("@firebase/messaging","0.9.13"),(0,o.registerVersion)("@firebase/messaging","0.9.13","esm2017");const Ct="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xt="https://www.googletagmanager.com/gtag/js",At=new u.Yd("@firebase/analytics");function Dt(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function Pt(e,t){const n=document.createElement("script");n.src=`${xt}?l=${e}&id=${t}`,n.async=!0,document.head.appendChild(n)}function Rt(e,t,n,r,i,s){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,s.Z)(function*(e,t,n,r,i,s){const o=r[i];try{if(o)yield t[o];else{const e=(yield Dt(n)).find(e=>e.measurementId===i);e&&(yield t[e.appId])}}catch(a){At.error(a)}e("config",i,s)})).apply(this,arguments)}function Ot(e,t,n,r,i){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,s.Z)(function*(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=yield Dt(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),yield Promise.all(s),e("event",r,i||{})}catch(s){At.error(s)}})).apply(this,arguments)}function Mt(){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(xt))return t;return null}const Zt=new a.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ut=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Ft(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function qt(e){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,s.Z)(function*(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:Ft(r)},s=Ct.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=yield o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw Zt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()})).apply(this,arguments)}function jt(e){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,s.Z)(function*(e,t=Ut,n){const{appId:r,apiKey:i,measurementId:o}=e.options;if(!r)throw Zt.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Zt.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new Kt;return setTimeout((0,s.Z)(function*(){c.abort()}),void 0!==n?n:6e4),$t({appId:r,apiKey:i,measurementId:o},a,c,t)})).apply(this,arguments)}function $t(e,t,n){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,s.Z)(function*(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=Ut){const{appId:s,measurementId:o}=e;try{yield zt(r,t)}catch(c){if(o)return At.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c.message}]`),{appId:s,measurementId:o};throw c}try{const t=yield qt(e);return i.deleteThrottleMetadata(s),t}catch(c){if(!Gt(c)){if(i.deleteThrottleMetadata(s),o)return At.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c.message}]`),{appId:s,measurementId:o};throw c}const t=503===Number(c.customData.httpStatus)?(0,a.$s)(n,i.intervalMillis,30):(0,a.$s)(n,i.intervalMillis),u={throttleEndTimeMillis:Date.now()+t,backoffCount:n+1};return i.setThrottleMetadata(s,u),At.debug(`Calling attemptFetch again in ${t} millis`),$t(e,u,r,i)}})).apply(this,arguments)}function zt(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(Zt.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function Gt(e){if(!(e instanceof a.ZR&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}class Kt{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}function Wt(){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,s.Z)(function*(){if(!(0,a.hl)())return At.warn(Zt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,a.eu)()}catch(e){return At.warn(Zt.create("indexeddb-unavailable",{errorInfo:e}).message),!1}return!0})).apply(this,arguments)}function Yt(){return(Yt=(0,s.Z)(function*(e,t,n,r,i,s,o){var a;const c=jt(e);c.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&At.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>At.error(e)),t.push(c);const u=Wt().then(e=>e?r.getId():void 0),[l,h]=yield Promise.all([c,u]);Mt()||Pt(s,l.measurementId),i("js",new Date);const d=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return d.origin="firebase",d.update=!0,null!=h&&(d.firebase_id=h),i("config",l.measurementId,d),l.measurementId})).apply(this,arguments)}class Qt{constructor(e){this.app=e}_delete(){return delete Xt[this.app.options.appId],Promise.resolve()}}let Xt={},en=[];const tn={};let nn,rn,sn=!1;function on(){return(on=(0,s.Z)(function*(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=yield t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}})).apply(this,arguments)}function an(){return cn.apply(this,arguments)}function cn(){return(cn=(0,s.Z)(function*(){if((0,a.ru)())return!1;if(!(0,a.zI)())return!1;if(!(0,a.hl)())return!1;try{return yield(0,a.eu)()}catch(e){return!1}})).apply(this,arguments)}(0,o._registerComponent)(new c.wA("analytics",(e,{options:t})=>function(e,t,n){!function(){const e=[];if((0,a.ru)()&&e.push("This is a browser extension environment."),(0,a.zI)()||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),n=Zt.create("invalid-analytics-context",{errorInfo:t});At.warn(n.message)}}();const r=e.options.appId;if(!r)throw Zt.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Zt.create("no-api-key");At.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xt[r])throw Zt.create("already-exists",{id:r});if(!sn){!function(e){let t=[];Array.isArray(window.dataLayer)?t=window.dataLayer:window.dataLayer=t}();const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let o=function(...e){window.dataLayer.push(arguments)};return window.gtag&&"function"==typeof window.gtag&&(o=window.gtag),window.gtag=function(e,t,n,r){function i(){return(i=(0,s.Z)(function*(i,s,o){try{"event"===i?yield Ot(e,t,n,s,o):"config"===i?yield Rt(e,t,n,r,s,o):e("set",s)}catch(a){At.error(a)}})).apply(this,arguments)}return function(e,t,n){return i.apply(this,arguments)}}(o,e,t,n),{gtagCore:o,wrappedGtag:window.gtag}}(Xt,en,tn);rn=e,nn=t,sn=!0}return Xt[r]=function(e,t,n,r,i,s,o){return Yt.apply(this,arguments)}(e,en,tn,t,nn,"dataLayer",n),new Qt(e)}(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,o._registerComponent)(new c.wA("analytics-internal",function(e){try{const t=e.getProvider("analytics").getImmediate();return{logEvent:(e,n,r)=>function(e,t,n,r){e=(0,a.m9)(e),function(e,t,n,r,i){return on.apply(this,arguments)}(rn,Xt[e.app.options.appId],t,n,r).catch(e=>At.error(e))}(t,e,n,r)}}catch(t){throw Zt.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,o.registerVersion)("@firebase/analytics","0.7.9"),(0,o.registerVersion)("@firebase/analytics","0.7.9","esm2017");var un=n(7771),ln=n(3637),hn=n(7574),dn=n(3342),pn=n(9746),fn=n(9673);const gn=new r.GfV("7.3.0");function mn(e,t,n){if(t){if(1===t.length)return t[0];const e=t.filter(e=>e.app===n);if(1===e.length)return e[0]}return n.container.getProvider(e).getImmediate({optional:!0})}globalThis.__angularfire_symbol__analyticsIsSupported||(globalThis.__angularfire_symbol__analyticsIsSupported=an().then(e=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=e).catch(()=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=!1)),globalThis.__angularfire_symbol__messagingIsSupported||(globalThis.__angularfire_symbol__messagingIsSupported=kt().then(e=>globalThis.__angularfire_symbol__messagingIsSupportedValue=e).catch(()=>globalThis.__angularfire_symbol__messagingIsSupportedValue=!1)),globalThis.__angularfire_symbol__remoteConfigIsSupported||(globalThis.__angularfire_symbol__remoteConfigIsSupported=Se().then(e=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=e).catch(()=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=!1));const yn=(e,t)=>{const n=t?[t]:(0,i.C6)(),r=[];return n.forEach(t=>{t.container.getProvider(e).instances.forEach(e=>{r.includes(e)||r.push(e)})}),r};function vn(){}class _n{constructor(e,t=un.N){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,n){const r=this.zone;return this.delegate.schedule(function(t){r.runGuarded(()=>{e.apply(this,[t])})},t,n)}}class bn{constructor(e){this.zone=e,this.task=null}call(e,t){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vn,{},vn,vn)),t.pipe((0,dn.b)({next:n,complete:n,error:n})).subscribe(e).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let wn=(()=>{class e{constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new _n(Zone.current)),this.insideAngular=e.run(()=>new _n(Zone.current,ln.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Sn(){const e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return e}function Tn(e){return Sn().ngZone.runOutsideAngular(()=>e())}function In(e){return Sn().ngZone.run(()=>e())}function kn(e){return e.pipe((0,pn.QV)(Sn().outsideAngular))}function En(e){return Sn(),(t=Sn(),function(e){return(e=e.lift(new bn(t.ngZone))).pipe((0,fn.R)(t.outsideAngular),(0,pn.QV)(t.insideAngular))})(e);var t}const Cn=(e,t)=>function(){const n=arguments;return t&&setTimeout(()=>{"scheduled"===t.state&&t.invoke()},10),In(()=>e.apply(void 0,n))},xn=(e,t)=>function(){let n;const r=arguments;for(let e=0;e<arguments.length;e++)"function"==typeof r[e]&&(t&&(n||(n=In(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vn,{},vn,vn)))),r[e]=Cn(r[e],n));const i=Tn(()=>e.apply(this,r));if(!t){if(i instanceof hn.y){const e=Sn();return i.pipe((0,fn.R)(e.outsideAngular),(0,pn.QV)(e.insideAngular))}return In(()=>i)}return i instanceof hn.y?i.pipe(En):i instanceof Promise?In(()=>new Promise((e,t)=>i.then(t=>In(()=>e(t)),e=>In(()=>t(e))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:In(()=>i)}},156:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(3854),i=n(8604),s=n(279),o=n(9306);class a{constructor(e,t){this._delegate=e,this.firebase=t,(0,s._addComponent)(e,new i.wA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,s.deleteApp)(this._delegate)))}_getService(e,t=s._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=s._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,s._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,s._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const c=new r.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),u=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(i,o={}){const a=s.initializeApp(i,o);if((0,r.r3)(t,a.name))return t[a.name];const c=new e(a,n);return t[a.name]=c,c},app:i,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:function(t){const o=t.name,a=o.replace("-compat","");if(s._registerComponent(t)&&"PUBLIC"===t.type){const s=(e=i())=>{if("function"!=typeof e[a])throw c.create("invalid-app-argument",{appName:o});return e[a]()};void 0!==t.serviceProps&&(0,r.ZB)(s,t.serviceProps),n[a]=s,e.prototype[a]=function(...e){return this._getService.bind(this,o).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:s}};function i(e){if(!(0,r.r3)(t,e=e||s._DEFAULT_ENTRY_NAME))throw c.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),i.App=e,n}(a);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.ZB)(t,e)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),t}(),l=new o.Yd("@firebase/app-compat");if((0,r.jU)()&&void 0!==self.firebase){l.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&l.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const h=u;(0,s.registerVersion)("@firebase/app-compat","0.1.25",void 0)},279:function(e,t,n){"use strict";n.r(t),n.d(t,{FirebaseError:function(){return o.ZR},SDK_VERSION:function(){return T},_DEFAULT_ENTRY_NAME:function(){return h},_addComponent:function(){return g},_addOrOverwriteComponent:function(){return m},_apps:function(){return p},_clearComponents:function(){return b},_components:function(){return f},_getProvider:function(){return v},_registerComponent:function(){return y},_removeServiceInstance:function(){return _},deleteApp:function(){return C},getApp:function(){return k},getApps:function(){return E},initializeApp:function(){return I},onLog:function(){return D},registerVersion:function(){return A},setLogLevel:function(){return P}});var r=n(6304),i=n(8604),s=n(9306),o=n(3854),a=n(6508);class c{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const u="@firebase/app",l=new s.Yd("@firebase/app"),h="[DEFAULT]",d={[u]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},p=new Map,f=new Map;function g(e,t){try{e.container.addComponent(t)}catch(n){l.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function m(e,t){e.container.addOrOverwriteComponent(t)}function y(e){const t=e.name;if(f.has(t))return l.debug(`There were multiple attempts to register component ${t}.`),!1;f.set(t,e);for(const n of p.values())g(n,e);return!0}function v(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function _(e,t,n=h){v(e,t).clearInstance(n)}function b(){f.clear()}const w=new o.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class S{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw w.create("app-deleted",{appName:this._name})}}const T="9.8.1";function I(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:h,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw w.create("bad-app-name",{appName:String(r)});const s=p.get(r);if(s){if((0,o.vZ)(e,s.options)&&(0,o.vZ)(n,s.config))return s;throw w.create("duplicate-app",{appName:r})}const a=new i.H0(r);for(const i of f.values())a.addComponent(i);const c=new S(e,n,a);return p.set(r,c),c}function k(e=h){const t=p.get(e);if(!t)throw w.create("no-app",{appName:e});return t}function E(){return Array.from(p.values())}function C(e){return x.apply(this,arguments)}function x(){return(x=(0,r.Z)(function*(e){const t=e.name;p.has(t)&&(p.delete(t),yield Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)})).apply(this,arguments)}function A(e,t,n){var r;let s=null!==(r=d[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void l.warn(e.join(" "))}y(new i.wA(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}function D(e,t){if(null!==e&&"function"!=typeof e)throw w.create("invalid-log-argument");(0,s.Am)(e,t)}function P(e){(0,s.Ub)(e)}const R="firebase-heartbeat-store";let N=null;function O(){return N||(N=(0,a.X3)("firebase-heartbeat-database",1,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(R)}}}).catch(e=>{throw w.create("storage-open",{originalErrorMessage:e.message})})),N}function L(){return(L=(0,r.Z)(function*(e){try{return(yield O()).transaction(R).objectStore(R).get(U(e))}catch(t){throw w.create("storage-get",{originalErrorMessage:t.message})}})).apply(this,arguments)}function M(e,t){return Z.apply(this,arguments)}function Z(){return(Z=(0,r.Z)(function*(e,t){try{const n=(yield O()).transaction(R,"readwrite"),r=n.objectStore(R);return yield r.put(t,U(e)),n.done}catch(n){throw w.create("storage-set",{originalErrorMessage:n.message})}})).apply(this,arguments)}function U(e){return`${e.name}!${e.options.appId}`}class F{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new V(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}triggerHeartbeat(){var e=this;return(0,r.Z)(function*(){const t=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=q();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==n&&!e._heartbeatsCache.heartbeats.some(e=>e.date===n))return e._heartbeatsCache.heartbeats.push({date:n,agent:t}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,r.Z)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=q(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),j(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),j(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),i=(0,o.L)(JSON.stringify({version:2,heartbeats:n}));return e._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(e._heartbeatsCache.heartbeats=r,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),i})()}}function q(){return(new Date).toISOString().substring(0,10)}class V{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,r.Z)(function*(){return!!(0,o.hl)()&&(0,o.eu)().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,r.Z)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function(e){return L.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return(0,r.Z)(function*(){var n;if(yield t._canUseIndexedDBPromise){const r=yield t.read();return M(t.app,{lastSentHeartbeatDate:null!==(n=e.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,r.Z)(function*(){var n;if(yield t._canUseIndexedDBPromise){const r=yield t.read();return M(t.app,{lastSentHeartbeatDate:null!==(n=e.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}})()}}function j(e){return(0,o.L)(JSON.stringify({version:2,heartbeats:e})).length}y(new i.wA("platform-logger",e=>new c(e),"PRIVATE")),y(new i.wA("heartbeat",e=>new F(e),"PRIVATE")),A(u,"0.7.24",""),A(u,"0.7.24","esm2017"),A("fire-js","")},8882:function(e,t,n){"use strict";n.d(t,{$:function(){return Wt},A:function(){return l},B:function(){return h},G:function(){return Pe},H:function(){return Oe},J:function(){return rt},L:function(){return de},M:function(){return dt},N:function(){return mt},P:function(){return Mr},Q:function(){return yt},R:function(){return Ir},T:function(){return vt},U:function(){return gt},V:function(){return bt},W:function(){return wt},X:function(){return Et},Y:function(){return Vt},Z:function(){return Bt},_:function(){return Ht},a:function(){return Yn},a0:function(){return en},a1:function(){return nn},a2:function(){return sn},a3:function(){return an},a4:function(){return un},a5:function(){return hn},a6:function(){return pn},a7:function(){return fn},a8:function(){return mn},a9:function(){return yn},aA:function(){return _i},aB:function(){return gi},aC:function(){return ii},aD:function(){return ri},aE:function(){return Ae},aI:function(){return Xn},aL:function(){return _t},aa:function(){return wn},ab:function(){return Tn},ac:function(){return kn},af:function(){return An},ag:function(){return Pn},ah:function(){return Rn},ak:function(){return Pt},al:function(){return Vn},an:function(){return $n},ao:function(){return Kn},ap:function(){return Ie},aq:function(){return S},ar:function(){return Te},as:function(){return be},at:function(){return g},au:function(){return Fi},av:function(){return Si},aw:function(){return m},ax:function(){return b},ay:function(){return I},az:function(){return pe},b:function(){return Jn},c:function(){return Hr},d:function(){return Wr},e:function(){return Gr},f:function(){return ai},g:function(){return hi},h:function(){return ui},i:function(){return dr},j:function(){return pi},k:function(){return qi},l:function(){return xr},m:function(){return ji},o:function(){return u},r:function(){return Dr},s:function(){return Er},u:function(){return Or}});var r=n(6304),i=n(3854),s=n(279);function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}var a=n(9306),c=n(8604);const u={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},l={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"},h=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},d=new i.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),p=new a.Yd("@firebase/auth");function f(e,...t){p.logLevel<=a.in.ERROR&&p.error(`Auth (${s.SDK_VERSION}): ${e}`,...t)}function g(e,...t){throw _(e,...t)}function m(e,...t){return _(e,...t)}function y(e,t,n){const r=Object.assign(Object.assign({},{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),{[t]:n});return new i.LL("auth","Firebase",r).create(t,{appName:e.name})}function v(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&g(e,"argument-error"),y(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return d.create(e,...t)}function b(e,t,...n){if(!e)throw _(t,...n)}function w(e){const t="INTERNAL ASSERTION FAILED: "+e;throw f(t),new Error(t)}function S(e,t){e||w(t)}const T=new Map;function I(e){S(e instanceof Function,"Expected a class definition");let t=T.get(e);return t?(S(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,T.set(e,t),t)}function k(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function E(){return"http:"===C()||"https:"===C()}function C(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class x{constructor(e,t){this.shortDelay=e,this.longDelay=t,S(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,i.uI)()||(0,i.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(E()||(0,i.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function A(e,t){S(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class D{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void w("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void w("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void w("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const P={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},R=new x(3e4,6e4);function N(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function O(e,t,n,r){return L.apply(this,arguments)}function L(){return(L=(0,r.Z)(function*(e,t,n,s,o={}){return M(e,o,(0,r.Z)(function*(){let r={},o={};s&&("GET"===t?o=s:r={body:JSON.stringify(s)});const a=(0,i.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),c=yield e._getAdditionalHeaders();return c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode),D.fetch()(q(e,e.config.apiHost,n,a),Object.assign({method:t,headers:c,referrerPolicy:"no-referrer"},r))}))})).apply(this,arguments)}function M(e,t,n){return Z.apply(this,arguments)}function Z(){return(Z=(0,r.Z)(function*(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},P),t);try{const t=new V(e),i=yield Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=yield i.json();if("needConfirmation"in s)throw j(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw j(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw j(e,"email-already-in-use",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw y(e,a,o);g(e,a)}}catch(s){if(s instanceof i.ZR)throw s;g(e,"network-request-failed")}})).apply(this,arguments)}function U(e,t,n,r){return F.apply(this,arguments)}function F(){return(F=(0,r.Z)(function*(e,t,n,r,i={}){const s=yield O(e,t,n,r,i);return"mfaPendingCredential"in s&&g(e,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function q(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?A(e.config,i):`${e.config.apiScheme}://${i}`}class V{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(m(this.auth,"network-request-failed")),R.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function j(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=m(e,t,r);return i.customData._tokenResponse=n,i}function B(){return(B=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:delete",t)})).apply(this,arguments)}function $(e,t){return H.apply(this,arguments)}function H(){return(H=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function z(e,t){return G.apply(this,arguments)}function G(){return(G=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:lookup",t)})).apply(this,arguments)}function K(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function W(){return(W=(0,r.Z)(function*(e,t=!1){const n=(0,i.m9)(e),r=yield n.getIdToken(t),s=Y(r);b(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:K(J(s.auth_time)),issuedAtTime:K(J(s.iat)),expirationTime:K(J(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}})).apply(this,arguments)}function J(e){return 1e3*Number(e)}function Y(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return f("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,i.tV)(n);return e?JSON.parse(e):(f("Failed to decode base64 JWT payload"),null)}catch(s){return f("Caught error parsing JWT payload as JSON",s),null}}function Q(e,t){return X.apply(this,arguments)}function X(){return(X=(0,r.Z)(function*(e,t,n=!1){if(n)return t;try{return yield t}catch(r){throw r instanceof i.ZR&&ee(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})).apply(this,arguments)}function ee({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}class te{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout((0,r.Z)(function*(){yield t.iteration()}),n)}iteration(){var e=this;return(0,r.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&e.schedule(!0))}e.schedule()})()}}class ne{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=K(this.lastLoginAt),this.creationTime=K(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function re(e){return ie.apply(this,arguments)}function ie(){return(ie=(0,r.Z)(function*(e){var t;const n=e.auth,r=yield e.getIdToken(),i=yield Q(e,z(n,{idToken:r}));b(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?ae(s.providerUserInfo):[],a=oe(e.providerData,o),c=!!e.isAnonymous&&!(e.email&&s.passwordHash||(null==a?void 0:a.length)),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ne(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,u)})).apply(this,arguments)}function se(){return(se=(0,r.Z)(function*(e){const t=(0,i.m9)(e);yield re(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})).apply(this,arguments)}function oe(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function ae(e){return e.map(e=>{var{providerId:t}=e,n=o(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function ce(){return(ce=(0,r.Z)(function*(e,t){const n=yield M(e,{},(0,r.Z)(function*(){const n=(0,i.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,o=q(e,r,"/v1/token",`key=${s}`),a=yield e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",D.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class ue{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){b(e.idToken,"internal-error"),b(void 0!==e.idToken,"internal-error"),b(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Y(e);return b(t,"internal-error"),b(void 0!==t.exp,"internal-error"),b(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var n=this;return(0,r.Z)(function*(){return b(!n.accessToken||n.refreshToken,e,"user-token-expired"),t||!n.accessToken||n.isExpired?n.refreshToken?(yield n.refresh(e,n.refreshToken),n.accessToken):null:n.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var n=this;return(0,r.Z)(function*(){const{accessToken:r,refreshToken:i,expiresIn:s}=yield function(e,t){return ce.apply(this,arguments)}(e,t);n.updateTokensAndExpiration(r,i,Number(s))})()}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new ue;return n&&(b("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(b("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(b("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ue,this.toJSON())}_performRefresh(){return w("not implemented")}}function le(e,t){b("string"==typeof e||void 0===e,"internal-error",{appName:t})}class he{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=o(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new te(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ne(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,r.Z)(function*(){const n=yield Q(t,t.stsTokenManager.getToken(t.auth,e));return b(n,t.auth,"internal-error"),t.accessToken!==n&&(t.accessToken=n,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),n})()}getIdTokenResult(e){return function(e){return W.apply(this,arguments)}(this,e)}reload(){return function(e){return se.apply(this,arguments)}(this)}_assign(e){this!==e&&(b(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new he(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){b(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var n=this;return(0,r.Z)(function*(){let r=!1;e.idToken&&e.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield re(n)),yield n.auth._persistUserIfCurrent(n),r&&n.auth._notifyListenersIfCurrent(n)})()}delete(){var e=this;return(0,r.Z)(function*(){const t=yield e.getIdToken();return yield Q(e,function(e,t){return B.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,u;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:_,isAnonymous:w,providerData:S,stsTokenManager:T}=t;b(v&&T,e,"internal-error");const I=ue.fromJSON(this.name,T);b("string"==typeof v,e,"internal-error"),le(l,e.name),le(h,e.name),b("boolean"==typeof _,e,"internal-error"),b("boolean"==typeof w,e,"internal-error"),le(d,e.name),le(p,e.name),le(f,e.name),le(g,e.name),le(m,e.name),le(y,e.name);const k=new he({uid:v,auth:e,email:h,emailVerified:_,displayName:l,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:I,createdAt:m,lastLoginAt:y});return S&&Array.isArray(S)&&(k.providerData=S.map(e=>Object.assign({},e))),g&&(k._redirectEventId=g),k}static _fromIdTokenResponse(e,t,n=!1){return(0,r.Z)(function*(){const r=new ue;r.updateFromServerResponse(t);const i=new he({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return yield re(i),i})()}}const de=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,r.Z)(function*(){return!0})()}_set(e,t){var n=this;return(0,r.Z)(function*(){n.storage[e]=t})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=t.storage[e];return void 0===n?null:n})()}_remove(e){var t=this;return(0,r.Z)(function*(){delete t.storage[e]})()}_addListener(e,t){}_removeListener(e,t){}}return e.type="NONE",e})();function pe(e,t,n){return`firebase:${e}:${t}:${n}`}class fe{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=pe(this.userKey,r.apiKey,i),this.fullPersistenceKey=pe("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,r.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?he._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,r.Z)(function*(){if(t.persistence===e)return;const n=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,n?t.setCurrentUser(n):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,n="authUser"){return(0,r.Z)(function*(){if(!t.length)return new fe(I(de),e,n);const i=(yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(yield e._isAvailable())return e});return function(t){return e.apply(this,arguments)}}()))).filter(e=>e);let s=i[0]||I(de);const o=pe(n,e.config.apiKey,e.name);let a=null;for(const n of t)try{const t=yield n._get(o);if(t){const r=he._fromJSON(e,t);n!==s&&(a=r),s=n;break}}catch(u){}const c=i.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&c.length?(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(e!==s)try{yield e._remove(o)}catch(u){}});return function(t){return e.apply(this,arguments)}}())),new fe(s,e,n)):new fe(s,e,n)})()}}function ge(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(_e(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(me(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(we(t))return"Blackberry";if(Se(t))return"Webos";if(ye(t))return"Safari";if((t.includes("chrome/")||ve(t))&&!t.includes("edge/"))return"Chrome";if(be(t))return"Android";{const t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==t?void 0:t.length))return t[1]}return"Other"}function me(e=(0,i.z$)()){return/firefox\//i.test(e)}function ye(e=(0,i.z$)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ve(e=(0,i.z$)()){return/crios\//i.test(e)}function _e(e=(0,i.z$)()){return/iemobile/i.test(e)}function be(e=(0,i.z$)()){return/android/i.test(e)}function we(e=(0,i.z$)()){return/blackberry/i.test(e)}function Se(e=(0,i.z$)()){return/webos/i.test(e)}function Te(e=(0,i.z$)()){return/iphone|ipad|ipod/i.test(e)}function Ie(e=(0,i.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}function ke(e=(0,i.z$)()){return Te(e)||be(e)||Se(e)||we(e)||/windows phone/i.test(e)||_e(e)}function Ee(e,t=[]){let n;switch(e){case"Browser":n=ge((0,i.z$)());break;case"Worker":n=`${ge((0,i.z$)())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${s.SDK_VERSION}/${r}`}class Ce{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,r.Z)(function*(){if(t.auth.currentUser===e)return;const n=[];try{for(const r of t.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const e of n)try{e()}catch(i){}throw t.auth._errorFactory.create("login-blocked",{originalMessage:r.message})}})()}}class xe{constructor(e,t,n){this.app=e,this.heartbeatServiceProvider=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new De(this),this.idTokenSubscription=new De(this),this.beforeStateQueue=new Ce(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){var n=this;return t&&(this._popupRedirectResolver=I(t)),this._initializationPromise=this.queue((0,r.Z)(function*(){var r,i;if(!n._deleted&&(n.persistenceManager=yield fe.create(n,e),!n._deleted)){if(null===(r=n._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{yield n._popupRedirectResolver._initialize(n)}catch(s){}yield n.initializeCurrentUser(t),n.lastNotifiedUid=(null===(i=n.currentUser)||void 0===i?void 0:i.uid)||null,n._deleted||(n._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,r.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();return e.currentUser||t?e.currentUser&&t&&e.currentUser.uid===t.uid?(e._currentUser._assign(t),void(yield e.currentUser.getIdToken())):void(yield e._updateCurrentUser(t,!0)):void 0})()}initializeCurrentUser(e){var t=this;return(0,r.Z)(function*(){var n;const r=yield t.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const r=null===(n=t.redirectUser)||void 0===n?void 0:n._redirectEventId,o=null==i?void 0:i._redirectEventId,a=yield t.tryRedirectSignIn(e);r&&r!==o||!(null==a?void 0:a.user)||(i=a.user,s=!0)}if(!i)return t.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield t.beforeStateQueue.runMiddleware(i)}catch(o){i=r,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(o))}return i?t.reloadAndSetCurrentUserOrClear(i):t.directlySetCurrentUser(null)}return b(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===i._redirectEventId?t.directlySetCurrentUser(i):t.reloadAndSetCurrentUserOrClear(i)})()}tryRedirectSignIn(e){var t=this;return(0,r.Z)(function*(){let n=null;try{n=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(r){yield t._setRedirectUser(null)}return n})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,r.Z)(function*(){try{yield re(e)}catch(n){if("auth/network-request-failed"!==n.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}_delete(){var e=this;return(0,r.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,r.Z)(function*(){const n=e?(0,i.m9)(e):null;return n&&b(n.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(n&&n._clone(t))})()}_updateCurrentUser(e,t=!1){var n=this;return(0,r.Z)(function*(){if(!n._deleted)return e&&b(n.tenantId===e.tenantId,n,"tenant-id-mismatch"),t||(yield n.beforeStateQueue.runMiddleware(e)),n.queue((0,r.Z)(function*(){yield n.directlySetCurrentUser(e),n.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,r.Z)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue((0,r.Z)(function*(){yield t.assertedPersistence.setPersistence(I(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new i.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var n=this;return(0,r.Z)(function*(){const r=yield n.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,r.Z)(function*(){if(!t.redirectPersistenceManager){const n=e&&I(e)||t._popupRedirectResolver;b(n,t,"argument-error"),t.redirectPersistenceManager=yield fe.create(t,[I(n._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,r.Z)(function*(){var n,i;return t._isInitialized&&(yield t.queue((0,r.Z)(function*(){}))),(null===(n=t._currentUser)||void 0===n?void 0:n._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,r.Z)(function*(){if(e===t.currentUser)return t.queue((0,r.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return b(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,r.Z)(function*(){t.currentUser&&t.currentUser!==e&&(t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh()),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return b(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ee(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,r.Z)(function*(){var t;const n={"X-Client-Version":e.clientVersion};e.app.options.appId&&(n["X-Firebase-gmpid"]=e.app.options.appId);const r=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();return r&&(n["X-Firebase-Client"]=r),n})()}}function Ae(e){return(0,i.m9)(e)}class De{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,i.ne)(e=>this.observer=e)}get next(){return b(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Pe(e,t,n){const r=Ae(e);b(r._canInitEmulator,r,"emulator-config-failed"),b(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=Re(t),{host:o,port:a}=function(e){const t=Re(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Ne(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ne(t)}}}(t);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Re(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ne(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Oe{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return w("not implemented")}_getIdTokenResponse(e){return w("not implemented")}_linkToIdToken(e,t){return w("not implemented")}_getReauthenticationResolver(e){return w("not implemented")}}function Le(e,t){return Me.apply(this,arguments)}function Me(){return(Me=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:resetPassword",N(e,t))})).apply(this,arguments)}function Ze(e,t){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function Fe(e,t){return qe.apply(this,arguments)}function qe(){return(qe=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:update",N(e,t))})).apply(this,arguments)}function Ve(){return(Ve=(0,r.Z)(function*(e,t){return U(e,"POST","/v1/accounts:signInWithPassword",N(e,t))})).apply(this,arguments)}function je(e,t){return Be.apply(this,arguments)}function Be(){return(Be=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:sendOobCode",N(e,t))})).apply(this,arguments)}function $e(e,t){return He.apply(this,arguments)}function He(){return(He=(0,r.Z)(function*(e,t){return je(e,t)})).apply(this,arguments)}function ze(e,t){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,r.Z)(function*(e,t){return je(e,t)})).apply(this,arguments)}function Ke(e,t){return We.apply(this,arguments)}function We(){return(We=(0,r.Z)(function*(e,t){return je(e,t)})).apply(this,arguments)}function Je(e,t){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,r.Z)(function*(e,t){return je(e,t)})).apply(this,arguments)}function Qe(){return(Qe=(0,r.Z)(function*(e,t){return U(e,"POST","/v1/accounts:signInWithEmailLink",N(e,t))})).apply(this,arguments)}function Xe(){return(Xe=(0,r.Z)(function*(e,t){return U(e,"POST","/v1/accounts:signInWithEmailLink",N(e,t))})).apply(this,arguments)}class et extends Oe{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new et(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new et(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return(0,r.Z)(function*(){switch(t.signInMethod){case"password":return function(e,t){return Ve.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function(e,t){return Qe.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:g(e,"internal-error")}})()}_linkToIdToken(e,t){var n=this;return(0,r.Z)(function*(){switch(n.signInMethod){case"password":return Ze(e,{idToken:t,returnSecureToken:!0,email:n._email,password:n._password});case"emailLink":return function(e,t){return Xe.apply(this,arguments)}(e,{idToken:t,email:n._email,oobCode:n._password});default:g(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function tt(e,t){return nt.apply(this,arguments)}function nt(){return(nt=(0,r.Z)(function*(e,t){return U(e,"POST","/v1/accounts:signInWithIdp",N(e,t))})).apply(this,arguments)}class rt extends Oe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new rt(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):g("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=o(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new rt(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return tt(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,tt(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,tt(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,i.xO)(t)}return e}}function it(e,t){return st.apply(this,arguments)}function st(){return(st=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:sendVerificationCode",N(e,t))})).apply(this,arguments)}function ot(){return(ot=(0,r.Z)(function*(e,t){return U(e,"POST","/v1/accounts:signInWithPhoneNumber",N(e,t))})).apply(this,arguments)}function at(){return(at=(0,r.Z)(function*(e,t){const n=yield U(e,"POST","/v1/accounts:signInWithPhoneNumber",N(e,t));if(n.temporaryProof)throw j(e,"account-exists-with-different-credential",n);return n})).apply(this,arguments)}const ct={USER_NOT_FOUND:"user-not-found"};function ut(){return(ut=(0,r.Z)(function*(e,t){return U(e,"POST","/v1/accounts:signInWithPhoneNumber",N(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ct)})).apply(this,arguments)}class lt extends Oe{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new lt({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new lt({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return function(e,t){return ot.apply(this,arguments)}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return function(e,t){return at.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return function(e,t){return ut.apply(this,arguments)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new lt({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class ht{constructor(e){var t,n,r,s,o,a;const c=(0,i.zd)((0,i.pd)(e)),u=null!==(t=c.apiKey)&&void 0!==t?t:null,l=null!==(n=c.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=c.mode)&&void 0!==r?r:null);b(u&&l&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=l,this.continueUrl=null!==(s=c.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,i.zd)((0,i.pd)(e)).link,n=t?(0,i.zd)((0,i.pd)(t)).deep_link_id:null,r=(0,i.zd)((0,i.pd)(e)).deep_link_id;return(r?(0,i.zd)((0,i.pd)(r)).link:null)||r||n||t||e}(e);try{return new ht(t)}catch(n){return null}}}let dt=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return et._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ht.parseLink(t);return b(n,"argument-error"),et._fromEmailAndCode(e,n.code,n.tenantId)}}return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e})();class pt{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ft extends pt{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class gt extends ft{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return b("providerId"in t&&"signInMethod"in t,"argument-error"),rt._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return b(e.idToken||e.accessToken,"argument-error"),rt._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return gt.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return gt.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=e;if(!(n||r||t||i))return null;if(!o)return null;try{return new gt(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:i})}catch(a){return null}}}let mt=(()=>{class e extends ft{constructor(){super("facebook.com")}static credential(t){return rt._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.FACEBOOK_SIGN_IN_METHOD="facebook.com",e.PROVIDER_ID="facebook.com",e})(),yt=(()=>{class e extends ft{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return rt._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch(i){return null}}}return e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com",e})(),vt=(()=>{class e extends ft{constructor(){super("github.com")}static credential(t){return rt._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.GITHUB_SIGN_IN_METHOD="github.com",e.PROVIDER_ID="github.com",e})();class _t extends Oe{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return tt(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,tt(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,tt(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new _t(n,i):null}static _create(e,t){return new _t(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class bt extends pt{constructor(e){b(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return bt.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return bt.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=_t.fromJSON(e);return b(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return _t._create(n,t)}catch(r){return null}}}let wt=(()=>{class e extends ft{constructor(){super("twitter.com")}static credential(t,n){return rt._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch(i){return null}}}return e.TWITTER_SIGN_IN_METHOD="twitter.com",e.PROVIDER_ID="twitter.com",e})();function St(e,t){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,r.Z)(function*(e,t){return U(e,"POST","/v1/accounts:signUp",N(e,t))})).apply(this,arguments)}class It{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,n,i=!1){return(0,r.Z)(function*(){const r=yield he._fromIdTokenResponse(e,n,i),s=kt(n);return new It({user:r,providerId:s,_tokenResponse:n,operationType:t})})()}static _forOperation(e,t,n){return(0,r.Z)(function*(){yield e._updateTokensIfNecessary(n,!0);const r=kt(n);return new It({user:e,providerId:r,_tokenResponse:n,operationType:t})})()}}function kt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Et(e){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,r.Z)(function*(e){var t;const n=Ae(e);if(yield n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new It({user:n.currentUser,providerId:null,operationType:"signIn"});const r=yield St(n,{returnSecureToken:!0}),i=yield It._fromIdTokenResponse(n,"signIn",r,!0);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class xt extends i.ZR{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,xt.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new xt(e,t,n,r)}}function At(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw xt._fromErrorAndOperation(e,n,t,r);throw n})}function Dt(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}function Pt(e,t){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,r.Z)(function*(e,t){const n=(0,i.m9)(e);yield Lt(!0,n,t);const{providerUserInfo:r}=yield $(n.auth,{idToken:yield n.getIdToken(),deleteProvider:[t]}),s=Dt(r||[]);return n.providerData=n.providerData.filter(e=>s.has(e.providerId)),s.has("phone")||(n.phoneNumber=null),yield n.auth._persistUserIfCurrent(n),n})).apply(this,arguments)}function Nt(e,t){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,r.Z)(function*(e,t,n=!1){const r=yield Q(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return It._forOperation(e,"link",r)})).apply(this,arguments)}function Lt(e,t,n){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,r.Z)(function*(e,t,n){yield re(t);const r=!1===e?"provider-already-linked":"no-such-provider";b(Dt(t.providerData).has(n)===e,t.auth,r)})).apply(this,arguments)}function Zt(e,t){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,r.Z)(function*(e,t,n=!1){const{auth:r}=e;try{const i=yield Q(e,At(r,"reauthenticate",t,e),n);b(i.idToken,r,"internal-error");const s=Y(i.idToken);b(s,r,"internal-error");const{sub:o}=s;return b(e.uid===o,r,"user-mismatch"),It._forOperation(e,"reauthenticate",i)}catch(i){throw"auth/user-not-found"===(null==i?void 0:i.code)&&g(r,"user-mismatch"),i}})).apply(this,arguments)}function Ft(e,t){return qt.apply(this,arguments)}function qt(){return(qt=(0,r.Z)(function*(e,t,n=!1){const r=yield At(e,"signIn",t),i=yield It._fromIdTokenResponse(e,"signIn",r);return n||(yield e._updateCurrentUser(i.user)),i})).apply(this,arguments)}function Vt(e,t){return jt.apply(this,arguments)}function jt(){return(jt=(0,r.Z)(function*(e,t){return Ft(Ae(e),t)})).apply(this,arguments)}function Bt(e,t){return $t.apply(this,arguments)}function $t(){return($t=(0,r.Z)(function*(e,t){const n=(0,i.m9)(e);return yield Lt(!1,n,t.providerId),Nt(n,t)})).apply(this,arguments)}function Ht(e,t){return zt.apply(this,arguments)}function zt(){return(zt=(0,r.Z)(function*(e,t){return Zt((0,i.m9)(e),t)})).apply(this,arguments)}function Gt(e,t){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,r.Z)(function*(e,t){return U(e,"POST","/v1/accounts:signInWithCustomToken",N(e,t))})).apply(this,arguments)}function Wt(e,t){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,r.Z)(function*(e,t){const n=Ae(e),r=yield Gt(n,{token:t,returnSecureToken:!0}),i=yield It._fromIdTokenResponse(n,"signIn",r);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class Yt{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Qt._fromServerResponse(e,t):g(e,"internal-error")}}class Qt extends Yt{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Qt(t)}}function Xt(e,t,n){var r;b((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),b(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(b(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(b(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function en(e,t,n){return tn.apply(this,arguments)}function tn(){return(tn=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s={requestType:"PASSWORD_RESET",email:t};n&&Xt(r,s,n),yield ze(r,s)})).apply(this,arguments)}function nn(e,t,n){return rn.apply(this,arguments)}function rn(){return(rn=(0,r.Z)(function*(e,t,n){yield Le((0,i.m9)(e),{oobCode:t,newPassword:n})})).apply(this,arguments)}function sn(e,t){return on.apply(this,arguments)}function on(){return(on=(0,r.Z)(function*(e,t){yield Fe((0,i.m9)(e),{oobCode:t})})).apply(this,arguments)}function an(e,t){return cn.apply(this,arguments)}function cn(){return(cn=(0,r.Z)(function*(e,t){const n=(0,i.m9)(e),r=yield Le(n,{oobCode:t}),s=r.requestType;switch(b(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":b(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":b(r.mfaInfo,n,"internal-error");default:b(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=Yt._fromServerResponse(Ae(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:s}})).apply(this,arguments)}function un(e,t){return ln.apply(this,arguments)}function ln(){return(ln=(0,r.Z)(function*(e,t){const{data:n}=yield an((0,i.m9)(e),t);return n.email})).apply(this,arguments)}function hn(e,t,n){return dn.apply(this,arguments)}function dn(){return(dn=(0,r.Z)(function*(e,t,n){const r=Ae(e),i=yield St(r,{returnSecureToken:!0,email:t,password:n}),s=yield It._fromIdTokenResponse(r,"signIn",i);return yield r._updateCurrentUser(s.user),s})).apply(this,arguments)}function pn(e,t,n){return Vt((0,i.m9)(e),dt.credential(t,n))}function fn(e,t,n){return gn.apply(this,arguments)}function gn(){return(gn=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s={requestType:"EMAIL_SIGNIN",email:t};b(n.handleCodeInApp,r,"argument-error"),n&&Xt(r,s,n),yield Ke(r,s)})).apply(this,arguments)}function mn(e,t){const n=ht.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}function yn(e,t,n){return vn.apply(this,arguments)}function vn(){return(vn=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s=dt.credentialWithLink(t,n||k());return b(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Vt(r,s)})).apply(this,arguments)}function _n(e,t){return bn.apply(this,arguments)}function bn(){return(bn=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:createAuthUri",N(e,t))})).apply(this,arguments)}function wn(e,t){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,r.Z)(function*(e,t){const n={identifier:t,continueUri:E()?k():"http://localhost"},{signinMethods:r}=yield _n((0,i.m9)(e),n);return r||[]})).apply(this,arguments)}function Tn(e,t){return In.apply(this,arguments)}function In(){return(In=(0,r.Z)(function*(e,t){const n=(0,i.m9)(e),r={requestType:"VERIFY_EMAIL",idToken:yield e.getIdToken()};t&&Xt(n.auth,r,t);const{email:s}=yield $e(n.auth,r);s!==e.email&&(yield e.reload())})).apply(this,arguments)}function kn(e,t,n){return En.apply(this,arguments)}function En(){return(En=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield e.getIdToken(),newEmail:t};n&&Xt(r.auth,s,n);const{email:o}=yield Je(r.auth,s);o!==e.email&&(yield e.reload())})).apply(this,arguments)}function Cn(e,t){return xn.apply(this,arguments)}function xn(){return(xn=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function An(e,t){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,r.Z)(function*(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=(0,i.m9)(e),s={idToken:yield r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=yield Q(r,Cn(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),yield r._updateTokensIfNecessary(o)})).apply(this,arguments)}function Pn(e,t){return Nn((0,i.m9)(e),t,null)}function Rn(e,t){return Nn((0,i.m9)(e),null,t)}function Nn(e,t,n){return On.apply(this,arguments)}function On(){return(On=(0,r.Z)(function*(e,t,n){const{auth:r}=e,i={idToken:yield e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=yield Q(e,Ze(r,i));yield e._updateTokensIfNecessary(s,!0)})).apply(this,arguments)}class Ln{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class Mn extends Ln{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Zn extends Ln{constructor(e,t){super(e,"facebook.com",t)}}class Un extends Mn{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class Fn extends Ln{constructor(e,t){super(e,"google.com",t)}}class qn extends Mn{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Vn(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=Y(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Ln(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new Zn(s,i);case"github.com":return new Un(s,i);case"google.com":return new Fn(s,i);case"twitter.com":return new qn(s,i,e.screenName||null);case"custom":case"anonymous":return new Ln(s,null);default:return new Ln(s,r,i)}}(n)}class jn{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new jn("enroll",e)}static _fromMfaPendingCredential(e){return new jn("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return jn._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return jn._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Bn{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ae(e),i=t.customData._serverResponse,s=(i.mfaInfo||[]).map(e=>Yt._fromServerResponse(n,e));b(i.mfaPendingCredential,n,"internal-error");const o=jn._fromMfaPendingCredential(i.mfaPendingCredential);return new Bn(o,s,function(){var e=(0,r.Z)(function*(e){const r=yield e._process(n,o);delete i.mfaInfo,delete i.mfaPendingCredential;const s=Object.assign(Object.assign({},i),{idToken:r.idToken,refreshToken:r.refreshToken});switch(t.operationType){case"signIn":const e=yield It._fromIdTokenResponse(n,t.operationType,s);return yield n._updateCurrentUser(e.user),e;case"reauthenticate":return b(t.user,n,"internal-error"),It._forOperation(t.user,t.operationType,s);default:g(n,"internal-error")}});return function(t){return e.apply(this,arguments)}}())}resolveSignIn(e){var t=this;return(0,r.Z)(function*(){return t.signInResolver(e)})()}}function $n(e,t){var n;const r=(0,i.m9)(e),s=t;return b(t.customData.operationType,r,"argument-error"),b(null===(n=s.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Bn._fromError(r,s)}function Hn(e,t){return O(e,"POST","/v2/accounts/mfaEnrollment:start",N(e,t))}class zn{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>Yt._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new zn(e)}getSession(){var e=this;return(0,r.Z)(function*(){return jn._fromIdtoken(yield e.user.getIdToken())})()}enroll(e,t){var n=this;return(0,r.Z)(function*(){const r=e,i=yield n.getSession(),s=yield Q(n.user,r._process(n.user.auth,i,t));return yield n.user._updateTokensIfNecessary(s),n.user.reload()})()}unenroll(e){var t=this;return(0,r.Z)(function*(){const n="string"==typeof e?e:e.uid,r=yield t.user.getIdToken(),i=yield Q(t.user,(s=t.user.auth,o={idToken:r,mfaEnrollmentId:n},O(s,"POST","/v2/accounts/mfaEnrollment:withdraw",N(s,o))));var s,o;t.enrolledFactors=t.enrolledFactors.filter(({uid:e})=>e!==n),yield t.user._updateTokensIfNecessary(i);try{yield t.user.reload()}catch(a){if("auth/user-token-expired"!==a.code)throw a}})()}}const Gn=new WeakMap;function Kn(e){const t=(0,i.m9)(e);return Gn.has(t)||Gn.set(t,zn._fromUser(t)),Gn.get(t)}class Wn{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Jn=(()=>{class e extends Wn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,i.z$)();return ye(e)||Te(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=ke(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,i.w1)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(e,t){var n=()=>super._set,i=this;return(0,r.Z)(function*(){yield n().call(i,e,t),i.localCache[e]=JSON.stringify(t)})()}_get(e){var t=()=>super._get,n=this;return(0,r.Z)(function*(){const r=yield t().call(n,e);return n.localCache[e]=JSON.stringify(r),r})()}_remove(e){var t=()=>super._remove,n=this;return(0,r.Z)(function*(){yield t().call(n,e),delete n.localCache[e]})()}}return e.type="LOCAL",e})(),Yn=(()=>{class e extends Wn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}return e.type="SESSION",e})();let Qn=(()=>{class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;const r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){var t=this;return(0,r.Z)(function*(){const n=e,{eventId:i,eventType:s,data:o}=n.data,a=t.handlersMap[s];if(!(null==a?void 0:a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const c=Array.from(a).map(function(){var e=(0,r.Z)(function*(e){return e(n.origin,o)});return function(t){return e.apply(this,arguments)}}()),u=yield function(e){return Promise.all(e.map(function(){var e=(0,r.Z)(function*(e){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}});return function(t){return e.apply(this,arguments)}}()))}(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})})()}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return e.receivers=[],e})();function Xn(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}class er{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,n=50){var i=this;return(0,r.Z)(function*(){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{const u=Xn("",20);r.port1.start();const l=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===u)switch(t.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(l),clearTimeout(s),c(new Error("invalid_response"))}}},i.handlers.add(o),r.port1.addEventListener("message",o.onMessage),i.target.postMessage({eventType:e,eventId:u,data:t},[r.port2])}).finally(()=>{o&&i.removeMessageHandler(o)})})()}}function tr(){return window}function nr(){return void 0!==tr().WorkerGlobalScope&&"function"==typeof tr().importScripts}function rr(){return(rr=(0,r.Z)(function*(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(e){return null}})).apply(this,arguments)}const ir="firebaseLocalStorageDb";class sr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function or(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly").objectStore("firebaseLocalStorage")}function ar(){const e=indexedDB.open(ir,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(r){n(r)}}),e.addEventListener("success",(0,r.Z)(function*(){const n=e.result;n.objectStoreNames.contains("firebaseLocalStorage")?t(n):(n.close(),yield function(){const e=indexedDB.deleteDatabase(ir);return new sr(e).toPromise()}(),t(yield ar()))}))})}function cr(e,t,n){return ur.apply(this,arguments)}function ur(){return(ur=(0,r.Z)(function*(e,t,n){const r=or(e,!0).put({fbase_key:t,value:n});return new sr(r).toPromise()})).apply(this,arguments)}function lr(){return(lr=(0,r.Z)(function*(e,t){const n=or(e,!1).get(t),r=yield new sr(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function hr(e,t){const n=or(e,!0).delete(t);return new sr(n).toPromise()}const dr=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var e=this;return(0,r.Z)(function*(){return e.db||(e.db=yield ar()),e.db})()}_withRetries(e){var t=this;return(0,r.Z)(function*(){let n=0;for(;;)try{const n=yield t._openDb();return yield e(n)}catch(r){if(n++>3)throw r;t.db&&(t.db.close(),t.db=void 0)}})()}initializeServiceWorkerMessaging(){var e=this;return(0,r.Z)(function*(){return nr()?e.initializeReceiver():e.initializeSender()})()}initializeReceiver(){var e=this;return(0,r.Z)(function*(){e.receiver=Qn._getInstance(nr()?self:null),e.receiver._subscribe("keyChanged",function(){var t=(0,r.Z)(function*(t,n){return{keyProcessed:(yield e._poll()).includes(n.key)}});return function(e,n){return t.apply(this,arguments)}}()),e.receiver._subscribe("ping",function(){var e=(0,r.Z)(function*(e,t){return["keyChanged"]});return function(t,n){return e.apply(this,arguments)}}())})()}initializeSender(){var e=this;return(0,r.Z)(function*(){var t,n;if(e.activeServiceWorker=yield function(){return rr.apply(this,arguments)}(),!e.activeServiceWorker)return;e.sender=new er(e.activeServiceWorker);const r=yield e.sender._send("ping",{},800);r&&(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(e.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(e){var t=this;return(0,r.Z)(function*(){var n;if(t.sender&&t.activeServiceWorker&&((null===(n=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null)===t.activeServiceWorker)try{yield t.sender._send("keyChanged",{key:e},t.serviceWorkerReceiverAvailable?800:50)}catch(n){}})()}_isAvailable(){return(0,r.Z)(function*(){try{if(!indexedDB)return!1;const e=yield ar();return yield cr(e,"__sak","1"),yield hr(e,"__sak"),!0}catch(e){}return!1})()}_withPendingWrite(e){var t=this;return(0,r.Z)(function*(){t.pendingWrites++;try{yield e()}finally{t.pendingWrites--}})()}_set(e,t){var n=this;return(0,r.Z)(function*(){return n._withPendingWrite((0,r.Z)(function*(){return yield n._withRetries(n=>cr(n,e,t)),n.localCache[e]=t,n.notifyServiceWorker(e)}))})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=yield t._withRetries(t=>function(e,t){return lr.apply(this,arguments)}(t,e));return t.localCache[e]=n,n})()}_remove(e){var t=this;return(0,r.Z)(function*(){return t._withPendingWrite((0,r.Z)(function*(){return yield t._withRetries(t=>hr(t,e)),delete t.localCache[e],t.notifyServiceWorker(e)}))})()}_poll(){var e=this;return(0,r.Z)(function*(){const t=yield e._withRetries(e=>{const t=or(e,!1).getAll();return new sr(t).toPromise()});if(!t)return[];if(0!==e.pendingWrites)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(e.localCache[i])!==JSON.stringify(s)&&(e.notifyListeners(i,s),n.push(i));for(const i of Object.keys(e.localCache))e.localCache[i]&&!r.has(i)&&(e.notifyListeners(i,null),n.push(i));return n})()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){var e=this;this.stopPolling(),this.pollTimer=setInterval((0,r.Z)(function*(){return e._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return e.type="LOCAL",e})();function pr(e,t){return O(e,"POST","/v2/accounts/mfaSignIn:start",N(e,t))}function fr(){return(fr=(0,r.Z)(function*(e){return(yield O(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function gr(e){return new Promise((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=m("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)})}function mr(e){return`__${e}${Math.floor(1e6*Math.random())}`}class yr{constructor(e){this.auth=e,this.counter=1e12,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new vr(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||1e12;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;return(null===(t=this._widgets.get(e||1e12))||void 0===t?void 0:t.getResponse())||""}execute(e){var t=this;return(0,r.Z)(function*(){var n;return null===(n=t._widgets.get(e||1e12))||void 0===n||n.execute(),""})()}}class vr{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;b(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<50;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const _r=mr("rcb"),br=new x(3e4,6e4);class wr{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!tr().grecaptcha}load(e,t=""){return b(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(tr().grecaptcha):new Promise((n,r)=>{const s=tr().setTimeout(()=>{r(m(e,"network-request-failed"))},br.get());tr()[_r]=()=>{tr().clearTimeout(s),delete tr()[_r];const i=tr().grecaptcha;if(!i)return void r(m(e,"internal-error"));const o=i.render;i.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(i)},gr(`https://www.google.com/recaptcha/api.js??${(0,i.xO)({onload:_r,render:"explicit",hl:t})}`).catch(()=>{clearTimeout(s),r(m(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!tr().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Sr{load(e){return(0,r.Z)(function*(){return new yr(e)})()}clearedOneInstance(){}}const Tr={theme:"light",type:"image"};class Ir{constructor(e,t=Object.assign({},Tr),n){this.parameters=t,this.type="recaptcha",this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ae(n),this.isInvisible="invisible"===this.parameters.size,b("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;b(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Sr:new wr,this.validateStartingState()}verify(){var e=this;return(0,r.Z)(function*(){e.assertNotDestroyed();const t=yield e.render(),n=e.getAssertedRecaptcha();return n.getResponse(t)||new Promise(r=>{const i=t=>{t&&(e.tokenChangeListeners.delete(i),r(t))};e.tokenChangeListeners.add(i),e.isInvisible&&n.execute(t)})})()}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){b(!this.parameters.sitekey,this.auth,"argument-error"),b(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),b("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){const n=tr()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){b(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var e=this;return(0,r.Z)(function*(){if(yield e.init(),!e.widgetId){let t=e.container;if(!e.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}e.widgetId=e.getAssertedRecaptcha().render(t,e.parameters)}return e.widgetId})()}init(){var e=this;return(0,r.Z)(function*(){b(E()&&!nr(),e.auth,"internal-error"),yield function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),e.recaptcha=yield e._recaptchaLoader.load(e.auth,e.auth.languageCode||void 0);const t=yield function(e){return fr.apply(this,arguments)}(e.auth);b(t,e.auth,"internal-error"),e.parameters.sitekey=t})()}getAssertedRecaptcha(){return b(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class kr{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=lt._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}function Er(e,t,n){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,r.Z)(function*(e,t,n){const r=Ae(e),s=yield Rr(r,t,(0,i.m9)(n));return new kr(s,e=>Vt(r,e))})).apply(this,arguments)}function xr(e,t,n){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);yield Lt(!1,r,"phone");const s=yield Rr(r.auth,t,(0,i.m9)(n));return new kr(s,e=>Bt(r,e))})).apply(this,arguments)}function Dr(e,t,n){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s=yield Rr(r.auth,t,(0,i.m9)(n));return new kr(s,e=>Ht(r,e))})).apply(this,arguments)}function Rr(e,t,n){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,r.Z)(function*(e,t,n){var r;const i=yield n.verify();try{let s;if(b("string"==typeof i,e,"argument-error"),b("recaptcha"===n.type,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s)return b("enroll"===t.type,e,"internal-error"),(yield Hn(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{b("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;return b(n,e,"missing-multi-factor-info"),(yield pr(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=yield it(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}})).apply(this,arguments)}function Or(e,t){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,r.Z)(function*(e,t){yield Nt((0,i.m9)(e),t)})).apply(this,arguments)}let Mr=(()=>{class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=Ae(t)}verifyPhoneNumber(e,t){return Rr(this.auth,e,(0,i.m9)(t))}static credential(e,t){return lt._fromVerification(e,t)}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?lt._fromTokenResponse(t,n):null}}return e.PROVIDER_ID="phone",e.PHONE_SIGN_IN_METHOD="phone",e})();function Zr(e,t){return t?I(t):(b(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class Ur extends Oe{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tt(e,this._buildIdpRequest())}_linkToIdToken(e,t){return tt(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return tt(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Fr(e){return Ft(e.auth,new Ur(e),e.bypassAuthState)}function qr(e){const{auth:t,user:n}=e;return b(n,t,"internal-error"),Zt(n,new Ur(e),e.bypassAuthState)}function Vr(e){return jr.apply(this,arguments)}function jr(){return(jr=(0,r.Z)(function*(e){const{auth:t,user:n}=e;return b(n,t,"internal-error"),Nt(n,new Ur(e),e.bypassAuthState)})).apply(this,arguments)}class Br{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,r.Z)(function*(t,n){e.pendingPromise={resolve:t,reject:n};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(r){e.reject(r)}});return function(e,n){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,r.Z)(function*(){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o)return void t.reject(o);const c={auth:t.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(a)(c))}catch(u){t.reject(u)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Fr;case"linkViaPopup":case"linkViaRedirect":return Vr;case"reauthViaPopup":case"reauthViaRedirect":return qr;default:g(this.auth,"internal-error")}}resolve(e){S(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){S(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $r=new x(2e3,1e4);function Hr(e,t,n){return zr.apply(this,arguments)}function zr(){return(zr=(0,r.Z)(function*(e,t,n){const r=Ae(e);v(e,t,pt);const i=Zr(r,n);return new Yr(r,"signInViaPopup",t,i).executeNotNull()})).apply(this,arguments)}function Gr(e,t,n){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);v(r.auth,t,pt);const s=Zr(r.auth,n);return new Yr(r.auth,"reauthViaPopup",t,s,r).executeNotNull()})).apply(this,arguments)}function Wr(e,t,n){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);v(r.auth,t,pt);const s=Zr(r.auth,n);return new Yr(r.auth,"linkViaPopup",t,s,r).executeNotNull()})).apply(this,arguments)}let Yr=(()=>{class e extends Br{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}executeNotNull(){var e=this;return(0,r.Z)(function*(){const t=yield e.execute();return b(t,e.auth,"internal-error"),t})()}onExecution(){var e=this;return(0,r.Z)(function*(){S(1===e.filter.length,"Popup operations only handle one event");const t=Xn();e.authWindow=yield e.resolver._openPopup(e.auth,e.provider,e.filter[0],t),e.authWindow.associatedEvent=t,e.resolver._originValidation(e.auth).catch(t=>{e.reject(t)}),e.resolver._isIframeWebStorageSupported(e.auth,t=>{t||e.reject(m(e.auth,"web-storage-unsupported"))}),e.pollUserCancellation()})()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(m(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;this.pollId=(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(m(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(e,$r.get())};e()}}return e.currentPopupAction=null,e})();const Qr=new Map;class Xr extends Br{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,r.Z)(function*(){let n=Qr.get(t.auth._key());if(!n){try{const r=(yield function(e,t){return ei.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;n=()=>Promise.resolve(r)}catch(r){n=()=>Promise.reject(r)}Qr.set(t.auth._key(),n)}return t.bypassAuthState||Qr.set(t.auth._key(),()=>Promise.resolve(null)),n()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,n=this;return(0,r.Z)(function*(){if("signInViaRedirect"===e.type)return t().call(n,e);if("unknown"!==e.type){if(e.eventId){const r=yield n.auth._redirectUserForId(e.eventId);if(r)return n.user=r,t().call(n,e);n.resolve(null)}}else n.resolve(null)})()}onExecution(){return(0,r.Z)(function*(){})()}cleanUp(){}}function ei(){return(ei=(0,r.Z)(function*(e,t){const n=oi(t),r=si(e);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function ti(e,t){return ni.apply(this,arguments)}function ni(){return(ni=(0,r.Z)(function*(e,t){return si(e)._set(oi(t),"true")})).apply(this,arguments)}function ri(){Qr.clear()}function ii(e,t){Qr.set(e._key(),t)}function si(e){return I(e._redirectPersistence)}function oi(e){return pe("pendingRedirect",e.config.apiKey,e.name)}function ai(e,t,n){return function(e,t,n){return ci.apply(this,arguments)}(e,t,n)}function ci(){return(ci=(0,r.Z)(function*(e,t,n){const r=Ae(e);v(e,t,pt);const i=Zr(r,n);return yield ti(i,r),i._openRedirect(r,t,"signInViaRedirect")})).apply(this,arguments)}function ui(e,t,n){return function(e,t,n){return li.apply(this,arguments)}(e,t,n)}function li(){return(li=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);v(r.auth,t,pt);const s=Zr(r.auth,n);yield ti(s,r.auth);const o=yield yi(r);return s._openRedirect(r.auth,t,"reauthViaRedirect",o)})).apply(this,arguments)}function hi(e,t,n){return function(e,t,n){return di.apply(this,arguments)}(e,t,n)}function di(){return(di=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);v(r.auth,t,pt);const s=Zr(r.auth,n);yield Lt(!1,r,t.providerId),yield ti(s,r.auth);const o=yield yi(r);return s._openRedirect(r.auth,t,"linkViaRedirect",o)})).apply(this,arguments)}function pi(e,t){return fi.apply(this,arguments)}function fi(){return(fi=(0,r.Z)(function*(e,t){return yield Ae(e)._initializationPromise,gi(e,t,!1)})).apply(this,arguments)}function gi(e,t){return mi.apply(this,arguments)}function mi(){return(mi=(0,r.Z)(function*(e,t,n=!1){const r=Ae(e),i=Zr(r,t),s=new Xr(r,i,n),o=yield s.execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,t)),o})).apply(this,arguments)}function yi(e){return vi.apply(this,arguments)}function vi(){return(vi=(0,r.Z)(function*(e){const t=Xn(`${e.uid}:::`);return e._redirectEventId=t,yield e.auth._setRedirectUser(e),yield e.auth._persistUserIfCurrent(e),t})).apply(this,arguments)}class _i{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wi(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!wi(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(m(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bi(e))}saveEventToCache(e){this.cachedEventUids.add(bi(e)),this.lastProcessedEventTime=Date.now()}}function bi(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function wi({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}function Si(e){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,r.Z)(function*(e,t={}){return O(e,"GET","/v1/projects",t)})).apply(this,arguments)}const Ii=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ki=/^https?/;function Ei(){return(Ei=(0,r.Z)(function*(e){if(e.config.emulator)return;const{authorizedDomains:t}=yield Si(e);for(const r of t)try{if(Ci(r))return}catch(n){}g(e,"unauthorized-domain")})).apply(this,arguments)}function Ci(e){const t=k(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!ki.test(n))return!1;if(Ii.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const xi=new x(3e4,6e4);function Ai(){const e=tr().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Di=null;function Pi(e){return Di=Di||function(e){return new Promise((t,n)=>{var r,i,s;function o(){Ai(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ai(),n(m(e,"network-request-failed"))},timeout:xi.get()})}if(null===(i=null===(r=tr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=tr().gapi)||void 0===s?void 0:s.load)){const t=mr("iframefcb");return tr()[t]=()=>{gapi.load?o():n(m(e,"network-request-failed"))},gr(`https://apis.google.com/js/api.js?onload=${t}`).catch(e=>n(e))}o()}}).catch(e=>{throw Di=null,e})}(e),Di}const Ri=new x(5e3,15e3),Ni={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Oi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Li(e){const t=e.config;b(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?A(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:s.SDK_VERSION},o=Oi.get(e.config.apiHost);o&&(r.eid=o);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${(0,i.xO)(r).slice(1)}`}function Mi(){return(Mi=(0,r.Z)(function*(e){const t=yield Pi(e),n=tr().gapi;return b(n,e,"internal-error"),t.open({where:document.body,url:Li(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ni,dontclear:!0},t=>new Promise(function(){var n=(0,r.Z)(function*(n,r){yield t.restyle({setHideOnLeave:!1});const i=m(e,"network-request-failed"),s=tr().setTimeout(()=>{r(i)},Ri.get());function o(){tr().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})});return function(e,t){return n.apply(this,arguments)}}()))})).apply(this,arguments)}const Zi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ui{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Fi(e,t,n,r,o,a){b(e.config.authDomain,e,"auth-domain-config-required"),b(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:s.SDK_VERSION,eventId:o};if(t instanceof pt){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",(0,i.xb)(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))c[e]=t}if(t instanceof ft){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(c.scopes=e.join(","))}e.tenantId&&(c.tid=e.tenantId);const u=c;for(const i of Object.keys(u))void 0===u[i]&&delete u[i];return`${function({config:e}){return e.emulator?A(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,i.xO)(u).slice(1)}`}const qi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yn,this._completeRedirectFn=gi,this._overrideRedirectResult=ii}_openPopup(e,t,n,s){var o=this;return(0,r.Z)(function*(){var r;S(null===(r=o.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");const a=Fi(e,t,n,k(),s);return function(e,t,n,r=500,s=600){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},Zi),{width:r.toString(),height:s.toString(),top:o,left:a}),l=(0,i.z$)().toLowerCase();n&&(c=ve(l)?"_blank":n),me(l)&&(t=t||"http://localhost",u.scrollbars="yes");const h=Object.entries(u).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=(0,i.z$)()){var t;return Te(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==c)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",c),new Ui(null);const d=window.open(t||"",c,h);b(d,e,"popup-blocked");try{d.focus()}catch(p){}return new Ui(d)}(e,a,Xn())})()}_openRedirect(e,t,n,i){var s=this;return(0,r.Z)(function*(){var r;return yield s._originValidation(e),r=Fi(e,t,n,k(),i),tr().location.href=r,new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(S(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}initAndGetManager(e){var t=this;return(0,r.Z)(function*(){const n=yield function(e){return Mi.apply(this,arguments)}(e),r=new _i(e);return n.register("authEvent",t=>(b(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:r},t.iframes[e._key()]=n,r})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send("webStorageSupport",{type:"webStorageSupport"},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),g(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Ei.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ke()||ye()||Te()}};class Vi extends class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return w("unexpected MultiFactorSessionType")}}}{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Vi(e)}_finalizeEnroll(e,t,n){return function(e,t){return O(e,"POST","/v2/accounts/mfaEnrollment:finalize",N(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return O(e,"POST","/v2/accounts/mfaSignIn:finalize",N(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ji=(()=>{class e{constructor(){}static assertion(e){return Vi._fromCredential(e)}}return e.FACTOR_ID="phone",e})();class Bi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,r.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){b(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,s._registerComponent)(new c.wA("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),{apiKey:i,authDomain:s}=n.options;return((e,n)=>{b(i&&!i.includes(":"),"invalid-api-key",{appName:e.name}),b(!(null==s?void 0:s.includes(":")),"argument-error",{appName:e.name});const r={apiKey:i,authDomain:s,clientPlatform:"Browser",apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ee("Browser")},o=new xe(e,n,r);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(I);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(o,t),o})(n,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,s._registerComponent)(new c.wA("auth-internal",e=>{return t=Ae(e.getProvider("auth").getImmediate()),new Bi(t);var t},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,s.registerVersion)("@firebase/auth","0.20.1",void 0),(0,s.registerVersion)("@firebase/auth","0.20.1","esm2017")},8604:function(e,t,n){"use strict";n.d(t,{wA:function(){return s},H0:function(){return a}});var r=n(6304),i=n(3854);class s{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new i.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,r.Z)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(i)&&s.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,"[DEFAULT]"===r?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(i){}var r;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:"[DEFAULT]":e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},9306:function(e,t,n){"use strict";n.d(t,{in:function(){return i},Yd:function(){return u},Ub:function(){return l},Am:function(){return h}});const r=[];var i=(()=>(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={})),i))();const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},c=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=a[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class u{constructor(e){this.name=e,this._logLevel=o,this._logHandler=c,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...e),this._logHandler(this,i.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...e),this._logHandler(this,i.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,i.INFO,...e),this._logHandler(this,i.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,i.WARN,...e),this._logHandler(this,i.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...e),this._logHandler(this,i.ERROR,...e)}}function l(e){r.forEach(t=>{t.setLogLevel(e)})}function h(e,t){for(const n of r){let r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:(t,n,...s)=>{const o=s.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(e=>e).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:i[n].toLowerCase(),message:o,args:s,type:t.name})}}}},3854:function(e,t,n){"use strict";n.d(t,{BH:function(){return c},LL:function(){return I},ZR:function(){return T},zI:function(){return S},US:function(){return i},tV:function(){return o},L:function(){return s},$s:function(){return M},r3:function(){return E},Sg:function(){return u},ne:function(){return N},vZ:function(){return x},ZB:function(){return a},pd:function(){return R},m9:function(){return Z},z$:function(){return l},jU:function(){return p},ru:function(){return f},d:function(){return m},xb:function(){return C},w1:function(){return y},hl:function(){return b},uI:function(){return h},UG:function(){return d},b$:function(){return g},G6:function(){return _},Mn:function(){return v},xO:function(){return D},zd:function(){return P},eu:function(){return w}});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0;let u=(15&o)<<2|c>>6,l=63&c;a||(l=64,s||(u=64)),r.push(n[t>>2],n[(3&t)<<4|o>>4],n[u],n[l])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw Error();r.push(t<<2|s>>4),64!==o&&(r.push(s<<4&240|o>>2),64!==a&&r.push(o<<6&192|a))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},s=function(e){return function(e){const t=r(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")},o=function(e){try{return i.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function a(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=a(e[n],t[n]));return e}class c{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function u(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[s(JSON.stringify({alg:"none",type:"JWT"})),s(JSON.stringify(o)),""].join(".")}function l(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function h(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(l())}function d(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function p(){return"object"==typeof self&&self.self===self}function f(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function g(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function m(){return l().indexOf("Electron/")>=0}function y(){const e=l();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function v(){return l().indexOf("MSAppHost/")>=0}function _(){return!d()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b(){return"object"==typeof indexedDB}function w(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}function S(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class T extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,T.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,I.prototype.create)}}class I{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(k,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error";return new T(r,`${this.serviceName}: ${s} (${r}).`,n)}}const k=/\{\$([^}]+)}/g;function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function C(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function x(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(A(n)&&A(s)){if(!x(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function A(e){return null!==e&&"object"==typeof e}function D(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function P(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function R(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function N(e,t){const n=new O(e,t);return n.subscribe.bind(n)}class O{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of["next","error","complete"])if(n in e&&"function"==typeof e[n])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=L),void 0===r.error&&(r.error=L),void 0===r.complete&&(r.complete=L);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function L(){}function M(e,t=1e3,n=2){const r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function Z(e){return e&&e._delegate?e._delegate:e}},2329:function(e,t,n){"use strict";n.d(t,{Mq:function(){return r.getApp},C6:function(){return r.getApps},ZF:function(){return r.initializeApp},KN:function(){return r.registerVersion}});var r=n(279);(0,r.registerVersion)("firebase","9.8.1","app")},7841:function(e,t,n){"use strict";n.d(t,{Z:function(){return r.Z}});var r=n(156);r.Z.registerVersion("firebase","9.8.1","app-compat")},4828:function(e,t,n){"use strict";n.r(t);var r=n(6304),i=n(156),s=n(8882),o=n(3854),a=(n(279),n(9306),n(8604));function c(){return window}function u(){return(u=(0,r.Z)(function*(e,t,n){var r;const{BuildInfo:i}=c();(0,s.aq)(t.sessionId,"AuthEvent did not contain a session ID");const o=yield d(t.sessionId),a={};return(0,s.ar)()?a.ibi=i.packageName:(0,s.as)()?a.apn=i.packageName:(0,s.at)(e,"operation-not-supported-in-this-environment"),i.displayName&&(a.appDisplayName=i.displayName),a.sessionId=o,(0,s.au)(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,a)})).apply(this,arguments)}function l(){return(l=(0,r.Z)(function*(e){const{BuildInfo:t}=c(),n={};(0,s.ar)()?n.iosBundleId=t.packageName:(0,s.as)()?n.androidPackageName=t.packageName:(0,s.at)(e,"operation-not-supported-in-this-environment"),yield(0,s.av)(e,n)})).apply(this,arguments)}function h(){return(h=(0,r.Z)(function*(e,t,n){const{cordova:r}=c();let i=()=>{};try{yield new Promise((o,a)=>{let c=null;function u(){var e;o();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function l(){c||(c=window.setTimeout(()=>{a((0,s.aw)(e,"redirect-cancelled-by-user"))},2e3))}function h(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}t.addPassiveListener(u),document.addEventListener("resume",l,!1),(0,s.as)()&&document.addEventListener("visibilitychange",h,!1),i=()=>{t.removePassiveListener(u),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",h,!1),c&&window.clearTimeout(c)}})}finally{i()}})).apply(this,arguments)}function d(e){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)(function*(e){const t=f(e),n=yield crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function f(e){if((0,s.aq)(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}class g extends s.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}initialized(){var e=this;return(0,r.Z)(function*(){yield e.initPromise})()}}function m(e){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)(function*(e){const t=yield _()._get(b(e));return t&&(yield _()._remove(b(e))),t})).apply(this,arguments)}function v(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function _(){return(0,s.ay)(s.b)}function b(e){return(0,s.az)("authEvent",e.config.apiKey,e.name)}function w(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return(0,o.zd)(n.join("?"))}function S(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,s.aw)("no-auth-event")}}function T(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function I(e=(0,o.z$)()){return!("file:"!==T()&&"ionic:"!==T()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function k(){try{const e=self.localStorage,t=s.aI();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(e=(0,o.z$)()){return(0,o.w1)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=(0,o.z$)()){return/Edge\/\d+/.test(e)}(e)}()||(0,o.hl)()}catch(e){return E()&&(0,o.hl)()}return!1}function E(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function C(){return("http:"===T()||"https:"===T()||(0,o.ru)()||I())&&!((0,o.b$)()||(0,o.UG)())&&k()&&!E()}function x(){return I()&&"undefined"!=typeof document}function A(){return(A=(0,r.Z)(function*(){return!!x()&&new Promise(e=>{const t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})})).apply(this,arguments)}const D={LOCAL:"local",NONE:"none",SESSION:"session"},P=s.ax;function R(e){return N.apply(this,arguments)}function N(){return(N=(0,r.Z)(function*(e){yield e._initializationPromise;const t=O(),n=s.az("persistence",e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())})).apply(this,arguments)}function O(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const L=s.ax;class M{constructor(){this.browserResolver=s.ay(s.k),this.cordovaResolver=s.ay(class{constructor(){this._redirectPersistence=s.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=s.aB,this._overrideRedirectResult=s.aC}_initialize(e){var t=this;return(0,r.Z)(function*(){const n=e._key();let r=t.eventManagers.get(n);return r||(r=new g(e),t.eventManagers.set(n,r),t.attachCallbackListeners(e,r)),r})()}_openPopup(e){(0,s.at)(e,"operation-not-supported-in-this-environment")}_openRedirect(e,t,n,i){var o=this;return(0,r.Z)(function*(){!function(e){var t,n,r,i,o,a,u,l,h,d;const p=c();(0,s.ax)("function"==typeof(null===(t=null==p?void 0:p.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,s.ax)(void 0!==(null===(n=null==p?void 0:p.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,s.ax)("function"==typeof(null===(o=null===(i=null===(r=null==p?void 0:p.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,s.ax)("function"==typeof(null===(l=null===(u=null===(a=null==p?void 0:p.cordova)||void 0===a?void 0:a.plugins)||void 0===u?void 0:u.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,s.ax)("function"==typeof(null===(d=null===(h=null==p?void 0:p.cordova)||void 0===h?void 0:h.InAppBrowser)||void 0===d?void 0:d.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const r=yield o._initialize(e);yield r.initialized(),r.resetRedirect(),(0,s.aD)(),yield o._originValidation(e);const a=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:v(),postBody:null,tenantId:e.tenantId,error:(0,s.aw)(e,"no-auth-event")}}(e,n,i);yield function(e,t){return _()._set(b(e),t)}(e,a);const l=yield function(e,t,n){return u.apply(this,arguments)}(e,a,t),d=yield function(e){const{cordova:t}=c();return new Promise(n=>{t.plugins.browsertab.isAvailable(r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,(0,s.ap)()?"_blank":"_system","location=yes"),n(i)})})}(l);return function(e,t,n){return h.apply(this,arguments)}(e,r,d)})()}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return l.apply(this,arguments)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:i,BuildInfo:o}=c(),a=setTimeout((0,r.Z)(function*(){yield m(e),t.onEvent(S())}),500),u=function(){var n=(0,r.Z)(function*(n){clearTimeout(a);const r=yield m(e);let i=null;r&&(null==n?void 0:n.url)&&(i=function(e,t){var n,r;const i=function(e){const t=w(e),n=t.link?decodeURIComponent(t.link):void 0,r=w(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return w(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=w(i),o=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,a=null===(r=null===(n=null==o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],c=a?(0,s.aw)(a):null;return c?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(r,n.url)),t.onEvent(i||S())});return function(e){return n.apply(this,arguments)}}();void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,u);const l=i,h=`${o.packageName.toLowerCase()}://`;c().handleOpenURL=function(){var e=(0,r.Z)(function*(e){if(e.toLowerCase().startsWith(h)&&u({url:e}),"function"==typeof l)try{l(e)}catch(t){console.error(t)}});return function(t){return e.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=s.a,this._completeRedirectFn=s.aB,this._overrideRedirectResult=s.aC}_initialize(e){var t=this;return(0,r.Z)(function*(){return yield t.selectUnderlyingResolver(),t.assertedUnderlyingResolver._initialize(e)})()}_openPopup(e,t,n,i){var s=this;return(0,r.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openPopup(e,t,n,i)})()}_openRedirect(e,t,n,i){var s=this;return(0,r.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openRedirect(e,t,n,i)})()}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return x()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return L(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var e=this;return(0,r.Z)(function*(){if(e.underlyingResolver)return;const t=yield function(){return A.apply(this,arguments)}();e.underlyingResolver=t?e.cordovaResolver:e.browserResolver})()}}function Z(e){return e.unwrap()}function U(e){const{_tokenResponse:t}=e instanceof o.ZR?e.customData:e;if(!t)return null;if(!(e instanceof o.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return s.P.credentialFromResult(e);const n=t.providerId;if(!n||n===s.o.PASSWORD)return null;let r;switch(n){case s.o.GOOGLE:r=s.Q;break;case s.o.FACEBOOK:r=s.N;break;case s.o.GITHUB:r=s.T;break;case s.o.TWITTER:r=s.W;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:o,pendingToken:a,nonce:c}=t;return i||o||e||a?a?n.startsWith("saml.")?s.aL._create(n,a):s.J._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:e,accessToken:i}):new s.U(n).credential({idToken:e,accessToken:i,rawNonce:c}):null}return e instanceof o.ZR?r.credentialFromError(e):r.credentialFromResult(e)}function F(e,t){return t.catch(t=>{throw t instanceof o.ZR&&function(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new j(e,s.an(e,t));else if(r){const e=U(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}(e,t),t}).then(e=>{const t=e.user;return{operationType:e.operationType,credential:(n=e,U(n)),additionalUserInfo:s.al(e),user:B.getOrCreate(t)};var n})}function q(e,t){return V.apply(this,arguments)}function V(){return(V=(0,r.Z)(function*(e,t){const n=yield t;return{verificationId:n.verificationId,confirm:t=>F(e,n.confirm(t))}})).apply(this,arguments)}class j{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return F(Z(this.auth),this.resolver.resolveSignIn(e))}}class B{constructor(e){this._delegate=e,this.multiFactor=s.ao(e)}static getOrCreate(e){return B.USER_MAP.has(e)||B.USER_MAP.set(e,new B(e)),B.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}linkWithCredential(e){var t=this;return(0,r.Z)(function*(){return F(t.auth,s.Z(t._delegate,e))})()}linkWithPhoneNumber(e,t){var n=this;return(0,r.Z)(function*(){return q(n.auth,s.l(n._delegate,e,t))})()}linkWithPopup(e){var t=this;return(0,r.Z)(function*(){return F(t.auth,s.d(t._delegate,e,M))})()}linkWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield R(s.aE(t.auth)),s.g(t._delegate,e,M)})()}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}reauthenticateWithCredential(e){var t=this;return(0,r.Z)(function*(){return F(t.auth,s._(t._delegate,e))})()}reauthenticateWithPhoneNumber(e,t){return q(this.auth,s.r(this._delegate,e,t))}reauthenticateWithPopup(e){return F(this.auth,s.e(this._delegate,e,M))}reauthenticateWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield R(s.aE(t.auth)),s.h(t._delegate,e,M)})()}sendEmailVerification(e){return s.ab(this._delegate,e)}unlink(e){var t=this;return(0,r.Z)(function*(){return yield s.ak(t._delegate,e),t})()}updateEmail(e){return s.ag(this._delegate,e)}updatePassword(e){return s.ah(this._delegate,e)}updatePhoneNumber(e){return s.u(this._delegate,e)}updateProfile(e){return s.af(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return s.ac(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}B.USER_MAP=new WeakMap;const $=s.ax;let H=(()=>{class e{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;$(n,"invalid-api-key",{appName:e.name}),$(n,"invalid-api-key",{appName:e.name});const r="undefined"!=typeof window?M:void 0;this._delegate=t.initialize({options:{persistence:G(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(s.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?B.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){s.G(this._delegate,e,t)}applyActionCode(e){return s.a2(this._delegate,e)}checkActionCode(e){return s.a3(this._delegate,e)}confirmPasswordReset(e,t){return s.a1(this._delegate,e,t)}createUserWithEmailAndPassword(e,t){var n=this;return(0,r.Z)(function*(){return F(n._delegate,s.a5(n._delegate,e,t))})()}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return s.aa(this._delegate,e)}isSignInWithEmailLink(e){return s.a8(this._delegate,e)}getRedirectResult(){var e=this;return(0,r.Z)(function*(){$(C(),e._delegate,"operation-not-supported-in-this-environment");const t=yield s.j(e._delegate,M);return t?F(e._delegate,Promise.resolve(t)):{credential:null,user:null}})()}addFrameworkForLogging(e){!function(e,t){(0,s.aE)(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=z(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=z(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return s.a7(this._delegate,e,t)}sendPasswordResetEmail(e,t){return s.a0(this._delegate,e,t||void 0)}setPersistence(e){var t=this;return(0,r.Z)(function*(){let n;switch(function(e,t){P(Object.values(D).includes(t),e,"invalid-persistence-type"),(0,o.b$)()?P(t!==D.SESSION,e,"unsupported-persistence-type"):(0,o.UG)()?P(t===D.NONE,e,"unsupported-persistence-type"):E()?P(t===D.NONE||t===D.LOCAL&&(0,o.hl)(),e,"unsupported-persistence-type"):P(t===D.NONE||k(),e,"unsupported-persistence-type")}(t._delegate,e),e){case D.SESSION:n=s.a;break;case D.LOCAL:n=(yield s.ay(s.i)._isAvailable())?s.i:s.b;break;case D.NONE:n=s.L;break;default:return s.at("argument-error",{appName:t._delegate.name})}return t._delegate.setPersistence(n)})()}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return F(this._delegate,s.X(this._delegate))}signInWithCredential(e){return F(this._delegate,s.Y(this._delegate,e))}signInWithCustomToken(e){return F(this._delegate,s.$(this._delegate,e))}signInWithEmailAndPassword(e,t){return F(this._delegate,s.a6(this._delegate,e,t))}signInWithEmailLink(e,t){return F(this._delegate,s.a9(this._delegate,e,t))}signInWithPhoneNumber(e,t){return q(this._delegate,s.s(this._delegate,e,t))}signInWithPopup(e){var t=this;return(0,r.Z)(function*(){return $(C(),t._delegate,"operation-not-supported-in-this-environment"),F(t._delegate,s.c(t._delegate,e,M))})()}signInWithRedirect(e){var t=this;return(0,r.Z)(function*(){return $(C(),t._delegate,"operation-not-supported-in-this-environment"),yield R(t._delegate),s.f(t._delegate,e,M)})()}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return s.a4(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return e.Persistence=D,e})();function z(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&B.getOrCreate(e)),error:t,complete:n}}function G(e,t){const n=function(e,t){const n=O();if(!n)return[];const r=s.az("persistence",e,t);switch(n.getItem(r)){case D.NONE:return[s.L];case D.LOCAL:return[s.i,s.a];case D.SESSION:return[s.a];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(s.i)||n.push(s.i),"undefined"!=typeof window)for(const r of[s.b,s.a])n.includes(r)||n.push(r);return n.includes(s.L)||n.push(s.L),n}class K{constructor(){this.providerId="phone",this._delegate=new s.P(Z(i.Z.auth()))}static credential(e,t){return s.P.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}K.PHONE_SIGN_IN_METHOD=s.P.PHONE_SIGN_IN_METHOD,K.PROVIDER_ID=s.P.PROVIDER_ID;const W=s.ax;var J;(J=i.Z).INTERNAL.registerComponent(new a.wA("auth-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new H(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:s.A.EMAIL_SIGNIN,PASSWORD_RESET:s.A.PASSWORD_RESET,RECOVER_EMAIL:s.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:s.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:s.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:s.A.VERIFY_EMAIL}},EmailAuthProvider:s.M,FacebookAuthProvider:s.N,GithubAuthProvider:s.T,GoogleAuthProvider:s.Q,OAuthProvider:s.U,SAMLAuthProvider:s.V,PhoneAuthProvider:K,PhoneMultiFactorGenerator:s.m,RecaptchaVerifier:class{constructor(e,t,n=i.Z.app()){var r;W(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new s.R(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:s.W,Auth:H,AuthCredential:s.H,Error:o.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),J.registerVersion("@firebase/auth-compat","0.2.14")},250:function(e,t){"use strict";var n=function(){function e(t){if(!t)throw new TypeError("Invalid argument; `value` has no value.");this.value=e.EMPTY,t&&e.isGuid(t)&&(this.value=t)}return e.isGuid=function(t){var n=t.toString();return t&&(t instanceof e||e.validator.test(n))},e.create=function(){return new e([e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-"))},e.createEmpty=function(){return new e("emptyguid")},e.parse=function(t){return new e(t)},e.raw=function(){return[e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-")},e.gen=function(e){for(var t="",n=0;n<e;n++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t},e.prototype.equals=function(t){return e.isGuid(t)&&this.value===t.toString()},e.prototype.isEmpty=function(){return this.value===e.EMPTY},e.prototype.toString=function(){return this.value},e.prototype.toJSON=function(){return{value:this.value}},e.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),e.EMPTY="00000000-0000-0000-0000-000000000000",e}();t.i=n},6508:function(e,t,n){"use strict";n.d(t,{Lj:function(){return g},X3:function(){return f}});var r=n(6304);let i,s;const o=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap;let h={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return a.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return d(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function d(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(d(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&o.set(t,e)}).catch(()=>{}),l.set(t,e),t}(e);if(u.has(e))return u.get(e);const t=function(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(p(this),e),d(o.get(this))}:function(...e){return d(t.apply(p(this),e))}:function(e,...n){const r=t.call(p(this),e,...n);return c.set(r,e.sort?e.sort():[e]),d(r)}:(e instanceof IDBTransaction&&function(e){if(a.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});a.set(e,t)}(e),n=e,(i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>n instanceof e)?new Proxy(e,h):e);var t,n}(e);return t!==e&&(u.set(e,t),l.set(t,e)),t}const p=e=>l.get(e);function f(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=d(o);return r&&o.addEventListener("upgradeneeded",e=>{r(d(o.result),e.oldVersion,e.newVersion,d(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function g(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",()=>t()),d(n).then(()=>{})}const m=["get","getKey","getAll","getAllKeys","count"],y=["put","add","delete","clear"],v=new Map;function _(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(v.get(t))return v.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=y.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!s&&!m.includes(n))return;const o=function(){var e=(0,r.Z)(function*(e,...t){const r=this.transaction(e,s?"readwrite":"readonly");let o=r.store;return i&&(o=o.index(t.shift())),(yield Promise.all([o[n](...t),s&&r.done]))[0]});return function(t){return e.apply(this,arguments)}}();return v.set(t,o),o}var b;b=h,h={...b,get:(e,t,n)=>_(e,t)||b.get(e,t,n),has:(e,t)=>!!_(e,t)||b.has(e,t)}},3098:function(e,t,n){"use strict";n.d(t,{P:function(){return o}});var r=n(9193),i=n(5917),s=n(205);class o{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return(0,i.of)(this.value);case"E":return(0,s._)(this.error);case"C":return(0,r.c)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new o("N",e):o.undefinedValueNotification}static createError(e){return new o("E",void 0,e)}static createComplete(){return o.completeNotification}}o.completeNotification=new o("C"),o.undefinedValueNotification=new o("N",void 0)},7574:function(e,t,n){"use strict";n.d(t,{y:function(){return u}});var r=n(7393),i=n(9181),s=n(6490),o=n(6554),a=n(4487),c=n(2494);let u=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:o}=this,a=function(e,t,n){if(e){if(e instanceof r.L)return e;if(e[i.b])return e[i.b]()}return e||t||n?new r.L(e,t,n):new r.L(s.c)}(e,t,n);if(a.add(o?o.call(a,this.source):this.source||c.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),c.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(e){try{return this._subscribe(e)}catch(t){c.v.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:i}=e;if(t||i)return!1;e=n&&n instanceof r.L?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=l(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[o.L](){return this}pipe(...e){return 0===e.length?this:(0===(t=e).length?a.y:1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)})(this);var t}toPromise(e){return new(e=l(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function l(e){if(e||(e=c.v.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},6490:function(e,t,n){"use strict";n.d(t,{c:function(){return s}});var r=n(2494),i=n(4449);const s={closed:!0,next(e){},error(e){if(r.v.useDeprecatedSynchronousErrorHandling)throw e;(0,i.z)(e)},complete(){}}},9765:function(e,t,n){"use strict";n.d(t,{Yc:function(){return u},xQ:function(){return l}});var r=n(7574),i=n(7393),s=n(5319),o=n(7971),a=n(8858),c=n(9181);class u extends i.L{constructor(e){super(e),this.destination=e}}let l=(()=>{class e extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[c.b](){return new u(this)}lift(e){const t=new h(this,this);return t.operator=e,t}next(e){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].next(e)}}error(e){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new o.N;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new o.N;return this.hasError?(e.error(this.thrownError),s.w.EMPTY):this.isStopped?(e.complete(),s.w.EMPTY):(this.observers.push(e),new a.W(this,e))}asObservable(){const e=new r.y;return e.source=this,e}}return e.create=(e,t)=>new h(e,t),e})();class h extends l{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):s.w.EMPTY}}},8858:function(e,t,n){"use strict";n.d(t,{W:function(){return i}});var r=n(5319);class i extends r.w{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},7393:function(e,t,n){"use strict";n.d(t,{L:function(){return u}});var r=n(9105),i=n(6490),s=n(5319),o=n(9181),a=n(2494),c=n(4449);class u extends s.w{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!e){this.destination=i.c;break}if("object"==typeof e){e instanceof u?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,e,t,n)}}[o.b](){return this}static create(e,t,n){const r=new u(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class l extends u{constructor(e,t,n,s){let o;super(),this._parentSubscriber=e;let a=this;(0,r.m)(t)?o=t:t&&(o=t.next,n=t.error,s=t.complete,t!==i.c&&(a=Object.create(t),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,c.z)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,c.z)(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,c.z)(n)}}__tryOrSetError(e,t,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):((0,c.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}},5319:function(e,t,n){"use strict";n.d(t,{w:function(){return a}});var r=n(9796),i=n(1555),s=n(9105);const o=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();class a{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:n,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof a)t.remove(this);else if(null!==t)for(let r=0;r<t.length;++r)t[r].remove(this);if((0,s.m)(c)){n&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof o?u(h.errors):[h]}}if((0,r.k)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if((0,i.K)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof o?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new o(e)}add(e){let t=e;if(!e)return a.EMPTY;switch(typeof e){case"function":t=new a(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof a)){const e=t;t=new a,t._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:n}=t;if(null===n)t._parentOrParents=this;else if(n instanceof a){if(n===this)return t;t._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return t;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}var c;function u(e){return e.reduce((e,t)=>e.concat(t instanceof o?t.errors:t),[])}a.EMPTY=((c=new a).closed=!0,c)},2494:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:function(e,t,n){"use strict";n.d(t,{IY:function(){return o},Ds:function(){return a},ft:function(){return c}});var r=n(7393),i=n(7574),s=n(7444);class o extends r.L{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function c(e,t){if(t.closed)return;if(e instanceof i.y)return e.subscribe(t);let n;try{n=(0,s.s)(e)(t)}catch(r){t.error(r)}return n}},2441:function(e,t,n){"use strict";n.d(t,{c:function(){return a},N:function(){return c}});var r=n(9765),i=n(7574),s=n(5319),o=n(1307);class a extends i.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new s.w,e.add(this.source.subscribe(new u(this.getSubject(),this))),e.closed&&(this._connection=null,e=s.w.EMPTY)),e}refCount(){return(0,o.x)()(this)}}const c=(()=>{const e=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class u extends r.Yc{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}},9193:function(e,t,n){"use strict";n.d(t,{E:function(){return i},c:function(){return s}});var r=n(7574);const i=new r.y(e=>e.complete());function s(e){return e?function(e){return new r.y(t=>e.schedule(()=>t.complete()))}(e):i}},4402:function(e,t,n){"use strict";n.d(t,{D:function(){return h}});var r=n(7574),i=n(7444),s=n(5319),o=n(6554),a=n(4087),c=n(377),u=n(4072),l=n(9489);function h(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o.L]}(e))return function(e,t){return new r.y(n=>{const r=new s.w;return r.add(t.schedule(()=>{const i=e[o.L]();r.add(i.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if((0,u.t)(e))return function(e,t){return new r.y(n=>{const r=new s.w;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r})}(e,t);if((0,l.z)(e))return(0,a.r)(e,t);if(function(e){return e&&"function"==typeof e[c.hZ]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new s.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[c.hZ](),r.add(t.schedule(function(){if(n.closed)return;let e,t;try{const n=i.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())}))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof r.y?e:new r.y((0,i.s)(e))}},6693:function(e,t,n){"use strict";n.d(t,{n:function(){return o}});var r=n(7574),i=n(5015),s=n(4087);function o(e,t){return t?(0,s.r)(e,t):new r.y((0,i.V)(e))}},6682:function(e,t,n){"use strict";n.d(t,{T:function(){return a}});var r=n(7574),i=n(4869),s=n(3282),o=n(6693);function a(...e){let t=Number.POSITIVE_INFINITY,n=null,a=e[e.length-1];return(0,i.K)(a)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof a&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof r.y?e[0]:(0,s.J)(t)((0,o.n)(e,n))}},5917:function(e,t,n){"use strict";n.d(t,{of:function(){return o}});var r=n(4869),i=n(6693),s=n(4087);function o(...e){let t=e[e.length-1];return(0,r.K)(t)?(e.pop(),(0,s.r)(e,t)):(0,i.n)(e)}},205:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var r=n(7574);function i(e,t){return new r.y(t?n=>t.schedule(s,0,{error:e,subscriber:n}):t=>t.error(e))}function s({error:e,subscriber:t}){t.error(e)}},8002:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(7393);function i(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(e,t))}}class s{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new o(e,this.project,this.thisArg))}}class o extends r.L{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}},3282:function(e,t,n){"use strict";n.d(t,{J:function(){return s}});var r=n(9773),i=n(4487);function s(e=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,e)}},9773:function(e,t,n){"use strict";n.d(t,{zg:function(){return o}});var r=n(8002),i=n(4402),s=n(5345);function o(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?s=>s.pipe(o((n,s)=>(0,i.D)(e(n,s)).pipe((0,r.U)((e,r)=>t(n,e,s,r))),n)):("number"==typeof t&&(n=t),t=>t.lift(new a(e,n)))}class a{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new c(e,this.project,this.concurrent))}}class c extends s.Ds{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new s.IY(this),n=this.destination;n.add(t);const r=(0,s.ft)(e,t);r!==t&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9746:function(e,t,n){"use strict";n.d(t,{QV:function(){return s},ht:function(){return a}});var r=n(7393),i=n(3098);function s(e,t=0){return function(n){return n.lift(new o(e,t))}}class o{constructor(e,t=0){this.scheduler=e,this.delay=t}call(e,t){return t.subscribe(new a(e,this.scheduler,this.delay))}}class a extends r.L{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new c(e,this.destination)))}_next(e){this.scheduleMessage(i.P.createNext(e))}_error(e){this.scheduleMessage(i.P.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(i.P.createComplete()),this.unsubscribe()}}class c{constructor(e,t){this.notification=e,this.destination=t}}},1307:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});var r=n(7393);function i(){return function(e){return e.lift(new s(e))}}class s{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new o(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class o extends r.L{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},9673:function(e,t,n){"use strict";n.d(t,{R:function(){return a}});var r=n(7574),i=n(4581),s=n(6561);class o extends r.y{constructor(e,t=0,n=i.e){super(),this.source=e,this.delayTime=t,this.scheduler=n,(!(0,s.k)(t)||t<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=i.e)}static create(e,t=0,n=i.e){return new o(e,t,n)}static dispatch(e){const{source:t,subscriber:n}=e;return this.add(t.subscribe(n))}_subscribe(e){return this.scheduler.schedule(o.dispatch,this.delayTime,{source:this.source,subscriber:e})}}function a(e,t=0){return function(n){return n.lift(new c(e,t))}}class c{constructor(e,t){this.scheduler=e,this.delay=t}call(e,t){return new o(t,this.delay,this.scheduler).subscribe(e)}}},3342:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(7393);function i(){}var s=n(9105);function o(e,t,n){return function(r){return r.lift(new a(e,t,n))}}class a{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new c(e,this.nextOrObserver,this.error,this.complete))}}class c extends r.L{constructor(e,t,n,r){super(e),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,s.m)(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||i,this._tapError=t.error||i,this._tapComplete=t.complete||i)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}},4087:function(e,t,n){"use strict";n.d(t,{r:function(){return s}});var r=n(7574),i=n(5319);function s(e,t){return new r.y(n=>{const r=new i.w;let s=0;return r.add(t.schedule(function(){s!==e.length?(n.next(e[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:function(e,t,n){"use strict";n.d(t,{o:function(){return s}});var r=n(5319);class i extends r.w{constructor(e,t){super()}schedule(e,t=0){return this}}class s extends i{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}},6102:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});let r=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class i extends r{constructor(e,t=r.now){super(e,()=>i.delegate&&i.delegate!==this?i.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}},4581:function(e,t,n){"use strict";n.d(t,{e:function(){return h},E:function(){return l}});let r=1;const i=Promise.resolve(),s={};function o(e){return e in s&&(delete s[e],!0)}const a={setImmediate(e){const t=r++;return s[t]=!0,i.then(()=>o(t)&&e()),t},clearImmediate(e){o(e)}};var c=n(6465),u=n(6102);const l=new class extends u.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,i=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<i&&(e=t.shift()));if(this.active=!1,n){for(;++r<i&&(e=t.shift());)e.unsubscribe();throw n}}}(class extends c.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=a.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(a.clearImmediate(t),e.scheduled=void 0)}}),h=l},3637:function(e,t,n){"use strict";n.d(t,{z:function(){return i},P:function(){return s}});var r=n(6465);const i=new(n(6102).v)(r.o),s=i},7771:function(e,t,n){"use strict";n.d(t,{c:function(){return o},N:function(){return s}});var r=n(6465),i=n(6102);const s=new class extends i.v{}(class extends r.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}),o=s},377:function(e,t,n){"use strict";n.d(t,{hZ:function(){return r}});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});const r=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})()},4449:function(e,t,n){"use strict";function r(e){setTimeout(()=>{throw e},0)}n.d(t,{z:function(){return r}})},4487:function(e,t,n){"use strict";function r(e){return e}n.d(t,{y:function(){return r}})},9796:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});const r=Array.isArray||(e=>e&&"number"==typeof e.length)},9489:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});const r=e=>e&&"number"==typeof e.length&&"function"!=typeof e},9105:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,{m:function(){return r}})},6561:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});var r=n(9796);function i(e){return!(0,r.k)(e)&&e-parseFloat(e)+1>=0}},1555:function(e,t,n){"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,{K:function(){return r}})},4072:function(e,t,n){"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:function(){return r}})},4869:function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,{K:function(){return r}})},7444:function(e,t,n){"use strict";n.d(t,{s:function(){return l}});var r=n(5015),i=n(4449),s=n(377),o=n(6554),a=n(9489),c=n(4072),u=n(1555);const l=e=>{if(e&&"function"==typeof e[o.L])return l=e,e=>{const t=l[o.L]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if((0,a.z)(e))return(0,r.V)(e);if((0,c.t)(e))return n=e,e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,i.z),e);if(e&&"function"==typeof e[s.hZ])return t=e,e=>{const n=t[s.hZ]();for(;;){let t;try{t=n.next()}catch(r){return e.error(r),e}if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e};{const t=(0,u.K)(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var t,n,l}},5015:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});const r=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}},9562:function(e,t,n){"use strict";var r=n(3018);let i=null;function s(){return i}const o=new r.OlP("DocumentToken");let a=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:c,token:e,providedIn:"platform"}),e})();function c(){return(0,r.LFG)(l)}const u=new r.OlP("Location Initialized");let l=(()=>{class e extends a{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),()=>t.removeEventListener("popstate",e)}onHashChange(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),()=>t.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){h()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){h()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=(0,r.Yz7)({factory:d,token:e,providedIn:"platform"}),e})();function h(){return!!window.history.pushState}function d(){return new l((0,r.LFG)(o))}function p(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function f(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function g(e){return e&&"?"!==e[0]?"?"+e:e}let m=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:y,token:e,providedIn:"root"}),e})();function y(e){const t=(0,r.LFG)(o).location;return new _((0,r.LFG)(a),t&&t.origin||"")}const v=new r.OlP("appBaseHref");let _=(()=>{class e extends m{constructor(e,t){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return p(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(a),r.LFG(v,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),b=(()=>{class e extends m{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=t&&(this._baseHref=t)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=p(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(a),r.LFG(v,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),w=(()=>{class e{constructor(e,t){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=f(T(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+g(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,T(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+g(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+g(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformStrategy).historyGo)||void 0===n||n.call(t,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}))}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(m),r.LFG(a))},e.normalizeQueryParams=g,e.joinWithSlash=p,e.stripTrailingSlash=f,e.\u0275prov=(0,r.Yz7)({factory:S,token:e,providedIn:"root"}),e})();function S(){return new w((0,r.LFG)(m),(0,r.LFG)(a))}function T(e){return e.replace(/\/index.html$/,"")}var I=(()=>((I=I||{})[I.Decimal=0]="Decimal",I[I.Percent=1]="Percent",I[I.Currency=2]="Currency",I[I.Scientific=3]="Scientific",I))(),k=(()=>((k=k||{})[k.Zero=0]="Zero",k[k.One=1]="One",k[k.Two=2]="Two",k[k.Few=3]="Few",k[k.Many=4]="Many",k[k.Other=5]="Other",k))(),E=(()=>((E=E||{})[E.Decimal=0]="Decimal",E[E.Group=1]="Group",E[E.List=2]="List",E[E.PercentSign=3]="PercentSign",E[E.PlusSign=4]="PlusSign",E[E.MinusSign=5]="MinusSign",E[E.Exponential=6]="Exponential",E[E.SuperscriptingExponent=7]="SuperscriptingExponent",E[E.PerMille=8]="PerMille",E[E[1/0]=9]="Infinity",E[E.NaN=10]="NaN",E[E.TimeSeparator=11]="TimeSeparator",E[E.CurrencyDecimal=12]="CurrencyDecimal",E[E.CurrencyGroup=13]="CurrencyGroup",E))();function C(e,t){const n=(0,r.cg1)(e),i=n[r.wAp.NumberSymbols][t];if(void 0===i){if(t===E.CurrencyDecimal)return n[r.wAp.NumberSymbols][E.Decimal];if(t===E.CurrencyGroup)return n[r.wAp.NumberSymbols][E.Group]}return i}const x=r.kL8,A=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function D(e){const t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}class P{}let R=(()=>{class e extends P{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(x(t||this.locale)(e)){case k.Zero:return"zero";case k.One:return"one";case k.Two:return"two";case k.Few:return"few";case k.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.soG))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function N(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,i]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}class O{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let L=(()=>{class e{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(Gm){throw new Error(`Cannot find a differ supporting object '${t}' of type '${e=t,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,r)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new O(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new M(e,n);t.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new M(e,i);t.push(s)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=r,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();class M{constructor(e,t){this.record=e,this.view=t}}let Z=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new U,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){F("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){F("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class U{constructor(){this.$implicit=null,this.ngIf=null}}function F(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${(0,r.AaK)(t)}'.`)}function q(e,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${(0,r.AaK)(e)}'`)}class V{createSubscription(e,t){return e.subscribe({next:t,error:e=>{throw e}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class j{createSubscription(e,t){return e.then(t,e=>{throw e})}dispose(e){}onDestroy(e){}}const B=new j,$=new V;let H=(()=>{class e{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,t=>this._updateLatestValue(e,t))}_selectStrategy(t){if((0,r.QGY)(t))return B;if((0,r.F4k)(t))return $;throw q(e,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.sBO,16))},e.\u0275pipe=r.Yjl({name:"async",type:e,pure:!1}),e})(),z=(()=>{class e{constructor(e){this._locale=e}transform(t,n,i){if(!function(e){return!(null==e||""===e||e!=e)}(t))return null;i=i||this._locale;try{return function(e,t,n){return function(e,t,n,r,i,s,o=!1){let a="",c=!1;if(isFinite(e)){let u=function(e){let t,n,r,i,s,o=Math.abs(e)+"",a=0;for((n=o.indexOf("."))>-1&&(o=o.replace(".","")),(r=o.search(/e/i))>0?(n<0&&(n=r),n+=+o.slice(r+1),o=o.substring(0,r)):n<0&&(n=o.length),r=0;"0"===o.charAt(r);r++);if(r===(s=o.length))t=[0],n=1;else{for(s--;"0"===o.charAt(s);)s--;for(n-=r,t=[],i=0;r<=s;r++,i++)t[i]=Number(o.charAt(r))}return n>22&&(t=t.splice(0,21),a=n-1,n=1),{digits:t,exponent:a,integerLen:n}}(e);o&&(u=function(e){if(0===e.digits[0])return e;const t=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===t?e.digits.push(0,0):1===t&&e.digits.push(0),e.integerLen+=2),e}(u));let l=t.minInt,h=t.minFrac,d=t.maxFrac;if(s){const e=s.match(A);if(null===e)throw new Error(`${s} is not a valid digit info`);const t=e[1],n=e[3],r=e[5];null!=t&&(l=D(t)),null!=n&&(h=D(n)),null!=r?d=D(r):null!=n&&h>d&&(d=h)}!function(e,t,n){if(t>n)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${n}).`);let r=e.digits,i=r.length-e.integerLen;const s=Math.min(Math.max(t,i),n);let o=s+e.integerLen,a=r[o];if(o>0){r.splice(Math.max(e.integerLen,o));for(let e=o;e<r.length;e++)r[e]=0}else{i=Math.max(0,i),e.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let e=1;e<o;e++)r[e]=0}if(a>=5)if(o-1<0){for(let t=0;t>o;t--)r.unshift(0),e.integerLen++;r.unshift(1),e.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let c=0!==s;const u=t+e.integerLen,l=r.reduceRight(function(e,t,n,r){return r[n]=(t+=e)<10?t:t-10,c&&(0===r[n]&&n>=u?r.pop():c=!1),t>=10?1:0},0);l&&(r.unshift(l),e.integerLen++)}(u,h,d);let p=u.digits,f=u.integerLen;const g=u.exponent;let m=[];for(c=p.every(e=>!e);f<l;f++)p.unshift(0);for(;f<0;f++)p.unshift(0);f>0?m=p.splice(f,p.length):(m=p,p=[0]);const y=[];for(p.length>=t.lgSize&&y.unshift(p.splice(-t.lgSize,p.length).join(""));p.length>t.gSize;)y.unshift(p.splice(-t.gSize,p.length).join(""));p.length&&y.unshift(p.join("")),a=y.join(C(n,r)),m.length&&(a+=C(n,i)+m.join("")),g&&(a+=C(n,E.Exponential)+"+"+g)}else a=C(n,E.Infinity);return a=e<0&&!c?t.negPre+a+t.negSuf:t.posPre+a+t.posSuf,a}(e,function(e,t="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=e.split(";"),i=r[0],s=r[1],o=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],a=o[0],c=o[1]||"";n.posPre=a.substr(0,a.indexOf("#"));for(let l=0;l<c.length;l++){const e=c.charAt(l);"0"===e?n.minFrac=n.maxFrac=l+1:"#"===e?n.maxFrac=l+1:n.posSuf+=e}const u=a.split(",");if(n.gSize=u[1]?u[1].length:0,n.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,s){const e=i.length-n.posPre.length-n.posSuf.length,t=s.indexOf("#");n.negPre=s.substr(0,t).replace(/'/g,""),n.negSuf=s.substr(t+e).replace(/'/g,"")}else n.negPre=t+n.posPre,n.negSuf=n.posSuf;return n}(function(e,t){return(0,r.cg1)(e)[r.wAp.NumberFormats][t]}(t,I.Decimal),C(t,E.MinusSign)),t,E.Group,E.Decimal,n)}(function(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error(`${e} is not a number`);return e}(t),i,n)}catch(s){throw q(e,s.message)}}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.soG,16))},e.\u0275pipe=r.Yjl({name:"number",type:e,pure:!0}),e})(),G=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[{provide:P,useClass:R}]}),e})();function K(e){return"server"===e}let W=(()=>{class e{}return e.\u0275prov=(0,r.Yz7)({token:e,providedIn:"root",factory:()=>new J((0,r.LFG)(o),window)}),e})();class J{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const n=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const e=r.shadowRoot;if(e){const n=e.getElementById(t)||e.querySelector(`[name="${t}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Y(this.window.history)||Y(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(Gm){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Gm){return!1}}}function Y(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class Q{}class X extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var e;e=new X,i||(i=e)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(te=te||document.querySelector("base"),te?te.getAttribute("href"):null);return null==t?null:function(e){ee=ee||document.createElement("a"),ee.setAttribute("href",e);const t=ee.pathname;return"/"===t.charAt(0)?t:`/${t}`}(t)}resetBaseElement(){te=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return N(document.cookie,e)}}let ee,te=null;const ne=new r.OlP("TRANSITION_ID"),re=[{provide:r.ip1,useFactory:function(e,t,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[ne,o,r.zs3],multi:!0}];class ie{static init(){(0,r.VLi)(new ie)}addToWindow(e){r.dqk.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(e=>{const t=r.dqk.getAllAngularTestabilities();let n=t.length,i=!1;const s=function(t){i=i||t,n--,0==n&&e(i)};t.forEach(function(e){e.whenStable(s)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?s().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let se=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const oe=new r.OlP("EventManagerPlugins");let ae=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(oe),r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class ce{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=s().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let ue=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),le=(()=>{class e extends ue{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,t,n){e.forEach(e=>{const r=this._doc.createElement("style");r.textContent=e,n.push(t.appendChild(r))})}addHost(e){const t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}removeHost(e){const t=this._hostNodes.get(e);t&&t.forEach(he),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((t,n)=>{this._addStylesToHost(e,n,t)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(he))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function he(e){s().remove(e)}const de={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},pe=/%COMP%/g;function fe(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?fe(e,i,n):(i=i.replace(pe,e),n.push(i))}return n}function ge(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let me=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new ye(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new ve(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case 1:case r.ifc.ShadowDom:return new _e(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=fe(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(ae),r.LFG(le),r.LFG(r.AFp))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class ye{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(de[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const i=de[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=de[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,i){i&(r.JOm.DashCase|r.JOm.Important)?e.style.setProperty(t,n,i&r.JOm.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&r.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ge(n)):this.eventManager.addEventListener(e,t,ge(n))}}class ve extends ye{constructor(e,t,n,r){super(e),this.component=n;const i=fe(r+"-"+n.id,n.styles,[]);t.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(pe,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(pe,r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class _e extends ye{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=fe(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const e=document.createElement("style");e.textContent=i[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let be=(()=>{class e extends ce{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const we=["alt","control","meta","shift"],Se={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Te={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ie={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let ke=(()=>{class e extends ce{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,r){const i=e.parseEventName(n),o=e.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(t,i.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=e._normalizeKey(n.pop());let s="";if(we.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),s+=e+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Te.hasOwnProperty(t)&&(t=Te[t]))}return Se[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),we.forEach(r=>{r!=n&&(0,Ie[r])(e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return i=>{e.getEventFullKey(i)===t&&r.runGuarded(()=>n(i))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),Ee=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:function(){return(0,r.LFG)(xe)},token:e,providedIn:"root"}),e})();function Ce(e){return new xe(e.get(o))}let xe=(()=>{class e extends Ee{constructor(e){super(),this._doc=e}sanitize(e,t){if(null==t)return null;switch(e){case r.q3G.NONE:return t;case r.q3G.HTML:return(0,r.qzn)(t,"HTML")?(0,r.z3N)(t):(0,r.EiD)(this._doc,String(t)).toString();case r.q3G.STYLE:return(0,r.qzn)(t,"Style")?(0,r.z3N)(t):t;case r.q3G.SCRIPT:if((0,r.qzn)(t,"Script"))return(0,r.z3N)(t);throw new Error("unsafe value used in a script context");case r.q3G.URL:return(0,r.yhl)(t),(0,r.qzn)(t,"URL")?(0,r.z3N)(t):(0,r.mCW)(String(t));case r.q3G.RESOURCE_URL:if((0,r.qzn)(t,"ResourceURL"))return(0,r.z3N)(t);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return(0,r.JVY)(e)}bypassSecurityTrustStyle(e){return(0,r.L6k)(e)}bypassSecurityTrustScript(e){return(0,r.eBb)(e)}bypassSecurityTrustUrl(e){return(0,r.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,r.pB0)(e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=(0,r.Yz7)({factory:function(){return Ce((0,r.LFG)(r.gxx))},token:e,providedIn:"root"}),e})();const Ae=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){X.makeCurrent(),ie.init()},multi:!0},{provide:o,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),De=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:oe,useClass:be,multi:!0,deps:[o,r.R0b,r.Lbi]},{provide:oe,useClass:ke,multi:!0,deps:[o]},[],{provide:me,useClass:me,deps:[ae,le,r.AFp]},{provide:r.FYo,useExisting:me},{provide:ue,useExisting:le},{provide:le,useClass:le,deps:[o]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:ae,useClass:ae,deps:[oe,r.R0b]},{provide:Q,useClass:se,deps:[]},[]];let Pe=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:r.AFp,useValue:t.appId},{provide:ne,useExisting:r.AFp},re]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(e,12))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:De,imports:[G,r.hGG]}),e})();function Re(){return new Ne((0,r.LFG)(o))}let Ne=(()=>{class e{constructor(e){this._doc=e,this._dom=s()}addTag(e,t=!1){return e?this._getOrCreateElement(e,t):null}addTags(e,t=!1){return e?e.reduce((e,n)=>(n&&e.push(this._getOrCreateElement(n,t)),e),[]):[]}getTag(e){return e&&this._doc.querySelector(`meta[${e}]`)||null}getTags(e){if(!e)return[];const t=this._doc.querySelectorAll(`meta[${e}]`);return t?[].slice.call(t):[]}updateTag(e,t){if(!e)return null;t=t||this._parseSelector(e);const n=this.getTag(t);return n?this._setMetaElementAttributes(e,n):this._getOrCreateElement(e,!0)}removeTag(e){this.removeTagElement(this.getTag(e))}removeTagElement(e){e&&this._dom.remove(e)}_getOrCreateElement(e,t=!1){if(!t){const t=this._parseSelector(e),n=this.getTags(t).filter(t=>this._containsAttributes(e,t))[0];if(void 0!==n)return n}const n=this._dom.createElement("meta");return this._setMetaElementAttributes(e,n),this._doc.getElementsByTagName("head")[0].appendChild(n),n}_setMetaElementAttributes(e,t){return Object.keys(e).forEach(n=>t.setAttribute(this._getMetaKeyMap(n),e[n])),t}_parseSelector(e){const t=e.name?"name":"property";return`${t}="${e[t]}"`}_containsAttributes(e,t){return Object.keys(e).every(n=>t.getAttribute(this._getMetaKeyMap(n))===e[n])}_getMetaKeyMap(e){return Oe[e]||e}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=(0,r.Yz7)({factory:Re,token:e,providedIn:"root"}),e})();const Oe={httpEquiv:"http-equiv"};"undefined"!=typeof window&&window;var Le=n(5917),Me=n(7574),Ze=n(9773);function Ue(e,t){return(0,Ze.zg)(e,t,1)}var Fe=n(7393);function qe(e,t){return function(n){return n.lift(new Ve(e,t))}}class Ve{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new je(e,this.predicate,this.thisArg))}}class je extends Fe.L{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}var Be=n(8002);class $e{}class He{}class ze{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(e=>{const t=e.indexOf(":");if(t>0){const n=e.slice(0,t),r=n.toLowerCase(),i=e.slice(t+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const r=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ze?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ze;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ze?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case"d":const i=e.value;if(i){let e=this.headers.get(t);if(!e)return;e=e.filter(e=>-1===i.indexOf(e)),0===e.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,e)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Ge{encodeKey(e){return Ke(e)}encodeValue(e){return Ke(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}function Ke(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function We(e){return`${e}`}class Je{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Ge,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(e=>{const r=e.indexOf("="),[i,s]=-1==r?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,r)),t.decodeValue(e.slice(r+1))],o=n.get(i)||[];o.push(s),n.set(i,o)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t];this.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(n=>{const r=e[n];Array.isArray(r)?r.forEach(e=>{t.push({param:n,value:e,op:"a"})}):t.push({param:n,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(e=>t+"="+this.encoder.encodeValue(e)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Je({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(We(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let t=this.map.get(e.param)||[];const n=t.indexOf(We(e.value));-1!==n&&t.splice(n,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Ye{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function Qe(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function Xe(e){return"undefined"!=typeof Blob&&e instanceof Blob}function et(e){return"undefined"!=typeof FormData&&e instanceof FormData}class tt{constructor(e,t,n,r){let i;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new ze),this.context||(this.context=new Ye),this.params){const e=this.params.toString();if(0===e.length)this.urlWithParams=t;else{const n=t.indexOf("?");this.urlWithParams=t+(-1===n?"?":n<t.length-1?"&":"")+e}}else this.params=new Je,this.urlWithParams=t}serializeBody(){return null===this.body?null:Qe(this.body)||Xe(this.body)||et(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof Je?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||et(this.body)?null:Xe(this.body)?this.body.type||null:Qe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Je?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const l=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((t,n)=>t.set(n,e.setHeaders[n]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((t,n)=>t.set(n,e.setParams[n]),u)),new tt(n,r,s,{params:u,headers:c,context:l,reportProgress:a,responseType:i,withCredentials:o})}}var nt=(()=>((nt=nt||{})[nt.Sent=0]="Sent",nt[nt.UploadProgress=1]="UploadProgress",nt[nt.ResponseHeader=2]="ResponseHeader",nt[nt.DownloadProgress=3]="DownloadProgress",nt[nt.Response=4]="Response",nt[nt.User=5]="User",nt))();class rt{constructor(e,t=200,n="OK"){this.headers=e.headers||new ze,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class it extends rt{constructor(e={}){super(e),this.type=nt.ResponseHeader}clone(e={}){return new it({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class st extends rt{constructor(e={}){super(e),this.type=nt.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new st({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ot extends rt{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function at(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let ct=(()=>{class e{constructor(e){this.handler=e}request(e,t,n={}){let r;if(e instanceof tt)r=e;else{let i,s;i=n.headers instanceof ze?n.headers:new ze(n.headers),n.params&&(s=n.params instanceof Je?n.params:new Je({fromObject:n.params})),r=new tt(e,t,void 0!==n.body?n.body:null,{headers:i,context:n.context,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=(0,Le.of)(r).pipe(Ue(e=>this.handler.handle(e)));if(e instanceof tt||"events"===n.observe)return i;const s=i.pipe(qe(e=>e instanceof st));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return s.pipe((0,Be.U)(e=>{if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return s.pipe((0,Be.U)(e=>{if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return s.pipe((0,Be.U)(e=>{if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return s.pipe((0,Be.U)(e=>e.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(e,t={}){return this.request("DELETE",e,t)}get(e,t={}){return this.request("GET",e,t)}head(e,t={}){return this.request("HEAD",e,t)}jsonp(e,t){return this.request("JSONP",e,{params:(new Je).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,t={}){return this.request("OPTIONS",e,t)}patch(e,t,n={}){return this.request("PATCH",e,at(n,t))}post(e,t,n={}){return this.request("POST",e,at(n,t))}put(e,t,n={}){return this.request("PUT",e,at(n,t))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG($e))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class ut{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const lt=new r.OlP("HTTP_INTERCEPTORS");let ht=(()=>{class e{intercept(e,t){return t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const dt=/^\)\]\}',?\n/;let pt=(()=>{class e{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Me.y(t=>{const n=this.xhrFactory.build();if(n.open(e.method,e.urlWithParams),e.withCredentials&&(n.withCredentials=!0),e.headers.forEach((e,t)=>n.setRequestHeader(e,t.join(","))),e.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const t=e.detectContentTypeHeader();null!==t&&n.setRequestHeader("Content-Type",t)}if(e.responseType){const t=e.responseType.toLowerCase();n.responseType="json"!==t?t:"text"}const r=e.serializeBody();let i=null;const s=()=>{if(null!==i)return i;const t=1223===n.status?204:n.status,r=n.statusText||"OK",s=new ze(n.getAllResponseHeaders()),o=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(n)||e.url;return i=new it({headers:s,status:t,statusText:r,url:o}),i},o=()=>{let{headers:r,status:i,statusText:o,url:a}=s(),c=null;204!==i&&(c=void 0===n.response?n.responseText:n.response),0===i&&(i=c?200:0);let u=i>=200&&i<300;if("json"===e.responseType&&"string"==typeof c){const e=c;c=c.replace(dt,"");try{c=""!==c?JSON.parse(c):null}catch(l){c=e,u&&(u=!1,c={error:l,text:c})}}u?(t.next(new st({body:c,headers:r,status:i,statusText:o,url:a||void 0})),t.complete()):t.error(new ot({error:c,headers:r,status:i,statusText:o,url:a||void 0}))},a=e=>{const{url:r}=s(),i=new ot({error:e,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});t.error(i)};let c=!1;const u=r=>{c||(t.next(s()),c=!0);let i={type:nt.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===e.responseType&&n.responseText&&(i.partialText=n.responseText),t.next(i)},l=e=>{let n={type:nt.UploadProgress,loaded:e.loaded};e.lengthComputable&&(n.total=e.total),t.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),e.reportProgress&&(n.addEventListener("progress",u),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),t.next({type:nt.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",o),n.removeEventListener("timeout",a),e.reportProgress&&(n.removeEventListener("progress",u),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Q))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const ft=new r.OlP("XSRF_COOKIE_NAME"),gt=new r.OlP("XSRF_HEADER_NAME");class mt{}let yt=(()=>{class e{constructor(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=N(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o),r.LFG(r.Lbi),r.LFG(ft))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),vt=(()=>{class e{constructor(e,t){this.tokenService=e,this.headerName=t}intercept(e,t){const n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);const r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(mt),r.LFG(gt))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),_t=(()=>{class e{constructor(e,t){this.backend=e,this.injector=t,this.chain=null}handle(e){if(null===this.chain){const e=this.injector.get(lt,[]);this.chain=e.reduceRight((e,t)=>new ut(e,t),this.backend)}return this.chain.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(He),r.LFG(r.zs3))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),bt=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:vt,useClass:ht}]}}static withOptions(t={}){return{ngModule:e,providers:[t.cookieName?{provide:ft,useValue:t.cookieName}:[],t.headerName?{provide:gt,useValue:t.headerName}:[]]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[vt,{provide:lt,useExisting:vt,multi:!0},{provide:mt,useClass:yt},{provide:ft,useValue:"XSRF-TOKEN"},{provide:gt,useValue:"X-XSRF-TOKEN"}]}),e})(),wt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[ct,{provide:$e,useClass:_t},pt,{provide:He,useExisting:pt}],imports:[[bt.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),e})();var St=n(2329),Tt=n(4459);class It{constructor(e){return e}}class kt{constructor(){return(0,St.C6)()}}const Et=new r.OlP("angularfire2._apps"),Ct={provide:It,useFactory:function(e){return e&&1===e.length?e[0]:new It((0,St.Mq)())},deps:[[new r.FiY,Et]]},xt={provide:kt,deps:[[new r.FiY,Et]]};function At(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new It(r)}}let Dt=(()=>{class e{constructor(e){(0,St.KN)("angularfire",Tt.q4.full,"core"),(0,St.KN)("angularfire",Tt.q4.full,"app"),(0,St.KN)("angular",r.q4F.full,e.toString())}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.Lbi))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[Ct,xt]}),e})();function Pt(e,...t){return{ngModule:Dt,providers:[{provide:Et,useFactory:At(e),multi:!0,deps:[r.R0b,r.zs3,Tt.HU,...t]}]}}const Rt=(0,Tt.u3)(St.ZF,!0);n(8882);var Nt=n(3854),Ot=n(279),Lt=n(9306),Mt=n(8604);class Zt{constructor(){return(0,Tt.vb)("auth")}}var Ut=n(6304);const Ft=new Map,qt={activated:!1,tokenObservers:[]},Vt={initialized:!1,enabled:!1};function jt(e){return Ft.get(e)||qt}function Bt(e,t){Ft.set(e,t)}function $t(){return Vt}class Ht{constructor(e,t,n,r,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ut.Z)(function*(){t.stop();try{t.pending=new Nt.BH,yield function(e){return new Promise(t=>{setTimeout(t,e)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Nt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(n){t.retryPolicy(n)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const zt=new Nt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Gt(e){if(!jt(e).activated)throw zt.create("use-before-activation",{appName:e.name})}function Kt(e,t){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,Ut.Z)(function*({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const e=yield i.getHeartbeatsHeader();e&&(r["X-Firebase-Client"]=e)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o,a;try{o=yield fetch(e,s)}catch(h){throw zt.create("fetch-network-error",{originalErrorMessage:h.message})}if(200!==o.status)throw zt.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(h){throw zt.create("fetch-parse-error",{originalErrorMessage:h.message})}const c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw zt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const u=1e3*Number(c[1]),l=Date.now();return{token:a.token,expireTimeMillis:l+u,issuedAtTimeMillis:l}})).apply(this,arguments)}function Jt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${n}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:t}}}const Yt="firebase-app-check-store";let Qt=null;function Xt(){return Qt||(Qt=new Promise((e,t)=>{try{const n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=t=>{e(t.target.result)},n.onerror=e=>{var n;t(zt.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=e=>{const t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(Yt,{keyPath:"compositeKey"})}}}catch(n){t(zt.create("storage-open",{originalErrorMessage:n.message}))}}),Qt)}function en(){return(en=(0,Ut.Z)(function*(e,t){const n=(yield Xt()).transaction(Yt,"readwrite"),r=n.objectStore(Yt).put({compositeKey:e,value:t});return new Promise((e,t)=>{r.onsuccess=t=>{e()},n.onerror=e=>{var n;t(zt.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}})})).apply(this,arguments)}const tn=new Lt.Yd("@firebase/app-check");function nn(e,t){return(0,Nt.hl)()?function(e,t){return function(e,t){return en.apply(this,arguments)}(function(e){return`${e.options.appId}-${e.name}`}(e),t)}(e,t).catch(e=>{tn.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function rn(){return $t().enabled}function sn(){return on.apply(this,arguments)}function on(){return(on=(0,Ut.Z)(function*(){const e=$t();if(e.enabled&&e.token)return e.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const an={error:"UNKNOWN_ERROR"};function cn(e){return un.apply(this,arguments)}function un(){return(un=(0,Ut.Z)(function*(e,t=!1){const n=e.app;Gt(n);const r=jt(n);let i,s=r.token;if(!s){const e=yield r.cachedTokenPromise;e&&pn(e)&&(s=e)}if(!t&&s&&pn(s))return{token:s.token};let o,a=!1;if(rn()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Kt(Jt(n,yield sn()),e.heartbeatServiceProvider).then(e=>(r.exchangeTokenPromise=void 0,e)),a=!0);const t=yield r.exchangeTokenPromise;return yield nn(n,t),Bt(n,Object.assign(Object.assign({},r),{token:t})),{token:t.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(e=>(r.exchangeTokenPromise=void 0,e)),a=!0),s=yield r.exchangeTokenPromise}catch(c){"appCheck/throttled"===c.code?tn.warn(c.message):tn.error(c),i=c}return s?(o={token:s.token},Bt(n,Object.assign(Object.assign({},r),{token:s})),yield nn(n,s)):o=fn(i),a&&dn(n,o),o})).apply(this,arguments)}function ln(e,t){const n=jt(e),r=n.tokenObservers.filter(e=>e.next!==t);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),Bt(e,Object.assign(Object.assign({},n),{tokenObservers:r}))}function hn(e){const{app:t}=e,n=jt(t);let r=n.tokenRefresher;r||(r=function(e){const{app:t}=e;return new Ht((0,Ut.Z)(function*(){let n;if(n=jt(t).token?yield cn(e,!0):yield cn(e),n.error)throw n.error}),()=>!0,()=>{const e=jt(t);if(e.token){let t=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return t=Math.min(t,e.token.expireTimeMillis-3e5),Math.max(0,t-Date.now())}return 0},3e4,96e4)}(e),Bt(t,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function dn(e,t){const n=jt(e).tokenObservers;for(const i of n)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(r){}}function pn(e){return e.expireTimeMillis-Date.now()>0}function fn(e){return{token:(t=an,Nt.US.encodeString(JSON.stringify(t),!1)),error:e};var t}class gn{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=jt(this.app);for(const t of e)ln(this.app,t.next);return Promise.resolve()}}(0,Ot._registerComponent)(new Mt.wA("app-check",e=>{return t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat"),new gn(t,n);var t,n},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("app-check-internal").initialize()})),(0,Ot._registerComponent)(new Mt.wA("app-check-internal",e=>{return t=e.getProvider("app-check").getImmediate(),{getToken:e=>cn(t,e),addTokenListener:e=>function(e,t,n,r){const{app:i}=e,s=jt(i),o={next:n,error:void 0,type:"INTERNAL"};if(Bt(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&pn(s.token)){const t=s.token;Promise.resolve().then(()=>{n({token:t.token}),hn(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>hn(e))}(t,0,e),removeTokenListener:e=>ln(t.app,e)};var t},"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ot.registerVersion)("@firebase/app-check","0.5.8");class mn{constructor(){return(0,Tt.vb)("app-check")}}"undefined"!=typeof window&&window;class yn extends Nt.ZR{constructor(e,t){super(vn(e),`Firebase Storage: ${t} (${vn(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yn.prototype)}_codeEquals(e){return vn(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function vn(e){return"storage/"+e}function _n(){return new yn("unknown","An unknown error occurred, please check the error payload for server response.")}function bn(){return new yn("canceled","User canceled the upload/download.")}function wn(){return new yn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Sn(e){return new yn("invalid-argument",e)}function Tn(){return new yn("app-deleted","The Firebase app was deleted.")}function In(e){return new yn("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function kn(e,t){return new yn("invalid-format","String does not match format '"+e+"': "+t)}function En(e){throw new yn("internal-error","Internal error: "+e)}class Cn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Cn.makeFromUrl(e,t)}catch(r){return new Cn(e,"")}if(""===n.path)return n;throw new yn("invalid-default-bucket","Invalid default bucket '"+e+"'.")}static makeFromUrl(e,t){let n=null;const r=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),o=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${s}/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp(`^https?://${"firebasestorage.googleapis.com"===t?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/([A-Za-z0-9.\\-_]+)/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:i}];for(let a=0;a<o.length;a++){const t=o[a],r=t.regex.exec(e);if(r){let e=r[t.indices.path];e||(e=""),n=new Cn(r[t.indices.bucket],e),t.postModify(n);break}}if(null==n)throw function(e){return new yn("invalid-url","Invalid URL '"+e+"'.")}(e);return n}}class xn{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function An(e){return"string"==typeof e||e instanceof String}function Dn(e){return Pn()&&e instanceof Blob}function Pn(){return"undefined"!=typeof Blob}function Rn(e,t,n,r){if(r<t)throw Sn(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Sn(`Invalid value for '${e}'. Expected ${n} or less.`)}function Nn(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function On(e){const t=encodeURIComponent;let n="?";for(const r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n=n.slice(0,-1),n}var Ln=(()=>(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Ln||(Ln={})),Ln))();class Mn{constructor(e,t,n,r,i,s,o,a,c,u,l){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=l,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(s){r(s)}else if(null!==i){const e=_n();e.serverResponse=i.getErrorText(),r(this.errorCallback_?this.errorCallback_(i,e):e)}else r(t.canceled?this.appDelete_?Tn():bn():new yn("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?e(0,new Zn(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let u=!1;function l(...e){u||(u=!0,t.apply(null,e))}function h(t){i=setTimeout(()=>{i=null,e(p,c())},t)}function d(){s&&clearTimeout(s)}function p(e,...t){if(u)return void d();if(e)return d(),void l.call(null,e,...t);if(c()||o)return d(),void l.call(null,e,...t);let n;r<64&&(r*=2),1===a?(a=2,n=0):n=1e3*(r+Math.random()),h(n)}let f=!1;function g(e){f||(f=!0,d(),u||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}((e,t)=>{if(t)return void e(!1,new Zn(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{null!==this.progressCallback_&&this.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Ln.NO_ERROR,i=n.getStatus();if(!t||this.isRetryStatusCode_(i)){const t=n.getErrorCode()===Ln.ABORT;return void e(!1,new Zn(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new Zn(s,n))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}class Zn{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Un(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Fn(...e){const t=Un();if(void 0!==t){const n=new t;for(let t=0;t<e.length;t++)n.append(e[t]);return n.getBlob()}if(Pn())return new Blob(e);throw new yn("unsupported-environment","This browser doesn't seem to support creating Blobs")}const qn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Vn{constructor(e,t){this.data=e,this.contentType=t||null}}function jn(e,t){switch(e){case qn.RAW:return new Vn(Bn(t));case qn.BASE64:case qn.BASE64URL:return new Vn($n(e,t));case qn.DATA_URL:return new Vn(function(e){const t=new Hn(e);return t.base64?$n(qn.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw kn(qn.DATA_URL,"Malformed data URL.")}return Bn(t)}(t.rest)}(t),new Hn(t).contentType)}throw _n()}function Bn(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?n<e.length-1&&56320==(64512&e.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function $n(e,t){switch(e){case qn.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw kn(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break}case qn.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r)throw kn(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=atob(t)}catch(i){throw kn(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Hn{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw kn(qn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;var r;null!=n&&(this.base64=(r=n).length>=";base64".length&&";base64"===r.substring(r.length-";base64".length),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)}}class zn{constructor(e,t){let n=0,r="";Dn(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Dn(this.data_)){const s=(r=e,i=t,(n=this.data_).webkitSlice?n.webkitSlice(r,i):n.mozSlice?n.mozSlice(r,i):n.slice?n.slice(r,i):null);return null===s?null:new zn(s)}var n,r,i;{const n=new Uint8Array(this.data_.buffer,e,t-e);return new zn(n,!0)}}static getBlob(...e){if(Pn()){const t=e.map(e=>e instanceof zn?e.data_:e);return new zn(Fn.apply(null,t))}{const t=e.map(e=>An(e)?jn(qn.RAW,e).data:e.data_);let n=0;t.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let i=0;return t.forEach(e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]}),new zn(r,!0)}}uploadData(){return this.data_}}function Gn(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"==typeof e&&!Array.isArray(e)}(t)?t:null}function Kn(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Wn(e,t){return t}class Jn{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Wn}}let Yn=null;function Qn(){if(Yn)return Yn;const e=[];e.push(new Jn("bucket")),e.push(new Jn("generation")),e.push(new Jn("metageneration")),e.push(new Jn("name","fullPath",!0));const t=new Jn("name");t.xform=function(e,t){return function(e){return!An(e)||e.length<2?e:Kn(e)}(t)},e.push(t);const n=new Jn("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Jn("timeCreated")),e.push(new Jn("updated")),e.push(new Jn("md5Hash",null,!0)),e.push(new Jn("cacheControl",null,!0)),e.push(new Jn("contentDisposition",null,!0)),e.push(new Jn("contentEncoding",null,!0)),e.push(new Jn("contentLanguage",null,!0)),e.push(new Jn("contentType",null,!0)),e.push(new Jn("metadata","customMetadata",!0)),Yn=e,Yn}function Xn(e,t,n){const r=Gn(t);return null===r?null:function(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=new Cn(e.bucket,e.fullPath);return t._makeStorageReference(n)}})}(r,e),r}(e,r,n)}function er(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class tr{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function nr(e){if(!e)throw _n()}function rr(e,t){return function(n,r){const i=Xn(e,r,t);return nr(null!==i),i}}function ir(e){return function(t,n){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?new yn("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new yn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?new yn("quota-exceeded","Quota for bucket '"+e.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===t.getStatus()?new yn("unauthorized","User does not have permission to access '"+e.path+"'."):n,r.serverResponse=n.serverResponse,r}}function sr(e){const t=ir(e);return function(n,r){let i=t(n,r);return 404===n.getStatus()&&(i=new yn("object-not-found","Object '"+e.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function or(e,t,n){const r=Nn(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new tr(r,"GET",rr(e,n),i);return s.errorHandler=sr(t),s}function ar(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}function cr(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const c=ar(t,r,i),u=er(c,n),l=zn.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+u+"\r\n--"+a+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw wn();const h={name:c.fullPath},d=Nn(s,e.host,e._protocol),p=e.maxUploadRetryTime,f=new tr(d,"POST",rr(e,n),p);return f.urlParams=h,f.headers=o,f.body=l.uploadData(),f.errorHandler=ir(t),f}class ur{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function lr(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){nr(!1)}return nr(!!n&&-1!==(t||["active"]).indexOf(n)),n}const hr={STATE_CHANGED:"state_changed"},dr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function pr(e){switch(e){case"running":case"pausing":case"canceling":return dr.RUNNING;case"paused":return dr.PAUSED;case"success":return dr.SUCCESS;case"canceled":return dr.CANCELED;case"error":default:return dr.ERROR}}class fr{constructor(e,t,n){if(function(e){return"function"==typeof e}(e)||null!=t||null!=n)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function gr(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class mr extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ln.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ln.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ln.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r){if(this.sent_)throw En("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw En("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw En("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw En("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw En("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function yr(){return new mr}class vr{constructor(e,t,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=Qn(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{this._request=void 0,this._chunkMultiplier=1,e._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=e,this._transition("error"))},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals("canceled")?this.completeTransitions_():(this._error=e,this._transition("error"))},this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,n])=>{switch(this._state){case"running":e(t,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const n=function(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o=ar(t,r,i),a={name:o.fullPath},c=Nn(s,e.host,e._protocol),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=er(o,n),h=new tr(c,"POST",function(e){let t;lr(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){nr(!1)}return nr(An(t)),t},e.maxUploadRetryTime);return h.urlParams=a,h.headers=u,h.body=l,h.errorHandler=ir(t),h}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,yr,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,n)=>{const r=function(e,t,n,r){const i=new tr(n,"POST",function(e){const t=lr(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(s){nr(!1)}n||nr(!1);const i=Number(n);return nr(!isNaN(i)),new ur(i,r.size(),"final"===t)},e.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=ir(t),i}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,yr,t,n);this._request=i,i.getPromise().then(e=>{e=e,this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new ur(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((r,i)=>{let s;try{s=function(e,t,n,r,i,s,o,a){const c=new ur(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw new yn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const u=c.total-c.current;let l=u;i>0&&(l=Math.min(l,i));const h=c.current,d={"X-Goog-Upload-Command":l===u?"upload, finalize":"upload","X-Goog-Upload-Offset":`${c.current}`},p=r.slice(h,h+l);if(null===p)throw wn();const f=new tr(n,"POST",function(e,n){const i=lr(e,["active","final"]),o=c.current+l,a=r.size();let u;return u="final"===i?rr(t,s)(e,n):null,new ur(o,a,"final"===i,u)},t.maxUploadRetryTime);return f.headers=d,f.body=p.uploadData(),f.progressCallback=a||null,f.errorHandler=ir(e),f}(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(a){return this._error=a,void this._transition("error")}const o=this._ref.storage._makeRequest(s,yr,r,i);this._request=o,o.getPromise().then(e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const n=or(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,yr,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const n=cr(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,yr,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=bn(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=pr(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new fr(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(pr(this._state)){case dr.SUCCESS:gr(this._resolve.bind(null,this.snapshot))();break;case dr.CANCELED:case dr.ERROR:gr(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(pr(this._state)){case dr.RUNNING:case dr.PAUSED:e.next&&gr(e.next.bind(e,this.snapshot))();break;case dr.SUCCESS:e.complete&&gr(e.complete.bind(e))();break;case dr.CANCELED:case dr.ERROR:e.error&&gr(e.error.bind(e,this._error))();break;default:e.error&&gr(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class _r{constructor(e,t){this._service=e,this._location=t instanceof Cn?t:Cn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new _r(e,t)}get root(){const e=new Cn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Kn(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Cn(this._location.bucket,e);return new _r(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw In(e)}}function br(e,t,n){return wr.apply(this,arguments)}function wr(){return(wr=(0,Ut.Z)(function*(e,t,n){const r={pageToken:n},i=yield Sr(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&(yield br(e,t,i.nextPageToken))})).apply(this,arguments)}function Sr(e,t){null!=t&&"number"==typeof t.maxResults&&Rn("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=function(e,t,n,r,i){const s={};s.prefix=t.isRoot?"":t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=Nn(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,c=new tr(o,"GET",function(e,t){return function(n,r){const i=function(e,t,n){const r=Gn(n);return null===r?null:function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(const i of n.prefixes){const n=i.replace(/\/$/,""),s=e._makeStorageReference(new Cn(t,n));r.prefixes.push(s)}if(n.items)for(const i of n.items){const n=e._makeStorageReference(new Cn(t,i.name));r.items.push(n)}return r}(e,t,r)}(e,t,r);return nr(null!==i),i}}(e,t.bucket),a);return c.urlParams=s,c.errorHandler=ir(t),c}(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,yr)}function Tr(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Cn(e._location.bucket,n);return new _r(e.storage,r)}function Ir(e,t){if(e instanceof Cr){const n=e;if(null==n._bucket)throw new yn("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");const r=new _r(n,n._bucket);return null!=t?Ir(r,t):r}return void 0!==t?Tr(e,t):e}function kr(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Cr)return new _r(e,t);throw Sn("To use ref(service, url), the first argument must be a Storage instance.")}return Ir(e,t)}function Er(e,t){const n=null==t?void 0:t.storageBucket;return null==n?null:Cn.makeFromBucketSpec(n,e)}class Cr{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host="firebasestorage.googleapis.com",this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Cn.makeFromBucketSpec(r,this._host):Er(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Cn.makeFromBucketSpec(this._url,e):Er(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Rn("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Rn("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ut.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const e=yield t.getToken();if(null!==e)return e.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ut.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _r(this,e)}_makeRequest(e,t,n,r){if(this._deleted)return new xn(Tn());{const i=function(e,t,n,r,i,s){const o=On(e.urlParams),a=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Mn(a,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}makeRequestWithTokens(e,t){var n=this;return(0,Ut.Z)(function*(){const[r,i]=yield Promise.all([n._getAuthToken(),n._getAppCheckToken()]);return n._makeRequest(e,t,r,i).getPromise()})()}}function xr(e,t,n,r){return function(e,t,n=qn.RAW,r){e._throwIfRoot("uploadString");const i=jn(n,t),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),function(e,t,n){e._throwIfRoot("uploadBytes");const r=cr(e.storage,e._location,Qn(),new zn(t,!0),n);return e.storage.makeRequestWithTokens(r,yr).then(t=>({metadata:t,ref:e}))}(e,i.data,s)}(e=(0,Nt.m9)(e),t,n,r)}function Ar(e){return function(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=Nn(t.fullServerUrl(),e.host,e._protocol),r=new tr(n,"DELETE",function(e,t){},e.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=sr(t),r}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,yr)}(e=(0,Nt.m9)(e))}function Dr(e,t){return kr(e=(0,Nt.m9)(e),t)}function Pr(e=(0,Ot.getApp)(),t){return e=(0,Nt.m9)(e),(0,Ot._getProvider)(e,"storage").getImmediate({identifier:t})}(0,Ot._registerComponent)(new Mt.wA("storage",function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Cr(n,r,i,t,Ot.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,Ot.registerVersion)("@firebase/storage","0.9.6",""),(0,Ot.registerVersion)("@firebase/storage","0.9.6","esm2017");class Rr{constructor(e){return e}}const Nr=new r.OlP("angularfire2.storage-instances");function Or(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new Rr(r)}}const Lr={provide:class{constructor(){return(0,Tt.vb)("storage")}},deps:[[new r.FiY,Nr]]},Mr={provide:Rr,useFactory:function(e,t){const n=(0,Tt.JM)("storage",e,t);return n&&new Rr(n)},deps:[[new r.FiY,Nr],It]};let Zr=(()=>{class e{constructor(){(0,St.KN)("angularfire",Tt.q4.full,"gcs")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[Mr,Lr]}),e})();function Ur(e,...t){return{ngModule:Zr,providers:[{provide:Nr,useFactory:Or(e),multi:!0,deps:[r.R0b,r.zs3,Tt.HU,kt,[new r.FiY,Zt],[new r.FiY,mn],...t]}]}}const Fr=(0,Tt.u3)(Ar,!0),qr=(0,Tt.u3)(Pr,!0),Vr=(0,Tt.u3)(Dr,!0),jr=(0,Tt.u3)(xr,!0);var Br,$r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Hr={},zr=zr||{},Gr=$r||self;function Kr(){}function Wr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Jr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Yr="closure_uid_"+(1e9*Math.random()>>>0),Qr=0;function Xr(e,t,n){return e.call.apply(e.bind,arguments)}function ei(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ti(e,t,n){return(ti=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Xr:ei).apply(null,arguments)}function ni(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ri(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function ii(){this.s=this.s,this.o=this.o}var si={};ii.prototype.s=!1,ii.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Yr)&&e[Yr]||(e[Yr]=++Qr)}(this);delete si[e]}},ii.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const oi=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},ai=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const r=e.length,i="string"==typeof e?e.split(""):e;for(let s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function ci(e){return Array.prototype.concat.apply([],arguments)}function ui(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function li(e){return/^[\s\xa0]*$/.test(e)}var hi,di=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function pi(e,t){return-1!=e.indexOf(t)}function fi(e,t){return e<t?-1:e>t?1:0}e:{var gi=Gr.navigator;if(gi){var mi=gi.userAgent;if(mi){hi=mi;break e}}hi=""}function yi(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function vi(e){const t={};for(const n in e)t[n]=e[n];return t}var _i="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bi(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<_i.length;t++)n=_i[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function wi(e){return wi[" "](e),e}wi[" "]=Kr;var Si,Ti,Ii=pi(hi,"Opera"),ki=pi(hi,"Trident")||pi(hi,"MSIE"),Ei=pi(hi,"Edge"),Ci=Ei||ki,xi=pi(hi,"Gecko")&&!(pi(hi.toLowerCase(),"webkit")&&!pi(hi,"Edge"))&&!(pi(hi,"Trident")||pi(hi,"MSIE"))&&!pi(hi,"Edge"),Ai=pi(hi.toLowerCase(),"webkit")&&!pi(hi,"Edge");function Di(){var e=Gr.document;return e?e.documentMode:void 0}e:{var Pi="",Ri=(Ti=hi,xi?/rv:([^\);]+)(\)|;)/.exec(Ti):Ei?/Edge\/([\d\.]+)/.exec(Ti):ki?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ti):Ai?/WebKit\/(\S+)/.exec(Ti):Ii?/(?:Version)[ \/]?(\S+)/.exec(Ti):void 0);if(Ri&&(Pi=Ri?Ri[1]:""),ki){var Ni=Di();if(null!=Ni&&Ni>parseFloat(Pi)){Si=String(Ni);break e}}Si=Pi}var Oi={};var Li=Gr.document&&ki&&(Di()||parseInt(Si,10))||void 0,Mi=function(){if(!Gr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Gr.addEventListener("test",Kr,t),Gr.removeEventListener("test",Kr,t)}catch(n){}return e}();function Zi(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Ui(e,t){if(Zi.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(xi){e:{try{wi(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Fi[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ui.Z.h.call(this)}}Zi.prototype.h=function(){this.defaultPrevented=!0},ri(Ui,Zi);var Fi={2:"touch",3:"pen",4:"mouse"};Ui.prototype.h=function(){Ui.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var qi="closure_listenable_"+(1e6*Math.random()|0),Vi=0;function ji(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Vi,this.ca=this.fa=!1}function Bi(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function $i(e){this.src=e,this.g={},this.h=0}function Hi(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=oi(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Bi(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function zi(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}$i.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=zi(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new ji(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var Gi="closure_lm_"+(1e6*Math.random()|0),Ki={};function Wi(e,t,n,r,i){if(r&&r.once)return Yi(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Wi(e,t[s],n,r,i);return null}return n=is(n),e&&e[qi]?e.N(t,n,Jr(r)?!!r.capture:!!r,i):Ji(e,t,n,!1,r,i)}function Ji(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Jr(i)?!!i.capture:!!i,a=ns(e);if(a||(e[Gi]=a=new $i(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){var e=ts;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Mi||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(es(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Yi(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Yi(e,t[s],n,r,i);return null}return n=is(n),e&&e[qi]?e.O(t,n,Jr(r)?!!r.capture:!!r,i):Ji(e,t,n,!0,r,i)}function Qi(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Qi(e,t[s],n,r,i);else r=Jr(r)?!!r.capture:!!r,n=is(n),e&&e[qi]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=zi(s=e.g[t],n,r,i))&&(Bi(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=ns(e))&&(t=e.g[t.toString()],e=-1,t&&(e=zi(t,n,r,i)),(n=-1<e?t[e]:null)&&Xi(n))}function Xi(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[qi])Hi(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(es(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ns(t))?(Hi(n,e),0==n.h&&(n.src=null,t[Gi]=null)):Bi(e)}}}function es(e){return e in Ki?Ki[e]:Ki[e]="on"+e}function ts(e,t){if(e.ca)e=!0;else{t=new Ui(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Xi(e),e=n.call(r,t)}return e}function ns(e){return(e=e[Gi])instanceof $i?e:null}var rs="__closure_events_fn_"+(1e9*Math.random()>>>0);function is(e){return"function"==typeof e?e:(e[rs]||(e[rs]=function(t){return e.handleEvent(t)}),e[rs])}function ss(){ii.call(this),this.i=new $i(this),this.P=this,this.I=null}function os(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new Zi(t,e);else if(t instanceof Zi)t.target=t.target||e;else{var i=t;bi(t=new Zi(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=as(o,r,!0,t)&&i}if(i=as(o=t.g=e,r,!0,t)&&i,i=as(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=as(o=t.g=n[s],r,!1,t)&&i}function as(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&Hi(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}ri(ss,ii),ss.prototype[qi]=!0,ss.prototype.removeEventListener=function(e,t,n,r){Qi(this,e,t,n,r)},ss.prototype.M=function(){if(ss.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Bi(n[r]);delete t.g[e],t.h--}}this.I=null},ss.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ss.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var cs=Gr.JSON.stringify;function us(){var e=ms;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ls,hs=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new ds,e=>e.reset());class ds{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ps(e){Gr.setTimeout(()=>{throw e},0)}function fs(e,t){ls||function(){var e=Gr.Promise.resolve(void 0);ls=function(){e.then(ys)}}(),gs||(ls(),gs=!0),ms.add(e,t)}var gs=!1,ms=new class{constructor(){this.h=this.g=null}add(e,t){const n=hs.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function ys(){for(var e;e=us();){try{e.h.call(e.g)}catch(n){ps(n)}var t=hs;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}gs=!1}function vs(e,t){ss.call(this),this.h=e||1,this.g=t||Gr,this.j=ti(this.kb,this),this.l=Date.now()}function _s(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function bs(e,t,n){if("function"==typeof e)n&&(e=ti(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ti(e.handleEvent,e)}return 2147483647<Number(t)?-1:Gr.setTimeout(e,t||0)}function ws(e){e.g=bs(()=>{e.g=null,e.i&&(e.i=!1,ws(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}ri(vs,ss),(Br=vs.prototype).da=!1,Br.S=null,Br.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),os(this,"tick"),this.da&&(_s(this),this.start()))}},Br.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Br.M=function(){vs.Z.M.call(this),_s(this),delete this.g};class Ss extends ii{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ws(this)}M(){super.M(),this.g&&(Gr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ts(e){ii.call(this),this.h=e,this.g={}}ri(Ts,ii);var Is=[];function ks(e,t,n,r){Array.isArray(n)||(n&&(Is[0]=n.toString()),n=Is);for(var i=0;i<n.length;i++){var s=Wi(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Es(e){yi(e.g,function(e,t){this.g.hasOwnProperty(t)&&Xi(e)},e),e.g={}}function Cs(){this.g=!0}function xs(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return cs(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}Ts.prototype.M=function(){Ts.Z.M.call(this),Es(this)},Ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Cs.prototype.Aa=function(){this.g=!1},Cs.prototype.info=function(){};var As={},Ds=null;function Ps(){return Ds=Ds||new ss}function Rs(e){Zi.call(this,As.Ma,e)}function Ns(e){const t=Ps();os(t,new Rs(t,e))}function Os(e,t){Zi.call(this,As.STAT_EVENT,e),this.stat=t}function Ls(e){const t=Ps();os(t,new Os(t,e))}function Ms(e,t){Zi.call(this,As.Na,e),this.size=t}function Zs(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Gr.setTimeout(function(){e()},t)}As.Ma="serverreachability",ri(Rs,Zi),As.STAT_EVENT="statevent",ri(Os,Zi),As.Na="timingevent",ri(Ms,Zi);var Us={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Fs={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function qs(){}function Vs(){}qs.prototype.h=null;var js,Bs={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function $s(){Zi.call(this,"d")}function Hs(){Zi.call(this,"c")}function zs(){}function Gs(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Ts(this),this.P=Ws,this.W=new vs(e=Ci?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ks}function Ks(){this.i=null,this.g="",this.h=!1}ri($s,Zi),ri(Hs,Zi),ri(zs,qs),zs.prototype.g=function(){return new XMLHttpRequest},zs.prototype.i=function(){return{}},js=new zs;var Ws=45e3,Js={},Ys={};function Qs(e,t,n){e.K=1,e.v=So(mo(t)),e.s=n,e.U=!0,Xs(e,null)}function Xs(e,t){e.F=Date.now(),ro(e),e.A=mo(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Lo(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Ks,e.g=La(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Ss(ti(e.Ia,e,e.g),e.O)),ks(e.V,e.g,"readystatechange",e.gb),t=e.H?vi(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ns(1),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+u+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.X,e.s)}function eo(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function to(e,t,n){let r,i=!0;for(;!e.I&&e.C<n.length;){if(r=no(e,n),r==Ys){4==t&&(e.o=4,Ls(14),i=!1),xs(e.j,e.m,null,"[Incomplete Response]");break}if(r==Js){e.o=4,Ls(15),xs(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}xs(e.j,e.m,r,null),co(e,r)}eo(e)&&r!=Ys&&r!=Js&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ls(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ca(t),t.L=!0,Ls(11))):(xs(e.j,e.m,n,"[Invalid Chunked Response]"),ao(e),oo(e))}function no(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ys:(n=Number(t.substring(n,r)),isNaN(n)?Js:(r+=1)+n>t.length?Ys:(t=t.substr(r,n),e.C=r+n,t))}function ro(e){e.Y=Date.now()+e.P,io(e,e.P)}function io(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Zs(ti(e.eb,e),t)}function so(e){e.B&&(Gr.clearTimeout(e.B),e.B=null)}function oo(e){0==e.l.G||e.I||Da(e.l,e)}function ao(e){so(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,_s(e.W),Es(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function co(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Vo(n.i,e)))if(n.I=e.N,!e.J&&Vo(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Aa(n),va(n)}Ea(n),Ls(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Zs(ti(n.ab,n),6e3));if(1>=qo(n.i)&&n.ka){try{n.ka()}catch(u){}n.ka=void 0}}else Ra(n,11)}else if((e.J||n.g==e)&&Aa(n),!li(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.U=u[0],u=u[1],2==n.G)if("c"==u[0]){n.J=u[1],n.la=u[2];const t=u[3];null!=t&&(n.ma=t,n.h.info("VER="+n.ma));const i=u[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const l=u[5];null!=l&&"number"==typeof l&&0<l&&(n.K=r=1.5*l,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;!s.g&&(pi(e,"spdy")||pi(e,"quic")||pi(e,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(jo(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.sa=e,wo(r.F,r.D,e))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=e;if((r=n).oa=Oa(r,r.H?r.la:null,r.W),o.J){Bo(r.i,o);var a=o,c=r.K;c&&a.setTimeout(c),a.B&&(so(a),ro(a)),r.g=o}else ka(r);0<n.l.length&&wa(n)}else"stop"!=u[0]&&"close"!=u[0]||Ra(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Ra(n,7):ya(n):"noop"!=u[0]&&n.j&&n.j.wa(u),n.A=0)}Ns(4)}catch(u){}}function uo(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Wr(e)||"string"==typeof e)ai(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Wr(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(Wr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function lo(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof lo)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function ho(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];po(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)po(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function po(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Br=Gs.prototype).setTimeout=function(e){this.P=e},Br.gb=function(e){e=e.target;const t=this.L;t&&3==da(e)?t.l():this.Ia(e)},Br.Ia=function(e){try{if(e==this.g)e:{const l=da(this.g);var t=this.g.Da();const h=this.g.ba();if(!(3>l)&&(3!=l||Ci||this.g&&(this.h.h||this.g.ga()||pa(this.g)))){this.I||4!=l||7==t||Ns(8==t||0>=h?3:2),so(this);var n=this.g.ba();this.N=n;t:if(eo(this)){var r=pa(this.g);e="";var i=r.length,s=4==da(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ao(this),oo(this);var o="";break t}this.h.i=new Gr.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,l,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!li(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,Ls(12),ao(this),oo(this);break e}xs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,co(this,n)}this.U?(to(this,l,o),Ci&&this.i&&3==l&&(ks(this.V,this.W,"tick",this.fb),this.W.start())):(xs(this.j,this.m,o,null),co(this,o)),4==l&&ao(this),this.i&&!this.I&&(4==l?Da(this.l,this):(this.i=!1,ro(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Ls(12)):(this.o=0,Ls(13)),ao(this),oo(this)}}}catch(l){}},Br.fb=function(){if(this.g){var e=da(this.g),t=this.g.ga();this.C<t.length&&(so(this),to(this,e,t),this.i&&4!=e&&ro(this))}},Br.cancel=function(){this.I=!0,ao(this)},Br.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Ns(3),Ls(17)),ao(this),this.o=2,oo(this)):io(this,this.Y-e)},(Br=lo.prototype).R=function(){ho(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Br.T=function(){return ho(this),this.g.concat()},Br.get=function(e,t){return po(this.h,e)?this.h[e]:t},Br.set=function(e,t){po(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Br.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};var fo=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function go(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof go){this.g=void 0!==t?t:e.g,yo(this,e.j),this.s=e.s,vo(this,e.i),_o(this,e.m),this.l=e.l,t=e.h;var n=new Po;n.i=t.i,t.g&&(n.g=new lo(t.g),n.h=t.h),bo(this,n),this.o=e.o}else e&&(n=String(e).match(fo))?(this.g=!!t,yo(this,n[1]||"",!0),this.s=To(n[2]||""),vo(this,n[3]||"",!0),_o(this,n[4]),this.l=To(n[5]||"",!0),bo(this,n[6]||"",!0),this.o=To(n[7]||"")):(this.g=!!t,this.h=new Po(null,this.g))}function mo(e){return new go(e)}function yo(e,t,n){e.j=n?To(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function vo(e,t,n){e.i=n?To(t,!0):t}function _o(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function bo(e,t,n){t instanceof Po?(e.h=t,function(e,t){t&&!e.j&&(Ro(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(No(this,t),Lo(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=Io(t,Ao)),e.h=new Po(t,e.g))}function wo(e,t,n){e.h.set(t,n)}function So(e){return wo(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function To(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Io(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ko),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ko(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}go.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Io(t,Eo,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Io(t,Eo,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Io(n,"/"==n.charAt(0)?xo:Co,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Io(n,Do)),e.join("")};var Eo=/[#\/\?@]/g,Co=/[#\?:]/g,xo=/[#\?]/g,Ao=/[#\?@]/g,Do=/#/g;function Po(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ro(e){e.g||(e.g=new lo,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function No(e,t){Ro(e),t=Mo(e,t),po(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,po((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&ho(e)))}function Oo(e,t){return Ro(e),t=Mo(e,t),po(e.g.h,t)}function Lo(e,t,n){No(e,t),0<n.length&&(e.i=null,e.g.set(Mo(e,t),ui(n)),e.h+=n.length)}function Mo(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Zo(e){this.l=e||Uo,e=Gr.PerformanceNavigationTiming?0<(e=Gr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(Gr.g&&Gr.g.Ea&&Gr.g.Ea()&&Gr.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Br=Po.prototype).add=function(e,t){Ro(this),this.i=null,e=Mo(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Br.forEach=function(e,t){Ro(this),this.g.forEach(function(n,r){ai(n,function(n){e.call(t,n,r,this)},this)},this)},Br.T=function(){Ro(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n},Br.R=function(e){Ro(this);var t=[];if("string"==typeof e)Oo(this,e)&&(t=ci(t,this.g.get(Mo(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=ci(t,e[n])}return t},Br.set=function(e,t){return Ro(this),this.i=null,Oo(this,e=Mo(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Br.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Br.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),e.push(o)}}return this.i=e.join("&")};var Uo=10;function Fo(e){return!!e.h||!!e.g&&e.g.size>=e.j}function qo(e){return e.h?1:e.g?e.g.size:0}function Vo(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function jo(e,t){e.g?e.g.add(t):e.h=t}function Bo(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function $o(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return ui(e.i)}function Ho(){}function zo(){this.g=new Ho}function Go(e,t,n){const r=n||"";try{uo(e,function(e,n){let i=e;Jr(e)&&(i=cs(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ko(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function Wo(e){this.l=e.$b||null,this.j=e.ib||!1}function Jo(e,t){ss.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Yo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Zo.prototype.cancel=function(){if(this.i=$o(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},Ho.prototype.stringify=function(e){return Gr.JSON.stringify(e,void 0)},Ho.prototype.parse=function(e){return Gr.JSON.parse(e,void 0)},ri(Wo,qs),Wo.prototype.g=function(){return new Jo(this.l,this.j)},Wo.prototype.i=function(e){return function(){return e}}({}),ri(Jo,ss);var Yo=0;function Qo(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Xo(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ea(e)}function ea(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Br=Jo.prototype).open=function(e,t){if(this.readyState!=Yo)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ea(this)},Br.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Gr).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Br.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Xo(this)),this.readyState=Yo},Br.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ea(this)),this.g&&(this.readyState=3,ea(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Gr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Qo(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Br.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Xo(this):ea(this),3==this.readyState&&Qo(this)}},Br.Ua=function(e){this.g&&(this.response=this.responseText=e,Xo(this))},Br.Ta=function(e){this.g&&(this.response=e,Xo(this))},Br.ha=function(){this.g&&Xo(this)},Br.setRequestHeader=function(e,t){this.v.append(e,t)},Br.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Br.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Jo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ta=Gr.JSON.parse;function na(e){ss.call(this),this.headers=new lo,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ra,this.K=this.L=!1}ri(na,ss);var ra="",ia=/^https?$/i,sa=["POST","PUT"];function oa(e){return"content-type"==e.toLowerCase()}function aa(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ca(e),la(e)}function ca(e){e.D||(e.D=!0,os(e,"complete"),os(e,"error"))}function ua(e){if(e.h&&void 0!==zr&&(!e.C[1]||4!=da(e)||2!=e.ba()))if(e.v&&4==da(e))bs(e.Fa,0,e);else if(os(e,"readystatechange"),4==da(e)){e.h=!1;try{const c=e.ba();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===c){var i=String(e.H).match(fo)[1]||null;if(!i&&Gr.self&&Gr.self.location){var s=Gr.self.location.protocol;i=s.substr(0,s.length-1)}r=!ia.test(i?i.toLowerCase():"")}n=r}if(n)os(e,"complete"),os(e,"success");else{e.m=6;try{var o=2<da(e)?e.g.statusText:""}catch(a){o=""}e.j=o+" ["+e.ba()+"]",ca(e)}}finally{la(e)}}}function la(e,t){if(e.g){ha(e);const r=e.g,i=e.C[0]?Kr:null;e.g=null,e.C=null,t||os(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function ha(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Gr.clearTimeout(e.A),e.A=null)}function da(e){return e.g?e.g.readyState:0}function pa(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case ra:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function fa(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){let t="";return yi(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):wo(e,t,n))}function ga(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ma(e){this.za=0,this.l=[],this.h=new Cs,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ga("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ga("baseRetryDelayMs",5e3,e),this.$a=ga("retryDelaySeedMs",1e4,e),this.Ya=ga("forwardChannelMaxRetries",2,e),this.ra=ga("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Zo(e&&e.concurrentRequestLimit),this.Ca=new zo,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function ya(e){if(_a(e),3==e.G){var t=e.V++,n=mo(e.F);wo(n,"SID",e.J),wo(n,"RID",t),wo(n,"TYPE","terminate"),Ta(e,n),(t=new Gs(e,e.h,t,void 0)).K=2,t.v=So(mo(n)),n=!1,Gr.navigator&&Gr.navigator.sendBeacon&&(n=Gr.navigator.sendBeacon(t.v.toString(),"")),!n&&Gr.Image&&((new Image).src=t.v,n=!0),n||(t.g=La(t.l,null),t.g.ea(t.v)),t.F=Date.now(),ro(t)}Na(e)}function va(e){e.g&&(Ca(e),e.g.cancel(),e.g=null)}function _a(e){va(e),e.u&&(Gr.clearTimeout(e.u),e.u=null),Aa(e),e.i.cancel(),e.m&&("number"==typeof e.m&&Gr.clearTimeout(e.m),e.m=null)}function ba(e,t){e.l.push(new class{constructor(e,t){this.h=e,this.g=t}}(e.Za++,t)),3==e.G&&wa(e)}function wa(e){Fo(e.i)||e.m||(e.m=!0,fs(e.Ha,e),e.C=0)}function Sa(e,t){var n;n=t?t.m:e.V++;const r=mo(e.F);wo(r,"SID",e.J),wo(r,"RID",n),wo(r,"AID",e.U),Ta(e,r),e.o&&e.s&&fa(r,e.o,e.s),n=new Gs(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Ia(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),jo(e.i,n),Qs(n,r,t)}function Ta(e,t){e.j&&uo({},function(e,n){wo(t,n,e)})}function Ia(e,t,n){n=Math.min(e.l.length,n);var r=e.j?ti(e.j.Oa,e.j,e):null;e:{var i=e.l;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=t,0>n)t=Math.max(0,i[o].h-100),s=!1;else try{Go(a,e,"req"+n+"_")}catch(cc){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,r}function ka(e){e.g||e.u||(e.Y=1,fs(e.Ga,e),e.A=0)}function Ea(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=Zs(ti(e.Ga,e),Pa(e,e.A)),e.A++,0))}function Ca(e){null!=e.B&&(Gr.clearTimeout(e.B),e.B=null)}function xa(e){e.g=new Gs(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=mo(e.oa);wo(t,"RID","rpc"),wo(t,"SID",e.J),wo(t,"CI",e.N?"0":"1"),wo(t,"AID",e.U),Ta(e,t),wo(t,"TYPE","xmlhttp"),e.o&&e.s&&fa(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=So(mo(t)),n.s=null,n.U=!0,Xs(n,e)}function Aa(e){null!=e.v&&(Gr.clearTimeout(e.v),e.v=null)}function Da(e,t){var n=null;if(e.g==t){Aa(e),Ca(e),e.g=null;var r=2}else{if(!Vo(e.i,t))return;n=t.D,Bo(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;os(r=Ps(),new Ms(r,n,t,i)),wa(e)}else ka(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(qo(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=Zs(ti(e.Ha,e,t),Pa(e,e.C)),e.C++,0)))}(e,t)||2==r&&Ea(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ra(e,5);break;case 4:Ra(e,10);break;case 3:Ra(e,6);break;default:Ra(e,2)}}function Pa(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Ra(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=ti(e.jb,e);n||(n=new go("//www.google.com/images/cleardot.gif"),Gr.location&&"http"==Gr.location.protocol||yo(n,"https"),So(n)),function(e,t){const n=new Cs;if(Gr.Image){const r=new Image;r.onload=ni(Ko,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ni(Ko,n,r,"TestLoadImage: error",!1,t),r.onabort=ni(Ko,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ni(Ko,n,r,"TestLoadImage: timeout",!1,t),Gr.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ls(2);e.G=0,e.j&&e.j.va(t),Na(e),_a(e)}function Na(e){e.G=0,e.I=-1,e.j&&(0==$o(e.i).length&&0==e.l.length||(e.i.i.length=0,ui(e.l),e.l.length=0),e.j.ua())}function Oa(e,t,n){let r=function(e){return e instanceof go?mo(e):new go(e,void 0)}(n);if(""!=r.i)t&&vo(r,t+"."+r.i),_o(r,r.m);else{const e=Gr.location;r=function(e,t,n,r){var i=new go(null,void 0);return e&&yo(i,e),t&&vo(i,t),n&&_o(i,n),r&&(i.l=r),i}(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,n)}return e.aa&&yi(e.aa,function(e,t){wo(r,t,e)}),n=e.sa,(t=e.D)&&n&&wo(r,t,n),wo(r,"VER",e.ma),Ta(e,r),r}function La(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new na(n&&e.Ba&&!e.qa?new Wo({ib:!0}):e.qa)).L=e.H,t}function Ma(){}function Za(){if(ki&&!(10<=Number(Li)))throw Error("Environmental error: no available transport.")}function Ua(e,t){ss.call(this),this.g=new ma(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!li(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!li(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Va(this)}function Fa(e){$s.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function qa(){Hs.call(this),this.status=1}function Va(e){this.g=e}(Br=na.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():js.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:js),this.g.onreadystatechange=ti(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void aa(this,s)}e=n||"";const i=new lo(this.headers);r&&uo(r,function(e,t){i.set(t,e)}),r=function(e){e:{var t=oa;const n=e.length,r="string"==typeof e?e.split(""):e;for(let i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=Gr.FormData&&e instanceof Gr.FormData,!(0<=oi(sa,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ha(this),0<this.B&&((this.K=function(e){return ki&&function(){return e=Oi,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let e=0;const t=di(String(Si)).split("."),n=di("9").split("."),r=Math.max(t.length,n.length);for(let o=0;0==e&&o<r;o++){var i=t[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;e=fi(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||fi(0==i[2].length,0==s[2].length)||fi(i[2],s[2]),i=i[3],s=s[3]}while(0==e)}return 0<=e}();var e}()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ti(this.pa,this)):this.A=bs(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){aa(this,s)}},Br.pa=function(){void 0!==zr&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,os(this,"timeout"),this.abort(8))},Br.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,os(this,"complete"),os(this,"abort"),la(this))},Br.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),la(this,!0)),na.Z.M.call(this)},Br.Fa=function(){this.s||(this.F||this.v||this.l?ua(this):this.cb())},Br.cb=function(){ua(this)},Br.ba=function(){try{return 2<da(this)?this.g.status:-1}catch(Ti){return-1}},Br.ga=function(){try{return this.g?this.g.responseText:""}catch(Ti){return""}},Br.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ta(t)}},Br.Da=function(){return this.m},Br.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Br=ma.prototype).ma=8,Br.G=1,Br.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Br.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Gs(this,this.h,e,void 0);let s=this.s;if(this.P&&(s?(s=vi(s),bi(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Ia(this,i,t),wo(n=mo(this.F),"RID",e),wo(n,"CVER",22),this.D&&wo(n,"X-HTTP-Session-Id",this.D),Ta(this,n),this.o&&s&&fa(n,this.o,s),jo(this.i,i),this.Ra&&wo(n,"TYPE","init"),this.ja?(wo(n,"$req",t),wo(n,"SID","null"),i.$=!0,Qs(i,n,null)):Qs(i,n,t),this.G=2}}else 3==this.G&&(e?Sa(this,e):0==this.l.length||Fo(this.i)||Sa(this))},Br.Ga=function(){if(this.u=null,xa(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Zs(ti(this.bb,this),e)}},Br.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ls(10),va(this),xa(this))},Br.ab=function(){null!=this.v&&(this.v=null,va(this),Ea(this),Ls(19))},Br.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Ls(2)):(this.h.info("Failed to ping google.com"),Ls(1))},(Br=Ma.prototype).xa=function(){},Br.wa=function(){},Br.va=function(){},Br.ua=function(){},Br.Oa=function(){},Za.prototype.g=function(e,t){return new Ua(e,t)},ri(Ua,ss),Ua.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),fs(ti(e.hb,e,t))),Ls(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Oa(e,null,e.W),wa(e)},Ua.prototype.close=function(){ya(this.g)},Ua.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,ba(this.g,t)}else this.v?((t={}).__data__=cs(e),ba(this.g,t)):ba(this.g,e)},Ua.prototype.M=function(){this.g.j=null,delete this.j,ya(this.g),delete this.g,Ua.Z.M.call(this)},ri(Fa,$s),ri(qa,Hs),ri(Va,Ma),Va.prototype.xa=function(){os(this.g,"a")},Va.prototype.wa=function(e){os(this.g,new Fa(e))},Va.prototype.va=function(e){os(this.g,new qa(e))},Va.prototype.ua=function(){os(this.g,"b")},Za.prototype.createWebChannel=Za.prototype.g,Ua.prototype.send=Ua.prototype.u,Ua.prototype.open=Ua.prototype.m,Ua.prototype.close=Ua.prototype.close,Us.NO_ERROR=0,Us.TIMEOUT=8,Us.HTTP_ERROR=6,Fs.COMPLETE="complete",Vs.EventType=Bs,Bs.OPEN="a",Bs.CLOSE="b",Bs.ERROR="c",Bs.MESSAGE="d",ss.prototype.listen=ss.prototype.N,na.prototype.listenOnce=na.prototype.O,na.prototype.getLastError=na.prototype.La,na.prototype.getLastErrorCode=na.prototype.Da,na.prototype.getStatus=na.prototype.ba,na.prototype.getResponseJson=na.prototype.Qa,na.prototype.getResponseText=na.prototype.ga,na.prototype.send=na.prototype.ea;var ja=Hr.createWebChannelTransport=function(){return new Za},Ba=Hr.getStatEventTarget=function(){return Ps()},$a=Hr.ErrorCode=Us,Ha=Hr.EventType=Fs,za=Hr.Event=As,Ga=Hr.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Ka=Hr.FetchXmlHttpFactory=Wo,Wa=Hr.WebChannel=Vs,Ja=Hr.XhrIo=na;class Ya{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ya.UNAUTHENTICATED=new Ya(null),Ya.GOOGLE_CREDENTIALS=new Ya("google-credentials-uid"),Ya.FIRST_PARTY=new Ya("first-party-uid"),Ya.MOCK_USER=new Ya("mock-user");let Qa="9.8.0";const Xa=new Lt.Yd("@firebase/firestore");function ec(){return Xa.logLevel}function tc(e,...t){if(Xa.logLevel<=Lt.in.DEBUG){const n=t.map(ic);Xa.debug(`Firestore (${Qa}): ${e}`,...n)}}function nc(e,...t){if(Xa.logLevel<=Lt.in.ERROR){const n=t.map(ic);Xa.error(`Firestore (${Qa}): ${e}`,...n)}}function rc(e,...t){if(Xa.logLevel<=Lt.in.WARN){const n=t.map(ic);Xa.warn(`Firestore (${Qa}): ${e}`,...n)}}function ic(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function sc(e="Unexpected state"){const t=`FIRESTORE (${Qa}) INTERNAL ASSERTION FAILED: `+e;throw nc(t),new Error(t)}function oc(e,t){e||sc()}function ac(e,t){return e}const cc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class uc extends Nt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class lc{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class hc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ya.UNAUTHENTICATED))}shutdown(){}}class pc{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class fc{constructor(e){this.t=e,this.currentUser=Ya.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var n=this;let r=this.i;const i=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve();let s=new lc;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new lc,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const t=s;e.enqueueRetryable((0,Ut.Z)(function*(){yield t.promise,yield i(n.currentUser)}))},a=e=>{tc("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(tc("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new lc)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(tc("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(oc("string"==typeof t.accessToken),new hc(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return oc(null===e||"string"==typeof e),new Ya(e)}}class gc{constructor(e,t,n){this.type="FirstParty",this.user=Ya.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class mc{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new gc(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ya.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vc{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const n=e=>{null!=e.error&&tc("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.p;return this.p=e.token,tc("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{tc("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.g.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.g.getImmediate({optional:!0});e?r(e):tc("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(oc("string"==typeof e.token),this.p=e.token,new yc(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class _c{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.I(e),this.T=e=>t.writeSequenceNumber(e))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function bc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}_c.A=-1;class wc{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=bc(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function Sc(e,t){return e<t?-1:e>t?1:0}function Tc(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function Ic(e){return e+"\0"}class kc{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new uc(cc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new uc(cc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new uc(cc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new uc(cc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return kc.fromMillis(Date.now())}static fromDate(e){return kc.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new kc(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Sc(this.nanoseconds,e.nanoseconds):Sc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ec{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ec(e)}static min(){return new Ec(new kc(0,0))}static max(){return new Ec(new kc(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Cc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function xc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ac(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Dc{constructor(e,t,n){void 0===t?t=0:t>e.length&&sc(),void 0===n?n=e.length-t:n>e.length-t&&sc(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Dc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Dc?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Pc extends Dc{construct(e,t,n){return new Pc(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new uc(cc.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new Pc(t)}static emptyPath(){return new Pc([])}}const Rc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nc extends Dc{construct(e,t,n){return new Nc(e,t,n)}static isValidIdentifier(e){return Rc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nc.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Nc(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new uc(cc.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new uc(cc.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new uc(cc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new uc(cc.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nc(t)}static emptyPath(){return new Nc([])}}class Oc{constructor(e){this.fields=e,e.sort(Nc.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Tc(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Lc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Lc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Lc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Sc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lc.EMPTY_BYTE_STRING=new Lc("");const Mc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zc(e){if(oc(!!e),"string"==typeof e){let t=0;const n=Mc.exec(e);if(oc(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Uc(e.seconds),nanos:Uc(e.nanos)}}function Uc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Fc(e){return"string"==typeof e?Lc.fromBase64String(e):Lc.fromUint8Array(e)}function qc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Vc(e){const t=e.mapValue.fields.__previous_value__;return qc(t)?Vc(t):t}function jc(e){const t=Zc(e.mapValue.fields.__local_write_time__.timestampValue);return new kc(t.seconds,t.nanos)}class Bc{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class $c{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new $c("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof $c&&e.projectId===this.projectId&&e.database===this.database}}function Hc(e){return null==e}function zc(e){return 0===e&&1/e==-1/0}function Gc(e){return"number"==typeof e&&Number.isInteger(e)&&!zc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class Kc{constructor(e){this.path=e}static fromPath(e){return new Kc(Pc.fromString(e))}static fromName(e){return new Kc(Pc.fromString(e).popFirst(5))}static empty(){return new Kc(Pc.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Pc.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Pc.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Kc(new Pc(e.slice()))}}const Wc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Jc={nullValue:"NULL_VALUE"};function Yc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?qc(e)?4:hu(e)?9007199254740991:10:sc()}function Qc(e,t){if(e===t)return!0;const n=Yc(e);if(n!==Yc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return jc(e).isEqual(jc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Zc(e.timestampValue),r=Zc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Fc(e.bytesValue).isEqual(Fc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Uc(e.geoPointValue.latitude)===Uc(t.geoPointValue.latitude)&&Uc(e.geoPointValue.longitude)===Uc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Uc(e.integerValue)===Uc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Uc(e.doubleValue),r=Uc(t.doubleValue);return n===r?zc(n)===zc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Tc(e.arrayValue.values||[],t.arrayValue.values||[],Qc);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Cc(n)!==Cc(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Qc(n[i],r[i])))return!1;return!0}(e,t);default:return sc()}}function Xc(e,t){return void 0!==(e.values||[]).find(e=>Qc(e,t))}function eu(e,t){if(e===t)return 0;const n=Yc(e),r=Yc(t);if(n!==r)return Sc(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Sc(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Uc(e.integerValue||e.doubleValue),r=Uc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return tu(e.timestampValue,t.timestampValue);case 4:return tu(jc(e),jc(t));case 5:return Sc(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Fc(e),r=Fc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Sc(n[i],r[i]);if(0!==e)return e}return Sc(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Sc(Uc(e.latitude),Uc(t.latitude));return 0!==n?n:Sc(Uc(e.longitude),Uc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=eu(n[i],r[i]);if(e)return e}return Sc(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Wc.mapValue&&t===Wc.mapValue)return 0;if(e===Wc.mapValue)return 1;if(t===Wc.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Sc(r[o],s[o]);if(0!==e)return e;const t=eu(n[r[o]],i[s[o]]);if(0!==t)return t}return Sc(r.length,s.length)}(e.mapValue,t.mapValue);default:throw sc()}}function tu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Sc(e,t);const n=Zc(e),r=Zc(t),i=Sc(n.seconds,r.seconds);return 0!==i?i:Sc(n.nanos,r.nanos)}function nu(e){return ru(e)}function ru(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Zc(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Fc(e.bytesValue).toBase64():"referenceValue"in e?Kc.fromName(e.referenceValue).toString():"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ru(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${ru(e.fields[i])}`;return n+"}"}(e.mapValue):sc();var t}function iu(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function su(e){return!!e&&"integerValue"in e}function ou(e){return!!e&&"arrayValue"in e}function au(e){return!!e&&"nullValue"in e}function cu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function uu(e){return!!e&&"mapValue"in e}function lu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return xc(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=lu(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=lu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function hu(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function du(e){return"nullValue"in e?Jc:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?iu($c.empty(),Kc.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:sc()}function pu(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?iu($c.empty(),Kc.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Wc:sc()}function fu(e,t){const n=eu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function gu(e,t){const n=eu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class mu{constructor(e){this.value=e}static empty(){return new mu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!uu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lu(t)}setAll(e){let t=Nc.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=lu(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());uu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];uu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){xc(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new mu(lu(this.value))}}function yu(e){const t=[];return xc(e.fields,(e,n)=>{const r=new Nc([e]);if(uu(n)){const e=yu(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Oc(t)}class vu{constructor(e,t,n,r,i,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.data=i,this.documentState=s}static newInvalidDocument(e){return new vu(e,0,Ec.min(),Ec.min(),mu.empty(),0)}static newFoundDocument(e,t,n){return new vu(e,1,t,Ec.min(),n,0)}static newNoDocument(e,t){return new vu(e,2,t,Ec.min(),mu.empty(),0)}static newUnknownDocument(e,t){return new vu(e,3,t,Ec.min(),mu.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof vu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vu(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class _u{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function bu(e){return e.fields.find(e=>2===e.kind)}function wu(e){return e.fields.filter(e=>2!==e.kind)}_u.UNKNOWN_ID=-1;class Su{constructor(e,t){this.fieldPath=e,this.kind=t}}class Tu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Tu(0,Eu.min())}}function Iu(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ec.fromTimestamp(1e9===r?new kc(n+1,0):new kc(n,r));return new Eu(i,Kc.empty(),t)}function ku(e){return new Eu(e.readTime,e.key,-1)}class Eu{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Eu(Ec.min(),Kc.empty(),-1)}static max(){return new Eu(Ec.max(),Kc.empty(),-1)}}function Cu(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Kc.comparator(e.documentKey,t.documentKey),0!==n?n:Sc(e.largestBatchId,t.largestBatchId))}class xu{constructor(e,t){this.comparator=e,this.root=t||Du.EMPTY}insert(e,t){return new xu(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Du.BLACK,null,null))}remove(e){return new xu(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Du.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Au(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Au(this.root,e,this.comparator,!1)}getReverseIterator(){return new Au(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Au(this.root,e,this.comparator,!0)}}class Au{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Du{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Du.RED,this.left=null!=r?r:Du.EMPTY,this.right=null!=i?i:Du.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Du(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Du.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Du.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Du.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Du.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw sc();if(this.right.isRed())throw sc();const e=this.left.check();if(e!==this.right.check())throw sc();return e+(this.isRed()?0:1)}}Du.EMPTY=null,Du.RED=!0,Du.BLACK=!1,Du.EMPTY=new class{constructor(){this.size=0}get key(){throw sc()}get value(){throw sc()}get color(){throw sc()}get left(){throw sc()}get right(){throw sc()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Du(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pu{constructor(e){this.comparator=e,this.data=new xu(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ru(this.data.getIterator())}getIteratorFrom(e){return new Ru(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Pu))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pu(this.comparator);return t.data=e,t}}class Ru{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Nu(e){return e.hasNext()?e.getNext():void 0}class Ou{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.P=null}}function Lu(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Ou(e,t,n,r,i,s,o)}function Mu(e){const t=ac(e);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>{return(t=e).field.canonicalString()+t.op.toString()+nu(t.value);var t}).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Hc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>nu(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>nu(e)).join(",")),t.P=e}return t.P}function Zu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++)if(!Xu(e.orderBy[i],t.orderBy[i]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if((n=e.filters[i]).op!==(r=t.filters[i]).op||!n.field.isEqual(r.field)||!Qc(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!tl(e.startAt,t.startAt)&&tl(e.endAt,t.endAt)}function Uu(e){return Kc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Fu(e,t){return e.filters.filter(e=>e instanceof ju&&e.field.isEqual(t))}function qu(e,t,n){let r=Jc,i=!0;for(const s of Fu(e,t)){let e=Jc,t=!0;switch(s.op){case"<":case"<=":e=du(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Jc}fu({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];fu({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Vu(e,t,n){let r=Wc,i=!0;for(const s of Fu(e,t)){let e=Wc,t=!0;switch(s.op){case">=":case">":e=pu(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Wc}gu({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];gu({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class ju extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,n):new Bu(e,t,n):"array-contains"===t?new Gu(e,n):"in"===t?new Ku(e,n):"not-in"===t?new Wu(e,n):"array-contains-any"===t?new Ju(e,n):new ju(e,t,n)}static V(e,t,n){return"in"===t?new $u(e,n):new Hu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(eu(t,this.value)):null!==t&&Yc(this.value)===Yc(t)&&this.v(eu(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return sc()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Bu extends ju{constructor(e,t,n){super(e,t,n),this.key=Kc.fromName(n.referenceValue)}matches(e){const t=Kc.comparator(e.key,this.key);return this.v(t)}}class $u extends ju{constructor(e,t){super(e,"in",t),this.keys=zu(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Hu extends ju{constructor(e,t){super(e,"not-in",t),this.keys=zu(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function zu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Kc.fromName(e.referenceValue))}class Gu extends ju{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ou(t)&&Xc(t.arrayValue,this.value)}}class Ku extends ju{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Xc(this.value.arrayValue,t)}}class Wu extends ju{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Xc(this.value.arrayValue,t)}}class Ju extends ju{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ou(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Xc(this.value.arrayValue,e))}}class Yu{constructor(e,t){this.position=e,this.inclusive=t}}class Qu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Xu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function el(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Kc.comparator(Kc.fromName(o.referenceValue),n.key):eu(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function tl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Qc(e.position[n],t.position[n]))return!1;return!0}class nl{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.D=null,this.C=null}}function rl(e,t,n,r,i,s,o,a){return new nl(e,t,n,r,i,s,o,a)}function il(e){return new nl(e)}function sl(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ol(e){for(const t of e.filters)if(t.S())return t.field;return null}function al(e){return null!==e.collectionGroup}function cl(e){const t=ac(e);if(null===t.D){t.D=[];const e=ol(t),n=sl(t);if(null!==e&&null===n)e.isKeyField()||t.D.push(new Qu(e)),t.D.push(new Qu(Nc.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.D.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Qu(Nc.keyField(),e))}}}return t.D}function ul(e){const t=ac(e);if(!t.C)if("F"===t.limitType)t.C=Lu(t.path,t.collectionGroup,cl(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of cl(t))e.push(new Qu(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Yu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Yu(t.startAt.position,t.startAt.inclusive):null;t.C=Lu(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.C}function ll(e,t,n){return new nl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function hl(e,t){return Zu(ul(e),ul(t))&&e.limitType===t.limitType}function dl(e){return`${Mu(ul(e))}|lt:${e.limitType}`}function pl(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>{return`${(t=e).field.canonicalString()} ${t.op} ${nu(t.value)}`;var t}).join(", ")}]`),Hc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>nu(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>nu(e)).join(",")),`Target(${t})`}(ul(e))}; limitType=${e.limitType})`}function fl(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Kc.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=el(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,cl(e),t)||e.endAt&&!function(e,t,n){const r=el(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,cl(e),t))}(e,t)}function gl(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ml(e){return(t,n)=>{let r=!1;for(const i of cl(e)){const e=yl(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function yl(e,t,n){const r=e.field.isKeyField()?Kc.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?eu(r,i):sc()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return sc()}}function vl(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zc(t)?"-0":t}}function _l(e){return{integerValue:""+e}}function bl(e,t){return Gc(t)?_l(t):vl(e,t)}class wl{constructor(){this._=void 0}}function Sl(e,t,n){return e instanceof kl?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof El?Cl(e,t):e instanceof xl?Al(e,t):function(e,t){const n=Il(e,t),r=Pl(n)+Pl(e.k);return su(n)&&su(e.k)?_l(r):vl(e.M,r)}(e,t)}function Tl(e,t,n){return e instanceof El?Cl(e,t):e instanceof xl?Al(e,t):n}function Il(e,t){return e instanceof Dl?su(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class kl extends wl{}class El extends wl{constructor(e){super(),this.elements=e}}function Cl(e,t){const n=Rl(t);for(const r of e.elements)n.some(e=>Qc(e,r))||n.push(r);return{arrayValue:{values:n}}}class xl extends wl{constructor(e){super(),this.elements=e}}function Al(e,t){let n=Rl(t);for(const r of e.elements)n=n.filter(e=>!Qc(e,r));return{arrayValue:{values:n}}}class Dl extends wl{constructor(e,t){super(),this.M=e,this.k=t}}function Pl(e){return Uc(e.integerValue||e.doubleValue)}function Rl(e){return ou(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Nl{constructor(e,t){this.field=e,this.transform=t}}class Ol{constructor(e,t){this.version=e,this.transformResults=t}}class Ll{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ll}static exists(e){return new Ll(void 0,e)}static updateTime(e){return new Ll(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ml(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Zl{}function Ul(e,t,n){e instanceof Bl?function(e,t,n){const r=e.value.clone(),i=zl(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof $l?function(e,t,n){if(!Ml(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=zl(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Hl(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Fl(e,t,n){e instanceof Bl?function(e,t,n){if(!Ml(e.precondition,t))return;const r=e.value.clone(),i=Gl(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(jl(t),r).setHasLocalMutations()}(e,t,n):e instanceof $l?function(e,t,n){if(!Ml(e.precondition,t))return;const r=Gl(e.fieldTransforms,n,t),i=t.data;i.setAll(Hl(e)),i.setAll(r),t.convertToFoundDocument(jl(t),i).setHasLocalMutations()}(e,t,n):function(e,t){Ml(e.precondition,t)&&t.convertToNoDocument(Ec.min())}(e,t)}function ql(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Il(r.transform,e||null);null!=i&&(null==n&&(n=mu.empty()),n.set(r.field,i))}return n||null}function Vl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Tc(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof El&&t instanceof El||e instanceof xl&&t instanceof xl?Tc(e.elements,t.elements,Qc):e instanceof Dl&&t instanceof Dl?Qc(e.k,t.k):e instanceof kl&&t instanceof kl}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function jl(e){return e.isFoundDocument()?e.version:Ec.min()}class Bl extends Zl{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}}class $l extends Zl{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function Hl(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function zl(e,t,n){const r=new Map;oc(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Tl(o,a,n[i]))}return r}function Gl(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Sl(e,s,t))}return r}class Kl extends Zl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Wl extends Zl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Jl{constructor(e){this.count=e}}var Yl,Ql;function Xl(e){switch(e){default:return sc();case cc.CANCELLED:case cc.UNKNOWN:case cc.DEADLINE_EXCEEDED:case cc.RESOURCE_EXHAUSTED:case cc.INTERNAL:case cc.UNAVAILABLE:case cc.UNAUTHENTICATED:return!1;case cc.INVALID_ARGUMENT:case cc.NOT_FOUND:case cc.ALREADY_EXISTS:case cc.PERMISSION_DENIED:case cc.FAILED_PRECONDITION:case cc.ABORTED:case cc.OUT_OF_RANGE:case cc.UNIMPLEMENTED:case cc.DATA_LOSS:return!0}}function eh(e){if(void 0===e)return nc("GRPC error has no .code"),cc.UNKNOWN;switch(e){case Yl.OK:return cc.OK;case Yl.CANCELLED:return cc.CANCELLED;case Yl.UNKNOWN:return cc.UNKNOWN;case Yl.DEADLINE_EXCEEDED:return cc.DEADLINE_EXCEEDED;case Yl.RESOURCE_EXHAUSTED:return cc.RESOURCE_EXHAUSTED;case Yl.INTERNAL:return cc.INTERNAL;case Yl.UNAVAILABLE:return cc.UNAVAILABLE;case Yl.UNAUTHENTICATED:return cc.UNAUTHENTICATED;case Yl.INVALID_ARGUMENT:return cc.INVALID_ARGUMENT;case Yl.NOT_FOUND:return cc.NOT_FOUND;case Yl.ALREADY_EXISTS:return cc.ALREADY_EXISTS;case Yl.PERMISSION_DENIED:return cc.PERMISSION_DENIED;case Yl.FAILED_PRECONDITION:return cc.FAILED_PRECONDITION;case Yl.ABORTED:return cc.ABORTED;case Yl.OUT_OF_RANGE:return cc.OUT_OF_RANGE;case Yl.UNIMPLEMENTED:return cc.UNIMPLEMENTED;case Yl.DATA_LOSS:return cc.DATA_LOSS;default:return sc()}}(Ql=Yl||(Yl={}))[Ql.OK=0]="OK",Ql[Ql.CANCELLED=1]="CANCELLED",Ql[Ql.UNKNOWN=2]="UNKNOWN",Ql[Ql.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ql[Ql.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ql[Ql.NOT_FOUND=5]="NOT_FOUND",Ql[Ql.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ql[Ql.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ql[Ql.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ql[Ql.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ql[Ql.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ql[Ql.ABORTED=10]="ABORTED",Ql[Ql.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ql[Ql.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ql[Ql.INTERNAL=13]="INTERNAL",Ql[Ql.UNAVAILABLE=14]="UNAVAILABLE",Ql[Ql.DATA_LOSS=15]="DATA_LOSS";class th{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){xc(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Ac(this.inner)}size(){return this.innerSize}}const nh=new xu(Kc.comparator);function rh(){return nh}const ih=new xu(Kc.comparator);function sh(...e){let t=ih;for(const n of e)t=t.insert(n.key,n);return t}function oh(){return new th(e=>e.toString(),(e,t)=>e.isEqual(t))}const ah=new xu(Kc.comparator),ch=new Pu(Kc.comparator);function uh(...e){let t=ch;for(const n of e)t=t.add(n);return t}const lh=new Pu(Sc);function hh(){return lh}class dh{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,ph.createSynthesizedTargetChangeForCurrentChange(e,t)),new dh(Ec.min(),n,hh(),rh(),uh())}}class ph{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t){return new ph(Lc.EMPTY_BYTE_STRING,t,uh(),uh(),uh())}}class fh{constructor(e,t,n,r){this.O=e,this.removedTargetIds=t,this.key=n,this.F=r}}class gh{constructor(e,t){this.targetId=e,this.$=t}}class mh{constructor(e,t,n=Lc.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class yh{constructor(){this.B=0,this.L=bh(),this.U=Lc.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=uh(),t=uh(),n=uh();return this.L.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:sc()}}),new ph(this.U,this.q,e,t,n)}J(){this.K=!1,this.L=bh()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class vh{constructor(e){this.nt=e,this.st=new Map,this.it=rh(),this.rt=_h(),this.ot=new Pu(Sc)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const n=this.lt(t);switch(e.state){case 0:this.ft(t)&&n.W(e.resumeToken);break;case 1:n.tt(),n.G||n.J(),n.W(e.resumeToken);break;case 2:n.tt(),n.G||this.removeTarget(t);break;case 3:this.ft(t)&&(n.et(),n.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),n.W(e.resumeToken));break;default:sc()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((e,n)=>{this.ft(n)&&t(n)})}_t(e){const t=e.targetId,n=e.$.count,r=this.wt(t);if(r){const e=r.target;if(Uu(e))if(0===n){const n=new Kc(e.path);this.ct(t,n,vu.newNoDocument(n,Ec.min()))}else oc(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((n,r)=>{const i=this.wt(r);if(i){if(n.current&&Uu(i.target)){const t=new Kc(i.target.path);null!==this.it.get(t)||this.It(r,t)||this.ct(r,t,vu.newNoDocument(t,e))}n.j&&(t.set(r,n.H()),n.J())}});let n=uh();this.rt.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.wt(e);return!t||2===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.it.forEach((t,n)=>n.setReadTime(e));const r=new dh(e,t,this.ot,this.it,n);return this.it=rh(),this.rt=_h(),this.ot=new Pu(Sc),r}at(e,t){if(!this.ft(e))return;const n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,n){if(!this.ft(e))return;const r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new yh,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Pu(Sc),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||tc("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new yh),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function _h(){return new xu(Kc.comparator)}function bh(){return new xu(Kc.comparator)}const wh={asc:"ASCENDING",desc:"DESCENDING"},Sh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Th{constructor(e,t){this.databaseId=e,this.N=t}}function Ih(e,t){return e.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function kh(e,t){return e.N?t.toBase64():t.toUint8Array()}function Eh(e,t){return Ih(e,t.toTimestamp())}function Ch(e){return oc(!!e),Ec.fromTimestamp(function(e){const t=Zc(e);return new kc(t.seconds,t.nanos)}(e))}function xh(e,t){return function(e){return new Pc(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Ah(e){const t=Pc.fromString(e);return oc(Yh(t)),t}function Dh(e,t){return xh(e.databaseId,t.path)}function Ph(e,t){const n=Ah(t);if(n.get(1)!==e.databaseId.projectId)throw new uc(cc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new uc(cc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Kc(Lh(n))}function Rh(e,t){return xh(e.databaseId,t)}function Nh(e){const t=Ah(e);return 4===t.length?Pc.emptyPath():Lh(t)}function Oh(e){return new Pc(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Lh(e){return oc(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Mh(e,t,n){return{name:Dh(e,t),fields:n.value.mapValue.fields}}function Zh(e,t,n){const r=Ph(e,t.name),i=Ch(t.updateTime),s=new mu({mapValue:{fields:t.fields}}),o=vu.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Uh(e,t){let n;if(t instanceof Bl)n={update:Mh(e,t.key,t.value)};else if(t instanceof Kl)n={delete:Dh(e,t.key)};else if(t instanceof $l)n={update:Mh(e,t.key,t.data),updateMask:Jh(t.fieldMask)};else{if(!(t instanceof Wl))return sc();n={verify:Dh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof kl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof El)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof xl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Dl)return{fieldPath:t.field.canonicalString(),increment:n.k};throw sc()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Eh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:sc()}(e,t.precondition)),n}function Fh(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Ll.updateTime(Ch(e.updateTime)):void 0!==e.exists?Ll.exists(e.exists):Ll.none()}(t.currentDocument):Ll.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;"setToServerValue"in t?(oc("REQUEST_TIME"===t.setToServerValue),n=new kl):"appendMissingElements"in t?n=new El(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new xl(t.removeAllFromArray.values||[]):"increment"in t?n=new Dl(e,t.increment):sc();const r=Nc.fromServerFormat(t.fieldPath);return new Nl(r,n)}(e,t)):[];if(t.update){const i=Ph(e,t.update.name),s=new mu({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){return new Oc((e.fieldPaths||[]).map(e=>Nc.fromServerFormat(e)))}(t.updateMask);return new $l(i,s,e,n,r)}return new Bl(i,s,n,r)}if(t.delete){const r=Ph(e,t.delete);return new Kl(r,n)}if(t.verify){const r=Ph(e,t.verify);return new Wl(r,n)}return sc()}function qh(e,t){return{documents:[Rh(e,t.path)]}}function Vh(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Rh(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Rh(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map(e=>function(e){if("=="===e.op){if(cu(e.value))return{unaryFilter:{field:zh(e.field),op:"IS_NAN"}};if(au(e.value))return{unaryFilter:{field:zh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(cu(e.value))return{unaryFilter:{field:zh(e.field),op:"IS_NOT_NAN"}};if(au(e.value))return{unaryFilter:{field:zh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zh(e.field),op:Hh(e.op),value:e.value}}}(e));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:zh(e.field),direction:$h(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(e,t){return e.N||Hc(t)?t:{value:t}}(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function jh(e){let t=Nh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){oc(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=Bh(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>function(e){return new Qu(Gh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Hc(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){return new Yu(e.values||[],!!e.before)}(n.startAt));let u=null;return n.endAt&&(u=function(e){return new Yu(e.values||[],!e.before)}(n.endAt)),rl(t,i,o,s,a,"F",c,u)}function Bh(e){return e?void 0!==e.unaryFilter?[Wh(e)]:void 0!==e.fieldFilter?[Kh(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(e=>Bh(e)).reduce((e,t)=>e.concat(t)):sc():[]}function $h(e){return wh[e]}function Hh(e){return Sh[e]}function zh(e){return{fieldPath:e.canonicalString()}}function Gh(e){return Nc.fromServerFormat(e.fieldPath)}function Kh(e){return ju.create(Gh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return sc()}}(e.fieldFilter.op),e.fieldFilter.value)}function Wh(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Gh(e.unaryFilter.field);return ju.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Gh(e.unaryFilter.field);return ju.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Gh(e.unaryFilter.field);return ju.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Gh(e.unaryFilter.field);return ju.create(i,"!=",{nullValue:"NULL_VALUE"});default:return sc()}}function Jh(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Yh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Qh(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ed(t)),t=Xh(e.get(n),t);return ed(t)}function Xh(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function ed(e){return e+"\x01\x01"}function td(e){const t=e.length;if(oc(t>=2),2===t)return oc("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Pc.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&sc(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:sc()}s=t+2}return new Pc(r)}const nd=["userId","batchId"];function rd(e,t){return[e,Qh(t)]}function id(e,t,n){return[e,Qh(t),n]}const sd={},od=["prefixPath","collectionGroup","readTime","documentId"],ad=["prefixPath","collectionGroup","documentId"],cd=["collectionGroup","readTime","prefixPath","documentId"],ud=["canonicalId","targetId"],ld=["targetId","path"],hd=["path","targetId"],dd=["collectionId","parent"],pd=["indexId","uid"],fd=["uid","sequenceNumber"],gd=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],md=["indexId","uid","orderedDocumentKey"],yd=["userId","collectionPath","documentId"],vd=["userId","collectionPath","largestBatchId"],_d=["userId","collectionGroup","largestBatchId"],bd=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],wd=[...bd,"documentOverlays"],Sd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Td=[...Sd,"indexConfiguration","indexState","indexEntries"],Id="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Ed{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&sc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ed((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ed?t:Ed.resolve(t)}catch(e){return Ed.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ed.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ed.reject(t)}static resolve(e){return new Ed((t,n)=>{t(e)})}static reject(e){return new Ed((t,n)=>{n(e)})}static waitFor(e){return new Ed((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Ed.resolve(!1);for(const n of e)t=t.next(e=>e?Ed.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}}class Cd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new lc,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Dd(e,t.error)):this.At.resolve()},this.transaction.onerror=t=>{const n=Ld(t.target.error);this.At.reject(new Dd(e,n))}}static open(e,t,n,r){try{return new Cd(t,e.transaction(r,n))}catch(e){throw new Dd(t,e)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(tc("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Rd(t)}}class xd{constructor(e,t,n){this.name=e,this.version=t,this.Pt=n,12.2===xd.Vt((0,Nt.z$)())&&nc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return tc("SimpleDb","Removing database:",e),Nd(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Nt.hl)())return!1;if(xd.St())return!0;const e=(0,Nt.z$)(),t=xd.Vt(e),n=0<t&&t<10,r=xd.Dt(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}Nt(e){var t=this;return(0,Ut.Z)(function*(){return t.db||(tc("SimpleDb","Opening database:",t.name),t.db=yield new Promise((n,r)=>{const i=indexedDB.open(t.name,t.version);i.onsuccess=e=>{n(e.target.result)},i.onblocked=()=>{r(new Dd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=t=>{const n=t.target.error;r("VersionError"===n.name?new uc(cc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new uc(cc.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new Dd(e,n))},i.onupgradeneeded=e=>{tc("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',e.oldVersion),t.Pt.kt(e.target.result,i.transaction,e.oldVersion,t.version).next(()=>{tc("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=e=>t.Mt(e)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,n,r){var i=this;return(0,Ut.Z)(function*(){const s="readonly"===t;let o=0;for(;;){++o;try{i.db=yield i.Nt(e);const t=Cd.open(i.db,e,s?"readonly":"readwrite",n),o=r(t).next(e=>(t.bt(),e)).catch(e=>(t.abort(e),Ed.reject(e))).toPromise();return o.catch(()=>{}),yield t.Rt,o}catch(e){const n="FirebaseError"!==e.name&&o<3;if(tc("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),i.close(),!n)return Promise.reject(e)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ad{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Nd(this.Ft.delete())}}class Dd extends uc{constructor(e,t){super(cc.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Pd(e){return"IndexedDbTransactionError"===e.name}class Rd{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(tc("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(tc("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Nd(n)}add(e){return tc("SimpleDb","ADD",this.store.name,e,e),Nd(this.store.add(e))}get(e){return Nd(this.store.get(e)).next(t=>(void 0===t&&(t=null),tc("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return tc("SimpleDb","DELETE",this.store.name,e),Nd(this.store.delete(e))}count(){return tc("SimpleDb","COUNT",this.store.name),Nd(this.store.count())}qt(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.Kt(e,(e,n)=>{t.push(n)}).next(()=>t)}{const e=this.store.getAll(n.range);return new Ed((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}}Gt(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Ed((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}Qt(e,t){tc("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.jt=!1;const r=this.cursor(n);return this.Kt(r,(e,t,n)=>n.delete())}Wt(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Kt(r,t)}zt(e){const t=this.cursor({});return new Ed((n,r)=>{t.onerror=e=>{const t=Ld(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}Kt(e,t){const n=[];return new Ed((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Ad(i),o=t(i.primaryKey,i.value,s);if(o instanceof Ed){const e=o.catch(e=>(s.done(),Ed.reject(e)));n.push(e)}s.isDone?r():null===s.Lt?i.continue():i.continue(s.Lt)}}).next(()=>Ed.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Nd(e){return new Ed((t,n)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{const t=Ld(e.target.error);n(t)}})}let Od=!1;function Ld(e){const t=xd.Vt((0,Nt.z$)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new uc("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Od||(Od=!0,setTimeout(()=>{throw e},0)),e}}return e}class Md extends kd{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Zd(e,t){const n=ac(e);return xd.xt(n.Ht,t)}class Ud{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ul(t,e,n[r])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Fl(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Fl(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const n=e.get(t.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(Ec.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),uh())}isEqual(e){return this.batchId===e.batchId&&Tc(this.mutations,e.mutations,(e,t)=>Vl(e,t))&&Tc(this.baseMutations,e.baseMutations,(e,t)=>Vl(e,t))}}class Fd{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){oc(e.mutations.length===n.length);let r=ah;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Fd(e,t,n,r)}}class qd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Vd{constructor(e,t,n,r,i=Ec.min(),s=Ec.min(),o=Lc.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new Vd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Vd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Vd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class jd{constructor(e){this.Jt=e}}function Bd(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:$d(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Dh(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Ih(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Hd(t.version)};else{if(!t.isUnknownDocument())return sc();r.unknownDocument={path:n.path.toArray(),version:Hd(t.version)}}return r}function $d(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Hd(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function zd(e){const t=new kc(e.seconds,e.nanoseconds);return Ec.fromTimestamp(t)}function Gd(e,t){const n=(t.baseMutations||[]).map(t=>Fh(e.Jt,t));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(e.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const r=t.mutations.map(t=>Fh(e.Jt,t)),i=kc.fromMillis(t.localWriteTimeMs);return new Ud(t.batchId,i,n,r)}function Kd(e){const t=zd(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?zd(e.lastLimboFreeSnapshotVersion):Ec.min();let r;var i;return void 0!==e.query.documents?(oc(1===(i=e.query).documents.length),r=ul(il(Nh(i.documents[0])))):r=function(e){return ul(jh(e))}(e.query),new Vd(r,e.targetId,0,e.lastListenSequenceNumber,t,n,Lc.fromBase64String(e.resumeToken))}function Wd(e,t){const n=Hd(t.snapshotVersion),r=Hd(t.lastLimboFreeSnapshotVersion);let i;i=Uu(t.target)?qh(e.Jt,t.target):Vh(e.Jt,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Mu(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Jd(e){const t=jh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ll(t,t.limit,"L"):t}function Yd(e,t){return new qd(t.largestBatchId,Fh(e.Jt,t.overlayMutation))}function Qd(e,t){const n=t.path.lastSegment();return[e,Qh(t.path.popLast()),n]}class Xd{getBundleMetadata(e,t){return ep(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:zd(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return ep(e).put({bundleId:(n=t).id,createTime:Hd(Ch(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return tp(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:Jd(t.bundledQuery),readTime:zd(t.readTime)};var t})}saveNamedQuery(e,t){return tp(e).put(function(e){return{name:e.name,readTime:Hd(Ch(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function ep(e){return Zd(e,"bundles")}function tp(e){return Zd(e,"namedQueries")}class np{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new np(e,t.uid||"")}getOverlay(e,t){return rp(e).get(Qd(this.userId,t)).next(e=>e?Yd(this.M,e):null)}saveOverlays(e,t,n){const r=[];return n.forEach((n,i)=>{const s=new qd(t,i);r.push(this.Xt(e,s))}),Ed.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(Qh(e.getCollectionPath())));const i=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(rp(e).Qt("collectionPathOverlayIndex",r))}),Ed.waitFor(i)}getOverlaysForCollection(e,t,n){const r=oh(),i=Qh(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return rp(e).qt("collectionPathOverlayIndex",s).next(e=>{for(const t of e){const e=Yd(this.M,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const i=oh();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return rp(e).Wt({index:"collectionGroupOverlayIndex",range:o},(e,t,n)=>{const o=Yd(this.M,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()}).next(()=>i)}Xt(e,t){return rp(e).put(function(e,t,n){const[r,i,s]=Qd(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Uh(e.Jt,n.mutation)}}(this.M,this.userId,t))}}function rp(e){return Zd(e,"documentOverlays")}class ip{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Uc(e.integerValue));else if("doubleValue"in e){const n=Uc(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),zc(n)?t.se(0):t.se(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ne(t,20),"string"==typeof n?t.ie(n):(t.ie(`${n.seconds||""}`),t.se(n.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Fc(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ne(t,45),t.se(n.latitude||0),t.se(n.longitude||0)}else"mapValue"in e?hu(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):sc()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const n=e.fields||{};this.ne(t,55);for(const r of Object.keys(n))this.re(r,t),this.te(n[r],t)}he(e,t){const n=e.values||[];this.ne(t,50);for(const r of n)this.te(r,t)}ae(e,t){this.ne(t,37),Kc.fromName(e).path.forEach(e=>{this.ne(t,60),this.le(e,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function sp(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function op(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=sp(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}ip.fe=new ip;class ap{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this._e(n.value),n=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.ge(n.value),n=t.next();this.ye()}pe(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this._e(e);else if(e<2048)this._e(960|e>>>6),this._e(128|63&e);else if(t<"\ud800"||"\udbff"<t)this._e(480|e>>>12),this._e(128|63&e>>>6),this._e(128|63&e);else{const e=t.codePointAt(0);this._e(240|e>>>18),this._e(128|63&e>>>12),this._e(128|63&e>>>6),this._e(128|63&e)}}this.we()}Ie(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.ge(e);else if(e<2048)this.ge(960|e>>>6),this.ge(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.ge(480|e>>>12),this.ge(128|63&e>>>6),this.ge(128|63&e);else{const e=t.codePointAt(0);this.ge(240|e>>>18),this.ge(128|63&e>>>12),this.ge(128|63&e>>>6),this.ge(128|63&e)}}this.ye()}Te(e){const t=this.Ee(e),n=op(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Re(e){const t=this.Ee(e),n=op(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class cp{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class up{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class lp{constructor(){this.De=new ap,this.Ce=new cp(this.De),this.xe=new up(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class hp{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new hp(this.indexId,this.documentKey,this.arrayValue,n)}}function dp(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=pp(e.arrayValue,t.arrayValue),0!==n?n:(n=pp(e.directionalValue,t.directionalValue),0!==n?n:Kc.comparator(e.documentKey,t.documentKey)))}function pp(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class fp{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const e=t;e.S()?this.Fe=e:this.Oe.push(e)}}$e(e){const t=bu(e);if(void 0!==t&&!this.Be(t))return!1;const n=wu(e);let r=0,i=0;for(;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){const e=n[r];if(!this.Le(this.Fe,e)||!this.Ue(this.Me[i++],e))return!1;++r}for(;r<n.length;++r){const e=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],e))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class gp{constructor(){this.qe=new mp}addToCollectionParentIndex(e,t){return this.qe.add(t),Ed.resolve()}getCollectionParents(e,t){return Ed.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return Ed.resolve()}deleteFieldIndex(e,t){return Ed.resolve()}getDocumentsMatchingTarget(e,t){return Ed.resolve(null)}getIndexType(e,t){return Ed.resolve(0)}getFieldIndexes(e,t){return Ed.resolve([])}getNextCollectionGroupToUpdate(e){return Ed.resolve(null)}getMinOffset(e,t){return Ed.resolve(Eu.min())}updateCollectionGroup(e,t,n){return Ed.resolve()}updateIndexEntries(e,t){return Ed.resolve()}}class mp{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Pu(Pc.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Pu(Pc.comparator)).toArray()}}const yp=new Uint8Array(0);class vp{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new mp,this.Ge=new th(e=>Mu(e),(e,t)=>Zu(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const i={collectionId:n,parent:Qh(r)};return _p(e).put(i)}return Ed.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Ic(t),""],!1,!0);return _p(e).qt(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(td(r.parent))}return n})}addFieldIndex(e,t){const n=wp(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);return delete r.indexId,n.add(r).next()}deleteFieldIndex(e,t){const n=wp(e),r=Sp(e),i=bp(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const n=bp(e);let r=!0;const i=new Map;return Ed.forEach(this.Qe(t),t=>this.je(e,t).next(e=>{r&&(r=!!e),i.set(t,e)})).next(()=>{if(r){let e=uh();const r=[];return Ed.forEach(i,(i,s)=>{var o;tc("IndexedDbIndexManager",`Using index ${o=i,`id=${o.indexId}|cg=${o.collectionGroup}|f=${o.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")}`} to execute ${Mu(t)}`);const a=function(e,t){const n=bu(t);if(void 0===n)return null;for(const r of Fu(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),c=function(e,t){const n=new Map;for(const r of wu(t))for(const t of Fu(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of wu(t)){const t=0===i.kind?qu(e,i.fieldPath,e.startAt):Vu(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Yu(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of wu(t)){const t=0===i.kind?Vu(e,i.fieldPath,e.endAt):qu(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Yu(n,r)}(s,i),h=this.We(i,s,u),d=this.We(i,s,l),p=this.ze(i,s,c),f=this.He(i.indexId,a,h,u.inclusive,d,l.inclusive,p);return Ed.forEach(f,i=>n.Gt(i,t.limit).next(t=>{t.forEach(t=>{const n=Kc.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return Ed.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),u=[];for(let l=0;l<a;++l){const a=t?this.Je(t[l/c]):yp,h=this.Ye(e,a,n[l%c],r),d=this.Xe(e,a,i[l%c],s),p=o.map(t=>this.Ye(e,a,t,!0));u.push(...this.createRange(h,d,p))}return u}Ye(e,t,n,r){const i=new hp(e,Kc.empty(),t,n);return r?i:i.ke()}Xe(e,t,n,r){const i=new hp(e,Kc.empty(),t,n);return r?i.ke():i}je(e,t){const n=new fp(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)n.$e(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2;return Ed.forEach(this.Qe(t),t=>this.je(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new Pu(Nc.comparator),n=!1;for(const r of e.filters){const e=r;e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field))}for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>n)}Ze(e,t){const n=new lp;for(const r of wu(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ne(r.kind);ip.fe.Zt(e,i)}return n.Se()}Je(e){const t=new lp;return ip.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const n=new lp;return ip.fe.Zt(iu(this.databaseId,t),n.Ne(function(e){const t=wu(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}ze(e,t,n){if(null===n)return[];let r=[];r.push(new lp);let i=0;for(const s of wu(e)){const e=n[i++];for(const n of r)if(this.en(t,s.fieldPath)&&ou(e))r=this.nn(r,s,e);else{const t=n.Ne(s.kind);ip.fe.Zt(e,t)}}return this.sn(r)}We(e,t,n){return this.ze(e,t,n.position)}sn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Se();return t}nn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new lp;n.seed(e.Se()),ip.fe.Zt(s,n.Ne(t.kind)),i.push(n)}return i}en(e,t){return!!e.filters.find(e=>e instanceof ju&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=wp(e),r=Sp(e);return(t?n.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.qt()).next(e=>{const t=[];return Ed.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new Tu(t.sequenceNumber,new Eu(zd(t.readTime),new Kc(td(t.documentKey)),t.largestBatchId)):Tu.empty(),r=e.fields.map(([e,t])=>new Su(Nc.fromServerFormat(e),t));return new _u(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Sc(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=wp(e),i=Sp(e);return this.rn(e).next(e=>r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(t=>Ed.forEach(t,t=>i.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Hd(r.readTime),documentKey:Qh(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,this.user,e,n)))))}updateIndexEntries(e,t){const n=new Map;return Ed.forEach(t,(t,r)=>{const i=n.get(t.collectionGroup);return(i?Ed.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next(i=>(n.set(t.collectionGroup,i),Ed.forEach(i,n=>this.on(e,t,n).next(t=>{const i=this.un(r,n);return t.isEqual(i)?Ed.resolve():this.an(e,r,n,t,i)}))))})}cn(e,t,n,r){return bp(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}hn(e,t,n,r){return bp(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}on(e,t,n){const r=bp(e);let i=new Pu(dp);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(e,r)=>{i=i.add(new hp(n.indexId,t,r.arrayValue,r.directionalValue))}).next(()=>i)}un(e,t){let n=new Pu(dp);const r=this.Ze(t,e);if(null==r)return n;const i=bu(t);if(null!=i){const s=e.data.field(i.fieldPath);if(ou(s))for(const i of s.arrayValue.values||[])n=n.add(new hp(t.indexId,e.key,this.Je(i),r))}else n=n.add(new hp(t.indexId,e.key,yp,r));return n}an(e,t,n,r,i){tc("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=Nu(s),c=Nu(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=Nu(o)):t?(i(a),a=Nu(s)):(a=Nu(s),c=Nu(o))}}(r,i,dp,r=>{s.push(this.cn(e,t,n,r))},r=>{s.push(this.hn(e,t,n,r))}),Ed.waitFor(s)}rn(e){let t=1;return Sp(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>dp(e,t)).filter((e,t,n)=>!t||0!==dp(e,n[t-1]));const r=[];r.push(e);for(const s of n){const n=dp(s,e),i=dp(s,t);if(0===n)r[0]=e.ke();else if(n>0&&i<0)r.push(s),r.push(s.ke());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2)i.push(IDBKeyRange.bound([r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,yp,[]],[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,yp,[]]));return i}getMinOffset(e,t){let n;return Ed.forEach(this.Qe(t),t=>this.je(e,t).next(e=>{e?(!n||Cu(e.indexState.offset,n)<0)&&(n=e.indexState.offset):n=Eu.min()})).next(()=>n)}}function _p(e){return Zd(e,"collectionParents")}function bp(e){return Zd(e,"indexEntries")}function wp(e){return Zd(e,"indexConfiguration")}function Sp(e){return Zd(e,"indexState")}const Tp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ip{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Ip(e,Ip.DEFAULT_COLLECTION_PERCENTILE,Ip.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function kp(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.Wt({range:o},(e,t,n)=>(a++,n.delete()));s.push(c.next(()=>{oc(1===a)}));const u=[];for(const l of n.mutations){const e=id(t,l.key.path,n.batchId);s.push(i.delete(e)),u.push(l.key)}return Ed.waitFor(s).next(()=>u)}function Ep(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw sc();t=e.noDocument}return JSON.stringify(t).length}Ip.DEFAULT_COLLECTION_PERCENTILE=10,Ip.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ip.DEFAULT=new Ip(41943040,Ip.DEFAULT_COLLECTION_PERCENTILE,Ip.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ip.DISABLED=new Ip(-1,0,0);class Cp{constructor(e,t,n,r){this.userId=e,this.M=t,this.indexManager=n,this.referenceDelegate=r,this.ln={}}static Yt(e,t,n,r){oc(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Cp(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ap(e).Wt({index:"userMutationsIndex",range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const i=Dp(e),s=Ap(e);return s.add({}).next(o=>{oc("number"==typeof o);const a=new Ud(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map(t=>Uh(e.Jt,t)),i=n.mutations.map(t=>Uh(e.Jt,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.M,this.userId,a),u=[];let l=new Pu((e,t)=>Sc(e.canonicalString(),t.canonicalString()));for(const e of r){const t=id(this.userId,e.key.path,o);l=l.add(e.key.path.popLast()),u.push(s.put(c)),u.push(i.put(t,sd))}return l.forEach(t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.ln[o]=a.keys()}),Ed.waitFor(u).next(()=>a)})}lookupMutationBatch(e,t){return Ap(e).get(t).next(e=>e?(oc(e.userId===this.userId),Gd(this.M,e)):null)}fn(e,t){return this.ln[t]?Ed.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.ln[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Ap(e).Wt({index:"userMutationsIndex",range:r},(e,t,r)=>{t.userId===this.userId&&(oc(t.batchId>=n),i=Gd(this.M,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Ap(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ap(e).qt("userMutationsIndex",t).next(e=>e.map(e=>Gd(this.M,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=rd(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Dp(e).Wt({range:r},(n,r,s)=>{const[o,a,c]=n,u=td(a);if(o===this.userId&&t.path.isEqual(u))return Ap(e).get(c).next(e=>{if(!e)throw sc();oc(e.userId===this.userId),i.push(Gd(this.M,e))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Pu(Sc);const r=[];return t.forEach(t=>{const i=rd(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Dp(e).Wt({range:s},(e,r,i)=>{const[s,o,a]=e,c=td(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()});r.push(o)}),Ed.waitFor(r).next(()=>this.dn(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=rd(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Pu(Sc);return Dp(e).Wt({range:s},(e,t,i)=>{const[s,a,c]=e,u=td(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(c)):i.done()}).next(()=>this.dn(e,o))}dn(e,t){const n=[],r=[];return t.forEach(t=>{r.push(Ap(e).get(t).next(e=>{if(null===e)throw sc();oc(e.userId===this.userId),n.push(Gd(this.M,e))}))}),Ed.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return kp(e.Ht,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),Ed.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ed.resolve();const n=IDBKeyRange.lowerBound([this.userId]),r=[];return Dp(e).Wt({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=td(e[1]);r.push(t)}else n.done()}).next(()=>{oc(0===r.length)})})}containsKey(e,t){return xp(e,this.userId,t)}wn(e){return Pp(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function xp(e,t,n){const r=rd(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Dp(e).Wt({range:s,jt:!0},(e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()}).next(()=>o)}function Ap(e){return Zd(e,"mutations")}function Dp(e){return Zd(e,"documentMutations")}function Pp(e){return Zd(e,"mutationQueues")}class Rp{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Rp(0)}static yn(){return new Rp(-1)}}class Np{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const n=new Rp(t.highestTargetId);return t.highestTargetId=n.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(e=>Ec.fromTimestamp(new kc(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.pn(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.In(e,r)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(n=>(n.targetCount+=1,this.En(t,n),this.In(e,n))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Op(e).delete(t.targetId)).next(()=>this.pn(e)).next(t=>(oc(t.targetCount>0),t.targetCount-=1,this.In(e,t)))}removeTargets(e,t,n){let r=0;const i=[];return Op(e).Wt((s,o)=>{const a=Kd(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))}).next(()=>Ed.waitFor(i)).next(()=>r)}forEachTarget(e,t){return Op(e).Wt((e,n)=>{const r=Kd(n);t(r)})}pn(e){return Lp(e).get("targetGlobalKey").next(e=>(oc(null!==e),e))}In(e,t){return Lp(e).put("targetGlobalKey",t)}Tn(e,t){return Op(e).put(Wd(this.M,t))}En(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.pn(e).next(e=>e.targetCount)}getTargetData(e,t){const n=Mu(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Op(e).Wt({range:r,index:"queryTargetsIndex"},(e,n,r)=>{const s=Kd(n);Zu(t,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){const r=[],i=Mp(e);return t.forEach(t=>{const s=Qh(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))}),Ed.waitFor(r)}removeMatchingKeys(e,t,n){const r=Mp(e);return Ed.forEach(t,t=>{const i=Qh(t.path);return Ed.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=Mp(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Mp(e);let i=uh();return r.Wt({range:n,jt:!0},(e,t,n)=>{const r=td(e[1]),s=new Kc(r);i=i.add(s)}).next(()=>i)}containsKey(e,t){const n=Qh(t.path),r=IDBKeyRange.bound([n],[Ic(n)],!1,!0);let i=0;return Mp(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},([e,t],n,r)=>{0!==e&&(i++,r.done())}).next(()=>i>0)}Et(e,t){return Op(e).get(t).next(e=>e?Kd(e):null)}}function Op(e){return Zd(e,"targets")}function Lp(e){return Zd(e,"targetGlobal")}function Mp(e){return Zd(e,"targetDocuments")}function Zp(e){return Up.apply(this,arguments)}function Up(){return(Up=(0,Ut.Z)(function*(e){if(e.code!==cc.FAILED_PRECONDITION||e.message!==Id)throw e;tc("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function Fp([e,t],[n,r]){const i=Sc(e,n);return 0===i?Sc(t,r):i}class qp{constructor(e){this.An=e,this.buffer=new Pu(Fp),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Fp(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Vp{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const n=this.Vn?3e5:6e4;tc("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,Ut.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(e){Pd(e)?tc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):yield Zp(e)}yield t.Sn(e)}))}}class jp{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Ed.resolve(_c.A);const n=new qp(t);return this.Dn.forEachTarget(e,e=>n.Pn(e.sequenceNumber)).next(()=>this.Dn.xn(e,e=>n.Pn(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Dn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(tc("LruGarbageCollector","Garbage collection skipped; disabled"),Ed.resolve(Tp)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(tc("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Tp):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let n,r,i,s,o,a,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(tc("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),ec()<=Lt.in.DEBUG&&tc("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(c-a)+"ms\n"+`Total Duration: ${c-u}ms`),Ed.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}class Bp{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new jp(e,t)}(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}kn(e){let t=0;return this.xn(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(e,n)=>t(n))}addReference(e,t,n){return $p(e,n)}removeReference(e,t,n){return $p(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return $p(e,t)}On(e,t){return function(e,t){let n=!1;return Pp(e).zt(r=>xp(e,r,t).next(e=>(e&&(n=!0),Ed.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Mn(e,(s,o)=>{if(o<=t){const t=this.On(e,s).next(t=>{if(!t)return i++,n.getEntry(e,s).next(()=>(n.removeEntry(s,Ec.min()),Mp(e).delete([0,Qh(s.path)])))});r.push(t)}}).next(()=>Ed.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return $p(e,t)}Mn(e,t){const n=Mp(e);let r,i=_c.A;return n.Wt({index:"documentTargetsIndex"},([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==_c.A&&t(new Kc(td(r)),i),i=o,r=s):i=_c.A}).next(()=>{i!==_c.A&&t(new Kc(td(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $p(e,t){return Mp(e).put(function(e,t){return{targetId:0,path:Qh(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Hp{constructor(){this.changes=new th(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vu.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ed.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zp{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Wp(e).put(n)}removeEntry(e,t,n){return Wp(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],$d(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Fn(e,n)))}getEntry(e,t){let n=vu.newInvalidDocument(t);return Wp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Jp(t))},(e,r)=>{n=this.$n(t,r)}).next(()=>n)}Bn(e,t){let n={size:0,document:vu.newInvalidDocument(t)};return Wp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Jp(t))},(e,r)=>{n={document:this.$n(t,r),size:Ep(r)}}).next(()=>n)}getEntries(e,t){let n=rh();return this.Ln(e,t,(e,t)=>{const r=this.$n(e,t);n=n.insert(e,r)}).next(()=>n)}Un(e,t){let n=rh(),r=new xu(Kc.comparator);return this.Ln(e,t,(e,t)=>{const i=this.$n(e,t);n=n.insert(e,i),r=r.insert(e,Ep(t))}).next(()=>({documents:n,qn:r}))}Ln(e,t,n){if(t.isEmpty())return Ed.resolve();let r=new Pu(Qp);t.forEach(e=>r=r.add(e));const i=IDBKeyRange.bound(Jp(r.first()),Jp(r.last())),s=r.getIterator();let o=s.getNext();return Wp(e).Wt({index:"documentKeyIndex",range:i},(e,t,r)=>{const i=Kc.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Qp(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.Ut(Jp(o)):r.done()}).next(()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null})}getAllFromCollection(e,t,n){const r=[t.popLast().toArray(),t.lastSegment(),$d(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],i=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wp(e).qt(IDBKeyRange.bound(r,i,!0)).next(e=>{let t=rh();for(const n of e){const e=this.$n(Kc.fromSegments(n.prefixPath.concat(n.collectionGroup,n.documentId)),n);t=t.insert(e.key,e)}return t})}getAllFromCollectionGroup(e,t,n,r){let i=rh();const s=Yp(t,n),o=Yp(t,Eu.max());return Wp(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},(e,t,n)=>{const s=this.$n(Kc.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()}).next(()=>i)}newChangeBuffer(e){return new Gp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return Kp(e).get("remoteDocumentGlobalKey").next(e=>(oc(!!e),e))}Fn(e,t){return Kp(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Zh(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Kc.fromSegments(t.noDocument.path),r=zd(t.noDocument.readTime);n=vu.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return sc();{const e=Kc.fromSegments(t.unknownDocument.path),r=zd(t.unknownDocument.version);n=vu.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new kc(e[0],e[1]);return Ec.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!e.isNoDocument()||!e.version.isEqual(Ec.min()))return e}return vu.newInvalidDocument(e)}}class Gp extends Hp{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new th(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new Pu((e,t)=>Sc(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{const o=this.Gn.get(i);if(t.push(this.Kn.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Bd(this.Kn.M,s);r=r.add(i.path.popLast());const c=Ep(a);n+=c-o.size,t.push(this.Kn.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Bd(this.Kn.M,s.convertToNoDocument(Ec.min()));t.push(this.Kn.addEntry(e,i,n))}}),r.forEach(n=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.Kn.updateMetadata(e,n)),Ed.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(e=>(this.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:e,qn:t})=>(t.forEach((t,n)=>{this.Gn.set(t,{size:n,readTime:e.get(t).readTime})}),e))}}function Kp(e){return Zd(e,"remoteDocumentGlobal")}function Wp(e){return Zd(e,"remoteDocumentsV14")}function Jp(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Yp(e,t){const n=t.documentKey.path.toArray();return[e,$d(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Qp(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Sc(n[s],r[s]),i)return i;return i=Sc(n.length,r.length),i||(i=Sc(n[n.length-2],r[r.length-2]),i||Sc(n[n.length-1],r[r.length-1]))}class Xp{constructor(e){this.M=e}kt(e,t,n,r){const i=new Cd("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nd,{unique:!0}),e.createObjectStore("documentMutations")}(e),ef(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=Ed.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),ef(e)),s=s.next(()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ec.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i))),n<4&&r>=4&&(0!==n&&(s=s.next(()=>function(e,t){return t.store("mutations").qt().next(n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nd,{unique:!0});const r=t.store("mutations"),i=n.map(e=>r.put(e));return Ed.waitFor(i)})}(e,i))),s=s.next(()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(s=s.next(()=>this.Qn(i))),n<6&&r>=6&&(s=s.next(()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.jn(i)))),n<7&&r>=7&&(s=s.next(()=>this.Wn(i))),n<8&&r>=8&&(s=s.next(()=>this.zn(e,i))),n<9&&r>=9&&(s=s.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(s=s.next(()=>this.Hn(i))),n<11&&r>=11&&(s=s.next(()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&r>=12&&(s=s.next(()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:yd});t.createIndex("collectionPathOverlayIndex",vd,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",_d,{unique:!1})}(e)})),n<13&&r>=13&&(s=s.next(()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:od});t.createIndex("documentKeyIndex",ad),t.createIndex("collectionGroupIndex",cd)}(e)).next(()=>this.Jn(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&r>=14&&(s=s.next(()=>{!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:pd}).createIndex("sequenceNumberIndex",fd,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:gd}).createIndex("documentKeyIndex",md,{unique:!1})}(e)})),s}jn(e){let t=0;return e.store("remoteDocuments").Wt((e,n)=>{t+=Ep(n)}).next(()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}Qn(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.qt().next(t=>Ed.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.qt("userMutationsIndex",r).next(n=>Ed.forEach(n,n=>{oc(n.userId===t.userId);const r=Gd(this.M,n);return kp(e,t.userId,r).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(e=>{const r=[];return n.Wt((n,i)=>{const s=new Pc(n),o=function(e){return[0,Qh(e)]}(s);r.push(t.get(o).next(n=>n?Ed.resolve():(n=>t.put({targetId:0,path:Qh(n),sequenceNumber:e.highestListenSequenceNumber}))(s)))}).next(()=>Ed.waitFor(r))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:dd});const n=t.store("collectionParents"),r=new mp,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Qh(r)})}};return t.store("remoteDocuments").Wt({jt:!0},(e,t)=>{const n=new Pc(e);return i(n.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([e,t,n],r)=>{const s=td(t);return i(s.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((e,n)=>{const r=Kd(n),i=Wd(this.M,r);return t.put(i)})}Jn(e,t){const n=t.store("remoteDocuments"),r=[];return n.Wt((e,n)=>{const i=t.store("remoteDocumentsV14"),s=(o=n,o.document?new Kc(Pc.fromString(o.document.name).popFirst(5)):o.noDocument?Kc.fromSegments(o.noDocument.path):o.unknownDocument?Kc.fromSegments(o.unknownDocument.path):sc()).path.toArray();var o;const a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))}).next(()=>Ed.waitFor(r))}}function ef(e){e.createObjectStore("targetDocuments",{keyPath:ld}).createIndex("documentTargetsIndex",hd,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ud,{unique:!0}),e.createObjectStore("targetGlobal")}const tf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class nf{constructor(e,t,n,r,i,s,o,a,c,u,l=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Yn=i,this.window=s,this.document=o,this.Xn=c,this.Zn=u,this.ts=l,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=e=>Promise.resolve(),!nf.vt())throw new uc(cc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Bp(this,r),this.hs=t+"main",this.M=new jd(a),this.ls=new xd(this.hs,this.ts,new Xp(this.M)),this.fs=new Np(this.referenceDelegate,this.M),this.ds=function(e){return new zp(e)}(this.M),this._s=new Xd,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===u&&nc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new uc(cc.FAILED_PRECONDITION,tf);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new _c(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var n=(0,Ut.Z)(function*(n){if(t.started)return e(n)});return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Ut.Z)(function*(t){null===t.newVersion&&(yield e())});return function(e){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ut.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>sf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(e=>{e||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Pd(e))return tc("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return tc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return rf(e).get("owner").next(e=>Ed.resolve(this.Ps(e)))}Vs(e){return sf(e).delete(this.clientId)}vs(){var e=this;return(0,Ut.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const n=Zd(t,"clientMetadata");return n.qt().next(t=>{const r=e.Ds(t,18e5),i=t.filter(e=>-1===r.indexOf(e));return Ed.forEach(i,e=>n.delete(e.clientId)).next(()=>i)})}).catch(()=>[]);if(e.ws)for(const n of t)e.ws.removeItem(e.Cs(n.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?Ed.resolve(!0):rf(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new uc(cc.FAILED_PRECONDITION,tf);return!1}}return!(!this.networkEnabled||!this.inForeground)||sf(e).qt().next(e=>void 0===this.Ds(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(!this.networkEnabled&&e.networkEnabled||t&&n)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&tc("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var e=this;return(0,Ut.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const n=new Md(t,_c.A);return e.Rs(n).next(()=>e.Vs(n))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(e=>this.Ss(e.updateTimeMs,t)&&!this.xs(e.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>sf(e).qt().next(e=>this.Ds(e,18e5).map(e=>e.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Cp.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new vp(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return np.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,n){tc("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=14===(s=this.ts)?Td:13===s?Sd:12===s?wd:11===s?bd:void sc();var s;let o;return this.ls.runTransaction(e,r,i,r=>(o=new Md(r,this.es?this.es.next():_c.A),"readwrite-primary"===t?this.Es(o).next(e=>!!e||this.As(o)).next(t=>{if(!t)throw nc(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new uc(cc.FAILED_PRECONDITION,Id);return n(o)}).next(e=>this.bs(o).next(()=>e)):this.$s(o).next(()=>n(o)))).then(e=>(o.raiseOnCommittedEvent(),e))}$s(e){return rf(e).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)&&!this.Ps(e)&&!(this.Zn||this.allowTabSynchronization&&e.allowTabSynchronization))throw new uc(cc.FAILED_PRECONDITION,tf)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return rf(e).put("owner",t)}static vt(){return xd.vt()}Rs(e){const t=rf(e);return t.get("owner").next(e=>this.Ps(e)?(tc("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ed.resolve())}Ss(e,t){const n=Date.now();return!(e<n-t||e>n&&(nc(`Detected an update time that is in the future: ${e} > ${n}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Nt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return tc("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return nc("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(ri){nc("Failed to set zombie client id.",ri)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(ri){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function rf(e){return Zd(e,"owner")}function sf(e){return Zd(e,"clientMetadata")}function of(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class af{constructor(e,t,n){this.ds=e,this.Bs=t,this.indexManager=n}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(n=>this.Us(e,t,n))}Us(e,t,n){return this.ds.getEntry(e,t).next(e=>{for(const t of n)t.applyToLocalView(e);return e})}qs(e,t){e.forEach((e,n)=>{for(const r of t)r.applyToLocalView(n)})}Ks(e,t){return this.ds.getEntries(e,t).next(t=>this.Gs(e,t).next(()=>t))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>this.qs(t,e))}Qs(e,t,n){return function(e){return Kc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):al(t)?this.Ws(e,t,n):this.zs(e,t,n)}js(e,t){return this.Ls(e,new Kc(t)).next(e=>{let t=sh();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}Ws(e,t,n){const r=t.collectionGroup;let i=sh();return this.indexManager.getCollectionParents(e,r).next(s=>Ed.forEach(s,s=>{const o=function(e,t){return new nl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.zs(e,o,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}zs(e,t,n){let r;return this.ds.getAllFromCollection(e,t.path,n).next(n=>(r=n,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(e=>{for(const t of e)for(const e of t.mutations){const n=e.key;let i=r.get(n);null==i&&(i=vu.newInvalidDocument(n),r=r.insert(n,i)),Fl(e,i,t.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}).next(()=>(r.forEach((e,n)=>{fl(t,n)||(r=r.remove(e))}),r))}}class cf{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Hs=n,this.Js=r}static Ys(e,t){let n=uh(),r=uh();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new cf(e,t.fromCache,n,r)}}class uf{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,n,r){return this.ti(e,t).next(i=>i||this.ei(e,t,r,n)).next(n=>n||this.ni(e,t))}ti(e,t){return Ed.resolve(null)}ei(e,t,n,r){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Ec.min())?this.ni(e,t):this.Zs.Ks(e,n).next(i=>{const s=this.si(t,i);return this.ii(t,s,n,r)?this.ni(e,t):(ec()<=Lt.in.DEBUG&&tc("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),pl(t)),this.ri(e,s,t,Iu(r,-1)))})}si(e,t){let n=new Pu(ml(e));return t.forEach((t,r)=>{fl(e,r)&&(n=n.add(r))}),n}ii(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ni(e,t){return ec()<=Lt.in.DEBUG&&tc("QueryEngine","Using full collection scan to execute query:",pl(t)),this.Zs.Qs(e,t,Eu.min())}ri(e,t,n,r){return this.Zs.Qs(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class lf{constructor(e,t,n,r){this.persistence=e,this.oi=t,this.M=r,this.ui=new xu(Sc),this.ai=new th(e=>Mu(e),Zu),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(n)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new af(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function hf(e,t,n,r){return new lf(e,t,n,r)}function df(e,t){return pf.apply(this,arguments)}function pf(){return(pf=(0,Ut.Z)(function*(e,t){const n=ac(e);return yield n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.Bs.getAllMutationBatches(e).next(i=>(r=i,n.li(t),n.Bs.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=uh();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.fi.Ks(e,o).next(e=>({di:e,removedBatchIds:i,addedBatchIds:s}))})})})).apply(this,arguments)}function ff(e,t){const n=ac(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.hi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Ed.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);oc(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.Bs.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.Bs.performConsistencyCheck(e)).next(()=>n.fi.Ks(e,r))})}function gf(e){const t=ac(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.fs.getLastRemoteSnapshotVersion(e))}function mf(e,t){const n=ac(e),r=t.snapshotVersion;let i=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.hi.newChangeBuffer({trackRemovals:!0});i=n.ui;const o=[];t.targetChanges.forEach((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.fs.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.fs.addMatchingKeys(e,s.addedDocuments,a)));let u=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(a)?u=u.withResumeToken(Lc.EMPTY_BYTE_STRING,Ec.min()).withLastLimboFreeSnapshotVersion(Ec.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,u,s)&&o.push(n.fs.updateTargetData(e,u))});let a=rh();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(yf(e,s,t.documentUpdates).next(e=>{a=e})),!r.isEqual(Ec.min())){const t=n.fs.getLastRemoteSnapshotVersion(e).next(t=>n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Ed.waitFor(o).next(()=>s.apply(e)).next(()=>n.fi.Gs(e,a)).next(()=>a)}).then(e=>(n.ui=i,e))}function yf(e,t,n){let r=uh();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=rh();return n.forEach((n,i)=>{const s=e.get(n);i.isNoDocument()&&i.version.isEqual(Ec.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!s.isValidDocument()||i.version.compareTo(s.version)>0||0===i.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):tc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",i.version)}),r})}function vf(e,t){const n=ac(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)))}function _f(e,t){const n=ac(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.fs.getTargetData(e,t).next(i=>i?(r=i,Ed.resolve(r)):n.fs.allocateTargetId(e).next(i=>(r=new Vd(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ui=n.ui.insert(e.targetId,e),n.ai.set(t,e.targetId)),e})}function bf(e,t,n){return wf.apply(this,arguments)}function wf(){return(wf=(0,Ut.Z)(function*(e,t,n){const r=ac(e),i=r.ui.get(t),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Pd(e))throw e;tc("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.ui=r.ui.remove(t),r.ai.delete(i.target)})).apply(this,arguments)}function Sf(e,t,n){const r=ac(e);let i=Ec.min(),s=uh();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=ac(e),i=r.ai.get(n);return void 0!==i?Ed.resolve(r.ui.get(i)):r.fs.getTargetData(t,n)}(r,e,ul(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.oi.Qs(e,t,n?i:Ec.min(),n?s:uh())).next(e=>(kf(r,gl(t),e),{documents:e,_i:s})))}function Tf(e,t){const n=ac(e),r=ac(n.fs),i=n.ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",e=>r.Et(e,t).next(e=>e?e.target:null))}function If(e,t){const n=ac(e),r=n.ci.get(t)||Ec.min();return n.persistence.runTransaction("Get new document changes","readonly",e=>n.hi.getAllFromCollectionGroup(e,t,Iu(r,-1),Number.MAX_SAFE_INTEGER)).then(e=>(kf(n,t,e),e))}function kf(e,t,n){let r=Ec.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.ci.set(t,r)}function Ef(){return(Ef=(0,Ut.Z)(function*(e,t,n,r){const i=ac(e);let s=uh(),o=rh();for(const u of n){const e=t.wi(u.metadata.name);u.document&&(s=s.add(e));const n=t.mi(u);n.setReadTime(t.gi(u.metadata.readTime)),o=o.insert(e,n)}const a=i.hi.newChangeBuffer({trackRemovals:!0}),c=yield _f(i,function(e){return ul(il(Pc.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>yf(e,a,o).next(t=>(a.apply(e),t)).next(t=>i.fs.removeMatchingKeysForTargetId(e,c.targetId).next(()=>i.fs.addMatchingKeys(e,s,c.targetId)).next(()=>i.fi.Gs(e,t)).next(()=>t)))})).apply(this,arguments)}function Cf(e,t){return xf.apply(this,arguments)}function xf(){return(xf=(0,Ut.Z)(function*(e,t,n=uh()){const r=yield _f(e,ul(Jd(t.bundledQuery))),i=ac(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{const s=Ch(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i._s.saveNamedQuery(e,t);const o=r.withResumeToken(Lc.EMPTY_BYTE_STRING,s);return i.ui=i.ui.insert(o.targetId,o),i.fs.updateTargetData(e,o).next(()=>i.fs.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>i.fs.addMatchingKeys(e,n,r.targetId)).next(()=>i._s.saveNamedQuery(e,t))})})).apply(this,arguments)}class Af{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return Ed.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var n;return this.yi.set(t.id,{id:(n=t).id,version:n.version,createTime:Ch(n.createTime)}),Ed.resolve()}getNamedQuery(e,t){return Ed.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,function(e){return{name:e.name,query:Jd(e.bundledQuery),readTime:Ch(e.readTime)}}(t)),Ed.resolve()}}class Df{constructor(){this.overlays=new xu(Kc.comparator),this.Ii=new Map}getOverlay(e,t){return Ed.resolve(this.overlays.get(t))}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.Xt(e,t,r)}),Ed.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ii.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ii.delete(n)),Ed.resolve()}getOverlaysForCollection(e,t,n){const r=oh(),i=t.length+1,s=new Kc(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ed.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new xu((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=oh(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=oh(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return Ed.resolve(o)}Xt(e,t,n){if(null===n)return;const r=this.overlays.get(n.key);if(null!==r){const e=this.Ii.get(r.largestBatchId).delete(n.key);this.Ii.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new qd(t,n));let i=this.Ii.get(t);void 0===i&&(i=uh(),this.Ii.set(t,i)),this.Ii.set(t,i.add(n.key))}}class Pf{constructor(){this.Ti=new Pu(Rf.Ei),this.Ai=new Pu(Rf.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const n=new Rf(e,t);this.Ti=this.Ti.add(n),this.Ai=this.Ai.add(n)}bi(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Pi(new Rf(e,t))}Vi(e,t){e.forEach(e=>this.removeReference(e,t))}vi(e){const t=new Kc(new Pc([])),n=new Rf(t,e),r=new Rf(t,e+1),i=[];return this.Ai.forEachInRange([n,r],e=>{this.Pi(e),i.push(e.key)}),i}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Kc(new Pc([])),n=new Rf(t,e),r=new Rf(t,e+1);let i=uh();return this.Ai.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Rf(e,0),n=this.Ti.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Rf{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Kc.comparator(e.key,t.key)||Sc(e.Ci,t.Ci)}static Ri(e,t){return Sc(e.Ci,t.Ci)||Kc.comparator(e.key,t.key)}}class Nf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new Pu(Rf.Ei)}checkEmpty(e){return Ed.resolve(0===this.Bs.length)}addMutationBatch(e,t,n,r){const i=this.xi;this.xi++;const s=new Ud(i,t,n,r);this.Bs.push(s);for(const o of r)this.Ni=this.Ni.add(new Rf(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ed.resolve(s)}lookupMutationBatch(e,t){return Ed.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const n=this.Mi(t+1),r=n<0?0:n;return Ed.resolve(this.Bs.length>r?this.Bs[r]:null)}getHighestUnacknowledgedBatchId(){return Ed.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return Ed.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Rf(t,0),r=new Rf(t,Number.POSITIVE_INFINITY),i=[];return this.Ni.forEachInRange([n,r],e=>{const t=this.ki(e.Ci);i.push(t)}),Ed.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Pu(Sc);return t.forEach(e=>{const t=new Rf(e,0),r=new Rf(e,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([t,r],e=>{n=n.add(e.Ci)})}),Ed.resolve(this.Oi(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Kc.isDocumentKey(i)||(i=i.child(""));const s=new Rf(new Kc(i),0);let o=new Pu(Sc);return this.Ni.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Ci)),!0)},s),Ed.resolve(this.Oi(o))}Oi(e){const t=[];return e.forEach(e=>{const n=this.ki(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){oc(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let n=this.Ni;return Ed.forEach(t.mutations,r=>{const i=new Rf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Ni=n})}_n(e){}containsKey(e,t){const n=new Rf(t,0),r=this.Ni.firstAfterOrEqual(n);return Ed.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return Ed.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class Of{constructor(e){this.$i=e,this.docs=new xu(Kc.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.$i(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ed.resolve(n?n.document.mutableCopy():vu.newInvalidDocument(t))}getEntries(e,t){let n=rh();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():vu.newInvalidDocument(e))}),Ed.resolve(n)}getAllFromCollection(e,t,n){let r=rh();const i=new Kc(t.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i}}=s.getNext();if(!t.isPrefixOf(e.path))break;e.path.length>t.length+1||Cu(ku(i),n)<=0||(r=r.insert(i.key,i.mutableCopy()))}return Ed.resolve(r)}getAllFromCollectionGroup(e,t,n,r){sc()}Bi(e,t){return Ed.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Lf(this)}getSize(e){return Ed.resolve(this.size)}}class Lf extends Hp{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Kn.addEntry(e,r)):this.Kn.removeEntry(n)}),Ed.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class Mf{constructor(e){this.persistence=e,this.Li=new th(e=>Mu(e),Zu),this.lastRemoteSnapshotVersion=Ec.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Pf,this.targetCount=0,this.Ki=Rp.gn()}forEachTarget(e,t){return this.Li.forEach((e,n)=>t(n)),Ed.resolve()}getLastRemoteSnapshotVersion(e){return Ed.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ed.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),Ed.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ui&&(this.Ui=t),Ed.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Rp(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,Ed.resolve()}updateTargetData(e,t){return this.Tn(t),Ed.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,Ed.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Li.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Li.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Ed.waitFor(i).next(()=>r)}getTargetCount(e){return Ed.resolve(this.targetCount)}getTargetData(e,t){const n=this.Li.get(t)||null;return Ed.resolve(n)}addMatchingKeys(e,t,n){return this.qi.bi(t,n),Ed.resolve()}removeMatchingKeys(e,t,n){this.qi.Vi(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Ed.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),Ed.resolve()}getMatchingKeysForTargetId(e,t){const n=this.qi.Di(t);return Ed.resolve(n)}containsKey(e,t){return Ed.resolve(this.qi.containsKey(t))}}class Zf{constructor(e,t){this.Gi={},this.overlays={},this.es=new _c(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new Mf(this),this.indexManager=new gp,this.ds=function(e){return new Of(e)}(e=>this.referenceDelegate.Qi(e)),this.M=new jd(t),this._s=new Af(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Df,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Gi[e.toKey()];return n||(n=new Nf(t,this.referenceDelegate),this.Gi[e.toKey()]=n),n}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,n){tc("MemoryPersistence","Starting transaction:",e);const r=new Uf(this.es.next());return this.referenceDelegate.ji(),n(r).next(e=>this.referenceDelegate.Wi(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}zi(e,t){return Ed.or(Object.values(this.Gi).map(n=>()=>n.containsKey(e,t)))}}class Uf extends kd{constructor(e){super(),this.currentSequenceNumber=e}}class Ff{constructor(e){this.persistence=e,this.Hi=new Pf,this.Ji=null}static Yi(e){return new Ff(e)}get Xi(){if(this.Ji)return this.Ji;throw sc()}addReference(e,t,n){return this.Hi.addReference(n,t),this.Xi.delete(n.toString()),Ed.resolve()}removeReference(e,t,n){return this.Hi.removeReference(n,t),this.Xi.add(n.toString()),Ed.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),Ed.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(e=>this.Xi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ed.forEach(this.Xi,n=>{const r=Kc.fromPath(n);return this.Zi(e,r).next(e=>{e||t.removeEntry(r,Ec.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(e=>{e?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return Ed.or([()=>Ed.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function qf(e,t){return`firestore_clients_${e}_${t}`}function Vf(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function jf(e,t){return`firestore_targets_${e}_${t}`}class Bf{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static tr(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new uc(r.error.code,r.error.message))),s?new Bf(e,t,r.state,i):(nc("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $f{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static tr(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new uc(n.error.code,n.error.message))),i?new $f(e,n.state,r):(nc("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=hh();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Gc(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new Hf(e,i):(nc("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class zf{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new zf(t.clientId,t.onlineState):(nc("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Gf{constructor(){this.activeTargetIds=hh()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Kf{constructor(e,t,n,r,i){this.window=e,this.Yn=t,this.persistenceKey=n,this.ir=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new xu(Sc),this.started=!1,this.cr=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.hr=qf(this.persistenceKey,this.ir),this.lr=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.ar=this.ar.insert(this.ir,new Gf),this.dr=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.mr=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.gr=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ut.Z)(function*(){const t=yield e.syncEngine.Fs();for(const r of t){if(r===e.ir)continue;const t=e.getItem(qf(e.persistenceKey,r));if(t){const n=Hf.tr(r,t);n&&(e.ar=e.ar.insert(n.clientId,n))}}e.yr();const n=e.storage.getItem(e.mr);if(n){const t=e.pr(n);t&&e.Ir(t)}for(const r of e.cr)e.ur(r);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,n){this.Er(e,t,n),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(jf(this.persistenceKey,e));if(n){const r=$f.tr(e,n);r&&(t=r.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(jf(this.persistenceKey,e))}updateQueryState(e,t,n){this.br(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.Ar(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return tc("SharedClientState","READ",e,t),t}setItem(e,t){tc("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){tc("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const n=e;if(n.storageArea===this.storage){if(tc("SharedClientState","EVENT",n.key,n.newValue),n.key===this.hr)return void nc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ut.Z)(function*(){if(t.started){if(null!==n.key)if(t.dr.test(n.key)){if(null==n.newValue){const e=t.vr(n.key);return t.Sr(e,null)}{const e=t.Dr(n.key,n.newValue);if(e)return t.Sr(e.clientId,e)}}else if(t._r.test(n.key)){if(null!==n.newValue){const e=t.Cr(n.key,n.newValue);if(e)return t.Nr(e)}}else if(t.wr.test(n.key)){if(null!==n.newValue){const e=t.kr(n.key,n.newValue);if(e)return t.Mr(e)}}else if(n.key===t.mr){if(null!==n.newValue){const e=t.pr(n.newValue);if(e)return t.Ir(e)}}else if(n.key===t.lr){const e=function(e){let t=_c.A;if(null!=e)try{const n=JSON.parse(e);oc("number"==typeof n),t=n}catch(e){nc("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue);e!==_c.A&&t.sequenceNumberHandler(e)}else if(n.key===t.gr){const e=t.Or(n.newValue);yield Promise.all(e.map(e=>t.syncEngine.Fr(e)))}}else t.cr.push(n)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,n){const r=new Bf(this.currentUser,e,t,n),i=Vf(this.persistenceKey,this.currentUser,e);this.setItem(i,r.er())}Ar(e){const t=Vf(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,n){const r=jf(this.persistenceKey,e),i=new $f(e,t,n);this.setItem(r,i.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const n=this.vr(e);return Hf.tr(n,t)}Cr(e,t){const n=this._r.exec(e),r=Number(n[1]);return Bf.tr(new Ya(void 0!==n[2]?n[2]:null),r,t)}kr(e,t){const n=this.wr.exec(e),r=Number(n[1]);return $f.tr(r,t)}pr(e){return zf.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,Ut.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);tc("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const n=t?this.ar.insert(e,t):this.ar.remove(e),r=this.Tr(this.ar),i=this.Tr(n),s=[],o=[];return i.forEach(e=>{r.has(e)||s.push(e)}),r.forEach(e=>{i.has(e)||o.push(e)}),this.syncEngine.Lr(s,o).then(()=>{this.ar=n})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=hh();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class Wf{constructor(){this.Ur=new Gf,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,n){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Gf,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Jf{Kr(e){}shutdown(){}}class Yf{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){tc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){tc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Qf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Xf{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class eg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,n,r,i){const s=this.ho(e,t);tc("RestConnection","Sending: ",s,n);const o={};return this.lo(o,r,i),this.fo(e,s,o,n).then(e=>(tc("RestConnection","Received: ",e),e),t=>{throw rc("RestConnection",`${e} failed with error: `,t,"url: ",s,"request:",n),t})}_o(e,t,n,r,i){return this.co(e,t,n,r,i)}lo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Qa,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}ho(e,t){return`${this.uo}/v1/${t}:${Qf[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,n,r){return new Promise((i,s)=>{const o=new Ja;o.listenOnce(Ha.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case $a.NO_ERROR:const t=o.getResponseJson();tc("Connection","XHR received:",JSON.stringify(t)),i(t);break;case $a.TIMEOUT:tc("Connection",'RPC "'+e+'" timed out'),s(new uc(cc.DEADLINE_EXCEEDED,"Request time out"));break;case $a.HTTP_ERROR:const n=o.getStatus();if(tc("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(cc).indexOf(t)>=0?t:cc.UNKNOWN}(e.status);s(new uc(t,e.message))}else s(new uc(cc.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new uc(cc.UNAVAILABLE,"Connection failed."));break;default:sc()}}finally{tc("Connection",'RPC "'+e+'" completed.')}});const a=JSON.stringify(r);o.send(t,"POST",a,n,15)})}wo(e,t,n){const r=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=ja(),s=Ba(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Ka({})),this.lo(o.initMessageHeaders,t,n),(0,Nt.uI)()||(0,Nt.b$)()||(0,Nt.d)()||(0,Nt.w1)()||(0,Nt.Mn)()||(0,Nt.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");const a=r.join("");tc("Connection","Creating WebChannel: "+a,o);const c=i.createWebChannel(a,o);let u=!1,l=!1;const h=new Xf({Jr:e=>{l?tc("Connection","Not sending because WebChannel is closed:",e):(u||(tc("Connection","Opening WebChannel transport."),c.open(),u=!0),tc("Connection","WebChannel sending:",e),c.send(e))},Yr:()=>c.close()}),d=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return d(c,Wa.EventType.OPEN,()=>{l||tc("Connection","WebChannel transport opened.")}),d(c,Wa.EventType.CLOSE,()=>{l||(l=!0,tc("Connection","WebChannel transport closed"),h.ro())}),d(c,Wa.EventType.ERROR,e=>{l||(l=!0,rc("Connection","WebChannel transport errored:",e),h.ro(new uc(cc.UNAVAILABLE,"The operation could not be completed")))}),d(c,Wa.EventType.MESSAGE,e=>{var t;if(!l){const n=e.data[0];oc(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){tc("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=Yl[e];if(void 0!==t)return eh(t)}(e),n=i.message;void 0===t&&(t=cc.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),l=!0,h.ro(new uc(t,n)),c.close()}else tc("Connection","WebChannel received:",n),h.oo(n)}}),d(s,za.STAT_EVENT,e=>{e.stat===Ga.PROXY?tc("Connection","Detected buffering proxy"):e.stat===Ga.NOPROXY&&tc("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.io()},0),h}}function tg(){return"undefined"!=typeof window?window:null}function ng(){return"undefined"!=typeof document?document:null}function rg(e){return new Th(e,!0)}class ig{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Yn=e,this.timerId=t,this.mo=n,this.yo=r,this.po=i,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),n=Math.max(0,Date.now()-this.Eo),r=Math.max(0,t-n);r>0&&tc("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class sg{constructor(e,t,n,r,i,s,o,a){this.Yn=e,this.Vo=n,this.vo=r,this.So=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new ig(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ut.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Ut.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var n=this;return(0,Ut.Z)(function*(){n.Uo(),n.qo(),n.No.cancel(),n.Do++,4!==e?n.No.reset():t&&t.code===cc.RESOURCE_EXHAUSTED?(nc(t.toString()),nc("Using maximum backoff delay to prevent overloading the backend."),n.No.Ao()):t&&t.code===cc.UNAUTHENTICATED&&3!==n.state&&(n.authCredentialsProvider.invalidateToken(),n.appCheckCredentialsProvider.invalidateToken()),null!==n.stream&&(n.Ko(),n.stream.close(),n.stream=null),n.state=e,yield n.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.Do===t&&this.Qo(e,n)},t=>{e(()=>{const e=new uc(cc.UNKNOWN,"Fetching auth token failed: "+t.message);return this.jo(e)})})}Qo(e,t){const n=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{n(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(e=>{n(()=>this.jo(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}Oo(){var e=this;this.state=5,this.No.Ro((0,Ut.Z)(function*(){e.state=0,e.start()}))}jo(e){return tc("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(tc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class og extends sg{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.M=i}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function(e,t){let n;if("targetChange"in t){const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:sc()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.N?(oc(void 0===t||"string"==typeof t),Lc.fromBase64String(t||"")):(oc(void 0===t||t instanceof Uint8Array),Lc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?cc.UNKNOWN:eh(e.code);return new uc(t,e.message||"")}(o);n=new mh(r,i,s,a||null)}else if("documentChange"in t){const r=t.documentChange,i=Ph(e,r.document.name),s=Ch(r.document.updateTime),o=new mu({mapValue:{fields:r.document.fields}}),a=vu.newFoundDocument(i,s,o);n=new fh(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in t){const r=t.documentDelete,i=Ph(e,r.document),s=r.readTime?Ch(r.readTime):Ec.min(),o=vu.newNoDocument(i,s);n=new fh([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){const r=t.documentRemove,i=Ph(e,r.document);n=new fh([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return sc();{const e=t.filter,r=new Jl(e.count||0);n=new gh(e.targetId,r)}}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Ec.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ec.min():t.readTime?Ch(t.readTime):Ec.min()}(e);return this.listener.zo(t,n)}Ho(e){const t={};t.database=Oh(this.M),t.addTarget=function(e,t){let n;const r=t.target;return n=Uu(r)?{documents:qh(e,r)}:{query:Vh(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=kh(e,t.resumeToken):t.snapshotVersion.compareTo(Ec.min())>0&&(n.readTime=Ih(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return sc()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);n&&(t.labels=n),this.Lo(t)}Jo(e){const t={};t.database=Oh(this.M),t.removeTarget=e,this.Lo(t)}}class ag extends sg{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.M=i,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(oc(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function(e,t){return e&&e.length>0?(oc(void 0!==t),e.map(e=>function(e,t){let n=Ch(e.updateTime?e.updateTime:t);return n.isEqual(Ec.min())&&(n=Ch(t)),new Ol(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Ch(e.commitTime);return this.listener.tu(n,t)}return oc(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Oh(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Uh(this.M,e))};this.Lo(t)}}class cg extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=n,this.M=r,this.su=!1}iu(){if(this.su)throw new uc(cc.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,n){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.So.co(e,t,n,r,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===cc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new uc(cc.UNKNOWN,e.toString())})}_o(e,t,n){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.So._o(e,t,n,r,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===cc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new uc(cc.UNKNOWN,e.toString())})}terminate(){this.su=!0}}class ug{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(nc(t),this.uu=!1):tc("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class lg{constructor(e,t,n,r,i){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=i,this.gu.Kr(e=>{n.enqueueAndForget((0,Ut.Z)(function*(){var e;wg(s)&&(tc("RemoteStore","Restarting streams for network reachability change."),yield(e=(0,Ut.Z)(function*(e){const t=ac(e);t.wu.add(4),yield pg(t),t.yu.set("Unknown"),t.wu.delete(4),yield hg(t)}),function(t){return e.apply(this,arguments)})(s))}))}),this.yu=new ug(n,r)}}function hg(e){return dg.apply(this,arguments)}function dg(){return(dg=(0,Ut.Z)(function*(e){if(wg(e))for(const t of e.mu)yield t(!0)})).apply(this,arguments)}function pg(e){return fg.apply(this,arguments)}function fg(){return(fg=(0,Ut.Z)(function*(e){for(const t of e.mu)yield t(!1)})).apply(this,arguments)}function gg(e,t){const n=ac(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),bg(n)?_g(n):Jg(n).Mo()&&yg(n,t))}function mg(e,t){const n=ac(e),r=Jg(n);n._u.delete(t),r.Mo()&&vg(n,t),0===n._u.size&&(r.Mo()?r.$o():wg(n)&&n.yu.set("Unknown"))}function yg(e,t){e.pu.Z(t.targetId),Jg(e).Ho(t)}function vg(e,t){e.pu.Z(t),Jg(e).Jo(t)}function _g(e){e.pu=new vh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e._u.get(t)||null}),Jg(e).start(),e.yu.au()}function bg(e){return wg(e)&&!Jg(e).ko()&&e._u.size>0}function wg(e){return 0===ac(e).wu.size}function Sg(e){e.pu=void 0}function Tg(e){return Ig.apply(this,arguments)}function Ig(){return(Ig=(0,Ut.Z)(function*(e){e._u.forEach((t,n)=>{yg(e,t)})})).apply(this,arguments)}function kg(e,t){return Eg.apply(this,arguments)}function Eg(){return(Eg=(0,Ut.Z)(function*(e,t){Sg(e),bg(e)?(e.yu.lu(t),_g(e)):e.yu.set("Unknown")})).apply(this,arguments)}function Cg(e,t,n){return xg.apply(this,arguments)}function xg(){return(xg=(0,Ut.Z)(function*(e,t,n){if(e.yu.set("Online"),t instanceof mh&&2===t.state&&t.cause)try{yield(r=(0,Ut.Z)(function*(e,t){const n=t.cause;for(const r of t.targetIds)e._u.has(r)&&(yield e.remoteSyncer.rejectListen(r,n),e._u.delete(r),e.pu.removeTarget(r))}),function(e,t){return r.apply(this,arguments)})(e,t)}catch(n){tc("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),yield Ag(e,n)}else if(t instanceof fh?e.pu.ut(t):t instanceof gh?e.pu._t(t):e.pu.ht(t),!n.isEqual(Ec.min()))try{const t=yield gf(e.localStore);n.compareTo(t)>=0&&(yield function(e,t){const n=e.pu.yt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(t=>{const n=e._u.get(t);if(!n)return;e._u.set(t,n.withResumeToken(Lc.EMPTY_BYTE_STRING,n.snapshotVersion)),vg(e,t);const r=new Vd(n.target,t,1,n.sequenceNumber);yg(e,r)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n))}catch(t){tc("RemoteStore","Failed to raise snapshot:",t),yield Ag(e,t)}var r})).apply(this,arguments)}function Ag(e,t,n){return Dg.apply(this,arguments)}function Dg(){return(Dg=(0,Ut.Z)(function*(e,t,n){if(!Pd(t))throw t;e.wu.add(1),yield pg(e),e.yu.set("Offline"),n||(n=()=>gf(e.localStore)),e.asyncQueue.enqueueRetryable((0,Ut.Z)(function*(){tc("RemoteStore","Retrying IndexedDB access"),yield n(),e.wu.delete(1),yield hg(e)}))})).apply(this,arguments)}function Pg(e,t){return t().catch(n=>Ag(e,n,t))}function Rg(e){return Ng.apply(this,arguments)}function Ng(){return(Ng=(0,Ut.Z)(function*(e){const t=ac(e),n=Yg(t);let r=t.du.length>0?t.du[t.du.length-1].batchId:-1;for(;Og(t);)try{const e=yield vf(t.localStore,r);if(null===e){0===t.du.length&&n.$o();break}r=e.batchId,Lg(t,e)}catch(e){yield Ag(t,e)}Mg(t)&&Zg(t)})).apply(this,arguments)}function Og(e){return wg(e)&&e.du.length<10}function Lg(e,t){e.du.push(t);const n=Yg(e);n.Mo()&&n.Xo&&n.Zo(t.mutations)}function Mg(e){return wg(e)&&!Yg(e).ko()&&e.du.length>0}function Zg(e){Yg(e).start()}function Ug(e){return Fg.apply(this,arguments)}function Fg(){return(Fg=(0,Ut.Z)(function*(e){Yg(e).nu()})).apply(this,arguments)}function qg(e){return Vg.apply(this,arguments)}function Vg(){return(Vg=(0,Ut.Z)(function*(e){const t=Yg(e);for(const n of e.du)t.Zo(n.mutations)})).apply(this,arguments)}function jg(e,t,n){return Bg.apply(this,arguments)}function Bg(){return(Bg=(0,Ut.Z)(function*(e,t,n){const r=e.du.shift(),i=Fd.from(r,t,n);yield Pg(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),yield Rg(e)})).apply(this,arguments)}function $g(e,t){return Hg.apply(this,arguments)}function Hg(){return(Hg=(0,Ut.Z)(function*(e,t){var n;t&&Yg(e).Xo&&(yield(n=(0,Ut.Z)(function*(e,t){if(Xl(n=t.code)&&n!==cc.ABORTED){const n=e.du.shift();Yg(e).Fo(),yield Pg(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),yield Rg(e)}var n}),function(e,t){return n.apply(this,arguments)})(e,t)),Mg(e)&&Zg(e)})).apply(this,arguments)}function zg(e,t){return Gg.apply(this,arguments)}function Gg(){return(Gg=(0,Ut.Z)(function*(e,t){const n=ac(e);n.asyncQueue.verifyOperationInProgress(),tc("RemoteStore","RemoteStore received new credentials");const r=wg(n);n.wu.add(3),yield pg(n),r&&n.yu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.wu.delete(3),yield hg(n)})).apply(this,arguments)}function Kg(e,t){return Wg.apply(this,arguments)}function Wg(){return(Wg=(0,Ut.Z)(function*(e,t){const n=ac(e);t?(n.wu.delete(2),yield hg(n)):t||(n.wu.add(2),yield pg(n),n.yu.set("Unknown"))})).apply(this,arguments)}function Jg(e){return e.Iu||(e.Iu=function(e,t,n){const r=ac(e);return r.iu(),new og(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Tg.bind(null,e),eo:kg.bind(null,e),zo:Cg.bind(null,e)}),e.mu.push(function(){var t=(0,Ut.Z)(function*(t){t?(e.Iu.Fo(),bg(e)?_g(e):e.yu.set("Unknown")):(yield e.Iu.stop(),Sg(e))});return function(e){return t.apply(this,arguments)}}())),e.Iu}function Yg(e){return e.Tu||(e.Tu=function(e,t,n){const r=ac(e);return r.iu(),new ag(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Ug.bind(null,e),eo:$g.bind(null,e),eu:qg.bind(null,e),tu:jg.bind(null,e)}),e.mu.push(function(){var t=(0,Ut.Z)(function*(t){t?(e.Tu.Fo(),yield Rg(e)):(yield e.Tu.stop(),e.du.length>0&&(tc("RemoteStore",`Stopping write stream with ${e.du.length} pending writes`),e.du=[]))});return function(e){return t.apply(this,arguments)}}())),e.Tu}class Qg{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new lc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Qg(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new uc(cc.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xg(e,t){if(nc("AsyncQueue",`${t}: ${e}`),Pd(e))return new uc(cc.UNAVAILABLE,`${t}: ${e}`);throw e}class em{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Kc.comparator(t.key,n.key):(e,t)=>Kc.comparator(e.key,t.key),this.keyedMap=sh(),this.sortedSet=new xu(this.comparator)}static emptySet(e){return new em(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof em))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new em;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class tm{constructor(){this.Eu=new xu(Kc.comparator)}track(e){const t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):sc():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,n)=>{e.push(n)}),e}}class nm{constructor(e,t,n,r,i,s,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new nm(e,t,em.emptySet(t),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class rm{constructor(){this.Ru=void 0,this.listeners=[]}}class im{constructor(){this.queries=new th(e=>dl(e),hl),this.onlineState="Unknown",this.bu=new Set}}function sm(e,t){return om.apply(this,arguments)}function om(){return(om=(0,Ut.Z)(function*(e,t){const n=ac(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new rm),i)try{s.Ru=yield n.onListen(r)}catch(e){const n=Xg(e,`Initialization of query '${pl(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Pu(n.onlineState),s.Ru&&t.Vu(s.Ru)&&hm(n)})).apply(this,arguments)}function am(e,t){return cm.apply(this,arguments)}function cm(){return(cm=(0,Ut.Z)(function*(e,t){const n=ac(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)})).apply(this,arguments)}function um(e,t){const n=ac(e);let r=!1;for(const i of t){const e=n.queries.get(i.query);if(e){for(const t of e.listeners)t.Vu(i)&&(r=!0);e.Ru=i}}r&&hm(n)}function lm(e,t,n){const r=ac(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function hm(e){e.bu.forEach(e=>{e.next()})}class dm{constructor(e,t,n){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=n||{}}Vu(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new nm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=nm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class pm{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class fm{constructor(e){this.M=e}wi(e){return Ph(this.M,e)}mi(e){return e.metadata.exists?Zh(this.M,e.document,!1):vu.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Ch(e)}}class gm{constructor(e,t,n){this.Ou=e,this.localStore=t,this.M=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mm(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const n=Pc.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,n=new fm(this.M);for(const r of e)if(r.metadata.queries){const e=n.wi(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||uh()).add(e);t.set(n,r)}}return t}complete(){var e=this;return(0,Ut.Z)(function*(){const t=yield function(e,t,n,r){return Ef.apply(this,arguments)}(e.localStore,new fm(e.M),e.documents,e.Ou.id),n=e.$u(e.documents);for(const r of e.queries)yield Cf(e.localStore,r,n.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function mm(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class ym{constructor(e){this.key=e}}class vm{constructor(e){this.key=e}}class _m{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=uh(),this.mutatedKeys=uh(),this.Gu=ml(e),this.Qu=new em(this.Gu)}get ju(){return this.Uu}Wu(e,t){const n=t?t.zu:new tm,r=t?t.Qu:this.Qu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const u=r.get(e),l=fl(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let p=!1;u&&l?u.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),p=!0):this.Hu(u,l)||(n.track({type:2,doc:l}),p=!0,(a&&this.Gu(l,a)>0||c&&this.Gu(l,c)<0)&&(o=!0)):!u&&l?(n.track({type:0,doc:l}),p=!0):u&&!l&&(n.track({type:1,doc:u}),p=!0,(a||c)&&(o=!0)),p&&(l?(s=s.add(l),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Qu:s,zu:n,ii:o,mutatedKeys:i}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const i=e.zu.Au();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return sc()}};return n(e)-n(t)}(e.type,t.type)||this.Gu(e.doc,t.doc)),this.Ju(n);const s=t?this.Yu():[],o=0===this.Ku.size&&this.current?1:0,a=o!==this.qu;return this.qu=o,0!==i.length||a?{snapshot:new nm(this.query,e.Qu,r,i,e.mutatedKeys,0===o,a,!1),Xu:s}:{Xu:s}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new tm,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(e=>this.Uu=this.Uu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Uu=this.Uu.delete(e)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=uh(),this.Qu.forEach(e=>{this.Zu(e.key)&&(this.Ku=this.Ku.add(e.key))});const t=[];return e.forEach(e=>{this.Ku.has(e)||t.push(new vm(e))}),this.Ku.forEach(n=>{e.has(n)||t.push(new ym(n))}),t}ta(e){this.Uu=e._i,this.Ku=uh();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return nm.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class bm{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class wm{constructor(e){this.key=e,this.na=!1}}class Sm{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.sa={},this.ia=new th(e=>dl(e),hl),this.ra=new Map,this.oa=new Set,this.ua=new xu(Kc.comparator),this.aa=new Map,this.ca=new Pf,this.ha={},this.la=new Map,this.fa=Rp.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function Tm(e,t){return Im.apply(this,arguments)}function Im(){return(Im=(0,Ut.Z)(function*(e,t){const n=py(e);let r,i;const s=n.ia.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.ea();else{const e=yield _f(n.localStore,ul(t));n.isPrimaryClient&&gg(n.remoteStore,e);const s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=yield km(n,t,r,"current"===s)}return i})).apply(this,arguments)}function km(e,t,n,r){return Em.apply(this,arguments)}function Em(){return(Em=(0,Ut.Z)(function*(e,t,n,r){e._a=(t,n,r)=>{return(i=(0,Ut.Z)(function*(e,t,n,r){let i=t.view.Wu(n);i.ii&&(i=yield Sf(e.localStore,t.query,!1).then(({documents:e})=>t.view.Wu(e,i)));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return $m(e,t.targetId,o.Xu),o.snapshot}),function(e,t,n,r){return i.apply(this,arguments)})(e,t,n,r);var i};const i=yield Sf(e.localStore,t,!0),s=new _m(t,i._i),o=s.Wu(i.documents),a=ph.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),c=s.applyChanges(o,e.isPrimaryClient,a);$m(e,n,c.Xu);const u=new bm(t,n,s);return e.ia.set(t,u),e.ra.has(n)?e.ra.get(n).push(t):e.ra.set(n,[t]),c.snapshot})).apply(this,arguments)}function Cm(e,t){return xm.apply(this,arguments)}function xm(){return(xm=(0,Ut.Z)(function*(e,t){const n=ac(e),r=n.ia.get(t),i=n.ra.get(r.targetId);if(i.length>1)return n.ra.set(r.targetId,i.filter(e=>!hl(e,t))),void n.ia.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield bf(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),mg(n.remoteStore,r.targetId),jm(n,r.targetId)}).catch(Zp))):(jm(n,r.targetId),yield bf(n.localStore,r.targetId,!0))})).apply(this,arguments)}function Am(){return(Am=(0,Ut.Z)(function*(e,t,n){const r=fy(e);try{const e=yield function(e,t){const n=ac(e),r=kc.now(),i=t.reduce((e,t)=>e.add(t.key),uh());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>n.fi.Ks(e,i).next(i=>{s=i;const o=[];for(const e of t){const t=ql(e,s.get(e.key));null!=t&&o.push(new $l(e.key,t,yu(t.value.mapValue),Ll.exists(!0)))}return n.Bs.addMutationBatch(e,r,o,t)})).then(e=>(e.applyToLocalDocumentSet(s),{batchId:e.batchId,changes:s}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.ha[e.currentUser.toKey()];r||(r=new xu(Sc)),r=r.insert(t,n),e.ha[e.currentUser.toKey()]=r}(r,e.batchId,n),yield Gm(r,e.changes),yield Rg(r.remoteStore)}catch(e){const t=Xg(e,"Failed to persist write");n.reject(t)}})).apply(this,arguments)}function Dm(e,t){return Pm.apply(this,arguments)}function Pm(){return(Pm=(0,Ut.Z)(function*(e,t){const n=ac(e);try{const e=yield mf(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.aa.get(t);r&&(oc(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.na=!0:e.modifiedDocuments.size>0?oc(r.na):e.removedDocuments.size>0&&(oc(r.na),r.na=!1))}),yield Gm(n,e,t)}catch(e){yield Zp(e)}})).apply(this,arguments)}function Rm(e,t,n){const r=ac(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ia.forEach((n,r)=>{const i=r.view.Pu(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=ac(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.listeners)i.Pu(t)&&(r=!0)}),r&&hm(n)}(r.eventManager,t),e.length&&r.sa.zo(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Nm(e,t,n){return Om.apply(this,arguments)}function Om(){return(Om=(0,Ut.Z)(function*(e,t,n){const r=ac(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.aa.get(t),s=i&&i.key;if(s){let e=new xu(Kc.comparator);e=e.insert(s,vu.newNoDocument(s,Ec.min()));const n=uh().add(s),i=new dh(Ec.min(),new Map,new Pu(Sc),e,n);yield Dm(r,i),r.ua=r.ua.remove(s),r.aa.delete(t),zm(r)}else yield bf(r.localStore,t,!1).then(()=>jm(r,t,n)).catch(Zp)})).apply(this,arguments)}function Lm(e,t){return Mm.apply(this,arguments)}function Mm(){return(Mm=(0,Ut.Z)(function*(e,t){const n=ac(e),r=t.batch.batchId;try{const e=yield ff(n.localStore,t);Vm(n,r,null),qm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Gm(n,e)}catch(e){yield Zp(e)}})).apply(this,arguments)}function Zm(e,t,n){return Um.apply(this,arguments)}function Um(){return(Um=(0,Ut.Z)(function*(e,t,n){const r=ac(e);try{const e=yield function(e,t){const n=ac(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.Bs.lookupMutationBatch(e,t).next(t=>(oc(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t))).next(()=>n.Bs.performConsistencyCheck(e)).next(()=>n.fi.Ks(e,r))})}(r.localStore,t);Vm(r,t,n),qm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),yield Gm(r,e)}catch(n){yield Zp(n)}})).apply(this,arguments)}function Fm(){return(Fm=(0,Ut.Z)(function*(e,t){const n=ac(e);wg(n.remoteStore)||tc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=yield function(e){const t=ac(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.Bs.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(-1===e)return void t.resolve();const r=n.la.get(e)||[];r.push(t),n.la.set(e,r)}catch(e){const n=Xg(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}})).apply(this,arguments)}function qm(e,t){(e.la.get(t)||[]).forEach(e=>{e.resolve()}),e.la.delete(t)}function Vm(e,t,n){const r=ac(e);let i=r.ha[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.ha[r.currentUser.toKey()]=i}}function jm(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.ra.get(t))e.ia.delete(r),n&&e.sa.wa(r,n);e.ra.delete(t),e.isPrimaryClient&&e.ca.vi(t).forEach(t=>{e.ca.containsKey(t)||Bm(e,t)})}function Bm(e,t){e.oa.delete(t.path.canonicalString());const n=e.ua.get(t);null!==n&&(mg(e.remoteStore,n),e.ua=e.ua.remove(t),e.aa.delete(n),zm(e))}function $m(e,t,n){for(const r of n)r instanceof ym?(e.ca.addReference(r.key,t),Hm(e,r)):r instanceof vm?(tc("SyncEngine","Document no longer in limbo: "+r.key),e.ca.removeReference(r.key,t),e.ca.containsKey(r.key)||Bm(e,r.key)):sc()}function Hm(e,t){const n=t.key,r=n.path.canonicalString();e.ua.get(n)||e.oa.has(r)||(tc("SyncEngine","New document in limbo: "+n),e.oa.add(r),zm(e))}function zm(e){for(;e.oa.size>0&&e.ua.size<e.maxConcurrentLimboResolutions;){const t=e.oa.values().next().value;e.oa.delete(t);const n=new Kc(Pc.fromString(t)),r=e.fa.next();e.aa.set(r,new wm(n)),e.ua=e.ua.insert(n,r),gg(e.remoteStore,new Vd(ul(il(n.path)),r,2,_c.A))}}function Gm(e,t,n){return Km.apply(this,arguments)}function Km(){return(Km=(0,Ut.Z)(function*(e,t,n){const r=ac(e),i=[],s=[],o=[];var a;r.ia.isEmpty()||(r.ia.forEach((e,a)=>{o.push(r._a(a,t,n).then(e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);const t=cf.Ys(a.targetId,e);s.push(t)}}))}),yield Promise.all(o),r.sa.zo(i),yield(a=(0,Ut.Z)(function*(e,t){const n=ac(e);try{yield n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Ed.forEach(t,t=>Ed.forEach(t.Hs,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Ed.forEach(t.Js,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Pd(e))throw e;tc("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ui.get(e),r=t.withLastLimboFreeSnapshotVersion(t.snapshotVersion);n.ui=n.ui.insert(e,r)}}}),function(e,t){return a.apply(this,arguments)})(r.localStore,s))})).apply(this,arguments)}function Wm(e,t){return Jm.apply(this,arguments)}function Jm(){return(Jm=(0,Ut.Z)(function*(e,t){const n=ac(e);if(!n.currentUser.isEqual(t)){tc("SyncEngine","User change. New user:",t.toKey());const e=yield df(n.localStore,t);n.currentUser=t,function(e,t){e.la.forEach(e=>{e.forEach(e=>{e.reject(new uc(cc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.la.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),yield Gm(n,e.di)}})).apply(this,arguments)}function Ym(e,t){const n=ac(e),r=n.aa.get(t);if(r&&r.na)return uh().add(r.key);{let e=uh();const r=n.ra.get(t);if(!r)return e;for(const t of r){const r=n.ia.get(t);e=e.unionWith(r.view.ju)}return e}}function Qm(e,t){return Xm.apply(this,arguments)}function Xm(){return(Xm=(0,Ut.Z)(function*(e,t){const n=ac(e),r=yield Sf(n.localStore,t.query,!0),i=t.view.ta(r);return n.isPrimaryClient&&$m(n,t.targetId,i.Xu),i})).apply(this,arguments)}function ey(e,t){return ty.apply(this,arguments)}function ty(){return(ty=(0,Ut.Z)(function*(e,t){const n=ac(e);return If(n.localStore,t).then(e=>Gm(n,e))})).apply(this,arguments)}function ny(e,t,n,r){return ry.apply(this,arguments)}function ry(){return(ry=(0,Ut.Z)(function*(e,t,n,r){const i=ac(e),s=yield function(e,t){const n=ac(e),r=ac(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.fn(e,t).next(t=>t?n.fi.Ks(e,t):Ed.resolve(null)))}(i.localStore,t);null!==s?("pending"===n?yield Rg(i.remoteStore):"acknowledged"===n||"rejected"===n?(Vm(i,t,r||null),qm(i,t),function(e,t){ac(ac(e).Bs)._n(t)}(i.localStore,t)):sc(),yield Gm(i,s)):tc("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function iy(){return(iy=(0,Ut.Z)(function*(e,t){const n=ac(e);if(py(n),fy(n),!0===t&&!0!==n.da){const e=n.sharedClientState.getAllActiveQueryTargets(),t=yield sy(n,e.toArray());n.da=!0,yield Kg(n.remoteStore,!0);for(const r of t)gg(n.remoteStore,r)}else if(!1===t&&!1!==n.da){const e=[];let t=Promise.resolve();n.ra.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(jm(n,i),bf(n.localStore,i,!0))),mg(n.remoteStore,i)}),yield t,yield sy(n,e),function(e){const t=ac(e);t.aa.forEach((e,n)=>{mg(t.remoteStore,n)}),t.ca.Si(),t.aa=new Map,t.ua=new xu(Kc.comparator)}(n),n.da=!1,yield Kg(n.remoteStore,!1)}})).apply(this,arguments)}function sy(e,t,n){return oy.apply(this,arguments)}function oy(){return(oy=(0,Ut.Z)(function*(e,t,n){const r=ac(e),i=[],s=[];for(const o of t){let e;const t=r.ra.get(o);if(t&&0!==t.length){e=yield _f(r.localStore,ul(t[0]));for(const e of t){const t=r.ia.get(e),n=yield Qm(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=yield Tf(r.localStore,o);e=yield _f(r.localStore,t),yield km(r,ay(t),o,!1)}i.push(e)}return r.sa.zo(s),i})).apply(this,arguments)}function ay(e){return rl(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function cy(e){const t=ac(e);return ac(ac(t.localStore).persistence).Fs()}function uy(e,t,n,r){return ly.apply(this,arguments)}function ly(){return(ly=(0,Ut.Z)(function*(e,t,n,r){const i=ac(e);if(i.da)return void tc("SyncEngine","Ignoring unexpected query state notification.");const s=i.ra.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=yield If(i.localStore,gl(s[0])),r=dh.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);yield Gm(i,e,r);break}case"rejected":yield bf(i.localStore,t,!0),jm(i,t,r);break;default:sc()}})).apply(this,arguments)}function hy(e,t,n){return dy.apply(this,arguments)}function dy(){return(dy=(0,Ut.Z)(function*(e,t,n){const r=py(e);if(r.da){for(const e of t){if(r.ra.has(e)){tc("SyncEngine","Adding an already active target "+e);continue}const t=yield Tf(r.localStore,e),n=yield _f(r.localStore,t);yield km(r,ay(t),n.targetId,!1),gg(r.remoteStore,n)}for(const e of n)r.ra.has(e)&&(yield bf(r.localStore,e,!1).then(()=>{mg(r.remoteStore,e),jm(r,e)}).catch(Zp))}})).apply(this,arguments)}function py(e){const t=ac(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Dm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ym.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Nm.bind(null,t),t.sa.zo=um.bind(null,t.eventManager),t.sa.wa=lm.bind(null,t.eventManager),t}function fy(e){const t=ac(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Lm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Zm.bind(null,t),t}class gy{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ut.Z)(function*(){t.M=rg(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return hf(this.persistence,new uf,e.initialUser,this.M)}ya(e){return new Zf(Ff.Yi,this.M)}ga(e){return new Wf}terminate(){var e=this;return(0,Ut.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class my extends gy{constructor(e,t,n){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,n=this;return(0,Ut.Z)(function*(){yield t().call(n,e),yield n.Ta.initialize(n,e),yield fy(n.Ta.syncEngine),yield Rg(n.Ta.remoteStore),yield n.persistence.Ts(()=>(n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()))})()}Ia(e){return hf(this.persistence,new uf,e.initialUser,this.M)}pa(e){return new Vp(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=of(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Ip.withCacheSize(this.cacheSizeBytes):Ip.DEFAULT;return new nf(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,tg(),ng(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new Wf}}class yy extends my{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,n=this;return(0,Ut.Z)(function*(){yield t().call(n,e);const r=n.Ta.syncEngine;n.sharedClientState instanceof Kf&&(n.sharedClientState.syncEngine={$r:ny.bind(null,r),Br:uy.bind(null,r),Lr:hy.bind(null,r),Fs:cy.bind(null,r),Fr:ey.bind(null,r)},yield n.sharedClientState.start()),yield n.persistence.Ts(function(){var e=(0,Ut.Z)(function*(e){yield function(e,t){return iy.apply(this,arguments)}(n.Ta.syncEngine,e),n.gcScheduler&&(e&&!n.gcScheduler.started?n.gcScheduler.start(n.localStore):e||n.gcScheduler.stop())});return function(t){return e.apply(this,arguments)}}())})()}ga(e){const t=tg();if(!Kf.vt(t))throw new uc(cc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=of(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Kf(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class vy{initialize(e,t){var n=this;return(0,Ut.Z)(function*(){n.localStore||(n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=e=>Rm(n.syncEngine,e,1),n.remoteStore.remoteSyncer.handleCredentialChange=Wm.bind(null,n.syncEngine),yield Kg(n.remoteStore,n.syncEngine.isPrimaryClient))})()}createEventManager(e){return new im}createDatastore(e){const t=rg(e.databaseInfo.databaseId),n=new eg(e.databaseInfo);return function(e,t,n,r){return new cg(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Rm(this.syncEngine,e,0),s=Yf.vt()?new Yf:new Jf,new lg(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Sm(e,t,n,r,i,s);return o&&(a.da=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ut.Z)(function*(e){const t=ac(e);tc("RemoteStore","RemoteStore shutting down."),t.wu.add(5),yield pg(t),t.gu.shutdown(),t.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function _y(e,t=10240){let n=0;return{read:()=>(0,Ut.Z)(function*(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}})(),cancel:()=>(0,Ut.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class by{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class wy{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new lc,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(e=>{e&&e.Mu()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))},e=>this.metadata.reject(e))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,Ut.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,Ut.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,Ut.Z)(function*(){const t=yield e.Va();if(null===t)return null;const n=e.ba.decode(t),r=Number(n);isNaN(r)&&e.va(`length string (${n}) is not valid number`);const i=yield e.Sa(r);return new pm(JSON.parse(i),t.length+r)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,Ut.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const n=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),n})()}Sa(e){var t=this;return(0,Ut.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const n=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),n})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,Ut.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const n=new Uint8Array(e.buffer.length+t.value.length);n.set(e.buffer),n.set(t.value,e.buffer.length),e.buffer=n}return t.done})()}}class Sy{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ut.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new uc(cc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=yield(r=(0,Ut.Z)(function*(e,t){const n=ac(e),r=Oh(n.M)+"/documents",i={documents:t.map(e=>Dh(n.M,e))},s=yield n._o("BatchGetDocuments",r,i),o=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){oc(!!t.found);const n=Ph(e,t.found.name),r=Ch(t.found.updateTime),i=new mu({mapValue:{fields:t.found.fields}});return vu.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){oc(!!t.missing),oc(!!t.readTime);const n=Ph(e,t.missing),r=Ch(t.readTime);return vu.newNoDocument(n,r)}(e,t):sc()}(n.M,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());oc(!!t),a.push(t)}),a}),function(e,t){return r.apply(this,arguments)})(t.datastore,e);var r;return n.forEach(e=>t.recordVersion(e)),n})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Kl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ut.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var n;e.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((t,n)=>{const r=Kc.fromPath(n);e.mutations.push(new Wl(r,e.precondition(r)))}),yield(n=(0,Ut.Z)(function*(e,t){const n=ac(e),r=Oh(n.M)+"/documents",i={writes:t.map(e=>Uh(n.M,e))};yield n.co("Commit",r,i)}),function(e,t){return n.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw sc();t=Ec.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new uc(cc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ll.updateTime(t):Ll.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ec.min()))throw new uc(cc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ll.updateTime(t)}return Ll.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Ty{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.xa=n.maxAttempts,this.No=new ig(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,Ut.Z)(function*(){const t=new Sy(e.datastore),n=e.ka(t);n&&n.then(n=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(n)}).catch(t=>{e.Ma(t)}))}).catch(t=>{e.Ma(t)})}))}ka(e){try{const t=this.updateFunction(e);return!Hc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Xl(t)}return!1}}class Iy{constructor(e,t,n,r){var i=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ya.UNAUTHENTICATED,this.clientId=wc.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,function(){var e=(0,Ut.Z)(function*(e){tc("FirestoreClient","Received user=",e.uid),yield i.authCredentialListener(e),i.user=e});return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(n,e=>(tc("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}getConfiguration(){var e=this;return(0,Ut.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new uc(cc.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new lc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ut.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(n){const e=Xg(n,"Failed to shutdown persistence");t.reject(e)}})),t.promise}}function ky(e,t){return Ey.apply(this,arguments)}function Ey(){return(Ey=(0,Ut.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress(),tc("FirestoreClient","Initializing OfflineComponentProvider");const n=yield e.getConfiguration();yield t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(function(){var e=(0,Ut.Z)(function*(e){r.isEqual(e)||(yield df(t.localStore,e),r=e)});return function(t){return e.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e.offlineComponents=t})).apply(this,arguments)}function Cy(e,t){return xy.apply(this,arguments)}function xy(){return(xy=(0,Ut.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress();const n=yield Ay(e);tc("FirestoreClient","Initializing OnlineComponentProvider");const r=yield e.getConfiguration();yield t.initialize(n,r),e.setCredentialChangeListener(e=>zg(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>zg(t.remoteStore,n)),e.onlineComponents=t})).apply(this,arguments)}function Ay(e){return Dy.apply(this,arguments)}function Dy(){return(Dy=(0,Ut.Z)(function*(e){return e.offlineComponents||(tc("FirestoreClient","Using default OfflineComponentProvider"),yield ky(e,new gy)),e.offlineComponents})).apply(this,arguments)}function Py(e){return Ry.apply(this,arguments)}function Ry(){return(Ry=(0,Ut.Z)(function*(e){return e.onlineComponents||(tc("FirestoreClient","Using default OnlineComponentProvider"),yield Cy(e,new vy)),e.onlineComponents})).apply(this,arguments)}function Ny(e){return Ay(e).then(e=>e.persistence)}function Oy(e){return Ay(e).then(e=>e.localStore)}function Ly(e){return Py(e).then(e=>e.remoteStore)}function My(e){return Py(e).then(e=>e.syncEngine)}function Zy(e){return Uy.apply(this,arguments)}function Uy(){return(Uy=(0,Ut.Z)(function*(e){const t=yield Py(e),n=t.eventManager;return n.onListen=Tm.bind(null,t.syncEngine),n.onUnlisten=Cm.bind(null,t.syncEngine),n})).apply(this,arguments)}function Fy(e,t,n={}){const r=new lc;return e.asyncQueue.enqueueAndForget((0,Ut.Z)(function*(){return function(e,t,n,r,i){const s=new by({next:s=>{t.enqueueAndForget(()=>am(e,o));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new uc(cc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new uc(cc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new dm(il(n.path),s,{includeMetadataChanges:!0,ku:!0});return sm(e,o)}(yield Zy(e),e.asyncQueue,t,n,r)})),r.promise}function qy(e,t,n={}){const r=new lc;return e.asyncQueue.enqueueAndForget((0,Ut.Z)(function*(){return function(e,t,n,r,i){const s=new by({next:n=>{t.enqueueAndForget(()=>am(e,o)),n.fromCache&&"server"===r.source?i.reject(new uc(cc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new dm(n,s,{includeMetadataChanges:!0,ku:!0});return sm(e,o)}(yield Zy(e),e.asyncQueue,t,n,r)})),r.promise}const Vy=new Map;function jy(e,t,n){if(!n)throw new uc(cc.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function By(e,t,n,r){if(!0===t&&!0===r)throw new uc(cc.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function $y(e){if(!Kc.isDocumentKey(e))throw new uc(cc.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Hy(e){if(Kc.isDocumentKey(e))throw new uc(cc.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function zy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":sc()}function Gy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new uc(cc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zy(e);throw new uc(cc.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Ky(e,t){if(t<=0)throw new uc(cc.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class Wy{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new uc(cc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new uc(cc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,By("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jy{constructor(e,t,n){this._authCredentials=t,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wy({}),this._settingsFrozen=!1,e instanceof $c?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new uc(cc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $c(e.options.projectId)}(e))}get app(){if(!this._app)throw new uc(cc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new uc(cc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wy(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new dc;switch(e.type){case"gapi":const t=e.client;return oc(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new mc(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new uc(cc.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Vy.get(e);t&&(tc("ComponentProvider","Removing Datastore"),Vy.delete(e),t.terminate())}(this),Promise.resolve()}}class Yy{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xy(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yy(this.firestore,e,this._key)}}class Qy{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Qy(this.firestore,e,this._query)}}class Xy extends Qy{constructor(e,t,n){super(e,t,il(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yy(this.firestore,null,new Kc(e))}withConverter(e){return new Xy(this.firestore,e,this._path)}}function ev(e,t,...n){if(e=(0,Nt.m9)(e),jy("collection","path",t),e instanceof Jy){const r=Pc.fromString(t,...n);return Hy(r),new Xy(e,null,r)}{if(!(e instanceof Yy||e instanceof Xy))throw new uc(cc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Pc.fromString(t,...n));return Hy(r),new Xy(e.firestore,null,r)}}function tv(e,t,...n){if(e=(0,Nt.m9)(e),1===arguments.length&&(t=wc.R()),jy("doc","path",t),e instanceof Jy){const r=Pc.fromString(t,...n);return $y(r),new Yy(e,null,new Kc(r))}{if(!(e instanceof Yy||e instanceof Xy))throw new uc(cc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Pc.fromString(t,...n));return $y(r),new Yy(e.firestore,e instanceof Xy?e.converter:null,new Kc(r))}}function nv(e,t){return e=(0,Nt.m9)(e),t=(0,Nt.m9)(t),(e instanceof Yy||e instanceof Xy)&&(t instanceof Yy||t instanceof Xy)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function rv(e,t){return e=(0,Nt.m9)(e),t=(0,Nt.m9)(t),e instanceof Qy&&t instanceof Qy&&e.firestore===t.firestore&&hl(e._query,t._query)&&e.converter===t.converter}class iv{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new ig(this,"async_queue_retry"),this.Qa=()=>{const e=ng();e&&tc("AsyncQueue","Visibility state changed to "+e.visibilityState),this.No.Po()};const e=ng();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=ng();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new lc;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,Ut.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(ri){if(!Pd(ri))throw ri;tc("AsyncQueue","Operation failed with retryable error: "+ri)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(e=>{throw this.Ua=e,this.qa=!1,nc("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.qa=!1,e))));return this.Fa=t,t}enqueueAfterDelay(e,t,n){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const r=Qg.createAndSchedule(this,e,t,n,e=>this.Ha(e));return this.La.push(r),r}ja(){this.Ua&&sc()}verifyOperationInProgress(){}Ja(){var e=this;return(0,Ut.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function sv(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class ov{constructor(){this._progressObserver={},this._taskCompletionResolver=new lc,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class av extends Jy{constructor(e,t,n){super(e,t,n),this.type="firestore",this._queue=new iv,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||lv(this),this._firestoreClient.terminate()}}function cv(e=(0,Ot.getApp)()){return(0,Ot._getProvider)(e,"firestore").getImmediate()}function uv(e){return e._firestoreClient||lv(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function lv(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new Bc(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Iy(e._authCredentials,e._appCheckCredentials,e._queue,r)}function hv(e,t,n){const r=new lc;return e.asyncQueue.enqueue((0,Ut.Z)(function*(){try{yield ky(e,n),yield Cy(e,t),r.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===cc.FAILED_PRECONDITION||e.code===cc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.reject(e)}})).then(()=>r.promise)}function dv(e){if(e._initialized||e._terminated)throw new uc(cc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class pv{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new uc(cc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nc(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fv(Lc.fromBase64String(e))}catch(e){throw new uc(cc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new fv(Lc.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class gv{constructor(e){this._methodName=e}}class mv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new uc(cc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new uc(cc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Sc(this._lat,e._lat)||Sc(this._long,e._long)}}const yv=/^__.*__$/;class vv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new $l(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bl(e,this.data,t,this.fieldTransforms)}}class _v{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new $l(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw sc()}}class wv{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.M=n,this.ignoreUndefinedProperties=r,void 0===i&&this.tc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new wv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.rc(e),r}oc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.tc(),r}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return Vv(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(bv(this.ec)&&yv.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class Sv{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=n||rg(e)}lc(e,t,n,r=!1){return new wv({ec:e,methodName:t,hc:n,path:Nc.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Tv(e){const t=e._freezeSettings(),n=rg(e._databaseId);return new Sv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Iv(e,t,n,r,i,s={}){const o=e.lc(s.merge||s.mergeFields?2:0,t,n,i);Zv("Data must be an object, but it was:",o,r);const a=Lv(r,o);let c,u;if(s.merge)c=new Oc(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Uv(t,r,n);if(!o.contains(i))throw new uc(cc.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);jv(e,i)||e.push(i)}c=new Oc(e),u=o.fieldTransforms.filter(e=>c.covers(e.field))}else c=null,u=o.fieldTransforms;return new vv(new mu(a),c,u)}class kv extends gv{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kv}}function Ev(e,t,n){return new wv({ec:3,hc:t.settings.hc,methodName:e._methodName,ic:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}class Cv extends gv{_toFieldTransform(e){return new Nl(e.path,new kl)}isEqual(e){return e instanceof Cv}}class xv extends gv{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=Ev(this,e,!0),n=this.fc.map(e=>Ov(e,t)),r=new El(n);return new Nl(e.path,r)}isEqual(e){return this===e}}class Av extends gv{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=Ev(this,e,!0),n=this.fc.map(e=>Ov(e,t)),r=new xl(n);return new Nl(e.path,r)}isEqual(e){return this===e}}class Dv extends gv{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Dl(e.M,bl(e.M,this.dc));return new Nl(e.path,t)}isEqual(e){return this===e}}function Pv(e,t,n,r){const i=e.lc(1,t,n);Zv("Data must be an object, but it was:",i,r);const s=[],o=mu.empty();xc(r,(e,r)=>{const a=qv(t,e,n);r=(0,Nt.m9)(r);const c=i.oc(a);if(r instanceof kv)s.push(a);else{const e=Ov(r,c);null!=e&&(s.push(a),o.set(a,e))}});const a=new Oc(s);return new _v(o,a,i.fieldTransforms)}function Rv(e,t,n,r,i,s){const o=e.lc(1,t,n),a=[Uv(t,r,n)],c=[i];if(s.length%2!=0)throw new uc(cc.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Uv(t,s[d])),c.push(s[d+1]);const u=[],l=mu.empty();for(let d=a.length-1;d>=0;--d)if(!jv(u,a[d])){const e=a[d];let t=c[d];t=(0,Nt.m9)(t);const n=o.oc(e);if(t instanceof kv)u.push(e);else{const r=Ov(t,n);null!=r&&(u.push(e),l.set(e,r))}}const h=new Oc(u);return new _v(l,h,o.fieldTransforms)}function Nv(e,t,n,r=!1){return Ov(n,e.lc(r?4:3,t))}function Ov(e,t){if(Mv(e=(0,Nt.m9)(e)))return Zv("Unsupported field value:",t,e),Lv(e,t);if(e instanceof gv)return function(e,t){if(!bv(t.ec))throw t.ac(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.ac(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Ov(i,t.uc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,Nt.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return bl(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=kc.fromDate(e);return{timestampValue:Ih(t.M,n)}}if(e instanceof kc){const n=new kc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ih(t.M,n)}}if(e instanceof mv)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof fv)return{bytesValue:kh(t.M,e._byteString)};if(e instanceof Yy){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.ac(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:xh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ac(`Unsupported field value: ${zy(e)}`)}(e,t)}function Lv(e,t){const n={};return Ac(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):xc(e,(e,r)=>{const i=Ov(r,t.sc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Mv(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof kc||e instanceof mv||e instanceof fv||e instanceof Yy||e instanceof gv)}function Zv(e,t,n){if(!Mv(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=zy(n);throw t.ac("an object"===r?e+" a custom object":e+" "+r)}}function Uv(e,t,n){if((t=(0,Nt.m9)(t))instanceof pv)return t._internalPath;if("string"==typeof t)return qv(e,t);throw Vv("Field path arguments must be of type string or ",e,!1,void 0,n)}const Fv=new RegExp("[~\\*/\\[\\]]");function qv(e,t,n){if(t.search(Fv)>=0)throw Vv(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new pv(...t.split("."))._internalPath}catch(r){throw Vv(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Vv(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new uc(cc.INVALID_ARGUMENT,a+e+c)}function jv(e,t){return e.some(e=>e.isEqual(t))}class Bv{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Yy(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new $v(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class $v extends Bv{data(){return super.data()}}function Hv(e,t){return"string"==typeof t?qv(e,t):t instanceof pv?t._internalPath:t._delegate._internalPath}class zv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gv extends Bv{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Kv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Hv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Kv extends Gv{data(e={}){return super.data(e)}}class Wv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new zv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Kv(this._firestore,this._userDataWriter,n.key,n,new zv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new uc(cc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>({type:"added",doc:new Kv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new zv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Kv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new zv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Jv(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Jv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return sc()}}function Yv(e,t){return e instanceof Gv&&t instanceof Gv?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Wv&&t instanceof Wv&&e._firestore===t._firestore&&rv(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Qv(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new uc(cc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xv{}function e_(e,...t){for(const n of t)e=n._apply(e);return e}class t_ extends Xv{constructor(e,t,n){super(),this._c=e,this.wc=t,this.mc=n,this.type="where"}_apply(e){const t=Tv(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new uc(cc.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){c_(o,s);const t=[];for(const n of o)t.push(a_(r,e,n));a={arrayValue:{values:t}}}else a=a_(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||c_(o,s),a=Nv(n,"where",o,"in"===s||"not-in"===s);const c=ju.create(i,s,a);return function(e,t){if(t.S()){const n=ol(e);if(null!==n&&!n.isEqual(t.field))throw new uc(cc.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=sl(e);null!==r&&u_(0,t.field,r)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw new uc(cc.INVALID_ARGUMENT,n===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,c),c}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Qy(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new nl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}class n_ extends Xv{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new uc(cc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new uc(cc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Qu(t,n);return function(e,t){if(null===sl(e)){const n=ol(e);null!==n&&u_(0,n,t.field)}}(e,r),r}(e._query,this._c,this.gc);return new Qy(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new nl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class r_ extends Xv{constructor(e,t,n){super(),this.type=e,this.yc=t,this.Ic=n}_apply(e){return new Qy(e.firestore,e.converter,ll(e._query,this.yc,this.Ic))}}class i_ extends Xv{constructor(e,t,n){super(),this.type=e,this.Tc=t,this.Ec=n}_apply(e){const t=o_(e,this.type,this.Tc,this.Ec);return new Qy(e.firestore,e.converter,function(e,t){return new nl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class s_ extends Xv{constructor(e,t,n){super(),this.type=e,this.Tc=t,this.Ec=n}_apply(e){const t=o_(e,this.type,this.Tc,this.Ec);return new Qy(e.firestore,e.converter,function(e,t){return new nl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function o_(e,t,n,r){if(n[0]=(0,Nt.m9)(n[0]),n[0]instanceof Bv)return function(e,t,n,r,i){if(!r)throw new uc(cc.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of cl(e))if(o.field.isKeyField())s.push(iu(t,r.key));else{const e=r.data.field(o.field);if(qc(e))throw new uc(cc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new uc(cc.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new Yu(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Tv(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new uc(cc.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let c=0;c<i.length;c++){const s=i[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new uc(cc.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof s}`);if(!al(e)&&-1!==s.indexOf("/"))throw new uc(cc.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${s}' contains a slash.`);const n=e.path.child(Pc.fromString(s));if(!Kc.isDocumentKey(n))throw new uc(cc.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new Kc(n);a.push(iu(t,i))}else{const e=Nv(n,r,s);a.push(e)}}return new Yu(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function a_(e,t,n){if("string"==typeof(n=(0,Nt.m9)(n))){if(""===n)throw new uc(cc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!al(t)&&-1!==n.indexOf("/"))throw new uc(cc.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Pc.fromString(n));if(!Kc.isDocumentKey(r))throw new uc(cc.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return iu(e,new Kc(r))}if(n instanceof Yy)return iu(e,n._key);throw new uc(cc.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zy(n)}.`)}function c_(e,t){if(!Array.isArray(e)||0===e.length)throw new uc(cc.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new uc(cc.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function u_(e,t,n){if(!n.isEqual(t))throw new uc(cc.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}const l_={maxAttempts:5};class h_{convertValue(e,t="none"){switch(Yc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Uc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw sc()}}convertObject(e,t){const n={};return xc(e.fields,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new mv(Uc(e.latitude),Uc(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Vc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(jc(e));default:return null}}convertTimestamp(e){const t=Zc(e);return new kc(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Pc.fromString(e);oc(Yh(n));const r=new $c(n.get(1),n.get(3)),i=new Kc(n.popFirst(5));return r.isEqual(t)||nc(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function d_(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class p_ extends h_{constructor(e){super(),this.firestore=e}convertBytes(e){return new fv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yy(this.firestore,null,t)}}class f_{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Tv(e)}set(e,t,n){this._verifyNotCommitted();const r=g_(e,this._firestore),i=d_(r.converter,t,n),s=Iv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Ll.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=g_(e,this._firestore);let s;return s="string"==typeof(t=(0,Nt.m9)(t))||t instanceof pv?Rv(this._dataReader,"WriteBatch.update",i._key,t,n,r):Pv(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,Ll.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=g_(e,this._firestore);return this._mutations=this._mutations.concat(new Kl(t._key,Ll.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new uc(cc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function g_(e,t){if((e=(0,Nt.m9)(e)).firestore!==t)throw new uc(cc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function m_(e){e=Gy(e,Yy);const t=Gy(e.firestore,av);return Fy(uv(t),e._key).then(n=>I_(t,e,n))}class y_ extends h_{constructor(e){super(),this.firestore=e}convertBytes(e){return new fv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yy(this.firestore,null,t)}}function v_(e){e=Gy(e,Qy);const t=Gy(e.firestore,av),n=uv(t),r=new y_(t);return Qv(e._query),qy(n,e._query).then(n=>new Wv(t,r,e,n))}function __(e,t,n){e=Gy(e,Yy);const r=Gy(e.firestore,av),i=d_(e.converter,t,n);return T_(r,[Iv(Tv(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ll.none())])}function b_(e,t,n,...r){e=Gy(e,Yy);const i=Gy(e.firestore,av),s=Tv(i);let o;return o="string"==typeof(t=(0,Nt.m9)(t))||t instanceof pv?Rv(s,"updateDoc",e._key,t,n,r):Pv(s,"updateDoc",e._key,t),T_(i,[o.toMutation(e._key,Ll.exists(!0))])}function w_(e){return T_(Gy(e.firestore,av),[new Kl(e._key,Ll.none())])}function S_(e,...t){var n,r,i;e=(0,Nt.m9)(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||sv(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(sv(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let c,u,l;if(e instanceof Yy)u=Gy(e.firestore,av),l=il(e._key.path),c={next:n=>{t[o]&&t[o](I_(u,e,n))},error:t[o+1],complete:t[o+2]};else{const n=Gy(e,Qy);u=Gy(n.firestore,av),l=n._query;const r=new y_(u);c={next:e=>{t[o]&&t[o](new Wv(u,r,n,e))},error:t[o+1],complete:t[o+2]},Qv(e._query)}return function(e,t,n,r){const i=new by(r),s=new dm(t,i,n);return e.asyncQueue.enqueueAndForget((0,Ut.Z)(function*(){return sm(yield Zy(e),s)})),()=>{i.Aa(),e.asyncQueue.enqueueAndForget((0,Ut.Z)(function*(){return am(yield Zy(e),s)}))}}(uv(u),l,a,c)}function T_(e,t){return function(e,t){const n=new lc;return e.asyncQueue.enqueueAndForget((0,Ut.Z)(function*(){return function(e,t,n){return Am.apply(this,arguments)}(yield My(e),t,n)})),n.promise}(uv(e),t)}function I_(e,t,n){const r=n.docs.get(t._key),i=new y_(e);return new Gv(e,i,t._key,r,new zv(n.hasPendingWrites,n.fromCache),t.converter)}class k_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Tv(e)}get(e){const t=g_(e,this._firestore),n=new p_(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return sc();const r=e[0];if(r.isFoundDocument())return new Bv(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Bv(this._firestore,n,t._key,null,t.converter);throw sc()})}set(e,t,n){const r=g_(e,this._firestore),i=d_(r.converter,t,n),s=Iv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=g_(e,this._firestore);let s;return s="string"==typeof(t=(0,Nt.m9)(t))||t instanceof pv?Rv(this._dataReader,"Transaction.update",i._key,t,n,r):Pv(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=g_(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=g_(e,this._firestore),n=new y_(this._firestore);return super.get(e).then(e=>new Gv(this._firestore,n,t._key,e._document,new zv(!1,!1),t.converter))}}!function(e,t=!0){!function(e){Qa=e}(Ot.SDK_VERSION),(0,Ot._registerComponent)(new Mt.wA("firestore",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=new av(r,new fc(e.getProvider("auth-internal")),new vc(e.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:t},n),i._setSettings(n),i},"PUBLIC")),(0,Ot.registerVersion)("@firebase/firestore","3.4.9",e),(0,Ot.registerVersion)("@firebase/firestore","3.4.9","esm2017")}();class E_{constructor(e){return e}}const C_=new r.OlP("angularfire2.firestore-instances");function x_(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new E_(r)}}const A_={provide:class{constructor(){return(0,Tt.vb)("firestore")}},deps:[[new r.FiY,C_]]},D_={provide:E_,useFactory:function(e,t){const n=(0,Tt.JM)("firestore",e,t);return n&&new E_(n)},deps:[[new r.FiY,C_],It]};let P_=(()=>{class e{constructor(){(0,St.KN)("angularfire",Tt.q4.full,"fst")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[D_,A_]}),e})();function R_(e,...t){return{ngModule:P_,providers:[{provide:C_,useFactory:x_(e),multi:!0,deps:[r.R0b,r.zs3,Tt.HU,kt,[new r.FiY,Zt],[new r.FiY,mn],...t]}]}}const N_=(0,Tt.u3)(ev,!0),O_=(0,Tt.u3)(w_,!0),L_=(0,Tt.u3)(tv,!0),M_=(0,Tt.u3)(m_,!0),Z_=(0,Tt.u3)(v_,!0),U_=(0,Tt.u3)(cv,!0),F_=(0,Tt.u3)(e_,!0),q_=(0,Tt.u3)(__,!0),V_=(0,Tt.u3)(b_,!0);var j_=n(4402),B_=n(9765),$_=n(7971);class H_ extends B_.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new $_.N;return this._value}next(e){super.next(this._value=e)}}var z_=n(4869),G_=n(9796);class K_ extends Fe.L{notifyNext(e,t,n,r,i){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class W_ extends Fe.L{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var J_=n(7444);function Y_(e,t,n,r,i=new W_(e,n,r)){if(!i.closed)return t instanceof Me.y?t.subscribe(i):(0,J_.s)(t)(i)}var Q_=n(6693);const X_={};class eb{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new tb(e,this.resultSelector))}}class tb extends K_{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(X_),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++)this.add(Y_(this,e[n],void 0,n))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n){const r=this.values,i=this.toRespond?r[n]===X_?--this.toRespond:this.toRespond:0;r[n]=t,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const nb=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})();var rb=n(3282);function ib(...e){return(0,rb.J)(1)((0,Le.of)(...e))}var sb=n(9193);function ob(e){return new Me.y(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?(0,j_.D)(n):(0,sb.c)()).subscribe(t)})}var ab=n(2441),cb=n(5345);function ub(e,t){return"function"==typeof t?n=>n.pipe(ub((n,r)=>(0,j_.D)(e(n,r)).pipe((0,Be.U)((e,i)=>t(n,e,r,i))))):t=>t.lift(new lb(e))}class lb{constructor(e){this.project=e}call(e,t){return t.subscribe(new hb(e,this.project))}}class hb extends cb.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const n=new cb.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,cb.ft)(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const db=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();function pb(e){return t=>0===e?(0,sb.c)():t.lift(new fb(e))}class fb{constructor(e){if(this.total=e,this.total<0)throw new db}call(e,t){return t.subscribe(new gb(e,this.total))}}class gb extends Fe.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function mb(...e){const t=e[e.length-1];return(0,z_.K)(t)?(e.pop(),n=>ib(e,n,t)):t=>ib(e,t)}function yb(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new vb(e,t,n))}}class vb{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new _b(e,this.accumulator,this.seed,this.hasSeed))}}class _b extends Fe.L{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function bb(e){return function(t){const n=new wb(e),r=t.lift(n);return n.caught=r}}class wb{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Sb(e,this.selector,this.caught))}}class Sb extends cb.Ds{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new cb.IY(this);this.add(r);const i=(0,cb.ft)(n,r);i!==r&&this.add(i)}}}function Tb(e){return function(t){return 0===e?(0,sb.c)():t.lift(new Ib(e))}}class Ib{constructor(e){if(this.total=e,this.total<0)throw new db}call(e,t){return t.subscribe(new kb(e,this.total))}}class kb extends Fe.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=t++%n;e.next(r[i])}}e.complete()}}function Eb(e=Ab){return t=>t.lift(new Cb(e))}class Cb{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new xb(e,this.errorFactory))}}class xb extends Fe.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function Ab(){return new nb}function Db(e=null){return t=>t.lift(new Pb(e))}class Pb{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new Rb(e,this.defaultValue))}}class Rb extends Fe.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Nb=n(4487);function Ob(e,t){const n=arguments.length>=2;return r=>r.pipe(e?qe((t,n)=>e(t,n,r)):Nb.y,pb(1),n?Db(t):Eb(()=>new nb))}var Lb=n(3342),Mb=n(1307),Zb=n(5319);class Ub{constructor(e){this.callback=e}call(e,t){return t.subscribe(new Fb(e,this.callback))}}class Fb extends Fe.L{constructor(e,t){super(e),this.add(new Zb.w(t))}}class qb{constructor(e,t){this.id=e,this.url=t}}class Vb extends qb{constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class jb extends qb{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Bb extends qb{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $b extends qb{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Hb extends qb{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zb extends qb{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gb extends qb{constructor(e,t,n,r,i){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Kb extends qb{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wb extends qb{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jb{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Yb{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Qb{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xb{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ew{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tw{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nw{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class rw{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function iw(e){return new rw(e)}function sw(e){const t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function ow(e,t,n){const r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let s=0;s<r.length;s++){const t=r[s],n=e[s];if(t.startsWith(":"))i[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function aw(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!cw(e[i],t[i]))return!1;return!0}function cw(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((e,t)=>r[t]===e)}return e===t}function uw(e){return Array.prototype.concat.apply([],e)}function lw(e){return e.length>0?e[e.length-1]:null}function hw(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function dw(e){return(0,r.CqO)(e)?e:(0,r.QGY)(e)?(0,j_.D)(Promise.resolve(e)):(0,Le.of)(e)}const pw={exact:function e(t,n,r){if(!Sw(t.segments,n.segments))return!1;if(!vw(t.segments,n.segments,r))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!t.children[i])return!1;if(!e(t.children[i],n.children[i],r))return!1}return!0},subset:mw},fw={exact:function(e,t){return aw(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>cw(e[n],t[n]))},ignored:()=>!0};function gw(e,t,n){return pw[n.paths](e.root,t.root,n.matrixParams)&&fw[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function mw(e,t,n){return yw(e,t,t.segments,n)}function yw(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!!Sw(i,n)&&!t.hasChildren()&&!!vw(i,n,r)}if(e.segments.length===n.length){if(!Sw(e.segments,n))return!1;if(!vw(e.segments,n,r))return!1;for(const n in t.children){if(!e.children[n])return!1;if(!mw(e.children[n],t.children[n],r))return!1}return!0}{const i=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!!Sw(e.segments,i)&&!!vw(e.segments,i,r)&&!!e.children.primary&&yw(e.children.primary,t,s,r)}}function vw(e,t,n){return t.every((t,r)=>fw[n](e[r].parameters,t.parameters))}class _w{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=iw(this.queryParams)),this._queryParamMap}toString(){return kw.serialize(this)}}class bw{constructor(e,t){this.segments=e,this.children=t,this.parent=null,hw(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ew(this)}}class ww{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=iw(this.parameters)),this._parameterMap}toString(){return Nw(this)}}function Sw(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}class Tw{}class Iw{parse(e){const t=new Uw(e);return new _w(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var t;return`/${Cw(e.root,!0)}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${Aw(t)}=${Aw(e)}`).join("&"):`${Aw(t)}=${Aw(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${t=e.fragment,encodeURI(t)}`:""}`}}const kw=new Iw;function Ew(e){return e.segments.map(e=>Nw(e)).join("/")}function Cw(e,t){if(!e.hasChildren())return Ew(e);if(t){const t=e.children.primary?Cw(e.children.primary,!1):"",n=[];return hw(e.children,(e,t)=>{"primary"!==t&&n.push(`${t}:${Cw(e,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function(e,t){let n=[];return hw(e.children,(e,r)=>{"primary"===r&&(n=n.concat(t(e,r)))}),hw(e.children,(e,r)=>{"primary"!==r&&(n=n.concat(t(e,r)))}),n}(e,(t,n)=>"primary"===n?[Cw(e.children.primary,!1)]:[`${n}:${Cw(t,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${Ew(e)}/${t[0]}`:`${Ew(e)}/(${t.join("//")})`}}function xw(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Aw(e){return xw(e).replace(/%3B/gi,";")}function Dw(e){return xw(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Pw(e){return decodeURIComponent(e)}function Rw(e){return Pw(e.replace(/\+/g,"%20"))}function Nw(e){return`${Dw(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${Dw(e)}=${Dw(t[e])}`).join("")}`;var t}const Ow=/^[^\/()?;=#]+/;function Lw(e){const t=e.match(Ow);return t?t[0]:""}const Mw=/^[^=?&#]+/,Zw=/^[^?&#]+/;class Uw{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new bw([],{}):new bw([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new bw(e,t)),n}parseSegment(){const e=Lw(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ww(Pw(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Lw(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=Lw(this.remaining);e&&(n=e,this.capture(n))}e[Pw(t)]=Pw(n)}parseQueryParam(e){const t=function(e){const t=e.match(Mw);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(Zw);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const r=Rw(t),i=Rw(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(t=[t],e[r]=t),t.push(i)}else e[r]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Lw(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i="primary");const s=this.parseChildren();t[i]=1===Object.keys(s).length?s.primary:new bw([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Fw{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=qw(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=qw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Vw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return Vw(e,this._root).map(e=>e.value)}}function qw(e,t){if(e===t.value)return t;for(const n of t.children){const t=qw(e,n);if(t)return t}return null}function Vw(e,t){if(e===t.value)return[t];for(const n of t.children){const r=Vw(e,n);if(r.length)return r.unshift(t),r}return[]}class jw{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Bw(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class $w extends Fw{constructor(e,t){super(e),this.snapshot=t,Jw(this,e)}toString(){return this.snapshot.toString()}}function Hw(e,t){const n=function(e,t){const n=new Kw([],{},{},"",{},"primary",t,null,e.root,-1,{});return new Ww("",new jw(n,[]))}(e,t),r=new H_([new ww("",{})]),i=new H_({}),s=new H_({}),o=new H_({}),a=new H_(""),c=new zw(r,i,o,a,s,"primary",t,n.root);return c.snapshot=n.root,new $w(new jw(c,[]),n)}class zw{constructor(e,t,n,r,i,s,o,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Be.U)(e=>iw(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Be.U)(e=>iw(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Gw(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&""===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Kw{constructor(e,t,n,r,i,s,o,a,c,u,l){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=c,this._lastPathIndex=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=iw(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=iw(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ww extends Fw{constructor(e,t){super(t),this.url=e,Jw(this,t)}toString(){return Yw(this._root)}}function Jw(e,t){t.value._routerState=e,t.children.forEach(t=>Jw(e,t))}function Yw(e){const t=e.children.length>0?` { ${e.children.map(Yw).join(", ")} } `:"";return`${e.value}${t}`}function Qw(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,aw(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),aw(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!aw(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),aw(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Xw(e,t){return aw(e.params,t.params)&&function(e,t){return Sw(e,t)&&e.every((e,n)=>aw(e.parameters,t[n].parameters))}(e.url,t.url)&&!(!e.parent!=!t.parent)&&(!e.parent||Xw(e.parent,t.parent))}function eS(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function(e,t,n){return t.children.map(t=>{for(const r of n.children)if(e.shouldReuseRoute(t.value,r.value.snapshot))return eS(e,t,r);return eS(e,t)})}(e,t,n);return new jw(r,i)}{if(e.shouldAttach(t.value)){const n=e.retrieve(t.value);if(null!==n){const e=n.route;return tS(t,e),e}}const n=new zw(new H_((r=t.value).url),new H_(r.params),new H_(r.queryParams),new H_(r.fragment),new H_(r.data),r.outlet,r.component,r),i=t.children.map(t=>eS(e,t));return new jw(n,i)}var r}function tS(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(let n=0;n<e.children.length;++n)tS(e.children[n],t.children[n])}function nS(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function rS(e){return"object"==typeof e&&null!=e&&e.outlets}function iS(e,t,n,r,i){let s={};return r&&hw(r,(e,t)=>{s[t]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new _w(n.root===e?t:sS(n.root,e,t),s,i)}function sS(e,t,n){const r={};return hw(e.children,(e,i)=>{r[i]=e===t?n:sS(e,t,n)}),new bw(e.segments,r)}class oS{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&nS(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(rS);if(r&&r!==lw(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class aS{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function cS(e,t,n){if(e||(e=new bw([],{})),0===e.segments.length&&e.hasChildren())return uS(e,t,n);const r=function(e,t,n){let r=0,i=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;const t=e.segments[i],o=n[r];if(rS(o))break;const a=`${o}`,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&c&&"object"==typeof c&&void 0===c.outlets){if(!pS(a,c,t))return s;r+=2}else{if(!pS(a,{},t))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new bw(e.segments.slice(0,r.pathIndex),{});return t.children.primary=new bw(e.segments.slice(r.pathIndex),e.children),uS(t,0,i)}return r.match&&0===i.length?new bw(e.segments,{}):r.match&&!e.hasChildren()?lS(e,t,n):r.match?uS(e,0,i):lS(e,t,n)}function uS(e,t,n){if(0===n.length)return new bw(e.segments,{});{const r=function(e){return rS(e[0])?e[0].outlets:{primary:e}}(n),i={};return hw(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=cS(e.children[r],t,n))}),hw(e.children,(e,t)=>{void 0===r[t]&&(i[t]=e)}),new bw(e.segments,i)}}function lS(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const s=n[i];if(rS(s)){const e=hS(s.outlets);return new bw(r,e)}if(0===i&&nS(n[0])){r.push(new ww(e.segments[t].path,dS(n[0]))),i++;continue}const o=rS(s)?s.outlets.primary:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&nS(a)?(r.push(new ww(o,dS(a))),i+=2):(r.push(new ww(o,{})),i++)}return new bw(r,{})}function hS(e){const t={};return hw(e,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=lS(new bw([],{}),0,e))}),t}function dS(e){const t={};return hw(e,(e,n)=>t[n]=`${e}`),t}function pS(e,t,n){return e==n.path&&aw(t,n.parameters)}class fS{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Qw(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=Bw(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),hw(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(e,t,i.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,i=Bw(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const r=Bw(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new tw(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Xb(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(Qw(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,i.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),gS(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=i,t.outlet&&t.outlet.activateWith(r,i),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function gS(e){Qw(e.value),e.children.forEach(gS)}class mS{constructor(e,t){this.routes=e,this.module=t}}function yS(e){return"function"==typeof e}function vS(e){return e instanceof _w}const _S=Symbol("INITIAL_VALUE");function bS(){return ub(e=>function(...e){let t,n;return(0,z_.K)(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&(0,G_.k)(e[0])&&(e=e[0]),(0,Q_.n)(e,n).lift(new eb(t))}(e.map(e=>e.pipe(pb(1),mb(_S)))).pipe(yb((e,t)=>{let n=!1;return t.reduce((e,r,i)=>{if(e!==_S)return e;if(r===_S&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||vS(r))return r}return e},e)},_S),qe(e=>e!==_S),(0,Be.U)(e=>vS(e)?e:!0===e),pb(1)))}let wS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&r._UZ(0,"router-outlet")},directives:function(){return[_T]},encapsulation:2}),e})();function SS(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];TS(r,IS(t,r))}}function TS(e,t){e.children&&SS(e.children,t)}function IS(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function kS(e){const t=e.children&&e.children.map(kS),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=wS),n}function ES(e){return e.outlet||"primary"}function CS(e,t){const n=e.filter(e=>ES(e)===t);return n.push(...e.filter(e=>ES(e)!==t)),n}const xS={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function AS(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},xS):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(t.matcher||ow)(n,e,t);if(!i)return Object.assign({},xS);const s={};hw(i.posParams,(e,t)=>{s[t]=e.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function DS(e,t,n,r,i="corrected"){if(n.length>0&&function(e,t,n){return n.some(n=>PS(e,t,n)&&"primary"!==ES(n))}(e,n,r)){const i=new bw(t,function(e,t,n,r){const i={};i.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&"primary"!==ES(s)){const n=new bw([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,i[ES(s)]=n}return i}(e,t,r,new bw(n,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>PS(e,t,n))}(e,n,r)){const s=new bw(e.segments,function(e,t,n,r,i,s){const o={};for(const a of r)if(PS(e,n,a)&&!i[ES(a)]){const n=new bw([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===s?e.segments.length:t.length,o[ES(a)]=n}return Object.assign(Object.assign({},i),o)}(e,t,n,r,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const s=new bw(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function PS(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function RS(e,t,n,r){return!!(ES(e)===r||"primary"!==r&&PS(t,n,e))&&("**"===e.path||AS(t,e,n).matched)}function NS(e,t,n){return 0===t.length&&!e.children[n]}class OS{constructor(e){this.segmentGroup=e||null}}class LS{constructor(e){this.urlTree=e}}function MS(e){return new Me.y(t=>t.error(new OS(e)))}function ZS(e){return new Me.y(t=>t.error(new LS(e)))}function US(e){return new Me.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class FS{constructor(e,t,n,i,s){this.configLoader=t,this.urlSerializer=n,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(r.h0i)}apply(){const e=DS(this.urlTree.root,[],[],this.config).segmentGroup,t=new bw(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,"primary").pipe((0,Be.U)(e=>this.createUrlTree(qS(e),this.urlTree.queryParams,this.urlTree.fragment))).pipe(bb(e=>{if(e instanceof LS)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof OS)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe((0,Be.U)(t=>this.createUrlTree(qS(t),e.queryParams,e.fragment))).pipe(bb(e=>{if(e instanceof OS)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new bw([],{primary:e}):e;return new _w(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe((0,Be.U)(e=>new bw([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,j_.D)(r).pipe(Ue(r=>{const i=n.children[r],s=CS(t,r);return this.expandSegmentGroup(e,s,i,r).pipe((0,Be.U)(e=>({segment:e,outlet:r})))}),yb((e,t)=>(e[t.outlet]=t.segment,e),{}),function(e,t){const n=arguments.length>=2;return r=>r.pipe(e?qe((t,n)=>e(t,n,r)):Nb.y,Tb(1),n?Db(t):Eb(()=>new nb))}())}expandSegment(e,t,n,r,i,s){return(0,j_.D)(n).pipe(Ue(o=>this.expandSegmentAgainstRoute(e,t,n,o,r,i,s).pipe(bb(e=>{if(e instanceof OS)return(0,Le.of)(null);throw e}))),Ob(e=>!!e),bb((e,n)=>{if(e instanceof nb||"EmptyError"===e.name){if(NS(t,r,i))return(0,Le.of)(new bw([],{}));throw new OS(t)}throw e}))}expandSegmentAgainstRoute(e,t,n,r,i,s,o){return RS(r,t,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s):MS(t):MS(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?ZS(i):this.lineralizeSegments(n,i).pipe((0,Ze.zg)(n=>{const i=new bw(n,{});return this.expandSegment(e,i,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:c,positionalParamSegments:u}=AS(t,r,i);if(!o)return MS(t);const l=this.applyRedirectCommands(a,r.redirectTo,u);return r.redirectTo.startsWith("/")?ZS(l):this.lineralizeSegments(r,l).pipe((0,Ze.zg)(r=>this.expandSegment(e,t,n,r.concat(i.slice(c)),s,!1)))}matchSegmentAgainstRoute(e,t,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,Le.of)(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe((0,Be.U)(e=>(n._loadedConfig=e,new bw(r,{})))):(0,Le.of)(new bw(r,{}));const{matched:s,consumedSegments:o,lastChild:a}=AS(t,n,r);if(!s)return MS(t);const c=r.slice(a);return this.getChildConfig(e,n,r).pipe((0,Ze.zg)(e=>{const r=e.module,s=e.routes,{segmentGroup:a,slicedSegments:u}=DS(t,o,c,s),l=new bw(a.segments,a.children);if(0===u.length&&l.hasChildren())return this.expandChildren(r,s,l).pipe((0,Be.U)(e=>new bw(o,e)));if(0===s.length&&0===u.length)return(0,Le.of)(new bw(o,{}));const h=ES(n)===i;return this.expandSegment(r,l,s,u,h?"primary":i,!0).pipe((0,Be.U)(e=>new bw(o.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?(0,Le.of)(new mS(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,Le.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe((0,Ze.zg)(n=>n?this.configLoader.load(e.injector,t).pipe((0,Be.U)(e=>(t._loadedConfig=e,e))):function(e){return new Me.y(t=>t.error(sw(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):(0,Le.of)(new mS([],e))}runCanLoadGuards(e,t,n){const r=t.canLoad;if(!r||0===r.length)return(0,Le.of)(!0);const i=r.map(r=>{const i=e.get(r);let s;if(function(e){return e&&yS(e.canLoad)}(i))s=i.canLoad(t,n);else{if(!yS(i))throw new Error("Invalid CanLoad guard");s=i(t,n)}return dw(s)});return(0,Le.of)(i).pipe(bS(),(0,Lb.b)(e=>{if(!vS(e))return;const t=sw(`Redirecting to "${this.urlSerializer.serialize(e)}"`);throw t.url=e,t}),(0,Be.U)(e=>!0===e))}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,Le.of)(n);if(r.numberOfChildren>1||!r.children.primary)return US(e.redirectTo);r=r.children.primary}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const i=this.createSegmentGroup(e,t.root,n,r);return new _w(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return hw(e,(e,r)=>{if("string"==typeof e&&e.startsWith(":")){const i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const i=this.createSegments(e,t.segments,n,r);let s={};return hw(t.children,(t,i)=>{s[i]=this.createSegmentGroup(e,t,n,r)}),new bw(i,s)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function qS(e){const t={};for(const n of Object.keys(e.children)){const r=qS(e.children[n]);(r.segments.length>0||r.hasChildren())&&(t[n]=r)}return function(e){if(1===e.numberOfChildren&&e.children.primary){const t=e.children.primary;return new bw(e.segments.concat(t.segments),t.children)}return e}(new bw(e.segments,t))}class VS{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class jS{constructor(e,t){this.component=e,this.route=t}}function BS(e,t,n){const r=e._root;return HS(r,t?t._root:null,n,[r.value])}function $S(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function HS(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Bw(t);return e.children.forEach(e=>{!function(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Sw(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Sw(e.url,t.url)||!aw(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xw(e,t)||!aw(e.queryParams,t.queryParams);case"paramsChange":default:return!Xw(e,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new VS(r)):(s.data=o.data,s._resolvedData=o._resolvedData),HS(e,t,s.component?a?a.children:null:n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new jS(a.outlet.component,o))}else o&&zS(t,a,i),i.canActivateChecks.push(new VS(r)),HS(e,null,s.component?a?a.children:null:n,r,i)}(e,s[e.value.outlet],n,r.concat([e.value]),i),delete s[e.value.outlet]}),hw(s,(e,t)=>zS(e,n.getContext(t),i)),i}function zS(e,t,n){const r=Bw(e),i=e.value;hw(r,(e,r)=>{zS(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new jS(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class GS{}function KS(e){return new Me.y(t=>t.error(e))}class WS{constructor(e,t,n,r,i,s){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const e=DS(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,"primary");if(null===t)return null;const n=new Kw([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new jw(n,t),i=new Ww(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(e){const t=e.value,n=Gw(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=[];for(const i of Object.keys(t.children)){const r=t.children[i],s=CS(e,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=YS(n);return r.sort((e,t)=>"primary"===e.value.outlet?-1:"primary"===t.value.outlet?1:e.value.outlet.localeCompare(t.value.outlet)),r}processSegment(e,t,n,r){for(const i of e){const e=this.processSegmentAgainstRoute(i,t,n,r);if(null!==e)return e}return NS(t,n,r)?[]:null}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo||!RS(e,t,n,r))return null;let i,s=[],o=[];if("**"===e.path){const r=n.length>0?lw(n).parameters:{};i=new Kw(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,eT(e),ES(e),e.component,e,QS(t),XS(t)+n.length,tT(e))}else{const r=AS(t,e,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new Kw(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,eT(e),ES(e),e.component,e,QS(t),XS(t)+s.length,tT(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:u}=DS(t,s,o,a.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const e=this.processChildren(a,c);return null===e?null:[new jw(i,e)]}if(0===a.length&&0===u.length)return[new jw(i,[])];const l=ES(e)===r,h=this.processSegment(a,c,u,l?"primary":r);return null===h?null:[new jw(i,h)]}}function JS(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function YS(e){const t=[],n=new Set;for(const r of e){if(!JS(r)){t.push(r);continue}const e=t.find(e=>r.value.routeConfig===e.value.routeConfig);void 0!==e?(e.children.push(...r.children),n.add(e)):t.push(r)}for(const r of n){const e=YS(r.children);t.push(new jw(r.value,e))}return t.filter(e=>!n.has(e))}function QS(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function XS(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function eT(e){return e.data||{}}function tT(e){return e.resolve||{}}function nT(e){return ub(t=>{const n=e(t);return n?(0,j_.D)(n).pipe((0,Be.U)(()=>t)):(0,Le.of)(t)})}class rT extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const iT=new r.OlP("ROUTES");class sT{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const n=this.loadModuleFactory(t.loadChildren).pipe((0,Be.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const i=n.create(e);return new mS(uw(i.injector.get(iT,void 0,r.XFs.Self|r.XFs.Optional)).map(kS),i)}),bb(e=>{throw t._loader$=void 0,e}));return t._loader$=new ab.c(n,()=>new B_.xQ).pipe((0,Mb.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,j_.D)(this.loader.load(e)):dw(e()).pipe((0,Ze.zg)(e=>e instanceof r.YKP?(0,Le.of)(e):(0,j_.D)(this.compiler.compileModuleAsync(e))))}}class oT{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new aT,this.attachRef=null}}class aT{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new oT,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class cT{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function uT(e){throw e}function lT(e,t,n){return t.parse("/")}function hT(e,t){return(0,Le.of)(null)}const dT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let fT=(()=>{class e{constructor(e,t,n,i,s,o,a,c){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=i,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new B_.xQ,this.errorHandler=uT,this.malformedUriErrorHandler=lT,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:hT,afterPreactivation:hT},this.urlHandlingStrategy=new cT,this.routeReuseStrategy=new rT,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(r.h0i),this.console=s.get(r.c2e);const u=s.get(r.R0b);this.isNgZoneEnabled=u instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=new _w(new bw([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new sT(o,a,e=>this.triggerEvent(new Jb(e)),e=>this.triggerEvent(new Yb(e))),this.routerState=Hw(this.currentUrlTree,this.rootComponentType),this.transitions=new H_({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const t=this.events;return e.pipe(qe(e=>0!==e.id),(0,Be.U)(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),ub(e=>{let n=!1,r=!1;return(0,Le.of)(e).pipe((0,Lb.b)(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ub(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return(0,Le.of)(e).pipe(ub(e=>{const n=this.transitions.getValue();return t.next(new Vb(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?sb.E:Promise.resolve(e)}),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,ub(e=>function(e,t,n,r,i){return new FS(e,t,n,r,i).apply()}(r,i,s,e.extractedUrl,o).pipe((0,Be.U)(t=>Object.assign(Object.assign({},e),{urlAfterRedirects:t}))))),(0,Lb.b)(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,n,r,i){return(0,Ze.zg)(s=>function(e,t,n,r,i="emptyOnly",s="legacy"){try{const o=new WS(e,t,n,r,i,s).recognize();return null===o?KS(new GS):(0,Le.of)(o)}catch(o){return KS(o)}}(e,t,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe((0,Be.U)(e=>Object.assign(Object.assign({},s),{targetSnapshot:e}))))}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Lb.b)(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,e),this.browserUrlTree=e.urlAfterRedirects);const n=new Hb(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=e,a=new Vb(n,this.serializeUrl(r),i,s);t.next(a);const c=Hw(r,this.rootComponentType).snapshot;return(0,Le.of)(Object.assign(Object.assign({},e),{targetSnapshot:c,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),sb.E}),nT(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,Lb.b)(e=>{const t=new zb(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(0,Be.U)(e=>Object.assign(Object.assign({},e),{guards:BS(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return(0,Ze.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,Le.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return(0,j_.D)(e).pipe((0,Ze.zg)(e=>function(e,t,n,r,i){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,Le.of)(!0);const o=s.map(s=>{const o=$S(s,t,i);let a;if(function(e){return e&&yS(e.canDeactivate)}(o))a=dw(o.canDeactivate(e,t,n,r));else{if(!yS(o))throw new Error("Invalid CanDeactivate guard");a=dw(o(e,t,n,r))}return a.pipe(Ob())});return(0,Le.of)(o).pipe(bS())}(e.component,e.route,n,t,r)),Ob(e=>!0!==e,!0))}(o,r,i,e).pipe((0,Ze.zg)(n=>n&&function(e){return"boolean"==typeof e}(n)?function(e,t,n,r){return(0,j_.D)(t).pipe(Ue(t=>ib(function(e,t){return null!==e&&t&&t(new Qb(e)),(0,Le.of)(!0)}(t.route.parent,r),function(e,t){return null!==e&&t&&t(new ew(e)),(0,Le.of)(!0)}(t.route,r),function(e,t,n){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>ob(()=>{const i=t.guards.map(i=>{const s=$S(i,t.node,n);let o;if(function(e){return e&&yS(e.canActivateChild)}(s))o=dw(s.canActivateChild(r,e));else{if(!yS(s))throw new Error("Invalid CanActivateChild guard");o=dw(s(r,e))}return o.pipe(Ob())});return(0,Le.of)(i).pipe(bS())}));return(0,Le.of)(i).pipe(bS())}(e,t.path,n),function(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Le.of)(!0);const i=r.map(r=>ob(()=>{const i=$S(r,t,n);let s;if(function(e){return e&&yS(e.canActivate)}(i))s=dw(i.canActivate(t,e));else{if(!yS(i))throw new Error("Invalid CanActivate guard");s=dw(i(t,e))}return s.pipe(Ob())}));return(0,Le.of)(i).pipe(bS())}(e,t.route,n))),Ob(e=>!0!==e,!0))}(r,s,e,t):(0,Le.of)(n)),(0,Be.U)(e=>Object.assign(Object.assign({},n),{guardsResult:e})))})}(this.ngModule.injector,e=>this.triggerEvent(e)),(0,Lb.b)(e=>{if(vS(e.guardsResult)){const t=sw(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}const t=new Gb(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),qe(e=>!!e.guardsResult||(this.restoreHistory(e),this.cancelNavigationTransition(e,""),!1)),nT(e=>{if(e.guards.canActivateChecks.length)return(0,Le.of)(e).pipe((0,Lb.b)(e=>{const t=new Kb(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),ub(e=>{let t=!1;return(0,Le.of)(e).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,Ze.zg)(e=>{const{targetSnapshot:t,guards:{canActivateChecks:i}}=e;if(!i.length)return(0,Le.of)(e);let s=0;return(0,j_.D)(i).pipe(Ue(e=>function(e,t,n,r){return function(e,t,n,r){const i=Object.keys(e);if(0===i.length)return(0,Le.of)({});const s={};return(0,j_.D)(i).pipe((0,Ze.zg)(i=>function(e,t,n,r){const i=$S(e,t,r);return dw(i.resolve?i.resolve(t,n):i(t,n))}(e[i],t,n,r).pipe((0,Lb.b)(e=>{s[i]=e}))),Tb(1),(0,Ze.zg)(()=>Object.keys(s).length===i.length?(0,Le.of)(s):sb.E))}(e._resolve,e,t,r).pipe((0,Be.U)(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),Gw(e,n).resolve),null)))}(e.route,t,n,r)),(0,Lb.b)(()=>s++),Tb(1),(0,Ze.zg)(t=>s===i.length?(0,Le.of)(e):sb.E))})),(0,Lb.b)({next:()=>t=!0,complete:()=>{t||(this.restoreHistory(e),this.cancelNavigationTransition(e,"At least one route resolver didn't emit any value."))}}));var n,r}),(0,Lb.b)(e=>{const t=new Wb(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),nT(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,Be.U)(e=>{const t=function(e,t,n){const r=eS(e,t._root,n?n._root:void 0);return new $w(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),(0,Lb.b)(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,e),this.browserUrlTree=e.urlAfterRedirects)}),(s=this.rootContexts,o=this.routeReuseStrategy,a=e=>this.triggerEvent(e),(0,Be.U)(e=>(new fS(o,e.targetRouterState,e.currentRouterState,a).activate(s),e))),(0,Lb.b)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){const t=`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(e),this.cancelNavigationTransition(e,t)):this.cancelNavigationTransition(e,t)}this.currentNavigation=null},e=>e.lift(new Ub(i))),bb(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=vS(n.url);r||(this.navigated=!0,this.restoreHistory(e,!0));const i=new Bb(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(i),r?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(t,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.restoreHistory(e,!0);const r=new $b(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch(yu){e.reject(yu)}}var i;return sb.E}));var i,s,o,a}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const t=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,t)&&setTimeout(()=>{const{source:e,state:n,urlTree:r}=t,i={replaceUrl:!0};if(n){const e=Object.assign({},n);delete e.navigationId,delete e.\u0275routerPageId,0!==Object.keys(e).length&&(i.state=e)}this.scheduleNavigation(r,e,n,i)},0),this.lastLocationChangeInfo=t}))}extractLocationChangeInfoFromEvent(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,t){if(!e)return!0;const n=t.urlTree.toString()===e.urlTree.toString();return!(t.transitionId===e.transitionId&&n&&("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){SS(e),this.config=e.map(kS),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=t,a=n||this.routerState.root,c=o?this.currentUrlTree.fragment:i;let u=null;switch(s){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}return null!==u&&(u=this.removeEmptyProps(u)),function(e,t,n,r,i){if(0===n.length)return iS(t.root,t.root,t,r,i);const s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new oS(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const t={};return hw(r.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return"string"!=typeof r?[...e,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[...e,r]},[]);return new oS(n,t,r)}(n);if(s.toRoot())return iS(t.root,new bw([],{}),t,r,i);const o=function(e,t,n){if(e.isAbsolute)return new aS(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const e=n.snapshot._urlSegment;return new aS(e,e===t.root,0)}const r=nS(e.commands[0])?0:1;return function(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new aS(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(s,t,e),a=o.processChildren?uS(o.segmentGroup,o.index,s.commands):cS(o.segmentGroup,o.index,s.commands);return iS(o.segmentGroup,a,t,r,i)}(a,this.currentUrlTree,e,u,null!=c?c:null)}navigateByUrl(e,t={skipLocationChange:!1}){const n=vS(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){let n;if(n=!0===t?Object.assign({},dT):!1===t?Object.assign({},pT):t,vS(e))return gw(this.currentUrlTree,e,n);const r=this.parseUrl(e);return gw(this.currentUrlTree,r,n)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new jb(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,r,i){var s,o;if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),c="imperative"!==t&&"imperative"===(null==a?void 0:a.source),u=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===e.toString();if(c&&u)return Promise.resolve(!0);let l,h,d;i?(l=i.resolve,h=i.reject,d=i.promise):d=new Promise((e,t)=>{l=e,h=t});const p=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),f=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(s=this.browserPageId)&&void 0!==s?s:0:(null!==(o=this.browserPageId)&&void 0!==o?o:0)+1):f=0,this.setTransition({id:p,targetPageId:f,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:l,reject:h,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(e=>Promise.reject(e))}setBrowserUrl(e,t){const n=this.urlSerializer.serialize(e),r=Object.assign(Object.assign({},t.extras.state),this.generateNgRouterState(t.id,t.targetPageId));this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}restoreHistory(e,t=!1){var n,r;if("computed"===this.canceledNavigationResolution){const t=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)||0===t?this.currentUrlTree===(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)&&0===t&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(t)}else"replace"===this.canceledNavigationResolution&&(t&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,t){const n=new Bb(e.id,this.serializeUrl(e.extractedUrl),t);this.triggerEvent(n),e.resolve(!1)}generateNgRouterState(e,t){return"computed"===this.canceledNavigationResolution?{navigationId:e,"\u0275routerPageId":t}:{navigationId:e}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.DyG),r.LFG(Tw),r.LFG(aT),r.LFG(w),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),gT=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.route=t,this.commands=[],this.onChanges=new B_.xQ,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}onClick(){const e={skipLocationChange:yT(this.skipLocationChange),replaceUrl:yT(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:yT(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(fT),r.Y36(zw),r.$8M("tabindex"),r.Y36(r.Qsj),r.Y36(r.SBq))},e.\u0275dir=r.lG2({type:e,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,t){1&e&&r.NdJ("click",function(){return t.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),e})(),mT=(()=>{class e{constructor(e,t,n){this.router=e,this.route=t,this.locationStrategy=n,this.commands=[],this.onChanges=new B_.xQ,this.subscription=e.events.subscribe(e=>{e instanceof jb&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,t,n,r,i){if(0!==e||t||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const s={skipLocationChange:yT(this.skipLocationChange),replaceUrl:yT(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,s),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:yT(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(fT),r.Y36(zw),r.Y36(m))},e.\u0275dir=r.lG2({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&r.NdJ("click",function(e){return t.onClick(e.button,e.ctrlKey,e.shiftKey,e.altKey,e.metaKey)}),2&e&&(r.Ikx("href",t.href,r.LSH),r.uIk("target",t.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),e})();function yT(e){return""===e||!!e}let vT=(()=>{class e{constructor(e,t,n,r,i,s){this.router=e,this.element=t,this.renderer=n,this.cdr=r,this.link=i,this.linkWithHref=s,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=e.events.subscribe(e=>{e instanceof jb&&this.update()})}ngAfterContentInit(){(0,Le.of)(this.links.changes,this.linksWithHrefs.changes,(0,Le.of)(null)).pipe((0,rb.J)()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var e;null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(e=>!!e).map(e=>e.onChanges);this.linkInputChangesSubscription=(0,j_.D)(t).pipe((0,rb.J)()).subscribe(e=>{this.isActive!==this.isLinkActive(this.router)(e)&&this.update()})}set routerLinkActive(e){const t=Array.isArray(e)?e:e.split(" ");this.classes=t.filter(e=>!!e)}ngOnChanges(e){this.update()}ngOnDestroy(){var e;this.routerEventsSubscription.unsubscribe(),null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(t=>{e?this.renderer.addClass(this.element.nativeElement,t):this.renderer.removeClass(this.element.nativeElement,t)}))})}isLinkActive(e){const t="paths"in this.routerLinkActiveOptions?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return n=>e.isActive(n.urlTree,t)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(fT),r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(r.sBO),r.Y36(gT,8),r.Y36(mT,8))},e.\u0275dir=r.lG2({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(e,t,n){if(1&e&&(r.Suo(n,gT,5),r.Suo(n,mT,5)),2&e){let e;r.iGM(e=r.CRH())&&(t.links=e),r.iGM(e=r.CRH())&&(t.linksWithHrefs=e)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[r.TTD]}),e})(),_T=(()=>{class e{constructor(e,t,n,i,s){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||"primary",e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new bT(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(aT),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},e.\u0275dir=r.lG2({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class bT{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===zw?this.route:e===aT?this.childContexts:this.parent.get(e,t)}}class wT{}class ST{preload(e,t){return(0,Le.of)(null)}}let TT=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=new sT(t,n,t=>e.triggerEvent(new Jb(t)),t=>e.triggerEvent(new Yb(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(qe(e=>e instanceof jb),Ue(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(r.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return(0,j_.D)(n).pipe((0,rb.J)(),(0,Be.U)(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>(t._loadedConfig?(0,Le.of)(t._loadedConfig):this.loader.load(e.injector,t)).pipe((0,Ze.zg)(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(fT),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(wT))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),IT=(()=>{class e{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Vb?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof jb&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof nw&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new nw(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(fT),r.LFG(W),r.LFG(void 0))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const kT=new r.OlP("ROUTER_CONFIGURATION"),ET=new r.OlP("ROUTER_FORROOT_GUARD"),CT=[w,{provide:Tw,useClass:Iw},{provide:fT,useFactory:function(e,t,n,r,i,s,o,a={},c,u){const l=new fT(null,e,t,n,r,i,s,uw(o));return c&&(l.urlHandlingStrategy=c),u&&(l.routeReuseStrategy=u),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(e=>{var t,n;null===(t=console.group)||void 0===t||t.call(console,`Router Event: ${e.constructor.name}`),console.log(e.toString()),console.log(e),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[Tw,aT,w,r.zs3,r.v3s,r.Sil,iT,kT,[class{},new r.FiY],[class{},new r.FiY]]},aT,{provide:zw,useFactory:function(e){return e.routerState.root},deps:[fT]},{provide:r.v3s,useClass:r.EAV},TT,ST,class{preload(e,t){return t().pipe(bb(()=>(0,Le.of)(null)))}},{provide:kT,useValue:{enableTracing:!1}}];function xT(){return new r.PXZ("Router",fT)}let AT=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[CT,NT(t),{provide:ET,useFactory:RT,deps:[[fT,new r.FiY,new r.tp0]]},{provide:kT,useValue:n||{}},{provide:m,useFactory:PT,deps:[a,[new r.tBr(v),new r.FiY],kT]},{provide:IT,useFactory:DT,deps:[fT,W,kT]},{provide:wT,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:ST},{provide:r.PXZ,multi:!0,useFactory:xT},[OT,{provide:r.ip1,multi:!0,useFactory:LT,deps:[OT]},{provide:ZT,useFactory:MT,deps:[OT]},{provide:r.tb,multi:!0,useExisting:ZT}]]}}static forChild(t){return{ngModule:e,providers:[NT(t)]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(ET,8),r.LFG(fT,8))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();function DT(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new IT(e,t,n)}function PT(e,t,n={}){return n.useHash?new b(e,t):new _(e,t)}function RT(e){return"guarded"}function NT(e){return[{provide:r.deG,multi:!0,useValue:e},{provide:iT,multi:!0,useValue:e}]}let OT=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new B_.xQ}appInitializer(){return this.injector.get(u,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let e=null;const t=new Promise(t=>e=t),n=this.injector.get(fT),r=this.injector.get(kT);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),e(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,Le.of)(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()):e(!0),t})}bootstrapListener(e){const t=this.injector.get(kT),n=this.injector.get(TT),i=this.injector.get(IT),s=this.injector.get(fT),o=this.injector.get(r.z2F);e===o.components[0]&&("enabledNonBlocking"!==t.initialNavigation&&void 0!==t.initialNavigation||s.initialNavigation(),n.setUpPreloading(),i.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.zs3))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function LT(e){return e.appInitializer.bind(e)}function MT(e){return e.bootstrapListener.bind(e)}const ZT=new r.OlP("Router Initializer");var UT=n(205),FT=n(3637);class qT{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new VT(e,this.dueTime,this.scheduler))}}class VT extends Fe.L{constructor(e,t,n){super(e),this.dueTime=t,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(jT,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function jT(e){e.debouncedNext()}var BT=n(8939),$T=n(156);class HT{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class zT{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new HT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(t=>{if(e)return e(new HT(t,this,this._ref))},t)}on(e,t,n,r){let i;return t&&(i="function"==typeof t?e=>t(new HT(e,this,this._ref)):{next:t.next?e=>t.next(new HT(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}class GT{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new KT(e,this._service))}get items(){return this._delegate.items.map(e=>new KT(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class KT{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return Tr(e,t)}(this._delegate,e);return new KT(t,this.storage)}get root(){return new KT(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new KT(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new zT(function(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new vr(e,new zn(t),n)}(e=(0,Nt.m9)(e),t,n)}(this._delegate,e,t),this)}putString(e,t=qn.RAW,n){this._throwIfRoot("putString");const r=jn(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new zT(new vr(this._delegate,new zn(r.data,!0),i),this)}listAll(){return function(e){return function(e){const t={prefixes:[],items:[]};return br(e,t).then(()=>t)}(e=(0,Nt.m9)(e))}(this._delegate).then(e=>new GT(e,this.storage))}list(e){return function(e,t){return Sr(e=(0,Nt.m9)(e),t)}(this._delegate,e||void 0).then(e=>new GT(e,this.storage))}getMetadata(){return function(e){return function(e){e._throwIfRoot("getMetadata");const t=or(e.storage,e._location,Qn());return e.storage.makeRequestWithTokens(t,yr)}(e=(0,Nt.m9)(e))}(this._delegate)}updateMetadata(e){return function(e,t){return function(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=Nn(t.fullServerUrl(),e.host,e._protocol),s=er(n,r),o=e.maxOperationRetryTime,a=new tr(i,"PATCH",rr(e,r),o);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=s,a.errorHandler=sr(t),a}(e.storage,e._location,t,Qn());return e.storage.makeRequestWithTokens(n,yr)}(e=(0,Nt.m9)(e),t)}(this._delegate,e)}getDownloadURL(){return function(e){return function(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Nn(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new tr(r,"GET",function(e,t){return function(n,r){const i=Xn(e,r,t);return nr(null!==i),function(e,t,n,r){const i=Gn(t);if(null===i)return null;if(!An(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(t=>{const i=e.fullPath;return Nn("/b/"+o(e.bucket)+"/o/"+o(i),n,r)+On({alt:"media",token:t})})[0]}(i,r,e.host,e._protocol)}}(e,n),i);return s.errorHandler=sr(t),s}(e.storage,e._location,Qn());return e.storage.makeRequestWithTokens(t,yr).then(e=>{if(null===e)throw new yn("no-download-url","The given file does not have any download URLs.");return e})}(e=(0,Nt.m9)(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),Ar(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw In(e)}}class WT{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(JT(e))throw Sn("ref() expected a child path but got a URL, use refFromURL instead.");return new KT(Dr(this._delegate,e),this)}refFromURL(e){if(!JT(e))throw Sn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Cn.makeFromUrl(e,this._delegate.host)}catch(t){throw Sn("refFromUrl() expected a valid full URL but got an invalid one.")}return new KT(Dr(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,n={}){!function(e,t,n,r={}){!function(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"==typeof i?i:(0,Nt.Sg)(i,e.app.options.projectId))}(e,t,n,r)}(this._delegate,e,t,n)}}function JT(e){return/^[A-Za-z]+:\/\//.test(e)}function YT(e,{instanceIdentifier:t}){const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("storage").getImmediate({identifier:t});return new WT(n,r)}!function(e){const t={TaskState:dr,TaskEvent:hr,StringFormat:qn,Storage:WT,Reference:KT};e.INTERNAL.registerComponent(new Mt.wA("storage-compat",YT,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.14")}($T.Z);var QT=n(7841);function XT(e){const t=function(e){return new Me.y(t=>{const n=e=>t.next(e);n(e.snapshot);const r=e.on("state_changed",n);return e.then(e=>{n(e),t.complete()},r=>{n(e.snapshot),(e=>{t.error(e)})(r)}),function(){r()}}).pipe(function(e,t=FT.P){return n=>n.lift(new qT(e,t))}(0))}(e);return{task:e,then:e.then.bind(e),catch:e.catch.bind(e),pause:e.pause.bind(e),cancel:e.cancel.bind(e),resume:e.resume.bind(e),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,Be.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function eI(e){return{getDownloadURL:()=>(0,Le.of)(void 0).pipe(Tt.fc,ub(()=>e.getDownloadURL()),Tt.iC),getMetadata:()=>(0,Le.of)(void 0).pipe(Tt.fc,ub(()=>e.getMetadata()),Tt.iC),delete:()=>(0,j_.D)(e.delete()),child:t=>eI(e.child(t)),updateMetadata:t=>(0,j_.D)(e.updateMetadata(t)),put:(t,n)=>XT(e.put(t,n)),putString:(t,n,r)=>XT(e.putString(t,n,r)),list:t=>(0,j_.D)(e.list(t)),listAll:()=>(0,j_.D)(e.listAll())}}const tI=new r.OlP("angularfire2.storageBucket"),nI=new r.OlP("angularfire2.storage.maxUploadRetryTime"),rI=new r.OlP("angularfire2.storage.maxOperationRetryTime"),iI=new r.OlP("angularfire2.storage.use-emulator");let sI=(()=>{class e{constructor(e,t,n,r,i,s,o,a,c,u){const l=(0,BT.on)(e,i,t);this.storage=(0,BT.cc)(`${l.name}.storage.${n}`,"AngularFireStorage",l.name,()=>{const e=i.runOutsideAngular(()=>l.storage(n||void 0)),t=c;return t&&e.useEmulator(...t),o&&e.setMaxUploadRetryTime(o),a&&e.setMaxOperationRetryTime(a),e},[o,a])}ref(e){return eI(this.storage.ref(e))}refFromURL(e){return eI(this.storage.refFromURL(e))}upload(e,t,n){return eI(this.storage.ref(e)).put(t,n)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(BT.Dh),r.LFG(BT.xv,8),r.LFG(tI,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Tt.HU),r.LFG(nI,8),r.LFG(rI,8),r.LFG(iI,8),r.LFG(mn,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),oI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})(),aI=(()=>{class e{constructor(){QT.Z.registerVersion("angularfire",Tt.q4.full,"gcs-compat")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[sI],imports:[oI]}),e})(),cI=(()=>{class e{constructor(e,t,n){this.http=e,this.firestore=t,this.firebaseStorage=n,this.liveStories=[],this.liveStories$=new B_.xQ,this.myStories=[],this.myStories$=new B_.xQ,this.myJunkies=[],this.myJunkies$=new B_.xQ,this.allJunkies=[],this.allJunkies$=new B_.xQ,this.erc721WhiteList=["SJ","OCMONK","DUSK","NFFMP"],this.getMyStories(),this.getStoriesFromStorage(),this.getAllJunkies()}getMyJunkies(e){this.myJunkies=[],e&&this.http.get(`https://api.etherscan.io/api?module=account&action=tokennfttx&address=${e}&startblock=0&endblock=999999999&sort=asc&apikey=SDHZ9FPMUK55TY5KAU2FBS222DKPIITD65`).subscribe(t=>{t.result.forEach(t=>{if(this.erc721WhiteList.includes(t.tokenSymbol))if(t.to.toLowerCase()===e.toLowerCase())this.myJunkies.push(t.tokenID);else{let e=this.myJunkies.indexOf(t.tokenID);this.myJunkies.splice(e,1)}}),this.myJunkies$.next(this.myJunkies)})}getRawStory(e){return this.http.get(`assets/stories/${e}.md`,{responseType:"text"})}getStoryContent(e){return this.http.get(e,{responseType:"text"})}getAllJunkies(){this.http.get("assets/junkies.json").subscribe(e=>{this.allJunkies=e,this.allJunkies$.next(this.allJunkies)})}getJunkies(){return this.http.get("assets/junkies.json")}saveStory(e,t){let n=new Date,r=n.toDateString()+" "+n.toLocaleTimeString(),i=!1;""===e.author&&(e.author="Change Me!"),""===e.id?(e.id=n.toJSON(),e.createdOn=r,i=!0):e.modifiedOn=r,e.tags=e.tags.join(" ").toLowerCase().split(" "),e.casts=e.casts.join(" ").toLowerCase().split(" "),e.id.includes(":")?this.saveStoryToLocal(e,i):t.role>2&&this.saveStoryToStorage(e)}saveStoryToLocal(e,t=!1){if(t)this.myStories.push(e),localStorage.setItem(`junkyardStories.local.${e.id}`,e.content);else{let t=this.myStories.findIndex(t=>t.id===e.id);this.myStories[t]=e,this.myStories.find(t=>t.id===e.id),localStorage.setItem(`junkyardStories.local.${e.id}`,e.content)}this.updateMyStories()}publishStory(e){const t=L_(this.firestore,`stories/${e}`);V_(t,{state:"published"}),this.getStoriesFromStorage()}addStoryViewCount(e){var t=this;return(0,Ut.Z)(function*(){const n=L_(t.firestore,"stories",e),r=yield M_(n);if(r.exists()){let e=r.data();V_(n,{views:e.views+1})}})()}getLikesByStoryId(e){var t=this;return(0,Ut.Z)(function*(){const n=L_(t.firestore,"story-likes",e),r=yield M_(n);let i={id:e,addresses:[]};return r.exists()&&(i=r.data()),i})()}updateStoryLikes(e,t,n=!0){var r=this;return(0,Ut.Z)(function*(){var i,s;t=t.toLowerCase();const o=L_(r.firestore,"stories",e),a=yield M_(o);let c={id:e,addresses:[]};if(a.exists()){const a=L_(r.firestore,"story-likes",e),u=yield M_(a);if(u.exists()&&(c=u.data()),n&&!(null===(i=c.addresses)||void 0===i?void 0:i.includes(t)))c.addresses.push(t);else if(!n&&(null===(s=c.addresses)||void 0===s?void 0:s.includes(t))){let e=c.addresses.indexOf(t,0);e>-1&&c.addresses.splice(e,1)}q_(a,{id:c.id,addresses:c.addresses}),V_(o,{likes:c.addresses.length})}return c})()}saveStoryToStorage(e){var t=this;return(0,Ut.Z)(function*(){let n=JSON.parse(JSON.stringify(e));n.content="";const r=L_(t.firestore,`stories/${n.id}`);q_(r,n),yield t.getStoriesFromStorage();let i=Vr(t.firebaseStorage,`stories/${n.id}.md`);yield jr(i,e.content)})()}getMyStories(){var e;let t=null===(e=localStorage.getItem("junkyardStories.local.myStories"))||void 0===e?void 0:e.toString(),n=JSON.parse(t||"[]");n.forEach(e=>{e.content=localStorage.getItem(`junkyardStories.local.${e.id}`)||""}),this.myStories=n}deleteStoryDraft(e){localStorage.removeItem(`junkyardStories.local.${e.id}`);let t=this.myStories.findIndex(t=>t.id===e.id);this.myStories.splice(t,1),this.updateMyStories()}deleteStoryFromStorage(e){var t=this;return(0,Ut.Z)(function*(){try{const n=L_(t.firestore,`stories/${e.id}`);yield O_(n)}catch(Gm){}try{const n=L_(t.firestore,`story-likes/${e.id}`);yield O_(n)}catch(n){}try{let n=Vr(t.firebaseStorage,`stories/${e.id}.md`);yield Fr(n)}catch(r){}yield t.getStoriesFromStorage()})()}submitForReview(e,t){const n=L_(this.firestore,`stories/${e.id}`);q_(n,e);let r=Vr(this.firebaseStorage,`stories/${e.id}.md`);return jr(r,t)}getStoriesFromStorage(){var e=this;return(0,Ut.Z)(function*(){const t=F_(N_(e.firestore,"stories")),n=yield Z_(t);e.liveStories=[],n.forEach(t=>{let n=t.data();e.liveStories.push(n)}),e.liveStories$.next(e.liveStories)})()}getAvatar(e){return(e=e.toLowerCase().trim()).includes("ocm#")?`https://d3q7x2s6555pey.cloudfront.net/png/${e=e.replace("ocm#","")}.png`:e.includes("dusk#")?`https://duskbreakers.gg/breaker_images/${e=e.replace("dusk#","")}.png`:e.includes("sj#")?(e=e.replace("sj#",""),`https://static.shinji.xyz/unit-00/nft-images/${this.allJunkies[parseInt(e)].hash}.png`):`https://static.shinji.xyz/unit-00/nft-images/${this.allJunkies[parseInt(e)].hash}.png`}getAvatarLink(e){return(e=e.toLowerCase().trim()).includes("ocm#")?`https://onchainmonkey.com/gallery/ocm-genesis/${e=e.replace("ocm#","")}`:e.includes("dusk#")?`https://duskbreakers.gg/gallery?breakerId=${e=e.replace("dusk#","")}`:e.includes("sj#")?`https://shonenjunk.xyz/unit-00/gallery/${e=e.replace("sj#","")}`:`https://shonenjunk.xyz/unit-00/gallery/${e}`}updateMyStories(){let e=[];this.myStories.forEach(t=>{e.push({id:t.id,seriesId:t.seriesId,seriesName:t.seriesName,title:t.title,subtitle:t.subtitle,cover:t.cover,description:t.description,authorId:t.authorId,author:t.author,content:"",casts:t.casts,tags:t.tags,likes:t.likes,views:t.views,modifiedOn:t.modifiedOn,createdOn:t.createdOn,state:t.state})}),this.myStories$.next(e),localStorage.setItem("junkyardStories.local.myStories",JSON.stringify(e))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(ct),r.LFG(E_),r.LFG(Rr))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class uI{constructor(){this.id="",this.role=0,this.name=""}}let lI=(()=>{class e{constructor(e,t){this.storyboardService=e,this.firestore=t,this.user=new uI,this.user$=new B_.xQ,this.activeAccount="",this.myJunkies=[],this.hasMetaMask&&(window.ethereum.on("accountsChanged",()=>{window.location.reload()}),window.ethereum.on("chainChanged",()=>{window.location.reload()})),this.storyboardService.myJunkies$.subscribe(e=>{this.myJunkies=e,this.myJunkies.length>0&&this.user.role<2&&(this.user.role=2,this.user$.next(this.user))})}get hasMetaMask(){return Boolean(window.ethereum&&window.ethereum.isMetaMask)}get isGenesisHolder(){return this.myJunkies.length>0}get isCorrectChain(){try{return"0x1"===window.ethereum.chainId}catch(Gm){return!1}}switchNetwork(){return(0,Ut.Z)(function*(){try{yield window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x1"}]})}catch(e){}})()}requestAccount(){var e=this;return(0,Ut.Z)(function*(){try{yield window.ethereum.request({method:"eth_requestAccounts"}),yield e.getSelectedAccount()}catch(Gm){}})()}getSelectedAccount(){var e=this;return(0,Ut.Z)(function*(){if(e.activeAccount="",e.hasMetaMask){let t=yield window.ethereum.request({method:"eth_accounts"});e.activeAccount=t[0]||"",e.user.id=e.activeAccount,e.storyboardService.getMyJunkies(e.activeAccount),yield e.getUser(e.activeAccount)}})()}getUser(e){var t=this;return(0,Ut.Z)(function*(){const n=F_(N_(t.firestore,"users")),r=yield Z_(n);t.user.id=e,t.user.name=e,t.user.role=1,r.forEach(n=>{let r=n.data();r.id.trim().toLowerCase()===e.trim().toLowerCase()&&(t.user=r)}),t.user$.next(t.user)})()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(cI),r.LFG(E_))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function hI(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"a",16),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).connect()}),r.TgZ(1,"span",17),r._UZ(2,"img",18),r.qZA(),r.TgZ(3,"strong"),r._uU(4),r.qZA(),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(4),r.Oqu(e.isCorrectNetwork?"Connect Wallet":"Switch Network")}}function dI(e,t){if(1&e&&(r.TgZ(0,"a",19),r.TgZ(1,"strong"),r._uU(2),r.qZA(),r.qZA()),2&e){const e=r.oxw(2);r.xp6(2),r.Oqu(e.shortEthAccount)}}function pI(e,t){if(1&e&&(r.TgZ(0,"div",11),r.TgZ(1,"div",12),r.TgZ(2,"div",13),r.YNc(3,hI,5,1,"a",14),r.YNc(4,dI,3,1,"a",15),r.qZA(),r.qZA(),r.qZA()),2&e){const e=r.oxw();r.xp6(3),r.Q6J("ngIf",!e.ethAccount),r.xp6(1),r.Q6J("ngIf",e.ethAccount)}}const fI=function(){return["/"]},gI=function(){return["/story-editor"]},mI=function(){return["is-active"]};let yI=(()=>{class e{constructor(e){this.accountService=e,this.isProcessing=!1,this.showMenu=!1}get hasMetaMask(){return this.accountService.hasMetaMask}get ethAccount(){return""!==this.accountService.activeAccount}get isCorrectNetwork(){return this.accountService.isCorrectChain}get shortEthAccount(){return this.accountService.activeAccount?`${this.accountService.activeAccount.substr(0,6)}...${this.accountService.activeAccount.substr(38,4)}`:""}connect(){var e=this;return(0,Ut.Z)(function*(){if(!e.isProcessing){e.isProcessing=!0;try{e.accountService.isCorrectChain||(yield e.accountService.switchNetwork()),yield e.accountService.requestAccount(),e.isProcessing=!1}catch(t){e.isProcessing=!1}}})()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(lI))},e.\u0275cmp=r.Xpm({type:e,selectors:[["navigation-widget"]],decls:15,vars:11,consts:[["role","navigation","aria-label","main navigation",1,"navbar"],[1,"navbar-brand"],[1,"navbar-item","brand",3,"routerLink"],["src","assets/images/shonen_junk_logo.svg","height","30"],[1,"title","heading","is-4"],["role","button","aria-label","menu","aria-expanded","false","data-target","navbarBasicExample",1,"navbar-burger",3,"click"],["aria-hidden","true"],["id","navbarBasicExample",1,"navbar-menu"],[1,"navbar-start"],[1,"navbar-item",3,"routerLink","routerLinkActive"],["class","navbar-end",4,"ngIf"],[1,"navbar-end"],[1,"navbar-item"],[1,"buttons"],["class","button is-info",3,"click",4,"ngIf"],["class","button is-success",4,"ngIf"],[1,"button","is-info",3,"click"],[1,"icon"],["src","assets/images/metamask.svg"],[1,"button","is-success"]],template:function(e,t){1&e&&(r.TgZ(0,"nav",0),r.TgZ(1,"div",1),r.TgZ(2,"a",2),r._UZ(3,"img",3),r.TgZ(4,"h1",4),r._uU(5,"Junkyard Stories"),r.qZA(),r.qZA(),r.TgZ(6,"a",5),r.NdJ("click",function(){return t.showMenu=!t.showMenu}),r._UZ(7,"span",6),r._UZ(8,"span",6),r._UZ(9,"span",6),r.qZA(),r.qZA(),r.TgZ(10,"div",7),r.TgZ(11,"div",8),r.TgZ(12,"a",9),r._uU(13," My Stories "),r.qZA(),r.qZA(),r.YNc(14,pI,5,2,"div",10),r.qZA(),r.qZA()),2&e&&(r.xp6(2),r.Q6J("routerLink",r.DdM(8,fI)),r.xp6(4),r.ekj("is-active",t.showMenu),r.xp6(4),r.ekj("is-active",t.showMenu),r.xp6(2),r.Q6J("routerLink",r.DdM(9,gI))("routerLinkActive",r.DdM(10,mI)),r.xp6(2),r.Q6J("ngIf",t.hasMetaMask))},directives:[mT,vT,Z],styles:[".navbar[_ngcontent-%COMP%]{background-color:#333}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.navbar[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{font-family:Bangers}.navbar[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:30px}.navbar[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#ff0;margin-bottom:0}.navbar[_ngcontent-%COMP%]   .navbar-item.is-active[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   .navbar-item[_ngcontent-%COMP%]:active, .navbar[_ngcontent-%COMP%]   .navbar-item[_ngcontent-%COMP%]:focus, .navbar[_ngcontent-%COMP%]   .navbar-item[_ngcontent-%COMP%]:hover{background-color:#0065ff}.navbar[_ngcontent-%COMP%]   .navbar-menu[_ngcontent-%COMP%]{background-color:#333}.navbar[_ngcontent-%COMP%]   .navbar-end[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{font-family:Verdana;letter-spacing:1px}"]}),e})();function vI(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"a",3),r.NdJ("click",function(){return r.CHM(e),r.oxw().activate="in-review"}),r._uU(1,"Review"),r.qZA()}if(2&e){const e=r.oxw();r.ekj("is-active","in-review"===e.activate)}}function _I(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"a",3),r.NdJ("click",function(){return r.CHM(e),r.oxw().activate="published"}),r._uU(1,"Published"),r.qZA()}if(2&e){const e=r.oxw();r.ekj("is-active","published"===e.activate)}}const bI=function(e){return["/storyboard",e]};function wI(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"a",19),r.NdJ("click",function(){const t=r.CHM(e).$implicit;return r.oxw().select(t)}),r.TgZ(1,"div",20),r.TgZ(2,"div",21),r.TgZ(3,"span",12),r.TgZ(4,"a",22),r._uU(5," \u25ba "),r.qZA(),r.TgZ(6,"span",23),r._uU(7),r.qZA(),r.TgZ(8,"span",16),r._uU(9),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit;r.xp6(4),r.Q6J("routerLink",r.VKq(5,bI,e.id)),r.xp6(3),r.Oqu(e.title),r.xp6(1),r.ekj("is-hidden",""===e.subtitle),r.xp6(1),r.Oqu(e.subtitle)}}function SI(e,t){1&e&&(r.TgZ(0,"div",24),r._uU(1," You don't have any "),r.TgZ(2,"strong"),r._uU(3,"Draft"),r.qZA(),r._uU(4," stories yet. "),r.qZA())}function TI(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"a",19),r.NdJ("click",function(){const t=r.CHM(e).$implicit;return r.oxw(2).select(t)}),r.TgZ(1,"div",20),r.TgZ(2,"div",21),r.TgZ(3,"span",12),r.TgZ(4,"a",22),r._uU(5," \u25ba "),r.qZA(),r.TgZ(6,"span",25),r._uU(7),r.qZA(),r.TgZ(8,"span",16),r._uU(9),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit;r.xp6(4),r.Q6J("routerLink",r.VKq(5,bI,e.id)),r.xp6(3),r.Oqu(e.title),r.xp6(1),r.ekj("is-hidden",""===e.subtitle),r.xp6(1),r.Oqu(e.subtitle)}}function II(e,t){1&e&&(r.TgZ(0,"div",24),r._uU(1," You don't have any stories "),r.TgZ(2,"strong"),r._uU(3,"In-Review"),r.qZA(),r._uU(4," yet. "),r.qZA())}function kI(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,TI,10,7,"a",8),r.YNc(2,II,5,0,"div",9),r.qZA()),2&e){const e=r.oxw();r.ekj("is-hidden","in-review"!==e.activate),r.xp6(1),r.Q6J("ngForOf",e.storiesInReview),r.xp6(1),r.Q6J("ngIf",e.storiesInReview.length<1)}}function EI(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"a",19),r.NdJ("click",function(){const t=r.CHM(e).$implicit;return r.oxw(2).select(t)}),r.TgZ(1,"div",20),r.TgZ(2,"div",21),r.TgZ(3,"span",12),r.TgZ(4,"a",22),r._uU(5," \u25ba "),r.qZA(),r.TgZ(6,"span",26),r._uU(7),r.qZA(),r.TgZ(8,"span",16),r._uU(9),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit;r.xp6(4),r.Q6J("routerLink",r.VKq(5,bI,e.id)),r.xp6(3),r.Oqu(e.title),r.xp6(1),r.ekj("is-hidden",""===e.subtitle),r.xp6(1),r.Oqu(e.subtitle)}}function CI(e,t){1&e&&(r.TgZ(0,"div",24),r._uU(1," You don't have any "),r.TgZ(2,"strong"),r._uU(3,"Published"),r.qZA(),r._uU(4," stories yet. "),r.qZA())}function xI(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,EI,10,7,"a",8),r.YNc(2,CI,5,0,"div",9),r.qZA()),2&e){const e=r.oxw();r.ekj("is-hidden","published"!==e.activate),r.xp6(1),r.Q6J("ngForOf",e.publishedStories),r.xp6(1),r.Q6J("ngIf",e.publishedStories.length<1)}}let AI=(()=>{class e{constructor(e,t){this.accountService=e,this.storyboardService=t,this.storySelected=new r.vpe,this.user=new uI,this.activate="drafts",this.myStories=[],this.storiesInReview=[],this.publishedStories=[],this.myStories=t.myStories,this.storyboardService.myStories$.subscribe(()=>{this.updateStories()}),this.storyboardService.liveStories$.subscribe(()=>{this.updateStories()}),this.accountService.user$.subscribe(e=>{this.user=e,this.updateStories()})}search(e){var t;this.updateStories(null!==(t=e.target.value)&&void 0!==t?t:"")}select(e){("published"===e.state||"reviewing"===e.state)&&this.accountService.user.role<3||this.storySelected.emit(e)}updateStories(e=""){this.myStories=this.storyboardService.myStories.filter(t=>t.title.toLowerCase().includes(e.toLowerCase())||t.subtitle.toLowerCase().includes(e.toLowerCase())),this.accountService.user.role<3?(this.publishedStories=this.storyboardService.liveStories.filter(t=>"published"===t.state&&t.authorId.toLowerCase()===this.accountService.user.id.toLowerCase()&&(t.title.toLowerCase().includes(e.toLowerCase())||t.subtitle.toLowerCase().includes(e.toLowerCase()))),this.storiesInReview=this.storyboardService.liveStories.filter(t=>"reviewing"===t.state&&t.authorId.toLowerCase()===this.accountService.user.id.toLowerCase()&&(t.title.toLowerCase().includes(e.toLowerCase())||t.subtitle.toLowerCase().includes(e.toLowerCase())))):(this.publishedStories=this.storyboardService.liveStories.filter(t=>"published"===t.state&&(t.title.toLowerCase().includes(e.toLowerCase())||t.subtitle.toLowerCase().includes(e.toLowerCase()))),this.storiesInReview=this.storyboardService.liveStories.filter(t=>"reviewing"===t.state&&(t.title.toLowerCase().includes(e.toLowerCase())||t.subtitle.toLowerCase().includes(e.toLowerCase()))))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(lI),r.Y36(cI))},e.\u0275cmp=r.Xpm({type:e,selectors:[["my-stories-listing-widget"]],outputs:{storySelected:"storySelected"},decls:165,vars:16,consts:[[1,"panel","is-link",2,"background-color","white"],[1,"panel-heading"],[1,"panel-tabs"],[3,"click"],[3,"is-active","click",4,"ngIf"],[1,"panel-block"],[1,"control"],["type","text","placeholder","Search",1,"input","is-link",3,"keyup"],["class","panel-block is-active",3,"click",4,"ngFor","ngForOf"],["class","notification is-light",4,"ngIf"],[3,"is-hidden",4,"ngIf"],[1,"help",2,"max-height","70vh","overflow-y","scroll"],[1,"heading"],[1,"content"],[1,"tag","is-dark"],[1,"tag","is-info"],[1,"tag"],[1,"tag","is-primary"],[1,"tag","is-warning"],[1,"panel-block","is-active",3,"click"],[1,"columns"],[1,"column"],["target","_blank",1,"button","is-success","is-small","pl-4",3,"routerLink"],[1,"tag","is-dark","ml-3"],[1,"notification","is-light"],[1,"tag","is-info","ml-3"],[1,"tag","is-primary","ml-3"]],template:function(e,t){1&e&&(r.TgZ(0,"article",0),r.TgZ(1,"p",1),r._uU(2," My Stories "),r.qZA(),r.TgZ(3,"p",2),r.TgZ(4,"a",3),r.NdJ("click",function(){return t.activate="drafts"}),r._uU(5,"Local"),r.qZA(),r.YNc(6,vI,2,2,"a",4),r.YNc(7,_I,2,2,"a",4),r.TgZ(8,"a",3),r.NdJ("click",function(){return t.activate="help"}),r._uU(9,"Help?"),r.qZA(),r.qZA(),r.TgZ(10,"div",5),r.TgZ(11,"p",6),r.TgZ(12,"input",7),r.NdJ("keyup",function(e){return t.search(e)}),r.qZA(),r.qZA(),r.qZA(),r.TgZ(13,"div"),r.YNc(14,wI,10,7,"a",8),r.YNc(15,SI,5,0,"div",9),r.qZA(),r.YNc(16,kI,3,4,"div",10),r.YNc(17,xI,3,4,"div",10),r.TgZ(18,"div",11),r.TgZ(19,"p",12),r._uU(20,"Getting Started"),r.qZA(),r.TgZ(21,"div",13),r._uU(22," The story board player reads the "),r.TgZ(23,"span",14),r._uU(24,"screenplay"),r.qZA(),r._uU(25," line by line in a sequencial manner. Each line constitute as a command. "),r._UZ(26,"br"),r._UZ(27,"br"),r._uU(28,"Don't use multiple commands in a single line. "),r._UZ(29,"br"),r._UZ(30,"br"),r._uU(31,"Don't worry, unsupported command lines will be ignored by the player. "),r.qZA(),r.TgZ(32,"p",12),r._uU(33,"Creating Assets"),r.qZA(),r.TgZ(34,"div",13),r._uU(35," Before junkies and files(images and audio) can be used in your script, they must first be defined. "),r._UZ(36,"br"),r._UZ(37,"br"),r._uU(38,"Use "),r.TgZ(39,"span",15),r._uU(40,"+Junky"),r.qZA(),r._uU(41," or "),r.TgZ(42,"span",15),r._uU(43,"+File"),r.qZA(),r._uU(44," to define them. "),r._UZ(45,"br"),r._UZ(46,"br"),r._uU(47,"Names must be unique. "),r.qZA(),r.TgZ(48,"p",12),r._uU(49,"Using Assets"),r.qZA(),r.TgZ(50,"div",13),r._uU(51," Use "),r.TgZ(52,"span",16),r._uU(53,"[Text Commands]"),r.qZA(),r._uU(54," to show different presentations of texts. Multiple sentences are automatically broken down by the player. "),r._UZ(55,"br"),r.TgZ(56,"span",16),r._uU(57,"Speak"),r.qZA(),r._uU(58," - makes a character speak along with their avatar "),r._UZ(59,"br"),r.TgZ(60,"span",16),r._uU(61,"CC"),r.qZA(),r._uU(62," - closed caption text "),r._UZ(63,"br"),r.TgZ(64,"span",16),r._uU(65,"Narrate"),r.qZA(),r._uU(66," - narrator text "),r._UZ(67,"br"),r.TgZ(68,"span",16),r._uU(69,"Text Effect"),r.qZA(),r._uU(70," - sound effects in text form "),r._UZ(71,"br"),r.TgZ(72,"span",16),r._uU(73,"Title"),r.qZA(),r._uU(74," - show the title and subtitle "),r._UZ(75,"br"),r.TgZ(76,"span",16),r._uU(77,"Scene Title"),r.qZA(),r._uU(78," - show the scene title "),r._UZ(79,"br"),r._UZ(80,"br"),r._uU(81,"Use "),r.TgZ(82,"span",17),r._uU(83,"[File Commands]"),r.qZA(),r._uU(84," to show/hide/play/stop images and audio. "),r._UZ(85,"br"),r.TgZ(86,"span",17),r._uU(87,"Cover"),r.qZA(),r._uU(88," - changes the background image and waits for reader action "),r._UZ(89,"br"),r.TgZ(90,"span",17),r._uU(91,"Backdrop"),r.qZA(),r._uU(92," - changes the background image and proceeds to the next command "),r._UZ(93,"br"),r.TgZ(94,"span",17),r._uU(95,"Popup"),r.qZA(),r._uU(96," - shows an image/gif in the center of the screen "),r._UZ(97,"br"),r.TgZ(98,"span",17),r._uU(99,"BGM"),r.qZA(),r._uU(100," - plays a looping audio "),r._UZ(101,"br"),r.TgZ(102,"span",17),r._uU(103,"Soundclip"),r.qZA(),r._uU(104," - plays an audio once "),r.qZA(),r.TgZ(105,"p",12),r._uU(106,"Environment"),r.qZA(),r.TgZ(107,"div",13),r.TgZ(108,"span",18),r._uU(109,"[Weather Effects]"),r.qZA(),r._uU(110," changes the weather immediately. "),r._UZ(111,"br"),r._uU(112,"e.g. "),r._UZ(113,"br"),r.TgZ(114,"span",16),r._uU(115,"> W|rain"),r.qZA(),r._uU(116," - Raining "),r._UZ(117,"br"),r.TgZ(118,"span",16),r._uU(119,"> W|snow"),r.qZA(),r._uU(120," - Snowing "),r._UZ(121,"br"),r.TgZ(122,"span",16),r._uU(123,"> W|"),r.qZA(),r._uU(124," - Remove weather effects "),r.qZA(),r.TgZ(125,"p",12),r._uU(126,"Tips"),r.qZA(),r.TgZ(127,"div",13),r.TgZ(128,"span",16),r._uU(129,"Speak"),r.qZA(),r._uU(130," follows a specific format and has 3 parameters (position, anonimity, and name). "),r._UZ(131,"br"),r._uU(132,"Position - (required) can be either L, R, X "),r._UZ(133,"br"),r._uU(134,"Anonimity - (optional) can be either ?, ??, ??? "),r._UZ(135,"br"),r._uU(136,"Name - (required) a pre-defined name of Junkie. "),r._UZ(137,"br"),r._uU(138,"e.g. "),r._UZ(139,"br"),r.TgZ(140,"span",16),r._uU(141,"> L|Boppin: Hello!"),r.qZA(),r._uU(142,' - Boppin will appear in the upper left corner and say "Hello!" '),r._UZ(143,"br"),r.TgZ(144,"span",16),r._uU(145,"> R???|Billz: Hi!"),r.qZA(),r._uU(146,' - Billz will appear in the lower right with anonymous face and name and say "Hi!" '),r._UZ(147,"br"),r.TgZ(148,"span",16),r._uU(149,"> X|Boppin"),r.qZA(),r._uU(150," - Bippin exits the scene "),r._UZ(151,"hr"),r.TgZ(152,"span",17),r._uU(153,"[File Commands]"),r.qZA(),r._uU(154," can be removed from the scene on demand by using a blank value "),r._UZ(155,"br"),r._uU(156,"e.g. "),r._UZ(157,"br"),r.TgZ(158,"span",17),r._uU(159,"`bg`: []"),r.qZA(),r._uU(160," - This will remove the current value of th background "),r._UZ(161,"br"),r.TgZ(162,"span",17),r._uU(163,"`bgm`: []"),r.qZA(),r._uU(164," - This will stop the looping bgm "),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(4),r.ekj("is-active","drafts"===t.activate),r.xp6(2),r.Q6J("ngIf",t.user.role>1),r.xp6(1),r.Q6J("ngIf",t.user.role>1),r.xp6(1),r.ekj("is-active","help"===t.activate),r.xp6(2),r.ekj("is-hidden","help"===t.activate),r.xp6(3),r.ekj("is-hidden","drafts"!==t.activate),r.xp6(1),r.Q6J("ngForOf",t.myStories),r.xp6(1),r.Q6J("ngIf",t.myStories.length<1),r.xp6(1),r.Q6J("ngIf",t.user.role>1),r.xp6(1),r.Q6J("ngIf",t.user.role>1),r.xp6(1),r.ekj("is-hidden","help"!==t.activate))},directives:[Z,L,mT],styles:[".heading[_ngcontent-%COMP%]{font-size:16px}",".help[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Press Start\\ 2P;font-size:12px;letter-spacing:1px}",".help[_ngcontent-%COMP%]{padding:20px}",".content[_ngcontent-%COMP%]{padding-left:20px;border-left:1px solid #bbb;font-family:Verdana;letter-spacing:1px;line-height:18px}"]}),e})();class DI{constructor(){this.id="",this.seriesId="",this.seriesName="",this.title="",this.subtitle="",this.description="",this.cover="",this.authorId="",this.author="",this.content="",this.casts=[],this.tags=[],this.likes=0,this.views=0,this.createdOn="",this.modifiedOn="",this.state="draft"}}var PI=n(250);class RI{constructor(e,t){this._document=t;const n=this._textarea=this._document.createElement("textarea"),r=n.style;r.position="fixed",r.top=r.opacity="0",r.left="-999em",n.setAttribute("aria-hidden","true"),n.value=e,this._document.body.appendChild(n)}copy(){const e=this._textarea;let t=!1;try{if(e){const n=this._document.activeElement;e.select(),e.setSelectionRange(0,e.value.length),t=this._document.execCommand("copy"),n&&n.focus()}}catch{}return t}destroy(){const e=this._textarea;e&&(e.remove(),this._textarea=void 0)}}let NI=(()=>{class e{constructor(e){this._document=e}copy(e){const t=this.beginCopy(e),n=t.copy();return t.destroy(),n}beginCopy(e){return new RI(e,this._document)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),OI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();var LI=n(1555);function MI(e,t){return new Me.y(n=>{const r=e.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const c=(0,j_.D)(e[a]);let u=!1;n.add(c.subscribe({next:e=>{u||(u=!0,o++),i[a]=e},error:e=>n.error(e),complete:()=>{s++,s!==r&&u||(o===r&&n.next(t?t.reduce((e,t,n)=>(e[t]=i[n],e),{}):i),n.complete())}}))}})}let ZI=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}setProperty(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.Qsj),r.Y36(r.SBq))},e.\u0275dir=r.lG2({type:e}),e})(),UI=(()=>{class e extends ZI{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,features:[r.qOj]}),e})();const FI=new r.OlP("NgValueAccessor"),qI={provide:FI,useExisting:(0,r.Gpc)(()=>jI),multi:!0},VI=new r.OlP("CompositionEventMode");let jI=(()=>{class e extends ZI{constructor(e,t,n){super(e,t),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=s()?s().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(VI,8))},e.\u0275dir=r.lG2({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&r.NdJ("input",function(e){return t._handleInput(e.target.value)})("blur",function(){return t.onTouched()})("compositionstart",function(){return t._compositionStart()})("compositionend",function(e){return t._compositionEnd(e.target.value)})},features:[r._Bn([qI]),r.qOj]}),e})();const BI=new r.OlP("NgValidators"),$I=new r.OlP("NgAsyncValidators");function HI(e){return null!=e}function zI(e){const t=(0,r.QGY)(e)?(0,j_.D)(e):e;return(0,r.CqO)(t),t}function GI(e){let t={};return e.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function KI(e,t){return t.map(t=>t(e))}function WI(e){return e.map(e=>function(e){return!e.validate}(e)?e:t=>e.validate(t))}function JI(e){return null!=e?function(e){if(!e)return null;const t=e.filter(HI);return 0==t.length?null:function(e){return GI(KI(e,t))}}(WI(e)):null}function YI(e){return null!=e?function(e){if(!e)return null;const t=e.filter(HI);return 0==t.length?null:function(e){return function(...e){if(1===e.length){const t=e[0];if((0,G_.k)(t))return MI(t,null);if((0,LI.K)(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return MI(e.map(e=>t[e]),e)}}if("function"==typeof e[e.length-1]){const t=e.pop();return MI(e=1===e.length&&(0,G_.k)(e[0])?e[0]:e,null).pipe((0,Be.U)(e=>t(...e)))}return MI(e,null)}(KI(e,t).map(zI)).pipe((0,Be.U)(GI))}}(WI(e)):null}function QI(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}let XI=(()=>{class e{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=JI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=YI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.lG2({type:e}),e})(),ek=(()=>{class e extends XI{get formDirective(){return null}get path(){return null}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,features:[r.qOj]}),e})();class tk extends XI{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let nk=(()=>{class e extends class{constructor(e){this._cd=e}is(e){var t,n,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[e])}}{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(tk,2))},e.\u0275dir=r.lG2({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&r.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[r.qOj]}),e})();function rk(e,t){e.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function ik(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function sk(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function ok(e){return(lk(e)?e.validators:e)||null}function ak(e){return Array.isArray(e)?JI(e):e||null}function ck(e,t){return(lk(t)?t.asyncValidators:e)||null}function uk(e){return Array.isArray(e)?YI(e):e||null}function lk(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class hk{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=ak(this._rawValidators),this._composedAsyncValidatorFn=uk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=ak(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=uk(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(t=>{t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild(t=>{t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status="PENDING",this._hasOwnPendingAsyncValidator=!0;const t=zI(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(t,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;let r=e;return t.forEach(e=>{r=r instanceof pk?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof fk&&r.at(e)||null}),r}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){lk(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class dk extends hk{constructor(e=null,t,n){super(ok(t),ck(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){sk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){sk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class pk extends hk{constructor(e,t,n){super(ok(t),ck(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof dk?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const n=this.controls[t];if(this.contains(t)&&e(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,r)=>{n=t(n,e,r)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class fk extends hk{constructor(e,t,n){super(ok(t),ck(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,n={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof dk?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const gk={provide:tk,useExisting:(0,r.Gpc)(()=>yk)},mk=(()=>Promise.resolve(null))();let yk=(()=>{class e extends tk{constructor(e,t,n,i){super(),this.control=new dk,this._registered=!1,this.update=new r.vpe,this._parent=e,this._setValidators(t),this._setAsyncValidators(n),this.valueAccessor=function(e,t){if(!t)return null;let n,r,i;return Array.isArray(t),t.forEach(e=>{e.constructor===jI?n=e:Object.getPrototypeOf(e.constructor)===UI?r=e:i=e}),i||r||n||null}(0,i)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){var e,t;(function(e,t){const n=function(e){return e._rawValidators}(e);null!==t.validator?e.setValidators(QI(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const r=function(e){return e._rawAsyncValidators}(e);null!==t.asyncValidator?e.setAsyncValidators(QI(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();rk(t._rawValidators,i),rk(t._rawAsyncValidators,i)})(e=this.control,t=this),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&ik(e,t)})}(e,t),function(e,t){const n=(e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&ik(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function(e,t){if(t.valueAccessor.setDisabledState){const n=e=>{t.valueAccessor.setDisabledState(e)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){mk.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const t=e.isDisabled.currentValue,n=""===t||t&&"false"!==t;mk.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(ek,9),r.Y36(BI,10),r.Y36($I,10),r.Y36(FI,10))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r._Bn([gk]),r.qOj,r.TTD]}),e})(),vk=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();const _k={provide:FI,useExisting:(0,r.Gpc)(()=>wk),multi:!0};function bk(e,t){return null==e?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let wk=(()=>{class e extends UI{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const t=this._getOptionId(e);null==t&&this.setProperty("selectedIndex",-1);const n=bk(t,e);this.setProperty("value",n)}registerOnChange(e){this.onChange=t=>{this.value=this._getOptionValue(t),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&r.NdJ("change",function(e){return t.onChange(e.target.value)})("blur",function(){return t.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([_k]),r.qOj]}),e})(),Sk=(()=>{class e{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(bk(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(wk,9))},e.\u0275dir=r.lG2({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();const Tk={provide:FI,useExisting:(0,r.Gpc)(()=>kk),multi:!0};function Ik(e,t){return null==e?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let kk=(()=>{class e extends UI{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let t;if(this.value=e,Array.isArray(e)){const n=e.map(e=>this._getOptionId(e));t=(e,t)=>{e._setSelected(n.indexOf(t.toString())>-1)}}else t=(e,t)=>{e._setSelected(!1)};this._optionMap.forEach(t)}registerOnChange(e){this.onChange=t=>{const n=[];if(void 0!==t.selectedOptions){const e=t.selectedOptions;for(let t=0;t<e.length;t++){const r=e.item(t),i=this._getOptionValue(r.value);n.push(i)}}else{const e=t.options;for(let t=0;t<e.length;t++){const r=e.item(t);if(r.selected){const e=this._getOptionValue(r.value);n.push(e)}}}this.value=n,e(n)}}_registerOption(e){const t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&r.NdJ("change",function(e){return t.onChange(e.target)})("blur",function(){return t.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([Tk]),r.qOj]}),e})(),Ek=(()=>{class e{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(Ik(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(Ik(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(kk,9))},e.\u0275dir=r.lG2({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();const Ck={provide:BI,useExisting:(0,r.Gpc)(()=>xk),multi:!0};let xk=(()=>{class e{constructor(){this._required=!1}get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!=`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?function(e){return null==(t=e.value)||0===t.length?{required:!0}:null;var t}(e):null}registerOnValidatorChange(e){this._onChange=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.lG2({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,t){2&e&&r.uIk("required",t.required?"":null)},inputs:{required:"required"},features:[r._Bn([Ck])]}),e})(),Ak=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[vk]]}),e})(),Dk=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[Ak]}),e})();function Pk(e){return null!=e&&"false"!=`${e}`}function Rk(e,t=0){return function(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):t}function Nk(e){return e instanceof r.SBq?e.nativeElement:e}var Ok=n(9105);function Lk(e,t,n,r){return(0,Ok.m)(n)&&(r=n,n=void 0),r?Lk(e,t,n).pipe((0,Be.U)(e=>(0,G_.k)(e)?r(...e):r(e))):new Me.y(r=>{Mk(e,t,function(e){r.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},r,n)})}function Mk(e,t,n,r,i){let s;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){const r=e;e.addEventListener(t,n,i),s=()=>r.removeEventListener(t,n,i)}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){const r=e;e.on(t,n),s=()=>r.off(t,n)}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){const r=e;e.addListener(t,n),s=()=>r.removeListener(t,n)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let s=0,o=e.length;s<o;s++)Mk(e[s],t,n,r,i)}r.add(s)}var Zk=n(6465),Uk=n(6102);const Fk=new class extends Uk.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,i=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<i&&(e=t.shift()));if(this.active=!1,n){for(;++r<i&&(e=t.shift());)e.unsubscribe();throw n}}}(class extends Zk.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}});n(4581);class qk{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new Vk(e,this.durationSelector))}}class Vk extends cb.Ds{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:t}=this;n=t(e)}catch(t){return this.destination.error(t)}const r=(0,cb.ft)(n,new cb.IY(this));!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:e,hasValue:t,throttled:n}=this;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var jk=n(6561);function Bk(e){const{index:t,period:n,subscriber:r}=e;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function $k(e,t=FT.P){return n=()=>function(e=0,t,n){let r=-1;return(0,jk.k)(t)?r=Number(t)<1?1:Number(t):(0,z_.K)(t)&&(n=t),(0,z_.K)(n)||(n=FT.P),new Me.y(t=>{const i=(0,jk.k)(e)?e:+e-n.now();return n.schedule(Bk,i,{index:0,period:r,subscriber:t})})}(e,t),function(e){return e.lift(new qk(n))};var n}let Hk;try{Hk="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch{Hk=!1}let zk,Gk,Kk=(()=>{class e{constructor(e){this._platformId=e,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Hk)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.Lbi))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Wk(e){return function(){if(null==zk&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>zk=!0}))}finally{zk=zk||!1}return zk}()?e:!!e.capture}function Jk(e){if(function(){if(null==Gk){const e="undefined"!=typeof document?document.head:null;Gk=!(!e||!e.createShadowRoot&&!e.attachShadow)}return Gk}()){const t=e.getRootNode?e.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Yk(e){return e.composedPath?e.composedPath()[0]:e.target}let Qk=(()=>{class e{constructor(e,t,n){this._ngZone=e,this._platform=t,this._scrolled=new B_.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Me.y(t=>{this._globalSubscription||this._addGlobalListener();const n=e>0?this._scrolled.pipe($k(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Le.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){const n=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(qe(e=>!e||n.indexOf(e)>-1))}getAncestorScrollContainers(e){const t=[];return this.scrollContainers.forEach((n,r)=>{this._scrollableContainsElement(r,e)&&t.push(r)}),t}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,t){let n=Nk(t),r=e.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Lk(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.R0b),r.LFG(Kk),r.LFG(o,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Xk=(()=>{class e{constructor(e,t,n){this._platform=e,this._change=new B_.xQ,this._changeListener=e=>{this._change.next(e)},this._document=n,t.runOutsideAngular(()=>{if(e.isBrowser){const e=this._getWindow();e.addEventListener("resize",this._changeListener),e.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:t,height:n}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+n,right:e.left+t,height:n,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,t=this._getWindow(),n=e.documentElement,r=n.getBoundingClientRect();return{top:-r.top||e.body.scrollTop||t.scrollY||n.scrollTop||0,left:-r.left||e.body.scrollLeft||t.scrollX||n.scrollLeft||0}}change(e=20){return e>0?this._change.pipe($k(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Kk),r.LFG(r.R0b),r.LFG(o,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),eE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();function tE(e){const{subscriber:t,counter:n,period:r}=e;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}var nE=n(6682);function rE(e){return t=>t.lift(new iE(e))}class iE{constructor(e){this.notifier=e}call(e,t){const n=new sE(e),r=(0,cb.ft)(this.notifier,new cb.IY(n));return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n}}class sE extends cb.Ds{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}const oE=new r.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,r.f3M)(o)}}),aE=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let cE=(()=>{class e{constructor(e){if(this.value="ltr",this.change=new r.vpe,e){const t=e.documentElement?e.documentElement.dir:null;this.value=function(e){const t=e?.toLowerCase()||"";return"auto"===t&&"undefined"!=typeof navigator&&navigator?.language?aE.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||t||"ltr")}}ngOnDestroy(){this.change.complete()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(oE,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function uE(e,t,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];i?e.setProperty(r,i,n?.has(r)?"important":""):e.removeProperty(r)}return e}function lE(e,t){const n=t?"":"none";uE(e.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":n,"-ms-user-select":n,"-webkit-user-select":n,"-moz-user-select":n})}function hE(e,t,n){uE(e.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},n)}function dE(e,t){return t&&"none"!=t?e+" "+t:e}function pE(e){const t=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*t}function fE(e,t){return e.getPropertyValue(t).split(",").map(e=>e.trim())}function gE(e){const t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function mE(e,t,n){const{top:r,bottom:i,left:s,right:o}=e;return n>=r&&n<=i&&t>=s&&t<=o}function yE(e,t,n){e.top+=t,e.bottom=e.top+e.height,e.left+=n,e.right=e.left+e.width}function vE(e,t,n,r){const{top:i,right:s,bottom:o,left:a,width:c,height:u}=e,l=c*t,h=u*t;return r>i-h&&r<o+h&&n>a-l&&n<s+l}class _E{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:gE(e)})})}handleScroll(e){const t=Yk(e),n=this.positions.get(t);if(!n)return null;const r=n.scrollPosition;let i,s;if(t===this._document){const e=this.getViewportScrollPosition();i=e.top,s=e.left}else i=t.scrollTop,s=t.scrollLeft;const o=r.top-i,a=r.left-s;return this.positions.forEach((e,n)=>{e.clientRect&&t!==n&&t.contains(n)&&yE(e.clientRect,o,a)}),r.top=i,r.left=s,{top:o,left:a}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function bE(e){const t=e.cloneNode(!0),n=t.querySelectorAll("[id]"),r=e.nodeName.toLowerCase();t.removeAttribute("id");for(let i=0;i<n.length;i++)n[i].removeAttribute("id");return"canvas"===r?IE(e,t):"input"!==r&&"select"!==r&&"textarea"!==r||TE(e,t),wE("canvas",e,t,IE),wE("input, textarea, select",e,t,TE),t}function wE(e,t,n,r){const i=t.querySelectorAll(e);if(i.length){const t=n.querySelectorAll(e);for(let e=0;e<i.length;e++)r(i[e],t[e])}}let SE=0;function TE(e,t){"file"!==t.type&&(t.value=e.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${SE++}`)}function IE(e,t){const n=t.getContext("2d");if(n)try{n.drawImage(e,0,0)}catch{}}const kE=Wk({passive:!0}),EE=Wk({passive:!1}),CE=new Set(["position"]);class xE{constructor(e,t,n,r,i,s){this._config=t,this._document=n,this._ngZone=r,this._viewportRuler=i,this._dragDropRegistry=s,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new B_.xQ,this._pointerMoveSubscription=Zb.w.EMPTY,this._pointerUpSubscription=Zb.w.EMPTY,this._scrollSubscription=Zb.w.EMPTY,this._resizeSubscription=Zb.w.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new B_.xQ,this.started=new B_.xQ,this.released=new B_.xQ,this.ended=new B_.xQ,this.entered=new B_.xQ,this.exited=new B_.xQ,this.dropped=new B_.xQ,this.moved=this._moveEvents,this._pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){const t=this._getTargetHandle(e);!t||this._disabledHandles.has(t)||this.disabled||this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)},this._pointerMove=e=>{const t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging){if(Math.abs(t.x-this._pickupPositionOnPage.x)+Math.abs(t.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const t=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),n=this._dropContainer;if(!t)return void this._endDragSequence(e);n&&(n.isDragging()||n.isReceiving())||(e.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(e)))}return}e.preventDefault();const n=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(n),this._dropContainer)this._updateActiveDropContainer(n,t);else{const e=this._activeTransform;e.x=n.x-this._pickupPositionOnPage.x+this._passiveTransform.x,e.y=n.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(e.x,e.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:n,event:e,distance:this._getDragDistance(n),delta:this._pointerDirectionDelta})})},this._pointerUp=e=>{this._endDragSequence(e)},this._nativeDragStart=e=>{if(this._handles.length){const t=this._getTargetHandle(e);!t||this._disabledHandles.has(t)||this.disabled||e.preventDefault()}else this.disabled||e.preventDefault()},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new _E(n),s.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=Pk(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(e=>lE(e,t)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(e=>Nk(e)),this._handles.forEach(e=>lE(e,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(e=>{this._handles.indexOf(e)>-1&&t.add(e)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=Nk(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,EE),t.addEventListener("touchstart",this._pointerDown,kE),t.addEventListener("dragstart",this._nativeDragStart,EE)}),this._initialTransform=void 0,this._rootElement=t),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?Nk(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),lE(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),lE(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){PE(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const e=this._rootElement,n=e.parentNode,r=this._placeholder=this._createPlaceholderElement(),i=this._anchor=this._anchor||this._document.createComment(""),s=this._getShadowRoot();n.insertBefore(i,e),this._initialTransform=e.style.transform||"",this._preview=this._createPreviewElement(),hE(e,!1,CE),this._document.body.appendChild(n.replaceChild(r,e)),this._getPreviewInsertionPoint(n,s).appendChild(this._preview),this.started.next({source:this}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const n=this.isDragging(),r=PE(t),i=!r&&0!==t.button,s=this._rootElement,o=Yk(t),a=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),c=r?function(e){const t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}(t):function(e){return 0===e.buttons||0===e.offsetX&&0===e.offsetY}(t);if(o&&o.draggable&&"mousedown"===t.type&&t.preventDefault(),n||i||a||c)return;if(this._handles.length){const e=s.style;this._rootElementTapHighlight=e.webkitTapHighlightColor||"",e.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>this._updateOnScroll(e)),this._boundaryElement&&(this._boundaryRect=gE(this._boundaryElement));const u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(e,t);const l=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:l.x,y:l.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){hE(this._rootElement,!0,CE),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,n=t.getItemIndex(this),r=this._getPointerPositionOnPage(e),i=this._getDragDistance(r),s=t._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:i,dropPoint:r}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:i,dropPoint:r}),t.drop(this,n,this._initialIndex,this._initialContainer,s,i,r),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:n,y:r}){let i=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!i&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(i=this._initialContainer),i&&i!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=i,this._dropContainer.enter(this,e,t,i===this._initialContainer&&i.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:i,currentIndex:i.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(n,r),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,n=e?e.template:null;let r;if(n&&e){const t=e.matchSize?this._rootElement.getBoundingClientRect():null,i=e.viewContainer.createEmbeddedView(n,e.context);i.detectChanges(),r=RE(i,this._document),this._previewRef=i,e.matchSize?NE(r,t):r.style.transform=AE(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const e=this._rootElement;r=bE(e),NE(r,e.getBoundingClientRect()),this._initialTransform&&(r.style.transform=this._initialTransform)}return uE(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},CE),lE(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(e=>r.classList.add(e)):r.classList.add(t)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const t=function(e){const t=getComputedStyle(e),n=fE(t,"transition-property"),r=n.find(e=>"transform"===e||"all"===e);if(!r)return 0;const i=n.indexOf(r),s=fE(t,"transition-duration"),o=fE(t,"transition-delay");return pE(s[i])+pE(o[i])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(e=>{const n=t=>{(!t||Yk(t)===this._preview&&"transform"===t.propertyName)&&(this._preview?.removeEventListener("transitionend",n),e(),clearTimeout(r))},r=setTimeout(n,1.5*t);this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let n;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),n=RE(this._placeholderRef,this._document)):n=bE(this._rootElement),n.style.pointerEvents="none",n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(e,t){const n=this._rootElement.getBoundingClientRect(),r=e===this._rootElement?null:e,i=r?r.getBoundingClientRect():n,s=PE(t)?t.targetTouches[0]:t,o=this._getViewportScrollPosition();return{x:i.left-n.left+(s.pageX-i.left-o.left),y:i.top-n.top+(s.pageY-i.top-o.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),n=PE(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,r=n.pageX-t.left,i=n.pageY-t.top;if(this._ownerSVGElement){const e=this._ownerSVGElement.getScreenCTM();if(e){const t=this._ownerSVGElement.createSVGPoint();return t.x=r,t.y=i,t.matrixTransform(e.inverse())}}return{x:r,y:i}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:n,y:r}=this.constrainPosition?this.constrainPosition(e,this):e;if("x"===this.lockAxis||"x"===t?r=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==t||(n=this._pickupPositionOnPage.x),this._boundaryRect){const{x:e,y:t}=this._pickupPositionInElement,i=this._boundaryRect,{width:s,height:o}=this._getPreviewRect(),a=i.top+t,c=i.bottom-(o-t);n=DE(n,i.left+e,i.right-(s-e)),r=DE(r,a,c)}return{x:n,y:r}}_updatePointerDirectionDelta(e){const{x:t,y:n}=e,r=this._pointerDirectionDelta,i=this._pointerPositionAtLastDirectionChange,s=Math.abs(t-i.x),o=Math.abs(n-i.y);return s>this._config.pointerDirectionChangeThreshold&&(r.x=t>i.x?1:-1,i.x=t),o>this._config.pointerDirectionChangeThreshold&&(r.y=n>i.y?1:-1,i.y=n),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,lE(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,EE),e.removeEventListener("touchstart",this._pointerDown,kE),e.removeEventListener("dragstart",this._nativeDragStart,EE)}_applyRootElementTransform(e,t){const n=AE(e,t),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=dE(n,this._initialTransform)}_applyPreviewTransform(e,t){const n=this._previewTemplate?.template?void 0:this._initialTransform,r=AE(e,t);this._preview.style.transform=dE(r,n)}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const n=this._boundaryElement.getBoundingClientRect(),r=this._rootElement.getBoundingClientRect();if(0===n.width&&0===n.height||0===r.width&&0===r.height)return;const i=n.left-r.left,s=r.right-n.right,o=n.top-r.top,a=r.bottom-n.bottom;n.width>r.width?(i>0&&(e+=i),s>0&&(e-=s)):e=0,n.height>r.height?(o>0&&(t+=o),a>0&&(t-=a)):t=0,e===this._passiveTransform.x&&t===this._passiveTransform.y||this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:PE(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const n=Yk(e);this._boundaryRect&&n!==this._boundaryElement&&n.contains(this._boundaryElement)&&yE(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=Jk(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){const n=this._previewContainer||"global";if("parent"===n)return e;if("global"===n){const e=this._document;return t||e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement||e.body}return Nk(n)}_getPreviewRect(){return this._previewRect&&(this._previewRect.width||this._previewRect.height)||(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),this._previewRect}_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}}function AE(e,t){return`translate3d(${Math.round(e)}px, ${Math.round(t)}px, 0)`}function DE(e,t,n){return Math.max(t,Math.min(n,e))}function PE(e){return"t"===e.type[0]}function RE(e,t){const n=e.rootNodes;if(1===n.length&&n[0].nodeType===t.ELEMENT_NODE)return n[0];const r=t.createElement("div");return n.forEach(e=>r.appendChild(e)),r}function NE(e,t){e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,e.style.transform=AE(t.left,t.top)}function OE(e,t){return Math.max(0,Math.min(t,e))}class LE{constructor(e,t,n,r,i){this._dragDropRegistry=t,this._ngZone=r,this._viewportRuler=i,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new B_.xQ,this.entered=new B_.xQ,this.exited=new B_.xQ,this.dropped=new B_.xQ,this.sorted=new B_.xQ,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=Zb.w.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new B_.xQ,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function(e=0,t=FT.P){return(!(0,jk.k)(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=FT.P),new Me.y(n=>(n.add(t.schedule(tE,e,{subscriber:n,counter:0,period:e})),n))}(0,Fk).pipe(rE(this._stopScrollTimers)).subscribe(()=>{const e=this._scrollNode,t=this.autoScrollStep;1===this._verticalScrollDirection?e.scrollBy(0,-t):2===this._verticalScrollDirection&&e.scrollBy(0,t),1===this._horizontalScrollDirection?e.scrollBy(-t,0):2===this._horizontalScrollDirection&&e.scrollBy(t,0)})},this.element=Nk(e),this._document=n,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new _E(n)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,n,r){let i;this._draggingStarted(),null==r?(i=this.sortingDisabled?this._draggables.indexOf(e):-1,-1===i&&(i=this._getItemIndexFromPointerPosition(e,t,n))):i=r;const s=this._activeDraggables,o=s.indexOf(e),a=e.getPlaceholderElement();let c=s[i];if(c===e&&(c=s[i+1]),!c&&(null==i||-1===i||i<s.length-1)&&this._shouldEnterAsFirstChild(t,n)&&(c=s[0]),o>-1&&s.splice(o,1),c&&!this._dragDropRegistry.isDragging(c)){const t=c.getRootElement();t.parentElement.insertBefore(a,t),s.splice(i,0,e)}else Nk(this.element).appendChild(a),s.push(e);a.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,n,r,i,s,o){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:n,container:this,previousContainer:r,isPointerOverContainer:i,distance:s,dropPoint:o})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(e=>e._withDropContainer(this)),this.isDragging()&&(t.filter(e=>e.isDragging()).every(t=>-1===e.indexOf(t))?this._reset():this._cacheItems()),this}withDirection(e){return this._direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._orientation=e,this}withScrollableParents(e){const t=Nk(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(t=>t.drag===e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,n,r){if(this.sortingDisabled||!this._clientRect||!vE(this._clientRect,.05,t,n))return;const i=this._itemPositions,s=this._getItemIndexFromPointerPosition(e,t,n,r);if(-1===s&&i.length>0)return;const o="horizontal"===this._orientation,a=i.findIndex(t=>t.drag===e),c=i[s],u=c.clientRect,l=a>s?1:-1,h=this._getItemOffsetPx(i[a].clientRect,u,l),d=this._getSiblingOffsetPx(a,i,l),p=i.slice();!function(e,t,n){const r=OE(t,e.length-1),i=OE(n,e.length-1);if(r===i)return;const s=e[r],o=i<r?-1:1;for(let a=r;a!==i;a+=o)e[a]=e[a+o];e[i]=s}(i,a,s),this.sorted.next({previousIndex:a,currentIndex:s,container:this,item:e}),i.forEach((t,n)=>{if(p[n]===t)return;const r=t.drag===e,i=r?h:d,s=r?e.getPlaceholderElement():t.drag.getRootElement();t.offset+=i,o?(s.style.transform=dE(`translate3d(${Math.round(t.offset)}px, 0, 0)`,t.initialTransform),yE(t.clientRect,0,i)):(s.style.transform=dE(`translate3d(0, ${Math.round(t.offset)}px, 0)`,t.initialTransform),yE(t.clientRect,i,0))}),this._previousSwap.overlaps=mE(u,t,n),this._previousSwap.drag=c.drag,this._previousSwap.delta=o?r.x:r.y}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let n,r=0,i=0;if(this._parentPositions.positions.forEach((s,o)=>{o!==this._document&&s.clientRect&&!n&&vE(s.clientRect,.05,e,t)&&([r,i]=function(e,t,n,r){const i=ME(t,r),s=ZE(t,n);let o=0,a=0;if(i){const t=e.scrollTop;1===i?t>0&&(o=1):e.scrollHeight-t>e.clientHeight&&(o=2)}if(s){const t=e.scrollLeft;1===s?t>0&&(a=1):e.scrollWidth-t>e.clientWidth&&(a=2)}return[o,a]}(o,s.clientRect,e,t),(r||i)&&(n=o))}),!r&&!i){const{width:s,height:o}=this._viewportRuler.getViewportSize(),a={width:s,height:o,top:0,right:s,bottom:o,left:0};r=ME(a,t),i=ZE(a,e),n=window}!n||r===this._verticalScrollDirection&&i===this._horizontalScrollDirection&&n===this._scrollNode||(this._verticalScrollDirection=r,this._horizontalScrollDirection=i,this._scrollNode=n,(r||i)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=Nk(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=Nk(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_cacheItemPositions(){const e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(e=>{const t=e.getVisibleElement();return{drag:e,offset:0,initialTransform:t.style.transform||"",clientRect:gE(t)}}).sort((t,n)=>e?t.clientRect.left-n.clientRect.left:t.clientRect.top-n.clientRect.top)}_reset(){this._isDragging=!1;const e=Nk(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(e=>{const t=e.getRootElement();if(t){const n=this._itemPositions.find(t=>t.drag===e)?.initialTransform;t.style.transform=n||""}}),this._siblings.forEach(e=>e._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(e,t,n){const r="horizontal"===this._orientation,i=t[e].clientRect,s=t[e+-1*n];let o=i[r?"width":"height"]*n;if(s){const e=r?"left":"top",t=r?"right":"bottom";-1===n?o-=s.clientRect[e]-i[t]:o+=i[e]-s.clientRect[t]}return o}_getItemOffsetPx(e,t,n){const r="horizontal"===this._orientation;let i=r?t.left-e.left:t.top-e.top;return-1===n&&(i+=r?t.width-e.width:t.height-e.height),i}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const n=this._itemPositions,r="horizontal"===this._orientation;if(n[0].drag!==this._activeDraggables[0]){const i=n[n.length-1].clientRect;return r?e>=i.right:t>=i.bottom}{const i=n[0].clientRect;return r?e<=i.left:t<=i.top}}_getItemIndexFromPointerPosition(e,t,n,r){const i="horizontal"===this._orientation,s=this._itemPositions.findIndex(({drag:s,clientRect:o})=>{if(s===e)return!1;if(r){const e=i?r.x:r.y;if(s===this._previousSwap.drag&&this._previousSwap.overlaps&&e===this._previousSwap.delta)return!1}return i?t>=Math.floor(o.left)&&t<Math.floor(o.right):n>=Math.floor(o.top)&&n<Math.floor(o.bottom)});return-1!==s&&this.sortPredicate(s,e,this)?s:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(e,t){return null!=this._clientRect&&mE(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,n){return this._siblings.find(r=>r._canReceive(e,t,n))}_canReceive(e,t,n){if(!this._clientRect||!mE(this._clientRect,t,n)||!this.enterPredicate(e,this))return!1;const r=this._getShadowRoot().elementFromPoint(t,n);if(!r)return!1;const i=Nk(this.element);return r===i||i.contains(r)}_startReceiving(e,t){const n=this._activeSiblings;!n.has(e)&&t.every(e=>this.enterPredicate(e,this)||this._draggables.indexOf(e)>-1)&&(n.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&(this._itemPositions.forEach(({clientRect:e})=>{yE(e,t.top,t.left)}),this._itemPositions.forEach(({drag:e})=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=Jk(Nk(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._activeDraggables.filter(e=>e.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function ME(e,t){const{top:n,bottom:r,height:i}=e,s=.05*i;return t>=n-s&&t<=n+s?1:t>=r-s&&t<=r+s?2:0}function ZE(e,t){const{left:n,right:r,width:i}=e,s=.05*i;return t>=n-s&&t<=n+s?1:t>=r-s&&t<=r+s?2:0}const UE=Wk({passive:!1,capture:!0});let FE=(()=>{class e{constructor(e,t){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=e=>e.isDragging(),this.pointerMove=new B_.xQ,this.pointerUp=new B_.xQ,this.scroll=new B_.xQ,this._preventDefaultWhileDragging=e=>{this._activeDragInstances.length>0&&e.preventDefault()},this._persistentTouchmoveListener=e=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&e.preventDefault(),this.pointerMove.next(e))},this._document=t}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,UE)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,UE)}startDragging(e,t){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const e=t.type.startsWith("touch");this._globalListeners.set(e?"touchend":"mouseup",{handler:e=>this.pointerUp.next(e),options:!0}).set("scroll",{handler:e=>this.scroll.next(e),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:UE}),e||this._globalListeners.set("mousemove",{handler:e=>this.pointerMove.next(e),options:UE}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((e,t)=>{this._document.addEventListener(t,e.handler,e.options)})})}}stopDragging(e){const t=this._activeDragInstances.indexOf(e);t>-1&&(this._activeDragInstances.splice(t,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const t=[this.scroll];return e&&e!==this._document&&t.push(new Me.y(t=>this._ngZone.runOutsideAngular(()=>{const n=e=>{this._activeDragInstances.length&&t.next(e)};return e.addEventListener("scroll",n,!0),()=>{e.removeEventListener("scroll",n,!0)}}))),(0,nE.T)(...t)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,t)=>{this._document.removeEventListener(t,e.handler,e.options)}),this._globalListeners.clear()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.R0b),r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const qE={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let VE=(()=>{class e{constructor(e,t,n,r){this._document=e,this._ngZone=t,this._viewportRuler=n,this._dragDropRegistry=r}createDrag(e,t=qE){return new xE(e,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new LE(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o),r.LFG(r.R0b),r.LFG(Xk),r.LFG(FE))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const jE=new r.OlP("CDK_DRAG_PARENT"),BE=new r.OlP("CdkDropListGroup"),$E=new r.OlP("CDK_DRAG_CONFIG");let HE=0;const zE=new r.OlP("CdkDropList");let GE=(()=>{class e{constructor(t,n,i,s,o,a,c){this.element=t,this._changeDetectorRef=i,this._scrollDispatcher=s,this._dir=o,this._group=a,this._destroyed=new B_.xQ,this.connectedTo=[],this.id="cdk-drop-list-"+HE++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new r.vpe,this.entered=new r.vpe,this.exited=new r.vpe,this.sorted=new r.vpe,this._unsortedItems=new Set,this._dropListRef=n.createDropList(t),this._dropListRef.data=this,c&&this._assignDefaults(c),this._dropListRef.enterPredicate=(e,t)=>this.enterPredicate(e.data,t.data),this._dropListRef.sortPredicate=(e,t,n)=>this.sortPredicate(e,t.data,n.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),e._dropLists.push(this),a&&a._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=Pk(e)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((e,t)=>e._dragRef.getVisibleElement().compareDocumentPosition(t._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const t=e._dropLists.indexOf(this);t>-1&&e._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe(mb(this._dir.value),rE(this._destroyed)).subscribe(e=>t.withDirection(e)),t.beforeStarted.subscribe(()=>{const n=(r=this.connectedTo,Array.isArray(r)?r:[r]).map(t=>"string"==typeof t?e._dropLists.find(e=>e.id===t):t);var r;if(this._group&&this._group._items.forEach(e=>{-1===n.indexOf(e)&&n.push(e)}),!this._scrollableParentsResolved){const e=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(e=>e.getElementRef().nativeElement);this._dropListRef.withScrollableParents(e),this._scrollableParentsResolved=!0}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=Pk(this.sortingDisabled),t.autoScrollDisabled=Pk(this.autoScrollDisabled),t.autoScrollStep=Rk(this.autoScrollStep,2),t.connectedTo(n.filter(e=>e&&e!==this).map(e=>e._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(e=>{this.entered.emit({container:this,item:e.item.data,currentIndex:e.currentIndex})}),e.exited.subscribe(e=>{this.exited.emit({container:this,item:e.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(e=>{this.sorted.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,container:this,item:e.item.data})}),e.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,item:e.item.data,isPointerOverContainer:e.isPointerOverContainer,distance:e.distance,dropPoint:e.dropPoint}),this._changeDetectorRef.markForCheck()})}_assignDefaults(e){const{lockAxis:t,draggingDisabled:n,sortingDisabled:r,listAutoScrollDisabled:i,listOrientation:s}=e;this.disabled=null!=n&&n,this.sortingDisabled=null!=r&&r,this.autoScrollDisabled=null!=i&&i,this.orientation=s||"vertical",t&&(this.lockAxis=t)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(e=>e._dragRef))}}return e._dropLists=[],e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(VE),r.Y36(r.sBO),r.Y36(Qk),r.Y36(cE,8),r.Y36(BE,12),r.Y36($E,8))},e.\u0275dir=r.lG2({type:e,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(e,t){2&e&&(r.uIk("id",t.id),r.ekj("cdk-drop-list-disabled",t.disabled)("cdk-drop-list-dragging",t._dropListRef.isDragging())("cdk-drop-list-receiving",t._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[r._Bn([{provide:BE,useValue:void 0},{provide:zE,useExisting:e}])]}),e})();const KE=new r.OlP("CdkDragHandle"),WE=new r.OlP("CdkDragPlaceholder"),JE=new r.OlP("CdkDragPreview");let YE=(()=>{class e{constructor(t,n,i,s,o,a,c,u,l,h,d){this.element=t,this.dropContainer=n,this._ngZone=s,this._viewContainerRef=o,this._dir=c,this._changeDetectorRef=l,this._selfHandle=h,this._parentDrag=d,this._destroyed=new B_.xQ,this.started=new r.vpe,this.released=new r.vpe,this.ended=new r.vpe,this.entered=new r.vpe,this.exited=new r.vpe,this.dropped=new r.vpe,this.moved=new Me.y(e=>{const t=this._dragRef.moved.pipe((0,Be.U)(e=>({source:this,pointerPosition:e.pointerPosition,event:e.event,delta:e.delta,distance:e.distance}))).subscribe(e);return()=>{t.unsubscribe()}}),this._dragRef=u.createDrag(t,{dragStartThreshold:a&&null!=a.dragStartThreshold?a.dragStartThreshold:5,pointerDirectionChangeThreshold:a&&null!=a.pointerDirectionChangeThreshold?a.pointerDirectionChangeThreshold:5,zIndex:a?.zIndex}),this._dragRef.data=this,e._dragInstances.push(this),a&&this._assignDefaults(a),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=Pk(e),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(pb(1),rE(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(e){const t=e.rootElementSelector,n=e.freeDragPosition;t&&!t.firstChange&&this._updateRootElement(),n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=e._dragInstances.indexOf(this);t>-1&&e._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const e=this.element.nativeElement;let t=e;this.rootElementSelector&&(t=void 0!==e.closest?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(t||e)}_getBoundaryElement(){const e=this.boundaryElement;return e?"string"==typeof e?this.element.nativeElement.closest(e):Nk(e):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const e=this._dir,n=this.dragStartDelay,r=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,i=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof n&&n?n:Rk(n),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(r).withPreviewTemplate(i).withPreviewContainer(this.previewContainer||"global"),e&&t.withDirection(e.value)}}),t.beforeStarted.pipe(pb(1)).subscribe(()=>{if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let n=this.element.nativeElement.parentElement;for(;n;){if(n.classList.contains("cdk-drag")){t.withParent(e._dragInstances.find(e=>e.element.nativeElement===n)?._dragRef||null);break}n=n.parentElement}})}_handleEvents(e){e.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(()=>{this.released.emit({source:this})}),e.ended.subscribe(e=>{this.ended.emit({source:this,distance:e.distance,dropPoint:e.dropPoint}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(e=>{this.entered.emit({container:e.container.data,item:this,currentIndex:e.currentIndex})}),e.exited.subscribe(e=>{this.exited.emit({container:e.container.data,item:this})}),e.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,isPointerOverContainer:e.isPointerOverContainer,item:this,distance:e.distance,dropPoint:e.dropPoint})})}_assignDefaults(e){const{lockAxis:t,dragStartDelay:n,constrainPosition:r,previewClass:i,boundaryElement:s,draggingDisabled:o,rootElementSelector:a,previewContainer:c}=e;this.disabled=null!=o&&o,this.dragStartDelay=n||0,t&&(this.lockAxis=t),r&&(this.constrainPosition=r),i&&(this.previewClass=i),s&&(this.boundaryElement=s),a&&(this.rootElementSelector=a),c&&(this.previewContainer=c)}_setupHandlesListener(){this._handles.changes.pipe(mb(this._handles),(0,Lb.b)(e=>{const t=e.filter(e=>e._parentDrag===this).map(e=>e.element);this._selfHandle&&this.rootElementSelector&&t.push(this.element),this._dragRef.withHandles(t)}),ub(e=>(0,nE.T)(...e.map(e=>e._stateChanges.pipe(mb(e))))),rE(this._destroyed)).subscribe(e=>{const t=this._dragRef,n=e.element.nativeElement;e.disabled?t.disableHandle(n):t.enableHandle(n)})}}return e._dragInstances=[],e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(zE,12),r.Y36(o),r.Y36(r.R0b),r.Y36(r.s_b),r.Y36($E,8),r.Y36(cE,8),r.Y36(VE),r.Y36(r.sBO),r.Y36(KE,10),r.Y36(jE,12))},e.\u0275dir=r.lG2({type:e,selectors:[["","cdkDrag",""]],contentQueries:function(e,t,n){if(1&e&&(r.Suo(n,JE,5),r.Suo(n,WE,5),r.Suo(n,KE,5)),2&e){let e;r.iGM(e=r.CRH())&&(t._previewTemplate=e.first),r.iGM(e=r.CRH())&&(t._placeholderTemplate=e.first),r.iGM(e=r.CRH())&&(t._handles=e)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(e,t){2&e&&r.ekj("cdk-drag-disabled",t.disabled)("cdk-drag-dragging",t._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[r._Bn([{provide:jE,useExisting:e}]),r.TTD]}),e})(),QE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[VE],imports:[eE]}),e})();var XE=(()=>(function(e){e[e.None=0]="None",e[e.Wait=1]="Wait",e[e.AddVariable=2]="AddVariable",e[e.SplashShow=3]="SplashShow",e[e.TitleShow=4]="TitleShow",e[e.TitleHide=5]="TitleHide",e[e.ClosedCaptionShow=6]="ClosedCaptionShow",e[e.ClosedCaptionHide=7]="ClosedCaptionHide",e[e.NewScene=8]="NewScene",e[e.SceneTitleHide=9]="SceneTitleHide",e[e.BgImageShow=10]="BgImageShow",e[e.BgImageHide=11]="BgImageHide",e[e.BgEffectsPlay=12]="BgEffectsPlay",e[e.BgEffectsStop=13]="BgEffectsStop",e[e.BgMusicPlay=14]="BgMusicPlay",e[e.BgMusicPause=15]="BgMusicPause",e[e.BgMusicStop=16]="BgMusicStop",e[e.SoundEffectsShow=17]="SoundEffectsShow",e[e.SoundEffectsHide=18]="SoundEffectsHide",e[e.SoundEffectsPlay=19]="SoundEffectsPlay",e[e.SoundEffectsPause=20]="SoundEffectsPause",e[e.SoundEffectsStop=21]="SoundEffectsStop",e[e.CharAdd=22]="CharAdd",e[e.CharRemove=23]="CharRemove",e[e.CharSpeak=24]="CharSpeak",e[e.CharShutup=25]="CharShutup",e[e.CharEffectsPlay=26]="CharEffectsPlay",e[e.CharEffectsStop=27]="CharEffectsStop",e[e.NarratorSpeak=28]="NarratorSpeak",e[e.ImageSnippetShow=29]="ImageSnippetShow",e[e.ImageSnippetHide=30]="ImageSnippetHide",e[e.TextEffectShow=31]="TextEffectShow",e[e.WeatherEffectStart=32]="WeatherEffectStart",e[e.TextEffectHide=33]="TextEffectHide",e[e.DubbingPlay=34]="DubbingPlay"}(XE||(XE={})),XE))();class eC{constructor(e,t,n){this.commandType=XE.None,this.waitAfterInMs=1e3,this.commandType=e,this.settings=n,this.waitAfterInMs=t}}class tC{composeEvent(e){try{let t=e.indexOf(":"),n=e.substr(1,t-2),r=e.substr(t+1,e.length).replace("<","").replace(">","");return[new eC(XE.AddVariable,0,{name:n,value:r})]}catch(Gm){return[]}}}class nC{composeEvent(e){try{let t={value:e.split(":")[1].replace("[","").replace("]","").trim()};return[new eC(XE.BgImageHide,0,{}),new eC(XE.BgImageShow,0,t)]}catch(Gm){return[]}}}class rC{composeEvent(e){try{let t=e.split(":")[1].replace("[","").replace("]","").trim(),n={value:t,loop:e.split(":")[0].trim().includes("bgm")},r=[];return r.push(new eC(t?XE.BgMusicPlay:XE.BgMusicStop,0,n)),console.log(r),r}catch(Gm){return[]}}}class iC{composeEvent(e){try{let t=e.indexOf("(")>1&&e.indexOf(")")>e.indexOf("("),n={title:e.substr(2,t?e.indexOf("(")-2:e.length-2).trim(),subtitle:t?e.substring(e.indexOf("(")+1,e.indexOf(")")).trim():""};return[new eC(XE.TitleShow,4e3,n),new eC(XE.TitleHide,0,{})]}catch(Gm){return[]}}}class sC{composeEvent(e){try{let t=e.substr(4,e.length).trim();return[new eC(XE.NewScene,3e3,{title:t}),new eC(XE.SceneTitleHide,0,{})]}catch(Gm){return[]}}}var oC=(()=>(function(e){e[e.None=0]="None",e[e.Left=1]="Left",e[e.Right=2]="Right"}(oC||(oC={})),oC))();const aC=["serious","angry","scared","whisper","creepy","redacted"];class cC{constructor(e){this.id="",this.name="",this.tokenId="",this.nft="sj",this.imageUrl="",this.position=oC.None,this.dialogue="",this.dialogueType="normal",this.anonLevel=0,this.id=e.id,this.name=e.name,this.tokenId=e.tokenId,this.nft=e.nft,this.imageUrl=e.imageUrl,this.position=e.position,this.dialogue=e.dialogue,this.anonLevel=e.anonLevel}}class uC{composeEvent(e){var t;try{let n=e.split(":"),r=n[0].split("|")[0],i=r.toUpperCase().includes("R")?oC.Right:oC.Left,s=r.split("?").length,o=n[0].split("|")[1].trim(),a=null===(t=n[1])||void 0===t?void 0:t.match(/[^\.!\?]+[\.!\?]+/g),c=[new eC(XE.CharAdd,0,{name:4===s||2===s?"?????":`${o}`,position:i,anonLevel:s,id:o,dialogue:""})];if(!a&&n[1].trim().length>0){let e=n[1].trim(),t="normal";aC.forEach(n=>{e.includes(`$${n}$`)&&(t=n,e=e.replace(`$${n}$`,"").trim())});let r={name:4===s||2===s?"?????:":`${o}:`,position:i,anonLevel:s,id:o,dialogueType:t,dialogue:e.trim()};return c.push(new eC(XE.CharSpeak,1e3,r)),c}return null==a||a.forEach(e=>{e=e.trim();let t="normal";aC.forEach(n=>{e.includes(`$${n}$`)&&(t=n,e=e.replace(`$${n}$`,"").trim())});let n={name:4===s||2===s?"?????":`${o}`,position:i,anonLevel:s,id:o,dialogueType:t,dialogue:e.trim()};e.trim()&&c.push(new eC(XE.CharSpeak,1e3,n))}),c}catch(n){return[]}}}class lC{composeEvent(e){var t;try{let n=e.split(":"),r=null===(t=n[1])||void 0===t?void 0:t.match(/[^\.!\?]+[\.!\?]+/g),i=[];if(!r&&n[1].length>0){let e={dialogue:n[1].trim()};return i.push(new eC(XE.NarratorSpeak,1e3,e)),i}return null==r||r.forEach(e=>{let t={dialogue:e.trim()};e.trim()&&i.push(new eC(XE.NarratorSpeak,1e3,t))}),i.push(new eC(XE.NarratorSpeak,0,{dialogue:""})),i}catch(n){return[]}}}class hC{composeEvent(e){try{let t=e.split(":")[1].replace("[","").replace("]","").trim();return[new eC(XE.BgImageShow,5e3,{value:t})]}catch(Gm){return[]}}}class dC{composeEvent(e){try{let t=e.split("|")[1];return[new eC(XE.CharRemove,0,{name:t,id:t})]}catch(Gm){return[]}}}class pC{composeEvent(e){try{let t=e.split(":")[1].replace("[","").replace("]","").trim(),n={value:t};return t?[new eC(XE.ImageSnippetShow,1e3,n)]:[new eC(XE.ImageSnippetHide,0,n)]}catch(Gm){return[]}}}class fC{composeEvent(e){var t;try{let n=e.split(":"),r=null===(t=n[0].split("|"))||void 0===t?void 0:t[1],i=n[1],s=[],o={value:i,posIndex:r,position:"pos-"+r};return i?(s.push(new eC(XE.TextEffectShow,1e3,o)),s.push(new eC(XE.TextEffectHide,0,o))):s.push(new eC(XE.TextEffectHide,0,o)),s}catch(n){return[]}}}class gC{composeEvent(e){try{let t=e.split(":"),n=t[1].match(/[^\.!\?]+[\.!\?]+/g),r=[];if(!n&&t[1].length>0){let e={cc:t[1].trim()};return r.push(new eC(XE.ClosedCaptionShow,1e3,e)),e={cc:""},r.push(new eC(XE.ClosedCaptionShow,0,e)),r}return null==n||n.forEach(e=>{let t={cc:e.trim()};e.trim()&&r.push(new eC(XE.ClosedCaptionShow,1e3,t))}),r.push(new eC(XE.ClosedCaptionShow,0,{cc:""})),r}catch(Gm){return[]}}}class mC{composeEvent(e){try{let t=e.split("|"),n=t.length>1?t[1].toLowerCase():"none",r=[];return r.push(new eC(XE.WeatherEffectStart,0,{value:n})),r}catch(Gm){return[]}}}let yC=(()=>{class e{constructor(){this.eventHandlerMap=new Map([[XE.AddVariable,new tC],[XE.BgImageShow,new nC],[XE.BgMusicPlay,new rC],[XE.ImageSnippetShow,new pC],[XE.TitleShow,new iC],[XE.NewScene,new sC],[XE.CharAdd,new uC],[XE.CharRemove,new dC],[XE.NarratorSpeak,new lC],[XE.SplashShow,new hC],[XE.TextEffectShow,new fC],[XE.ClosedCaptionShow,new gC],[XE.WeatherEffectStart,new mC]])}getStoryEventCommand(e){var t;let n=this.getCommandType(e);return(null===(t=this.eventHandlerMap.get(n))||void 0===t?void 0:t.composeEvent(e))||[]}getCommandType(e){return 0===e.indexOf("> N:")&&e.length>4?XE.NarratorSpeak:0===e.indexOf("> CC:")&&e.length>5?XE.ClosedCaptionShow:0===e.indexOf("> E|")&&e.length>4?XE.TextEffectShow:0===e.indexOf("> W|")&&e.length>4?XE.WeatherEffectStart:(0===e.indexOf("> L")||0===e.indexOf("> R"))&&e.length>4?XE.CharAdd:0===e.indexOf("> X|")&&e.length>4?XE.CharRemove:0===e.indexOf("`bg`:")?XE.BgImageShow:0===e.indexOf("`bgm`:")||0===e.indexOf("`soundclip`:")?XE.BgMusicPlay:0===e.indexOf("`imgpop`:")?XE.ImageSnippetShow:0===e.indexOf("`cover`:")?XE.SplashShow:0===e.indexOf("[")&&e.indexOf("]:")>1?XE.AddVariable:0===e.indexOf("# ")?XE.TitleShow:0===e.indexOf("### ")?XE.NewScene:XE.None}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function vC(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",104),r._UZ(1,"div",105),r.TgZ(2,"span",106),r.NdJ("click",function(){const t=r.CHM(e),n=t.index,i=t.$implicit;return r.oxw().removeVariable(n,i)}),r._UZ(3,"i",107),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit,n=r.oxw();r.Q6J("cdkDragData",e),r.xp6(1),r.Q6J("innerHtml",n.getVariableHtml(e),r.oJD)}}function _C(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",104),r._UZ(1,"div",105),r.TgZ(2,"span",106),r.NdJ("click",function(){const t=r.CHM(e),n=t.index,i=t.$implicit;return r.oxw().removeScript(n,i)}),r._UZ(3,"i",107),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit,n=t.index,i=r.oxw();r.Q6J("cdkDragData",e),r.xp6(1),r.Q6J("innerHtml",i.getScriptHtml(e,n),r.oJD)}}function bC(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"p",8),r.TgZ(1,"button",40),r.NdJ("click",function(){const t=r.CHM(e).$implicit,n=r.oxw();return n.removeFromScene("dialogue",n.getCharacterAvatarName(t))}),r.TgZ(2,"span",10),r._UZ(3,"img",108),r.qZA(),r.TgZ(4,"span"),r._uU(5),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit,n=r.oxw();r.ekj("is-hidden",!n.isValidCharacterVariableScript(e)),r.xp6(3),r.Q6J("src",n.getCharacterAvatarUrl(e),r.LSH),r.xp6(2),r.Oqu(n.getCharacterAvatarName(e))}}function wC(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",88),r.TgZ(1,"div",109),r.NdJ("click",function(){const t=r.CHM(e).$implicit,n=r.oxw();return n.setFile(t,n.currentSettings.type)}),r.TgZ(2,"div",90),r.TgZ(3,"figure",110),r._UZ(4,"img",111),r.qZA(),r.qZA(),r.TgZ(5,"p",93),r._UZ(6,"i",112),r._uU(7),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit,n=t.index,i=r.oxw();r.ekj("is-hidden",!i.isCorrectFileToDisplay(e,i.currentSettings.type)),r.xp6(3),r.ekj("is-hidden","bg"!==i.currentSettings.type&&"imgpop"!==i.currentSettings.type),r.xp6(1),r.ekj("selected",i.charManagerSettings.targetCharIndex===n),r.Q6J("src",i.getVariableValue(e),r.LSH),r.xp6(2),r.ekj("is-hidden","bgm"!==i.currentSettings.type&&"soundclip"!==i.currentSettings.type),r.xp6(1),r.hij(" ",i.getVariableName(e)," ")}}function SC(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"p",8),r.TgZ(1,"button",40),r.NdJ("click",function(){const t=r.CHM(e).$implicit,n=r.oxw();return n.selectCharacterToSpeak(n.getCharacterAvatarName(t))}),r.TgZ(2,"span",10),r._UZ(3,"img",108),r.qZA(),r.TgZ(4,"span"),r._uU(5),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit,n=r.oxw();r.ekj("is-hidden",!n.isValidCharacterVariableScript(e)),r.xp6(1),r.ekj("is-info",n.getCharacterAvatarName(e)===n.currentSettings.name),r.xp6(2),r.Q6J("src",n.getCharacterAvatarUrl(e),r.LSH),r.xp6(2),r.Oqu(n.getCharacterAvatarName(e))}}function TC(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",88),r.TgZ(1,"div",109),r.NdJ("click",function(){const t=r.CHM(e).index;return r.oxw().editCharacter(t)}),r.TgZ(2,"div",90),r.TgZ(3,"figure",91),r._UZ(4,"img",113),r.qZA(),r.qZA(),r.TgZ(5,"p",93),r._uU(6),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit,n=t.index,i=r.oxw();r.ekj("is-hidden",!i.isValidCharacterVariableScript(e)),r.xp6(4),r.ekj("selected",i.charManagerSettings.targetCharIndex===n),r.Q6J("src",i.getCharacterAvatarUrl(e),r.LSH),r.xp6(2),r.hij(" ",i.getCharacterAvatarName(e)," ")}}let IC=(()=>{class e{constructor(e,t,n){this.domSanitizer=e,this.storyboardService=t,this.storyEventService=n,this.dataUpdated=new r.vpe,this._rawScreenplay="",this.variablesData=new Map,this.variables=[],this.scripts=[],this.showDiagOptions=!1,this.fileVariableSettings={name:"",value:""},this.charManagerSettings={visible:!1,targetCollection:"SJ",targetCharIndex:-1,targetCharName:"",tokenId:"",name:"",maxTokenId:9e3,minTokenId:0},this.tempDialogueSetting={type:"none",name:"",position:"right",isHidden:!1,isUnnamed:!1,inputText:"",line:""},this.previousDialogueSetting={type:"none",name:"",position:"right",isHidden:!1,isUnnamed:!1,inputText:"",line:""},this.currentSettings={type:"none",name:"",position:"right",isHidden:!1,isUnnamed:!1,inputText:"",line:""}}set reset(e){this.charManagerSettings={visible:!1,targetCollection:"SJ",targetCharIndex:-1,targetCharName:"",tokenId:"",name:"",maxTokenId:9e3,minTokenId:0},this.tempDialogueSetting={type:"none",name:"",position:"right",isHidden:!1,isUnnamed:!1,inputText:"",line:""},this.previousDialogueSetting={type:"none",name:"",position:"right",isHidden:!1,isUnnamed:!1,inputText:"",line:""},this.currentSettings={type:"none",name:"",position:"right",isHidden:!1,isUnnamed:!1,inputText:"",line:""}}set rawScreenplay(e){e!==this.rawScreenplay&&(this._rawScreenplay=e,this.breakdownRawScreenplay())}get rawScreenplay(){return this._rawScreenplay}drop(e){e.previousContainer===e.container?this.moveLine(e.previousIndex,e.currentIndex):function(e,t,n,r){const i=OE(n,e.length-1),s=OE(r,t.length);e.length&&t.splice(s,0,e.splice(i,1)[0])}(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex)}moveLine(e,t){var n=this.scripts.splice(e,1);this.scripts.splice(t,0,n[0]),this.remap()}noReturnPredicate(){return!1}getVariableHtml(e){let t=this.storyEventService.getStoryEventCommand(e);if(t.length<1)return`<span class="tag is-danger is-dark">${e}</span>`;let n=this.isValidUrl(t[0].settings.value)?`<span class="tag is-success is-light"><i class="fas fa-external-link mr-1"></i>${t[0].settings.value}</span>`:this.isValidAvatar(t[0].settings.value)?`<a target="_blank" href="${this.storyboardService.getAvatarLink(t[0].settings.value)}"><img class="circle-radius" width="25px" src="${this.storyboardService.getAvatar(t[0].settings.value)}"></a><span class="tag is-success is-light"><i class="fas fa-id-badge mr-1"></i>${t[0].settings.value}</span>`:`<span class="tag is-danger">${t[0].settings.value}</span>`;return`<span class="tag is-info mr-1">${t[0].settings.name}</span>\n    ${n}`}isValidUrl(e){return 0===e.trim().indexOf("http")}isValidAvatar(e){return!this.isValidUrl(e)&&(e=e.toLowerCase(),!Number.isNaN(Number(e))&&Number.parseInt(e)>=0&&Number.parseInt(e)<=9e3||0===e.trim().indexOf("sj#")&&(e=e.replace("sj#",""),!Number.isNaN(Number(e))&&Number.parseInt(e)>=0&&Number.parseInt(e)<=9e3)||0===e.trim().indexOf("ocm#")&&(e=e.replace("ocm#",""),!Number.isNaN(Number(e))&&Number.parseInt(e)>=1&&Number.parseInt(e)<=1e4)||0===e.trim().indexOf("dusk#")&&(e=e.replace("dusk#",""),!Number.isNaN(Number(e))&&Number.parseInt(e)>=1&&Number.parseInt(e)<=1e4))}getDangerHtml(e,t="No asset found with this ID"){return`<span class="tag is-danger mr-1" title="${t}">${e}</span>`}getNoAssetSpecifiedHtml(){return'<span class="tag is-danger mr-1">No asset specified</span>'}getAssetLinkHtml(e,t=!1){return`<span class="tag is-info ${t?"is-light":""} mr-1"><i class="fas fa-external-link mr-1"></i>${e}</span>`}getCharLinkHtml(e,t=!1){return`<span class="tag is-info ${t?"is-light":""} mr-1"><i class="fas fa-id-badge mr-1"></i>${e}</span>`}getScriptHtml(e,t){let n=this.storyEventService.getStoryEventCommand(e),r=`<span class="tag is-light">${t}</span>`,i='<i class="fas fa-exclamation has-text-danger"></i>',s="";if(0===n.length)return`${i}\n       ${this.getDangerHtml(e,"This line will be ignored by the player.")}`;let o='<span class="tag is-warning is-light mr-1">wait...</span>';switch(n[0].commandType){case XE.TitleShow:s='<span class="tag is-primary is-light mr-1">show</span><span class="tag is-primary mr-1">TITLE</span>',""===n[0].settings.title?(r=i,s+='<span class="tag is-danger" title="Title is missing">EMPTY</span>'):s+=`<span>${n[0].settings.title}</span>`,""!==n[0].settings.subtitle&&(s+=`<span class="tag is-primary is-light mr-1">with</span><span class="tag is-primary mr-1">SUB-TITLE</span><span>${n[0].settings.subtitle}</span>`),n[0].waitAfterInMs<=0&&(o="");break;case XE.NewScene:s='<span class="tag is-primary is-light mr-1">show</span><span class="tag is-primary mr-1">SCENE TITLE</span>',""===n[0].settings.title?(r=i,s+='<span class="tag is-danger" title="Scene title is missing">EMPTY</span>'):s+=`<span>${n[0].settings.title}</span>`,n[0].waitAfterInMs<=0&&(o="");break;case XE.WeatherEffectStart:{let e='<span class="tag is-primary is-light mr-1">set</span><span class="tag is-primary mr-1"> WEATHER</span><span class="tag is-primary is-light mr-1"> to</span>';n[0].settings.value&&"none"===n[0].settings.value?(e='<span class="tag is-danger is-light mr-1">remove </span><span class="tag is-primary mr-1">WEATHER</span>',s+='<span class="tag is-success is-light mr-1">effects</span>'):n[0].settings.value&&["rain","snow"].includes(n[0].settings.value)?s=`<span class="tag is-info is-light mr-1">${n[0].settings.value}</span>`:(r=i,s=this.getDangerHtml(n[0].settings.value,"Unsupported weather value")),n[0].waitAfterInMs<=0&&(o=""),s=e+s;break}case XE.SplashShow:case XE.BgImageShow:{let e='<span class="tag is-primary is-light mr-1">set</span><span class="tag is-primary mr-1">BACKGROUND</span><span class="tag is-primary is-light mr-1">to</span>';n[0].settings.value?this.isResourceVariable(n[0].settings.value)?s=this.getAssetLinkHtml(n[0].settings.value):0===n[0].settings.value.indexOf("#")?s=`<span class="tag is-info is-light mr-1">HEX${n[0].settings.value}</span>`:(r=i,s=this.getDangerHtml(n[0].settings.value)):(r=i,s=this.getNoAssetSpecifiedHtml()),n[0].waitAfterInMs<=0&&(o=""),s=e+s;break}case XE.BgImageHide:if(n.length>1&&n[1]&&n[1].settings.value){let e='<span class="tag is-primary is-light mr-1">set</span><span class="tag is-primary mr-1">BACKGROUND</span><span class="tag is-primary is-light mr-1">to</span>';n[1].settings.value?this.isResourceVariable(n[1].settings.value)?s=this.getAssetLinkHtml(n[1].settings.value):0===n[1].settings.value.indexOf("#")?s=`<span class="tag is-link is-light mr-1">HEX${n[1].settings.value}</span>`:(r=i,s=this.getDangerHtml(n[1].settings.value)):(r=i,s=this.getNoAssetSpecifiedHtml()),n[1].waitAfterInMs<=0&&(o=""),s=e+s;break}s='<span class="tag is-danger is-light mr-1">remove </span><span class="tag is-primary mr-1">BACKGROUND</span>',s+='<span class="tag is-success is-light mr-1">from scene</span>',n[0].waitAfterInMs<=0&&(o="");break;case XE.BgMusicStop:s=n[0].settings.loop?'<span class="tag is-danger is-light mr-1">stop</span><span class="tag is-primary mr-1">BGM</span>':'<span class="tag is-danger is-light mr-1">stop</span><span class="tag is-primary mr-1">SOUND CLIP</span>',n[0].waitAfterInMs<=0&&(o="");break;case XE.BgMusicPlay:{let e=`<span class="tag is-primary is-light mr-1">${n[0].settings.loop?"play looping":"play one-time"}</span><span class="tag is-primary mr-1">${n[0].settings.loop?"BGM":"SOUND CLIP"}</span>`;n[0].settings.value?this.isResourceVariable(n[0].settings.value)?s=`<span class="tag is-info mr-1"><i class="fas fa-file-audio mr-1"></i> ${n[0].settings.value}</span>`:(r=i,s=this.getDangerHtml(n[0].settings.value)):(r=i,s=this.getNoAssetSpecifiedHtml()),n[0].waitAfterInMs<=0&&(o=""),s=e+s;break}case XE.ImageSnippetShow:{let e='<span class="tag is-primary is-light mr-1">show </span><span class="tag is-primary mr-1">POP-UP IMAGE</span>';n[0].settings.value?this.isResourceVariable(n[0].settings.value)?s=this.getAssetLinkHtml(n[0].settings.value):(r=i,s=this.getDangerHtml(n[0].settings.value)):(r=i,s=this.getNoAssetSpecifiedHtml()),n[0].waitAfterInMs<=0&&(o=""),s=e+s;break}case XE.ImageSnippetHide:s='<span class="tag is-danger is-light mr-1">remove </span><span class="tag is-primary mr-1">POP-UP IMAGE</span>',s+='<span class="tag is-success is-light mr-1">from scene</span>',n[0].waitAfterInMs<=0&&(o="");break;case XE.NarratorSpeak:{if(""===n[0].settings.dialogue){r=i,s=this.getDangerHtml(e,"Must use proper sentences.");break}let t='<span class="tag is-primary mr-1">NARRATION:</span>';if(n.length>1)for(let e=0;e<n.length;++e)""!==n[e].settings.dialogue&&(s+=`<span>${n[e].settings.dialogue}</span>`);n[0].waitAfterInMs<=0&&(o=""),s=t+s;break}case XE.ClosedCaptionShow:{if(""===n[0].settings.cc){r=i,s=this.getDangerHtml(e,"Must use proper sentences.");break}let t='<span class="tag is-primary mr-1">CAPTION:</span>';if(n.length>1)for(let e=0;e<n.length;++e)""!==n[e].settings.cc&&(s+=`<span>[${n[e].settings.cc}]</span>`);n[0].waitAfterInMs<=0&&(o=""),s=t+s;break}case XE.TextEffectShow:{if(""===n[0].settings.value.trim()||!n[0].settings.posIndex){r=i,s=`<span class="tag is-danger is-dark">${e}</span>`;break}let t=new Map([["1","bottom-left"],["2","bottom-center"],["3","bottom-right"],["4","middle-left"],["5","middle-center"],["6","middle-right"],["7","top-left"],["8","top-center"],["9","top-right"]]);s='<span class="tag is-primary is-light mr-1">show </span><span class="tag is-primary mr-1">TEXT EFFECT</span>',s+=`<span class="tag is-light mr-1"><strong>${n[0].settings.value.toUpperCase()}</strong></span>`,n[0].settings.posIndex>=1&&n[0].settings.posIndex<=9?s+=`<span class="tag is-primary is-light mr-1">in ${t.get(n[0].settings.posIndex)}</span>`:(r=i,s+=this.getDangerHtml(`to ${n[0].settings.position}`,"Invalid position for text effect.")),n[0].waitAfterInMs<=0&&(o="");break}case XE.TextEffectHide:r=i,s=this.getDangerHtml(e,"This line will be ignored by the player."),n[0].waitAfterInMs<=0&&(o="");break;case XE.CharRemove:{let e=n[0].settings.id.trim();if(""===e){r=i,s=this.getDangerHtml(e,"Invalid character ID");break}s='<span class="tag is-danger is-light mr-1">remove</span>',this.variablesData.has(e)&&this.isValidAvatar(this.variablesData.get(e))?s+=this.getCharLinkHtml(e):"[]"===e.trim()?s+='<span class="tag is-info is-light mr-1">ALL CHARACTERS</span>':(r=i,s+=this.getDangerHtml(e,"Invalid character ID")),s+='<span class="tag is-success is-light mr-1">from scene</span>',n[0].waitAfterInMs<=0&&(o="");break}case XE.CharAdd:{let e=n[0].settings.id.trim();if(""===e){r=i,s=this.getDangerHtml(e,"Invalid character ID");break}let t=n[0].settings.anonLevel>2?"[hidden]":"";t+=2===n[0].settings.anonLevel||4===n[0].settings.anonLevel?"[unnamed]":"";let a="";this.variablesData.has(e)&&this.isValidAvatar(this.variablesData.get(e))?a=this.getCharLinkHtml(t+e):(r=i,a=this.getDangerHtml(e,"Invalid character ID"));let c="";1===n[0].settings.position||2===n[0].settings.position?c=`<span class="tag is-primary is-light mr-1">${1===n[0].settings.position?"left":"right"} side</span>`:(r=i,c=this.getDangerHtml(e,"Invalid position"));let u="";if(n.length>1)for(let r=1;r<n.length;++r)u+=`<span>${n[r].settings.dialogue}</span>`;else u+='<span class="tag is-primary mr-1">added to scene</span>';n[n.length-1].waitAfterInMs<=0&&(o=""),s=a+c+u;break}default:return e}return`${r} ${s} ${o}`}isResourceVariable(e){return this.variablesData.has(e)&&!this.isCharacterVariable(e)}isCharacterVariable(e){return this.isValidAvatar(this.variablesData.get(e))}breakdownRawScreenplay(){let e=this.rawScreenplay.split(/[\r\n]+/);this.variablesData.clear(),this.variables=[],this.scripts=[],e.forEach(e=>{if(0===e.indexOf("[")&&e.indexOf("]:")>1){this.variables.push(e);let t=this.storyEventService.getStoryEventCommand(e);t.length>0&&this.variablesData.set(t[0].settings.name,t[0].settings.value)}else e.trim()&&this.scripts.push(e)}),this.tryRemoveDialogueWhenCharacterIsNoLongerAvailable()}tryRemoveDialogueWhenCharacterIsNoLongerAvailable(){""===this.currentSettings.name||this.variablesData.has(this.currentSettings.name)&&this.isValidAvatar(this.variablesData.get(this.currentSettings.name))||(this.currentSettings.name="")}removeScript(e,t){this.scripts.splice(e,1),this.remap()}removeVariable(e,t){this.variables.splice(e,1),this.remap()}remap(){let e="";this.variables.forEach(t=>{e+=`${t}\n`}),e&&(e+="\n"),this.scripts.forEach(t=>{e+=`${t}\n\n`}),this.breakdownRawScreenplay(),this.dataUpdated.emit(e)}get showDialogueOptions(){return["narrator","closed caption","dialogue","title","scene"].includes(this.currentSettings.type)}get textPlaceholder(){switch(this.currentSettings.type){case"narrator":return"Narrator:";case"closed caption":return"Closed caption:";case"title":return"My Title (Episode 1 - Episode name)";case"scene":return"Scene Title:";case"dialogue":{let e=this.currentSettings.isHidden?"[hidden]":"";return e+=this.currentSettings.isUnnamed?"[unnamed]":"",""===this.currentSettings.name?"":`${e}${this.currentSettings.name} will appear on the ${this.currentSettings.position} side. Type the dialogue here.`}default:return""}}selectCharacterToSpeak(e){this.currentSettings.name=e}changeSelectedCollection(e){this.charManagerSettings.targetCollection=e.target.value,this.charManagerSettings.minTokenId="SJ"===this.charManagerSettings.targetCollection?0:1,this.charManagerSettings.maxTokenId="SJ"===this.charManagerSettings.targetCollection?9e3:1e4}get tokenIdPlaceHolder(){return`ID (${this.charManagerSettings.minTokenId} - ${this.charManagerSettings.maxTokenId})`}addCharacter(){let e=`${this.charManagerSettings.targetCollection.toLowerCase()}#${this.charManagerSettings.tokenId}`,t=this.charManagerSettings.name.trim();this.charManagerSettings.targetCharIndex>=0?this.variables.splice(this.charManagerSettings.targetCharIndex,1,`[${t}]: ${e}`):this.variables.push(`[${t}]: ${e}`),this.resetAddCharFields(),this.remap()}editCharacter(e){let t=this.variables[e];if(!this.isValidCharacterVariableScript(t))return;this.charManagerSettings.targetCharIndex=e;let n=this.storyEventService.getStoryEventCommand(t);this.charManagerSettings.name=n[0].settings.name,this.charManagerSettings.targetCharName=n[0].settings.name;let r=n[0].settings.value.split("#");this.charManagerSettings.targetCollection=r[0].toUpperCase(),this.charManagerSettings.tokenId=r[1]}resetAddCharFields(){this.charManagerSettings.targetCharIndex=-1,this.charManagerSettings.name="",this.charManagerSettings.tokenId="",this.charManagerSettings.targetCharName=""}isValidCharacterName(){let e=this.charManagerSettings.targetCharIndex>=0&&this.charManagerSettings.targetCharName.toLowerCase()===this.charManagerSettings.name.toLowerCase(),t=!0;return t=this.isValidVariableName(this.charManagerSettings.name),""!==this.charManagerSettings.name&&(t||e)}isValidCharacter(){let e=`${this.charManagerSettings.targetCollection.toLowerCase()}#${this.charManagerSettings.tokenId}`;return this.isValidAvatar(e)&&this.isValidCharacterName()}getTargetAvatar(){let e=`${this.charManagerSettings.targetCollection.toLowerCase()}#${this.charManagerSettings.tokenId}`;return this.isValidCharacter()?this.storyboardService.getAvatar(e):"assets/images/silhouette-7.png"}isValidCharacterVariableScript(e){let t=this.storyEventService.getStoryEventCommand(e);return!(t.length<1)&&this.isValidAvatar(t[0].settings.value)}getVariableValue(e){let t=this.storyEventService.getStoryEventCommand(e);return 0===t.length?"#":this.isValidUrl(t[0].settings.value)?this.domSanitizer.bypassSecurityTrustResourceUrl(t[0].settings.value):"#"}getVariableName(e){let t=this.storyEventService.getStoryEventCommand(e);return 0===t.length?"":t[0].settings.name.replace("img_","").replace("aud_","")}isValidVariableName(e){if(""===e.trim())return!1;let t=!0;for(let[n,r]of this.variablesData)n.toLowerCase().trim()===e.toLowerCase().trim()&&(t=!1);return t}getCharacterAvatarUrl(e){let t=this.storyEventService.getStoryEventCommand(e);return this.isValidCharacterVariableScript(e)?this.storyboardService.getAvatar(t[0].settings.value):""}getCharacterAvatarName(e){let t=this.storyEventService.getStoryEventCommand(e);return this.isValidCharacterVariableScript(e)?t[0].settings.name:""}submit(e=null){var t,n,r,i;if(""!==this.currentSettings.inputText.trim()||"dialogue"===this.currentSettings.type){switch(this.currentSettings.type){case"narrator":this.scripts.push(`> N: ${this.currentSettings.inputText}`);break;case"closed caption":this.scripts.push(`> CC: ${this.currentSettings.inputText}`);break;case"title":this.scripts.push(`# ${this.currentSettings.inputText}`);break;case"scene":this.scripts.push(`### ${this.currentSettings.inputText}`);break;case"dialogue":{let s="";return this.currentSettings.isUnnamed&&(s+="?"),this.currentSettings.isHidden&&(s+="??"),this.scripts.push(`> ${"right"===this.currentSettings.position?"R":"L"}${s}|${this.currentSettings.name}: ${this.currentSettings.inputText.replace("\n","")}`),this.tempDialogueSetting.type=this.currentSettings.type,this.tempDialogueSetting.line=this.currentSettings.inputText,this.tempDialogueSetting.name=this.currentSettings.name,this.tempDialogueSetting.isHidden=this.currentSettings.isHidden,this.tempDialogueSetting.isUnnamed=this.currentSettings.isUnnamed,this.tempDialogueSetting.position=this.currentSettings.position,"dialogue"===this.previousDialogueSetting.type&&(this.currentSettings.type=this.previousDialogueSetting.type,this.currentSettings.name=null!==(t=this.previousDialogueSetting.name)&&void 0!==t?t:"",this.currentSettings.isHidden=null!==(n=this.previousDialogueSetting.isHidden)&&void 0!==n&&n,this.currentSettings.isUnnamed=null!==(r=this.previousDialogueSetting.isUnnamed)&&void 0!==r&&r,this.currentSettings.position=null!==(i=this.previousDialogueSetting.position)&&void 0!==i?i:"right"),this.previousDialogueSetting.type="dialogue",this.previousDialogueSetting.line="",this.previousDialogueSetting.name=this.tempDialogueSetting.name,this.previousDialogueSetting.isHidden=this.tempDialogueSetting.isHidden,this.previousDialogueSetting.isUnnamed=this.tempDialogueSetting.isUnnamed,this.previousDialogueSetting.position=this.tempDialogueSetting.position,this.currentSettings.inputText="",this.currentSettings.type="dialogue",this.remap(),void(e&&e.preventDefault())}}this.currentSettings.inputText="",this.currentSettings.type="none",this.remap()}else this.currentSettings.type="none"}setWeather(e){this.scripts.push(`> W|${e}`),this.currentSettings.type="none",this.remap()}isCorrectFileToDisplay(e,t){let n=this.storyEventService.getStoryEventCommand(e);if(0===n.length)return!1;let r="";return"bg"===t||"imgpop"===t?r="img_":"bgm"!==t&&"soundclip"!==t||(r="aud_"),0===n[0].settings.name.toLowerCase().indexOf(r)&&this.isValidUrl(n[0].settings.value)}addFileVariable(e=""){this.scripts.unshift(`[${e="bg"===e||"imgpop"===e?"img_":"bgm"===e||"soundclip"===e?"aud_":""}${this.fileVariableSettings.name}]: <${this.fileVariableSettings.value}>`),this.fileVariableSettings.name="",this.fileVariableSettings.value="",this.remap()}setFile(e,t){if("none"===t)return;let n=this.storyEventService.getStoryEventCommand(e);n.length>0&&this.variablesData.has(n[0].settings.name)&&this.scripts.push(`${"`"+t+"`:"} [${n[0].settings.name}]`),this.currentSettings.type="none",this.remap()}removeFromScene(e,t=""){switch(e){case"bg":this.scripts.push("`bg`: []");break;case"imgpop":this.scripts.push("`imgpop`: []");break;case"bgm":this.scripts.push("`bgm`: []");break;case"soundclip":this.scripts.push("`soundclip`: []");break;case"weather":this.scripts.push("> W|none");break;case"dialogue":this.scripts.push(`> X|${t}`);break;default:return}this.remap()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(Ee),r.Y36(cI),r.Y36(yC))},e.\u0275cmp=r.Xpm({type:e,selectors:[["screenplay-editor-widget"]],inputs:{reset:"reset",rawScreenplay:"rawScreenplay"},outputs:{dataUpdated:"dataUpdated"},decls:263,vars:97,consts:[[1,"command-container"],[1,"mb-3","heading","title"],["id","variables","cdkDropList","","cdkDropListConnectedTo","variables",1,"events-list",3,"cdkDropListData","cdkDropListEnterPredicate","cdkDropListDropped"],["class","event-box is-flex is-flex-direction-row is-justify-content-space-between","cdkDrag","",3,"cdkDragData",4,"ngFor","ngForOf"],["id","scripts","cdkDropList","","cdkDropListConnectedTo","scripts",1,"events-list",3,"cdkDropListData","cdkDropListEnterPredicate","cdkDropListDropped"],[1,"event-tool","p-2"],[1,"mb-2"],[1,"field","has-addons","mb-0",2,"flex-wrap","wrap"],[1,"control"],["title","Add dialoge",1,"button","is-small",3,"click"],[1,"icon","is-small"],[1,"fas","fa-comment"],["title","Add narration",1,"button","is-small",3,"click"],[1,"fas","fa-align-justify"],["title","Add closed caption",1,"button","is-small",3,"click"],[1,"fas","fa-closed-captioning"],["title","Add title & subtitles",1,"button","is-small",3,"click"],[1,"fas","fa-tag"],["title","Add/Change background and images",1,"button","is-small",3,"click"],[1,"fas","fa-image"],["title","Add/Change audio and music",1,"button","is-small",3,"click"],[1,"fas","fa-file-audio"],["title","Add/Change weather effects",1,"button","is-small",3,"click"],[1,"fas","fa-cloud"],[1,"fas","fa-align-center"],["title","Remove elements from scene",1,"button","is-small",3,"click"],[1,"fas","fa-broom"],[1,"control","is-hidden"],["title","Add wait event",1,"button","is-small"],[1,"fas","fa-clock"],[1,"heading"],[1,"field","has-addons","mt-2",2,"flex-wrap","wrap"],["title","Remove background image from scene",1,"button",3,"click"],[1,"icon","is-small","has-text-danger"],[1,"fas","fa-ban"],["title","Remove pop-up image from scene",1,"button",3,"click"],["title","Stop background music",1,"button",3,"click"],["title","Stop sound effects",1,"button",3,"click"],["title","Remove weather effects",1,"button",3,"click"],[1,"field","has-addons",2,"flex-wrap","inherit"],[1,"button",3,"click"],["width","50px","src","assets/images/silhouette-7.png",1,"circle-radius"],["class","control",3,"is-hidden",4,"ngFor","ngForOf"],[1,"field","has-addons","mt-2"],["title","Add a new character for your story",1,"button",3,"click"],[1,"fas","fa-cloud-rain"],[1,"fas","fa-snowflake"],[1,"mb-5","mt-4","ml-3","mr-3","is-flex","is-flex-direction-row",2,"flex-wrap","wrap"],[1,"heading",2,"width","100%"],[1,"field","has-addons","mb-4"],[1,"fas","fa-images"],[1,"is-flex","mb-4",2,"width","100%"],[1,"control","has-icons-right"],["type","email","placeholder","Name",1,"input","is-small",3,"ngModel","ngModelChange"],[1,"icon","is-small","is-right","has-text-info"],[1,"fas","fa-check"],[1,"is-flex-grow-4","control","has-icons-left","has-icons-right"],["type","email","placeholder","Input the file URL here.",1,"input","is-small",3,"ngModel","ngModelChange"],[1,"icon","is-small","is-left"],[1,"fas","fa-link"],[1,"button","is-success",3,"disabled","click"],[1,"notification","is-info","is-light",2,"font-size","13px","width","100%"],[1,"columns","is-tablet","is-multiline","is-centered",2,"width","100%"],["class","column is-2 is-one-fifth-tablet",3,"is-hidden",4,"ngFor","ngForOf"],[1,"mt-2","is-flex","is-flex-direction-row",2,"flex-wrap","wrap"],[1,"fas","fa-user-plus"],[3,"click"],[1,"is-flex","is-flex-direction-row"],[1,"field","has-addons","mb-0"],["title","Set character position to the left of the screen",1,"button","is-small",3,"click"],[1,"fas","fa-align-left"],["title","Set character position to the right of the screen",1,"button","is-small",3,"click"],[1,"fas","fa-align-right"],["title","Hide character face",1,"button","is-small","is-responsive",2,"width","100%",3,"click"],[1,"fas","fa-user"],["title","Hide character name",1,"button","is-small",2,"width","100%",3,"click"],[1,"fas","fa-question-circle"],[1,"control","is-flex-grow-1"],[1,"textarea","is-small",2,"min-height","90px","border","3px solid #3f8ed0",3,"placeholder","ngModel","keydown.enter","ngModelChange"],["title","Add character to scene",1,"button","is-small","is-light","is-success",2,"width","100%",3,"click"],[1,"modal"],[1,"modal-background",3,"click"],[1,"modal-card"],[1,"modal-card-head"],[1,"modal-card-title"],["aria-label","close",1,"delete",3,"click"],[1,"modal-card-body"],[1,"columns","is-tablet","is-multiline","is-centered"],[1,"column","is-2","is-one-fifth-tablet"],[1,"card"],[1,"card-image"],[1,"image","is-2by2"],["alt","Add Character Avatar",1,"circle-radius","selected",3,"src"],[1,"heading",2,"text-align","center"],[1,"modal-card-foot"],[1,"is-flex","is-flex-direction-row","m-1"],[1,"select","is-normal"],[3,"change"],[3,"selected"],[1,"is-flex-grow-2","control","has-icons-right"],["type","text",1,"input","is-normal",3,"placeholder","ngModel","ngModelChange"],[1,"icon","is-normal","is-right","has-text-info"],["type","text","placeholder","Unique name",1,"input","is-normal",3,"ngModel","ngModelChange"],[1,"button","is-small","is-normal","is-responsive",3,"disabled","click"],["cdkDrag","",1,"event-box","is-flex","is-flex-direction-row","is-justify-content-space-between",3,"cdkDragData"],[3,"innerHtml"],["title","Remove this line from script",1,"icon","is-small","is-danger",3,"is-hidden","click"],[1,"fas","fa-trash"],["width","50px",1,"circle-radius",3,"src"],[1,"card",3,"click"],[1,"image","is-5by3"],["alt","Resource",2,"max-height","70px","min-height","70px",3,"src"],[1,"audio-icon","fas","fa-file-audio"],["alt","Avatar",1,"circle-radius",3,"src"]],template:function(e,t){1&e&&(r.TgZ(0,"div"),r.TgZ(1,"div",0),r.TgZ(2,"h2",1),r._uU(3,"Assets"),r.qZA(),r.TgZ(4,"div",2),r.NdJ("cdkDropListDropped",function(e){return t.drop(e)}),r.YNc(5,vC,4,2,"div",3),r.qZA(),r.qZA(),r.qZA(),r.TgZ(6,"div",0),r.TgZ(7,"h2",1),r._uU(8,"Events"),r.qZA(),r.TgZ(9,"div",4),r.NdJ("cdkDropListDropped",function(e){return t.drop(e)}),r.YNc(10,_C,4,2,"div",3),r.TgZ(11,"div",5),r.TgZ(12,"div",6),r.TgZ(13,"div",7),r.TgZ(14,"p",8),r.TgZ(15,"button",9),r.NdJ("click",function(){return t.currentSettings.type="dialogue"})("click",function(){return t.showDiagOptions=!0}),r.TgZ(16,"span",10),r._UZ(17,"i",11),r.qZA(),r.TgZ(18,"span"),r._uU(19,"Talk"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(20,"p",8),r.TgZ(21,"button",12),r.NdJ("click",function(){return t.currentSettings.type="narrator"}),r.TgZ(22,"span",10),r._UZ(23,"i",13),r.qZA(),r.TgZ(24,"span"),r._uU(25,"Narrate"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(26,"p",8),r.TgZ(27,"button",14),r.NdJ("click",function(){return t.currentSettings.type="closed caption"}),r.TgZ(28,"span",10),r._UZ(29,"i",15),r.qZA(),r.TgZ(30,"span"),r._uU(31,"Caption"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(32,"p",8),r.TgZ(33,"button",16),r.NdJ("click",function(){return t.currentSettings.type="scene"}),r.TgZ(34,"span",10),r._UZ(35,"i",17),r.qZA(),r.TgZ(36,"span"),r._uU(37,"Scene"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(38,"p",8),r.TgZ(39,"button",18),r.NdJ("click",function(){return t.currentSettings.type="bg"}),r.TgZ(40,"span",10),r._UZ(41,"i",19),r.qZA(),r.TgZ(42,"span"),r._uU(43,"Images"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(44,"p",8),r.TgZ(45,"button",20),r.NdJ("click",function(){return t.currentSettings.type="bgm"}),r.TgZ(46,"span",10),r._UZ(47,"i",21),r.qZA(),r.TgZ(48,"span"),r._uU(49,"Audio"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(50,"p",8),r.TgZ(51,"button",22),r.NdJ("click",function(){return t.currentSettings.type="weather"}),r.TgZ(52,"span",10),r._UZ(53,"i",23),r.qZA(),r.TgZ(54,"span"),r._uU(55,"Weather"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(56,"p",8),r.TgZ(57,"button",16),r.NdJ("click",function(){return t.currentSettings.type="title"}),r.TgZ(58,"span",10),r._UZ(59,"i",24),r.qZA(),r.TgZ(60,"span"),r._uU(61,"Title"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(62,"p",8),r.TgZ(63,"button",25),r.NdJ("click",function(){return t.currentSettings.type="remove"}),r.TgZ(64,"span",10),r._UZ(65,"i",26),r.qZA(),r.qZA(),r.qZA(),r.TgZ(66,"p",27),r.TgZ(67,"button",28),r._UZ(68,"i",29),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(69,"div"),r.TgZ(70,"p",30),r._uU(71,"Select object to remove from current scene."),r.qZA(),r.TgZ(72,"div",31),r.TgZ(73,"p",8),r.TgZ(74,"button",32),r.NdJ("click",function(){return t.removeFromScene("bg")}),r.TgZ(75,"span",33),r._UZ(76,"i",34),r.qZA(),r.TgZ(77,"span"),r._uU(78,"Background"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(79,"p",8),r.TgZ(80,"button",35),r.NdJ("click",function(){return t.removeFromScene("imgpop")}),r.TgZ(81,"span",33),r._UZ(82,"i",34),r.qZA(),r.TgZ(83,"span"),r._uU(84,"Pop-up Image"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(85,"p",8),r.TgZ(86,"button",36),r.NdJ("click",function(){return t.removeFromScene("bgm")}),r.TgZ(87,"span",33),r._UZ(88,"i",34),r.qZA(),r.TgZ(89,"span"),r._uU(90,"Music"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(91,"p",8),r.TgZ(92,"button",37),r.NdJ("click",function(){return t.removeFromScene("soundclip")}),r.TgZ(93,"span",33),r._UZ(94,"i",34),r.qZA(),r.TgZ(95,"span"),r._uU(96,"Sound Effects"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(97,"p",8),r.TgZ(98,"button",38),r.NdJ("click",function(){return t.removeFromScene("weather")}),r.TgZ(99,"span",33),r._UZ(100,"i",34),r.qZA(),r.TgZ(101,"span"),r._uU(102,"Weather"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(103,"p",30),r._uU(104,"Select a character to remove from current scene."),r.qZA(),r.TgZ(105,"div",39),r.TgZ(106,"p",8),r.TgZ(107,"button",40),r.NdJ("click",function(){return t.removeFromScene("dialogue","[]")}),r.TgZ(108,"span",10),r._UZ(109,"img",41),r.qZA(),r.TgZ(110,"span"),r._uU(111,"[ALL]"),r.qZA(),r.qZA(),r.qZA(),r.YNc(112,bC,6,4,"p",42),r.qZA(),r.qZA(),r.TgZ(113,"div",43),r.TgZ(114,"p",8),r.TgZ(115,"button",44),r.NdJ("click",function(){return t.setWeather("rain")}),r.TgZ(116,"span",10),r._UZ(117,"i",45),r.qZA(),r.TgZ(118,"span"),r._uU(119,"Rain"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(120,"p",8),r.TgZ(121,"button",44),r.NdJ("click",function(){return t.setWeather("snow")}),r.TgZ(122,"span",10),r._UZ(123,"i",46),r.qZA(),r.TgZ(124,"span"),r._uU(125,"Snow"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(126,"p",8),r.TgZ(127,"button",44),r.NdJ("click",function(){return t.setWeather("none")}),r.TgZ(128,"span",33),r._UZ(129,"i",34),r.qZA(),r.TgZ(130,"span"),r._uU(131,"Stop Weather"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(132,"div",47),r.TgZ(133,"p",48),r._uU(134,"ADD AS"),r.qZA(),r.TgZ(135,"div",49),r.TgZ(136,"p",8),r.TgZ(137,"button",40),r.NdJ("click",function(){return t.currentSettings.type="bg"}),r.TgZ(138,"span",10),r._UZ(139,"i",19),r.qZA(),r.TgZ(140,"span"),r._uU(141,"Background"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(142,"p",8),r.TgZ(143,"button",40),r.NdJ("click",function(){return t.currentSettings.type="imgpop"}),r.TgZ(144,"span",10),r._UZ(145,"i",50),r.qZA(),r.TgZ(146,"span"),r._uU(147,"Pop-up Image"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(148,"div",49),r.TgZ(149,"p",8),r.TgZ(150,"button",40),r.NdJ("click",function(){return t.currentSettings.type="bgm"}),r.TgZ(151,"span",10),r._UZ(152,"i",19),r.qZA(),r.TgZ(153,"span"),r._uU(154,"Background Music"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(155,"p",8),r.TgZ(156,"button",40),r.NdJ("click",function(){return t.currentSettings.type="soundclip"}),r.TgZ(157,"span",10),r._UZ(158,"i",50),r.qZA(),r.TgZ(159,"span"),r._uU(160,"Sound Effects"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(161,"div",51),r.TgZ(162,"div",52),r.TgZ(163,"input",53),r.NdJ("ngModelChange",function(e){return t.fileVariableSettings.name=e}),r.qZA(),r.TgZ(164,"span",54),r._UZ(165,"i",55),r.qZA(),r.qZA(),r.TgZ(166,"div",56),r.TgZ(167,"input",57),r.NdJ("ngModelChange",function(e){return t.fileVariableSettings.value=e}),r.qZA(),r.TgZ(168,"span",58),r._UZ(169,"i",59),r.qZA(),r.TgZ(170,"span",54),r._UZ(171,"i",55),r.qZA(),r.qZA(),r.TgZ(172,"button",60),r.NdJ("click",function(){return t.addFileVariable(t.currentSettings.type)}),r._uU(173,"Create"),r.qZA(),r.qZA(),r.TgZ(174,"div",61),r._uU(175," Choose a file below. Please create one if you don't have one yet. "),r.qZA(),r.TgZ(176,"div",62),r.YNc(177,wC,8,10,"div",63),r.qZA(),r.qZA(),r.TgZ(178,"div"),r.TgZ(179,"div",64),r.TgZ(180,"div",39),r.TgZ(181,"p",8),r.TgZ(182,"button",40),r.NdJ("click",function(){return t.charManagerSettings.visible=!0}),r.TgZ(183,"span",10),r._UZ(184,"i",65),r.qZA(),r.qZA(),r.qZA(),r.YNc(185,SC,6,6,"p",42),r.qZA(),r.TgZ(186,"div",61),r._uU(187," Choose a character or "),r.TgZ(188,"a",66),r.NdJ("click",function(){return t.charManagerSettings.visible=!0}),r._uU(189,"create"),r.qZA(),r._uU(190," a new one. "),r.qZA(),r.qZA(),r.TgZ(191,"div",67),r.TgZ(192,"div"),r.TgZ(193,"div",68),r.TgZ(194,"p",8),r.TgZ(195,"button",69),r.NdJ("click",function(){return t.currentSettings.position="left"}),r.TgZ(196,"span",10),r._UZ(197,"i",70),r.qZA(),r.TgZ(198,"span"),r._uU(199,"Left"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(200,"p",8),r.TgZ(201,"button",71),r.NdJ("click",function(){return t.currentSettings.position="right"}),r.TgZ(202,"span",10),r._UZ(203,"i",72),r.qZA(),r.TgZ(204,"span"),r._uU(205,"Right"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(206,"p",8),r.TgZ(207,"button",73),r.NdJ("click",function(){return t.currentSettings.isHidden=!t.currentSettings.isHidden}),r.TgZ(208,"span",10),r._UZ(209,"i",74),r.qZA(),r.TgZ(210,"span"),r._uU(211,"Hide Face"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(212,"p",8),r.TgZ(213,"button",75),r.NdJ("click",function(){return t.currentSettings.isUnnamed=!t.currentSettings.isUnnamed}),r.TgZ(214,"span",10),r._UZ(215,"i",76),r.qZA(),r.TgZ(216,"span"),r._uU(217,"Hide Name"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(218,"div",77),r.TgZ(219,"textarea",78),r.NdJ("keydown.enter",function(e){return t.submit(e)})("ngModelChange",function(e){return t.currentSettings.inputText=e}),r.qZA(),r.qZA(),r.qZA(),r.TgZ(220,"button",79),r.NdJ("click",function(){return t.submit()}),r.TgZ(221,"span",10),r._UZ(222,"i",55),r.qZA(),r.TgZ(223,"span"),r._uU(224,"Add To Scene [Press Enter Key]"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(225,"div",80),r.TgZ(226,"div",81),r.NdJ("click",function(){return t.charManagerSettings.visible=!1}),r.qZA(),r.TgZ(227,"div",82),r.TgZ(228,"header",83),r.TgZ(229,"p",84),r._uU(230,"Characters"),r.qZA(),r.TgZ(231,"button",85),r.NdJ("click",function(){return t.charManagerSettings.visible=!1}),r.qZA(),r.qZA(),r.TgZ(232,"section",86),r.TgZ(233,"div",87),r.YNc(234,TC,7,6,"div",63),r.TgZ(235,"div",88),r.TgZ(236,"div",89),r.TgZ(237,"div",90),r.TgZ(238,"figure",91),r._UZ(239,"img",92),r.qZA(),r.qZA(),r.TgZ(240,"p",93),r._uU(241),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(242,"footer",94),r.TgZ(243,"div",95),r.TgZ(244,"div",96),r.TgZ(245,"select",97),r.NdJ("change",function(e){return t.changeSelectedCollection(e)}),r.TgZ(246,"option",98),r._uU(247,"SJ"),r.qZA(),r.TgZ(248,"option",98),r._uU(249,"OCM"),r.qZA(),r.TgZ(250,"option",98),r._uU(251,"DUSK"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(252,"div",99),r.TgZ(253,"input",100),r.NdJ("ngModelChange",function(e){return t.charManagerSettings.tokenId=e}),r.qZA(),r.TgZ(254,"span",101),r._UZ(255,"i",55),r.qZA(),r.qZA(),r.TgZ(256,"div",99),r.TgZ(257,"input",102),r.NdJ("ngModelChange",function(e){return t.charManagerSettings.name=e}),r.qZA(),r.TgZ(258,"span",101),r._UZ(259,"i",55),r.qZA(),r.qZA(),r.TgZ(260,"button",103),r.NdJ("click",function(){return t.addCharacter()}),r.TgZ(261,"span"),r._uU(262),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(1),r.ekj("is-hidden",t.variables.length<1),r.xp6(3),r.Q6J("cdkDropListData",t.variables)("cdkDropListEnterPredicate",t.noReturnPredicate),r.xp6(1),r.Q6J("ngForOf",t.variables),r.xp6(4),r.Q6J("cdkDropListData",t.scripts)("cdkDropListEnterPredicate",t.noReturnPredicate),r.xp6(1),r.Q6J("ngForOf",t.scripts),r.xp6(5),r.ekj("is-dark","dialogue"===t.currentSettings.type),r.xp6(6),r.ekj("is-dark","narrator"===t.currentSettings.type),r.xp6(6),r.ekj("is-dark","closed caption"===t.currentSettings.type),r.xp6(6),r.ekj("is-dark","scene"===t.currentSettings.type),r.xp6(6),r.ekj("is-dark","bg"===t.currentSettings.type||"imgpop"===t.currentSettings.type),r.xp6(6),r.ekj("is-dark","bgm"===t.currentSettings.type||"soundclip"===t.currentSettings.type),r.xp6(6),r.ekj("is-dark","weather"===t.currentSettings.type),r.xp6(6),r.ekj("is-dark","title"===t.currentSettings.type),r.xp6(6),r.ekj("is-dark","remove"===t.currentSettings.type),r.xp6(6),r.ekj("is-hidden","remove"!==t.currentSettings.type),r.xp6(43),r.Q6J("ngForOf",t.variables),r.xp6(1),r.ekj("is-hidden","weather"!==t.currentSettings.type),r.xp6(19),r.ekj("is-hidden","bg"!==t.currentSettings.type&&"imgpop"!==t.currentSettings.type&&"bgm"!==t.currentSettings.type&&"soundclip"!==t.currentSettings.type),r.xp6(3),r.ekj("is-hidden","bg"!==t.currentSettings.type&&"imgpop"!==t.currentSettings.type),r.xp6(2),r.ekj("is-info","bg"===t.currentSettings.type),r.xp6(6),r.ekj("is-info","imgpop"===t.currentSettings.type),r.xp6(5),r.ekj("is-hidden","bgm"!==t.currentSettings.type&&"soundclip"!==t.currentSettings.type),r.xp6(2),r.ekj("is-info","bgm"===t.currentSettings.type),r.xp6(6),r.ekj("is-info","soundclip"===t.currentSettings.type),r.xp6(7),r.Q6J("ngModel",t.fileVariableSettings.name),r.xp6(1),r.ekj("is-hidden",!t.isValidVariableName(t.fileVariableSettings.name)),r.xp6(3),r.Q6J("ngModel",t.fileVariableSettings.value),r.xp6(3),r.ekj("is-hidden",!t.isValidUrl(t.fileVariableSettings.value)),r.xp6(2),r.Q6J("disabled",!t.isValidUrl(t.fileVariableSettings.value)||!t.isValidVariableName(t.fileVariableSettings.name)),r.xp6(4),r.ekj("is-hidden","bg"!==t.currentSettings.type&&"imgpop"!==t.currentSettings.type&&"bgm"!==t.currentSettings.type&&"soundclip"!==t.currentSettings.type),r.xp6(1),r.Q6J("ngForOf",t.variables),r.xp6(1),r.ekj("is-hidden",!t.showDialogueOptions),r.xp6(1),r.ekj("is-hidden","dialogue"!==t.currentSettings.type),r.xp6(6),r.Q6J("ngForOf",t.variables),r.xp6(1),r.ekj("is-hidden",""!==t.currentSettings.name),r.xp6(6),r.ekj("is-hidden","dialogue"!==t.currentSettings.type||""===t.currentSettings.name),r.xp6(3),r.ekj("is-info","left"===t.currentSettings.position),r.xp6(6),r.ekj("is-info","right"===t.currentSettings.position),r.xp6(6),r.ekj("is-info",t.currentSettings.isHidden),r.xp6(6),r.ekj("is-info",t.currentSettings.isUnnamed),r.xp6(5),r.ekj("is-hidden","dialogue"===t.currentSettings.type&&""===t.currentSettings.name),r.xp6(1),r.Q6J("placeholder",t.textPlaceholder)("ngModel",t.currentSettings.inputText),r.xp6(1),r.ekj("is-hidden","dialogue"===t.currentSettings.type&&""===t.currentSettings.name),r.xp6(5),r.ekj("is-active",t.charManagerSettings.visible),r.xp6(9),r.Q6J("ngForOf",t.variables),r.xp6(1),r.ekj("is-hidden",!t.isValidCharacter()||t.charManagerSettings.targetCharIndex>=0),r.xp6(4),r.Q6J("src",t.getTargetAvatar(),r.LSH),r.xp6(2),r.hij(" ",t.charManagerSettings.targetCharName," "),r.xp6(5),r.Q6J("selected","SJ"===t.charManagerSettings.targetCollection),r.xp6(2),r.Q6J("selected","OCM"===t.charManagerSettings.targetCollection),r.xp6(2),r.Q6J("selected","DUSK"===t.charManagerSettings.targetCollection),r.xp6(3),r.Q6J("placeholder",t.tokenIdPlaceHolder)("ngModel",t.charManagerSettings.tokenId),r.xp6(1),r.ekj("is-hidden",!t.isValidAvatar(t.charManagerSettings.targetCollection+"#"+t.charManagerSettings.tokenId)),r.xp6(3),r.Q6J("ngModel",t.charManagerSettings.name),r.xp6(1),r.ekj("is-hidden",!t.isValidCharacterName()),r.xp6(2),r.Q6J("disabled",!t.isValidCharacter()),r.xp6(2),r.Oqu(t.charManagerSettings.targetCharIndex<0?"Add":"Update"))},directives:[GE,L,jI,nk,yk,Sk,Ek,YE],styles:[".command-container[_ngcontent-%COMP%]{font-family:Inconsolata;letter-spacing:1px;width:100%;max-width:100%;margin:0 25px 25px 0;display:inline-block;vertical-align:top}.card[_ngcontent-%COMP%]{box-shadow:none}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:3px solid transparent;padding:5px}.card[_ngcontent-%COMP%]   img.selected[_ngcontent-%COMP%]{border:3px solid #06f}.card[_ngcontent-%COMP%]   .audio-icon[_ngcontent-%COMP%]{margin-top:10px;padding:3px;border:2px solid transparent}.card[_ngcontent-%COMP%]   .audio-icon[_ngcontent-%COMP%]:hover{border:6f solid}.card[_ngcontent-%COMP%]:hover{cursor:pointer}.card[_ngcontent-%COMP%]:hover   .audio-icon[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{border:3px solid #06f}.event-tool[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:Inconsolata;font-size:12px;letter-spacing:1px}.events-list[_ngcontent-%COMP%]{border:1px solid #ccc;min-height:30px;background:#fff;overflow:hidden;display:block}.events-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .event-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.event-box[_ngcontent-%COMP%]{padding:8px;border-bottom:1px solid #ccc;color:rgba(0,0,0,.87);display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;box-sizing:border-box;background:#fff;font-size:12px}.event-box[_ngcontent-%COMP%]   .event-tool[_ngcontent-%COMP%]{font-family:Inconsolata;width:100%;margin-top:10px;padding-top:10px;padding-bottom:5px;border-top:1px dashed gray;display:none}.event-box[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:none;cursor:pointer}.event-box[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{color:gray;display:block}.event-box[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]:hover{color:red}.event-box.highlighted[_ngcontent-%COMP%]{-webkit-animation:highlighter 3s 1;animation:highlighter 3s 1}.event-box[_ngcontent-%COMP%]:last-child{border:none}.drag-handle[_ngcontent-%COMP%]{cursor:move}.cdk-drag-preview[_ngcontent-%COMP%]{font-family:Inconsolata;letter-spacing:1px;background-color:#ccc;box-sizing:border-box;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}@-webkit-keyframes highlighter{0%{background-color:#ff0}to{background-color:#fff}}@keyframes highlighter{0%{background-color:#ff0}to{background-color:#fff}}"]}),e})();const kC=["contentTextArea"];function EC(e,t){if(1&e&&(r.TgZ(0,"span",70),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.xp6(1),r.Oqu(e)}}function CC(e,t){if(1&e&&(r.TgZ(0,"a",72),r._UZ(1,"img",73),r.qZA()),2&e){const e=r.oxw().$implicit,t=r.oxw();r.Q6J("href",t.getAvatarLink(e),r.LSH),r.xp6(1),r.Q6J("src",t.getAvatar(e),r.LSH)}}function xC(e,t){if(1&e&&(r.ynx(0),r.YNc(1,CC,2,2,"a",71),r.BQk()),2&e){const e=t.index;r.xp6(1),r.Q6J("ngIf",e<3)}}function AC(e,t){1&e&&r._UZ(0,"a",75)}function DC(e,t){1&e&&r._UZ(0,"a",75)}function PC(e,t){if(1&e&&(r.ynx(0),r.YNc(1,AC,1,0,"a",74),r.YNc(2,DC,1,0,"a",74),r.BQk()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",e.story.casts.length<3),r.xp6(1),r.Q6J("ngIf",e.story.casts.length<2)}}function RC(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",76),r.NdJ("click",function(){return r.CHM(e),r.oxw().showPublishModal=!0}),r._uU(1," Send for Review "),r.qZA()}}function NC(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",76),r.NdJ("click",function(){return r.CHM(e),r.oxw().publish()}),r._uU(1," Publish "),r.qZA()}}function OC(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",77),r.NdJ("click",function(){return r.CHM(e),r.oxw().delete()}),r._uU(1,"Delete"),r.qZA()}}function LC(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",41),r.NdJ("click",function(){return r.CHM(e),r.oxw().export()}),r._uU(1,"Export"),r.qZA()}}const MC=function(e){return["/storyboard",e]};let ZC=(()=>{class e{constructor(e,t,n){this.clipboard=e,this.storyboardService=t,this.accountService=n,this.playStory=new r.vpe,this.mailBody="",this.isProcessing=!1,this.showNotification=!1,this.notificationType="is-info",this.notificationMessage="",this.fsEditor=!1,this.resetFsEditor=!1,this.user=new uI,this.showPublishModal=!1,this._story=new DI,this._storyUnsaved="",this.accountService.user$.subscribe(e=>{this.user=e}),this._story.content="[img_cover]: <https://wallpapercave.com/wp/wp1809288.jpg>\n",this._story.content+="`bg`: [img_cover]\n\n",this._story.content+="# My First Junkyard Story (Episode 1)\n\n",this._story.title="",this._story.author=""}set story(e){null!==e&&(this._story=new DI,this._story.id=e.id,this._story.authorId=e.authorId,this._story.author=e.author,this._story.title=e.title,this._story.subtitle=e.subtitle,this._story.seriesId=e.seriesId,this._story.seriesName=e.seriesName,this._story.cover=e.cover,this._story.casts=e.casts,this._story.tags=e.tags,this._story.content=e.content,this._story.state=e.state,this._story.likes=e.likes,this._story.views=e.views,this._story.modifiedOn=e.modifiedOn,this._story.createdOn=e.createdOn,this.backupStory(this._story))}get story(){return this._story}get editable(){return"draft"===this.story.state||("reviewing"===this.story.state||"published"===this.story.state)&&this.user.role>2}get deletable(){return"draft"===this.story.state&&""!==this.story.id||("reviewing"===this.story.state||"published"===this.story.state)&&this.user.role>2}get reviewable(){return!this.isDirty()&&"draft"===this.story.state&&this.user.role>1}get publishable(){return!this.isDirty()&&"reviewing"===this.story.state&&this.user.role>2}save(){if(""===this.story.title){let e=prompt("Please enter a title","A Junkyard Story");if(!e)return;this.story.title=e}this.storyboardService.saveStory(this.story,this.user),this.notify(`${this.story.title} successfully saved`,"is-success"),this.backupStory(this.story)}notify(e,t="is-info"){this.notificationMessage=e,this.notificationType=t,this.showNotification=!0,setTimeout(()=>{this.showNotification=!1},3e3)}publish(){this.user.role<3||!this.publishable||window.confirm("Are you sure you want to publish this story?")&&(this.storyboardService.publishStory(this.story.id),this.notify(`${this.story.title} is now published.`,"is-success"))}submitForReview(){this.isProcessing=!0;let e=JSON.parse(JSON.stringify(this.story));e.content="",e.authorId=this.accountService.activeAccount,e.state="reviewing",e.id=PI.i.create().toString(),this.storyboardService.submitForReview(e,this.story.content).then(()=>{this.notify(`${this.story.title} successfully submitted for review and publishing.`,"is-success"),this.isProcessing=!1,this.storyboardService.getStoriesFromStorage()}).catch(e=>{console.log("Error",e),this.notify(`An error occured while trying to submit ${this.story.title} for reivew. Please try again.`,"is-danger"),this.isProcessing=!1})}play(){}cancel(e=!1){!e&&this.isDirty()&&window.confirm("You have unsaved changes. Discard changes and start a new story?")&&window.location.reload(),window.location.reload()}delete(){var e=this;return(0,Ut.Z)(function*(){window.confirm("Do you really want to delete this story?")&&(e.isProcessing=!0,e.story.id.includes(":")?e.storyboardService.deleteStoryDraft(e.story):e.user.role>2&&(yield e.storyboardService.deleteStoryFromStorage(e.story)),e.isProcessing=!1,e.story=new DI,e.cancel(!0))})()}getCasts(){return this.story.casts.join(" ")}onUpdateCasts(e){this.story.casts=e.target.value.split(" ")}getTags(){return this.story.tags.join(" ")}onUpdateTags(e){this.story.tags=e.target.value.split(" ")}export(){let e=JSON.parse(JSON.stringify(this.story));this.clipboard.copy(JSON.stringify(e)),this.notify(`${this.story.title} successfully exported to clipboard`,"is-info")}import(){var e;let t=null!==(e=prompt("Enter data",""))&&void 0!==e?e:"";if(""!==t)try{let e=JSON.parse(t);this.story.id="",this.story.title=e.title,this.story.subtitle=e.subtitle,this.story.authorId=e.authorId,this.story.author=e.author,this.story.seriesId=e.seriesId,this.story.seriesName=e.seriesName,this.story.cover=e.cover,this.story.casts=e.casts,this.story.tags=e.tags,this.story.content=e.content,this.story.likes=0,this.story.views=0,this.story.state="draft",this.notify(`${this.story.title} successfully imported.`,"is-success")}catch(n){this.notify("Importing failed. Please ensure data format is correct.","is-danger")}}exportable(){return""!==this.story.id&&this.story.casts!==[]&&this.story.tags!==[]&&""!==this.story.cover}isDirty(){return JSON.stringify(this.story)!==this._storyUnsaved}isValid(){return""!==this.story.title&&""!==this.story.author&&""!==this.story.content}getAvatar(e){return e?this.storyboardService.getAvatar(e):""}getAvatarLink(e){return e?this.storyboardService.getAvatarLink(e):""}backupStory(e){this._storyUnsaved=JSON.stringify(e)}openFullEditor(){this.fsEditor=!0,this.resetFsEditor=!this.resetFsEditor,document.getElementsByClassName("html")[0].classList.add("no-scroll")}closeFullEditor(){this.fsEditor=!1,document.getElementsByClassName("html")[0].classList.remove("no-scroll")}dataUpdated(e){this.story.content=e}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(NI),r.Y36(cI),r.Y36(lI))},e.\u0275cmp=r.Xpm({type:e,selectors:[["story-editor-widget"]],viewQuery:function(e,t){if(1&e&&r.Gf(kC,5),2&e){let e;r.iGM(e=r.CRH())&&(t.contentTextArea=e.first)}},inputs:{story:"story"},outputs:{playStory:"playStory"},decls:131,vars:76,consts:[[1,"modal"],[1,"modal-background",3,"click"],[1,"modal-card",2,"max-width","25vw","min-width","350px"],[1,"modal-card-head"],[1,"modal-card-title"],["aria-label","close",1,"delete",3,"click"],[1,"modal-card-body"],[1,"card"],["target","_blank",3,"routerLink"],[1,"card-image"],[1,"image","is-3by2"],[3,"src"],[1,"card-content"],[1,"media"],[1,"media-content"],[1,"title","is-6","mb-1",3,"title"],[1,"heading",3,"title"],[1,"subtitle","is-6"],[1,"tag","is-info","is-normal"],[1,""],[1,"tags","are-medium"],["class","tag is-normal",4,"ngFor","ngForOf"],[1,"card-footer"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"message","is-warning",2,"font-family","BlinkMacSystemFont, Roboto","font-size","11px","letter-spacing","1px"],[1,"message-body"],[1,"modal-card-foot"],["type","submit",1,"button","is-success",3,"disabled","click"],[1,"modal-background"],[1,"modal-content"],[1,"notification","is-info","is-dark"],["max","100",1,"progress","is-success","mt-3"],[1,"field","is-grouped","main-controls","is-flex",2,"font-family","Bangers"],[1,"control"],["target","_blank",1,"button","is-small","is-success","pl-4",3,"routerLink"],["type","submit","class","button is-info is-small ml-3",3,"click",4,"ngIf"],["type","submit",1,"button","is-info","is-small","ml-3",3,"disabled","click"],[1,"control",2,"margin-left","auto"],["type","submit","class","button  is-small is-danger",3,"click",4,"ngIf"],["class","button is-link is-small is-light",3,"click",4,"ngIf"],[1,"button","is-link","is-small","is-light",3,"click"],[1,"box"],[1,"field-body"],[1,"field"],[1,"label"],["required","","type","text","placeholder","An awesome title for your story or series",1,"input",3,"ngModel","ngModelChange"],["required","","type","text","placeholder","Your writer name",1,"input",3,"ngModel","ngModelChange"],[1,"field-body","mt-2"],["required","","type","text","placeholder","A subtitle or an episode title",1,"input",3,"ngModel","ngModelChange"],["required","","type","text","placeholder","Image must be 3 x 2 in in size",1,"input",3,"ngModel","ngModelChange"],["required","","type","text","placeholder","e.g. 5123 2213 12 424 2314",1,"input",3,"value","keyup"],["required","","type","text","placeholder","e.g. comedy action mystery",1,"input",3,"value","keyup"],[1,"title","has-text-info"],[1,"full-editor"],[1,"level","pt-4"],[1,"level-left"],[1,"level-item"],[1,"subtitle","is-5"],[1,"level-right"],["title","Play your story","target","_blank",1,"button","is-success","is-small",3,"routerLink"],["title","Save your changes",1,"button","is-info","is-small",3,"click"],["title","Minimize screenplay editor",1,"button","is-light","is-small",3,"click"],["title","Use full screenplay editor",1,"button","is-link","is-light","is-small",3,"click"],[1,"columns"],[1,"column","main-editor"],["required","","placeholder","Now the hard part... write a cool story!","rows","14",1,"textarea",2,"font-size","14px","font-family","Inconsolata",3,"ngModel","ngModelChange"],["contentTextArea",""],[1,"column","event-viewer"],[3,"reset","rawScreenplay","dataUpdated"],[1,"tag","is-normal"],["target","_blank","class","card-footer-item",3,"href",4,"ngIf"],["target","_blank",1,"card-footer-item",3,"href"],[2,"border-radius","50%",3,"src"],["href","#","class","card-footer-item",4,"ngIf"],["href","#",1,"card-footer-item"],["type","submit",1,"button","is-info","is-small","ml-3",3,"click"],["type","submit",1,"button","is-small","is-danger",3,"click"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.NdJ("click",function(){return t.showPublishModal=!1}),r.qZA(),r.TgZ(2,"div",2),r.TgZ(3,"header",3),r.TgZ(4,"p",4),r._uU(5,"Send for Review"),r.qZA(),r.TgZ(6,"button",5),r.NdJ("click",function(){return t.showPublishModal=!1}),r.qZA(),r.qZA(),r.TgZ(7,"section",6),r.TgZ(8,"div",7),r.TgZ(9,"a",8),r.TgZ(10,"div",9),r.TgZ(11,"figure",10),r._UZ(12,"img",11),r.qZA(),r.qZA(),r.qZA(),r.TgZ(13,"div",12),r.TgZ(14,"div",13),r.TgZ(15,"div",14),r.TgZ(16,"p",15),r._uU(17),r.qZA(),r.TgZ(18,"span",16),r._uU(19),r.qZA(),r.TgZ(20,"p",17),r._uU(21,"by "),r.TgZ(22,"span",18),r._uU(23),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(24,"div",19),r.TgZ(25,"div",20),r.YNc(26,EC,2,1,"span",21),r.qZA(),r.qZA(),r.qZA(),r.TgZ(27,"footer",22),r.YNc(28,xC,2,1,"ng-container",23),r.YNc(29,PC,3,2,"ng-container",24),r.qZA(),r.qZA(),r.TgZ(30,"article",25),r.TgZ(31,"div",26),r._uU(32," Please allow at least 24 hours while we review your submission. "),r.qZA(),r.qZA(),r.qZA(),r.TgZ(33,"footer",27),r.TgZ(34,"button",28),r.NdJ("click",function(){return t.submitForReview()}),r._uU(35," Submit "),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(36,"div",0),r._UZ(37,"div",29),r.TgZ(38,"div",30),r.TgZ(39,"div",31),r._uU(40," Please wait while we process your request. "),r.TgZ(41,"progress",32),r._uU(42,"45%"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(43,"div"),r._uU(44),r.qZA(),r.TgZ(45,"div",33),r.TgZ(46,"div",34),r.TgZ(47,"a",35),r._uU(48," \u25ba "),r.qZA(),r.YNc(49,RC,2,0,"button",36),r.TgZ(50,"button",37),r.NdJ("click",function(){return t.save()}),r._uU(51),r.qZA(),r.YNc(52,NC,2,0,"button",36),r.qZA(),r.TgZ(53,"div",38),r.YNc(54,OC,2,0,"button",39),r.qZA(),r.TgZ(55,"div",34),r.YNc(56,LC,2,0,"button",40),r.qZA(),r.TgZ(57,"div",34),r.TgZ(58,"button",41),r.NdJ("click",function(){return t.import()}),r._uU(59,"Import"),r.qZA(),r.qZA(),r.TgZ(60,"div",34),r.TgZ(61,"button",41),r.NdJ("click",function(){return t.cancel()}),r._uU(62,"New"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(63,"div",42),r.TgZ(64,"div",43),r.TgZ(65,"div",44),r.TgZ(66,"label",45),r._uU(67,"Title*"),r.qZA(),r.TgZ(68,"div",34),r.TgZ(69,"input",46),r.NdJ("ngModelChange",function(e){return t.story.title=e}),r.qZA(),r.qZA(),r.qZA(),r.TgZ(70,"div",44),r.TgZ(71,"label",45),r._uU(72,"Author*"),r.qZA(),r.TgZ(73,"div",34),r.TgZ(74,"input",47),r.NdJ("ngModelChange",function(e){return t.story.author=e}),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(75,"div",48),r.TgZ(76,"div",44),r.TgZ(77,"label",45),r._uU(78,"Subtitle"),r.qZA(),r.TgZ(79,"div",34),r.TgZ(80,"input",49),r.NdJ("ngModelChange",function(e){return t.story.subtitle=e}),r.qZA(),r.qZA(),r.qZA(),r.TgZ(81,"div",44),r.TgZ(82,"label",45),r._uU(83,"Cover URL"),r.qZA(),r.TgZ(84,"div",34),r.TgZ(85,"input",50),r.NdJ("ngModelChange",function(e){return t.story.cover=e}),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(86,"div",48),r.TgZ(87,"div",44),r.TgZ(88,"label",45),r._uU(89,"Casts"),r.qZA(),r.TgZ(90,"div",34),r.TgZ(91,"input",51),r.NdJ("keyup",function(e){return t.onUpdateCasts(e)}),r.qZA(),r.qZA(),r.qZA(),r.TgZ(92,"div",44),r.TgZ(93,"label",45),r._uU(94,"Tags"),r.qZA(),r.TgZ(95,"div",34),r.TgZ(96,"input",52),r.NdJ("keyup",function(e){return t.onUpdateTags(e)}),r.qZA(),r.qZA(),r.qZA(),r.TgZ(97,"div",44),r.TgZ(98,"label",45),r._uU(99,"Status"),r.qZA(),r.TgZ(100,"div",34),r.TgZ(101,"label",53),r._uU(102),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(103,"div",54),r.TgZ(104,"nav",55),r.TgZ(105,"div",56),r.TgZ(106,"div",57),r.TgZ(107,"p",58),r.TgZ(108,"span"),r._uU(109,"Screenplay"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(110,"div",59),r.TgZ(111,"p",57),r.TgZ(112,"a",60),r._uU(113,"Play \u25ba"),r.qZA(),r.qZA(),r.TgZ(114,"p",57),r.TgZ(115,"a",61),r.NdJ("click",function(){return t.save()}),r._uU(116),r.qZA(),r.qZA(),r.TgZ(117,"p",57),r.TgZ(118,"a",62),r.NdJ("click",function(){return t.closeFullEditor()}),r._uU(119,"Back"),r.qZA(),r.qZA(),r.TgZ(120,"p",57),r.TgZ(121,"a",63),r.NdJ("click",function(){return t.openFullEditor()}),r._uU(122,"Open Full Editor"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(123,"div",64),r.TgZ(124,"div",65),r.TgZ(125,"div",44),r.TgZ(126,"div",34),r.TgZ(127,"textarea",66,67),r.NdJ("ngModelChange",function(e){return t.story.content=e}),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(129,"div",68),r.TgZ(130,"screenplay-editor-widget",69),r.NdJ("dataUpdated",function(e){return t.dataUpdated(e)}),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.ekj("is-active",t.showPublishModal),r.xp6(9),r.Q6J("routerLink",r.VKq(70,MC,t.story.id)),r.xp6(3),r.Q6J("src",t.story.cover,r.LSH),r.xp6(4),r.Q6J("title",t.story.title),r.xp6(1),r.Oqu(t.story.title),r.xp6(1),r.Q6J("title",t.story.subtitle),r.xp6(1),r.Oqu(t.story.subtitle),r.xp6(4),r.Oqu(t.story.author),r.xp6(3),r.Q6J("ngForOf",t.story.tags),r.xp6(2),r.Q6J("ngForOf",t.story.casts),r.xp6(1),r.Q6J("ngIf",t.story.casts.length>0),r.xp6(5),r.Q6J("disabled",t.isProcessing),r.xp6(2),r.ekj("is-active",t.isProcessing),r.xp6(7),r.Gre("notification ",t.notificationType," is-dark"),r.ekj("hidden",!t.showNotification),r.xp6(1),r.hij(" ",t.notificationMessage,"\n"),r.xp6(3),r.ekj("hidden",t.isDirty()),r.Q6J("routerLink",r.VKq(72,MC,t.story.id)),r.xp6(2),r.Q6J("ngIf",t.reviewable),r.xp6(1),r.ekj("hidden",!t.isDirty()),r.Q6J("disabled",!t.isValid()),r.xp6(1),r.hij(" ",t.story.id?"Update":"Save"," "),r.xp6(1),r.Q6J("ngIf",t.publishable),r.xp6(2),r.Q6J("ngIf",t.deletable),r.xp6(2),r.Q6J("ngIf",t.exportable()),r.xp6(13),r.ekj("is-success",t.story.title),r.Q6J("ngModel",t.story.title),r.xp6(5),r.ekj("is-success",t.story.author),r.Q6J("ngModel",t.story.author),r.xp6(6),r.ekj("is-success",t.story.subtitle),r.Q6J("ngModel",t.story.subtitle),r.xp6(5),r.ekj("is-success",t.story.cover),r.Q6J("ngModel",t.story.cover),r.xp6(6),r.ekj("is-success",t.story.casts.length>0),r.Q6J("value",t.getCasts()),r.xp6(5),r.ekj("is-success",t.story.tags.length>0),r.Q6J("value",t.getTags()),r.xp6(6),r.Oqu(t.story.state),r.xp6(1),r.ekj("is-full",t.fsEditor),r.xp6(9),r.ekj("is-hidden",!t.fsEditor||t.isDirty()),r.Q6J("routerLink",r.VKq(74,MC,t.story.id)),r.xp6(3),r.ekj("is-hidden",!t.fsEditor||!t.isDirty()),r.xp6(1),r.Oqu(t.story.id?"Update":"Save"),r.xp6(2),r.ekj("is-hidden",!t.fsEditor),r.xp6(3),r.ekj("is-hidden",t.fsEditor),r.xp6(6),r.ekj("is-success",t.story.content),r.Q6J("ngModel",t.story.content),r.xp6(2),r.ekj("is-hidden",!t.fsEditor),r.xp6(1),r.Q6J("reset",t.resetFsEditor)("rawScreenplay",t.story.content))},directives:[mT,L,Z,jI,xk,nk,yk,IC],styles:["button{font-family:Bangers;letter-spacing:4px}input{font-size:16px;font-family:Inconsolata}.hidden{display:none}.screenplay-controls button{font-family:Verdana;letter-spacing:1px}.screenplay-controls{display:inline-block}.screenplay-controls .control{display:inline-block;margin-bottom:5px}a.hidden{display:none}.full-editor.is-full{padding-left:10px;overflow:hidden;z-index:30;background-color:#fff;position:fixed;top:0;left:0;height:100vh;width:100vw}.full-editor.is-full .column{padding:0;margin:0}.full-editor.is-full .column.main-editor{margin-left:10px}.full-editor.is-full .column.main-editor textarea{min-height:calc(100vh - 70px);max-height:calc(100vh - 70px)}.full-editor.is-full .column.event-viewer{margin-left:10px;margin-right:10px;overflow-y:scroll;overflow-x:hidden;height:calc(100vh - 70px);width:calc(100%-15px)}.html.no-scroll{overflow-y:hidden}"],encapsulation:2}),e})(),UC=(()=>{class e{constructor(e,t){this.storage=e,this.storyboardService=t,this.isProcessing=!1,this.hasError=!1,this.selectedStory$=new B_.xQ}storySelected(e){e.id.includes(":")?this.selectedStory$.next(e):(this.isProcessing=!0,this.hasError=!1,this.storage.ref(`stories/${e.id}.md`).getDownloadURL().pipe(bb(e=>(this.isProcessing=!1,this.hasError=!0,(0,UT._)(e)))).subscribe(t=>{this.storyboardService.getStoryContent(t).pipe(bb(e=>(this.isProcessing=!1,this.hasError=!0,(0,Le.of)(void 0)))).subscribe(t=>{e.content=null!=t?t:"",this.selectedStory$.next(e),this.isProcessing=!1})}))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(sI),r.Y36(cI))},e.\u0275cmp=r.Xpm({type:e,selectors:[["story-editor"]],decls:22,vars:5,consts:[[1,"modal"],[1,"modal-background"],[1,"modal-content"],[1,"notification","is-info","is-dark"],["max","100",1,"progress","is-success","mt-3"],[1,"container","m-5"],[1,"columns"],[1,"column"],[1,"title","is-4"],[1,"container"],[3,"storySelected"],[1,"column","is-two-thirds-tablet"],[3,"story"]],template:function(e,t){1&e&&(r._UZ(0,"navigation-widget"),r.TgZ(1,"div",0),r._UZ(2,"div",1),r.TgZ(3,"div",2),r.TgZ(4,"div",3),r._uU(5," Please wait while we retrieve your "),r.TgZ(6,"strong"),r._uU(7,"story"),r.qZA(),r._uU(8,". "),r.TgZ(9,"progress",4),r._uU(10,"45%"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(11,"div",5),r.TgZ(12,"div",6),r.TgZ(13,"div",7),r.TgZ(14,"h1",8),r._uU(15,"Story Builder"),r.qZA(),r.TgZ(16,"div",9),r.TgZ(17,"my-stories-listing-widget",10),r.NdJ("storySelected",function(e){return t.storySelected(e)}),r.qZA(),r.qZA(),r.qZA(),r.TgZ(18,"div",11),r.TgZ(19,"div",9),r._UZ(20,"story-editor-widget",12),r.ALo(21,"async"),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(1),r.ekj("is-active",t.isProcessing),r.xp6(19),r.Q6J("story",r.lcZ(21,3,t.selectedStory$)))},directives:[yI,AI,ZC],pipes:[H],encapsulation:2}),e})(),FC=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["not-found"]],decls:1,vars:0,template:function(e,t){1&e&&r._uU(0,"You're lost... go back...")},encapsulation:2}),e})();class qC{constructor(){this.id="",this.addresses=[]}}class VC{constructor(e=1/0){this.capacity=e,this.storage=[]}enqueue(e){if(this.size()===this.capacity)throw Error("Queue has reached max capacity, you cannot add more items");this.storage.push(e)}dequeue(){return this.storage.shift()}size(){return this.storage.length}}class jC{constructor(){this.hash=0,this.commandIndex=0,this.variables=new Map}}const BC=["bgmPlayer"],$C=["audioPlayer"];function HC(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",28),r.NdJ("click",function(){const t=r.CHM(e).$implicit;return r.oxw().navStory(t.index)}),r.qZA()}2&e&&r.ekj("done","done"===t.$implicit.state)}function zC(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Gre("text-effect ",e.txtEffectPos,""),r.xp6(1),r.Oqu(e.txtEffect)}}function GC(e,t){if(1&e&&(r.TgZ(0,"div",29),r._UZ(1,"img",5),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.s9C("src",e.imgSnippet,r.LSH)}}function KC(e,t){if(1&e&&(r.TgZ(0,"div",33),r.TgZ(1,"span",34),r._uU(2),r.qZA(),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.ekj("unknown","?????:"===e.lCharCache[0].name),r.xp6(1),r.hij(" ",e.lCharCache[0].name," ")}}function WC(e,t){if(1&e&&(r.TgZ(0,"div"),r.TgZ(1,"span",34),r._uU(2),r.qZA(),r.qZA()),2&e){const e=r.oxw(2);r.Gre("speech-bubble left bubble bubble-top-left ",e.lCharCache[0].dialogueType,""),r.xp6(2),r.hij(" ",e.lCharCache[0].dialogue," ")}}function JC(e,t){if(1&e&&r._UZ(0,"img",37),2&e){const e=t.$implicit,n=t.index,i=r.oxw(3);r.ekj("speaking",i.lCharCache[0].dialogue)("main",0===n),r.Q6J("src",e.imageUrl,r.LSH)}}function YC(e,t){if(1&e&&(r.TgZ(0,"div",35),r.YNc(1,JC,1,5,"img",36),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",e.lCharCache)}}function QC(e,t){if(1&e&&(r.TgZ(0,"div",30),r.YNc(1,KC,3,3,"div",31),r.YNc(2,WC,3,4,"div",24),r.YNc(3,YC,2,1,"div",32),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",e.lCharCache[0].name),r.xp6(1),r.Q6J("ngIf",e.lCharCache[0].dialogue),r.xp6(1),r.Q6J("ngIf",e.lCharCache[0])}}function XC(e,t){if(1&e&&(r.TgZ(0,"div",40),r.TgZ(1,"span",34),r._uU(2),r.qZA(),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.ekj("unknown","?????:"===e.rCharCache[0].name),r.xp6(1),r.hij(" ",e.rCharCache[0].name," ")}}function ex(e,t){if(1&e&&(r.TgZ(0,"div"),r.TgZ(1,"span",34),r._uU(2),r.qZA(),r.qZA()),2&e){const e=r.oxw(2);r.Gre("speech-bubble right bubble bubble-bottom-right ",e.rCharCache[0].dialogueType,""),r.xp6(2),r.hij(" ",e.rCharCache[0].dialogue," ")}}function tx(e,t){if(1&e&&r._UZ(0,"img",37),2&e){const e=r.oxw(),t=e.index,n=e.count,i=r.oxw(3);r.ekj("speaking",i.rCharCache[0].dialogue)("main",t===n-1),r.Q6J("src",i.rCharCache[n-1-t].imageUrl,r.LSH)}}function nx(e,t){if(1&e&&(r.ynx(0),r.YNc(1,tx,1,5,"img",42),r.BQk()),2&e){const e=t.index;r.xp6(1),r.Q6J("ngIf",e<8)}}function rx(e,t){if(1&e&&(r.TgZ(0,"div",35),r.YNc(1,nx,2,1,"ng-container",41),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",e.rCharCache)}}function ix(e,t){if(1&e&&(r.TgZ(0,"div",38),r.YNc(1,XC,3,3,"div",39),r.YNc(2,ex,3,4,"div",24),r.YNc(3,rx,2,1,"div",32),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",e.rCharCache[0].name),r.xp6(1),r.Q6J("ngIf",e.rCharCache[0].dialogue),r.xp6(1),r.Q6J("ngIf",e.rCharCache)}}let sx=(()=>{class e{constructor(e,t){this.storyEventService=e,this.storyboardService=t,this.storyEnded=new r.vpe,this._rawStory="",this._junkies=[],this.storyboardEvents=new VC,this.hasStarted=!1,this.title="",this.subtitle="",this.showTitlePanel=!1,this.scenetitle="",this.showScenePanel=!1,this.closedcaption="",this.weatherEffect="",this.imgSnippet="",this.bgm="",this.audio="",this.txtEffect="",this.txtEffectPos="",this.narration="",this.leftName="",this.leftDialogue="",this.rightName="",this.rightDialogue="",this.customBackgroundStyle="",this.charCache=[],this.lCharCache=[],this.rCharCache=[],this.bgImage="",this.state=new jC,this.processing=!1,this.eventNav=[],this.processCounter=0,this.eventStop=-1}handleKeyboardEvent(e){this.processing||"Enter"!==e.key?!this.processing&&this.hasStarted&&this.processNextEvent():this.storyEnded.emit(0===this.storyboardEvents.size()&&this.hasStarted)}set rawStory(e){null!==e&&(this._rawStory=e,this.state.hash=function(e,t=0){let n=3735928559^t,r=1103547991^t;for(let i,s=0;s<e.length;s++)i=e.charCodeAt(s),n=Math.imul(n^i,2654435761),r=Math.imul(r^i,1597334677);return n=Math.imul(n^n>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),4294967296*(2097151&r)+(n>>>0)}(e),this.storyboardEvents=this.getEvents(e),this.reset(),this.processNextEvent())}get rawStory(){return this._rawStory}set junkies(e){null!==e&&(this._junkies=e)}get junkies(){return this._junkies}getEvents(e){let t=new VC,n=e.split(/[\r\n]+/),r=0;return this.eventNav=[],n.forEach(e=>{this.storyEventService.getStoryEventCommand(e).forEach(e=>{t.enqueue(e),this.eventNav.push({index:r,state:"undone"}),r++})}),t.enqueue(new eC(XE.Wait,1e3,{})),t}processNextEvent(){if(!this.processing){for(;this.storyboardEvents.size()>0;){this.hasStarted=!0,this.processing=!0;let e=this.storyboardEvents.dequeue();if(this.processCounter<this.eventNav.length&&(this.eventNav[this.processCounter].state="done"),this.processCounter+=1,e&&(this.processEvent(e),e.waitAfterInMs>0&&this.processCounter>=this.eventStop)){this.processing=!1;break}}0===this.storyboardEvents.size()&&this.hasStarted&&this.storyEnded.emit(!0)}}navStory(e){this.eventStop=e,this.processCounter=0,this.storyboardEvents=this.getEvents(this.rawStory),this.reset(),this.processNextEvent()}processEvent(e){switch(null==e?void 0:e.commandType){case XE.AddVariable:this.addVariable(e);break;case XE.BgImageShow:this.showBgImage(e);break;case XE.ImageSnippetShow:this.imageSnippetShow(e);break;case XE.ImageSnippetHide:this.imageSnippetHide();break;case XE.TextEffectShow:this.textEffectShow(e);break;case XE.TextEffectHide:this.textEffectHide();break;case XE.BgMusicPlay:this.bgMusicPlay(e);break;case XE.BgMusicStop:this.bgMusicStop(e);break;case XE.TitleShow:this.showTitle(e);break;case XE.TitleHide:this.hideTitle();break;case XE.ClosedCaptionShow:this.showClosedCaption(e);break;case XE.ClosedCaptionHide:this.hideClosedCaption();break;case XE.NewScene:this.newScene(e);break;case XE.SceneTitleHide:this.hideSceneTitle();break;case XE.NarratorSpeak:this.narratorSpeak(e);break;case XE.ClosedCaptionShow:this.showClosedCaption(e);break;case XE.CharAdd:this.characterAdd(e);break;case XE.CharRemove:this.characterRemove(e);break;case XE.CharSpeak:this.characterSpeak(e);break;case XE.WeatherEffectStart:this.changeWeather(e)}}addVariable(e){this.state.variables.set(e.settings.name,e.settings.value.trim())}showBgImage(e){let t=this.state.variables.get(e.settings.value);this.customBackgroundStyle=/^#([0-9A-F]{3}){1,2}$/i.test(e.settings.value)?`background-color: ${e.settings.value}`:void 0!==t?`background-image: url(${t})`:"background-color: #333333"}imageSnippetShow(e){this.clearDialogue();let t=this.state.variables.get(e.settings.value);this.imgSnippet=t}imageSnippetHide(){this.imgSnippet=""}textEffectShow(e){this.clearDialogue(),this.txtEffect=e.settings.value,this.txtEffectPos=e.settings.position}textEffectHide(){this.txtEffect=""}bgMusicPlay(e){let t=this.state.variables.get(e.settings.value);e.settings.loop?(this.bgm=t,this.bgmPlayer.nativeElement.load(),this.bgmPlayer.nativeElement.loop=!0,this.bgmPlayer.nativeElement.play()):(this.audio=t,this.audioPlayer.nativeElement.load(),this.audioPlayer.nativeElement.loop=!1,this.audioPlayer.nativeElement.play())}bgMusicStop(e){e.settings.loop?(this.bgm="",this.bgmPlayer.nativeElement.pause()):(this.audio="",this.audioPlayer.nativeElement.pause())}showTitle(e){this.title=e.settings.title,this.subtitle=e.settings.subtitle,this.showTitlePanel=!0}hideTitle(){this.showTitlePanel=!1}showClosedCaption(e){this.clearDialogue(),this.closedcaption=e.settings.cc}hideClosedCaption(){this.closedcaption=""}newScene(e){this.charCache=[],this.scenetitle=e.settings.title,this.showScenePanel=!0}hideSceneTitle(){this.scenetitle="",this.showScenePanel=!1}changeWeather(e){this.weatherEffect=e.settings.value}narratorSpeak(e){this.clearDialogue(),this.narration=e.settings.dialogue}clearDialogue(){this.charCache.forEach(e=>{e.dialogue=""})}characterAdd(e){let t=e.settings.id;if(void 0===this.state.variables.get(e.settings.id))return void alert(`You forgot to define: ${e.settings.id}`);let n=this.state.variables.get(e.settings.id),r=e.settings.anonLevel;this.charCache.find(e=>e.id===t)||(this.clearDialogue(),this.charCache.push(new cC({id:t,name:"",tokenId:n,nft:this.getNftType(e.settings.id),imageUrl:this.getCharacterImage(r,e.settings.id),position:e.settings.position,anonLevel:r,dialogue:e.settings.dialogue,dialogueType:e.settings.dialogueType})),this.updateStage())}getNftType(e){return e.includes("ocm#")?"ocm":(e.includes("sj#"),"sj")}getCharacterImage(e,t){if(e>2)return"assets/images/silhouette-20.png";let n=this.state.variables.get(t);return this.storyboardService.getAvatar(n)}characterRemove(e){if("[]"===e.settings.id.trim())this.charCache=[];else{let t=this.charCache.findIndex(t=>t.id===e.settings.id);this.charCache.splice(t,1)}this.updateStage()}characterSpeak(e){let t=e.settings.id,n=e.settings.anonLevel,r=this.charCache.findIndex(e=>e.id===t);if(this.clearDialogue(),r>=0){let t=this.charCache[r];t.name=e.settings.name,t.imageUrl=this.getCharacterImage(n,e.settings.id),t.dialogue=e.settings.dialogue,t.dialogueType=e.settings.dialogueType;let i=this.charCache.findIndex(t.position===oC.Left?e=>e.position===oC.Left:e=>e.position===oC.Right);[this.charCache[i],this.charCache[r]]=[this.charCache[r],this.charCache[i]],this.updateStage()}}updateStage(){this.lCharCache=this.charCache.filter(e=>e.position===oC.Left),this.rCharCache=this.charCache.filter(e=>e.position===oC.Right)}reset(){this.charCache=[],this.hideTitle(),this.hideSceneTitle(),this.textEffectHide(),this.imageSnippetHide(),this.updateStage(),this.hasStarted=!1,this.title="",this.subtitle="",this.showTitlePanel=!1,this.scenetitle="",this.showScenePanel=!1,this.closedcaption="",this.weatherEffect="",this.imgSnippet="",this.bgm="",this.audio="",this.txtEffect="",this.txtEffectPos="",this.narration="",this.leftName="",this.leftDialogue="",this.rightName="",this.rightDialogue="",this.customBackgroundStyle="",this.charCache=[],this.lCharCache=[],this.rCharCache=[],this.bgImage=""}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(yC),r.Y36(cI))},e.\u0275cmp=r.Xpm({type:e,selectors:[["storyboard-widget"]],viewQuery:function(e,t){if(1&e&&(r.Gf(BC,5),r.Gf($C,5)),2&e){let e;r.iGM(e=r.CRH())&&(t.bgmPlayer=e.first),r.iGM(e=r.CRH())&&(t.audioPlayer=e.first)}},hostBindings:function(e,t){1&e&&r.NdJ("keypress",function(e){return t.handleKeyboardEvent(e)},!1,r.evT)},inputs:{rawStory:"rawStory",junkies:"junkies"},outputs:{storyEnded:"storyEnded"},decls:46,vars:26,consts:[[1,"story-nav","is-flex","is-flex-direction-row"],["class","story-event-pointer",3,"done","click",4,"ngFor","ngForOf"],["id","storyboard-wrapper",3,"click"],["autoplay",""],["bgmPlayer",""],[3,"src"],["audioPlayer",""],[1,"hero","is-small","is-dark","slider","title-slider"],["titlePanel",""],[1,"hero-body","brand"],["src","assets/images/shonen_junk_logo.svg"],[1,"title"],[1,"subtitle"],[1,"instruction"],[1,"hero","slider","scene-slider"],["scenePanel",""],[1,"hero-body"],[1,"hero","slider","cc-slider"],[1,"modal","narration"],[1,"modal-background"],[1,"modal-content"],[1,"dialogue","narration"],[1,"stage"],["stagePanel",""],[3,"class",4,"ngIf"],["class","image-snippet",4,"ngIf"],["class","avatar left",4,"ngIf"],["class","avatar right",4,"ngIf"],[1,"story-event-pointer",3,"click"],[1,"image-snippet"],[1,"avatar","left"],["class","name speech-bubble left",4,"ngIf"],["class","characters",4,"ngIf"],[1,"name","speech-bubble","left"],[1,"dialogue"],[1,"characters"],["class","char",3,"speaking","main","src",4,"ngFor","ngForOf"],[1,"char",3,"src"],[1,"avatar","right"],["class","name speech-bubble right",4,"ngIf"],[1,"name","speech-bubble","right"],[4,"ngFor","ngForOf"],["class","char",3,"speaking","main","src",4,"ngIf"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.YNc(1,HC,1,2,"div",1),r.qZA(),r.TgZ(2,"div",2),r.NdJ("click",function(){return t.processNextEvent()}),r.TgZ(3,"audio",3,4),r._UZ(5,"source",5),r.qZA(),r.TgZ(6,"audio",3,6),r._UZ(8,"source",5),r.qZA(),r.TgZ(9,"div"),r.TgZ(10,"section",7,8),r.TgZ(12,"div",9),r.TgZ(13,"div"),r._UZ(14,"img",10),r.TgZ(15,"p"),r._uU(16,"JUNKYARD STORIES "),r.TgZ(17,"span"),r._uU(18,"presents"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(19,"p",11),r._uU(20),r.qZA(),r.TgZ(21,"p",12),r._uU(22),r.qZA(),r.TgZ(23,"p",13),r._uU(24,"[press space key or touch screen]"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(25,"section",14,15),r.TgZ(27,"div",16),r.TgZ(28,"p",12),r._uU(29),r.qZA(),r.qZA(),r.qZA(),r.TgZ(30,"section",17,15),r.TgZ(32,"div",16),r.TgZ(33,"p",12),r._uU(34),r.qZA(),r.qZA(),r.qZA(),r.TgZ(35,"div",18),r._UZ(36,"div",19),r.TgZ(37,"div",20),r.TgZ(38,"span",21),r._uU(39),r.qZA(),r.qZA(),r.qZA(),r.TgZ(40,"div",22,23),r.YNc(42,zC,2,4,"span",24),r.YNc(43,GC,2,1,"div",25),r.YNc(44,QC,4,3,"div",26),r.YNc(45,ix,4,3,"div",27),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(1),r.Q6J("ngForOf",t.eventNav),r.xp6(4),r.s9C("src",t.bgm,r.LSH),r.xp6(3),r.s9C("src",t.audio,r.LSH),r.xp6(1),r.Akn(t.customBackgroundStyle),r.Gre("background weather ",t.weatherEffect,""),r.xp6(1),r.ekj("hidden",!t.showTitlePanel),r.xp6(10),r.hij(" ",t.title," "),r.xp6(2),r.hij(" ",t.subtitle," "),r.xp6(3),r.ekj("hidden",!t.showScenePanel),r.xp6(4),r.hij(" ",t.scenetitle," "),r.xp6(1),r.ekj("hidden",!t.closedcaption),r.xp6(4),r.hij(" [",t.closedcaption,"] "),r.xp6(1),r.ekj("is-active",t.narration),r.xp6(4),r.Oqu(t.narration),r.xp6(3),r.Q6J("ngIf",t.txtEffect),r.xp6(1),r.Q6J("ngIf",t.imgSnippet),r.xp6(1),r.Q6J("ngIf",t.lCharCache[0]),r.xp6(1),r.Q6J("ngIf",t.rCharCache[0]))},directives:[L,Z],styles:['html{overflow:hidden}#storyboard-wrapper{height:100vh;background-color:#1e2029}#storyboard-wrapper .hidden{display:none}#storyboard-wrapper .instruction{padding:20px!important;color:#fff!important;font-size:2vh!important;font-family:Press Start\\ 2P,Courier,monospace!important}#storyboard-wrapper .background{display:flex;background-color:#1e2029;background-size:cover;height:100%;width:100%;align-items:center;-webkit-animation:fadeIn 4s;animation:fadeIn 4s}#storyboard-wrapper .background .bubble{position:relative;font-family:sans-serif;font-size:18px;line-height:24px;width:-webkit-max-content;width:-moz-max-content;width:max-content;max-width:65vw;background:#fff;border-radius:3vh;padding:4vh;text-align:center;color:#000}#storyboard-wrapper .background .bubble.whisper{opacity:.5}#storyboard-wrapper .background .bubble span{background-color:#fff!important;color:#000!important}#storyboard-wrapper .background .bubble.bubble-top-left:before{content:"";width:0;height:0;position:absolute;border-color:transparent transparent #fff #fff;border-style:solid;border-width:12px 24px 20px 12px;left:32px;top:-24px}#storyboard-wrapper .background .bubble.bubble-bottom-right:before{content:"";width:0;height:0;position:absolute;border-color:#fff #fff transparent transparent;border-style:solid;border-width:12px 24px 20px 12px;right:32px;bottom:-24px}#storyboard-wrapper .background .brand img{width:25vw}#storyboard-wrapper .background .brand p{font-family:Bangers;font-size:4vh;color:#ff0;margin-bottom:20px}#storyboard-wrapper .background .brand p span{color:#fff}#storyboard-wrapper .background .brand .subtitle,#storyboard-wrapper .background .brand .title{text-transform:uppercase;font-size:6vh;font-family:Lalezar}#storyboard-wrapper .background .brand .subtitle{font-size:3vh}#storyboard-wrapper .background .dialogue{font-size:3.5vh;line-height:5vh;padding:.6vw 1vw;color:#fff}#storyboard-wrapper .background .narration{z-index:7;margin:25vh 0;padding:3vw;font-size:3vh}#storyboard-wrapper .background .narration .modal-content{text-align:center;overflow:hidden;width:80vw}#storyboard-wrapper .background .narration.dialogue{padding:0;margin:0;font-size:3vh;line-height:9vh}#storyboard-wrapper .background .stage .image-snippet{width:100vw;text-align:center}#storyboard-wrapper .background .stage .image-snippet img{min-height:80vh;max-width:70vw;max-height:80vh}#storyboard-wrapper .background .stage .text-effect{z-index:8;font-family:Bangers;font-size:25vh;color:red;text-shadow:-3px 0 #000,0 3px #000,3px 0 #000,0 -3px #000;position:absolute;margin:0 auto}#storyboard-wrapper .background .stage .text-effect.pos-7{top:5vh;left:7vh}#storyboard-wrapper .background .stage .text-effect.pos-8{top:5vh;left:30vw}#storyboard-wrapper .background .stage .text-effect.pos-9{top:5vh;right:7vh}#storyboard-wrapper .background .stage .text-effect.pos-4{top:32vh;left:7vh}#storyboard-wrapper .background .stage .text-effect.pos-5{top:32vh;left:30vw}#storyboard-wrapper .background .stage .text-effect.pos-6{top:32vh;right:7vh}#storyboard-wrapper .background .stage .text-effect.pos-1{bottom:5vh;left:7vh}#storyboard-wrapper .background .stage .text-effect.pos-2{bottom:5vh;left:30vw}#storyboard-wrapper .background .stage .text-effect.pos-3{bottom:5vh;right:7vh}#storyboard-wrapper .background .stage .avatar{position:absolute}#storyboard-wrapper .background .stage .avatar.left{top:5vh;left:0}#storyboard-wrapper .background .stage .avatar.right{bottom:5vh;right:0}#storyboard-wrapper .background .stage .avatar .char{margin:5px;border-radius:50%;max-width:10vw;min-width:10vw}#storyboard-wrapper .background .stage .avatar .char.main{border:10px solid transparent;max-width:20vw;min-width:20vw}#storyboard-wrapper .background .stage .avatar .char.main.speaking{border:10px solid #ff0}#storyboard-wrapper .background .stage .avatar .speech-bubble{font-family:Overpass Mono,Courier,monospace;position:absolute;text-align:left}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue{background-color:#000}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.serious{font-family:Akronim,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.creepy{font-family:Creepster,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.angry{font-size:3vh;line-height:7vh;color:red;font-family:Gloria Hallelujah,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.scared{font-family:Rubik Puddles,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.whisper{font-family:Whisper,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.redacted{font-family:Redacted Script,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.monster{font-family:Eater,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble.right{bottom:40vh;right:15vw}#storyboard-wrapper .background .stage .avatar .speech-bubble.left{left:15vw;top:40vh}#storyboard-wrapper .background .stage .avatar .speech-bubble.name span{font-size:2vh}#storyboard-wrapper .background .stage .avatar .speech-bubble.name.left{left:.5vw;top:0;bottom:unset;text-align:center;width:20vw}#storyboard-wrapper .background .stage .avatar .speech-bubble.name.right{right:.5vw;top:unset;bottom:0;text-align:center;width:20vw}#storyboard-wrapper .background .stage .avatar .speech-bubble.name.left .dialogue{background:#0065ff}#storyboard-wrapper .background .stage .avatar .speech-bubble.name.right .dialogue{background:#f26522}#storyboard-wrapper .background .stage .avatar .speech-bubble.name.left .dialogue.unknown,#storyboard-wrapper .background .stage .avatar .speech-bubble.name.right .dialogue.unknown{background:#333}.story-nav{width:100%;height:.8vh;background-color:#000}.story-nav .story-event-pointer{height:100%;background-color:transparent;width:100%;cursor:pointer;background-color:#000}.story-nav .story-event-pointer:hover{background-color:red}.story-nav .story-event-pointer.done{background-color:#555}.slider,.story-nav .story-event-pointer.done:hover{background-color:#0065ff}.slider{width:100%;position:fixed}.title-slider{padding-top:4vh;padding-bottom:4vh;text-align:center;z-index:10;-webkit-animation:slideDown 4s 1;animation:slideDown 4s 1}.cc-slider{background-color:hsla(0,0%,4%,.86);font-family:Overpass Mono;z-index:9;text-align:left;position:fixed}.cc-slider .subtitle{color:#fff;font-size:2.5vh}.cc-slider .hero-body{text-align:center;padding:2vh 3vw}.scene-slider{background-color:#0065ff;z-index:9;position:relative;top:10vh;transform:translateX(100%);text-align:left;position:fixed;-webkit-animation:peek 3.5s 1;animation:peek 3.5s 1}.scene-slider .subtitle{color:#fff;font-size:3vh}.scene-slider .hero-body{padding:4vh 6vh}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@-webkit-keyframes slideDown{0%{transform:translateY(-300%)}to{transform:translateY(0)}}@keyframes slideDown{0%{transform:translateY(-300%)}to{transform:translateY(0)}}@-webkit-keyframes peek{0%{transform:translateX(100%)}40%{transform:translateX(20%)}80%{transform:translateX(20%)}to{transform:translateX(100%)}}@keyframes peek{0%{transform:translateX(100%)}40%{transform:translateX(20%)}80%{transform:translateX(20%)}to{transform:translateX(100%)}}@-webkit-keyframes typing{0%{width:0}to{width:100%}}@keyframes typing{0%{width:0}to{width:100%}}@-webkit-keyframes blink{0%,to{border-color:transparent}50%{border-color:orange}}@keyframes blink{0%,to{border-color:transparent}50%{border-color:orange}}'],encapsulation:2}),e})();const ox=function(){return["/"]};let ax=(()=>{class e{constructor(e,t,n,r,i,s){this.storage=e,this.accountService=t,this.meta=n,this.router=r,this.route=i,this.storyboardService=s,this.authorAddress="",this.showSupport=!1,this.showWarning=!1,this.hasLiked=!1,this.likes=new qC,this.isProcessing=!1,this.hasError=!1,this.storyId="",this.rawStory$=new B_.xQ,this.junkies$=new B_.xQ,this.isLocalData=!1,this.isViewed=!1,this.metaDataAdded=!1}ngAfterViewInit(){setTimeout(()=>{this.ngOnInit()})}ngOnInit(){this.storyboardService.getJunkies().subscribe(e=>{this.junkies$.next(JSON.parse(JSON.stringify(e)))}),this.route.params.subscribe(e=>{this.storyId=e.id,this.getMetaData(),this.loadStory(this.storyId),this.getLikes(this.storyId)})}getMetaData(){this.storyboardService.liveStories$.subscribe(e=>{var t;let n=e.find(e=>e.id.toLowerCase()===this.storyId.toLowerCase());n&&!this.metaDataAdded&&(this.metaDataAdded=!0,this.meta.addTags([{name:"twitter:card",content:"summary_large_image"},{name:"twitter:site",content:"shonenjunkmeta"},{name:"twitter:creator",content:n.author},{name:"og:url",content:`https://junkyard-stories.github.io/#/storyboard/${null==n?void 0:n.id}/`},{name:"og:title",content:n.title},{name:"og:card",content:"Create and share stories with your Shonen Junk and partner NFTs"},{name:"og:image",content:null!==(t=n.cover)&&void 0!==t?t:"https://i.shinji.xyz/static/shonen-junk/i/reveals/800x800/241f242c7abe9bb91fd71dd3f1590daddf5a2fc2de0453c9d13432e0e5c4e62a.png?v=20220327"}]))})}getLikes(e){var t=this;return(0,Ut.Z)(function*(){t.likes=yield t.storyboardService.getLikesByStoryId(e),t.accountService.activeAccount&&(t.hasLiked=t.likes.addresses.includes(t.accountService.activeAccount.toLowerCase()),t.authorAddress=t.accountService.activeAccount)})()}loadStory(e){if(this.isLocalData=e.includes(":"),this.isLocalData){let t=localStorage.getItem(`junkyardStories.local.${e}`)||"";this.rawStory$.next(null!=t?t:"")}else this.storage.ref(`stories/${e}.md`).getDownloadURL().pipe(bb(e=>(this.isProcessing=!1,(0,UT._)(e)))).subscribe(e=>{this.storyboardService.getStoryContent(e).pipe(bb(e=>(this.isProcessing=!1,(0,UT._)(e)))).subscribe(e=>{this.rawStory$.next(null!=e?e:""),this.isProcessing=!1})})}storyEnded(e=!1){let t=this.storyId.includes(":");if(e&&!t)return this.showSupport=!0,void(this.isViewed||(this.storyboardService.addStoryViewCount(this.storyId),this.isViewed=!0));this.isLocalData?window.close():this.router.navigateByUrl("/")}fireToggled(){var e=this;return(0,Ut.Z)(function*(){e.accountService.user.role<2?e.showWarning=!0:(e.hasLiked=!e.hasLiked,e.likes=yield e.storyboardService.updateStoryLikes(e.storyId,"0x5b6141E514A8AC05Ec637c48D0b312F52752C1cB",e.hasLiked))})()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(sI),r.Y36(lI),r.Y36(Ne),r.Y36(fT),r.Y36(zw),r.Y36(cI))},e.\u0275cmp=r.Xpm({type:e,selectors:[["storyboard"]],decls:34,vars:20,consts:[[1,"modal"],[1,"modal-background"],[1,"before"],[1,"after"],[1,"modal-content",2,"width","100%"],[1,"hero","is-info"],[1,"hero-body"],[1,"title","has-text-centered"],[1,"subtitle","has-text-centered"],[1,"level"],[1,"level-item","has-text-centered"],[1,"sj-fire","p-5",3,"click"],[1,"heading"],[1,"title"],[1,"fire","title","far","fa-fire"],[1,"mt-5"],[3,"routerLink"],[1,"modal","is-active"],[1,"modal-background",3,"click"],[1,"modal-content"],[1,"notification","is-info","is-dark","has-text-centered"],[1,"like","title","far","fa-fire","liked"],[3,"rawStory","junkies","storyEnded"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r._UZ(2,"div",2),r._UZ(3,"div",3),r.qZA(),r.TgZ(4,"div",4),r.TgZ(5,"section",5),r.TgZ(6,"div",6),r.TgZ(7,"p",7),r._uU(8," Thank you! "),r.qZA(),r.TgZ(9,"p",8),r._uU(10),r.qZA(),r.TgZ(11,"nav",9),r.TgZ(12,"div",10),r.TgZ(13,"div"),r.TgZ(14,"div",11),r.NdJ("click",function(){return t.fireToggled()}),r.TgZ(15,"p",12),r._uU(16,"Shonen Fire"),r.qZA(),r.TgZ(17,"p",13),r._uU(18),r.ALo(19,"number"),r._UZ(20,"i",14),r.qZA(),r.qZA(),r.TgZ(21,"p",15),r.TgZ(22,"a",16),r._uU(23,"back to junkyard"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(24,"div",17),r.TgZ(25,"div",18),r.NdJ("click",function(){return t.showWarning=!1}),r.qZA(),r.TgZ(26,"div",19),r.TgZ(27,"div",20),r._uU(28," Sorry, you don't qualify to send "),r.TgZ(29,"strong"),r._UZ(30,"i",21),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(31,"storyboard-widget",22),r.NdJ("storyEnded",function(e){return t.storyEnded(e)}),r.ALo(32,"async"),r.ALo(33,"async"),r.qZA()),2&e&&(r.ekj("is-active",t.showSupport),r.xp6(1),r.ekj("pyro",t.hasLiked),r.xp6(9),r.hij(" ",t.hasLiked?"We appreciate your support":"Please give this story some fire to show support"," "),r.xp6(4),r.ekj("liked",t.hasLiked),r.xp6(4),r.hij(" ",r.lcZ(19,13,t.likes.addresses.length)," "),r.xp6(4),r.Q6J("routerLink",r.DdM(19,ox)),r.xp6(2),r.ekj("is-active",t.showWarning),r.xp6(7),r.Q6J("rawStory",r.lcZ(32,15,t.rawStory$))("junkies",r.lcZ(33,17,t.junkies$)))},directives:[mT,sx],pipes:[z,H],styles:["html{overflow:hidden}.sj-fire{background-color:#3c3434;border-radius:5%;cursor:pointer}.sj-fire .fire{color:#fff}.sj-fire:hover .fire{color:#ff0}.sj-fire:hover.liked .fire{color:#fff}.sj-fire.liked .fire{color:#ff0}a:focus,a:hover{color:#ff0!important}.pyro>.after,.pyro>.before{position:absolute;width:5px;height:5px;border-radius:50%;box-shadow:-120px -218.66667px blue,248px -16.66667px #00ff84,190px 16.33333px #002bff,-113px -308.66667px #ff009d,-109px -287.66667px #ffb300,-50px -313.66667px #ff006e,226px -31.66667px #ff4000,180px -351.66667px #ff00d0,-12px -338.66667px #00f6ff,220px -388.66667px #9f0,-69px -27.66667px #ff0400,-111px -339.66667px #6200ff,155px -237.66667px #0df,-152px -380.66667px #00ffd0,-50px -37.66667px #0fd,-95px -175.66667px #a6ff00,-88px 10.33333px #0d00ff,112px -309.66667px #005eff,69px -415.66667px #ff00a6,168px -100.66667px #ff004c,-244px 24.33333px #f60,97px -325.66667px #f06,-211px -182.66667px #00ffa2,236px -126.66667px #b700ff,140px -196.66667px #9000ff,125px -175.66667px #0bf,118px -381.66667px #ff002f,144px -111.66667px #ffae00,36px -78.66667px #f600ff,-63px -196.66667px #c800ff,-218px -227.66667px #d4ff00,-134px -377.66667px #ea00ff,-36px -412.66667px #ff00d4,209px -106.66667px #00fff2,91px -278.66667px #000dff,-22px -191.66667px #9dff00,139px -392.66667px #a6ff00,56px -2.66667px #09f,-156px -276.66667px #ea00ff,-163px -233.66667px #00fffb,-238px -346.66667px #00ff73,62px -363.66667px #08f,244px -170.66667px #0062ff,224px -142.66667px #b300ff,141px -208.66667px #9000ff,211px -285.66667px #f60,181px -128.66667px #1e00ff,90px -123.66667px #c800ff,189px 70.33333px #00ffc8,-18px -383.66667px #0f3,100px -6.66667px #ff008c;-webkit-animation:bang 1s ease-out infinite backwards,gravity 1s ease-in infinite backwards,position 5s linear infinite backwards;animation:bang 1s ease-out infinite backwards,gravity 1s ease-in infinite backwards,position 5s linear infinite backwards}.pyro>.after{-webkit-animation-delay:1.25s,1.25s,1.25s;animation-delay:1.25s,1.25s,1.25s;-webkit-animation-duration:1.25s,1.25s,6.25s;animation-duration:1.25s,1.25s,6.25s}@-webkit-keyframes bang{0%{box-shadow:0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff}}@keyframes bang{0%{box-shadow:0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff}}@-webkit-keyframes gravity{to{transform:translateY(200px);-moz-transform:translateY(200px);-webkit-transform:translateY(200px);-o-transform:translateY(200px);-ms-transform:translateY(200px);opacity:0}}@keyframes gravity{to{transform:translateY(200px);-moz-transform:translateY(200px);-webkit-transform:translateY(200px);-o-transform:translateY(200px);-ms-transform:translateY(200px);opacity:0}}@-webkit-keyframes position{0%,19.9%{margin-top:10%;margin-left:40%}20%,39.9%{margin-top:40%;margin-left:30%}40%,59.9%{margin-top:20%;margin-left:70%}60%,79.9%{margin-top:30%;margin-left:20%}80%,99.9%{margin-top:30%;margin-left:80%}}@keyframes position{0%,19.9%{margin-top:10%;margin-left:40%}20%,39.9%{margin-top:40%;margin-left:30%}40%,59.9%{margin-top:20%;margin-left:70%}60%,79.9%{margin-top:30%;margin-left:20%}80%,99.9%{margin-top:30%;margin-left:80%}}"],encapsulation:2}),e})();function cx(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",39),r.NdJ("click",function(){r.CHM(e);const t=r.oxw().$implicit;return r.oxw().export(t.id)}),r._uU(1," EXPORT "),r.qZA()}}function ux(e,t){if(1&e&&(r.TgZ(0,"span",40),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.xp6(1),r.Oqu(e)}}function lx(e,t){if(1&e&&(r.TgZ(0,"a",42),r._UZ(1,"img",43),r.qZA()),2&e){const e=r.oxw().$implicit,t=r.oxw(2);r.Q6J("href",t.getAvatarLink(e),r.LSH),r.xp6(1),r.Q6J("src",t.getAvatar(e),r.LSH)}}function hx(e,t){if(1&e&&(r.ynx(0),r.YNc(1,lx,2,2,"a",41),r.BQk()),2&e){const e=t.index;r.xp6(1),r.Q6J("ngIf",e<3)}}function dx(e,t){1&e&&r._UZ(0,"a",45)}function px(e,t){1&e&&r._UZ(0,"a",45)}function fx(e,t){if(1&e&&(r.ynx(0),r.YNc(1,dx,1,0,"a",44),r.YNc(2,px,1,0,"a",44),r.BQk()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.Q6J("ngIf",e.casts.length<3),r.xp6(1),r.Q6J("ngIf",e.casts.length<2)}}const gx=function(e){return["/storyboard",e]};function mx(e,t){if(1&e&&(r.TgZ(0,"div",13),r.TgZ(1,"div",14),r.TgZ(2,"div",15),r.TgZ(3,"figure",16),r.TgZ(4,"a",17),r._UZ(5,"img",18),r.qZA(),r.YNc(6,cx,2,0,"button",19),r._UZ(7,"div",20),r.TgZ(8,"nav",21),r.TgZ(9,"div",22),r.TgZ(10,"div"),r.TgZ(11,"p",23),r._uU(12),r.ALo(13,"number"),r._UZ(14,"i",24),r.qZA(),r.qZA(),r.qZA(),r.TgZ(15,"div",22),r.TgZ(16,"div"),r.TgZ(17,"p",23),r._uU(18),r.ALo(19,"number"),r._UZ(20,"i",25),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(21,"div",26),r.TgZ(22,"div",27),r.TgZ(23,"a",17),r.TgZ(24,"div",28),r.TgZ(25,"p",29),r._uU(26),r.qZA(),r.TgZ(27,"span",30),r._uU(28),r.qZA(),r.TgZ(29,"p",31),r._uU(30,"by "),r.TgZ(31,"span",32),r._uU(32),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(33,"div",33),r.TgZ(34,"div",34),r.YNc(35,ux,2,1,"span",35),r.qZA(),r.qZA(),r.qZA(),r.TgZ(36,"footer",36),r.YNc(37,hx,2,1,"ng-container",37),r.YNc(38,fx,3,2,"ng-container",38),r.qZA(),r.qZA(),r.qZA()),2&e){const e=t.$implicit,n=r.oxw();r.xp6(4),r.Q6J("routerLink",r.VKq(18,gx,e.id)),r.xp6(1),r.Q6J("src",e.cover,r.LSH),r.xp6(1),r.Q6J("ngIf",n.isLoggedIn),r.xp6(6),r.hij("",r.lcZ(13,14,e.views)," "),r.xp6(6),r.hij("",r.lcZ(19,16,e.likes)," "),r.xp6(5),r.Q6J("routerLink",r.VKq(20,gx,e.id)),r.xp6(2),r.Q6J("title",e.title),r.xp6(1),r.Oqu(e.title),r.xp6(1),r.Q6J("title",e.subtitle),r.xp6(1),r.Oqu(e.subtitle),r.xp6(4),r.Oqu(e.author),r.xp6(3),r.Q6J("ngForOf",e.tags),r.xp6(2),r.Q6J("ngForOf",e.casts),r.xp6(1),r.Q6J("ngIf",e.casts.length>0)}}let yx=(()=>{class e{constructor(e,t,n,r,i){this.meta=e,this.storage=t,this.storyboardService=n,this.accountService=r,this.clipboard=i,this.publishedStories=[],this.filteredStories=[],this.isProcessing=!1,this.searchKeyword="",this.sortBy="hottest",this.meta.addTags([{name:"twitter:card",content:"summary_large_image"},{name:"twitter:site",content:"shonenjunkmeta"},{name:"twitter:creator",content:"@zmbby69"},{name:"og:url",content:"https://junkyard-stories.github.io"},{name:"og:title",content:"Junkyard Stories - Screenplay Gallery and Builder"},{name:"og:card",content:"Create and share stories with your Shonen Junk and partner NFTs"},{name:"og:image",content:"https://i.shinji.xyz/static/shonen-junk/i/reveals/800x800/241f242c7abe9bb91fd71dd3f1590daddf5a2fc2de0453c9d13432e0e5c4e62a.png?v=20220327"}])}get isLoggedIn(){return""!==this.accountService.activeAccount}ngOnInit(){this.storyboardService.liveStories$.subscribe(e=>{this.publishedStories=JSON.parse(JSON.stringify(e)).filter(e=>"published"===e.state),this.runSearch(this.searchKeyword,this.sortBy)}),this.storyboardService.getStoriesFromStorage()}search(e){var t;this.searchKeyword=null!==(t=e.target.value)&&void 0!==t?t:"",this.runSearch(this.searchKeyword,this.sortBy)}changeSort(e){this.sortBy=e,this.runSearch(this.searchKeyword,this.sortBy)}runSearch(e,t){this.filteredStories=this.publishedStories.filter(t=>t.title.toLowerCase().includes(e.toLowerCase())||t.subtitle.toLowerCase().includes(e.toLowerCase())||t.tags.includes(e.toLowerCase())||t.casts.includes(e.toLowerCase())).sort((e,n)=>this.sorter(e,n,t))}sorter(e,t,n){if("hottest"===n){if(e.likes<t.likes)return 1;if(e.likes>t.likes)return-1}else if("most-viewed"===n){if(e.views<t.views)return 1;if(e.views>t.views)return-1}return 0}getAvatar(e){return this.storyboardService.getAvatar(e)}getAvatarLink(e){return this.storyboardService.getAvatarLink(e)}export(e){this.isProcessing||(this.isProcessing=!0,this.storage.ref(`stories/${e}.md`).getDownloadURL().pipe(bb(e=>(this.isProcessing=!1,(0,UT._)(e)))).subscribe(t=>{this.storyboardService.getStoryContent(t).pipe(bb(e=>(this.isProcessing=!1,(0,UT._)(e)))).subscribe(t=>{var n;let r=null!==(n=this.publishedStories.find(t=>t.id===e))&&void 0!==n?n:new DI;r.content=t,this.clipboard.copy(JSON.stringify(r)),alert("Screenplay copied to clipboard."),this.isProcessing=!1})}))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(Ne),r.Y36(sI),r.Y36(cI),r.Y36(lI),r.Y36(NI))},e.\u0275cmp=r.Xpm({type:e,selectors:[["junkyard"]],decls:29,vars:11,consts:[[1,"level","mt-5","mb-0","mr-5","ml-5"],[1,"level-left"],[1,"level-item"],[1,"field","has-addons"],[1,"control"],["type","text","placeholder","Title / tags / cast",1,"input",3,"value","keyup"],[1,"button"],[1,"subtitle","is-5"],[1,"level-right"],[1,"button","is-dark",3,"click"],[1,"junkyard","p-5"],[1,"columns","is-multiline","is-tablet"],["class","column is-one-quarter-desktop is-one-third-tablet",4,"ngFor","ngForOf"],[1,"column","is-one-quarter-desktop","is-one-third-tablet"],[1,"card"],[1,"card-image"],[1,"image","is-3by2"],["target","_blank",3,"routerLink"],[3,"src"],["class","export button is-small is-info is-responsive",3,"click",4,"ngIf"],[1,"meta-data","meta-data-panel"],[1,"level","meta-data"],[1,"level-item","has-text-centered"],[1,"title","is-5"],[1,"far","fa-eye"],[1,"like","title","far","fa-fire","liked"],[1,"card-content"],[1,"media"],[1,"media-content"],[1,"title","is-6","mb-1",3,"title"],[1,"heading",3,"title"],[1,"subtitle","is-6"],[1,"tag","is-info","is-normal"],[1,""],[1,"tags","are-medium"],["class","tag is-normal",4,"ngFor","ngForOf"],[1,"card-footer"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"export","button","is-small","is-info","is-responsive",3,"click"],[1,"tag","is-normal"],["target","_blank","class","card-footer-item",3,"href",4,"ngIf"],["target","_blank",1,"card-footer-item",3,"href"],[1,"avatar",3,"src"],["href","#","class","card-footer-item",4,"ngIf"],["href","#",1,"card-footer-item"]],template:function(e,t){1&e&&(r._UZ(0,"navigation-widget"),r.TgZ(1,"nav",0),r.TgZ(2,"div",1),r.TgZ(3,"div",2),r.TgZ(4,"div",3),r.TgZ(5,"p",4),r.TgZ(6,"input",5),r.NdJ("keyup",function(e){return t.search(e)}),r.qZA(),r.qZA(),r.TgZ(7,"p",4),r.TgZ(8,"button",6),r._uU(9," Search "),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(10,"div",2),r.TgZ(11,"p",7),r.TgZ(12,"strong"),r._uU(13),r.ALo(14,"number"),r.qZA(),r._uU(15," storie(s) found "),r.qZA(),r.qZA(),r.qZA(),r.TgZ(16,"div",8),r.TgZ(17,"p",2),r.TgZ(18,"a",9),r.NdJ("click",function(){return t.changeSort("hottest")}),r._uU(19,"Hottest"),r.qZA(),r.qZA(),r.TgZ(20,"p",2),r.TgZ(21,"a",9),r.NdJ("click",function(){return t.changeSort("newest")}),r._uU(22,"Newest"),r.qZA(),r.qZA(),r.TgZ(23,"p",2),r.TgZ(24,"a",9),r.NdJ("click",function(){return t.changeSort("most-viewed")}),r._uU(25,"Most Viewed"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(26,"div",10),r.TgZ(27,"div",11),r.YNc(28,mx,39,22,"div",12),r.qZA(),r.qZA()),2&e&&(r.xp6(6),r.Q6J("value",t.searchKeyword),r.xp6(7),r.Oqu(r.lcZ(14,9,t.filteredStories.length)),r.xp6(5),r.ekj("is-info","hottest"===t.sortBy),r.xp6(3),r.ekj("is-info","newest"===t.sortBy),r.xp6(3),r.ekj("is-info","most-viewed"===t.sortBy),r.xp6(4),r.Q6J("ngForOf",t.filteredStories))},directives:[yI,L,mT,Z],pipes:[z],styles:["html{overflow:auto}.navbar{background-color:#333}.navbar a{color:#fff}.navbar .brand{font-family:Bangers}.navbar .brand img{height:30px}.navbar .brand h1{color:#ff0;margin-bottom:0}.media-content p,.media-content span{overflow:hidden;text-overflow:ellipsis}.meta-data{position:absolute;bottom:0;width:100%;height:20%}.export,.meta-data.meta-data-panel{background-color:hsla(0,0%,4%,.8)}.export{position:absolute;top:0;right:0}.level,.level .title{color:#fff}.level i{font-size:.8em}.level i.liked{color:#ff0}.junkyard .card{box-shadow:none}.junkyard .card-footer{background-color:#ff0}.junkyard .card-footer .card-footer-item{padding:0 .05em}.junkyard .card-footer .card-footer-item:not(:last-child){border-right:none}.junkyard .card-footer .card-footer-item .avatar{border-bottom-left-radius:50%;border-bottom-right-radius:50%;box-shadow:0 .5em 1em -.125em hsla(0,0%,4%,.1),0 0 0 1px hsla(0,0%,4%,.02)}"],encapsulation:2}),e})();const vx=[{path:"",component:yx},{path:"story-editor",component:UC},{path:"junkyard",component:yx},{path:"storyboard/:id",component:ax},{path:"story-editor",component:UC},{path:"not-found",component:FC},{path:"**",redirectTo:"not-found"}];let _x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[AT.forRoot(vx,{useHash:!0})],AT]}),e})(),bx=(()=>{class e{constructor(e){this.accountService=e,this.title="junkyard-stories"}ngOnInit(){var e=this;return(0,Ut.Z)(function*(){yield e.accountService.getSelectedAccount()})()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(lI))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&r._UZ(0,"router-outlet")},directives:[_T],styles:[""]}),e})(),wx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[yC],imports:[[G,AT,QE,Dk]]}),e})(),Sx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[],imports:[[G,wx,OI,AT]]}),e})();class Tx{constructor(e,t){this.notifier=e,this.source=t}call(e,t){return t.subscribe(new Ix(e,this.notifier,this.source))}}class Ix extends cb.Ds{constructor(e,t,n){super(e),this.notifier=t,this.source=n}error(e){if(!this.isStopped){let n=this.errors,r=this.retries,i=this.retriesSubscription;if(r)this.errors=void 0,this.retriesSubscription=void 0;else{n=new B_.xQ;try{const{notifier:e}=this;r=e(n)}catch(t){return super.error(t)}i=(0,cb.ft)(r,new cb.IY(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=i,n.next(e)}}_unsubscribe(){const{errors:e,retriesSubscription:t}=this;e&&(e.unsubscribe(),this.errors=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}notifyNext(){const{_unsubscribe:e}=this;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)}}var kx=n(3098);class Ex{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new Cx(e,this.delay,this.scheduler))}}class Cx extends Fe.L{constructor(e,t,n){super(e),this.delay=t,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,n=t.queue,r=e.scheduler,i=e.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const t=Math.max(0,n[0].time-r.now());this.schedule(e,t)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(Cx.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,n=new xx(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(kx.P.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(kx.P.createComplete()),this.unsubscribe()}}class xx{constructor(e,t){this.time=e,this.notification=t}}let Ax=(()=>{class e{constructor(){}intercept(e,t){return t.handle(e).pipe((n=e=>e.pipe(Ue((e,t)=>t<=5&&500==e.status?(0,Le.of)(e):(0,UT._)(e)),function(e,t=FT.P){var n;const r=(n=e)instanceof Date&&!isNaN(+n)?+e-t.now():Math.abs(e);return e=>e.lift(new Ex(r,t))}(1e3)),e=>e.lift(new Tx(n,e))));var n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function Dx(){return e=>e.lift(new Px)}class Px{call(e,t){return t.subscribe(new Rx(e))}}class Rx extends Fe.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}class Nx{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new Ox(e,this.compare,this.keySelector))}}class Ox extends Fe.L{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}function Lx(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new uc("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function Mx(){if("undefined"==typeof Uint8Array)throw new uc("unimplemented","Uint8Arrays are not available in this environment.")}function Zx(){if("undefined"==typeof atob)throw new uc("unimplemented","Blobs are unavailable in Firestore in this environment.")}n(4828);class Ux{constructor(e){this._delegate=e}static fromBase64String(e){return Zx(),new Ux(fv.fromBase64String(e))}static fromUint8Array(e){return Mx(),new Ux(fv.fromUint8Array(e))}toBase64(){return Zx(),this._delegate.toBase64()}toUint8Array(){return Mx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Fx(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class qx{enableIndexedDbPersistence(e,t){return function(e,t){dv(e=Gy(e,av));const n=uv(e),r=e._freezeSettings(),i=new vy;return hv(n,i,new my(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){dv(e=Gy(e,av));const t=uv(e),n=e._freezeSettings(),r=new vy;return hv(t,r,new yy(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new uc(cc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new lc;return e._queue.enqueueAndForgetEvenWhileRestricted((0,Ut.Z)(function*(){try{yield(n=(0,Ut.Z)(function*(e){if(!xd.vt())return Promise.resolve();const t=e+"main";yield xd.delete(t)}),function(e){return n.apply(this,arguments)})(of(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var n})),t.promise}(e._delegate)}}class Vx{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof $c||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||rc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function(e,t,n,r={}){var i;const s=(e=Gy(e,Jy))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&rc("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ya.MOCK_USER;else{t=(0,Nt.Sg)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new uc(cc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ya(s)}e._authCredentials=new pc(new hc(t,n))}}(this._delegate,e,t,n)}enableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((0,Ut.Z)(function*(){const t=yield Ny(e),n=yield Ly(e);return t.setNetworkEnabled(!0),function(e){const t=ac(e);return t.wu.delete(0),hg(t)}(n)}))}(uv(e=Gy(e,av)))}(this._delegate)}disableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((0,Ut.Z)(function*(){const t=yield Ny(e),n=yield Ly(e);return t.setNetworkEnabled(!1),(r=(0,Ut.Z)(function*(e){const t=ac(e);t.wu.add(0),yield pg(t),t.yu.set("Offline")}),function(e){return r.apply(this,arguments)})(n);var r}))}(uv(e=Gy(e,av)))}(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,By("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(e){return function(e){const t=new lc;return e.asyncQueue.enqueueAndForget((0,Ut.Z)(function*(){return function(e,t){return Fm.apply(this,arguments)}(yield My(e),t)})),t.promise}(uv(e=Gy(e,av)))}(this._delegate)}onSnapshotsInSync(e){return function(e,t){return function(e,t){const n=new by(t);return e.asyncQueue.enqueueAndForget((0,Ut.Z)(function*(){return function(e,t){ac(e).bu.add(t),t.next()}(yield Zy(e),n)})),()=>{n.Aa(),e.asyncQueue.enqueueAndForget((0,Ut.Z)(function*(){return function(e,t){ac(e).bu.delete(t)}(yield Zy(e),n)}))}}(uv(e=Gy(e,av)),sv(t)?t:{next:t})}(this._delegate,e)}get app(){if(!this._appCompat)throw new uc("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new tA(this,ev(this._delegate,e))}catch(t){throw Gx(t,"collection()","Firestore.collection()")}}doc(e){try{return new zx(this,tv(this._delegate,e))}catch(t){throw Gx(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Qx(this,function(e,t){if(e=Gy(e,Jy),jy("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new uc(cc.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qy(e,null,function(e){return new nl(Pc.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Gx(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Gy(e,av);const r=Object.assign(Object.assign({},l_),void 0);return function(e){if(e.maxAttempts<1)throw new uc(cc.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new lc;return e.asyncQueue.enqueueAndForget((0,Ut.Z)(function*(){const i=yield function(e){return Py(e).then(e=>e.datastore)}(e);new Ty(e.asyncQueue,i,n,t,r).run()})),r.promise}(uv(e),n=>t(new k_(e,n)),r)}(this._delegate,t=>e(new Bx(this,t)))}batch(){return uv(this._delegate),new $x(new f_(this._delegate,e=>T_(this._delegate,e)))}loadBundle(e){return function(e,t){const n=uv(e=Gy(e,av)),r=new ov;return function(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new wy(e,t)}(function(e,t){if(e instanceof Uint8Array)return _y(e,t);if(e instanceof ArrayBuffer)return _y(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,rg(t));e.asyncQueue.enqueueAndForget((0,Ut.Z)(function*(){!function(e,t,n){const r=ac(e);var i;(i=(0,Ut.Z)(function*(e,t,n){try{const r=yield t.getMetadata();if(yield function(e,t){const n=ac(e),r=Ch(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n._s.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,r))return yield t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(mm(r));const i=new gm(r,e.localStore,t.M);let s=yield t.ma();for(;s;){const e=yield i.Fu(s);e&&n._updateProgress(e),s=yield t.ma()}const o=yield i.complete();return yield Gm(e,o.Lu,void 0),yield function(e,t){const n=ac(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n._s.saveBundleMetadata(e,t))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Bu)}catch(e){return rc("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e),Promise.resolve(new Set)}}),function(e,t,n){return i.apply(this,arguments)})(r,t,n).then(e=>{r.sharedClientState.notifyBundleLoaded(e)})}(yield My(e),i,r)}))}(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return function(e,t){return function(e,t){return e.asyncQueue.enqueue((0,Ut.Z)(function*(){return function(e,t){const n=ac(e);return n.persistence.runTransaction("Get named query","readonly",e=>n._s.getNamedQuery(e,t))}(yield Oy(e),t)}))}(uv(e=Gy(e,av)),t).then(t=>t?new Qy(e,null,t.query):null)}(this._delegate,e).then(e=>e?new Qx(this,e):null)}}class jx extends h_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ux(new fv(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return zx.forKey(t,this.firestore,null)}}class Bx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new jx(e)}get(e){const t=nA(e);return this._delegate.get(t).then(e=>new Jx(this._firestore,new Gv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter)))}set(e,t,n){const r=nA(e);return n?(Lx("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=nA(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=nA(e);return this._delegate.delete(t),this}}class $x{constructor(e){this._delegate=e}set(e,t,n){const r=nA(e);return n?(Lx("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=nA(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=nA(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Hx{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Kv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Yx(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Hx.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Hx(e,new jx(e),t),r.set(t,i)),i}}Hx.INSTANCES=new WeakMap;class zx{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jx(e)}static forPath(e,t,n){if(e.length%2!=0)throw new uc("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new zx(t,new Yy(t._delegate,n,new Kc(e)))}static forKey(e,t,n){return new zx(t,new Yy(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new tA(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new tA(this.firestore,ev(this._delegate,e))}catch(t){throw Gx(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Nt.m9)(e))instanceof Yy&&nv(this._delegate,e)}set(e,t){t=Lx("DocumentReference.set",t);try{return t?__(this._delegate,e,t):__(this._delegate,e)}catch(n){throw Gx(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?b_(this._delegate,e):b_(this._delegate,e,t,...n)}catch(r){throw Gx(r,"updateDoc()","DocumentReference.update()")}}delete(){return w_(this._delegate)}onSnapshot(...e){const t=Kx(e),n=Wx(e,e=>new Jx(this.firestore,new Gv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)));return S_(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=Gy(e,Yy);const t=Gy(e.firestore,av),n=uv(t),r=new y_(t);return function(e,t){const n=new lc;return e.asyncQueue.enqueueAndForget((0,Ut.Z)(function*(){return(r=(0,Ut.Z)(function*(e,t,n){try{const r=yield function(e,t){const n=ac(e);return n.persistence.runTransaction("read document","readonly",e=>n.fi.Ls(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new uc(cc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Xg(e,`Failed to get document '${t} from cache`);n.reject(r)}}),function(e,t,n){return r.apply(this,arguments)})(yield Oy(e),t,n);var r})),n.promise}(n,e._key).then(n=>new Gv(t,r,e._key,n,new zv(null!==n&&n.hasLocalMutations,!0),e.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Gy(e,Yy);const t=Gy(e.firestore,av);return Fy(uv(t),e._key,{source:"server"}).then(n=>I_(t,e,n))}(this._delegate):m_(this._delegate),t.then(e=>new Jx(this.firestore,new Gv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)))}withConverter(e){return new zx(this.firestore,this._delegate.withConverter(e?Hx.getInstance(this.firestore,e):null))}}function Gx(e,t,n){return e.message=e.message.replace(t,n),e}function Kx(e){for(const t of e)if("object"==typeof t&&!Fx(t))return t;return{}}function Wx(e,t){var n,r;let i;return i=Fx(e[0])?e[0]:Fx(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Jx{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new zx(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Yv(this._delegate,e._delegate)}}class Yx extends Jx{data(e){const t=this._delegate.data(e);return function(e,t){e||sc()}(void 0!==t),t}}class Qx{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jx(e)}where(e,t,n){try{return new Qx(this.firestore,e_(this._delegate,function(e,t,n){const r=t,i=Hv("where",e);return new t_(i,r,n)}(e,t,n)))}catch(r){throw Gx(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Qx(this.firestore,e_(this._delegate,function(e,t="asc"){const n=t,r=Hv("orderBy",e);return new n_(r,n)}(e,t)))}catch(n){throw Gx(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Qx(this.firestore,e_(this._delegate,function(e){return Ky("limit",e),new r_("limit",e,"F")}(e)))}catch(t){throw Gx(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Qx(this.firestore,e_(this._delegate,function(e){return Ky("limitToLast",e),new r_("limitToLast",e,"L")}(e)))}catch(t){throw Gx(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Qx(this.firestore,e_(this._delegate,function(...e){return new i_("startAt",e,!0)}(...e)))}catch(t){throw Gx(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Qx(this.firestore,e_(this._delegate,function(...e){return new i_("startAfter",e,!1)}(...e)))}catch(t){throw Gx(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Qx(this.firestore,e_(this._delegate,function(...e){return new s_("endBefore",e,!1)}(...e)))}catch(t){throw Gx(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Qx(this.firestore,e_(this._delegate,function(...e){return new s_("endAt",e,!0)}(...e)))}catch(t){throw Gx(t,"endAt()","Query.endAt()")}}isEqual(e){return rv(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=Gy(e,Qy);const t=Gy(e.firestore,av),n=uv(t),r=new y_(t);return function(e,t){const n=new lc;return e.asyncQueue.enqueueAndForget((0,Ut.Z)(function*(){return(r=(0,Ut.Z)(function*(e,t,n){try{const r=yield Sf(e,t,!0),i=new _m(t,r._i),s=i.Wu(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=Xg(e,`Failed to execute query '${t} against cache`);n.reject(r)}}),function(e,t,n){return r.apply(this,arguments)})(yield Oy(e),t,n);var r})),n.promise}(n,e._query).then(n=>new Wv(t,r,e,n))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Gy(e,Qy);const t=Gy(e.firestore,av),n=uv(t),r=new y_(t);return qy(n,e._query,{source:"server"}).then(n=>new Wv(t,r,e,n))}(this._delegate):v_(this._delegate),t.then(e=>new eA(this.firestore,new Wv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)))}onSnapshot(...e){const t=Kx(e),n=Wx(e,e=>new eA(this.firestore,new Wv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)));return S_(this._delegate,t,n)}withConverter(e){return new Qx(this.firestore,this._delegate.withConverter(e?Hx.getInstance(this.firestore,e):null))}}class Xx{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Yx(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class eA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Qx(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Yx(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(e=>new Xx(this._firestore,e))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new Yx(this._firestore,n))})}isEqual(e){return Yv(this._delegate,e._delegate)}}class tA extends Qx{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new zx(this.firestore,e):null}doc(e){try{return new zx(this.firestore,void 0===e?tv(this._delegate):tv(this._delegate,e))}catch(t){throw Gx(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Gy(e.firestore,av),r=tv(e),i=d_(e.converter,t);return T_(n,[Iv(Tv(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ll.exists(!1))]).then(()=>r)}(this._delegate,e).then(e=>new zx(this.firestore,e))}isEqual(e){return nv(this._delegate,e._delegate)}withConverter(e){return new tA(this.firestore,this._delegate.withConverter(e?Hx.getInstance(this.firestore,e):null))}}function nA(e){return Gy(e,Yy)}class rA{constructor(...e){this._delegate=new pv(...e)}static documentId(){return new rA(Nc.keyField().canonicalString())}isEqual(e){return(e=(0,Nt.m9)(e))instanceof pv&&this._delegate._internalPath.isEqual(e._internalPath)}}class iA{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Cv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new iA(e)}static delete(){const e=new kv("deleteField");return e._methodName="FieldValue.delete",new iA(e)}static arrayUnion(...e){const t=function(...e){return new xv("arrayUnion",e)}(...e);return t._methodName="FieldValue.arrayUnion",new iA(t)}static arrayRemove(...e){const t=function(...e){return new Av("arrayRemove",e)}(...e);return t._methodName="FieldValue.arrayRemove",new iA(t)}static increment(e){const t=function(e){return new Dv("increment",e)}(e);return t._methodName="FieldValue.increment",new iA(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const sA={Firestore:Vx,GeoPoint:mv,Timestamp:kc,Blob:Ux,Transaction:Bx,WriteBatch:$x,DocumentReference:zx,DocumentSnapshot:Jx,Query:Qx,QueryDocumentSnapshot:Yx,QuerySnapshot:eA,CollectionReference:tA,FieldPath:rA,FieldValue:iA,setLogLevel:function(e){!function(e){Xa.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};var oA;(oA=$T.Z).INTERNAL.registerComponent(new Mt.wA("firestore-compat",e=>{return t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("firestore").getImmediate(),new Vx(t,n,new qx);var t,n},"PUBLIC").setServiceProps(Object.assign({},sA))),oA.registerVersion("@firebase/firestore-compat","0.1.18");var aA=n(9746),cA=n(7771),uA=n(8858);class lA extends B_.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new hA(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let s;if(this.closed)throw new $_.N;if(this.isStopped||this.hasError?s=Zb.w.EMPTY:(this.observers.push(e),s=new uA.W(this,e)),r&&e.add(e=new aA.ht(e,r)),t)for(let o=0;o<i&&!e.closed;o++)e.next(n[o]);else for(let o=0;o<i&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),s}_getNow(){return(this.scheduler||cA.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(e-r[s].time<n);)s++;return i>t&&(s=Math.max(s,i-t)),s>0&&r.splice(0,s),r}}class hA{constructor(e,t){this.time=e,this.value=t}}function dA(e,t,n){let r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},e=>e.lift(function({bufferSize:e=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,s,o=0,a=!1,c=!1;return function(u){let l;o++,!i||a?(a=!1,i=new lA(e,t,r),l=i.subscribe(this),s=u.subscribe({next(e){i.next(e)},error(e){a=!0,i.error(e)},complete(){c=!0,s=void 0,i.complete()}}),c&&(s=void 0)):l=i.subscribe(this),this.add(()=>{o--,l.unsubscribe(),l=void 0,s&&!c&&n&&0===o&&(s.unsubscribe(),s=void 0,i=void 0)})}}(r))}function pA(e,t){return t?ub(()=>e,t):ub(()=>e)}var fA=n(9673);const gA=new r.OlP("angularfire2.auth.use-emulator"),mA=new r.OlP("angularfire2.auth.settings"),yA=new r.OlP("angularfire2.auth.tenant-id"),vA=new r.OlP("angularfire2.auth.langugage-code"),_A=new r.OlP("angularfire2.auth.use-device-language"),bA=new r.OlP("angularfire.auth.persistence"),wA=(e,t,n,r,i,s,o,a)=>(0,BT.cc)(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{const c=t.runOutsideAngular(()=>e.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(const[e,t]of Object.entries(o))c.settings[e]=t;return a&&c.setPersistence(a),c},[n,r,i,s,o,a]);let SA=(()=>{class e{constructor(e,t,r,i,s,o,a,c,u,l,h,d){const p=new B_.xQ,f=(0,Le.of)(void 0).pipe((0,aA.QV)(s.outsideAngular),ub(()=>i.runOutsideAngular(()=>Promise.resolve().then(n.bind(n,4828)))),(0,Be.U)(()=>(0,BT.on)(e,i,t)),(0,Be.U)(e=>wA(e,i,o,c,u,l,a,h)),dA({bufferSize:1,refCount:!1}));if(K(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Le.of)(null);else{f.pipe(Ob()).subscribe();const e=f.pipe(ub(e=>e.getRedirectResult().then(e=>e,()=>null)),Tt.iC,dA({bufferSize:1,refCount:!1})),t=f.pipe(ub(e=>new Me.y(t=>({unsubscribe:i.runOutsideAngular(()=>e.onAuthStateChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))})))),n=f.pipe(ub(e=>new Me.y(t=>({unsubscribe:i.runOutsideAngular(()=>e.onIdTokenChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))}))));this.authState=e.pipe(pA(t),(0,fA.R)(s.outsideAngular),(0,aA.QV)(s.insideAngular)),this.user=e.pipe(pA(n),(0,fA.R)(s.outsideAngular),(0,aA.QV)(s.insideAngular)),this.idToken=this.user.pipe(ub(e=>e?(0,j_.D)(e.getIdToken()):(0,Le.of)(null))),this.idTokenResult=this.user.pipe(ub(e=>e?(0,j_.D)(e.getIdTokenResult()):(0,Le.of)(null))),this.credential=(0,nE.T)(e,p,this.authState.pipe(qe(e=>!e))).pipe((0,Be.U)(e=>(null==e?void 0:e.user)?e:null),(0,fA.R)(s.outsideAngular),(0,aA.QV)(s.insideAngular))}return(0,BT.pX)(this,f,i,{spy:{apply:(e,t,n)=>{(e.startsWith("signIn")||e.startsWith("createUser"))&&n.then(e=>p.next(e))}}})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(BT.Dh),r.LFG(BT.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Tt.HU),r.LFG(gA,8),r.LFG(mA,8),r.LFG(yA,8),r.LFG(vA,8),r.LFG(_A,8),r.LFG(bA,8),r.LFG(mn,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})();function TA(e,t){return function(e,t=FT.z){return new Me.y(n=>{let r;return null!=t?t.schedule(()=>{r=e.onSnapshot({includeMetadataChanges:!0},n)}):r=e.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(e,t)}function IA(e,t){return TA(e,t).pipe((0,Be.U)(e=>({payload:e,type:"query"})))}function kA(e,t){return IA(e,t).pipe(mb(void 0),Dx(),(0,Be.U)(([e,t])=>{const n=t.payload.docChanges(),r=n.map(e=>({type:e.type,payload:e}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(t.payload.metadata)&&t.payload.docs.forEach((t,i)=>{const s=n.find(e=>e.doc.ref.isEqual(t.ref)),o=null==e?void 0:e.payload.docs.find(e=>e.ref.isEqual(t.ref));s&&JSON.stringify(s.doc.metadata)===JSON.stringify(t.metadata)||!s&&o&&JSON.stringify(o.metadata)===JSON.stringify(t.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:t}})}),r}))}function EA(e,t,n){return kA(e,n).pipe(yb((e,n)=>function(e,t,n){return t.forEach(t=>{n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":if(!e[t.newIndex]||!e[t.newIndex].doc.ref.isEqual(t.doc.ref))return CA(e,t.newIndex,0,t);break;case"modified":if(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}return CA(e,t.newIndex,1,t)}break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return CA(e,t.oldIndex,1)}return e}(e,t))}),e}(e,n.map(e=>e.payload),t),[]),e=>e.lift(new Nx(void 0,void 0)),(0,Be.U)(e=>e.map(e=>({type:e.type,payload:e}))))}function CA(e,t,n,...r){const i=e.slice();return i.splice(t,n,...r),i}function xA(e){return e&&0!==e.length||(e=["added","removed","modified"]),e}class AA{constructor(e,t,n){this.ref=e,this.query=t,this.afs=n}stateChanges(e){let t=kA(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Be.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)))),t.pipe(mb(void 0),Dx(),qe(([e,t])=>t.length>0||!e),(0,Be.U)(([e,t])=>t),Tt.iC)}auditTrail(e){return this.stateChanges(e).pipe(yb((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=xA(e);return EA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Tt.iC)}valueChanges(e={}){return IA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Be.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data())),Tt.iC)}get(e){return(0,j_.D)(this.query.get(e)).pipe(Tt.iC)}add(e){return this.ref.add(e)}doc(e){return new DA(this.ref.doc(e),this.afs)}}class DA{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const n=this.ref.collection(e),{ref:r,query:i}=MA(n,t);return new AA(r,i,this.afs)}snapshotChanges(){return function(e,t){return TA(e,t).pipe(mb(void 0),Dx(),(0,Be.U)(([e,t])=>t.exists?(null==e?void 0:e.exists)?{payload:t,type:"modified"}:{payload:t,type:"added"}:{payload:t,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Tt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Be.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,j_.D)(this.ref.get(e)).pipe(Tt.iC)}}class PA{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?kA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Be.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)),qe(e=>e.length>0),Tt.iC):kA(this.query,this.afs.schedulers.outsideAngular).pipe(Tt.iC)}auditTrail(e){return this.stateChanges(e).pipe(yb((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=xA(e);return EA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Tt.iC)}valueChanges(e={}){return IA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Be.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign({[e.idField]:t.id},t.data()):t.data())),Tt.iC)}get(e){return(0,j_.D)(this.query.get(e)).pipe(Tt.iC)}}const RA=new r.OlP("angularfire2.enableFirestorePersistence"),NA=new r.OlP("angularfire2.firestore.persistenceSettings"),OA=new r.OlP("angularfire2.firestore.settings"),LA=new r.OlP("angularfire2.firestore.use-emulator");function MA(e,t=(e=>e)){return{query:t(e),ref:e}}let ZA=(()=>{class e{constructor(e,t,n,r,i,s,o,a,c,u,l,h,d,p,f,g,m){this.schedulers=o;const y=(0,BT.on)(e,s,t),v=c;u&&wA(y,s,l,d,p,f,h,g),[this.firestore,this.persistenceEnabled$]=(0,BT.cc)(`${y.name}.firestore`,"AngularFirestore",y.name,()=>{const e=s.runOutsideAngular(()=>y.firestore());if(r&&e.settings(r),v&&e.useEmulator(...v),n&&!K(i)){const t=()=>{try{return(0,j_.D)(e.enablePersistence(a||void 0).then(()=>!0,()=>!1))}catch(t){return"undefined"!=typeof console&&console.warn(t),(0,Le.of)(!1)}};return[e,s.runOutsideAngular(t)]}return[e,(0,Le.of)(!1)]},[r,v,n])}collection(e,t){let n;n="string"==typeof e?this.firestore.collection(e):e;const{ref:r,query:i}=MA(n,t),s=this.schedulers.ngZone.run(()=>r);return new AA(s,i,this)}collectionGroup(e,t){const n=t||(e=>e),r=this.firestore.collectionGroup(e);return new PA(n(r),this)}doc(e){let t;t="string"==typeof e?this.firestore.doc(e):e;const n=this.schedulers.ngZone.run(()=>t);return new DA(n,this)}createId(){return this.firestore.collection("_").doc().id}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(BT.Dh),r.LFG(BT.xv,8),r.LFG(RA,8),r.LFG(OA,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Tt.HU),r.LFG(NA,8),r.LFG(LA,8),r.LFG(SA,8),r.LFG(gA,8),r.LFG(mA,8),r.LFG(yA,8),r.LFG(vA,8),r.LFG(_A,8),r.LFG(bA,8),r.LFG(mn,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})();const UA={apiKey:"AIzaSyCXiM3pRTf1d6CCChySrNyXq-v7I7RacbE",authDomain:"junkyard-stories.firebaseapp.com",projectId:"junkyard-stories",storageBucket:"junkyard-stories.appspot.com",messagingSenderId:"800786856702",appId:"1:800786856702:web:47b317703177830d09c3af"};let FA=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e,bootstrap:[bx]}),e.\u0275inj=r.cJS({providers:[cI,lI,ZA,{provide:m,useClass:b},{provide:lt,useClass:Ax,multi:!0}],imports:[[Pe,AT.forRoot([]),Pt(()=>Rt(UA)),Ur(()=>qr()),R_(()=>U_()),BT.hO.initializeApp(UA),aI,wt,_x,Dk,Sx]]}),e})();(0,r.G48)(),Ae().bootstrapModule(FA).catch(e=>console.error(e))},6304:function(e,t,n){"use strict";function r(e,t,n,r,i,s,o){try{var a=e[s](o),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,s){var o=e.apply(t,n);function a(e){r(o,i,s,a,c,"next",e)}function c(e){r(o,i,s,a,c,"throw",e)}a(void 0)})}}n.d(t,{Z:function(){return i}})}},function(e){"use strict";e(e.s=9562)}]);