!function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?e(Object(i),!0).forEach(function(e){n(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||h(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e){if(Array.isArray(e))return e}function o(){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=u(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function u(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}function s(e){return function(e){if(Array.isArray(e))return f(e)}(e)||c(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function h(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}function m(e){var t=_();return function(){var n,r=T(e);if(t){var i=T(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){var t="function"==typeof Map?new Map:void 0;return(b=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return w(e,arguments,T(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),x(r,e)})(e)}function w(e,t,n){return(w=_()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&x(i,n.prototype),i}).apply(null,arguments)}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(self.webpackChunkjunkyard_stories=self.webpackChunkjunkyard_stories||[]).push([[179],{8255:function(e){function t(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=function(){return[]},t.resolve=t,t.id=8255,e.exports=t},3018:function(e,t,n){"use strict";n.d(t,{deG:function(){return ln},tb:function(){return Es},AFp:function(){return _s},ip1:function(){return bs},CZH:function(){return ws},hGG:function(){return kc},z2F:function(){return cc},sBO:function(){return Tu},Sil:function(){return Fs},_Vd:function(){return Wo},EJc:function(){return As},SBq:function(){return $o},qLn:function(){return _r},vpe:function(){return ts},gxx:function(){return ia},tBr:function(){return Rn},XFs:function(){return z},OlP:function(){return cn},zs3:function(){return ya},ZZ4:function(){return mu},aQg:function(){return ku},soG:function(){return Rs},YKP:function(){return Pu},v3s:function(){return hc},h0i:function(){return Nu},PXZ:function(){return ic},R0b:function(){return qs},FiY:function(){return An},Lbi:function(){return Is},g9A:function(){return Ss},Qsj:function(){return tu},FYo:function(){return eu},JOm:function(){return Ir},Tiy:function(){return ru},q3G:function(){return gr},tp0:function(){return On},EAV:function(){return pc},Rgc:function(){return Ru},dDg:function(){return Ws},DyG:function(){return hn},q4F:function(){return au},GfV:function(){return iu},s_b:function(){return Lu},ifc:function(){return J},eFA:function(){return ac},G48:function(){return nc},Gpc:function(){return E},X6Q:function(){return tc},_c5:function(){return mc},VLi:function(){return Ys},c2e:function(){return Cs},zSh:function(){return oa},wAp:function(){return Mo},vHH:function(){return A},EiD:function(){return pr},mCW:function(){return Qn},qzn:function(){return Zn},JVY:function(){return jn},pB0:function(){return Gn},eBb:function(){return zn},L6k:function(){return Bn},LAX:function(){return Hn},cg1:function(){return Po},Tjo:function(){return gc},kL8:function(){return Do},yhl:function(){return qn},dqk:function(){return ee},sIi:function(){return Ca},CqO:function(){return Ga},QGY:function(){return za},F4k:function(){return Ha},RDi:function(){return Me},AaK:function(){return x},z3N:function(){return Vn},qOj:function(){return ba},TTD:function(){return Oe},_Bn:function(){return Ho},xp6:function(){return si},uIk:function(){return Na},Gre:function(){return Co},ekj:function(){return lo},Suo:function(){return vs},Xpm:function(){return he},lG2:function(){return ye},Yz7:function(){return D},cJS:function(){return L},oAB:function(){return ve},Yjl:function(){return ke},Y36:function(){return La},_UZ:function(){return Za},BQk:function(){return ja},ynx:function(){return qa},qZA:function(){return Va},TgZ:function(){return Fa},EpF:function(){return Ba},n5z:function(){return an},Ikx:function(){return Ro},LFG:function(){return Sn},$8M:function(){return un},NdJ:function(){return Ka},CRH:function(){return gs},oxw:function(){return Ya},ALo:function(){return $u},lcZ:function(){return Xu},Q6J:function(){return Ma},s9C:function(){return Qa},MGl:function(){return $a},DdM:function(){return Ju},VKq:function(){return Yu},iGM:function(){return ds},evT:function(){return Tr},CHM:function(){return Xe},LSH:function(){return mr},kYT:function(){return ge},Akn:function(){return ho},YNc:function(){return Da},_uU:function(){return So},Oqu:function(){return Io},hij:function(){return Eo},Gf:function(){return ps}});var i=n(9765),a=n(5319),u=n(7574),c=n(6682),h=n(2441),f=n(1307);function d(){return new i.xQ}function y(e){for(var t in e)if(e[t]===y)return t;throw Error("Could not find renamed property on target object.")}function _(e,t){for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function x(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(x).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return"".concat(e.overriddenName);if(e.name)return"".concat(e.name);var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function S(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}var I=y({__forward_ref__:y});function E(e){return e.__forward_ref__=E,e.toString=function(){return x(this())},e}function C(e){return R(e)?e():e}function R(e){return"function"==typeof e&&e.hasOwnProperty(I)&&e.__forward_ref__===E}var A=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,function(e,t){return"".concat(e?"NG0".concat(e,": "):"").concat(t)}(e,r))).code=e,i}return p(n)}(b(Error));function O(e){return"string"==typeof e?e:null==e?"":String(e)}function N(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():O(e)}function P(e,t){var n=t?" in ".concat(t):"";throw new A("201","No provider for ".concat(N(e)," found").concat(n))}function D(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function L(e){return{providers:e.providers||[],imports:e.imports||[]}}function M(e){return U(e,Z)||U(e,j)}function U(e,t){return e.hasOwnProperty(t)?e[t]:null}function F(e){return e&&(e.hasOwnProperty(q)||e.hasOwnProperty(B))?e[q]:null}var V,Z=y({"\u0275prov":y}),q=y({"\u0275inj":y}),j=y({ngInjectableDef:y}),B=y({ngInjectorDef:y}),z=((z=z||{})[z.Default=0]="Default",z[z.Host=1]="Host",z[z.Self=2]="Self",z[z.SkipSelf=4]="SkipSelf",z[z.Optional=8]="Optional",z);function H(e){var t=V;return V=e,t}function G(e,t,n){var r=M(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&z.Optional?null:void 0!==t?t:void P(x(e),"Injector")}function K(e){return{toString:e}.toString()}var W=((W=W||{})[W.OnPush=0]="OnPush",W[W.Default=1]="Default",W),J=((J=J||{})[J.Emulated=0]="Emulated",J[J.None=2]="None",J[J.ShadowDom=3]="ShadowDom",J),Y="undefined"!=typeof globalThis&&globalThis,Q="undefined"!=typeof window&&window,$="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,X="undefined"!=typeof global&&global,ee=Y||X||Q||$,te={},ne=[],re=y({"\u0275cmp":y}),ie=y({"\u0275dir":y}),ae=y({"\u0275pipe":y}),oe=y({"\u0275mod":y}),ue=y({"\u0275loc":y}),se=y({"\u0275fac":y}),ce=y({__NG_ELEMENT_ID__:y}),le=0;function he(e){return K(function(){var t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===W.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||ne,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||J.Emulated,id:"c",styles:e.styles||ne,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,a=e.pipes;return n.id+=le++,n.inputs=me(e.inputs,t),n.outputs=me(e.outputs),i&&i.forEach(function(e){return e(n)}),n.directiveDefs=r?function(){return("function"==typeof r?r():r).map(fe)}:null,n.pipeDefs=a?function(){return("function"==typeof a?a():a).map(de)}:null,n})}function fe(e){return be(e)||function(e){return e[ie]||null}(e)}function de(e){return function(e){return e[ae]||null}(e)}var pe={};function ve(e){return K(function(){var t={type:e.type,bootstrap:e.bootstrap||ne,declarations:e.declarations||ne,imports:e.imports||ne,exports:e.exports||ne,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(pe[e.id]=e.type),t})}function ge(e,t){return K(function(){var n=we(e,!0);n.declarations=t.declarations||ne,n.imports=t.imports||ne,n.exports=t.exports||ne})}function me(e,t){if(null==e)return te;var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],a=i;Array.isArray(i)&&(a=i[1],i=i[0]),n[i]=r,t&&(t[i]=a)}return n}var ye=he;function ke(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function be(e){return e[re]||null}function we(e,t){var n=e[oe]||null;if(!n&&!0===t)throw new Error("Type ".concat(x(e)," does not have '\u0275mod' property."));return n}function _e(e){return Array.isArray(e)&&"object"==typeof e[1]}function xe(e){return Array.isArray(e)&&!0===e[1]}function Te(e){return 0!=(8&e.flags)}function Se(e){return 2==(2&e.flags)}function Ie(e){return 1==(1&e.flags)}function Ee(e){return null!==e.template}function Ce(e,t){return e.hasOwnProperty(se)?e[se]:null}var Re,Ae=function(){function e(t,n,r){v(this,e),this.previousValue=t,this.currentValue=n,this.firstChange=r}return p(e,[{key:"isFirstChange",value:function(){return this.firstChange}}]),e}();function Oe(){return Ne}function Ne(e){return e.type.prototype.ngOnChanges&&(e.setInput=De),Pe}function Pe(){var e=Le(this),t=null==e?void 0:e.current;if(t){var n=e.previous;if(n===te)e.previous=t;else for(var r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function De(e,t,n,r){var i=Le(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:te,current:null}),a=i.current||(i.current={}),o=i.previous,u=this.declaredInputs[n],s=o[u];a[u]=new Ae(s&&s.currentValue,t,o===te),e[r]=t}function Le(e){return e.__ngSimpleChanges__||null}function Me(e){Re=e}function Ue(e){return!!e.listen}Oe.ngInherit=!0;var Fe={createRenderer:function(e,t){return void 0!==Re?Re:"undefined"!=typeof document?document:void 0}};function Ve(e){for(;Array.isArray(e);)e=e[0];return e}function Ze(e,t){return Ve(t[e])}function qe(e,t){return Ve(t[e.index])}function je(e,t){return e.data[t]}function Be(e,t){var n=t[e];return _e(n)?n:n[0]}function ze(e){return 4==(4&e[2])}function He(e){return 128==(128&e[2])}function Ge(e,t){return null==t?null:e[t]}function Ke(e){e[18]=0}function We(e,t){e[5]+=t;for(var n=e,r=e[3];null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}var Je={lFrame:mt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ye(){return Je.bindingsEnabled}function Qe(){return Je.lFrame.lView}function $e(){return Je.lFrame.tView}function Xe(e){return Je.lFrame.contextLView=e,e[8]}function et(){for(var e=tt();null!==e&&64===e.type;)e=e.parent;return e}function tt(){return Je.lFrame.currentTNode}function nt(e,t){var n=Je.lFrame;n.currentTNode=e,n.isParent=t}function rt(){return Je.lFrame.isParent}function it(){Je.lFrame.isParent=!1}function at(){return Je.isInCheckNoChangesMode}function ot(e){Je.isInCheckNoChangesMode=e}function ut(){var e=Je.lFrame,t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function st(){return Je.lFrame.bindingIndex++}function ct(e){var t=Je.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function lt(e){Je.lFrame.currentDirectiveIndex=e}function ht(){return Je.lFrame.currentQueryIndex}function ft(e){Je.lFrame.currentQueryIndex=e}function dt(e){var t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function pt(e,t,n){if(n&z.SkipSelf){for(var r=t,i=e;!(null!==(r=r.parent)||n&z.Host||(r=dt(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;t=r,e=i}var a=Je.lFrame=gt();return a.currentTNode=t,a.lView=e,!0}function vt(e){var t=gt(),n=e[1];Je.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function gt(){var e=Je.lFrame,t=null===e?null:e.child;return null===t?mt(e):t}function mt(e){var t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function yt(){var e=Je.lFrame;return Je.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var kt=yt;function bt(){var e=yt();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function wt(){return Je.lFrame.selectedIndex}function _t(e){Je.lFrame.selectedIndex=e}function xt(){var e=Je.lFrame;return je(e.tView,e.selectedIndex)}function Tt(e,t){for(var n=t.directiveStart,r=t.directiveEnd;n<r;n++){var i=e.data[n].type.prototype,a=i.ngAfterContentInit,o=i.ngAfterContentChecked,u=i.ngAfterViewInit,s=i.ngAfterViewChecked,c=i.ngOnDestroy;a&&(e.contentHooks||(e.contentHooks=[])).push(-n,a),o&&((e.contentHooks||(e.contentHooks=[])).push(n,o),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,o)),u&&(e.viewHooks||(e.viewHooks=[])).push(-n,u),s&&((e.viewHooks||(e.viewHooks=[])).push(n,s),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,s)),null!=c&&(e.destroyHooks||(e.destroyHooks=[])).push(n,c)}}function St(e,t,n){Ct(e,t,3,n)}function It(e,t,n,r){(3&e[2])===n&&Ct(e,t,n,r)}function Et(e,t){var n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Ct(e,t,n,r){for(var i=null!=r?r:-1,a=t.length-1,o=0,u=void 0!==r?65535&e[18]:0;u<a;u++)if("number"==typeof t[u+1]){if(o=t[u],null!=r&&o>=r)break}else t[u]<0&&(e[18]+=65536),(o<i||-1==i)&&(Rt(e,n,t,u),e[18]=(4294901760&e[18])+u+2),u++}function Rt(e,t,n,r){var i=n[r]<0,a=n[r+1],o=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{a.call(o)}finally{}}}else try{a.call(o)}finally{}}var At=p(function e(t,n,r){v(this,e),this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r});function Ot(e,t,n){for(var r=Ue(e),i=0;i<n.length;){var a=n[i];if("number"==typeof a){if(0!==a)break;i++;var o=n[i++],u=n[i++],s=n[i++];r?e.setAttribute(t,u,s,o):t.setAttributeNS(o,u,s)}else{var c=a,l=n[++i];Pt(c)?r&&e.setProperty(t,c,l):r?e.setAttribute(t,c,l):t.setAttribute(c,l),i++}}return i}function Nt(e){return 3===e||4===e||6===e}function Pt(e){return 64===e.charCodeAt(0)}function Dt(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else for(var n=-1,r=0;r<t.length;r++){var i=t[r];"number"==typeof i?n=i:0===n||Lt(e,n,i,null,-1===n||2===n?t[++r]:null)}return e}function Lt(e,t,n,r,i){var a=0,o=e.length;if(-1===t)o=-1;else for(;a<e.length;){var u=e[a++];if("number"==typeof u){if(u===t){o=-1;break}if(u>t){o=a-1;break}}}for(;a<e.length;){var s=e[a];if("number"==typeof s)break;if(s===n){if(null===r)return void(null!==i&&(e[a+1]=i));if(r===e[a+1])return void(e[a+2]=i)}a++,null!==r&&a++,null!==i&&a++}-1!==o&&(e.splice(o,0,t),a=o+1),e.splice(a++,0,n),null!==r&&e.splice(a++,0,r),null!==i&&e.splice(a++,0,i)}function Mt(e){return-1!==e}function Ut(e){return 32767&e}function Ft(e,t){for(var n=e>>16,r=t;n>0;)r=r[15],n--;return r}var Vt=!0;function Zt(e){var t=Vt;return Vt=e,t}var qt=0;function jt(e,t){var n=zt(e,t);if(-1!==n)return n;var r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Bt(r.data,e),Bt(t,null),Bt(r.blueprint,null));var i=Ht(e,t),a=e.injectorIndex;if(Mt(i))for(var o=Ut(i),u=Ft(i,t),s=u[1].data,c=0;c<8;c++)t[a+c]=u[o+c]|s[o+c];return t[a+8]=i,a}function Bt(e,t){e.push(0,0,0,0,0,0,0,0,t)}function zt(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Ht(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;for(var n=0,r=null,i=t;null!==i;){var a=i[1],o=a.type;if(null===(r=2===o?a.declTNode:1===o?i[6]:null))return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Gt(e,t,n){!function(e,t,n){var r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ce)&&(r=n[ce]),null==r&&(r=n[ce]=qt++);var i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function Kt(e,t,n){if(n&z.Optional)return e;P(t,"NodeInjector")}function Wt(e,t,n,r){if(n&z.Optional&&void 0===r&&(r=null),0==(n&(z.Self|z.Host))){var i=e[9],a=H(void 0);try{return i?i.get(t,r,n&z.Optional):G(t,r,n&z.Optional)}finally{H(a)}}return Kt(r,t,n)}function Jt(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:z.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==e){var a=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;var t=e.hasOwnProperty(ce)?e[ce]:void 0;return"number"==typeof t?t>=0?255&t:Qt:t}(n);if("function"==typeof a){if(!pt(t,e,r))return r&z.Host?Kt(i,n,r):Wt(t,n,r,i);try{var o=a(r);if(null!=o||r&z.Optional)return o;P(n)}finally{kt()}}else if("number"==typeof a){var u=null,s=zt(e,t),c=-1,l=r&z.Host?t[16][6]:null;for((-1===s||r&z.SkipSelf)&&(-1!==(c=-1===s?Ht(e,t):t[s+8])&&nn(r,!1)?(u=t[1],s=Ut(c),t=Ft(c,t)):s=-1);-1!==s;){var h=t[1];if(tn(a,s,h.data)){var f=$t(s,t,n,u,r,l);if(f!==Yt)return f}-1!==(c=t[s+8])&&nn(r,t[1].data[s+8]===l)&&tn(a,s,t)?(u=h,s=Ut(c),t=Ft(c,t)):s=-1}}}return Wt(t,n,r,i)}var Yt={};function Qt(){return new rn(et(),Qe())}function $t(e,t,n,r,i,a){var o=t[1],u=o.data[e+8],s=Xt(u,o,n,null==r?Se(u)&&Vt:r!=o&&0!=(3&u.type),i&z.Host&&a===u);return null!==s?en(t,o,s,u):Yt}function Xt(e,t,n,r,i){for(var a=e.providerIndexes,o=t.data,u=1048575&a,s=e.directiveStart,c=a>>20,l=i?u+c:e.directiveEnd,h=r?u:u+c;h<l;h++){var f=o[h];if(h<s&&n===f||h>=s&&f.type===n)return h}if(i){var d=o[s];if(d&&Ee(d)&&d.type===n)return s}return null}function en(e,t,n,r){var i=e[n],a=t.data;if(i instanceof At){var o=i;o.resolving&&function(e,t){throw new A("200","Circular dependency in DI detected for ".concat(e))}(N(a[n]));var u=Zt(o.canSeeViewProviders);o.resolving=!0;var s=o.injectImpl?H(o.injectImpl):null;pt(e,r,z.Default);try{i=e[n]=o.factory(void 0,a,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){var r=t.type.prototype,i=r.ngOnChanges,a=r.ngOnInit,o=r.ngDoCheck;if(i){var u=Ne(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,u),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,u)}a&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,a),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,a[n],t)}finally{null!==s&&H(s),Zt(u),o.resolving=!1,kt()}}return i}function tn(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function nn(e,t){return!(e&z.Self||e&z.Host&&t)}var rn=function(){function e(t,n){v(this,e),this._tNode=t,this._lView=n}return p(e,[{key:"get",value:function(e,t){return Jt(this._tNode,this._lView,e,void 0,t)}}]),e}();function an(e){return K(function(){for(var t=e.prototype.constructor,n=t[se]||on(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;i&&i!==r;){var a=i[se]||on(i);if(a&&a!==n)return a;i=Object.getPrototypeOf(i)}return function(e){return new e}})}function on(e){return R(e)?function(){var t=on(C(e));return t&&t()}:Ce(e)}function un(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;var n=e.attrs;if(n)for(var r=n.length,i=0;i<r;){var a=n[i];if(Nt(a))break;if(0===a)i+=2;else if("number"==typeof a)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(a===t)return n[i+1];i+=2}}return null}(et(),e)}function sn(e,t,n){return K(function(){var r=function(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var n in t)this[n]=t[n]}}}(t);function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof i)return r.apply(this,t),this;var a=w(i,t);return o.annotation=a,o;function o(e,t,n){for(var r=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(a),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var cn=function(){function e(t,n){v(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=D({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return p(e,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),e}(),ln=new cn("AnalyzeForEntryComponents"),hn=Function;function fn(e,t){void 0===t&&(t=e);for(var n=0;n<e.length;n++){var r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),fn(r,t)):t!==e&&t.push(r)}return t}function dn(e,t){e.forEach(function(e){return Array.isArray(e)?dn(e,t):t(e)})}function pn(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function vn(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function gn(e,t,n){var r=yn(e,t);return r>=0?e[1|r]=n:function(e,t,n,r){var i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r=~r,t,n),r}function mn(e,t){var n=yn(e,t);if(n>=0)return e[1|n]}function yn(e,t){return function(e,t,n){for(var r=0,i=e.length>>1;i!==r;){var a=r+(i-r>>1),o=e[a<<1];if(t===o)return a<<1;o>t?i=a:r=a+1}return~(i<<1)}(e,t)}var kn,bn={},wn=/\n/gm,_n=y({provide:String,useValue:y});function xn(e){var t=kn;return kn=e,t}function Tn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.Default;if(void 0===kn)throw new Error("inject() must be called from an injection context");return null===kn?G(e,void 0,t):kn.get(e,t&z.Optional?null:void 0,t)}function Sn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.Default;return(V||Tn)(C(e),t)}function In(e){for(var t=[],n=0;n<e.length;n++){var r=C(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,a=z.Default,o=0;o<r.length;o++){var u=r[o],s=u.__NG_DI_FLAG__;"number"==typeof s?-1===s?i=u.token:a|=s:i=u}t.push(Sn(i,a))}else t.push(Sn(r))}return t}function En(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}var Cn,Rn=En(sn("Inject",function(e){return{token:e}}),-1),An=En(sn("Optional"),8),On=En(sn("SkipSelf"),4);function Nn(e){var t;return(null===(t=function(){if(void 0===Cn&&(Cn=null,ee.trustedTypes))try{Cn=ee.trustedTypes.createPolicy("angular",{createHTML:function(e){return e},createScript:function(e){return e},createScriptURL:function(e){return e}})}catch(t){}return Cn}())||void 0===t?void 0:t.createHTML(e))||e}var Pn=function(){function e(t){v(this,e),this.changingThisBreaksApplicationSecurity=t}return p(e,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity," (see https://g.co/ng/security#xss)")}}]),e}(),Dn=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(Pn),Ln=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(Pn),Mn=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(Pn),Un=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(Pn),Fn=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(Pn);function Vn(e){return e instanceof Pn?e.changingThisBreaksApplicationSecurity:e}function Zn(e,t){var n=qn(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error("Required a safe ".concat(t,", got a ").concat(n," (see https://g.co/ng/security#xss)"))}return n===t}function qn(e){return e instanceof Pn&&e.getTypeName()||null}function jn(e){return new Dn(e)}function Bn(e){return new Ln(e)}function zn(e){return new Mn(e)}function Hn(e){return new Un(e)}function Gn(e){return new Fn(e)}var Kn=function(){function e(t){v(this,e),this.inertDocumentHelper=t}return p(e,[{key:"getInertBodyElement",value:function(e){e="<body><remove></remove>"+e;try{var t=(new window.DOMParser).parseFromString(Nn(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(n){return null}}}]),e}(),Wn=function(){function e(t){if(v(this,e),this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);var r=this.inertDocument.createElement("body");n.appendChild(r)}}return p(e,[{key:"getInertBodyElement",value:function(e){var t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Nn(e),t;var n=this.inertDocument.createElement("body");return n.innerHTML=Nn(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}},{key:"stripCustomNsAttrs",value:function(e){for(var t=e.attributes,n=t.length-1;0<n;n--){var r=t.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||e.removeAttribute(r)}for(var i=e.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),e}(),Jn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Yn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Qn(e){return(e=String(e)).match(Jn)||e.match(Yn)?e:"unsafe:"+e}function $n(e){var t,n={},r=l(e.split(","));try{for(r.s();!(t=r.n()).done;){n[t.value]=!0}}catch(i){r.e(i)}finally{r.f()}return n}function Xn(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];for(var u in o)o.hasOwnProperty(u)&&(e[u]=!0)}return e}var er,tr=$n("area,br,col,hr,img,wbr"),nr=$n("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),rr=$n("rp,rt"),ir=Xn(rr,nr),ar=Xn(tr,Xn(nr,$n("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Xn(rr,$n("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ir),or=$n("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ur=$n("srcset"),sr=Xn(or,ur,$n("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),$n("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),cr=$n("script,style,template"),lr=function(){function e(){v(this,e),this.sanitizedSomething=!1,this.buf=[]}return p(e,[{key:"sanitizeChildren",value:function(e){for(var t=e.firstChild,n=!0;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);var r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(e){var t=e.nodeName.toLowerCase();if(!ar.hasOwnProperty(t))return this.sanitizedSomething=!0,!cr.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);for(var n,r=e.attributes,i=0;i<r.length;i++){var a=r.item(i),o=a.name,u=o.toLowerCase();if(sr.hasOwnProperty(u)){var s=a.value;or[u]&&(s=Qn(s)),ur[u]&&(n=s,s=(n=String(n)).split(",").map(function(e){return Qn(e.trim())}).join(", ")),this.buf.push(" ",o,'="',dr(s),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(e){var t=e.nodeName.toLowerCase();ar.hasOwnProperty(t)&&!tr.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}},{key:"chars",value:function(e){this.buf.push(dr(e))}},{key:"checkClobberedElement",value:function(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: ".concat(e.outerHTML));return t}}]),e}(),hr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,fr=/([^\#-~ |!])/g;function dr(e){return e.replace(/&/g,"&amp;").replace(hr,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(fr,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function pr(e,t){var n=null;try{er=er||function(e){var t=new Wn(e);return function(){try{return!!(new window.DOMParser).parseFromString(Nn(""),"text/html")}catch(e){return!1}}()?new Kn(t):t}(e);var r=t?String(t):"";n=er.getInertBodyElement(r);var i=5,a=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=a,a=n.innerHTML,n=er.getInertBodyElement(r)}while(r!==a);return Nn((new lr).sanitizeChildren(vr(n)||n))}finally{if(n)for(var o=vr(n)||n;o.firstChild;)o.removeChild(o.firstChild)}}function vr(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var gr=((gr=gr||{})[gr.NONE=0]="NONE",gr[gr.HTML=1]="HTML",gr[gr.STYLE=2]="STYLE",gr[gr.SCRIPT=3]="SCRIPT",gr[gr.URL=4]="URL",gr[gr.RESOURCE_URL=5]="RESOURCE_URL",gr);function mr(e){var t,n=(t=Qe())&&t[12];return n?n.sanitize(gr.URL,e)||"":Zn(e,"URL")?Vn(e):Qn(O(e))}function yr(e,t){e.__ngContext__=t}function kr(e){var t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function br(e){return e.ngOriginalError}function wr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.error.apply(e,n)}var _r=function(){function e(){v(this,e),this._console=console}return p(e,[{key:"handleError",value:function(e){var t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e&&e.ngErrorLogger||wr}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(e){return e?function(e){return e.ngDebugContext}(e)||this._findContext(br(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=e&&br(e);t&&br(t);)t=br(t);return t||null}}]),e}(),xr=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ee);function Tr(e){return e.ownerDocument}function Sr(e){return e instanceof Function?e():e}var Ir=((Ir=Ir||{})[Ir.Important=1]="Important",Ir[Ir.DashCase=2]="DashCase",Ir);function Er(e,t){return(void 0)(e,t)}function Cr(e){var t=e[3];return xe(t)?t[3]:t}function Rr(e){return Or(e[13])}function Ar(e){return Or(e[4])}function Or(e){for(;null!==e&&!xe(e);)e=e[4];return e}function Nr(e,t,n,r,i){if(null!=r){var a,o=!1;xe(r)?a=r:_e(r)&&(o=!0,r=r[0]);var u=Ve(r);0===e&&null!==n?null==i?Vr(t,n,u):Fr(t,n,u,i||null,!0):1===e&&null!==n?Fr(t,n,u,i||null,!0):2===e?function(e,t,n){var r=qr(e,t);r&&function(e,t,n,r){Ue(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,u,o):3===e&&t.destroyNode(u),null!=a&&function(e,t,n,r,i){var a=n[7];a!==Ve(n)&&Nr(t,e,r,a,i);for(var o=10;o<n.length;o++){var u=n[o];Kr(u[1],u,e,t,r,a)}}(t,e,a,n,i)}}function Pr(e,t,n){return Ue(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Dr(e,t){var n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,We(i,-1)),n.splice(r,1)}function Lr(e,t){if(!(e.length<=10)){var n,r=10+t,i=e[r];if(i){var a=i[17];null!==a&&a!==e&&Dr(a,i),t>0&&(e[r-1][4]=i[4]);var o=vn(e,10+t);Kr(i[1],n=i,n[11],2,null,null),n[0]=null,n[6]=null;var u=o[19];null!==u&&u.detachView(o[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}}function Mr(e,t){if(!(256&t[2])){var n=t[11];Ue(n)&&n.destroyNode&&Kr(e,t,n,3,null,null),function(e){var t=e[13];if(!t)return Ur(e[1],e);for(;t;){var n=null;if(_e(t))n=t[13];else{var r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)_e(t)&&Ur(t[1],t),t=t[3];null===t&&(t=e),_e(t)&&Ur(t[1],t),n=t&&t[4]}t=n}}(t)}}function Ur(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){var n;if(null!=e&&null!=(n=e.destroyHooks))for(var r=0;r<n.length;r+=2){var i=t[n[r]];if(!(i instanceof At)){var a=n[r+1];if(Array.isArray(a))for(var o=0;o<a.length;o+=2){var u=i[a[o]],s=a[o+1];try{s.call(u)}finally{}}else try{a.call(i)}finally{}}}}(e,t),function(e,t){var n=e.cleanup,r=t[7],i=-1;if(null!==n)for(var a=0;a<n.length-1;a+=2)if("string"==typeof n[a]){var o=n[a+1],u="function"==typeof o?o(t):Ve(t[o]),s=r[i=n[a+2]],c=n[a+3];"boolean"==typeof c?u.removeEventListener(n[a],s,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),a+=2}else{var l=r[i=n[a+1]];n[a].call(l)}if(null!==r){for(var h=i+1;h<r.length;h++)(0,r[h])();t[7]=null}}(e,t),1===t[1].type&&Ue(t[11])&&t[11].destroy();var n=t[17];if(null!==n&&xe(t[3])){n!==t[3]&&Dr(n,t);var r=t[19];null!==r&&r.detachView(e)}}}function Fr(e,t,n,r,i){Ue(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function Vr(e,t,n){Ue(e)?e.appendChild(t,n):t.appendChild(n)}function Zr(e,t,n,r,i){null!==r?Fr(e,t,n,r,i):Vr(e,t,n)}function qr(e,t){return Ue(e)?e.parentNode(t):t.parentNode}function jr(e,t,n,r){var i=function(e,t,n){return function(e,t,n){for(var r=t;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){var i=e.data[r.directiveStart].encapsulation;if(i===J.None||i===J.Emulated)return null}return qe(r,n)}(e,t.parent,n)}(e,r,t),a=t[11],o=function(e,t,n){return function(e,t,n){return 40&e.type?qe(e,n):null}(e,0,n)}(r.parent||t[6],0,t);if(null!=i)if(Array.isArray(n))for(var u=0;u<n.length;u++)Zr(a,i,n[u],o,!1);else Zr(a,i,n,o,!1)}function Br(e,t){if(null!==t){var n=t.type;if(3&n)return qe(t,e);if(4&n)return Hr(-1,e[t.index]);if(8&n){var r=t.child;if(null!==r)return Br(e,r);var i=e[t.index];return xe(i)?Hr(-1,i):Ve(i)}if(32&n)return Er(t,e)()||Ve(e[t.index]);var a=zr(e,t);return null!==a?Array.isArray(a)?a[0]:Br(Cr(e[16]),a):Br(e,t.next)}return null}function zr(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Hr(e,t){var n=10+e+1;if(n<t.length){var r=t[n],i=r[1].firstChild;if(null!==i)return Br(r,i)}return t[7]}function Gr(e,t,n,r,i,a,o){for(;null!=n;){var u=r[n.index],s=n.type;if(o&&0===t&&(u&&yr(Ve(u),r),n.flags|=4),64!=(64&n.flags))if(8&s)Gr(e,t,n.child,r,i,a,!1),Nr(t,e,i,u,a);else if(32&s){for(var c=Er(n,r),l=void 0;l=c();)Nr(t,e,i,l,a);Nr(t,e,i,u,a)}else 16&s?Wr(e,t,r,n,i,a):Nr(t,e,i,u,a);n=o?n.projectionNext:n.next}}function Kr(e,t,n,r,i,a){Gr(n,r,e.firstChild,t,i,a,!1)}function Wr(e,t,n,r,i,a){var o=n[16],u=o[6].projection[r.projection];if(Array.isArray(u))for(var s=0;s<u.length;s++)Nr(t,e,i,u[s],a);else Gr(e,t,u,o[3],i,a,!0)}function Jr(e,t,n){Ue(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function Yr(e,t,n){Ue(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function Qr(e,t,n){for(var r=e.length;;){var i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){var a=t.length;if(i+a===r||e.charCodeAt(i+a)<=32)return i}n=i+1}}function $r(e,t,n){for(var r=0;r<e.length;){var i=e[r++];if(n&&"class"===i){if(-1!==Qr((i=e[r]).toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function Xr(e){return 4===e.type&&"ng-template"!==e.value}function ei(e,t,n){return t===(4!==e.type||n?e.value:"ng-template")}function ti(e,t,n){for(var r=4,i=e.attrs||[],a=function(e){for(var t=0;t<e.length;t++)if(Nt(e[t]))return t;return e.length}(i),o=!1,u=0;u<t.length;u++){var s=t[u];if("number"!=typeof s){if(!o)if(4&r){if(r=2|1&r,""!==s&&!ei(e,s,n)||""===s&&1===t.length){if(ni(r))return!1;o=!0}}else{var c=8&r?s:t[++u];if(8&r&&null!==e.attrs){if(!$r(e.attrs,c,n)){if(ni(r))return!1;o=!0}continue}var l=ri(8&r?"class":s,i,Xr(e),n);if(-1===l){if(ni(r))return!1;o=!0;continue}if(""!==c){var h;h=l>a?"":i[l+1].toLowerCase();var f=8&r?h:null;if(f&&-1!==Qr(f,c,0)||2&r&&c!==h){if(ni(r))return!1;o=!0}}}}else{if(!o&&!ni(r)&&!ni(s))return!1;if(o&&ni(s))continue;o=!1,r=s|1&r}}return ni(r)||o}function ni(e){return 0==(1&e)}function ri(e,t,n,r){if(null===t)return-1;var i=0;if(r||!n){for(var a=!1;i<t.length;){var o=t[i];if(o===e)return i;if(3===o||6===o)a=!0;else{if(1===o||2===o){for(var u=t[++i];"string"==typeof u;)u=t[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=a?1:2}return-1}return function(e,t){var n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){var r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function ii(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<t.length;r++)if(ti(e,t[r],n))return!0;return!1}function ai(e,t){return e?":not("+t.trim()+")":t}function oi(e){for(var t=e[0],n=1,r=2,i="",a=!1;n<e.length;){var o=e[n];if("string"==typeof o)if(2&r){var u=e[++n];i+="["+o+(u.length>0?'="'+u+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||ni(o)||(t+=ai(a,i),i=""),r=o,a=a||!ni(r);n++}return""!==i&&(t+=ai(a,i)),t}var ui={};function si(e){ci($e(),Qe(),wt()+e,at())}function ci(e,t,n,r){if(!r)if(3==(3&t[2])){var i=e.preOrderCheckHooks;null!==i&&St(t,i,n)}else{var a=e.preOrderHooks;null!==a&&It(t,a,0,n)}_t(n)}function li(e,t){return e<<17|t<<2}function hi(e){return e>>17&32767}function fi(e){return 2|e}function di(e){return(131068&e)>>2}function pi(e,t){return-131069&e|t<<2}function vi(e){return 1|e}function gi(e,t){var n=e.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1];if(-1!==a){var o=e.data[a];ft(i),o.contentQueries(2,t[a],a)}}}function mi(e,t,n,r,i,a,o,u,s,c){var l=t.blueprint.slice();return l[0]=i,l[2]=140|r,Ke(l),l[3]=l[15]=e,l[8]=n,l[10]=o||e&&e[10],l[11]=u||e&&e[11],l[12]=s||e&&e[12]||null,l[9]=c||e&&e[9]||null,l[6]=a,l[16]=2==t.type?e[16]:l,l}function yi(e,t,n,r,i){var a,o,u=e.data[t];if(null===u)u=function(e,t,n,r,i){var a=tt(),o=rt(),u=e.data[t]=function(e,t,n,r,i,a){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?a:a&&a.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=u),null!==a&&(o?null==a.child&&null!==u.parent&&(a.child=u):null===a.next&&(a.next=u)),u}(e,t,n,r,i),Je.lFrame.inI18n&&(u.flags|=64);else if(64&u.type){u.type=n,u.value=r,u.attrs=i;var s=(a=Je.lFrame,o=a.currentTNode,a.isParent?o:o.parent);u.injectorIndex=null===s?-1:s.injectorIndex}return nt(u,!0),u}function ki(e,t,n,r){if(0===n)return-1;for(var i=t.length,a=0;a<n;a++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function bi(e,t,n){vt(t);try{var r=e.viewQuery;null!==r&&Yi(1,r,n);var i=e.template;null!==i&&xi(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&gi(e,t),e.staticViewQueries&&Yi(2,e.viewQuery,n);var a=e.components;null!==a&&function(e,t){for(var n=0;n<t.length;n++)Hi(e,t[n])}(t,a)}catch(o){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),o}finally{t[2]&=-5,bt()}}function wi(e,t,n,r){var i=t[2];if(256!=(256&i)){vt(t);var a=at();try{Ke(t),Je.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&xi(e,t,n,2,r);var o=3==(3&i);if(!a)if(o){var u=e.preOrderCheckHooks;null!==u&&St(t,u,null)}else{var s=e.preOrderHooks;null!==s&&It(t,s,0,null),Et(t,0)}if(function(e){for(var t=Rr(e);null!==t;t=Ar(t))if(t[2])for(var n=t[9],r=0;r<n.length;r++){var i=n[r],a=i[3];0==(1024&i[2])&&We(a,1),i[2]|=1024}}(t),function(e){for(var t=Rr(e);null!==t;t=Ar(t))for(var n=10;n<t.length;n++){var r=t[n],i=r[1];He(r)&&wi(i,r,i.template,r[8])}}(t),null!==e.contentQueries&&gi(e,t),!a)if(o){var c=e.contentCheckHooks;null!==c&&St(t,c)}else{var l=e.contentHooks;null!==l&&It(t,l,1),Et(t,1)}!function(e,t){var n,r,i,a=e.hostBindingOpCodes;if(null!==a)try{for(var o=0;o<a.length;o++){var u=a[o];if(u<0)_t(~u);else{var s=u,c=a[++o],l=a[++o];n=c,r=s,i=void 0,(i=Je.lFrame).bindingIndex=i.bindingRootIndex=n,lt(r),l(2,t[s])}}}finally{_t(-1)}}(e,t);var h=e.components;null!==h&&function(e,t){for(var n=0;n<t.length;n++)Bi(e,t[n])}(t,h);var f=e.viewQuery;if(null!==f&&Yi(2,f,r),!a)if(o){var d=e.viewCheckHooks;null!==d&&St(t,d)}else{var p=e.viewHooks;null!==p&&It(t,p,2),Et(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),a||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,We(t[3],-1))}finally{bt()}}}function _i(e,t,n,r){var i=t[10],a=!at(),o=ze(t);try{a&&!o&&i.begin&&i.begin(),o&&bi(e,t,r),wi(e,t,n,r)}finally{a&&!o&&i.end&&i.end()}}function xi(e,t,n,r,i){var a=wt(),o=2&r;try{_t(-1),o&&t.length>20&&ci(e,t,20,at()),n(r,i)}finally{_t(a)}}function Ti(e,t,n){if(Te(t))for(var r=t.directiveEnd,i=t.directiveStart;i<r;i++){var a=e.data[i];a.contentQueries&&a.contentQueries(1,n[i],i)}}function Si(e,t,n){Ye()&&(function(e,t,n,r){var i=n.directiveStart,a=n.directiveEnd;e.firstCreatePass||jt(n,t),yr(r,t);for(var o=n.initialInputs,u=i;u<a;u++){var s=e.data[u],c=Ee(s);c&&Vi(t,n,s);var l=en(t,e,u,n);yr(l,t),null!==o&&Zi(0,u-i,l,s,0,o),c&&(Be(n.index,t)[8]=l)}}(e,t,n,qe(n,t)),128==(128&n.flags)&&function(e,t,n){var r=n.directiveStart,i=n.directiveEnd,a=n.index,o=Je.lFrame.currentDirectiveIndex;try{_t(a);for(var u=r;u<i;u++){var s=e.data[u],c=t[u];lt(u),null===s.hostBindings&&0===s.hostVars&&null===s.hostAttrs||Di(s,c)}}finally{_t(-1),lt(o)}}(e,t,n))}function Ii(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qe,r=t.localNames;if(null!==r)for(var i=t.index+1,a=0;a<r.length;a+=2){var o=r[a+1],u=-1===o?n(t,e):e[o];e[i++]=u}}function Ei(e){var t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Ci(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Ci(e,t,n,r,i,a,o,u,s,c){var l=20+r,h=l+i,f=function(e,t){for(var n=[],r=0;r<t;r++)n.push(r<e?null:ui);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:e,blueprint:f,template:n,queries:null,viewQuery:u,declTNode:t,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:s,consts:d,incompleteFirstPass:!1}}function Ri(e,t,n,r){var i=$i(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&Xi(e).push(r,i.length-1))}function Ai(e,t,n){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Oi(e,t,n,r,i,a,o,u){var s,c,l=qe(t,n),h=t.inputs;!u&&null!=h&&(s=h[r])?(ta(e,n,s,r,i),Se(t)&&function(e,t){var n=Be(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r="class"===(c=r)?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c,i=null!=o?o(i,t.value||"",r):i,Ue(a)?a.setProperty(l,r,i):Pt(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function Ni(e,t,n,r){var i=!1;if(Ye()){var a=function(e,t,n){var r=e.directiveRegistry,i=null;if(r)for(var a=0;a<r.length;a++){var o=r[a];ii(n,o.selectors,!1)&&(i||(i=[]),Gt(jt(n,t),e,o.type),Ee(o)?(Li(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==a){i=!0,Ui(n,e.data.length,a.length);for(var u=0;u<a.length;u++){var s=a[u];s.providersResolver&&s.providersResolver(s)}for(var c=!1,l=!1,h=ki(e,t,a.length,null),f=0;f<a.length;f++){var d=a[f];n.mergedAttrs=Dt(n.mergedAttrs,d.hostAttrs),Fi(e,n,t,h,d),Mi(h,d,o),null!==d.contentQueries&&(n.flags|=8),null===d.hostBindings&&null===d.hostAttrs&&0===d.hostVars||(n.flags|=128);var p=d.type.prototype;!c&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),c=!0),l||!p.ngOnChanges&&!p.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),l=!0),h++}!function(e,t){for(var n=t.directiveEnd,r=e.data,i=t.attrs,a=[],o=null,u=null,s=t.directiveStart;s<n;s++){var c=r[s],l=c.inputs,h=null===i||Xr(t)?null:qi(l,i);a.push(h),o=Ai(l,s,o),u=Ai(c.outputs,s,u)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=a,t.inputs=o,t.outputs=u}(e,n)}o&&function(e,t,n){if(t)for(var r=e.localNames=[],i=0;i<t.length;i+=2){var a=n[t[i+1]];if(null==a)throw new A("301","Export of name '".concat(t[i+1],"' not found!"));r.push(t[i],a)}}(n,r,o)}return n.mergedAttrs=Dt(n.mergedAttrs,n.attrs),i}function Pi(e,t,n,r,i,a){var o=a.hostBindings;if(o){var u=e.hostBindingOpCodes;null===u&&(u=e.hostBindingOpCodes=[]);var s=~t.index;(function(e){for(var t=e.length;t>0;){var n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(u)!=s&&u.push(s),u.push(r,i,o)}}function Di(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Li(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Mi(e,t,n){if(n){if(t.exportAs)for(var r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Ee(t)&&(n[""]=e)}}function Ui(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Fi(e,t,n,r,i){e.data[r]=i;var a=i.factory||(i.factory=Ce(i.type)),o=new At(a,Ee(i),null);e.blueprint[r]=o,n[r]=o,Pi(e,t,0,r,ki(e,n,i.hostVars,ui),i)}function Vi(e,t,n){var r=qe(t,e),i=Ei(n),a=e[10],o=Gi(e,mi(e,i,null,n.onPush?64:16,r,t,a,a.createRenderer(r,n),null,null));e[t.index]=o}function Zi(e,t,n,r,i,a){var o=a[t];if(null!==o)for(var u=r.setInput,s=0;s<o.length;){var c=o[s++],l=o[s++],h=o[s++];null!==u?r.setInput(n,h,c,l):n[l]=h}}function qi(e,t){for(var n=null,r=0;r<t.length;){var i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function ji(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function Bi(e,t){var n=Be(t,e);if(He(n)){var r=n[1];80&n[2]?wi(r,n,r.template,n[8]):n[5]>0&&zi(n)}}function zi(e){for(var t=Rr(e);null!==t;t=Ar(t))for(var n=10;n<t.length;n++){var r=t[n];if(1024&r[2]){var i=r[1];wi(i,r,i.template,r[8])}else r[5]>0&&zi(r)}var a=e[1].components;if(null!==a)for(var o=0;o<a.length;o++){var u=Be(a[o],e);He(u)&&u[5]>0&&zi(u)}}function Hi(e,t){var n=Be(t,e),r=n[1];!function(e,t){for(var n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),bi(r,n,n[8])}function Gi(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Ki(e){for(;e;){e[2]|=64;var t=Cr(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function Wi(e,t,n){var r=t[10];r.begin&&r.begin();try{wi(e,t,e.template,n)}catch(i){throw ea(t,i),i}finally{r.end&&r.end()}}function Ji(e){!function(e){for(var t=0;t<e.components.length;t++){var n=e.components[t],r=kr(n),i=r[1];_i(i,r,i.template,n)}}(e[8])}function Yi(e,t,n){ft(0),t(e,n)}var Qi=Promise.resolve(null);function $i(e){return e[7]||(e[7]=[])}function Xi(e){return e.cleanup||(e.cleanup=[])}function ea(e,t){var n=e[9],r=n?n.get(_r,null):null;r&&r.handleError(t)}function ta(e,t,n,r,i){for(var a=0;a<n.length;){var o=n[a++],u=n[a++],s=t[o],c=e.data[o];null!==c.setInput?c.setInput(s,i,r,u):s[u]=i}}function na(e,t,n){var r=n?e.styles:null,i=n?e.classes:null,a=0;if(null!==t)for(var o=0;o<t.length;o++){var u=t[o];"number"==typeof u?a=u:1==a?i=S(i,u):2==a&&(r=S(r,u+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var ra,ia=new cn("INJECTOR",-1),aa=function(){function e(){v(this,e)}return p(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bn;if(t===bn){var n=new Error("NullInjectorError: No provider for ".concat(x(e),"!"));throw n.name="NullInjectorError",n}return t}}]),e}(),oa=new cn("Set Injector scope."),ua={},sa={};function ca(){return void 0===ra&&(ra=new aa),ra}function la(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new ha(e,n,t||ca(),r)}var ha=function(){function e(t,n,r){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;v(this,e),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var o=[];n&&dn(n,function(e){return i.processProvider(e,t,n)}),dn([t],function(e){return i.processInjectorType(e,[],o)}),this.records.set(ia,pa(void 0,this));var u=this.records.get(oa);this.scope=null!=u?u.value:null,this.source=a||("object"==typeof t?null:x(t))}return p(e,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(function(e){return e.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bn,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:z.Default;this.assertNotDestroyed();var r,i=xn(this),a=H(void 0);try{if(!(n&z.SkipSelf)){var o=this.records.get(e);if(void 0===o){var u=("function"==typeof(r=e)||"object"==typeof r&&r instanceof cn)&&M(e);o=u&&this.injectableDefInScope(u)?pa(fa(e),ua):null,this.records.set(e,o)}if(null!=o)return this.hydrate(e,o)}return(n&z.Self?ca():this.parent).get(e,t=n&z.Optional&&t===bn?null:t)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(x(e)),i)throw s;return function(e,t,n,r){var i=e.ngTempTokenPath;throw t.__source&&i.unshift(t.__source),e.message=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;var i=x(t);if(Array.isArray(t))i=t.map(x).join(" -> ");else if("object"==typeof t){var a=[];for(var o in t)if(t.hasOwnProperty(o)){var u=t[o];a.push(o+":"+("string"==typeof u?JSON.stringify(u):x(u)))}i="{".concat(a.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(e.replace(wn,"\n  "))}("\n"+e.message,i,"R3InjectorError",r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(s,e,0,this.source)}throw s}finally{H(a),xn(i)}}},{key:"_resolveInjectorDefTypes",value:function(){var e=this;this.injectorDefTypes.forEach(function(t){return e.get(t)})}},{key:"toString",value:function(){var e=[];return this.records.forEach(function(t,n){return e.push(x(n))}),"R3Injector[".concat(e.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(e,t,n){var r=this;if(!(e=C(e)))return!1;var i=F(e),a=null==i&&e.ngModule||void 0,o=void 0===a?e:a,u=-1!==n.indexOf(o);if(void 0!==a&&(i=F(a)),null==i)return!1;if(null!=i.imports&&!u){var s;n.push(o);try{dn(i.imports,function(e){r.processInjectorType(e,t,n)&&(void 0===s&&(s=[]),s.push(e))})}finally{}if(void 0!==s)for(var c=function(e){var t=s[e],n=t.ngModule,i=t.providers;dn(i,function(e){return r.processProvider(e,n,i||ne)})},l=0;l<s.length;l++)c(l)}this.injectorDefTypes.add(o);var h=Ce(o)||function(){return new o};this.records.set(o,pa(h,ua));var f=i.providers;if(null!=f&&!u){var d=e;dn(f,function(e){return r.processProvider(e,d,f)})}return void 0!==a&&void 0!==e.providers}},{key:"processProvider",value:function(e,t,n){var r=ga(e=C(e))?e:C(e&&e.provide),i=function(e,t,n){return va(e)?pa(void 0,e.useValue):pa(da(e),ua)}(e);if(ga(e)||!0!==e.multi)this.records.get(r);else{var a=this.records.get(r);a||((a=pa(void 0,ua,!0)).factory=function(){return In(a.multi)},this.records.set(r,a)),r=e,a.multi.push(e)}this.records.set(r,i)}},{key:"hydrate",value:function(e,t){var n;return t.value===ua&&(t.value=sa,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}},{key:"injectableDefInScope",value:function(e){if(!e.providedIn)return!1;var t=C(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}]),e}();function fa(e){var t=M(e),n=null!==t?t.factory:Ce(e);if(null!==n)return n;if(e instanceof cn)throw new Error("Token ".concat(x(e)," is missing a \u0275prov definition."));if(e instanceof Function)return function(e){var t=e.length;if(t>0){var n=function(e,t){for(var n=[],r=0;r<e;r++)n.push("?");return n}(t);throw new Error("Can't resolve all parameters for ".concat(x(e),": (").concat(n.join(", "),")."))}var r=function(e){var t=e&&(e[Z]||e[j]);if(t){var n=function(e){if(e.hasOwnProperty("name"))return e.name;var t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "').concat(n,'" class.')),t}return null}(e);return null!==r?function(){return r.factory(e)}:function(){return new e}}(e);throw new Error("unreachable")}function da(e,t,n){var r,i;if(ga(e)){var a=C(e);return Ce(a)||fa(a)}if(va(e))r=function(){return C(e.useValue)};else if((i=e)&&i.useFactory)r=function(){return e.useFactory.apply(e,s(In(e.deps||[])))};else if(function(e){return!(!e||!e.useExisting)}(e))r=function(){return Sn(C(e.useExisting))};else{var o=C(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return Ce(o)||fa(o);r=function(){return w(o,s(In(e.deps)))}}return r}function pa(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:e,value:t,multi:n?[]:void 0}}function va(e){return null!==e&&"object"==typeof e&&_n in e}function ga(e){return"function"==typeof e}var ma=function(e,t,n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=la(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)},ya=function(){function e(){v(this,e)}return p(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?ma(e,t,""):ma(e.providers,e.parent,e.name||"")}}]),e}();function ka(e,t){Tt(kr(e)[1],et())}function ba(e){for(var t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0,r=[e];t;){var i=void 0;if(Ee(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);var a=e;a.inputs=wa(e.inputs),a.declaredInputs=wa(e.declaredInputs),a.outputs=wa(e.outputs);var o=i.hostBindings;o&&Ta(e,o);var u=i.viewQuery,s=i.contentQueries;if(u&&_a(e,u),s&&xa(e,s),_(e.inputs,i.inputs),_(e.declaredInputs,i.declaredInputs),_(e.outputs,i.outputs),Ee(i)&&i.data.animation){var c=e.data;c.animation=(c.animation||[]).concat(i.data.animation)}}var l=i.features;if(l)for(var h=0;h<l.length;h++){var f=l[h];f&&f.ngInherit&&f(e),f===ba&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){for(var t=0,n=null,r=e.length-1;r>=0;r--){var i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Dt(i.hostAttrs,n=Dt(n,i.hostAttrs))}}(r)}function wa(e){return e===te?{}:e===ne?[]:e}function _a(e,t){var n=e.viewQuery;e.viewQuery=n?function(e,r){t(e,r),n(e,r)}:t}function xa(e,t){var n=e.contentQueries;e.contentQueries=n?function(e,r,i){t(e,r,i),n(e,r,i)}:t}function Ta(e,t){var n=e.hostBindings;e.hostBindings=n?function(e,r){t(e,r),n(e,r)}:t}ya.THROW_IF_NOT_FOUND=bn,ya.NULL=new aa,ya.\u0275prov=D({token:ya,providedIn:"any",factory:function(){return Sn(ia)}}),ya.__NG_ELEMENT_ID__=-1;var Sa=null;function Ia(){if(!Sa){var e=ee.Symbol;if(e&&e.iterator)Sa=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Sa=r)}}return Sa}var Ea=function(){function e(t){v(this,e),this.wrapped=t}return p(e,null,[{key:"wrap",value:function(t){return new e(t)}},{key:"unwrap",value:function(t){return e.isWrapped(t)?t.wrapped:t}},{key:"isWrapped",value:function(t){return t instanceof e}}]),e}();function Ca(e){return!!Ra(e)&&(Array.isArray(e)||!(e instanceof Map)&&Ia()in e)}function Ra(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Aa(e,t,n){return e[t]=n}function Oa(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Na(e,t,n,r){var i=Qe();return Oa(i,st(),t)&&($e(),function(e,t,n,r,i,a){var o=qe(e,t);!function(e,t,n,r,i,a,o){if(null==a)Ue(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{var u=null==o?O(a):o(a,r||"",i);Ue(e)?e.setAttribute(t,i,u,n):n?t.setAttributeNS(n,i,u):t.setAttribute(i,u)}}(t[11],o,a,e.value,n,r,i)}(xt(),i,e,t,n,r)),Na}function Pa(e,t,n,r){return Oa(e,st(),n)?t+O(n)+r:ui}function Da(e,t,n,r,i,a,o,u){var s=Qe(),c=$e(),l=e+20,h=c.firstCreatePass?function(e,t,n,r,i,a,o,u,s){var c=t.consts,l=yi(t,e,4,o||null,Ge(c,u));Ni(t,n,l,Ge(c,s)),Tt(t,l);var h=l.tViews=Ci(2,l,r,i,a,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,l),h.queries=t.queries.embeddedTView(l)),l}(l,c,s,t,n,r,i,a,o):c.data[l];nt(h,!1);var f=s[11].createComment("");jr(c,s,f,h),yr(f,s),Gi(s,s[l]=ji(f,s,f,h)),Ie(h)&&Si(c,s,h),null!=o&&Ii(s,h,u)}function La(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.Default,n=Qe();return null===n?Sn(e,t):Jt(et(),n,C(e),t)}function Ma(e,t,n){var r=Qe();return Oa(r,st(),t)&&Oi($e(),xt(),r,e,t,r[11],n,!1),Ma}function Ua(e,t,n,r,i){var a=i?"class":"style";ta(e,n,t.inputs[a],a,r)}function Fa(e,t,n,r){var i=Qe(),a=$e(),o=20+e,u=i[11],s=i[o]=Pr(u,t,Je.lFrame.currentNamespace),c=a.firstCreatePass?function(e,t,n,r,i,a,o){var u=t.consts,s=yi(t,e,2,i,Ge(u,a));return Ni(t,n,s,Ge(u,o)),null!==s.attrs&&na(s,s.attrs,!1),null!==s.mergedAttrs&&na(s,s.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,s),s}(o,a,i,0,t,n,r):a.data[o];nt(c,!0);var l=c.mergedAttrs;null!==l&&Ot(u,s,l);var h=c.classes;null!==h&&Yr(u,s,h);var f=c.styles;null!==f&&Jr(u,s,f),64!=(64&c.flags)&&jr(a,i,s,c),0===Je.lFrame.elementDepthCount&&yr(s,i),Je.lFrame.elementDepthCount++,Ie(c)&&(Si(a,i,c),Ti(a,c,i)),null!==r&&Ii(i,c)}function Va(){var e=et();rt()?it():nt(e=e.parent,!1);var t=e;Je.lFrame.elementDepthCount--;var n=$e();n.firstCreatePass&&(Tt(n,e),Te(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Ua(n,t,Qe(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Ua(n,t,Qe(),t.stylesWithoutHost,!1)}function Za(e,t,n,r){Fa(e,t,n,r),Va()}function qa(e,t,n){var r=Qe(),i=$e(),a=e+20,o=i.firstCreatePass?function(e,t,n,r,i){var a=t.consts,o=Ge(a,r),u=yi(t,e,8,"ng-container",o);return null!==o&&na(u,o,!0),Ni(t,n,u,Ge(a,i)),null!==t.queries&&t.queries.elementStart(t,u),u}(a,i,r,t,n):i.data[a];nt(o,!0);var u=r[a]=r[11].createComment("");jr(i,r,u,o),yr(u,r),Ie(o)&&(Si(i,r,o),Ti(i,o,r)),null!=n&&Ii(r,o)}function ja(){var e=et(),t=$e();rt()?it():nt(e=e.parent,!1),t.firstCreatePass&&(Tt(t,e),Te(e)&&t.queries.elementEnd(e))}function Ba(){return Qe()}function za(e){return!!e&&"function"==typeof e.then}function Ha(e){return!!e&&"function"==typeof e.subscribe}var Ga=Ha;function Ka(e,t,n,r){var i=Qe(),a=$e(),o=et();return function(e,t,n,r,i,a,o,u){var s=Ie(r),c=e.firstCreatePass&&Xi(e),l=$i(t),h=!0;if(3&r.type||u){var f=qe(r,t),d=u?u(f):f,p=l.length,v=u?function(e){return u(Ve(e[r.index]))}:r.index;if(Ue(n)){var g=null;if(!u&&s&&(g=function(e,t,n,r){var i=e.cleanup;if(null!=i)for(var a=0;a<i.length-1;a+=2){var o=i[a];if(o===n&&i[a+1]===r){var u=t[7],s=i[a+2];return u.length>s?u[s]:null}"string"==typeof o&&(a+=2)}return null}(e,t,i,r.index)),null!==g)(g.__ngLastListenerFn__||g).__ngNextListenerFn__=a,g.__ngLastListenerFn__=a,h=!1;else{a=Ja(r,t,0,a,!1);var m=n.listen(d,i,a);l.push(a,m),c&&c.push(i,v,p,p+1)}}else a=Ja(r,t,0,a,!0),d.addEventListener(i,a,o),l.push(a),c&&c.push(i,v,p,o)}else a=Ja(r,t,0,a,!1);var y,k=r.outputs;if(h&&null!==k&&(y=k[i])){var b=y.length;if(b)for(var w=0;w<b;w+=2){var _=t[y[w]][y[w+1]].subscribe(a),x=l.length;l.push(a,_),c&&c.push(i,r.index,x,-(x+1))}}}(a,i,i[11],o,e,t,!!n,r),Ka}function Wa(e,t,n,r){try{return!1!==n(r)}catch(i){return ea(e,i),!1}}function Ja(e,t,n,r,i){return function n(a){if(a===Function)return r;var o=2&e.flags?Be(e.index,t):t;0==(32&t[2])&&Ki(o);for(var u=Wa(t,0,r,a),s=n.__ngNextListenerFn__;s;)u=Wa(t,0,s,a)&&u,s=s.__ngNextListenerFn__;return i&&!1===u&&(a.preventDefault(),a.returnValue=!1),u}}function Ya(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(e){return(Je.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,Je.lFrame.contextLView))[8]}(e)}function Qa(e,t,n){return $a(e,"",t,"",n),Qa}function $a(e,t,n,r,i){var a=Qe(),o=Pa(a,t,n,r);return o!==ui&&Oi($e(),xt(),a,e,o,a[11],i,!1),$a}function Xa(e,t,n,r,i){for(var a=e[n+1],o=null===t,u=r?hi(a):di(a),s=!1;0!==u&&(!1===s||o);){var c=e[u+1];eo(e[u],t)&&(s=!0,e[u+1]=r?vi(c):fi(c)),u=r?hi(c):di(c)}s&&(e[n+1]=r?fi(a):vi(a))}function eo(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&yn(e,t)>=0}var to={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function no(e){return e.substring(to.key,to.keyEnd)}function ro(e){return e.substring(to.value,to.valueEnd)}function io(e,t){var n=to.textEnd;return n===t?-1:(t=to.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,to.key=t,n),uo(e,t,n))}function ao(e,t){var n=to.textEnd,r=to.key=uo(e,t,n);return n===r?-1:(r=to.keyEnd=function(e,t,n){for(var r;t<n&&(45===(r=e.charCodeAt(t))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)t++;return t}(e,r,n),r=so(e,r,n),r=to.value=uo(e,r,n),r=to.valueEnd=function(e,t,n){for(var r=-1,i=-1,a=-1,o=t,u=o;o<n;){var s=e.charCodeAt(o++);if(59===s)return u;34===s||39===s?u=o=co(e,s,o,n):t===o-4&&85===a&&82===i&&76===r&&40===s?u=o=co(e,41,o,n):s>32&&(u=o),a=i,i=r,r=-33&s}return u}(e,r,n),so(e,r,n))}function oo(e){to.key=0,to.keyEnd=0,to.value=0,to.valueEnd=0,to.textEnd=e.length}function uo(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function so(e,t,n,r){return(t=uo(e,t,n))<n&&t++,t}function co(e,t,n,r){for(var i=-1,a=n;a<r;){var o=e.charCodeAt(a++);if(o==t&&92!==i)return a;i=92==o&&92===i?0:o}throw new Error}function lo(e,t){return function(e,t,n,r){var i=Qe(),a=$e(),o=ct(2);a.firstUpdatePass&&mo(a,e,o,!0),t!==ui&&Oa(i,o,t)&&wo(a,a.data[wt()],i,i[11],e,i[o+1]=function(e,t){return null==e||"object"==typeof e&&(e=x(Vn(e))),e}(t),!0,o)}(e,t),lo}function ho(e){vo(bo,fo,e,!1)}function fo(e,t){for(var n=function(e){return oo(e),ao(e,uo(e,0,to.textEnd))}(t);n>=0;n=ao(t,n))bo(e,no(t),ro(t))}function po(e,t){for(var n=function(e){return oo(e),io(e,uo(e,0,to.textEnd))}(t);n>=0;n=io(t,n))gn(e,no(t),!0)}function vo(e,t,n,r){var i=$e(),a=ct(2);i.firstUpdatePass&&mo(i,null,a,r);var o=Qe();if(n!==ui&&Oa(o,a,n)){var u=i.data[wt()];if(To(u,r)&&!go(i,a)){var s=r?u.classesWithoutHost:u.stylesWithoutHost;null!==s&&(n=S(s,n||"")),Ua(i,u,o,n,r)}else!function(e,t,n,r,i,a,o,u){i===ui&&(i=ne);for(var s=0,c=0,l=0<i.length?i[0]:null,h=0<a.length?a[0]:null;null!==l||null!==h;){var f=s<i.length?i[s+1]:void 0,d=c<a.length?a[c+1]:void 0,p=void 0,v=null;l===h?(s+=2,c+=2,f!==d&&(v=h,p=d)):null===h||null!==l&&l<h?(s+=2,v=l):(c+=2,v=h,p=d),null!==v&&wo(e,t,n,r,v,p,o,u),l=s<i.length?i[s]:null,h=c<a.length?a[c]:null}}(i,u,o,o[11],o[a+1],o[a+1]=function(e,t,n){if(null==n||""===n)return ne;var r=[],i=Vn(n);if(Array.isArray(i))for(var a=0;a<i.length;a++)e(r,i[a],!0);else if("object"==typeof i)for(var o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else"string"==typeof i&&t(r,i);return r}(e,t,n),r,a)}}function go(e,t){return t>=e.expandoStartIndex}function mo(e,t,n,r){var i=e.data;if(null===i[n+1]){var a=i[wt()],o=go(e,n);To(a,r)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){var i=function(e){var t=Je.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e),a=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=ko(n=yo(null,e,t,n,r),t.attrs,r),a=null);else{var o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=yo(i,e,t,n,r),null===a){var u=function(e,t,n){var r=n?t.classBindings:t.styleBindings;if(0!==di(r))return e[hi(r)]}(e,t,r);void 0!==u&&Array.isArray(u)&&function(e,t,n,r){e[hi(n?t.classBindings:t.styleBindings)]=r}(e,t,r,u=ko(u=yo(null,e,t,u[1],r),t.attrs,r))}else a=function(e,t,n){for(var r,i=t.directiveEnd,a=1+t.directiveStylingLast;a<i;a++)r=ko(r,e[a].hostAttrs,n);return ko(r,t.attrs,n)}(e,t,r)}return void 0!==a&&(r?t.residualClasses=a:t.residualStyles=a),n}(i,a,t,r),function(e,t,n,r,i,a){var o=a?t.classBindings:t.styleBindings,u=hi(o),s=di(o);e[r]=n;var c,l=!1;if(Array.isArray(n)){var h=n;(null===(c=h[1])||yn(h,c)>0)&&(l=!0)}else c=n;if(i)if(0!==s){var f=hi(e[u+1]);e[r+1]=li(f,u),0!==f&&(e[f+1]=pi(e[f+1],r)),e[u+1]=131071&e[u+1]|r<<17}else e[r+1]=li(u,0),0!==u&&(e[u+1]=pi(e[u+1],r)),u=r;else e[r+1]=li(s,0),0===u?u=r:e[s+1]=pi(e[s+1],r),s=r;l&&(e[r+1]=fi(e[r+1])),Xa(e,c,r,!0),Xa(e,c,r,!1),function(e,t,n,r,i){var a=i?e.residualClasses:e.residualStyles;null!=a&&"string"==typeof t&&yn(a,t)>=0&&(n[r+1]=vi(n[r+1]))}(t,c,e,r,a),o=li(u,s),a?t.classBindings=o:t.styleBindings=o}(i,a,t,n,o,r)}}function yo(e,t,n,r,i){var a=null,o=n.directiveEnd,u=n.directiveStylingLast;for(-1===u?u=n.directiveStart:u++;u<o&&(r=ko(r,(a=t[u]).hostAttrs,i),a!==e);)u++;return null!==e&&(n.directiveStylingLast=u),r}function ko(e,t,n){var r=n?1:2,i=-1;if(null!==t)for(var a=0;a<t.length;a++){var o=t[a];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),gn(e,o,!!n||t[++a]))}return void 0===e?null:e}function bo(e,t,n){gn(e,t,Vn(n))}function wo(e,t,n,r,i,a,o,u){if(3&t.type){var s=e.data,c=s[u+1];xo(1==(1&c)?_o(s,t,n,i,di(c),o):void 0)||(xo(a)||2==(2&c)&&(a=_o(s,null,n,i,u,o)),function(e,t,n,r,i){var a=Ue(e);if(t)i?a?e.addClass(n,r):n.classList.add(r):a?e.removeClass(n,r):n.classList.remove(r);else{var o=-1===r.indexOf("-")?void 0:Ir.DashCase;if(null==i)a?e.removeStyle(n,r,o):n.style.removeProperty(r);else{var u="string"==typeof i&&i.endsWith("!important");u&&(i=i.slice(0,-10),o|=Ir.Important),a?e.setStyle(n,r,i,o):n.style.setProperty(r,i,u?"important":"")}}}(r,o,Ze(wt(),n),i,a))}}function _o(e,t,n,r,i,a){for(var o,u=null===t;i>0;){var s=e[i],c=Array.isArray(s),l=c?s[1]:s,h=null===l,f=n[i+1];f===ui&&(f=h?ne:void 0);var d=h?mn(f,r):l===r?f:void 0;if(c&&!xo(d)&&(d=mn(s,r)),xo(d)&&(o=d,u))return o;var p=e[i+1];i=u?hi(p):di(p)}if(null!==t){var v=a?t.residualClasses:t.residualStyles;null!=v&&(o=mn(v,r))}return o}function xo(e){return void 0!==e}function To(e,t){return 0!=(e.flags&(t?16:32))}function So(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Qe(),r=$e(),i=e+20,a=r.firstCreatePass?yi(r,i,1,t,null):r.data[i],o=n[i]=function(e,t){return Ue(e)?e.createText(t):e.createTextNode(t)}(n[11],t);jr(r,n,o,a),nt(a,!1)}function Io(e){return Eo("",e,""),Io}function Eo(e,t,n){var r=Qe(),i=Pa(r,e,t,n);return i!==ui&&function(e,t,n){var r=Ze(t,e);!function(e,t,n){Ue(e)?e.setValue(t,n):t.textContent=n}(e[11],r,n)}(r,wt(),i),Eo}function Co(e,t,n){vo(gn,po,Pa(Qe(),e,t,n),!0)}function Ro(e,t,n){var r=Qe();return Oa(r,st(),t)&&Oi($e(),xt(),r,e,t,r[11],n,!0),Ro}var Ao=void 0,Oo=["en",[["a","p"],["AM","PM"],Ao],[["AM","PM"],Ao,Ao],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ao,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ao,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ao,"{1} 'at' {0}",Ao],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],No={};function Po(e){var t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e),n=Lo(t);if(n)return n;var r=t.split("-")[0];if(n=Lo(r))return n;if("en"===r)return Oo;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}function Do(e){return Po(e)[Mo.PluralCase]}function Lo(e){return e in No||(No[e]=ee.ng&&ee.ng.common&&ee.ng.common.locales&&ee.ng.common.locales[e]),No[e]}var Mo=((Mo=Mo||{})[Mo.LocaleId=0]="LocaleId",Mo[Mo.DayPeriodsFormat=1]="DayPeriodsFormat",Mo[Mo.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mo[Mo.DaysFormat=3]="DaysFormat",Mo[Mo.DaysStandalone=4]="DaysStandalone",Mo[Mo.MonthsFormat=5]="MonthsFormat",Mo[Mo.MonthsStandalone=6]="MonthsStandalone",Mo[Mo.Eras=7]="Eras",Mo[Mo.FirstDayOfWeek=8]="FirstDayOfWeek",Mo[Mo.WeekendRange=9]="WeekendRange",Mo[Mo.DateFormat=10]="DateFormat",Mo[Mo.TimeFormat=11]="TimeFormat",Mo[Mo.DateTimeFormat=12]="DateTimeFormat",Mo[Mo.NumberSymbols=13]="NumberSymbols",Mo[Mo.NumberFormats=14]="NumberFormats",Mo[Mo.CurrencyCode=15]="CurrencyCode",Mo[Mo.CurrencySymbol=16]="CurrencySymbol",Mo[Mo.CurrencyName=17]="CurrencyName",Mo[Mo.Currencies=18]="Currencies",Mo[Mo.Directionality=19]="Directionality",Mo[Mo.PluralCase=20]="PluralCase",Mo[Mo.ExtraData=21]="ExtraData",Mo);function Uo(e){var t;null==(t=e)&&function(e,t,n,r){throw new Error("ASSERTION ERROR: ".concat("Expected localeId to be defined"," [Expected=> null != ").concat(t," <=Actual]"))}(0,t),"string"==typeof e&&e.toLowerCase().replace(/_/g,"-")}function Fo(e,t,n,r,i){if(e=C(e),Array.isArray(e))for(var a=0;a<e.length;a++)Fo(e[a],t,n,r,i);else{var o=$e(),u=Qe(),s=ga(e)?e:C(e.provide),c=da(e),l=et(),h=1048575&l.providerIndexes,f=l.directiveStart,d=l.providerIndexes>>20;if(ga(e)||!e.multi){var p=new At(c,i,La),v=qo(s,t,i?h:h+d,f);-1===v?(Gt(jt(l,u),o,s),Vo(o,e,t.length),t.push(s),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(p),u.push(p)):(n[v]=p,u[v]=p)}else{var g=qo(s,t,h+d,f),m=qo(s,t,h,h+d),y=g>=0&&n[g],k=m>=0&&n[m];if(i&&!k||!i&&!y){Gt(jt(l,u),o,s);var b=function(e,t,n,r,i){var a=new At(e,n,La);return a.multi=[],a.index=t,a.componentProviders=0,Zo(a,i,r&&!n),a}(i?Bo:jo,n.length,i,r,c);!i&&k&&(n[m].providerFactory=b),Vo(o,e,t.length,0),t.push(s),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(b),u.push(b)}else Vo(o,e,g>-1?g:m,Zo(n[i?m:g],c,!i&&r));!i&&r&&k&&n[m].componentProviders++}}}function Vo(e,t,n,r){var i=ga(t);if(i||t.useClass){var a=(t.useClass||t).prototype.ngOnDestroy;if(a){var o=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){var u=o.indexOf(n);-1===u?o.push(n,[r,a]):o[u+1].push(r,a)}else o.push(n,a)}}}function Zo(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function qo(e,t,n,r){for(var i=n;i<r;i++)if(t[i]===e)return i;return-1}function jo(e,t,n,r){return zo(this.multi,[])}function Bo(e,t,n,r){var i,a=this.multi;if(this.providerFactory){var o=this.providerFactory.componentProviders,u=en(n,n[1],this.providerFactory.index,r);zo(a,i=u.slice(0,o));for(var s=o;s<u.length;s++)i.push(u[s])}else zo(a,i=[]);return i}function zo(e,t){for(var n=0;n<e.length;n++)t.push((0,e[n])());return t}function Ho(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,r){return function(e,t,n){var r=$e();if(r.firstCreatePass){var i=Ee(e);Fo(n,r.data,r.blueprint,i,!0),Fo(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}}var Go=p(function e(){v(this,e)}),Ko=function(){function e(){v(this,e)}return p(e,[{key:"resolveComponentFactory",value:function(e){throw function(e){var t=Error("No component factory found for ".concat(x(e),". Did you add it to @NgModule.entryComponents?"));return t.ngComponent=e,t}(e)}}]),e}(),Wo=p(function e(){v(this,e)});function Jo(){}function Yo(e,t){return new $o(qe(e,t))}Wo.NULL=new Ko;var Qo=function(){return Yo(et(),Qe())},$o=function(){var e=p(function e(t){v(this,e),this.nativeElement=t});return e.__NG_ELEMENT_ID__=Qo,e}();function Xo(e){return e instanceof $o?e.nativeElement:e}var eu=p(function e(){v(this,e)}),tu=function(){var e=p(function e(){v(this,e)});return e.__NG_ELEMENT_ID__=function(){return nu()},e}(),nu=function(){var e=Qe(),t=Be(et().index,e);return function(e){return e[11]}(_e(t)?t:e)},ru=function(){var e=p(function e(){v(this,e)});return e.\u0275prov=D({token:e,providedIn:"root",factory:function(){return null}}),e}(),iu=p(function e(t){v(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}),au=new iu("12.1.5"),ou=function(){function e(){v(this,e)}return p(e,[{key:"supports",value:function(e){return Ca(e)}},{key:"create",value:function(e){return new su(e)}}]),e}(),uu=function(e,t){return t},su=function(){function e(t){v(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||uu}return p(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,n=this._removalsHead,r=0,i=null;t||n;){var a=!n||t&&t.currentIndex<fu(n,r,i)?t:n,o=fu(a,r,i),u=a.currentIndex;if(a===n)r--,n=n._nextRemoved;else if(t=t._next,null==a.previousIndex)r++;else{i||(i=[]);var s=o-r,c=u-r;if(s!=c){for(var l=0;l<s;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<s&&(i[l]=h+1)}i[a.previousIndex]=c-s}}o!==u&&e(a,o,u)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!Ca(e))throw new Error("Error trying to diff '".concat(x(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n,r,i,a=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(var u=0;u<this.length;u++)r=e[u],i=this._trackByFn(u,r),null!==a&&Object.is(a.trackById,i)?(o&&(a=this._verifyReinsertion(a,r,i,u)),Object.is(a.item,r)||this._addIdentityChange(a,r)):(a=this._mismatch(a,r,i,u),o=!0),a=a._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r,i=e[Ia()]();!(r=i.next()).done;)t(r.value)}(e,function(e){i=t._trackByFn(n,e),null!==a&&Object.is(a.trackById,i)?(o&&(a=t._verifyReinsertion(a,e,i,n)),Object.is(a.item,e)||t._addIdentityChange(a,e)):(a=t._mismatch(a,e,i,n),o=!0),a=a._next,n++}),this.length=n;return this._truncate(a),this.collection=e,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,n,r){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new cu(t,n),i,r),e}},{key:"_verifyReinsertion",value:function(e,t,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_moveAfter",value:function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_addAfter",value:function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new hu),this._linkedRecords.put(e),e.currentIndex=n,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new hu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}]),e}(),cu=p(function e(t,n){v(this,e),this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}),lu=function(){function e(){v(this,e),this._head=null,this._tail=null}return p(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}},{key:"remove",value:function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}]),e}(),hu=function(){function e(){v(this,e),this.map=new Map}return p(e,[{key:"put",value:function(e){var t=e.trackById,n=this.map.get(t);n||(n=new lu,this.map.set(t,n)),n.add(e)}},{key:"get",value:function(e,t){var n=this.map.get(e);return n?n.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),e}();function fu(e,t,n){var r=e.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+t+i}var du=function(){function e(){v(this,e)}return p(e,[{key:"supports",value:function(e){return e instanceof Map||Ra(e)}},{key:"create",value:function(){return new pu}}]),e}(),pu=function(){function e(){v(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return p(e,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||Ra(e)))throw new Error("Error trying to diff '".concat(x(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var i=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var a=new vu(e);return this._records.set(e,a),a.currentValue=t,this._addToAdditions(a),a}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(function(n){return t(e[n],n)})}}]),e}(),vu=p(function e(t){v(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null});function gu(){return new mu([new ou])}var mu=function(){var e=function(){function e(t){v(this,e),this.factories=t}return p(e,[{key:"find",value:function(e){var t,n=this.factories.find(function(t){return t.supports(e)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'"))}}],[{key:"create",value:function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){return e.create(t,n||gu())},deps:[[e,new On,new An]]}}}]),e}();return e.\u0275prov=D({token:e,providedIn:"root",factory:gu}),e}();function yu(){return new ku([new du])}var ku=function(){var e=function(){function e(t){v(this,e),this.factories=t}return p(e,[{key:"find",value:function(e){var t=this.factories.find(function(t){return t.supports(e)});if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){return e.create(t,n||yu())},deps:[[e,new On,new An]]}}}]),e}();return e.\u0275prov=D({token:e,providedIn:"root",factory:yu}),e}();function bu(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==n;){var a=t[n.index];if(null!==a&&r.push(Ve(a)),xe(a))for(var o=10;o<a.length;o++){var u=a[o],c=u[1].firstChild;null!==c&&bu(u[1],u,c,r)}var l=n.type;if(8&l)bu(e,t,n.child,r);else if(32&l)for(var h=Er(n,t),f=void 0;f=h();)r.push(f);else if(16&l){var d=zr(t,n);if(Array.isArray(d))r.push.apply(r,s(d));else{var p=Cr(t[16]);bu(p[1],p,d,r,!0)}}n=i?n.projectionNext:n.next}return r}var wu=function(){function e(t,n){v(this,e),this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}return p(e,[{key:"rootNodes",get:function(){var e=this._lView,t=e[1];return bu(t,e,t.firstChild,[])}},{key:"context",get:function(){return this._lView[8]},set:function(e){this._lView[8]=e}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){var e=this._lView[3];if(xe(e)){var t=e[8],n=t?t.indexOf(this):-1;n>-1&&(Lr(e,n),vn(t,n))}this._attachedToViewContainer=!1}Mr(this._lView[1],this._lView)}},{key:"onDestroy",value:function(e){Ri(this._lView[1],this._lView,null,e)}},{key:"markForCheck",value:function(){Ki(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){Wi(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(e,t,n){ot(!0);try{Wi(e,t,n)}finally{ot(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}},{key:"detachFromAppRef",value:function(){var e;this._appRef=null,Kr(this._lView[1],e=this._lView,e[11],2,null,null)}},{key:"attachToAppRef",value:function(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}]),e}(),_u=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e))._view=e,r}return p(n,[{key:"detectChanges",value:function(){Ji(this._view)}},{key:"checkNoChanges",value:function(){!function(e){ot(!0);try{Ji(e)}finally{ot(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(wu),xu=function(e){return function(e,t,n){if(Se(e)&&!n){var r=Be(e.index,t);return new wu(r,r)}return 47&e.type?new wu(t[16],t):null}(et(),Qe(),16==(16&e))},Tu=function(){var e=p(function e(){v(this,e)});return e.__NG_ELEMENT_ID__=xu,e}(),Su=[new du],Iu=new mu([new ou]),Eu=new ku(Su),Cu=function(){return Ou(et(),Qe())},Ru=function(){var e=p(function e(){v(this,e)});return e.__NG_ELEMENT_ID__=Cu,e}(),Au=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this))._declarationLView=e,a._declarationTContainer=r,a.elementRef=i,a}return p(n,[{key:"createEmbeddedView",value:function(e){var t=this._declarationTContainer.tViews,n=mi(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];var r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),bi(t,n,e),new wu(n)}}]),n}(Ru);function Ou(e,t){return 4&e.type?new Au(t,e,Yo(e,t)):null}var Nu=p(function e(){v(this,e)}),Pu=p(function e(){v(this,e)}),Du=function(){return Vu(et(),Qe())},Lu=function(){var e=p(function e(){v(this,e)});return e.__NG_ELEMENT_ID__=Du,e}(),Mu=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this))._lContainer=e,a._hostTNode=r,a._hostLView=i,a}return p(n,[{key:"element",get:function(){return Yo(this._hostTNode,this._hostLView)}},{key:"injector",get:function(){return new rn(this._hostTNode,this._hostLView)}},{key:"parentInjector",get:function(){var e=Ht(this._hostTNode,this._hostLView);if(Mt(e)){var t=Ft(e,this._hostLView),n=Ut(e);return new rn(t[1].data[n+8],t)}return new rn(null,this._hostLView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(e){var t=Uu(this._lContainer);return null!==t&&t[e]||null}},{key:"length",get:function(){return this._lContainer.length-10}},{key:"createEmbeddedView",value:function(e,t,n){var r=e.createEmbeddedView(t||{});return this.insert(r,n),r}},{key:"createComponent",value:function(e,t,n,r,i){var a=n||this.parentInjector;if(!i&&null==e.ngModule&&a){var o=a.get(Nu,null);o&&(i=o)}var u=e.create(a,r,void 0,i);return this.insert(u.hostView,t),u}},{key:"insert",value:function(e,t){var r=e._lView,i=r[1];if(xe(r[3])){var a=this.indexOf(e);if(-1!==a)this.detach(a);else{var o=r[3],u=new n(o,o[6],o[3]);u.detach(u.indexOf(e))}}var s=this._adjustIndex(t),c=this._lContainer;!function(e,t,n,r){var i=10+r,a=n.length;r>0&&(n[i-1][4]=t),r<a-10?(t[4]=n[i],pn(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;var o=t[17];null!==o&&n!==o&&function(e,t){var n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);var u=t[19];null!==u&&u.insertView(e),t[2]|=128}(i,r,c,s);var l=Hr(s,c),h=r[11],f=qr(h,c[7]);return null!==f&&function(e,t,n,r,i,a){r[0]=i,r[6]=t,Kr(e,r,n,1,i,a)}(i,c[6],h,r,f,l),e.attachToViewContainerRef(),pn(Fu(c),s,e),e}},{key:"move",value:function(e,t){return this.insert(e,t)}},{key:"indexOf",value:function(e){var t=Uu(this._lContainer);return null!==t?t.indexOf(e):-1}},{key:"remove",value:function(e){var t=this._adjustIndex(e,-1),n=Lr(this._lContainer,t);n&&(vn(Fu(this._lContainer),t),Mr(n[1],n))}},{key:"detach",value:function(e){var t=this._adjustIndex(e,-1),n=Lr(this._lContainer,t);return n&&null!=vn(Fu(this._lContainer),t)?new wu(n):null}},{key:"_adjustIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e?this.length+t:e}}]),n}(Lu);function Uu(e){return e[8]}function Fu(e){return e[8]||(e[8]=[])}function Vu(e,t){var n,r=t[e.index];if(xe(r))n=r;else{var i;if(8&e.type)i=Ve(r);else{var a=t[11];i=a.createComment("");var o=qe(e,t);Fr(a,qr(a,o),i,function(e,t){return Ue(e)?e.nextSibling(t):t.nextSibling}(a,o),!1)}t[e.index]=n=ji(r,t,i,e),Gi(t,n)}return new Mu(n,e,t)}var Zu={},qu=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this)).ngModule=e,r}return p(n,[{key:"resolveComponentFactory",value:function(e){var t=be(e);return new zu(t,this.ngModule)}}]),n}(Wo);function ju(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}var Bu=new cn("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return xr}}),zu=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).componentDef=e,i.ngModule=r,i.componentType=e.type,i.selector=e.selectors.map(oi).join(","),i.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],i.isBoundToModule=!!r,i}return p(n,[{key:"inputs",get:function(){return ju(this.componentDef.inputs)}},{key:"outputs",get:function(){return ju(this.componentDef.outputs)}},{key:"create",value:function(e,t,n,r){var i,a,o=(r=r||this.ngModule)?function(e,t){return{get:function(n,r,i){var a=e.get(n,Zu,i);return a!==Zu||r===Zu?a:t.get(n,r,i)}}}(e,r.injector):e,u=o.get(eu,Fe),s=o.get(ru,null),c=u.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",h=n?function(e,t,n){if(Ue(e))return e.selectRootElement(t,n===J.ShadowDom);var r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(c,n,this.componentDef.encapsulation):Pr(u.createRenderer(null,this.componentDef),l,function(e){var t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),f=this.componentDef.onPush?576:528,d={components:[],scheduler:xr,clean:Qi,playerHandler:null,flags:0},p=Ci(0,null,null,1,0,null,null,null,null,null),v=mi(null,p,d,f,null,null,u,c,s,o);vt(v);try{var g=function(e,t,n,r,i,a){var o=n[1];n[20]=e;var u=yi(o,20,2,"#host",null),s=u.mergedAttrs=t.hostAttrs;null!==s&&(na(u,s,!0),null!==e&&(Ot(i,e,s),null!==u.classes&&Yr(i,e,u.classes),null!==u.styles&&Jr(i,e,u.styles)));var c=r.createRenderer(e,t),l=mi(n,Ei(t),null,t.onPush?64:16,n[20],u,r,c,null,null);return o.firstCreatePass&&(Gt(jt(u,n),o,t.type),Li(o,u),Ui(u,n.length,1)),Gi(n,l),n[20]=l}(h,this.componentDef,v,u,c);if(h)if(n)Ot(c,h,["ng-version",au.full]);else{var m=function(e){for(var t=[],n=[],r=1,i=2;r<e.length;){var a=e[r];if("string"==typeof a)2===i?""!==a&&t.push(a,e[++r]):8===i&&n.push(a);else{if(!ni(i))break;i=a}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]),y=m.attrs,k=m.classes;y&&Ot(c,h,y),k&&k.length>0&&Yr(c,h,k.join(" "))}if(a=je(p,20),void 0!==t)for(var b=a.projection=[],w=0;w<this.ngContentSelectors.length;w++){var _=t[w];b.push(null!=_?Array.from(_):null)}i=function(e,t,n,r,i){var a=n[1],o=function(e,t,n){var r=et();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Fi(e,r,t,ki(e,t,1,null),n));var i=en(t,e,r.directiveStart,r);yr(i,t);var a=qe(r,t);return a&&yr(a,t),i}(a,n,t);if(r.components.push(o),e[8]=o,i&&i.forEach(function(e){return e(o,t)}),t.contentQueries){var u=et();t.contentQueries(1,o,u.directiveStart)}var s=et();return!a.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(_t(s.index),Pi(n[1],s,0,s.directiveStart,s.directiveEnd,t),Di(t,o)),o}(g,this.componentDef,v,d,[ka]),bi(p,v,null)}finally{bt()}return new Hu(this.componentType,i,Yo(a,v),v,a)}}]),n}(Go),Hu=function(e){g(n,e);var t=m(n);function n(e,r,i,a,o){var u;return v(this,n),(u=t.call(this)).location=i,u._rootLView=a,u._tNode=o,u.instance=r,u.hostView=u.changeDetectorRef=new _u(a),u.componentType=e,u}return p(n,[{key:"injector",get:function(){return new rn(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.hostView.destroy()}},{key:"onDestroy",value:function(e){this.hostView.onDestroy(e)}}]),n}(function(){return p(function e(){v(this,e)})}()),Gu=new Map,Ku=function(e){g(n,e);var t=m(n);function n(e,r){var i;v(this,n),(i=t.call(this))._parent=r,i._bootstrapComponents=[],i.injector=k(i),i.destroyCbs=[],i.componentFactoryResolver=new qu(k(i));var a=we(e),o=e[ue]||null;return o&&Uo(o),i._bootstrapComponents=Sr(a.bootstrap),i._r3Injector=la(e,r,[{provide:Nu,useValue:k(i)},{provide:Wo,useValue:i.componentFactoryResolver}],x(e)),i._r3Injector._resolveInjectorDefTypes(),i.instance=i.get(e),i}return p(n,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ya.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:z.Default;return e===ya||e===Nu||e===ia?this:this._r3Injector.get(e,t,n)}},{key:"destroy",value:function(){var e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(function(e){return e()}),this.destroyCbs=null}},{key:"onDestroy",value:function(e){this.destroyCbs.push(e)}}]),n}(Nu),Wu=function(e){g(n,e);var t=m(n);function n(e){var r,i,a;return v(this,n),(r=t.call(this)).moduleType=e,null!==we(e)&&(i=e,a=new Set,function e(t){var n=we(t,!0),r=n.id;null!==r&&(function(e,t,n){if(t&&t!==n)throw new Error("Duplicate module registered for ".concat(e," - ").concat(x(t)," vs ").concat(x(t.name)))}(r,Gu.get(r),t),Gu.set(r,t));var i,o=l(Sr(n.imports));try{for(o.s();!(i=o.n()).done;){var u=i.value;a.has(u)||(a.add(u),e(u))}}catch(s){o.e(s)}finally{o.f()}}(i)),r}return p(n,[{key:"create",value:function(e){return new Ku(this.moduleType,e)}}]),n}(Pu);function Ju(e,t,n){var r=ut()+e,i=Qe();return i[r]===ui?Aa(i,r,n?t.call(n):t()):function(e,t){return e[t]}(i,r)}function Yu(e,t,n,r){return Qu(Qe(),ut(),e,t,n,r)}function Qu(e,t,n,r,i,a){var o=t+n;return Oa(e,o,i)?Aa(e,o+1,a?r.call(a,i):r(i)):function(e,t){var n=e[t];return n===ui?void 0:n}(e,o+1)}function $u(e,t){var n,r=$e(),i=e+20;r.firstCreatePass?(n=function(e,t){if(t)for(var n=t.length-1;n>=0;n--){var r=t[n];if(e===r.name)return r}throw new A("302","The pipe '".concat(e,"' could not be found!"))}(t,r.pipeRegistry),r.data[i]=n,n.onDestroy&&(r.destroyHooks||(r.destroyHooks=[])).push(i,n.onDestroy)):n=r.data[i];var a=n.factory||(n.factory=Ce(n.type)),o=H(La);try{var u=Zt(!1),s=a();return Zt(u),function(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(r,Qe(),i,s),s}finally{H(o)}}function Xu(e,t,n){var r=e+20,i=Qe(),a=function(e,t){return e[t]}(i,r);return function(e,t){return Ea.isWrapped(t)&&(t=Ea.unwrap(t),e[Je.lFrame.bindingIndex]=ui),t}(i,function(e,t){return e[1].data[t].pure}(i,r)?Qu(i,ut(),t,a.transform,n,a):a.transform(n))}function es(e){return function(t){setTimeout(e,void 0,t)}}var ts=function(e){g(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return v(this,n),(e=t.call(this)).__isAsync=r,e}return p(n,[{key:"emit",value:function(e){o(T(n.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,t,r){var i,u,s,c=e,l=t||function(){return null},h=r;if(e&&"object"==typeof e){var f=e;c=null===(i=f.next)||void 0===i?void 0:i.bind(f),l=null===(u=f.error)||void 0===u?void 0:u.bind(f),h=null===(s=f.complete)||void 0===s?void 0:s.bind(f)}this.__isAsync&&(l=es(l),c&&(c=es(c)),h&&(h=es(h)));var d=o(T(n.prototype),"subscribe",this).call(this,{next:c,error:l,complete:h});return e instanceof a.w&&e.add(d),d}}]),n}(i.xQ);function ns(){return this._results[Ia()]()}var rs=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];v(this,e),this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;var n=Ia(),r=e.prototype;r[n]||(r[n]=ns)}return p(e,[{key:"changes",get:function(){return this._changes||(this._changes=new ts)}},{key:"get",value:function(e){return this._results[e]}},{key:"map",value:function(e){return this._results.map(e)}},{key:"filter",value:function(e){return this._results.filter(e)}},{key:"find",value:function(e){return this._results.find(e)}},{key:"reduce",value:function(e,t){return this._results.reduce(e,t)}},{key:"forEach",value:function(e){this._results.forEach(e)}},{key:"some",value:function(e){return this._results.some(e)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(e,t){this.dirty=!1;var n=fn(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var i=e[r],a=t[r];if(n&&(i=n(i),a=n(a)),a!==i)return!1}return!0}(this._results,n,t))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}},{key:"notifyOnChanges",value:function(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),e}();Symbol;var is=function(){function e(t){v(this,e),this.queryList=t,this.matches=null}return p(e,[{key:"clone",value:function(){return new e(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),e}(),as=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];v(this,e),this.queries=t}return p(e,[{key:"createEmbeddedView",value:function(t){var n=t.queries;if(null!==n){for(var r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[],a=0;a<r;a++){var o=n.getByIndex(a);i.push(this.queries[o.indexInDeclarationView].clone())}return new e(i)}return null}},{key:"insertView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"detachView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"dirtyQueriesWithMatches",value:function(e){for(var t=0;t<this.queries.length;t++)null!==ks(e,t).matches&&this.queries[t].setDirty()}}]),e}(),os=p(function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;v(this,e),this.predicate=t,this.flags=n,this.read=r}),us=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];v(this,e),this.queries=t}return p(e,[{key:"elementStart",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}},{key:"elementEnd",value:function(e){for(var t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}},{key:"embeddedTView",value:function(t){for(var n=null,r=0;r<this.length;r++){var i=null!==n?n.length:0,a=this.getByIndex(r).embeddedTView(t,i);a&&(a.indexInDeclarationView=r,null!==n?n.push(a):n=[a])}return null!==n?new e(n):null}},{key:"template",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}},{key:"getByIndex",value:function(e){return this.queries[e]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(e){this.queries.push(e)}}]),e}(),ss=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;v(this,e),this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return p(e,[{key:"elementStart",value:function(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}},{key:"elementEnd",value:function(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(e,t){this.elementStart(e,t)}},{key:"embeddedTView",value:function(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}},{key:"isApplyingToNode",value:function(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){for(var t=this._declarationNodeIndex,n=e.parent;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(e,t){var n=this.metadata.predicate;if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];this.matchTNodeWithReadOption(e,t,cs(t,i)),this.matchTNodeWithReadOption(e,t,Xt(t,e,i,!1,!1))}else n===Ru?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Xt(t,e,n,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(e,t,n){if(null!==n){var r=this.metadata.read;if(null!==r)if(r===$o||r===Lu||r===Ru&&4&t.type)this.addMatch(t.index,-2);else{var i=Xt(t,e,r,!1,!1);null!==i&&this.addMatch(t.index,i)}else this.addMatch(t.index,n)}}},{key:"addMatch",value:function(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}]),e}();function cs(e,t){var n=e.localNames;if(null!==n)for(var r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function ls(e,t,n,r){return-1===n?function(e,t){return 11&e.type?Yo(e,t):4&e.type?Ou(e,t):null}(t,e):-2===n?function(e,t,n){return n===$o?Yo(t,e):n===Ru?Ou(t,e):n===Lu?Vu(t,e):void 0}(e,t,r):en(e,e[1],n,t)}function hs(e,t,n,r){var i=t[19].queries[r];if(null===i.matches){for(var a=e.data,o=n.matches,u=[],s=0;s<o.length;s+=2){var c=o[s];u.push(c<0?null:ls(t,a[c],o[s+1],n.metadata.read))}i.matches=u}return i.matches}function fs(e,t,n,r){var i=e.queries.getByIndex(n),a=i.matches;if(null!==a)for(var o=hs(e,t,i,n),u=0;u<a.length;u+=2){var s=a[u];if(s>0)r.push(o[u/2]);else{for(var c=a[u+1],l=t[-s],h=10;h<l.length;h++){var f=l[h];f[17]===f[3]&&fs(f[1],f,c,r)}if(null!==l[9])for(var d=l[9],p=0;p<d.length;p++){var v=d[p];fs(v[1],v,c,r)}}}return r}function ds(e){var t=Qe(),n=$e(),r=ht();ft(r+1);var i=ks(n,r);if(e.dirty&&ze(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{var a=i.crossesNgTemplate?fs(n,t,r,[]):hs(n,t,i,r);e.reset(a,Xo),e.notifyOnChanges()}return!0}return!1}function ps(e,t,n){var r=$e();r.firstCreatePass&&(ys(r,new os(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),ms(r,Qe(),t)}function vs(e,t,n,r){var i=$e();if(i.firstCreatePass){var a=et();ys(i,new os(t,n,r),a.index),function(e,t){var n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}ms(i,Qe(),n)}function gs(){return e=Qe(),t=ht(),e[19].queries[t].queryList;var e,t}function ms(e,t,n){var r=new rs(4==(4&n));Ri(e,t,r,r.destroy),null===t[19]&&(t[19]=new as),t[19].queries.push(new is(r))}function ys(e,t,n){null===e.queries&&(e.queries=new us),e.queries.track(new ss(t,n))}function ks(e,t){return e.queries.getByIndex(t)}var bs=new cn("Application Initializer"),ws=function(){var e=function(){function e(t){var n=this;v(this,e),this.appInits=t,this.resolve=Jo,this.reject=Jo,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(e,t){n.resolve=e,n.reject=t})}return p(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=function(n){var r=e.appInits[n]();if(za(r))t.push(r);else if(Ga(r)){var i=new Promise(function(e,t){r.subscribe({complete:e,error:t})});t.push(i)}},i=0;i<this.appInits.length;i++)r(i);Promise.all(t).then(function(){n()}).catch(function(t){e.reject(t)}),0===t.length&&n(),this.initialized=!0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Sn(bs,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac}),e}(),_s=new cn("AppId"),xs={provide:_s,useFactory:function(){return"".concat(Ts()).concat(Ts()).concat(Ts())},deps:[]};function Ts(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Ss=new cn("Platform Initializer"),Is=new cn("Platform ID"),Es=new cn("appBootstrapListener"),Cs=function(){var e=function(){function e(){v(this,e)}return p(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac}),e}(),Rs=new cn("LocaleId"),As=new cn("DefaultCurrencyCode"),Os=p(function e(t,n){v(this,e),this.ngModuleFactory=t,this.componentFactories=n}),Ns=function(e){return new Wu(e)},Ps=Ns,Ds=function(e){return Promise.resolve(Ns(e))},Ls=function(e){var t=Ns(e),n=Sr(we(e).declarations).reduce(function(e,t){var n=be(t);return n&&e.push(new zu(n)),e},[]);return new Os(t,n)},Ms=Ls,Us=function(e){return Promise.resolve(Ls(e))},Fs=function(){var e=function(){function e(){v(this,e),this.compileModuleSync=Ps,this.compileModuleAsync=Ds,this.compileModuleAndAllComponentsSync=Ms,this.compileModuleAndAllComponentsAsync=Us}return p(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac}),e}(),Vs=Promise.resolve(0);function Zs(e){"undefined"==typeof Zone?Vs.then(function(){e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var qs=function(){function e(t){var n,r,i=t.enableLongStackTrace,a=void 0!==i&&i,o=t.shouldCoalesceEventChangeDetection,u=void 0!==o&&o,s=t.shouldCoalesceRunChangeDetection,c=void 0!==s&&s;if(v(this,e),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ts(!1),this.onMicrotaskEmpty=new ts(!1),this.onStable=new ts(!1),this.onError=new ts(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=!c&&u,this.shouldCoalesceRunChangeDetection=c,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var e=ee.requestAnimationFrame,t=ee.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){var n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);var r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,r=function(){!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(ee,function(){e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",function(){e.lastRequestAnimationFrameId=-1,zs(e),e.isCheckStableRunning=!0,Bs(e),e.isCheckStableRunning=!1},void 0,function(){},function(){})),e.fakeTopEventTask.invoke()}),zs(e))}(n)},(n=this)._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(e,t,i,a,o,u){try{return Hs(n),e.invokeTask(i,a,o,u)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||n.shouldCoalesceRunChangeDetection)&&r(),Gs(n)}},onInvoke:function(e,t,i,a,o,u,s){try{return Hs(n),e.invoke(i,a,o,u,s)}finally{n.shouldCoalesceRunChangeDetection&&r(),Gs(n)}},onHasTask:function(e,t,r,i){e.hasTask(r,i),t===r&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,zs(n),Bs(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(e,t,r,i){return e.handleError(r,i),n.runOutsideAngular(function(){return n.onError.emit(i)}),!1}})}return p(e,[{key:"run",value:function(e,t,n){return this._inner.run(e,t,n)}},{key:"runTask",value:function(e,t,n,r){var i=this._inner,a=i.scheduleEventTask("NgZoneEvent: "+r,e,js,Jo,Jo);try{return i.runTask(a,t,n)}finally{i.cancelTask(a)}}},{key:"runGuarded",value:function(e,t,n){return this._inner.runGuarded(e,t,n)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}(),js={};function Bs(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(function(){return e.onStable.emit(null)})}finally{e.isStable=!0}}}function zs(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Hs(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Gs(e){e._nesting--,Bs(e)}var Ks=function(){function e(){v(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ts,this.onMicrotaskEmpty=new ts,this.onStable=new ts,this.onError=new ts}return p(e,[{key:"run",value:function(e,t,n){return e.apply(t,n)}},{key:"runGuarded",value:function(e,t,n){return e.apply(t,n)}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e,t,n,r){return e.apply(t,n)}}]),e}(),Ws=function(){var e=function(){function e(t){var n=this;v(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return p(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){e._ngZone.onStable.subscribe({next:function(){qs.assertNotInAngularZone(),Zs(function(){e._isZoneStable=!0,e._runCallbacksIfReady()})}})})}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())Zs(function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1});else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)}),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}}):[]}},{key:"addCallback",value:function(e,t,n){var r=this,i=-1;t&&t>0&&(i=setTimeout(function(){r._callbacks=r._callbacks.filter(function(e){return e.timeoutId!==i}),e(r._didWork,r.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,n){return[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Sn(qs))},e.\u0275prov=D({token:e,factory:e.\u0275fac}),e}(),Js=function(){var e=function(){function e(){v(this,e),this._applications=new Map,$s.addToWindow(this)}return p(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return $s.findTestabilityInTree(this,e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac}),e}();function Ys(e){$s=e}var Qs,$s=new(function(){function e(){v(this,e)}return p(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,n){return null}}]),e}()),Xs=!0,ec=!1;function tc(){return ec=!0,Xs}function nc(){if(ec)throw new Error("Cannot enable prod mode after platform setup.");Xs=!1}var rc=new cn("AllowMultipleToken"),ic=p(function e(t,n){v(this,e),this.name=t,this.token=n});function ac(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(t),i=new cn(r);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=oc();if(!a||a.injector.get(rc,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{var o=n.concat(t).concat({provide:i,useValue:!0},{provide:oa,useValue:"platform"});!function(e){if(Qs&&!Qs.destroyed&&!Qs.injector.get(rc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Qs=e.get(uc);var t=e.get(Ss,null);t&&t.forEach(function(e){return e()})}(ya.create({providers:o,name:r}))}return function(e){var t=oc();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function oc(){return Qs&&!Qs.destroyed?Qs:null}var uc=function(){var e=function(){function e(t){v(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return p(e,[{key:"bootstrapModuleFactory",value:function(e,t){var n,r,i=this,a=(n=t?t.ngZone:void 0,r={ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1},"noop"===n?new Ks:("zone.js"===n?void 0:n)||new qs({enableLongStackTrace:tc(),shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)})),o=[{provide:qs,useValue:a}];return a.run(function(){var t=ya.create({providers:o,parent:i.injector,name:e.moduleType.name}),n=e.create(t),r=n.injector.get(_r,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return a.runOutsideAngular(function(){var e=a.onError.subscribe({next:function(e){r.handleError(e)}});n.onDestroy(function(){lc(i._modules,n),e.unsubscribe()})}),function(e,t,r){try{var a=((o=n.injector.get(ws)).runInitializers(),o.donePromise.then(function(){return Uo(n.injector.get(Rs,"en-US")||"en-US"),i._moduleDoBootstrap(n),n}));return za(a)?a.catch(function(n){throw t.runOutsideAngular(function(){return e.handleError(n)}),n}):a}catch(u){throw t.runOutsideAngular(function(){return e.handleError(u)}),u}var o}(r,a)})}},{key:"bootstrapModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=sc({},n);return function(e,t,n){var r=new Wu(n);return Promise.resolve(r)}(0,0,e).then(function(e){return t.bootstrapModuleFactory(e,r)})}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(cc);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(function(e){return t.bootstrap(e)});else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(x(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(e){return e.destroy()}),this._destroyListeners.forEach(function(e){return e()}),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Sn(ya))},e.\u0275prov=D({token:e,factory:e.\u0275fac}),e}();function sc(e,t){return Array.isArray(t)?t.reduce(sc,e):Object.assign(Object.assign({},e),t)}var cc=function(){var e=function(){function e(t,n,r,i,a){var o=this;v(this,e),this._zone=t,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:function(){o._zone.run(function(){o.tick()})}});var s=new u.y(function(e){o._stable=o._zone.isStable&&!o._zone.hasPendingMacrotasks&&!o._zone.hasPendingMicrotasks,o._zone.runOutsideAngular(function(){e.next(o._stable),e.complete()})}),l=new u.y(function(e){var t;o._zone.runOutsideAngular(function(){t=o._zone.onStable.subscribe(function(){qs.assertNotInAngularZone(),Zs(function(){o._stable||o._zone.hasPendingMacrotasks||o._zone.hasPendingMicrotasks||(o._stable=!0,e.next(!0))})})});var n=o._zone.onUnstable.subscribe(function(){qs.assertInAngularZone(),o._stable&&(o._stable=!1,o._zone.runOutsideAngular(function(){e.next(!1)}))});return function(){t.unsubscribe(),n.unsubscribe()}});this.isStable=(0,c.T)(s,l.pipe(function(e){return(0,f.x)()((t=d,function(e){var n;n="function"==typeof t?t:function(){return t};var r=Object.create(e,h.N);return r.source=e,r.subjectFactory=n,r})(e));var t}))}return p(e,[{key:"bootstrap",value:function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof Go?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var i=n.isBoundToModule?void 0:this._injector.get(Nu),a=n.create(ya.NULL,[],t||n.selector,i),o=a.location.nativeElement,u=a.injector.get(Ws,null),s=u&&a.injector.get(Js);return u&&s&&s.registerApplication(o,u),a.onDestroy(function(){r.detachView(a.hostView),lc(r.components,a),s&&s.unregisterApplication(o)}),this._loadComponent(a),a}},{key:"tick",value:function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var t,n=l(this._views);try{for(n.s();!(t=n.n()).done;){t.value.detectChanges()}}catch(r){n.e(r)}finally{n.f()}}catch(i){this._zone.runOutsideAngular(function(){return e._exceptionHandler.handleError(i)})}finally{this._runningTick=!1}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;lc(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Es,[]).concat(this._bootstrapListeners).forEach(function(t){return t(e)})}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach(function(e){return e.destroy()}),this._onMicrotaskEmptySubscription.unsubscribe()}},{key:"viewCount",get:function(){return this._views.length}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Sn(qs),Sn(ya),Sn(_r),Sn(Wo),Sn(ws))},e.\u0275prov=D({token:e,factory:e.\u0275fac}),e}();function lc(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var hc=p(function e(){v(this,e)}),fc=p(function e(){v(this,e)}),dc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},pc=function(){var e=function(){function e(t,n){v(this,e),this._compiler=t,this._config=n||dc}return p(e,[{key:"load",value:function(e){return this.loadAndCompile(e)}},{key:"loadAndCompile",value:function(e){var t=this,i=r(e.split("#"),2),a=i[0],o=i[1];return void 0===o&&(o="default"),n(8255)(a).then(function(e){return e[o]}).then(function(e){return vc(e,a,o)}).then(function(e){return t._compiler.compileModuleAsync(e)})}},{key:"loadFactory",value:function(e){var t=r(e.split("#"),2),i=t[0],a=t[1],o="NgFactory";return void 0===a&&(a="default",o=""),n(8255)(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then(function(e){return e[a+o]}).then(function(e){return vc(e,i,a)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Sn(Fs),Sn(fc,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac}),e}();function vc(e,t,n){if(!e)throw new Error("Cannot find '".concat(n,"' in '").concat(t,"'"));return e}var gc=function(e){return null},mc=ac(null,"core",[{provide:Is,useValue:"unknown"},{provide:uc,deps:[ya]},{provide:Js,deps:[]},{provide:Cs,deps:[]}]),yc=[{provide:cc,useClass:cc,deps:[qs,ya,_r,Wo,ws]},{provide:Bu,deps:[qs],useFactory:function(e){var t=[];return e.onStable.subscribe(function(){for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:ws,useClass:ws,deps:[[new An,bs]]},{provide:Fs,useClass:Fs,deps:[]},xs,{provide:mu,useFactory:function(){return Iu},deps:[]},{provide:ku,useFactory:function(){return Eu},deps:[]},{provide:Rs,useFactory:function(e){return Uo(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new Rn(Rs),new An,new On]]},{provide:As,useValue:"USD"}],kc=function(){var e=p(function e(t){v(this,e)});return e.\u0275fac=function(t){return new(t||e)(Sn(cc))},e.\u0275mod=ve({type:e}),e.\u0275inj=L({providers:yc}),e}()},8939:function(e,t,n){"use strict";n.d(t,{hO:function(){return k},xv:function(){return d},Dh:function(){return f},GT:function(){return l},cc:function(){return b},on:function(){return g},pX:function(){return c}});var i=n(3018),a=n(7841),o=n(4459);e=n.hmd(e);var u=["ngOnDestroy"],c=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Proxy(e,{get:function(i,a){return n.runOutsideAngular(function(){var i;if(e[a])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(a,e[a]),e[a];if(u.indexOf(a)>-1)return function(){};var o=t.toPromise().then(function(e){var t=e&&e[a];return"function"==typeof t?t.bind(e):t&&t.then?t.then(function(e){return n.run(function(){return e})}):n.run(function(){return t})});return new Proxy(function(){},{get:function(e,t){return o[t]},apply:function(e,t,n){return o.then(function(e){var t,i=e&&e.apply(void 0,s(n));return(null===(t=null==r?void 0:r.spy)||void 0===t?void 0:t.apply)&&r.spy.apply(a,n,i),i})}})})}})},l=function(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype||t).forEach(function(n){Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype||t,n))})})},h=p(function e(t){return v(this,e),t}),f=new i.OlP("angularfire2.app.options"),d=new i.OlP("angularfire2.app.name");function g(t,n,r){var i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";var o=a.Z.apps.filter(function(e){return e&&e.name===i.name})[0]||n.runOutsideAngular(function(){return a.Z.initializeApp(t,i)});try{JSON.stringify(t)!==JSON.stringify(o.options)&&m("error","".concat(o.name," Firebase App already initialized with different options").concat(e.hot?", you may need to reload as Firebase is not HMR aware.":"."))}catch(u){}return new h(o)}var m=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(0,i.X6Q)()&&"undefined"!=typeof console&&(t=console)[e].apply(t,r)},y={provide:h,useFactory:g,deps:[f,i.R0b,[new i.FiY,d]]},k=function(){var e=function(){function e(t){v(this,e),a.Z.registerVersion("angularfire",o.q4.full,"core"),a.Z.registerVersion("angularfire",o.q4.full,"app-compat"),a.Z.registerVersion("angular",i.q4F.full,t.toString())}return p(e,null,[{key:"initializeApp",value:function(t,n){return{ngModule:e,providers:[{provide:f,useValue:t},{provide:d,useValue:n}]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.Lbi))},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[y]}),e}();function b(e,t,n,i,a){var o=r(globalThis.\u0275AngularfireInstanceCache.find(function(t){return t[0]===e})||[],3),u=o[1],s=o[2];if(u)return function(e,t){try{return e.toString()===t.toString()}catch(n){return e===t}}(a,s)||(_("error","".concat(t," was already initialized on the ").concat(n," Firebase App with different settings.").concat(w?" You may need to reload as Firebase is not HMR aware.":"")),_("warn",{is:a,was:s})),u;var c=i();return globalThis.\u0275AngularfireInstanceCache.push([e,c,a]),c}var w=!!e.hot,_=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(0,i.X6Q)()&&"undefined"!=typeof console&&(t=console)[e].apply(t,r)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4459:function(e,t,n){"use strict";n.d(t,{q4:function(){return mn},iC:function(){return Cn},fc:function(){return En},HU:function(){return xn},vb:function(){return kn},JM:function(){return yn},u3:function(){return An}});var i=n(3018),a=n(2329),o=n(6304),u=n(279),c=n(3854),h=n(8604),f=n(9306),d=n(6508),g=new c.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function m(e){return e instanceof c.ZR&&e.code.includes("request-failed")}function y(e){var t=e.projectId;return"https://firebaseinstallations.googleapis.com/v1/projects/".concat(t,"/installations")}function k(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function b(e,t){return w.apply(this,arguments)}function w(){return(w=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:return r=e.sent.error,e.abrupt("return",g.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status}));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function x(e,t){var n=t.refreshToken,r=_(e);return r.append("Authorization",function(e){return"FIS_v2 ".concat(e)}(n)),r}function T(e){return S.apply(this,arguments)}function S(){return(S=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return n=e.sent,e.abrupt("return",n.status>=500&&n.status<600?t():n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(e,t){return E.apply(this,arguments)}function E(){return(E=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u,s,c,l,h,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=n.fid,o=y(r),u=_(r),!(s=i.getImmediate({optional:!0}))){e.next=8;break}return e.next=6,s.getHeartbeatsHeader();case 6:(c=e.sent)&&u.append("x-firebase-client",c);case 8:return l={method:"POST",headers:u,body:JSON.stringify({fid:a,authVersion:"FIS_v2",appId:r.appId,sdkVersion:"w:0.5.9"})},e.next=11,T(function(){return fetch(o,l)});case 11:if(!(h=e.sent).ok){e.next=17;break}return e.next=15,h.json();case 15:return f=e.sent,e.abrupt("return",{fid:f.fid||a,registrationStatus:2,refreshToken:f.refreshToken,authToken:k(f.authToken)});case 17:return e.next=19,b("Create Installation",h);case 19:throw e.sent;case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(e){return new Promise(function(t){setTimeout(t,e)})}var R=/^[cdef][\w-]{21}$/;function A(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,s(t))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return R.test(t)?t:""}catch(n){return""}}function O(e){return"".concat(e.appName,"!").concat(e.appId)}var N=new Map;function P(e,t){var n=O(e);D(n,t),function(e,t){var n=(!L&&"BroadcastChannel"in self&&((L=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){D(e.data.key,e.data.fid)}),L);n&&n.postMessage({key:e,fid:t}),0===N.size&&L&&(L.close(),L=null)}(n,t)}function D(e,t){var n=N.get(e);if(n){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){(0,r.value)(t)}}catch(a){i.e(a)}finally{i.f()}}}var L=null,M="firebase-installations-store",U=null;function F(){return U||(U=(0,d.X3)("firebase-installations-database",1,{upgrade:function(e,t){switch(t){case 0:e.createObjectStore(M)}}})),U}function V(e,t){return Z.apply(this,arguments)}function Z(){return(Z=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=O(t),e.next=3,F();case 3:return i=e.sent.transaction(M,"readwrite"),a=i.objectStore(M),e.next=7,a.get(r);case 7:return o=e.sent,e.next=10,a.put(n,r);case 10:return e.next=12,i.done;case 12:return o&&o.fid===n.fid||P(t,n.fid),e.abrupt("return",n);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function q(e){return j.apply(this,arguments)}function j(){return(j=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=O(t),e.next=3,F();case 3:return r=e.sent.transaction(M,"readwrite"),e.next=6,r.objectStore(M).delete(n);case 6:return e.next=8,r.done;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function B(e,t){return z.apply(this,arguments)}function z(){return(z=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=O(t),e.next=3,F();case 3:return i=e.sent.transaction(M,"readwrite"),a=i.objectStore(M),e.next=7,a.get(r);case 7:if(o=e.sent,void 0!==(u=n(o))){e.next=14;break}return e.next=12,a.delete(r);case 12:e.next=16;break;case 14:return e.next=16,a.put(u,r);case 16:return e.next=18,i.done;case 18:return!u||o&&o.fid===u.fid||P(t,u.fid),e.abrupt("return",u);case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function H(e){return G.apply(this,arguments)}function G(){return(G=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t.appConfig,function(e){var r=K(e),i=W(t,r);return n=i.registrationPromise,i.installationEntry});case 2:if(""!==(r=e.sent).fid){e.next=10;break}return e.next=6,n;case 6:e.t1=e.sent,e.t0={installationEntry:e.t1},e.next=11;break;case 10:e.t0={installationEntry:r,registrationPromise:n};case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function K(e){return X(e||{fid:A(),registrationStatus:0})}function W(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(g.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return J.apply(this,arguments)}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Y(e)}:{installationEntry:t}}function J(){return(J=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(t,n);case 3:return r=e.sent,e.abrupt("return",V(t.appConfig,r));case 7:if(e.prev=7,e.t0=e.catch(0),!m(e.t0)||409!==e.t0.customData.serverCode){e.next=14;break}return e.next=12,q(t.appConfig);case 12:e.next=16;break;case 14:return e.next=16,V(t.appConfig,{fid:n.fid,registrationStatus:0});case 16:throw e.t0;case 17:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function Y(e){return Q.apply(this,arguments)}function Q(){return(Q=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(t.appConfig);case 2:n=e.sent;case 3:if(1!==n.registrationStatus){e.next=11;break}return e.next=6,C(100);case 6:return e.next=8,$(t.appConfig);case 8:n=e.sent;case 9:e.next=3;break;case 11:if(0!==n.registrationStatus){e.next=18;break}return e.next=14,H(t);case 14:return r=e.sent,i=r.installationEntry,a=r.registrationPromise,e.abrupt("return",a||i);case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $(e){return B(e,function(e){if(!e)throw g.create("installation-not-found");return X(e)})}function X(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function ee(e,t){return te.apply(this,arguments)}function te(){return(te=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u,s,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=ne(r,n),o=x(r,n),!(u=i.getImmediate({optional:!0}))){e.next=7;break}return e.next=5,u.getHeartbeatsHeader();case 5:(s=e.sent)&&o.append("x-firebase-client",s);case 7:return c={method:"POST",headers:o,body:JSON.stringify({installation:{sdkVersion:"w:0.5.9",appId:r.appId}})},e.next=10,T(function(){return fetch(a,c)});case 10:if(!(l=e.sent).ok){e.next=17;break}return e.t0=k,e.next=15,l.json();case 15:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 17:return e.next=19,b("Generate Auth Token",l);case 19:throw e.sent;case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ne(e,t){var n=t.fid;return"".concat(y(e),"/").concat(n,"/authTokens:generate")}function re(e){return ie.apply(this,arguments)}function ie(){return(ie=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],e.next=3,B(t.appConfig,function(e){if(!le(e))throw g.create("not-registered");var i=e.authToken;if(!n&&he(i))return e;if(1===i.requestStatus)return r=ae(t,n),e;if(!navigator.onLine)throw g.create("app-offline");var a=fe(e);return r=se(t,a),a});case 3:if(i=e.sent,!r){e.next=10;break}return e.next=7,r;case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=i.authToken;case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ae(e,t){return oe.apply(this,arguments)}function oe(){return(oe=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue(t.appConfig);case 2:r=e.sent;case 3:if(1!==r.authToken.requestStatus){e.next=11;break}return e.next=6,C(100);case 6:return e.next=8,ue(t.appConfig);case 8:r=e.sent;case 9:e.next=3;break;case 11:return i=r.authToken,e.abrupt("return",0===i.requestStatus?re(t,n):i);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ue(e){return B(e,function(e){if(!le(e))throw g.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t})}function se(e,t){return ce.apply(this,arguments)}function ce(){return(ce=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee(t,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{authToken:r}),e.next=7,V(t.appConfig,i);case 7:return e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(0),m(e.t0)&&(401===e.t0.customData.serverCode||404===e.t0.customData.serverCode)){e.next=18;break}return a=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),e.next=16,V(t.appConfig,a);case 16:e.next=20;break;case 18:return e.next=20,q(t.appConfig);case 20:throw e.t0;case 21:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function le(e){return void 0!==e&&2===e.registrationStatus}function he(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(e)}function fe(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function de(){return(de=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,H(n);case 3:return r=e.sent,i=r.installationEntry,a=r.registrationPromise,e.abrupt("return",(a?a.catch(console.error):re(n).catch(console.error),i.fid));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pe(){return(pe=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r,i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]&&i[1],r=t,e.next=4,ve(r);case 4:return e.next=6,re(r,n);case 6:return e.abrupt("return",e.sent.token);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ve(e){return ge.apply(this,arguments)}function ge(){return(ge=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(t);case 2:if(n=e.sent,r=n.registrationPromise,e.t0=r,!e.t0){e.next=8;break}return e.next=8,r;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function me(e){return g.create("missing-app-config-values",{valueName:e})}(0,u._registerComponent)(new h.wA("installations",function(e){var t=e.getProvider("app").getImmediate();return{app:t,appConfig:function(e){if(!e||!e.options)throw me("App Configuration");if(!e.name)throw me("App Name");for(var t=0,n=["projectId","apiKey","appId"];t<n.length;t++){var r=n[t];if(!e.options[r])throw me(r)}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),heartbeatServiceProvider:(0,u._getProvider)(t,"heartbeat"),_delete:function(){return Promise.resolve()}}},"PUBLIC")),(0,u._registerComponent)(new h.wA("installations-internal",function(e){var t=e.getProvider("app").getImmediate(),n=(0,u._getProvider)(t,"installations").getImmediate();return{getId:function(){return function(e){return de.apply(this,arguments)}(n)},getToken:function(e){return function(e){return pe.apply(this,arguments)}(n,e)}}},"PRIVATE")),(0,u.registerVersion)("@firebase/installations","0.5.9"),(0,u.registerVersion)("@firebase/installations","0.5.9","esm2017");var ye=new c.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"}),ke=function(){function e(t,n,r,i){v(this,e),this.client=t,this.storage=n,this.storageCache=r,this.logger=i}return p(e,[{key:"isCachedDataFresh",value:function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: ".concat(n,". Cache max age millis (minimumFetchIntervalMillis setting): ").concat(e,". Is cache hit: ").concat(r,".")),r}},{key:"fetch",value:function(e){var t=this;return(0,o.Z)(regeneratorRuntime.mark(function n(){var i,a,o,u,s,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);case 2:if(i=n.sent,a=r(i,2),o=a[0],!(u=a[1])||!t.isCachedDataFresh(e.cacheMaxAgeMillis,o)){n.next=8;break}return n.abrupt("return",u);case 8:return e.eTag=u&&u.eTag,n.next=11,t.client.fetch(e);case 11:return s=n.sent,c=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===s.status&&c.push(t.storage.setLastSuccessfulFetchResponse(s)),n.next=16,Promise.all(c);case 16:return n.abrupt("return",s);case 17:case"end":return n.stop()}},n)}))()}}]),e}();function be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator;return e.languages&&e.languages[0]||e.language}var we=function(){function e(t,n,r,i,a,o){v(this,e),this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=a,this.appId=o}return p(e,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=this;return(0,o.Z)(regeneratorRuntime.mark(function n(){var i,a,o,u,s,c,l,h,f,d,p,v,g,m,y,k,b;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]);case 2:return i=n.sent,a=r(i,2),o=a[0],u=a[1],s="".concat(window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com","/v1/projects/").concat(t.projectId,"/namespaces/").concat(t.namespace,":fetch?key=").concat(t.apiKey),c={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},l={sdk_version:t.sdkVersion,app_instance_id:o,app_instance_id_token:u,app_id:t.appId,language_code:be()},h={method:"POST",headers:c,body:JSON.stringify(l)},f=fetch(s,h),d=new Promise(function(t,n){e.signal.addEventListener(function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)})}),n.prev=12,n.next=15,Promise.race([f,d]);case 15:return n.next=17,f;case 17:p=n.sent,n.next=24;break;case 20:throw n.prev=20,n.t0=n.catch(12),v="fetch-client-network","AbortError"===n.t0.name&&(v="fetch-timeout"),ye.create(v,{originalErrorMessage:n.t0.message});case 24:if(g=p.status,m=p.headers.get("ETag")||void 0,200!==p.status){n.next=37;break}return n.prev=27,n.next=30,p.json();case 30:b=n.sent,n.next=36;break;case 33:throw n.prev=33,n.t1=n.catch(27),ye.create("fetch-client-parse",{originalErrorMessage:n.t1.message});case 36:y=b.entries,k=b.state;case 37:if("INSTANCE_STATE_UNSPECIFIED"===k?g=500:"NO_CHANGE"===k?g=304:"NO_TEMPLATE"!==k&&"EMPTY_CONFIG"!==k||(y={}),304===g||200===g){n.next=39;break}throw ye.create("fetch-status",{httpStatus:g});case 39:return n.abrupt("return",{status:g,eTag:m,config:y});case 40:case"end":return n.stop()}},n,null,[[12,20],[27,33]])}))()})}]),e}(),_e=function(){function e(t,n){v(this,e),this.client=t,this.storage=n}return p(e,[{key:"fetch",value:function(e){var t=this;return(0,o.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.storage.getThrottleMetadata();case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0={backoffCount:0,throttleEndTimeMillis:Date.now()};case 5:return r=n.t0,n.abrupt("return",t.attemptFetch(e,r));case 7:case"end":return n.stop()}},n)}))()}},{key:"attemptFetch",value:function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount,i=this;return(0,o.Z)(regeneratorRuntime.mark(function t(){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener(function(){clearTimeout(a),r(ye.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(e.signal,n);case 2:return t.prev=2,t.next=5,i.client.fetch(e);case 5:return a=t.sent,t.next=8,i.storage.deleteThrottleMetadata();case 8:return t.abrupt("return",a);case 11:if(t.prev=11,t.t0=t.catch(2),function(e){if(!(e instanceof c.ZR&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t.t0)){t.next=15;break}throw t.t0;case 15:return o={throttleEndTimeMillis:Date.now()+(0,c.$s)(r),backoffCount:r+1},t.next=18,i.storage.setThrottleMetadata(o);case 18:return t.abrupt("return",i.attemptFetch(e,o));case 19:case"end":return t.stop()}},t,null,[[2,11]])}))()}}]),e}(),xe=function(){function e(t,n,r,i,a){v(this,e),this.app=t,this._client=n,this._storageCache=r,this._storage=i,this._logger=a,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return p(e,[{key:"fetchTimeMillis",get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}},{key:"lastFetchStatus",get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}]),e}();function Te(e,t){var n=e.target.error||void 0;return ye.create(t,{originalErrorMessage:n&&n.message})}var Se=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Promise(function(e,t){try{var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(e){t(Te(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore("app_namespace_store",{keyPath:"compositeKey"})}}}catch(r){t(ye.create("storage-open",{originalErrorMessage:r}))}});v(this,e),this.appId=t,this.appName=n,this.namespace=r,this.openDbPromise=i}return p(e,[{key:"getLastFetchStatus",value:function(){return this.get("last_fetch_status")}},{key:"setLastFetchStatus",value:function(e){return this.set("last_fetch_status",e)}},{key:"getLastSuccessfulFetchTimestampMillis",value:function(){return this.get("last_successful_fetch_timestamp_millis")}},{key:"setLastSuccessfulFetchTimestampMillis",value:function(e){return this.set("last_successful_fetch_timestamp_millis",e)}},{key:"getLastSuccessfulFetchResponse",value:function(){return this.get("last_successful_fetch_response")}},{key:"setLastSuccessfulFetchResponse",value:function(e){return this.set("last_successful_fetch_response",e)}},{key:"getActiveConfig",value:function(){return this.get("active_config")}},{key:"setActiveConfig",value:function(e){return this.set("active_config",e)}},{key:"getActiveConfigEtag",value:function(){return this.get("active_config_etag")}},{key:"setActiveConfigEtag",value:function(e){return this.set("active_config_etag",e)}},{key:"getThrottleMetadata",value:function(){return this.get("throttle_metadata")}},{key:"setThrottleMetadata",value:function(e){return this.set("throttle_metadata",e)}},{key:"deleteThrottleMetadata",value:function(){return this.delete("throttle_metadata")}},{key:"get",value:function(e){var t=this;return(0,o.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.openDbPromise;case 2:return r=n.sent,n.abrupt("return",new Promise(function(n,i){var a=r.transaction(["app_namespace_store"],"readonly").objectStore("app_namespace_store"),o=t.createCompositeKey(e);try{var u=a.get(o);u.onerror=function(e){i(Te(e,"storage-get"))},u.onsuccess=function(e){var t=e.target.result;n(t?t.value:void 0)}}catch(s){i(ye.create("storage-get",{originalErrorMessage:s&&s.message}))}}));case 4:case"end":return n.stop()}},n)}))()}},{key:"set",value:function(e,t){var n=this;return(0,o.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.openDbPromise;case 2:return i=r.sent,r.abrupt("return",new Promise(function(r,a){var o=i.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),u=n.createCompositeKey(e);try{var s=o.put({compositeKey:u,value:t});s.onerror=function(e){a(Te(e,"storage-set"))},s.onsuccess=function(){r()}}catch(c){a(ye.create("storage-set",{originalErrorMessage:c&&c.message}))}}));case 4:case"end":return r.stop()}},r)}))()}},{key:"delete",value:function(e){var t=this;return(0,o.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.openDbPromise;case 2:return r=n.sent,n.abrupt("return",new Promise(function(n,i){var a=r.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),o=t.createCompositeKey(e);try{var u=a.delete(o);u.onerror=function(e){i(Te(e,"storage-delete"))},u.onsuccess=function(){n()}}catch(s){i(ye.create("storage-delete",{originalErrorMessage:s&&s.message}))}}));case 4:case"end":return n.stop()}},n)}))()}},{key:"createCompositeKey",value:function(e){return[this.appId,this.appName,this.namespace,e].join()}}]),e}(),Ie=function(){function e(t){v(this,e),this.storage=t}return p(e,[{key:"getLastFetchStatus",value:function(){return this.lastFetchStatus}},{key:"getLastSuccessfulFetchTimestampMillis",value:function(){return this.lastSuccessfulFetchTimestampMillis}},{key:"getActiveConfig",value:function(){return this.activeConfig}},{key:"loadFromStorage",value:function(){var e=this;return(0,o.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a,o,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),t.next=5,n;case 5:return(a=t.sent)&&(e.lastFetchStatus=a),t.next=9,r;case 9:return(o=t.sent)&&(e.lastSuccessfulFetchTimestampMillis=o),t.next=13,i;case 13:(u=t.sent)&&(e.activeConfig=u);case 15:case"end":return t.stop()}},t)}))()}},{key:"setLastFetchStatus",value:function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}},{key:"setLastSuccessfulFetchTimestampMillis",value:function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}},{key:"setActiveConfig",value:function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}]),e}();function Ee(){return(Ee=(0,o.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,c.hl)()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,(0,c.eu)();case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,null,[[2,8]])}))).apply(this,arguments)}(0,u._registerComponent)(new h.wA("remote-config",function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw ye.create("registration-window");if(!(0,c.hl)())throw ye.create("indexed-db-unavailable");var a=r.options,o=a.projectId,s=a.apiKey,l=a.appId;if(!o)throw ye.create("registration-project-id");if(!s)throw ye.create("registration-api-key");if(!l)throw ye.create("registration-app-id");var h=new Se(l,r.name,n=n||"firebase"),d=new Ie(h),p=new f.Yd("@firebase/remote-config");p.logLevel=f.in.ERROR;var v,g,m=new we(i,u.SDK_VERSION,n,o,s,l),y=new _e(m,h),k=new ke(y,h,d,p),b=new xe(r,k,d,h,p);return v=b,(g=(0,c.m9)(v))._initializePromise||(g._initializePromise=g._storageCache.loadFromStorage().then(function(){g._isInitializationComplete=!0})),b},"PUBLIC").setMultipleInstances(!0)),(0,u.registerVersion)("@firebase/remote-config","0.3.8"),(0,u.registerVersion)("@firebase/remote-config","0.3.8","esm2017");var Ce="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Re=(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(Re||(Re={})),Re);function Ae(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,s(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Oe(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var Ne="fcm_token_details_db";function Pe(e){return De.apply(this,arguments)}function De(){return(De=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0="databases"in indexedDB,!e.t0){e.next=5;break}return e.next=4,indexedDB.databases();case 4:e.t0=!e.sent.map(function(e){return e.name}).includes(Ne);case 5:if(!e.t0){e.next=7;break}return e.abrupt("return",null);case 7:return n=null,e.next=10,(0,d.X3)(Ne,5,{upgrade:(r=(0,o.Z)(regeneratorRuntime.mark(function e(r,i,a,o){var u,s,c,l,h,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i<2)){e.next=2;break}return e.abrupt("return");case 2:if(r.objectStoreNames.contains("fcm_token_object_Store")){e.next=4;break}return e.abrupt("return");case 4:return s=o.objectStore("fcm_token_object_Store"),e.next=7,s.index("fcmSenderId").get(t);case 7:return c=e.sent,e.next=10,s.clear();case 10:if(!c){e.next=19;break}if(2!==i){e.next=18;break}if((l=c).auth&&l.p256dh&&l.endpoint){e.next=15;break}return e.abrupt("return");case 15:n={token:l.fcmToken,createTime:null!==(u=l.createTime)&&void 0!==u?u:Date.now(),subscriptionOptions:{auth:l.auth,p256dh:l.p256dh,endpoint:l.endpoint,swScope:l.swScope,vapidKey:"string"==typeof l.vapidKey?l.vapidKey:Ae(l.vapidKey)}},e.next=19;break;case 18:3===i?n={token:(h=c).fcmToken,createTime:h.createTime,subscriptionOptions:{auth:Ae(h.auth),p256dh:Ae(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:Ae(h.vapidKey)}}:4===i&&(n={token:(f=c).fcmToken,createTime:f.createTime,subscriptionOptions:{auth:Ae(f.auth),p256dh:Ae(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:Ae(f.vapidKey)}});case 19:case"end":return e.stop()}},e)})),function(e,t,n,i){return r.apply(this,arguments)})});case 10:return e.sent.close(),e.next=13,(0,d.Lj)(Ne);case 13:return e.next=15,(0,d.Lj)("fcm_vapid_details_db");case 15:return e.next=17,(0,d.Lj)("undefined");case 17:return e.abrupt("return",Le(n)?n:null);case 18:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Le(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}var Me=null;function Ue(){return Me||(Me=(0,d.X3)("firebase-messaging-database",1,{upgrade:function(e,t){switch(t){case 0:e.createObjectStore("firebase-messaging-store")}}})),Me}function Fe(e){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=ze(t),e.next=3,Ue();case 3:return r=e.sent,e.next=6,r.transaction("firebase-messaging-store").objectStore("firebase-messaging-store").get(n);case 6:if(!(i=e.sent)){e.next=9;break}return e.abrupt("return",i);case 9:return e.next=11,Pe(t.appConfig.senderId);case 11:if(!(a=e.sent)){e.next=16;break}return e.next=15,Ze(t,a);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ze(e,t){return qe.apply(this,arguments)}function qe(){return(qe=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=ze(t),e.next=3,Ue();case 3:return i=e.sent.transaction("firebase-messaging-store","readwrite"),e.next=6,i.objectStore("firebase-messaging-store").put(n,r);case 6:return e.next=8,i.done;case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function je(e){return Be.apply(this,arguments)}function Be(){return(Be=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=ze(t),e.next=3,Ue();case 3:return r=e.sent.transaction("firebase-messaging-store","readwrite"),e.next=6,r.objectStore("firebase-messaging-store").delete(n);case 6:return e.next=8,r.done;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ze(e){return e.appConfig.appId}var He=new c.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ge(e,t){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe(t);case 2:return r=e.sent,i=tt(n),a={method:"POST",headers:r,body:JSON.stringify(i)},e.prev=5,e.next=8,fetch($e(t.appConfig),a);case 8:return u=e.sent,e.next=11,u.json();case 11:o=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(5),He.create("token-subscribe-failed",{errorInfo:e.t0});case 17:if(!o.error){e.next=19;break}throw He.create("token-subscribe-failed",{errorInfo:o.error.message});case 19:if(o.token){e.next=21;break}throw He.create("token-subscribe-no-token");case 21:return e.abrupt("return",o.token);case 22:case"end":return e.stop()}},e,null,[[5,14]])}))).apply(this,arguments)}function We(e,t){return Je.apply(this,arguments)}function Je(){return(Je=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe(t);case 2:return r=e.sent,i=tt(n.subscriptionOptions),a={method:"PATCH",headers:r,body:JSON.stringify(i)},e.prev=5,e.next=8,fetch("".concat($e(t.appConfig),"/").concat(n.token),a);case 8:return u=e.sent,e.next=11,u.json();case 11:o=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(5),He.create("token-update-failed",{errorInfo:e.t0});case 17:if(!o.error){e.next=19;break}throw He.create("token-update-failed",{errorInfo:o.error.message});case 19:if(o.token){e.next=21;break}throw He.create("token-update-no-token");case 21:return e.abrupt("return",o.token);case 22:case"end":return e.stop()}},e,null,[[5,14]])}))).apply(this,arguments)}function Ye(e,t){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe(t);case 2:return e.t0=e.sent,r={method:"DELETE",headers:e.t0},e.prev=4,e.next=7,fetch("".concat($e(t.appConfig),"/").concat(n),r);case 7:return i=e.sent,e.next=10,i.json();case 10:if(!(a=e.sent).error){e.next=13;break}throw He.create("token-unsubscribe-failed",{errorInfo:a.error.message});case 13:e.next=18;break;case 15:throw e.prev=15,e.t1=e.catch(4),He.create("token-unsubscribe-failed",{errorInfo:e.t1});case 18:case"end":return e.stop()}},e,null,[[4,15]])}))).apply(this,arguments)}function $e(e){var t=e.projectId;return"https://fcmregistrations.googleapis.com/v1/projects/".concat(t,"/registrations")}function Xe(e){return et.apply(this,arguments)}function et(){return(et=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appConfig,r=t.installations,e.next=3,r.getToken();case 3:return i=e.sent,e.abrupt("return",new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(i)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tt(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,a={web:{endpoint:r,auth:n,p256dh:t}};return i!==Ce&&(a.web.applicationPubKey=i),a}function nt(e){return rt.apply(this,arguments)}function rt(){return(rt=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt(t.swRegistration,t.vapidKey);case 2:return n=e.sent,r={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:n.endpoint,auth:Ae(n.getKey("auth")),p256dh:Ae(n.getKey("p256dh"))},e.next=6,Fe(t.firebaseDependencies);case 6:if(!(i=e.sent)){e.next=19;break}if(!ft(i.subscriptionOptions,r)){e.next=10;break}return e.abrupt("return",Date.now()>=i.createTime+6048e5?ot(t,{token:i.token,createTime:Date.now(),subscriptionOptions:r}):i.token);case 10:return e.prev=10,e.next=13,Ye(t.firebaseDependencies,i.token);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),console.warn(e.t0);case 18:case 19:return e.abrupt("return",st(t.firebaseDependencies,r));case 20:case"end":return e.stop()}},e,null,[[10,15]])}))).apply(this,arguments)}function it(e){return at.apply(this,arguments)}function at(){return(at=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe(t.firebaseDependencies);case 2:if(n=e.sent,e.t0=n,!e.t0){e.next=9;break}return e.next=7,Ye(t.firebaseDependencies,n.token);case 7:return e.next=9,je(t.firebaseDependencies);case 9:return e.next=11,t.swRegistration.pushManager.getSubscription();case 11:return r=e.sent,e.abrupt("return",!r||r.unsubscribe());case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ot(e,t){return ut.apply(this,arguments)}function ut(){return(ut=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,We(t.firebaseDependencies,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{token:r,createTime:Date.now()}),e.next=7,Ze(t.firebaseDependencies,i);case 7:return e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,it(t);case 14:throw e.t0;case 15:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function st(e,t){return ct.apply(this,arguments)}function ct(){return(ct=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge(t,n);case 2:return e.t0=e.sent,e.t1=Date.now(),e.t2=n,r={token:e.t0,createTime:e.t1,subscriptionOptions:e.t2},e.next=8,Ze(t,r);case 8:return e.abrupt("return",r.token);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function lt(e,t){return ht.apply(this,arguments)}function ht(){return(ht=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pushManager.getSubscription();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Oe(n)});case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ft(e,t){return t.vapidKey===e.vapidKey&&t.endpoint===e.endpoint&&t.auth===e.auth&&t.p256dh===e.p256dh}function dt(e){var t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}(t,e),t}function pt(e){return"object"==typeof e&&!!e&&"google.c.a.c_id"in e}function vt(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function gt(e){return He.create("missing-app-config-values",{valueName:e})}vt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),vt("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");var mt=function(){function e(t,n,r){v(this,e),this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;var i=function(e){if(!e||!e.options)throw gt("App Configuration Object");if(!e.name)throw gt("App Name");for(var t=e.options,n=0,r=["projectId","apiKey","appId","messagingSenderId"];n<r.length;n++){var i=r[n];if(!t[i])throw gt(i)}return{appName:e.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(t);this.firebaseDependencies={app:t,appConfig:i,installations:n,analyticsProvider:r}}return p(e,[{key:"_delete",value:function(){return Promise.resolve()}}]),e}();function yt(e){return kt.apply(this,arguments)}function kt(){return(kt=(0,o.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"});case 3:t.swRegistration=e.sent,t.swRegistration.update().catch(function(){}),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),He.create("failed-service-worker-registration",{browserErrorMessage:e.t0.message});case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function bt(e,t){return wt.apply(this,arguments)}function wt(){return(wt=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n||t.swRegistration,e.t0){e.next=4;break}return e.next=4,yt(t);case 4:if(!n&&t.swRegistration){e.next=8;break}if(n instanceof ServiceWorkerRegistration){e.next=7;break}throw He.create("invalid-sw-registration");case 7:t.swRegistration=n;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _t(e,t){return xt.apply(this,arguments)}function xt(){return(xt=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n?t.vapidKey=n:t.vapidKey||(t.vapidKey=Ce);case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Tt(){return(Tt=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator){e.next=2;break}throw He.create("only-available-in-window");case 2:if(e.t0="default"===Notification.permission,!e.t0){e.next=6;break}return e.next=6,Notification.requestPermission();case 6:if("granted"===Notification.permission){e.next=8;break}throw He.create("permission-blocked");case 8:return e.next=10,_t(t,null==n?void 0:n.vapidKey);case 10:return e.next=12,bt(t,null==n?void 0:n.serviceWorkerRegistration);case 12:return e.abrupt("return",nt(t));case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function St(e,t,n){return It.apply(this,arguments)}function It(){return(It=(0,o.Z)(regeneratorRuntime.mark(function e(t,n,r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Et(n),e.next=3,t.firebaseDependencies.analyticsProvider.get();case 3:e.sent.logEvent(i,{message_id:r["google.c.a.c_id"],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Et(e){switch(e){case Re.NOTIFICATION_CLICKED:return"notification_open";case Re.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ct(){return(Ct=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=n.data).isFirebaseMessaging){e.next=3;break}return e.abrupt("return");case 3:if(t.onMessageHandler&&r.messageType===Re.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(dt(r)):t.onMessageHandler.next(dt(r))),i=r.data,e.t0=pt(i)&&"1"===i["google.c.a.e"],!e.t0){e.next=9;break}return e.next=9,St(t,r.messageType,i);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Rt(){return(Rt=(0,o.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.eu)();case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",!1);case 8:return e.abrupt("return","undefined"!=typeof window&&(0,c.hl)()&&(0,c.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"));case 9:case"end":return e.stop()}},e,null,[[0,5]])}))).apply(this,arguments)}(0,u._registerComponent)(new h.wA("messaging",function(e){var t=new mt(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",function(e){return function(e,t){return Ct.apply(this,arguments)}(t,e)}),t},"PUBLIC")),(0,u._registerComponent)(new h.wA("messaging-internal",function(e){var t=e.getProvider("messaging").getImmediate();return{getToken:function(e){return function(e,t){return Tt.apply(this,arguments)}(t,e)}}},"PRIVATE")),(0,u.registerVersion)("@firebase/messaging","0.9.13"),(0,u.registerVersion)("@firebase/messaging","0.9.13","esm2017");var At="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ot="https://www.googletagmanager.com/gtag/js",Nt=new f.Yd("@firebase/analytics");function Pt(e){return Promise.all(e.map(function(e){return e.catch(function(e){return e})}))}function Dt(e,t){var n=document.createElement("script");n.src="".concat(Ot,"?l=").concat(e,"&id=").concat(t),n.async=!0,document.head.appendChild(n)}function Lt(e,t,n,r,i,a){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,o.Z)(regeneratorRuntime.mark(function e(t,n,r,i,a,o){var u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=i[a],e.prev=1,!u){e.next=7;break}return e.next=5,n[u];case 5:e.next=14;break;case 7:return e.next=9,Pt(r);case 9:if(s=e.sent.find(function(e){return e.measurementId===a}),e.t0=s,!e.t0){e.next=14;break}return e.next=14,n[s.appId];case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(1),Nt.error(e.t1);case 19:t("config",a,o);case 20:case"end":return e.stop()}},e,null,[[1,16]])}))).apply(this,arguments)}function Ut(e,t,n,r,i){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,o.Z)(regeneratorRuntime.mark(function e(t,n,r,i,a){var o,u,s,c,h,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=[],!a||!a.send_to){e.next=26;break}return u=a.send_to,Array.isArray(u)||(u=[u]),e.next=7,Pt(r);case 7:s=e.sent,c=l(u),e.prev=9,f=function(){var e=h.value,t=s.find(function(t){return t.measurementId===e}),r=t&&n[t.appId];if(!r)return o=[],"break";o.push(r)},c.s();case 12:if((h=c.n()).done){e.next=18;break}if("break"!==f()){e.next=16;break}return e.abrupt("break",18);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),c.e(e.t0);case 23:return e.prev=23,c.f(),e.finish(23);case 26:return 0===o.length&&(o=Object.values(n)),e.next=29,Promise.all(o);case 29:t("event",i,a||{}),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0),Nt.error(e.t1);case 35:case"end":return e.stop()}},e,null,[[0,32],[9,20,23,26]])}))).apply(this,arguments)}function Vt(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(Ot))return r}return null}var Zt=new c.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),qt=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;v(this,e),this.throttleMetadata=t,this.intervalMillis=n}return p(e,[{key:"getThrottleMetadata",value:function(e){return this.throttleMetadata[e]}},{key:"setThrottleMetadata",value:function(e,t){this.throttleMetadata[e]=t}},{key:"deleteThrottleMetadata",value:function(e){delete this.throttleMetadata[e]}}]),e}());function jt(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function Bt(e){return zt.apply(this,arguments)}function zt(){return(zt=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,u,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appId,i=t.apiKey,a={method:"GET",headers:jt(i)},o=At.replace("{app-id}",r),e.next=6,fetch(o,a);case 6:if(200===(u=e.sent).status||304===u.status){e.next=19;break}return s="",e.prev=9,e.next=12,u.json();case 12:c=e.sent,(null===(n=c.error)||void 0===n?void 0:n.message)&&(s=c.error.message),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(9);case 18:throw Zt.create("config-fetch-failed",{httpStatus:u.status,responseMessage:s});case 19:return e.abrupt("return",u.json());case 20:case"end":return e.stop()}},e,null,[[9,16]])}))).apply(this,arguments)}function Ht(e){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,u,s,c,l,h=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:qt,r=h.length>2?h[2]:void 0,i=t.options,a=i.appId,u=i.apiKey,s=i.measurementId,a){e.next=5;break}throw Zt.create("no-app-id");case 5:if(u){e.next=9;break}if(!s){e.next=8;break}return e.abrupt("return",{measurementId:s,appId:a});case 8:throw Zt.create("no-api-key");case 9:return c=n.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Qt,e.abrupt("return",(setTimeout((0,o.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l.abort();case 1:case"end":return e.stop()}},e)})),void 0!==r?r:6e4),Kt({appId:a,apiKey:u,measurementId:s},c,l,n)));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Kt(e,t,n){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,o.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u,s,l,h,f,d=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.throttleEndTimeMillis,a=n.backoffCount,o=d.length>3&&void 0!==d[3]?d[3]:qt,u=t.appId,s=t.measurementId,e.prev=3,e.next=6,Jt(r,i);case 6:e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(3),!s){e.next=12;break}return e.abrupt("return",(Nt.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ".concat(s,' provided in the "measurementId" field in the local Firebase config. [').concat(e.t0.message,"]")),{appId:u,measurementId:s}));case 12:throw e.t0;case 13:return e.prev=13,e.next=16,Bt(t);case 16:return l=e.sent,e.abrupt("return",(o.deleteThrottleMetadata(u),l));case 20:if(e.prev=20,e.t1=e.catch(13),Yt(e.t1)){e.next=26;break}if(o.deleteThrottleMetadata(u),!s){e.next=25;break}return e.abrupt("return",(Nt.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ".concat(s,' provided in the "measurementId" field in the local Firebase config. [').concat(e.t1.message,"]")),{appId:u,measurementId:s}));case 25:throw e.t1;case 26:return h=503===Number(e.t1.customData.httpStatus)?(0,c.$s)(a,o.intervalMillis,30):(0,c.$s)(a,o.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:a+1},e.abrupt("return",(o.setThrottleMetadata(u,f),Nt.debug("Calling attemptFetch again in ".concat(h," millis")),Kt(t,f,r,o)));case 28:case"end":return e.stop()}},e,null,[[3,8],[13,20]])}))).apply(this,arguments)}function Jt(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener(function(){clearTimeout(a),r(Zt.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function Yt(e){if(!(e instanceof c.ZR&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var Qt=function(){function e(){v(this,e),this.listeners=[]}return p(e,[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach(function(e){return e()})}}]),e}();function $t(){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,o.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,c.hl)()){e.next=2;break}return e.abrupt("return",(Nt.warn(Zt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1));case 2:return e.prev=2,e.next=5,(0,c.eu)();case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",(Nt.warn(Zt.create("indexeddb-unavailable",{errorInfo:e.t0}).message),!1));case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}},e,null,[[2,7]])}))).apply(this,arguments)}function en(){return(en=(0,o.Z)(regeneratorRuntime.mark(function e(t,n,i,a,o,u,s){var c,l,h,f,d,p,v,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(l=Ht(t)).then(function(e){i[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Nt.warn("The measurement ID in the local Firebase config (".concat(t.options.measurementId,") does not match the measurement ID fetched from the server (").concat(e.measurementId,"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config."))}).catch(function(e){return Nt.error(e)}),n.push(l),h=$t().then(function(e){return e?a.getId():void 0}),e.next=5,Promise.all([l,h]);case 5:return f=e.sent,d=r(f,2),p=d[0],v=d[1],Vt()||Dt(u,p.measurementId),o("js",new Date),g=null!==(c=null==s?void 0:s.config)&&void 0!==c?c:{},e.abrupt("return",(g.origin="firebase",g.update=!0,null!=v&&(g.firebase_id=v),o("config",p.measurementId,g),p.measurementId));case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}var tn,nn,rn=function(){function e(t){v(this,e),this.app=t}return p(e,[{key:"_delete",value:function(){return delete an[this.app.options.appId],Promise.resolve()}}]),e}(),an={},on=[],un={},sn=!1;function cn(){return(cn=(0,o.Z)(regeneratorRuntime.mark(function e(t,n,r,i,a){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!a.global){e.next=4;break}t("event",r,i),e.next=8;break;case 4:return e.next=6,n;case 6:o=e.sent,t("event",r,Object.assign(Object.assign({},i),{send_to:o}));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ln(){return(ln=(0,o.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,c.ru)()){e.next=2;break}return e.abrupt("return",!1);case 2:if((0,c.zI)()){e.next=4;break}return e.abrupt("return",!1);case 4:if((0,c.hl)()){e.next=6;break}return e.abrupt("return",!1);case 6:return e.prev=6,e.next=9,(0,c.eu)();case 9:return e.abrupt("return",e.sent);case 12:return e.prev=12,e.t0=e.catch(6),e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,null,[[6,12]])}))).apply(this,arguments)}(0,u._registerComponent)(new h.wA("analytics",function(e,t){var n=t.options;return function(e,t,n){!function(){var e=[];if((0,c.ru)()&&e.push("This is a browser extension environment."),(0,c.zI)()||e.push("Cookies are not available."),e.length>0){var t=e.map(function(e,t){return"(".concat(t+1,") ").concat(e)}).join(" "),n=Zt.create("invalid-analytics-context",{errorInfo:t});Nt.warn(n.message)}}();var r,i=e.options.appId;if(!i)throw Zt.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Zt.create("no-api-key");Nt.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '.concat(e.options.measurementId,' provided in the "measurementId" field in the local Firebase config.'))}if(null!=an[i])throw Zt.create("already-exists",{id:i});if(!sn){r=[],Array.isArray(window.dataLayer)?r=window.dataLayer:window.dataLayer=r;var a=function(e,t,n,r,i){var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window.dataLayer.push(arguments)};return window.gtag&&"function"==typeof window.gtag&&(a=window.gtag),window.gtag=function(e,t,n,r){function i(){return(i=(0,o.Z)(regeneratorRuntime.mark(function i(a,o,u){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,"event"!==a){i.next=6;break}return i.next=4,Ut(e,t,n,o,u);case 4:i.next=12;break;case 6:if("config"!==a){i.next=11;break}return i.next=9,Lt(e,t,n,r,o,u);case 9:i.next=12;break;case 11:e("set",o);case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(0),Nt.error(i.t0);case 17:case"end":return i.stop()}},i,null,[[0,14]])}))).apply(this,arguments)}return function(e,t,n){return i.apply(this,arguments)}}(a,e,t,n),{gtagCore:a,wrappedGtag:window.gtag}}(an,on,un),u=a.wrappedGtag,s=a.gtagCore;nn=u,tn=s,sn=!0}return an[i]=function(e,t,n,r,i,a,o){return en.apply(this,arguments)}(e,on,un,t,tn,"dataLayer",n),new rn(e)}(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),(0,u._registerComponent)(new h.wA("analytics-internal",function(e){try{var t=e.getProvider("analytics").getImmediate();return{logEvent:function(e,n,r){return function(e,t,n,r){e=(0,c.m9)(e),function(e,t,n,r,i){return cn.apply(this,arguments)}(nn,an[e.app.options.appId],t,n,r).catch(function(e){return Nt.error(e)})}(t,e,n,r)}}}catch(n){throw Zt.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),(0,u.registerVersion)("@firebase/analytics","0.7.9"),(0,u.registerVersion)("@firebase/analytics","0.7.9","esm2017");var hn=n(7771),fn=n(3637),dn=n(7574),pn=n(3342),vn=n(9746),gn=n(3101),mn=new i.GfV("7.3.0");function yn(e,t,n){if(t){if(1===t.length)return t[0];var r=t.filter(function(e){return e.app===n});if(1===r.length)return r[0]}return n.container.getProvider(e).getImmediate({optional:!0})}globalThis.__angularfire_symbol__analyticsIsSupported||(globalThis.__angularfire_symbol__analyticsIsSupported=function(){return ln.apply(this,arguments)}().then(function(e){return globalThis.__angularfire_symbol__analyticsIsSupportedValue=e}).catch(function(){return globalThis.__angularfire_symbol__analyticsIsSupportedValue=!1})),globalThis.__angularfire_symbol__messagingIsSupported||(globalThis.__angularfire_symbol__messagingIsSupported=function(){return Rt.apply(this,arguments)}().then(function(e){return globalThis.__angularfire_symbol__messagingIsSupportedValue=e}).catch(function(){return globalThis.__angularfire_symbol__messagingIsSupportedValue=!1})),globalThis.__angularfire_symbol__remoteConfigIsSupported||(globalThis.__angularfire_symbol__remoteConfigIsSupported=function(){return Ee.apply(this,arguments)}().then(function(e){return globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=e}).catch(function(){return globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=!1}));var kn=function(e,t){var n=t?[t]:(0,a.C6)(),r=[];return n.forEach(function(t){t.container.getProvider(e).instances.forEach(function(e){r.includes(e)||r.push(e)})}),r};function bn(){}var wn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hn.N;v(this,e),this.zone=t,this.delegate=n}return p(e,[{key:"now",value:function(){return this.delegate.now()}},{key:"schedule",value:function(e,t,n){var r=this.zone;return this.delegate.schedule(function(t){var n=this;r.runGuarded(function(){e.apply(n,[t])})},t,n)}}]),e}(),_n=function(){function e(t){v(this,e),this.zone=t,this.task=null}return p(e,[{key:"call",value:function(e,t){var n=this.unscheduleTask.bind(this);return this.task=this.zone.run(function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",bn,{},bn,bn)}),t.pipe((0,pn.b)({next:n,complete:n,error:n})).subscribe(e).add(n)}},{key:"unscheduleTask",value:function(){var e=this;setTimeout(function(){null!=e.task&&"scheduled"===e.task.state&&(e.task.invoke(),e.task=null)},10)}}]),e}(),xn=function(){var e=p(function e(t){v(this,e),this.ngZone=t,this.outsideAngular=t.runOutsideAngular(function(){return new wn(Zone.current)}),this.insideAngular=t.run(function(){return new wn(Zone.current,fn.z)}),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)});return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.R0b))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function Tn(){var e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return e}function Sn(e){return Tn().ngZone.runOutsideAngular(function(){return e()})}function In(e){return Tn().ngZone.run(function(){return e()})}function En(e){return e.pipe((0,vn.QV)(Tn().outsideAngular))}function Cn(e){return Tn(),(t=Tn(),function(e){return(e=e.lift(new _n(t.ngZone))).pipe((0,gn.R)(t.outsideAngular),(0,vn.QV)(t.insideAngular))})(e);var t}var Rn=function(e,t){return function(){var n=arguments;return t&&setTimeout(function(){"scheduled"===t.state&&t.invoke()},10),In(function(){return e.apply(void 0,n)})}},An=function(e,t){return function(){for(var n,r=this,i=arguments,a=0;a<arguments.length;a++)"function"==typeof i[a]&&(t&&(n||(n=In(function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",bn,{},bn,bn)}))),i[a]=Rn(i[a],n));var o=Sn(function(){return e.apply(r,i)});if(!t){if(o instanceof dn.y){var u=Tn();return o.pipe((0,gn.R)(u.outsideAngular),(0,vn.QV)(u.insideAngular))}return In(function(){return o})}return o instanceof dn.y?o.pipe(Cn):o instanceof Promise?In(function(){return new Promise(function(e,t){return o.then(function(t){return In(function(){return e(t)})},function(e){return In(function(){return t(e)})})})}):"function"==typeof o&&n?function(){return setTimeout(function(){n&&"scheduled"===n.state&&n.invoke()},10),o.apply(this,arguments)}:In(function(){return o})}}},156:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(3854),i=n(8604),a=n(279),o=n(9306),u=function(){function e(t,n){var r=this;v(this,e),this._delegate=t,this.firebase=n,(0,a._addComponent)(t,new i.wA("app-compat",function(){return r},"PUBLIC")),this.container=t.container}return p(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise(function(t){e._delegate.checkDestroyed(),t()}).then(function(){return e.firebase.INTERNAL.removeApp(e.name),(0,a.deleteApp)(e._delegate)})}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a._DEFAULT_ENTRY_NAME;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a._DEFAULT_ENTRY_NAME;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){(0,a._addComponent)(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){(0,a._addOrOverwriteComponent)(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),s=new r.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),c=function e(){var t=function(e){var t={},n={__esModule:!0,initializeApp:function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=a.initializeApp(i,o);if((0,r.r3)(t,u.name))return t[u.name];var s=new e(u,n);return t[u.name]=s,s},app:i,registerVersion:a.registerVersion,setLogLevel:a.setLogLevel,onLog:a.onLog,apps:null,SDK_VERSION:a.SDK_VERSION,INTERNAL:{registerComponent:function(t){var o=t.name,u=o.replace("-compat","");if(a._registerComponent(t)&&"PUBLIC"===t.type){var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!=typeof e[u])throw s.create("invalid-app-argument",{appName:o});return e[u]()};void 0!==t.serviceProps&&(0,r.ZB)(c,t.serviceProps),n[u]=c,e.prototype[u]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this._getService.bind(this,o).apply(this,t.multipleInstances?n:[])}}return"PUBLIC"===t.type?n[u]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:a}};function i(e){if(!(0,r.r3)(t,e=e||a._DEFAULT_ENTRY_NAME))throw s.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(function(e){return t[e]})}}),i.App=e,n}(u);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.ZB)(t,e)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),t}(),l=new o.Yd("@firebase/app-compat");if((0,r.jU)()&&void 0!==self.firebase){l.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var h=self.firebase.SDK_VERSION;h&&h.indexOf("LITE")>=0&&l.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var f=c;(0,a.registerVersion)("@firebase/app-compat","0.1.25",void 0)},279:function(e,t,r){"use strict";var i;r.r(t),r.d(t,{FirebaseError:function(){return c.ZR},SDK_VERSION:function(){return R},_DEFAULT_ENTRY_NAME:function(){return m},_addComponent:function(){return w},_addOrOverwriteComponent:function(){return _},_apps:function(){return k},_clearComponents:function(){return I},_components:function(){return b},_getProvider:function(){return T},_registerComponent:function(){return x},_removeServiceInstance:function(){return S},deleteApp:function(){return P},getApp:function(){return O},getApps:function(){return N},initializeApp:function(){return A},onLog:function(){return M},registerVersion:function(){return L},setLogLevel:function(){return U}});var a=r(6304),o=r(8604),u=r(9306),c=r(3854),h=r(6508),f=function(){function e(t){v(this,e),this.container=t}return p(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map(function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(function(e){return e}).join(" ")}}]),e}(),d="@firebase/app",g=new u.Yd("@firebase/app"),m="[DEFAULT]",y=(n(i={},d,"fire-core"),n(i,"@firebase/app-compat","fire-core-compat"),n(i,"@firebase/analytics","fire-analytics"),n(i,"@firebase/analytics-compat","fire-analytics-compat"),n(i,"@firebase/app-check","fire-app-check"),n(i,"@firebase/app-check-compat","fire-app-check-compat"),n(i,"@firebase/auth","fire-auth"),n(i,"@firebase/auth-compat","fire-auth-compat"),n(i,"@firebase/database","fire-rtdb"),n(i,"@firebase/database-compat","fire-rtdb-compat"),n(i,"@firebase/functions","fire-fn"),n(i,"@firebase/functions-compat","fire-fn-compat"),n(i,"@firebase/installations","fire-iid"),n(i,"@firebase/installations-compat","fire-iid-compat"),n(i,"@firebase/messaging","fire-fcm"),n(i,"@firebase/messaging-compat","fire-fcm-compat"),n(i,"@firebase/performance","fire-perf"),n(i,"@firebase/performance-compat","fire-perf-compat"),n(i,"@firebase/remote-config","fire-rc"),n(i,"@firebase/remote-config-compat","fire-rc-compat"),n(i,"@firebase/storage","fire-gcs"),n(i,"@firebase/storage-compat","fire-gcs-compat"),n(i,"@firebase/firestore","fire-fst"),n(i,"@firebase/firestore-compat","fire-fst-compat"),n(i,"fire-js","fire-js"),n(i,"firebase","fire-js-all"),i),k=new Map,b=new Map;function w(e,t){try{e.container.addComponent(t)}catch(n){g.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function _(e,t){e.container.addOrOverwriteComponent(t)}function x(e){var t=e.name;if(b.has(t))return g.debug("There were multiple attempts to register component ".concat(t,".")),!1;b.set(t,e);var n,r=l(k.values());try{for(r.s();!(n=r.n()).done;){w(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function T(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;T(e,t).clearInstance(n)}function I(){b.clear()}var E=new c.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."}),C=function(){function e(t,n,r){var i=this;v(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new o.wA("app",function(){return i},"PUBLIC"))}return p(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw E.create("app-deleted",{appName:this._name})}}]),e}(),R="9.8.1";function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"object"!=typeof t&&(t={name:t});var n=Object.assign({name:m,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw E.create("bad-app-name",{appName:String(r)});var i=k.get(r);if(i){if((0,c.vZ)(e,i.options)&&(0,c.vZ)(n,i.config))return i;throw E.create("duplicate-app",{appName:r})}var a,u=new o.H0(r),s=l(b.values());try{for(s.s();!(a=s.n()).done;){var h=a.value;u.addComponent(h)}}catch(d){s.e(d)}finally{s.f()}var f=new C(e,n,u);return k.set(r,f),f}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=k.get(e);if(!t)throw E.create("no-app",{appName:e});return t}function N(){return Array.from(k.values())}function P(e){return D.apply(this,arguments)}function D(){return(D=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,e.t0=k.has(n),!e.t0){e.next=7;break}return k.delete(n),e.next=6,Promise.all(t.container.getProviders().map(function(e){return e.delete()}));case 6:t.isDeleted=!0;case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function L(e,t,n){var r,i=null!==(r=y[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),u=t.match(/\s|\//);if(a||u){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&u&&s.push("and"),u&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void g.warn(s.join(" "))}x(new o.wA("".concat(i,"-version"),function(){return{library:i,version:t}},"VERSION"))}function M(e,t){if(null!==e&&"function"!=typeof e)throw E.create("invalid-log-argument");(0,u.Am)(e,t)}function U(e){(0,u.Ub)(e)}var F="firebase-heartbeat-store",V=null;function Z(){return V||(V=(0,h.X3)("firebase-heartbeat-database",1,{upgrade:function(e,t){switch(t){case 0:e.createObjectStore(F)}}}).catch(function(e){throw E.create("storage-open",{originalErrorMessage:e.message})})),V}function q(){return(q=(0,a.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z();case 3:return e.abrupt("return",e.sent.transaction(F).objectStore(F).get(z(t)));case 6:throw e.prev=6,e.t0=e.catch(0),E.create("storage-get",{originalErrorMessage:e.t0.message});case 9:case"end":return e.stop()}},e,null,[[0,6]])}))).apply(this,arguments)}function j(e,t){return B.apply(this,arguments)}function B(){return(B=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z();case 3:return r=e.sent.transaction(F,"readwrite"),i=r.objectStore(F),e.next=7,i.put(n,z(t));case 7:return e.abrupt("return",r.done);case 10:throw e.prev=10,e.t0=e.catch(0),E.create("storage-set",{originalErrorMessage:e.t0.message});case 13:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function z(e){return"".concat(e.name,"!").concat(e.options.appId)}var H=function(){function e(t){var n=this;v(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new K(r),this._heartbeatsCachePromise=this._storage.read().then(function(e){return n._heartbeatsCache=e,e})}return p(e,[{key:"triggerHeartbeat",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=G(),t.t0=null===e._heartbeatsCache,!t.t0){t.next=6;break}return t.next=5,e._heartbeatsCachePromise;case 5:e._heartbeatsCache=t.sent;case 6:if(e._heartbeatsCache.lastSentHeartbeatDate===r||e._heartbeatsCache.heartbeats.some(function(e){return e.date===r})){t.next=8;break}return t.abrupt("return",(e._heartbeatsCache.heartbeats.push({date:r,agent:n}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),e._storage.overwrite(e._heartbeatsCache)));case 8:case"end":return t.stop()}},t)}))()}},{key:"getHeartbeatsHeader",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===e._heartbeatsCache,!t.t0){t.next=4;break}return t.next=4,e._heartbeatsCachePromise;case 4:if(null!==e._heartbeatsCache&&0!==e._heartbeatsCache.heartbeats.length){t.next=6;break}return t.abrupt("return","");case 6:if(n=G(),r=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=l(e);try{var o=function(){var e=t.value,a=r.find(function(t){return t.agent===e.agent});if(a){if(a.dates.push(e.date),W(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),W(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}(e._heartbeatsCache.heartbeats),i=r.heartbeatsToSend,a=r.unsentEntries,o=(0,c.L)(JSON.stringify({version:2,heartbeats:i})),e._heartbeatsCache.lastSentHeartbeatDate=n,!(a.length>0)){t.next=14;break}return e._heartbeatsCache.heartbeats=a,t.next=12,e._storage.overwrite(e._heartbeatsCache);case 12:t.next=15;break;case 14:e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache);case 15:return t.abrupt("return",o);case 16:case"end":return t.stop()}},t)}))()}}]),e}();function G(){return(new Date).toISOString().substring(0,10)}var K=function(){function e(t){v(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return p(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){return(0,a.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!!(0,c.hl)()&&(0,c.eu)().then(function(){return!0}).catch(function(){return!1}));case 1:case"end":return e.stop()}},e)}))()}},{key:"read",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._canUseIndexedDBPromise;case 2:if(t.t1=t.sent,!t.t1){t.next=7;break}return t.next=6,function(e){return q.apply(this,arguments)}(e.app);case 6:t.t1=t.sent;case 7:if(t.t0=t.t1,t.t0){t.next=10;break}t.t0={heartbeats:[]};case 10:return t.abrupt("return",t.t0);case 11:case"end":return t.stop()}},t)}))()}},{key:"overwrite",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t._canUseIndexedDBPromise;case 2:if(!n.sent){n.next=7;break}return n.next=5,t.read();case 5:return i=n.sent,n.abrupt("return",j(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats}));case 7:case"end":return n.stop()}},n)}))()}},{key:"add",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t._canUseIndexedDBPromise;case 2:if(!n.sent){n.next=7;break}return n.next=5,t.read();case 5:return i=n.sent,n.abrupt("return",j(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:i.lastSentHeartbeatDate,heartbeats:[].concat(s(i.heartbeats),s(e.heartbeats))}));case 7:case"end":return n.stop()}},n)}))()}}]),e}();function W(e){return(0,c.L)(JSON.stringify({version:2,heartbeats:e})).length}x(new o.wA("platform-logger",function(e){return new f(e)},"PRIVATE")),x(new o.wA("heartbeat",function(e){return new H(e)},"PRIVATE")),L(d,"0.7.24",""),L(d,"0.7.24","esm2017"),L("fire-js","")},8882:function(e,t,i){"use strict";i.d(t,{$:function(){return sn},A:function(){return b},B:function(){return w},G:function(){return Be},H:function(){return Ge},J:function(){return vt},L:function(){return Te},M:function(){return Tt},N:function(){return Ct},P:function(){return Qr},Q:function(){return Rt},R:function(){return Vr},T:function(){return At},U:function(){return Et},V:function(){return Nt},W:function(){return Pt},X:function(){return Ft},Y:function(){return Xt},Z:function(){return tn},_:function(){return rn},a:function(){return hr},a0:function(){return dn},a1:function(){return vn},a2:function(){return mn},a3:function(){return kn},a4:function(){return wn},a5:function(){return xn},a6:function(){return Sn},a7:function(){return In},a8:function(){return Cn},a9:function(){return Rn},aA:function(){return Di},aB:function(){return Ai},aC:function(){return ki},aD:function(){return yi},aE:function(){return qe},aI:function(){return dr},aL:function(){return Ot},aa:function(){return Pn},ab:function(){return Ln},ac:function(){return Un},af:function(){return qn},ag:function(){return Bn},ah:function(){return zn},ak:function(){return Bt},al:function(){return Xn},an:function(){return nr},ao:function(){return or},ap:function(){return Me},aq:function(){return P},ar:function(){return Le},as:function(){return Ne},at:function(){return I},au:function(){return ea},av:function(){return Ui},aw:function(){return E},ax:function(){return O},ay:function(){return L},az:function(){return Se},b:function(){return lr},c:function(){return oi},d:function(){return li},e:function(){return si},f:function(){return _i},g:function(){return Ii},h:function(){return Ti},i:function(){return Er},j:function(){return Ci},k:function(){return ta},l:function(){return Br},m:function(){return ra},o:function(){return y},r:function(){return Hr},s:function(){return qr},u:function(){return Jr}});var a=i(6304),u=i(3854),c=i(279);function h(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}var f=i(9306),d=i(8604),y={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},b={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"},w=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},_=new u.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),x=new f.Yd("@firebase/auth");function S(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];x.logLevel<=f.in.ERROR&&x.error.apply(x,["Auth (".concat(c.SDK_VERSION,"): ").concat(e)].concat(n))}function I(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw A.apply(void 0,[e].concat(n))}function E(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return A.apply(void 0,[e].concat(n))}function C(e,t,r){var i=Object.assign(Object.assign({},{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),n({},t,r));return new u.LL("auth","Firebase",i).create(t,{appName:e.name})}function R(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&I(e,"argument-error"),C(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.Did you pass a reference from a different Auth SDK?"))}function A(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!=typeof e){var i,a=n[0],o=s(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(s(o)))}return _.create.apply(_,[e].concat(n))}function O(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!e)throw A.apply(void 0,[t].concat(r))}function N(e){var t="INTERNAL ASSERTION FAILED: "+e;throw S(t),new Error(t)}function P(e,t){e||N(t)}var D=new Map;function L(e){P(e instanceof Function,"Expected a class definition");var t=D.get(e);return t?(P(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,D.set(e,t),t)}function M(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function U(){return"http:"===F()||"https:"===F()}function F(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var V=function(){function e(t,n){v(this,e),this.shortDelay=t,this.longDelay=n,P(n>t,"Short delay should be less than long delay!"),this.isMobile=(0,u.uI)()||(0,u.b$)()}return p(e,[{key:"get",value:function(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(U()||(0,u.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Z(e,t){P(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var q=function(){function e(){v(this,e)}return p(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void N("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void N("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void N("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),j={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},B=new V(3e4,6e4);function z(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function H(e,t,n,r){return G.apply(this,arguments)}function G(){return(G=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var o,s=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>4&&void 0!==s[4]?s[4]:{},e.abrupt("return",K(t,o,(0,a.Z)(regeneratorRuntime.mark(function e(){var a,o,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=(0,u.xO)(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=5,t._getAdditionalHeaders();case 5:return c=e.sent,e.abrupt("return",(c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),q.fetch()(Q(t,t.config.apiHost,r,s),Object.assign({method:n,headers:c,referrerPolicy:"no-referrer"},a))));case 7:case"end":return e.stop()}},e)}))));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function K(e,t,n){return W.apply(this,arguments)}function W(){return(W=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,i){var a,o,s,c,l,h,f,d,p,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,a=Object.assign(Object.assign({},j),n),e.prev=2,o=new $(t),e.next=6,Promise.race([i(),o.promise]);case 6:return s=e.sent,o.clearNetworkTimeout(),e.next=10,s.json();case 10:if(!("needConfirmation"in(c=e.sent))){e.next=13;break}throw X(t,"account-exists-with-different-credential",c);case 13:if(!s.ok||"errorMessage"in c){e.next=15;break}return e.abrupt("return",c);case 15:if(l=s.ok?c.errorMessage:c.error.message,h=l.split(" : "),f=r(h,2),d=f[0],p=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==d){e.next=18;break}throw X(t,"credential-already-in-use",c);case 18:if("EMAIL_EXISTS"!==d){e.next=20;break}throw X(t,"email-already-in-use",c);case 20:if(v=a[d]||d.toLowerCase().replace(/[_\s]+/g,"-"),!p){e.next=23;break}throw C(t,v,p);case 23:I(t,v),e.next=31;break;case 26:if(e.prev=26,e.t0=e.catch(2),!(e.t0 instanceof u.ZR)){e.next=30;break}throw e.t0;case 30:I(t,"network-request-failed");case 31:case"end":return e.stop()}},e,null,[[2,26]])}))).apply(this,arguments)}function J(e,t,n,r){return Y.apply(this,arguments)}function Y(){return(Y=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,u=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,H(t,n,r,i,a);case 3:return o=e.sent,e.abrupt("return",("mfaPendingCredential"in o&&I(t,"multi-factor-auth-required",{_serverResponse:o}),o));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Q(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Z(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var $=function(){function e(t){var n=this;v(this,e),this.auth=t,this.timer=null,this.promise=new Promise(function(e,t){n.timer=setTimeout(function(){return t(E(n.auth,"network-request-failed"))},B.get())})}return p(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function X(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=E(e,t,r);return i.customData._tokenResponse=n,i}function ee(){return(ee=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function te(e,t){return ne.apply(this,arguments)}function ne(){return(ne=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function re(e,t){return ie.apply(this,arguments)}function ie(){return(ie=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ae(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function oe(){return(oe=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,s,c=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],r=(0,u.m9)(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,O((a=se(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"==typeof a.firebase?a.firebase:void 0,s=null==o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:ae(ue(a.auth_time)),issuedAtTime:ae(ue(a.iat)),expirationTime:ae(ue(a.exp)),signInProvider:s||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null});case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ue(e){return 1e3*Number(e)}function se(e){var t=r(e.split("."),3),n=t[0],i=t[1],a=t[2];if(void 0===n||void 0===i||void 0===a)return S("JWT malformed, contained fewer than 3 sections"),null;try{var o=(0,u.tV)(i);return o?JSON.parse(o):(S("Failed to decode base64 JWT payload"),null)}catch(s){return S("Caught error parsing JWT payload as JSON",s),null}}function ce(e,t){return le.apply(this,arguments)}function le(){return(le=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),e.t1=e.t0 instanceof u.ZR&&he(e.t0)&&t.auth.currentUser===t,!e.t1){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}},e,null,[[3,9]])}))).apply(this,arguments)}function he(e){var t=e.code;return"auth/user-disabled"===t||"auth/user-token-expired"===t}var fe=function(){function e(t){v(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return p(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;if(this.isRunning){var n=this.getInterval(e);this.timerId=setTimeout((0,a.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.iteration();case 2:case"end":return e.stop()}},e)})),n)}}},{key:"iteration",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.user.getIdToken(!0);case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return",void("auth/network-request-failed"===t.t0.code&&e.schedule(!0)));case 8:e.schedule();case 9:case"end":return t.stop()}},t,null,[[0,5]])}))()}}]),e}(),de=function(){function e(t,n){v(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return p(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=ae(this.lastLoginAt),this.creationTime=ae(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function pe(e){return ve.apply(this,arguments)}function ve(){return(ve=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,u,s,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,ce(t,re(r,{idToken:i}));case 6:O(null==(a=e.sent)?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?ye(o.providerUserInfo):[],s=me(t.providerData,u),c=!!t.isAnonymous&&!(t.email&&o.passwordHash||(null==s?void 0:s.length)),l={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new de(o.createdAt,o.lastLoginAt),isAnonymous:c},Object.assign(t,l);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ge(){return(ge=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,u.m9)(t),e.next=3,pe(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function me(e,t){return[].concat(s(e.filter(function(e){return!t.some(function(t){return t.providerId===e.providerId})})),s(t))}function ye(e){return e.map(function(e){var t=e.providerId,n=h(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function ke(){return(ke=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t,{},(0,a.Z)(regeneratorRuntime.mark(function e(){var r,i,a,o,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,u.xO)({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=Q(t,a,"/v1/token","key=".concat(o)),e.next=7,t._getAdditionalHeaders();case 7:return c=e.sent,e.abrupt("return",(c["Content-Type"]="application/x-www-form-urlencoded",q.fetch()(s,{method:"POST",headers:c,body:r})));case 9:case"end":return e.stop()}},e)})));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var be=function(){function e(){v(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return p(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){O(e.idToken,"internal-error"),O(void 0!==e.idToken,"internal-error"),O(void 0!==e.refreshToken,"internal-error");var t,n,r="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):(t=e.idToken,O(n=se(t),"internal-error"),O(void 0!==n.exp,"internal-error"),O(void 0!==n.iat,"internal-error"),Number(n.exp)-Number(n.iat));this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}},{key:"getToken",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return(0,a.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(O(!n.accessToken||n.refreshToken,e,"user-token-expired"),!t&&n.accessToken&&!n.isExpired){r.next=12;break}if(!n.refreshToken){r.next=8;break}return r.next=5,n.refresh(e,n.refreshToken);case 5:r.t1=n.accessToken,r.next=9;break;case 8:r.t1=null;case 9:r.t0=r.t1,r.next=13;break;case 12:r.t0=n.accessToken;case 13:return r.abrupt("return",r.t0);case 14:case"end":return r.stop()}},r)}))()}},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(e,t){var n=this;return(0,a.Z)(regeneratorRuntime.mark(function r(){var i,a,o,u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e,t){return ke.apply(this,arguments)}(e,t);case 2:i=r.sent,a=i.accessToken,o=i.refreshToken,u=i.expiresIn,n.updateTokensAndExpiration(a,o,Number(u));case 7:case"end":return r.stop()}},r)}))()}},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return N("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(O("string"==typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(O("string"==typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(O("number"==typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function we(e,t){O("string"==typeof e||void 0===e,"internal-error",{appName:t})}var _e,xe=function(){function e(t){v(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=h(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?s(a.providerData):[],this.metadata=new de(a.createdAt||void 0,a.lastLoginAt||void 0)}return p(e,[{key:"getIdToken",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ce(t,t.stsTokenManager.getToken(t.auth,e));case 2:if(O(r=n.sent,t.auth,"internal-error"),n.t0=t.accessToken!==r,!n.t0){n.next=10;break}return t.accessToken=r,n.next=9,t.auth._persistUserIfCurrent(t);case 9:t.auth._notifyListenersIfCurrent(t);case 10:return n.abrupt("return",r);case 11:case"end":return n.stop()}},n)}))()}},{key:"getIdTokenResult",value:function(e){return function(e){return oe.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return ge.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(O(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(function(e){return Object.assign({},e)}),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){O(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return(0,a.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(i=!1,e.idToken&&e.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(e),i=!0),r.t0=t,!r.t0){r.next=6;break}return r.next=6,pe(n);case 6:return r.next=8,n.auth._persistUserIfCurrent(n);case 8:i&&n.auth._notifyListenersIfCurrent(n);case 9:case"end":return r.stop()}},r)}))()}},{key:"delete",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getIdToken();case 2:return n=t.sent,t.next=5,ce(e,function(e,t){return ee.apply(this,arguments)}(e.auth,{idToken:n}));case 5:return e.stsTokenManager.clearRefreshToken(),t.abrupt("return",e.auth.signOut());case 7:case"end":return t.stop()}},t)}))()}},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(function(e){return Object.assign({},e)}),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,g=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;O(k&&x,t,"internal-error");var T=be.fromJSON(this.name,x);O("string"==typeof k,t,"internal-error"),we(h,t.name),we(f,t.name),O("boolean"==typeof b,t,"internal-error"),O("boolean"==typeof w,t,"internal-error"),we(d,t.name),we(p,t.name),we(v,t.name),we(g,t.name),we(m,t.name),we(y,t.name);var S=new e({uid:k,auth:t,email:f,emailVerified:b,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:T,createdAt:m,lastLoginAt:y});return _&&Array.isArray(_)&&(S.providerData=_.map(function(e){return Object.assign({},e)})),g&&(S._redirectEventId=g),S}},{key:"_fromIdTokenResponse",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,a.Z)(regeneratorRuntime.mark(function i(){var a,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return(a=new be).updateFromServerResponse(n),o=new e({uid:n.localId,auth:t,stsTokenManager:a,isAnonymous:r}),i.next=5,pe(o);case 5:return i.abrupt("return",o);case 6:case"end":return i.stop()}},i)}))()}}]),e}(),Te=((_e=function(){function e(){v(this,e),this.type="NONE",this.storage={}}return p(e,[{key:"_isAvailable",value:function(){return(0,a.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}},e)}))()}},{key:"_set",value:function(e,t){var n=this;return(0,a.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n.storage[e]=t;case 1:case"end":return r.stop()}},r)}))()}},{key:"_get",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.storage[e],n.abrupt("return",void 0===r?null:r);case 2:case"end":return n.stop()}},n)}))()}},{key:"_remove",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:delete t.storage[e];case 1:case"end":return n.stop()}},n)}))()}},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}()).type="NONE",_e);function Se(e,t,n){return"firebase:".concat(e,":").concat(t,":").concat(n)}var Ie=function(){function e(t,n,r){v(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Se(this.userKey,a.apiKey,o),this.fullPersistenceKey=Se("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return p(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.persistence._get(e.fullUserKey);case 2:return n=t.sent,t.abrupt("return",n?xe._fromJSON(e.auth,n):null);case 4:case"end":return t.stop()}},t)}))()}},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.persistence!==e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.getCurrentUser();case 4:return r=n.sent,n.next=7,t.removeCurrentUser();case 7:return t.persistence=e,n.abrupt("return",r?t.setCurrentUser(r):void 0);case 9:case"end":return n.stop()}},n)}))()}},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";return(0,a.Z)(regeneratorRuntime.mark(function i(){var o,u,s,c,h,f,d,p,v,g;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n.length){i.next=2;break}return i.abrupt("return",new e(L(Te),t,r));case 2:return i.next=4,Promise.all(n.map(function(){var e=(0,a.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 4:o=i.sent.filter(function(e){return e}),u=o[0]||L(Te),s=Se(r,t.config.apiKey,t.name),c=null,h=l(n),i.prev=9,h.s();case 11:if((f=h.n()).done){i.next=27;break}return d=f.value,i.prev=13,i.next=16,d._get(s);case 16:if(!(p=i.sent)){i.next=21;break}return v=xe._fromJSON(t,p),d!==u&&(c=v),u=d,i.abrupt("break",27);case 21:i.next=25;break;case 23:i.prev=23,i.t0=i.catch(13);case 25:i.next=11;break;case 27:i.next=32;break;case 29:i.prev=29,i.t1=i.catch(9),h.e(i.t1);case 32:return i.prev=32,h.f(),i.finish(32);case 35:if(g=o.filter(function(e){return e._shouldAllowMigration}),!u._shouldAllowMigration||!g.length){i.next=47;break}if(u=g[0],i.t3=c,!i.t3){i.next=42;break}return i.next=42,u._set(s,c.toJSON());case 42:return i.next=44,Promise.all(n.map(function(){var e=(0,a.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===u){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}},e,null,[[1,6]])}));return function(t){return e.apply(this,arguments)}}()));case 44:i.t2=new e(u,t,r),i.next=48;break;case 47:i.t2=new e(u,t,r);case 48:return i.abrupt("return",i.t2);case 49:case"end":return i.stop()}},i,null,[[9,29,32,35],[13,23]])}))()}}]),e}();function Ee(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Oe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ce(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Pe(t))return"Blackberry";if(De(t))return"Webos";if(Re(t))return"Safari";if((t.includes("chrome/")||Ae(t))&&!t.includes("edge/"))return"Chrome";if(Ne(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null==n?void 0:n.length)?n[1]:"Other"}function Ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,u.z$)();return/firefox\//i.test(e)}function Re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,u.z$)(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,u.z$)();return/crios\//i.test(e)}function Oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,u.z$)();return/iemobile/i.test(e)}function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,u.z$)();return/android/i.test(e)}function Pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,u.z$)();return/blackberry/i.test(e)}function De(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,u.z$)();return/webos/i.test(e)}function Le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,u.z$)();return/iphone|ipad|ipod/i.test(e)}function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,u.z$)();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}function Ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,u.z$)();return Le(e)||Ne(e)||De(e)||Pe(e)||/windows phone/i.test(e)||Oe(e)}function Fe(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ee((0,u.z$)());break;case"Worker":t="".concat(Ee((0,u.z$)()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/JsCore/").concat(c.SDK_VERSION,"/").concat(r)}var Ve=function(){function e(t){v(this,e),this.auth=t,this.queue=[]}return p(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise(function(n,r){try{n(e(t))}catch(i){r(i)}})};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r,i,a,o,u,s,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.auth.currentUser!==e){n.next=2;break}return n.abrupt("return");case 2:r=[],n.prev=3,i=l(t.queue),n.prev=5,i.s();case 7:if((a=i.n()).done){n.next=14;break}return o=a.value,n.next=11,o(e);case 11:o.onAbort&&r.push(o.onAbort);case 12:n.next=7;break;case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(5),i.e(n.t0);case 19:return n.prev=19,i.f(),n.finish(19);case 22:n.next=30;break;case 24:n.prev=24,n.t1=n.catch(3),r.reverse(),u=l(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(h){}}}catch(f){u.e(f)}finally{u.f()}throw t.auth._errorFactory.create("login-blocked",{originalMessage:n.t1.message});case 30:case"end":return n.stop()}},n,null,[[3,24],[5,16,19,22]])}))()}}]),e}(),Ze=function(){function e(t,n,r){v(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new je(this),this.idTokenSubscription=new je(this),this.beforeStateQueue=new Ve(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return p(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=L(t)),this._initializationPromise=this.queue((0,a.Z)(regeneratorRuntime.mark(function r(){var i,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=!n._deleted,!r.t0){r.next=6;break}return r.next=4,Ie.create(n,e);case 4:n.persistenceManager=r.sent,r.t0=!n._deleted;case 6:if(!r.t0){r.next=19;break}if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t1=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,n._deleted||(n._isInitialized=!0);case 19:case"end":return r.stop()}},r,null,[[8,13]])}))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._deleted){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.assertedPersistence.getCurrentUser();case 4:if(n=t.sent,!e.currentUser&&!n){t.next=19;break}if(!e.currentUser||!n||e.currentUser.uid!==n.uid){t.next=13;break}return e._currentUser._assign(n),t.next=10,e.currentUser.getIdToken();case 10:t.t1=void t.sent,t.next=16;break;case 13:return t.next=15,e._updateCurrentUser(n,!0);case 15:t.t1=void t.sent;case 16:t.t0=t.t1,t.next=20;break;case 19:t.t0=void 0;case 20:return t.abrupt("return",t.t0);case 21:case"end":return t.stop()}},t)}))()}},{key:"initializeCurrentUser",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r,i,a,o,u,s,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.getCurrentUser();case 2:if(i=n.sent,a=i,o=!1,!e||!t.config.authDomain){n.next=13;break}return n.next=7,t.getOrInitRedirectPersistenceManager();case 7:return u=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,s=null==a?void 0:a._redirectEventId,n.next=11,t.tryRedirectSignIn(e);case 11:c=n.sent,u&&u!==s||!(null==c?void 0:c.user)||(a=c.user,o=!0);case 13:if(a){n.next=15;break}return n.abrupt("return",t.directlySetCurrentUser(null));case 15:if(a._redirectEventId){n.next=26;break}if(!o){n.next=25;break}return n.prev=17,n.next=20,t.beforeStateQueue.runMiddleware(a);case 20:n.next=25;break;case 22:n.prev=22,n.t0=n.catch(17),a=i,t._popupRedirectResolver._overrideRedirectResult(t,function(){return Promise.reject(n.t0)});case 25:return n.abrupt("return",a?t.reloadAndSetCurrentUserOrClear(a):t.directlySetCurrentUser(null));case 26:return O(t._popupRedirectResolver,t,"argument-error"),n.next=29,t.getOrInitRedirectPersistenceManager();case 29:return n.abrupt("return",t.redirectUser&&t.redirectUser._redirectEventId===a._redirectEventId?t.directlySetCurrentUser(a):t.reloadAndSetCurrentUserOrClear(a));case 30:case"end":return n.stop()}},n,null,[[17,22]])}))()}},{key:"tryRedirectSignIn",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=null,n.prev=1,n.next=4,t._popupRedirectResolver._completeRedirectFn(t,e,!0);case 4:r=n.sent,n.next=11;break;case 7:return n.prev=7,n.t0=n.catch(1),n.next=11,t._setRedirectUser(null);case 11:return n.abrupt("return",r);case 12:case"end":return n.stop()}},n,null,[[1,7]])}))()}},{key:"reloadAndSetCurrentUserOrClear",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,pe(e);case 3:n.next=9;break;case 5:if(n.prev=5,n.t0=n.catch(0),"auth/network-request-failed"===n.t0.code){n.next=9;break}return n.abrupt("return",t.directlySetCurrentUser(null));case 9:return n.abrupt("return",t.directlySetCurrentUser(e));case 10:case"end":return n.stop()}},n,null,[[0,5]])}))()}},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"==typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e._deleted=!0;case 1:case"end":return t.stop()}},t)}))()}},{key:"updateCurrentUser",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e?(0,u.m9)(e):null,n.abrupt("return",(r&&O(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))));case 2:case"end":return n.stop()}},n)}))()}},{key:"_updateCurrentUser",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return(0,a.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n._deleted){r.next=7;break}if(e&&O(n.tenantId===e.tenantId,n,"tenant-id-mismatch"),r.t0=t,r.t0){r.next=6;break}return r.next=6,n.beforeStateQueue.runMiddleware(e);case 6:return r.abrupt("return",n.queue((0,a.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.directlySetCurrentUser(e);case 2:n.notifyAuthListeners();case 3:case"end":return t.stop()}},t)}))));case 7:case"end":return r.stop()}},r)}))()}},{key:"signOut",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.beforeStateQueue.runMiddleware(null);case 2:if(t.t0=e.redirectPersistenceManager||e._popupRedirectResolver,!t.t0){t.next=6;break}return t.next=6,e._setRedirectUser(null);case 6:return t.abrupt("return",e._updateCurrentUser(null,!0));case 7:case"end":return t.stop()}},t)}))()}},{key:"setPersistence",value:function(e){var t=this;return this.queue((0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(L(e));case 2:case"end":return n.stop()}},n)})))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new u.LL("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(e,t){var n=this;return(0,a.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.getOrInitRedirectPersistenceManager(t);case 2:return i=r.sent,r.abrupt("return",null===e?i.removeCurrentUser():i.setCurrentUser(e));case 4:case"end":return r.stop()}},r)}))()}},{key:"getOrInitRedirectPersistenceManager",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.redirectPersistenceManager){n.next=9;break}return O(r=e&&L(e)||t._popupRedirectResolver,t,"argument-error"),n.next=5,Ie.create(t,[L(r._redirectPersistence)],"redirectUser");case 5:return t.redirectPersistenceManager=n.sent,n.next=8,t.redirectPersistenceManager.getCurrentUser();case 8:t.redirectUser=n.sent;case 9:return n.abrupt("return",t.redirectPersistenceManager);case 10:case"end":return n.stop()}},n)}))()}},{key:"_redirectUserForId",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=t._isInitialized,!n.t0){n.next=4;break}return n.next=4,t.queue((0,a.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})));case 4:return n.abrupt("return",(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null);case 5:case"end":return n.stop()}},n)}))()}},{key:"_persistUserIfCurrent",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e!==t.currentUser){n.next=2;break}return n.abrupt("return",t.queue((0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.directlySetCurrentUser(e));case 1:case"end":return n.stop()}},n)}))));case 2:case"end":return n.stop()}},n)}))()}},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return O(o,this,"internal-error"),o.then(function(){return a(i.currentUser)}),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.currentUser&&t.currentUser!==e&&(t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh()),t.currentUser=e,!e){n.next=7;break}return n.next=5,t.assertedPersistence.setCurrentUser(e);case 5:n.next=9;break;case 7:return n.next=9,t.assertedPersistence.removeCurrentUser();case 9:case"end":return n.stop()}},n)}))()}},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return O(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Fe(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={"X-Client-Version":e.clientVersion},e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId),t.next=4,null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();case 4:return i=t.sent,t.abrupt("return",(i&&(r["X-Firebase-Client"]=i),r));case 6:case"end":return t.stop()}},t)}))()}}]),e}();function qe(e){return(0,u.m9)(e)}var je=function(){function e(t){var n=this;v(this,e),this.auth=t,this.observer=null,this.addObserver=(0,u.ne)(function(e){return n.observer=e})}return p(e,[{key:"next",get:function(){return O(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Be(e,t,n){var i=qe(e);O(i._canInitEmulator,i,"emulator-config-failed"),O(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");var a=!!(null==n?void 0:n.disableWarnings),o=ze(t),u=function(e){var t=ze(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var i=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){var o=a[1];return{host:o,port:He(i.substr(o.length+1))}}var u=r(i.split(":"),2);return{host:u[0],port:He(u[1])}}(t),s=u.host,c=u.port;i.config.emulator={url:"".concat(o,"//").concat(s).concat(null===c?"":":".concat(c),"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})}),a||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ze(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function He(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Ge=function(){function e(t,n){v(this,e),this.providerId=t,this.signInMethod=n}return p(e,[{key:"toJSON",value:function(){return N("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return N("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return N("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return N("not implemented")}}]),e}();function Ke(e,t){return We.apply(this,arguments)}function We(){return(We=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:resetPassword",z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Je(e,t){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qe(e,t){return $e.apply(this,arguments)}function $e(){return($e=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:update",z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xe(){return(Xe=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J(t,"POST","/v1/accounts:signInWithPassword",z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function et(e,t){return tt.apply(this,arguments)}function tt(){return(tt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:sendOobCode",z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function nt(e,t){return rt.apply(this,arguments)}function rt(){return(rt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",et(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function it(e,t){return at.apply(this,arguments)}function at(){return(at=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",et(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ot(e,t){return ut.apply(this,arguments)}function ut(){return(ut=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",et(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function st(e,t){return ct.apply(this,arguments)}function ct(){return(ct=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",et(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function lt(){return(lt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J(t,"POST","/v1/accounts:signInWithEmailLink",z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ht(){return(ht=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J(t,"POST","/v1/accounts:signInWithEmailLink",z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ft=function(e){g(n,e);var t=m(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return v(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return p(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=t.signInMethod,n.next="password"===n.t0?3:"emailLink"===n.t0?4:5;break;case 3:return n.abrupt("return",function(e,t){return Xe.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password}));case 4:return n.abrupt("return",function(e,t){return lt.apply(this,arguments)}(e,{email:t._email,oobCode:t._password}));case 5:I(e,"internal-error");case 6:case"end":return n.stop()}},n)}))()}},{key:"_linkToIdToken",value:function(e,t){var n=this;return(0,a.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=n.signInMethod,r.next="password"===r.t0?3:"emailLink"===r.t0?4:5;break;case 3:return r.abrupt("return",Je(e,{idToken:t,returnSecureToken:!0,email:n._email,password:n._password}));case 4:return r.abrupt("return",function(e,t){return ht.apply(this,arguments)}(e,{idToken:t,email:n._email,oobCode:n._password}));case 5:I(e,"internal-error");case 6:case"end":return r.stop()}},r)}))()}},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Ge);function dt(e,t){return pt.apply(this,arguments)}function pt(){return(pt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J(t,"POST","/v1/accounts:signInWithIdp",z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var vt=function(e){g(n,e);var t=m(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return p(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return dt(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,dt(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,dt(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,u.xO)(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):I("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=h(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Ge);function gt(e,t){return mt.apply(this,arguments)}function mt(){return(mt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:sendVerificationCode",z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yt(){return(yt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J(t,"POST","/v1/accounts:signInWithPhoneNumber",z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function kt(){return(kt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t,"POST","/v1/accounts:signInWithPhoneNumber",z(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw X(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var bt={USER_NOT_FOUND:"user-not-found"};function wt(){return(wt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J(t,"POST","/v1/accounts:signInWithPhoneNumber",z(t,Object.assign(Object.assign({},n),{operation:"REAUTH"})),bt));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var _t=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,"phone","phone")).params=e,r}return p(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return yt.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return kt.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return wt.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Ge),xt=function(){function e(t){var n,r,i,a,o,s;v(this,e);var c=(0,u.zd)((0,u.pd)(t)),l=null!==(n=c.apiKey)&&void 0!==n?n:null,h=null!==(r=c.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);O(l&&h&&f,"argument-error"),this.apiKey=l,this.operation=f,this.code=h,this.continueUrl=null!==(a=c.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=c.tenantId)&&void 0!==s?s:null}return p(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=(0,u.zd)((0,u.pd)(e)).link,n=t?(0,u.zd)((0,u.pd)(t)).deep_link_id:null,r=(0,u.zd)((0,u.pd)(e)).deep_link_id;return(r?(0,u.zd)((0,u.pd)(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}(),Tt=function(){var e=function(){function e(){v(this,e),this.providerId=e.PROVIDER_ID}return p(e,null,[{key:"credential",value:function(e,t){return ft._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=xt.parseLink(t);return O(n,"argument-error"),ft._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e}(),St=function(){function e(t){v(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return p(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),It=function(e){g(n,e);var t=m(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments)).scopes=[],e}return p(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return s(this.scopes)}}]),n}(St),Et=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return O(e.idToken||e.accessToken,"argument-error"),vt._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;return O("providerId"in t&&"signInMethod"in t,"argument-error"),vt._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!(i||a||r||o))return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(It),Ct=function(){var e=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.call(this,"facebook.com")}return p(n,null,[{key:"credential",value:function(e){return vt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(It);return e.FACEBOOK_SIGN_IN_METHOD="facebook.com",e.PROVIDER_ID="facebook.com",e}(),Rt=function(){var e=function(e){g(n,e);var t=m(n);function n(){var e;return v(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return p(n,null,[{key:"credential",value:function(e,t){return vt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(It);return e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com",e}(),At=function(){var e=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.call(this,"github.com")}return p(n,null,[{key:"credential",value:function(e){return vt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(It);return e.GITHUB_SIGN_IN_METHOD="github.com",e.PROVIDER_ID="github.com",e}(),Ot=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return p(n,[{key:"_getIdTokenResponse",value:function(e){return dt(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,dt(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,dt(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Ge),Nt=function(e){g(n,e);var t=m(n);function n(e){return v(this,n),O(e.startsWith("saml."),"argument-error"),t.call(this,e)}return p(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Ot.fromJSON(e);return O(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Ot._create(r,n)}catch(i){return null}}}]),n}(St),Pt=function(){var e=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.call(this,"twitter.com")}return p(n,null,[{key:"credential",value:function(e,t){return vt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(It);return e.TWITTER_SIGN_IN_METHOD="twitter.com",e.PROVIDER_ID="twitter.com",e}();function Dt(e,t){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J(t,"POST","/v1/accounts:signUp",z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Mt=function(){function e(t){v(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return p(e,null,[{key:"_fromIdTokenResponse",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,a.Z)(regeneratorRuntime.mark(function a(){var o,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,xe._fromIdTokenResponse(t,r,i);case 2:return o=a.sent,u=Ut(r),a.abrupt("return",new e({user:o,providerId:u,_tokenResponse:r,operationType:n}));case 5:case"end":return a.stop()}},a)}))()}},{key:"_forOperation",value:function(t,n,r){return(0,a.Z)(regeneratorRuntime.mark(function i(){var a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t._updateTokensIfNecessary(r,!0);case 2:return a=Ut(r),i.abrupt("return",new e({user:t,providerId:a,_tokenResponse:r,operationType:n}));case 4:case"end":return i.stop()}},i)}))()}}]),e}();function Ut(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Ft(e){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=qe(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Mt({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Dt(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Mt._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Zt=function(e){g(n,e);var t=m(n);function n(e,r,i,a){var o,u;return v(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(k(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return p(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(u.ZR);function qt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(function(n){if("auth/multi-factor-auth-required"===n.code)throw Zt._fromErrorAndOperation(e,n,t,r);throw n})}function jt(e){return new Set(e.map(function(e){return e.providerId}).filter(function(e){return!!e}))}function Bt(e,t){return zt.apply(this,arguments)}function zt(){return(zt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,u.m9)(t),e.next=3,Kt(!0,r,n);case 3:return e.t0=te,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=jt(a||[]),r.providerData=r.providerData.filter(function(e){return o.has(e.providerId)}),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ht(e,t){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=ce,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Mt._forOperation(t,"link",i));case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Kt(e,t,n){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe(n);case 2:i=!1===t?"provider-already-linked":"no-such-provider",O(jt(n.providerData).has(r)===t,n.auth,i);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Jt(e,t){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u,s=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=t.auth,e.prev=2,e.next=5,ce(t,qt(i,"reauthenticate",n,t),r);case 5:return O((a=e.sent).idToken,i,"internal-error"),O(o=se(a.idToken),i,"internal-error"),u=o.sub,e.abrupt("return",(O(t.uid===u,i,"user-mismatch"),Mt._forOperation(t,"reauthenticate",a)));case 13:throw e.prev=13,e.t0=e.catch(2),"auth/user-not-found"===(null==e.t0?void 0:e.t0.code)&&I(i,"user-mismatch"),e.t0;case 16:case"end":return e.stop()}},e,null,[[2,13]])}))).apply(this,arguments)}function Qt(e,t){return $t.apply(this,arguments)}function $t(){return($t=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]&&o[2],e.next=3,qt(t,"signIn",n);case 3:return i=e.sent,e.next=6,Mt._fromIdTokenResponse(t,"signIn",i);case 6:if(a=e.sent,e.t0=r,e.t0){e.next=11;break}return e.next=11,t._updateCurrentUser(a.user);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xt(e,t){return en.apply(this,arguments)}function en(){return(en=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qt(qe(t),n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tn(e,t){return nn.apply(this,arguments)}function nn(){return(nn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,u.m9)(t),e.next=3,Kt(!1,r,n.providerId);case 3:return e.abrupt("return",Ht(r,n));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rn(e,t){return an.apply(this,arguments)}function an(){return(an=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jt((0,u.m9)(t),n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function on(e,t){return un.apply(this,arguments)}function un(){return(un=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J(t,"POST","/v1/accounts:signInWithCustomToken",z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function sn(e,t){return cn.apply(this,arguments)}function cn(){return(cn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=qe(t),e.next=3,on(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Mt._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ln=function(){function e(t,n){v(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return p(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?hn._fromServerResponse(e,t):I(e,"internal-error")}}]),e}(),hn=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return p(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ln);function fn(e,t,n){var r;O((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),O(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(O(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(O(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function dn(e,t,n){return pn.apply(this,arguments)}function pn(){return(pn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,u.m9)(t),a={requestType:"PASSWORD_RESET",email:n},r&&fn(i,a,r),e.next=4,it(i,a);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function vn(e,t,n){return gn.apply(this,arguments)}function gn(){return(gn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ke((0,u.m9)(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mn(e,t){return yn.apply(this,arguments)}function yn(){return(yn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe((0,u.m9)(t),{oobCode:n});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function kn(e,t){return bn.apply(this,arguments)}function bn(){return(bn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,u.m9)(t),e.next=3,Ke(r,{oobCode:n});case 3:i=e.sent,a=i.requestType,e.t0=(O(a,r,"internal-error"),a),e.next="EMAIL_SIGNIN"===e.t0?8:"VERIFY_AND_CHANGE_EMAIL"===e.t0?9:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?11:12;break;case 8:return e.abrupt("break",13);case 9:return O(i.newEmail,r,"internal-error"),e.abrupt("break",13);case 11:O(i.mfaInfo,r,"internal-error");case 12:O(i.email,r,"internal-error");case 13:return o=null,e.abrupt("return",(i.mfaInfo&&(o=ln._fromServerResponse(qe(r),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a}));case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function wn(e,t){return _n.apply(this,arguments)}function _n(){return(_n=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kn((0,u.m9)(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function xn(e,t,n){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=qe(t),e.next=3,Dt(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Mt._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Sn(e,t,n){return Xt((0,u.m9)(e),Tt.credential(t,n))}function In(e,t,n){return En.apply(this,arguments)}function En(){return(En=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,u.m9)(t),a={requestType:"EMAIL_SIGNIN",email:n},O(r.handleCodeInApp,i,"argument-error"),r&&fn(i,a,r),e.next=5,ot(i,a);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Cn(e,t){var n=xt.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}function Rn(e,t,n){return An.apply(this,arguments)}function An(){return(An=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,u.m9)(t),a=Tt.credentialWithLink(n,r||M()),e.abrupt("return",(O(a._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Xt(i,a)));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function On(e,t){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:createAuthUri",z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Pn(e,t){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={identifier:n,continueUri:U()?M():"http://localhost"},e.next=3,On((0,u.m9)(t),r);case 3:return i=e.sent,a=i.signinMethods,e.abrupt("return",a||[]);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ln(e,t){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,u.m9)(t),e.next=3,t.getIdToken();case 3:return e.t0=e.sent,i={requestType:"VERIFY_EMAIL",idToken:e.t0},n&&fn(r.auth,i,n),e.next=8,nt(r.auth,i);case 8:if(a=e.sent,o=a.email,e.t1=o!==t.email,!e.t1){e.next=14;break}return e.next=14,t.reload();case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Un(e,t,n){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,u.m9)(t),e.next=3,t.getIdToken();case 3:return e.t0=e.sent,e.t1=n,a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e.t0,newEmail:e.t1},r&&fn(i.auth,a,r),e.next=9,st(i.auth,a);case 9:if(o=e.sent,s=o.email,e.t2=s!==t.email,!e.t2){e.next=15;break}return e.next=15,t.reload();case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Vn(e,t){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qn(e,t){return jn.apply(this,arguments)}function jn(){return(jn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=(0,u.m9)(t),e.next=6,a.getIdToken();case 6:return e.t0=e.sent,e.t1=r,e.t2=i,e.t3=!0,o={idToken:e.t0,displayName:e.t1,photoUrl:e.t2,returnSecureToken:e.t3},e.next=13,ce(a,Vn(a.auth,o));case 13:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find(function(e){return"password"===e.providerId}))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=19,a._updateTokensIfNecessary(s);case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Bn(e,t){return Hn((0,u.m9)(e),t,null)}function zn(e,t){return Hn((0,u.m9)(e),null,t)}function Hn(e,t,n){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return e.t0=e.sent,e.t1=!0,a={idToken:e.t0,returnSecureToken:e.t1},n&&(a.email=n),r&&(a.password=r),e.next=9,ce(t,Je(i,a));case 9:return o=e.sent,e.next=12,t._updateTokensIfNecessary(o,!0);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Kn=p(function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};v(this,e),this.isNewUser=t,this.providerId=n,this.profile=r}),Wn=function(e){g(n,e);var t=m(n);function n(e,r,i,a){var o;return v(this,n),(o=t.call(this,e,r,i)).username=a,o}return p(n)}(Kn),Jn=function(e){g(n,e);var t=m(n);function n(e,r){return v(this,n),t.call(this,e,"facebook.com",r)}return p(n)}(Kn),Yn=function(e){g(n,e);var t=m(n);function n(e,r){return v(this,n),t.call(this,e,"github.com",r,"string"==typeof(null==r?void 0:r.login)?null==r?void 0:r.login:null)}return p(n)}(Wn),Qn=function(e){g(n,e);var t=m(n);function n(e,r){return v(this,n),t.call(this,e,"google.com",r)}return p(n)}(Kn),$n=function(e){g(n,e);var t=m(n);function n(e,r,i){return v(this,n),t.call(this,e,"twitter.com",r,i)}return p(n)}(Wn);function Xn(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){var o=null===(n=null===(t=se(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Kn(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Jn(a,i);case"github.com":return new Yn(a,i);case"google.com":return new Qn(a,i);case"twitter.com":return new $n(a,i,e.screenName||null);case"custom":case"anonymous":return new Kn(a,null);default:return new Kn(a,r,i)}}(n)}var er=function(){function e(t,n){v(this,e),this.type=t,this.credential=n}return p(e,[{key:"toJSON",value:function(){return{multiFactorSession:n({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null==t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),tr=function(){function e(t,n,r){v(this,e),this.session=t,this.hints=n,this.signInResolver=r}return p(e,[{key:"resolveSignIn",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.signInResolver(e));case 1:case"end":return n.stop()}},n)}))()}}],[{key:"_fromError",value:function(t,n){var r=qe(t),i=n.customData._serverResponse,o=(i.mfaInfo||[]).map(function(e){return ln._fromServerResponse(r,e)});O(i.mfaPendingCredential,r,"internal-error");var u,s=er._fromMfaPendingCredential(i.mfaPendingCredential);return new e(s,o,(u=(0,a.Z)(regeneratorRuntime.mark(function e(t){var a,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,s);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,o=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?8:"reauthenticate"===e.t0?14:15;break;case 8:return e.next=10,Mt._fromIdTokenResponse(r,n.operationType,o);case 10:return u=e.sent,e.next=13,r._updateCurrentUser(u.user);case 13:return e.abrupt("return",u);case 14:return e.abrupt("return",(O(n.user,r,"internal-error"),Mt._forOperation(n.user,n.operationType,o)));case 15:I(r,"internal-error");case 16:case"end":return e.stop()}},e)})),function(e){return u.apply(this,arguments)}))}}]),e}();function nr(e,t){var n,r=(0,u.m9)(e),i=t;return O(t.customData.operationType,r,"argument-error"),O(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),tr._fromError(r,i)}function rr(e,t){return H(e,"POST","/v2/accounts/mfaEnrollment:start",z(e,t))}var ir=function(){function e(t){var n=this;v(this,e),this.user=t,this.enrolledFactors=[],t._onReload(function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map(function(e){return ln._fromServerResponse(t.auth,e)}))})}return p(e,[{key:"getSession",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=er,t.next=3,e.user.getIdToken();case 3:return t.t1=t.sent,t.abrupt("return",t.t0._fromIdtoken.call(t.t0,t.t1));case 5:case"end":return t.stop()}},t)}))()}},{key:"enroll",value:function(e,t){var n=this;return(0,a.Z)(regeneratorRuntime.mark(function r(){var i,a,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i=e,r.next=3,n.getSession();case 3:return a=r.sent,r.next=6,ce(n.user,i._process(n.user.auth,a,t));case 6:return o=r.sent,r.next=9,n.user._updateTokensIfNecessary(o);case 9:return r.abrupt("return",n.user.reload());case 10:case"end":return r.stop()}},r)}))()}},{key:"unenroll",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r,i,a,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r="string"==typeof e?e:e.uid,n.next=3,t.user.getIdToken();case 3:return i=n.sent,n.next=6,ce(t.user,H(o=t.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",z(o,{idToken:i,mfaEnrollmentId:r})));case 6:return a=n.sent,t.enrolledFactors=t.enrolledFactors.filter(function(e){return e.uid!==r}),n.next=10,t.user._updateTokensIfNecessary(a);case 10:return n.prev=10,n.next=13,t.user.reload();case 13:n.next=19;break;case 15:if(n.prev=15,n.t0=n.catch(10),"auth/user-token-expired"===n.t0.code){n.next=19;break}throw n.t0;case 19:case"end":return n.stop()}},n,null,[[10,15]])}))()}}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),ar=new WeakMap;function or(e){var t=(0,u.m9)(e);return ar.has(t)||ar.set(t,ir._fromUser(t)),ar.get(t)}var ur,sr,cr=function(){function e(t,n){v(this,e),this.storageRetriever=t,this.type=n}return p(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}(),lr=((sr=function(e){g(n,e);var t=m(n);function n(){var e,r;return v(this,n),(e=t.call(this,function(){return window.localStorage},"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=(Re(r=(0,u.z$)())||Le(r))&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Ue(),e._shouldAllowMigration=!0,e}return p(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);(0,u.w1)()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys(function(e,n,r){t.notifyListeners(e,r)})}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++)(0,i[r])(t?JSON.parse(t):t)}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(function(){e.forAllChangedKeys(function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(e,t){var r=this,i=this;return(0,a.Z)(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o(T(n.prototype),"_set",r).call(i,e,t);case 2:i.localCache[e]=JSON.stringify(t);case 3:case"end":return a.stop()}},a)}))()}},{key:"_get",value:function(e){var t=this,r=this;return(0,a.Z)(regeneratorRuntime.mark(function i(){var a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,o(T(n.prototype),"_get",t).call(r,e);case 2:return a=i.sent,i.abrupt("return",(r.localCache[e]=JSON.stringify(a),a));case 4:case"end":return i.stop()}},i)}))()}},{key:"_remove",value:function(e){var t=this,r=this;return(0,a.Z)(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,o(T(n.prototype),"_remove",t).call(r,e);case 2:delete r.localCache[e];case 3:case"end":return i.stop()}},i)}))()}}]),n}(cr)).type="LOCAL",sr),hr=((ur=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.call(this,function(){return window.sessionStorage},"SESSION")}return p(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(cr)).type="SESSION",ur),fr=function(){var e=function(){function e(t){v(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return p(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r,i,o,u,s,c,l,h;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=(r=e).data,o=i.eventId,u=i.eventType,s=i.data,null==(c=t.handlersMap[u])?void 0:c.size){n.next=3;break}return n.abrupt("return");case 3:return r.ports[0].postMessage({status:"ack",eventId:o,eventType:u}),l=Array.from(c).map(function(){var e=(0,a.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(r.origin,s));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n.next=7,function(e){return Promise.all(e.map((t=(0,a.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=!0,e.next=4,t;case 4:return e.t1=e.sent,e.abrupt("return",{fulfilled:e.t0,value:e.t1});case 8:return e.prev=8,e.t2=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t2});case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return t.apply(this,arguments)})));var t}(l);case 7:h=n.sent,r.ports[0].postMessage({status:"done",eventId:o,eventType:u,response:h});case 9:case"end":return n.stop()}},n)}))()}},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find(function(e){return e.isListeningto(t)});if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();return e.receivers=[],e}();function dr(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}var pr=function(){function e(t){v(this,e),this.target=t,this.handlers=new Set}return p(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,r=this;return(0,a.Z)(regeneratorRuntime.mark(function i(){var a,o,u;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(a="undefined"!=typeof MessageChannel?new MessageChannel:null){i.next=3;break}throw new Error("connection_unavailable");case 3:return i.abrupt("return",new Promise(function(i,s){var c=dr("",20);a.port1.start();var l=setTimeout(function(){s(new Error("unsupported_event"))},n);u={messageChannel:a,onMessage:function(e){var t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),o=setTimeout(function(){s(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),i(t.data.response);break;default:clearTimeout(l),clearTimeout(o),s(new Error("invalid_response"))}}},r.handlers.add(u),a.port1.addEventListener("message",u.onMessage),r.target.postMessage({eventType:e,eventId:c,data:t},[a.port2])}).finally(function(){u&&r.removeMessageHandler(u)}));case 4:case"end":return i.stop()}},i)}))()}}]),e}();function vr(){return window}function gr(){return void 0!==vr().WorkerGlobalScope&&"function"==typeof vr().importScripts}function mr(){return(mr=(0,a.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return e.abrupt("return",e.sent.active);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",null);case 11:case"end":return e.stop()}},e,null,[[2,8]])}))).apply(this,arguments)}var yr="firebaseLocalStorageDb",kr=function(){function e(t){v(this,e),this.request=t}return p(e,[{key:"toPromise",value:function(){var e=this;return new Promise(function(t,n){e.request.addEventListener("success",function(){t(e.request.result)}),e.request.addEventListener("error",function(){n(e.request.error)})})}}]),e}();function br(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly").objectStore("firebaseLocalStorage")}function wr(){var e=indexedDB.open(yr,1);return new Promise(function(t,n){e.addEventListener("error",function(){n(e.error)}),e.addEventListener("upgradeneeded",function(){var t=e.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(r){n(r)}}),e.addEventListener("success",(0,a.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=e.result).objectStoreNames.contains("firebaseLocalStorage")){n.next=5;break}t(r),n.next=13;break;case 5:return r.close(),n.next=8,function(){var e=indexedDB.deleteDatabase(yr);return new kr(e).toPromise()}();case 8:return n.t0=t,n.next=11,wr();case 11:n.t1=n.sent,(0,n.t0)(n.t1);case 13:case"end":return n.stop()}},n)})))})}function _r(e,t,n){return xr.apply(this,arguments)}function xr(){return(xr=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=br(t,!0).put({fbase_key:n,value:r}),e.abrupt("return",new kr(i).toPromise());case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Tr(){return(Tr=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=br(t,!1).get(n),e.next=3,new kr(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Sr(e,t){var n=br(e,!0).delete(t);return new kr(n).toPromise()}var Ir,Er=((Ir=function(){function e(){v(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(function(){},function(){})}return p(e,[{key:"_openDb",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.db,t.t0){t.next=5;break}return t.next=4,wr();case 4:e.db=t.sent;case 5:return t.abrupt("return",e.db);case 6:case"end":return t.stop()}},t)}))()}},{key:"_withRetries",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=0;case 1:return n.prev=1,n.next=4,t._openDb();case 4:return i=n.sent,n.next=7,e(i);case 7:return n.abrupt("return",n.sent);case 10:if(n.prev=10,n.t0=n.catch(1),!(r++>3)){n.next=14;break}throw n.t0;case 14:t.db&&(t.db.close(),t.db=void 0);case 15:n.next=1;break;case 17:case"end":return n.stop()}},n,null,[[1,10]])}))()}},{key:"initializeServiceWorkerMessaging",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",gr()?e.initializeReceiver():e.initializeSender());case 1:case"end":return t.stop()}},t)}))()}},{key:"initializeReceiver",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.receiver=fr._getInstance(gr()?self:null),e.receiver._subscribe("keyChanged",function(){var t=(0,a.Z)(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._poll();case 2:return t.t0=t.sent.includes(r.key),t.abrupt("return",{keyProcessed:t.t0});case 4:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()),e.receiver._subscribe("ping",function(){var e=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return t.stop()}},t)}))()}},{key:"initializeSender",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(){return mr.apply(this,arguments)}();case 2:if(e.activeServiceWorker=t.sent,e.activeServiceWorker){t.next=5;break}return t.abrupt("return");case 5:return e.sender=new pr(e.activeServiceWorker),t.next=8,e.sender._send("ping",{},800);case 8:(i=t.sent)&&(null===(n=i[0])||void 0===n?void 0:n.fulfilled)&&(null===(r=i[0])||void 0===r?void 0:r.value.includes("keyChanged"))&&(e.serviceWorkerReceiverAvailable=!0);case 10:case"end":return t.stop()}},t)}))()}},{key:"notifyServiceWorker",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.sender||!t.activeServiceWorker||((null===(r=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===r?void 0:r.controller)||null)!==t.activeServiceWorker){n.next=8;break}return n.prev=1,n.next=4,t.sender._send("keyChanged",{key:e},t.serviceWorkerReceiverAvailable?800:50);case 4:n.next=8;break;case 6:n.prev=6,n.t0=n.catch(1);case 8:case"end":return n.stop()}},n,null,[[1,6]])}))()}},{key:"_isAvailable",value:function(){return(0,a.Z)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,wr();case 5:return t=e.sent,e.next=8,_r(t,"__sak","1");case 8:return e.next=10,Sr(t,"__sak");case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,null,[[0,13]])}))()}},{key:"_withPendingWrite",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.pendingWrites++,n.prev=1,n.next=4,e();case 4:return n.prev=4,t.pendingWrites--,n.finish(4);case 7:case"end":return n.stop()}},n,null,[[1,,4,7]])}))()}},{key:"_set",value:function(e,t){var n=this;return(0,a.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",n._withPendingWrite((0,a.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n._withRetries(function(n){return _r(n,e,t)});case 2:return n.localCache[e]=t,r.abrupt("return",n.notifyServiceWorker(e));case 4:case"end":return r.stop()}},r)}))));case 1:case"end":return r.stop()}},r)}))()}},{key:"_get",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t._withRetries(function(t){return function(e,t){return Tr.apply(this,arguments)}(t,e)});case 2:return r=n.sent,n.abrupt("return",(t.localCache[e]=r,r));case 4:case"end":return n.stop()}},n)}))()}},{key:"_remove",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t._withPendingWrite((0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t._withRetries(function(t){return Sr(t,e)});case 2:return delete t.localCache[e],n.abrupt("return",t.notifyServiceWorker(e));case 4:case"end":return n.stop()}},n)}))));case 1:case"end":return n.stop()}},n)}))()}},{key:"_poll",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a,o,u,s,c,h,f,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._withRetries(function(e){var t=br(e,!1).getAll();return new kr(t).toPromise()});case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return",[]);case 5:if(0===e.pendingWrites){t.next=7;break}return t.abrupt("return",[]);case 7:r=[],i=new Set,a=l(n);try{for(a.s();!(o=a.n()).done;)u=o.value,s=u.fbase_key,c=u.value,i.add(s),JSON.stringify(e.localCache[s])!==JSON.stringify(c)&&(e.notifyListeners(s,c),r.push(s))}catch(p){a.e(p)}finally{a.f()}for(h=0,f=Object.keys(e.localCache);h<f.length;h++)d=f[h],e.localCache[d]&&!i.has(d)&&(e.notifyListeners(d,null),r.push(d));return t.abrupt("return",r);case 12:case"end":return t.stop()}},t)}))()}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++)(0,i[r])(t)}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((0,a.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}},t)})),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}()).type="LOCAL",Ir);function Cr(e,t){return H(e,"POST","/v2/accounts/mfaSignIn:start",z(e,t))}function Rr(){return(Rr=(0,a.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ar(e){return new Promise(function(t,n){var r,i,a=document.createElement("script");a.setAttribute("src",e),a.onload=t,a.onerror=function(e){var t=E("internal-error");t.customData=e,n(t)},a.type="text/javascript",a.charset="UTF-8",(null!==(i=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==i?i:document).appendChild(a)})}function Or(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Nr=function(){function e(t){v(this,e),this.auth=t,this.counter=1e12,this._widgets=new Map}return p(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Pr(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||1e12;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t;return(null===(t=this._widgets.get(e||1e12))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(null===(r=t._widgets.get(e||1e12))||void 0===r||r.execute(),""));case 1:case"end":return n.stop()}},n)}))()}}]),e}(),Pr=function(){function e(t,n,r){var i=this;v(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"==typeof t?document.getElementById(t):t;O(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return p(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<50;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout(function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()},6e4)},500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}(),Dr=Or("rcb"),Lr=new V(3e4,6e4),Mr=function(){function e(){v(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!vr().grecaptcha}return p(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return O(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(vr().grecaptcha):new Promise(function(r,i){var a=vr().setTimeout(function(){i(E(e,"network-request-failed"))},Lr.get());vr()[Dr]=function(){vr().clearTimeout(a),delete vr()[Dr];var o=vr().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(E(e,"internal-error"))},Ar("https://www.google.com/recaptcha/api.js??".concat((0,u.xO)({onload:Dr,render:"explicit",hl:n}))).catch(function(){clearTimeout(a),i(E(e,"internal-error"))})})}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!vr().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}(),Ur=function(){function e(){v(this,e)}return p(e,[{key:"load",value:function(e){return(0,a.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Nr(e));case 1:case"end":return t.stop()}},t)}))()}},{key:"clearedOneInstance",value:function(){}}]),e}(),Fr={theme:"light",type:"image"},Vr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Fr),r=arguments.length>2?arguments[2]:void 0;v(this,e),this.parameters=n,this.type="recaptcha",this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=qe(r),this.isInvisible="invisible"===this.parameters.size,O("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"==typeof t?document.getElementById(t):t;O(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ur:new Mr,this.validateStartingState()}return p(e,[{key:"verify",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.assertNotDestroyed(),t.next=3,e.render();case 3:return n=t.sent,r=e.getAssertedRecaptcha(),t.abrupt("return",r.getResponse(n)||new Promise(function(t){e.tokenChangeListeners.add(function n(r){r&&(e.tokenChangeListeners.delete(n),t(r))}),e.isInvisible&&r.execute(n)}));case 6:case"end":return t.stop()}},t)}))()}},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(function(t){throw e.renderPromise=null,t})),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(function(t){e.container.removeChild(t)})}},{key:"validateStartingState",value:function(){O(!this.parameters.sitekey,this.auth,"argument-error"),O(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),O("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach(function(e){return e(n)}),"function"==typeof e)e(n);else if("string"==typeof e){var r=vr()[e];"function"==typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){O(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:if(e.widgetId){t.next=6;break}n=e.container,e.isInvisible||(r=document.createElement("div"),n.appendChild(r),n=r),e.widgetId=e.getAssertedRecaptcha().render(n,e.parameters);case 6:return t.abrupt("return",e.widgetId);case 7:case"end":return t.stop()}},t)}))()}},{key:"init",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return O(U()&&!gr(),e.auth,"internal-error"),t.next=3,function(){var e=null;return new Promise(function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()}).catch(function(t){throw e&&window.removeEventListener("load",e),t})}();case 3:return t.next=5,e._recaptchaLoader.load(e.auth,e.auth.languageCode||void 0);case 5:return e.recaptcha=t.sent,t.next=8,function(e){return Rr.apply(this,arguments)}(e.auth);case 8:O(n=t.sent,e.auth,"internal-error"),e.parameters.sitekey=n;case 10:case"end":return t.stop()}},t)}))()}},{key:"getAssertedRecaptcha",value:function(){return O(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}(),Zr=function(){function e(t,n){v(this,e),this.verificationId=t,this.onConfirmation=n}return p(e,[{key:"confirm",value:function(e){var t=_t._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function qr(e,t,n){return jr.apply(this,arguments)}function jr(){return(jr=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=qe(t),e.next=3,Kr(i,n,(0,u.m9)(r));case 3:return a=e.sent,e.abrupt("return",new Zr(a,function(e){return Xt(i,e)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Br(e,t,n){return zr.apply(this,arguments)}function zr(){return(zr=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,u.m9)(t),e.next=3,Kt(!1,i,"phone");case 3:return e.next=5,Kr(i.auth,n,(0,u.m9)(r));case 5:return a=e.sent,e.abrupt("return",new Zr(a,function(e){return tn(i,e)}));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Hr(e,t,n){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,u.m9)(t),e.next=3,Kr(i.auth,n,(0,u.m9)(r));case 3:return a=e.sent,e.abrupt("return",new Zr(a,function(e){return rn(i,e)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Kr(e,t,n){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u,s,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,O("string"==typeof a,t,"argument-error"),O("recaptcha"===r.type,t,"argument-error"),!("session"in(o="string"==typeof n?{phoneNumber:n}:n))){e.next=17;break}if(u=o.session,!("phoneNumber"in o)){e.next=11;break}return O("enroll"===u.type,t,"internal-error"),e.next=10,rr(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 10:return e.abrupt("return",e.sent.phoneSessionInfo.sessionInfo);case 11:return O("signin"===u.type,t,"internal-error"),O(s=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=16,Cr(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:s,phoneSignInInfo:{recaptchaToken:a}});case 16:return e.abrupt("return",e.sent.phoneResponseInfo.sessionInfo);case 17:return e.next=19,gt(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 19:return c=e.sent,l=c.sessionInfo,e.abrupt("return",l);case 22:return e.prev=22,r._reset(),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[3,,22,25]])}))).apply(this,arguments)}function Jr(e,t){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht((0,u.m9)(t),n);case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Qr=function(){var e=function(){function e(t){v(this,e),this.providerId=e.PROVIDER_ID,this.auth=qe(t)}return p(e,[{key:"verifyPhoneNumber",value:function(e,t){return Kr(this.auth,e,(0,u.m9)(t))}}],[{key:"credential",value:function(e,t){return _t._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){return e.credentialFromTaggedObject(t)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?_t._fromTokenResponse(n,r):null}}]),e}();return e.PROVIDER_ID="phone",e.PHONE_SIGN_IN_METHOD="phone",e}();function $r(e,t){return t?L(t):(O(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}var Xr=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,"custom","custom")).params=e,r}return p(n,[{key:"_getIdTokenResponse",value:function(e){return dt(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return dt(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return dt(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Ge);function ei(e){return Qt(e.auth,new Xr(e),e.bypassAuthState)}function ti(e){var t=e.auth,n=e.user;return O(n,t,"internal-error"),Jt(n,new Xr(e),e.bypassAuthState)}function ni(e){return ri.apply(this,arguments)}function ri(){return(ri=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,r=t.user,e.abrupt("return",(O(r,n,"internal-error"),Ht(r,new Xr(t),t.bypassAuthState)));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ii=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];v(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return p(e,[{key:"execute",value:function(){var e,t=this;return new Promise((e=(0,a.Z)(regeneratorRuntime.mark(function e(n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.pendingPromise={resolve:n,reject:r},e.prev=1,e.next=4,t.resolver._initialize(t.auth);case 4:return t.eventManager=e.sent,e.next=7,t.onExecution();case 7:t.eventManager.registerConsumer(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t.reject(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])})),function(t,n){return e.apply(this,arguments)}))}},{key:"onAuthEvent",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r,i,a,o,u,s,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.urlResponse,i=e.sessionId,a=e.postBody,o=e.tenantId,u=e.error,s=e.type,!u){n.next=3;break}return n.abrupt("return",void t.reject(u));case 3:return c={auth:t.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:a||void 0,user:t.user,bypassAuthState:t.bypassAuthState},n.prev=4,n.t0=t,n.next=8,t.getIdpTask(s)(c);case 8:n.t1=n.sent,n.t0.resolve.call(n.t0,n.t1),n.next=15;break;case 12:n.prev=12,n.t2=n.catch(4),t.reject(n.t2);case 15:case"end":return n.stop()}},n,null,[[4,12]])}))()}},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ei;case"linkViaPopup":case"linkViaRedirect":return ni;case"reauthViaPopup":case"reauthViaRedirect":return ti;default:I(this.auth,"internal-error")}}},{key:"resolve",value:function(e){P(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){P(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),ai=new V(2e3,1e4);function oi(e,t,n){return ui.apply(this,arguments)}function ui(){return(ui=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=qe(t),R(t,n,St),a=$r(i,r),e.abrupt("return",new fi(i,"signInViaPopup",n,a).executeNotNull());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function si(e,t,n){return ci.apply(this,arguments)}function ci(){return(ci=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R((i=(0,u.m9)(t)).auth,n,St),a=$r(i.auth,r),e.abrupt("return",new fi(i.auth,"reauthViaPopup",n,a,i).executeNotNull());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function li(e,t,n){return hi.apply(this,arguments)}function hi(){return(hi=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R((i=(0,u.m9)(t)).auth,n,St),a=$r(i.auth,r),e.abrupt("return",new fi(i.auth,"linkViaPopup",n,a,i).executeNotNull());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var fi=function(){var e=function(e){g(n,e);var t=m(n);function n(e,r,i,a,o){var u;return v(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=k(u),u}return p(n,[{key:"executeNotNull",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.execute();case 2:return n=t.sent,t.abrupt("return",(O(n,e.auth,"internal-error"),n));case 4:case"end":return t.stop()}},t)}))()}},{key:"onExecution",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return P(1===e.filter.length,"Popup operations only handle one event"),n=dr(),t.next=4,e.resolver._openPopup(e.auth,e.provider,e.filter[0],n);case 4:e.authWindow=t.sent,e.authWindow.associatedEvent=n,e.resolver._originValidation(e.auth).catch(function(t){e.reject(t)}),e.resolver._isIframeWebStorageSupported(e.auth,function(t){t||e.reject(E(e.auth,"web-storage-unsupported"))}),e.pollUserCancellation();case 9:case"end":return t.stop()}},t)}))()}},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(E(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;e.pollId=(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?window.setTimeout(function(){e.pollId=null,e.reject(E(e.auth,"popup-closed-by-user"))},2e3):window.setTimeout(t,ai.get())}()}}]),n}(ii);return e.currentPopupAction=null,e}(),di=new Map,pi=function(e){g(n,e);var t=m(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return v(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return p(n,[{key:"execute",value:function(){var e=this,t=this;return(0,a.Z)(regeneratorRuntime.mark(function r(){var i,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(i=di.get(t.auth._key())){r.next=20;break}return r.prev=2,r.next=5,function(e,t){return vi.apply(this,arguments)}(t.resolver,t.auth);case 5:if(!r.sent){r.next=11;break}return r.next=8,o(T(n.prototype),"execute",e).call(t);case 8:r.t0=r.sent,r.next=12;break;case 11:r.t0=null;case 12:a=r.t0,i=function(){return Promise.resolve(a)},r.next=19;break;case 16:r.prev=16,r.t1=r.catch(2),i=function(){return Promise.reject(r.t1)};case 19:di.set(t.auth._key(),i);case 20:return r.abrupt("return",(t.bypassAuthState||di.set(t.auth._key(),function(){return Promise.resolve(null)}),i()));case 21:case"end":return r.stop()}},r,null,[[2,16]])}))()}},{key:"onAuthEvent",value:function(e){var t=this,r=function(){return o(T(n.prototype),"onAuthEvent",t)},i=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("signInViaRedirect"!==e.type){t.next=2;break}return t.abrupt("return",r().call(i,e));case 2:if("unknown"===e.type){t.next=12;break}if(!e.eventId){t.next=10;break}return t.next=6,i.auth._redirectUserForId(e.eventId);case 6:if(!(n=t.sent)){t.next=9;break}return t.abrupt("return",(i.user=n,r().call(i,e)));case 9:i.resolve(null);case 10:t.next=13;break;case 12:i.resolve(null);case 13:case"end":return t.stop()}},t)}))()}},{key:"onExecution",value:function(){return(0,a.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()}},{key:"cleanUp",value:function(){}}]),n}(ii);function vi(){return(vi=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=wi(n),i=bi(t),e.next=3,i._isAvailable();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,i._get(r);case 7:return e.t0=e.sent,a="true"===e.t0,e.next=11,i._remove(r);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gi(e,t){return mi.apply(this,arguments)}function mi(){return(mi=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bi(t)._set(wi(n),"true"));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yi(){di.clear()}function ki(e,t){di.set(e._key(),t)}function bi(e){return L(e._redirectPersistence)}function wi(e){return Se("pendingRedirect",e.config.apiKey,e.name)}function _i(e,t,n){return function(e,t,n){return xi.apply(this,arguments)}(e,t,n)}function xi(){return(xi=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=qe(t),R(t,n,St),a=$r(i,r),e.next=5,gi(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ti(e,t,n){return function(e,t,n){return Si.apply(this,arguments)}(e,t,n)}function Si(){return(Si=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R((i=(0,u.m9)(t)).auth,n,St),a=$r(i.auth,r),e.next=5,gi(a,i.auth);case 5:return e.next=7,Ni(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ii(e,t,n){return function(e,t,n){return Ei.apply(this,arguments)}(e,t,n)}function Ei(){return(Ei=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R((i=(0,u.m9)(t)).auth,n,St),a=$r(i.auth,r),e.next=5,Kt(!1,i,n.providerId);case 5:return e.next=7,gi(a,i.auth);case 7:return e.next=9,Ni(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ci(e,t){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe(t)._initializationPromise;case 2:return e.abrupt("return",Ai(t,n,!1));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ai(e,t){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u,s=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=qe(t),a=$r(i,n),o=new pi(i,a,r),e.next=6,o.execute();case 6:if(u=e.sent,e.t0=u&&!r,!e.t0){e.next=14;break}return delete u.user._redirectEventId,e.next=12,i._persistUserIfCurrent(u.user);case 12:return e.next=14,i._setRedirectUser(null,n);case 14:return e.abrupt("return",u);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ni(e){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=dr("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Di=function(){function e(t){v(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return p(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach(function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mi(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Mi(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(E(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Li(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Li(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Li(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(function(e){return e}).join("-")}function Mi(e){var t=e.type,n=e.error;return"unknown"===t&&"auth/no-auth-event"===(null==n?void 0:n.code)}function Ui(e){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n,r=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",H(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Vi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zi=/^https?/;function qi(){return(qi=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ui(t);case 4:n=e.sent,r=n.authorizedDomains,i=l(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!ji(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:I(t,"unauthorized-domain");case 29:case"end":return e.stop()}},e,null,[[7,22,25,28],[11,16]])}))).apply(this,arguments)}function ji(e){var t=M(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Zi.test(r))return!1;if(Vi.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Bi=new V(3e4,6e4);function zi(){var e=vr().___jsl;if(null==e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=s(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Hi=null;function Gi(e){return Hi=Hi||function(e){return new Promise(function(t,n){var r,i,a;function o(){zi(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){zi(),n(E(e,"network-request-failed"))},timeout:Bi.get()})}if(null===(i=null===(r=vr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=vr().gapi)||void 0===a?void 0:a.load)){var u=Or("iframefcb");return vr()[u]=function(){gapi.load?o():n(E(e,"network-request-failed"))},Ar("https://apis.google.com/js/api.js?onload=".concat(u)).catch(function(e){return n(e)})}o()}}).catch(function(e){throw Hi=null,e})}(e)}var Ki=new V(5e3,15e3),Wi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ji=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yi(e){var t=e.config;O(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Z(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:c.SDK_VERSION},i=Ji.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat((0,u.xO)(r).slice(1))}function Qi(){return(Qi=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gi(t);case 2:return n=e.sent,r=vr().gapi,e.abrupt("return",(O(r,t,"internal-error"),n.open({where:document.body,url:Yi(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wi,dontclear:!0},function(e){return new Promise((n=(0,a.Z)(regeneratorRuntime.mark(function n(r,i){var a,o,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){vr().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=E(t,"network-request-failed"),o=vr().setTimeout(function(){i(a)},Ki.get()),e.ping(u).then(u,function(){i(a)});case 5:case"end":return n.stop()}},n)})),function(e,t){return n.apply(this,arguments)}));var n})));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var $i={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Xi=function(){function e(t){v(this,e),this.window=t,this.associatedEvent=null}return p(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function ea(e,t,n,i,a,o){O(e.config.authDomain,e,"auth-domain-config-required"),O(e.config.apiKey,e,"invalid-api-key");var s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:c.SDK_VERSION,eventId:a};if(t instanceof St){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",(0,u.xb)(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(var l=0,h=Object.entries(o||{});l<h.length;l++){var f=r(h[l],2),d=f[0],p=f[1];s[d]=p}}if(t instanceof It){var v=t.getScopes().filter(function(e){return""!==e});v.length>0&&(s.scopes=v.join(","))}e.tenantId&&(s.tid=e.tenantId);for(var g,m,y=s,k=0,b=Object.keys(y);k<b.length;k++){var w=b[k];void 0===y[w]&&delete y[w]}return"".concat((g=e,m=g.config,m.emulator?Z(m,"emulator/auth/handler"):"https://".concat(m.authDomain,"/__/auth/handler")),"?").concat((0,u.xO)(y).slice(1))}var ta=function(){function e(){v(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hr,this._completeRedirectFn=Ai,this._overrideRedirectResult=ki}return p(e,[{key:"_openPopup",value:function(e,t,n,i){var o=this;return(0,a.Z)(regeneratorRuntime.mark(function a(){var s,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return P(null===(s=o.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()"),c=ea(e,t,n,M(),i),a.abrupt("return",function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,o=Math.max((window.screen.availHeight-a)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",l=Object.assign(Object.assign({},$i),{width:i.toString(),height:a.toString(),top:o,left:s}),h=(0,u.z$)().toLowerCase();n&&(c=Ae(h)?"_blank":n),Ce(h)&&(t=t||"http://localhost",l.scrollbars="yes");var f=Object.entries(l).reduce(function(e,t){var n=r(t,2),i=n[0],a=n[1];return"".concat(e).concat(i,"=").concat(a,",")},"");if(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,u.z$)();return Le(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(h)&&"_self"!==c)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",c),new Xi(null);var d=window.open(t||"",c,f);O(d,e,"popup-blocked");try{d.focus()}catch(p){}return new Xi(d)}(e,c,dr()));case 3:case"end":return a.stop()}},a)}))()}},{key:"_openRedirect",value:function(e,t,n,r){var i=this;return(0,a.Z)(regeneratorRuntime.mark(function a(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i._originValidation(e);case 2:return o=ea(e,t,n,M(),r),vr().location.href=o,a.abrupt("return",new Promise(function(){}));case 5:case"end":return a.stop()}},a)}))()}},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(P(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch(function(){delete t.eventManagers[n]}),o}},{key:"initAndGetManager",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,function(e){return Qi.apply(this,arguments)}(e);case 2:return r=n.sent,i=new Di(e),n.abrupt("return",(r.register("authEvent",function(t){return O(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:i.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i));case 5:case"end":return n.stop()}},n)}))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send("webStorageSupport",{type:"webStorageSupport"},function(n){var r,i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),I(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return qi.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Ue()||Re()||Le()}}]),e}(),na=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,"phone")).credential=e,r}return p(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return H(e,"POST","/v2/accounts/mfaEnrollment:finalize",z(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return H(e,"POST","/v2/accounts/mfaSignIn:finalize",z(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){v(this,e),this.factorId=t}return p(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return N("unexpected MultiFactorSessionType")}}}]),e}()),ra=function(){var e=function(){function e(){v(this,e)}return p(e,null,[{key:"assertion",value:function(e){return na._fromCredential(e)}}]),e}();return e.FACTOR_ID="phone",e}(),ia=function(){function e(t){v(this,e),this.auth=t,this.internalListeners=new Map}return p(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.assertAuthConfigured(),n.next=3,t.auth._initializationPromise;case 3:if(!t.auth.currentUser){n.next=10;break}return n.next=6,t.auth.currentUser.getIdToken(e);case 6:n.t1=n.sent,n.t0={accessToken:n.t1},n.next=11;break;case 10:n.t0=null;case 11:return n.abrupt("return",n.t0);case 12:case"end":return n.stop()}},n)}))()}},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged(function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){O(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();(0,c._registerComponent)(new d.wA("auth",function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){O(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),O(!(null==u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:"Browser",apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fe("Browser")},i=new Ze(e,t,r);return function(e,t){var n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(L);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,n){e.getProvider("auth-internal").initialize()})),(0,c._registerComponent)(new d.wA("auth-internal",function(e){return t=qe(e.getProvider("auth").getImmediate()),new ia(t);var t},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,c.registerVersion)("@firebase/auth","0.20.1",void 0),(0,c.registerVersion)("@firebase/auth","0.20.1","esm2017")},8604:function(e,t,n){"use strict";n.d(t,{wA:function(){return o},H0:function(){return c}});var i=n(6304),a=n(3854),o=function(){function e(t,n,r){v(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return p(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),u=function(){function e(t,n){v(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return p(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new a.BH;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(c){}var t,n=l(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var i=r(t.value,2),a=i[0],o=i[1],u=this.normalizeInstanceIdentifier(a);try{var s=this.getOrInitializeService({instanceIdentifier:u});o.resolve(s)}catch(c){}}}catch(h){n.e(h)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Array.from(e.instances.values()),t.next=3,Promise.all([].concat(s(n.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()})),s(n.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))));case 3:case"end":return t.stop()}},t)}))()}},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error("".concat(this.name,"(").concat(i,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var a,o=this.getOrInitializeService({instanceIdentifier:i,options:n}),u=l(this.instancesDeferred.entries());try{for(u.s();!(a=u.n()).done;){var s=r(a.value,2),c=s[0],h=s[1];i===this.normalizeInstanceIdentifier(c)&&h.resolve(o)}}catch(f){u.e(f)}finally{u.f()}return o}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,"[DEFAULT]"===t?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.component?this.component.multipleInstances?e:"[DEFAULT]":e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}(),c=function(){function e(t){v(this,e),this.name=t,this.providers=new Map}return p(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new u(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}()},9306:function(e,t,r){"use strict";var i;r.d(t,{in:function(){return o},Yd:function(){return f},Ub:function(){return d},Am:function(){return g}});var a=[],o=(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(o||(o={})),o),u={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},s=o.INFO,c=(n(i={},o.DEBUG,"log"),n(i,o.VERBOSE,"log"),n(i,o.INFO,"info"),n(i,o.WARN,"warn"),n(i,o.ERROR,"error"),i),h=function(e,t){var n;if(!(t<e.logLevel)){var r=(new Date).toISOString(),i=c[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(n=console)[i].apply(n,["[".concat(r,"]  ").concat(e.name,":")].concat(o))}},f=function(){function e(t){v(this,e),this.name=t,this._logLevel=s,this._logHandler=h,this._userLogHandler=null,a.push(this)}return p(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"==typeof e?u[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,o.DEBUG].concat(t)),this._logHandler.apply(this,[this,o.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,o.VERBOSE].concat(t)),this._logHandler.apply(this,[this,o.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,o.INFO].concat(t)),this._logHandler.apply(this,[this,o.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,o.WARN].concat(t)),this._logHandler.apply(this,[this,o.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,o.ERROR].concat(t)),this._logHandler.apply(this,[this,o.ERROR].concat(t))}}]),e}();function d(e){a.forEach(function(t){t.setLogLevel(e)})}function g(e,t){var n,r=l(a);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=u[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),u=2;u<r;u++)a[u-2]=arguments[u];var s=a.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(function(e){return e}).join(" ");n>=(null!=i?i:t.logLevel)&&e({level:o[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(s){r.e(s)}finally{r.f()}}},3854:function(e,t,n){"use strict";n.d(t,{BH:function(){return c},LL:function(){return O},ZR:function(){return A},zI:function(){return R},US:function(){return a},tV:function(){return u},L:function(){return o},$s:function(){return B},r3:function(){return P},Sg:function(){return l},ne:function(){return Z},vZ:function(){return L},ZB:function(){return s},pd:function(){return V},m9:function(){return z},z$:function(){return h},jU:function(){return y},ru:function(){return w},d:function(){return x},xb:function(){return D},w1:function(){return T},hl:function(){return E},uI:function(){return f},UG:function(){return d},b$:function(){return _},G6:function(){return I},Mn:function(){return S},xO:function(){return U},zd:function(){return F},eu:function(){return C}});var i=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=(15&u)<<2|c>>6,h=63&c;s||(h=64,o||(l=64)),r.push(n[a>>2],n[(3&a)<<4|u>>4],n[l],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();r.push(a<<2|o>>4),64!==u&&(r.push(o<<4&240|u>>2),64!==s&&r.push(u<<6&192|s))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},o=function(e){return function(e){var t=i(e);return a.encodeByteArray(t,!0)}(e).replace(/\./g,"")},u=function(e){try{return a.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function s(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=s(e[n],t[n]));return e}var c=function(){function e(){var t=this;v(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return p(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}}}]),e}();function l(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(a)),""].join(".")}function h(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function f(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h())}function d(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function y(){return"object"==typeof self&&self.self===self}function w(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function _(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function x(){return h().indexOf("Electron/")>=0}function T(){var e=h();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function S(){return h().indexOf("MSAppHost/")>=0}function I(){return!d()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function E(){return"object"==typeof indexedDB}function C(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})}function R(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}var A=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(k(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(k(a),O.prototype.create),a}return p(n)}(b(Error)),O=function(){function e(t,n,r){v(this,e),this.service=t,this.serviceName=n,this.errors=r}return p(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(N,function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error";return new A(n,"".concat(this.serviceName,": ").concat(i," (").concat(n,")."),t)}}]),e}(),N=/\{\$([^}]+)}/g;function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function D(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function L(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(M(u)&&M(s)){if(!L(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function M(e){return null!==e&&"object"==typeof e}function U(e){for(var t=[],n=function(){var e=r(a[i],2),n=e[0],o=e[1];Array.isArray(o)?o.forEach(function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))},i=0,a=Object.entries(e);i<a.length;i++)n();return t.length?"&"+t.join("&"):""}function F(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=r(e.split("="),2),i=n[0],a=n[1];t[decodeURIComponent(i)]=decodeURIComponent(a)}}),t}function V(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Z(e,t){var n=new q(e,t);return n.subscribe.bind(n)}var q=function(){function e(t,n){var r=this;v(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(r)}).catch(function(e){r.error(e)})}return p(e,[{key:"next",value:function(e){this.forEachObserver(function(t){t.next(e)})}},{key:"error",value:function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)}},{key:"complete",value:function(){this.forEachObserver(function(e){e.complete()}),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=j),void 0===r.error&&(r.error=j),void 0===r.complete&&(r.complete=j);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))}}]),e}();function j(){}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function z(e){return e&&e._delegate?e._delegate:e}},2329:function(e,t,n){"use strict";n.d(t,{Mq:function(){return r.getApp},C6:function(){return r.getApps},ZF:function(){return r.initializeApp},KN:function(){return r.registerVersion}});var r=n(279);(0,r.registerVersion)("firebase","9.8.1","app")},7841:function(e,t,n){"use strict";n.d(t,{Z:function(){return r.Z}});var r=n(156);r.Z.registerVersion("firebase","9.8.1","app-compat")},4828:function(e,t,n){"use strict";n.r(t);var r=n(6304),u=n(156),s=n(8882),l=n(3854),f=(n(279),n(9306),n(8604));function d(){return window}function y(){return(y=(0,r.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=d(),o=a.BuildInfo,(0,s.aq)(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,w(n.sessionId);case 4:return u=e.sent,c={},e.abrupt("return",((0,s.ar)()?c.ibi=o.packageName:(0,s.as)()?c.apn=o.packageName:(0,s.at)(t,"operation-not-supported-in-this-environment"),o.displayName&&(c.appDisplayName=o.displayName),c.sessionId=u,(0,s.au)(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,c)));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(){return(k=(0,r.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=d(),r=n.BuildInfo,i={},(0,s.ar)()?i.iosBundleId=r.packageName:(0,s.as)()?i.androidPackageName=r.packageName:(0,s.at)(t,"operation-not-supported-in-this-environment"),e.next=4,(0,s.av)(t,i);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function b(){return(b=(0,r.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=d(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise(function(e,i){var u=null;function c(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"==typeof n&&n(),"function"==typeof(null==r?void 0:r.close)&&r.close()}function l(){u||(u=window.setTimeout(function(){i((0,s.aw)(t,"redirect-cancelled-by-user"))},2e3))}function h(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}n.addPassiveListener(c),document.addEventListener("resume",l,!1),(0,s.as)()&&document.addEventListener("visibilitychange",h,!1),o=function(){n.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",h,!1),u&&window.clearTimeout(u)}});case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}},e,null,[[2,,5,8]])}))).apply(this,arguments)}function w(e){return _.apply(this,arguments)}function _(){return(_=(0,r.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=x(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,e.abrupt("return",Array.from(new Uint8Array(r)).map(function(e){return e.toString(16).padStart(2,"0")}).join(""));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function x(e){if((0,s.aq)(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var S=function(e){g(n,e);var t=m(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise(function(t){e.resolveInialized=t}),e}return p(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach(function(t){return t(e)}),o(T(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=this;return(0,r.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initPromise;case 2:case"end":return t.stop()}},t)}))()}}]),n}(s.aA);function I(e){return E.apply(this,arguments)}function E(){return(E=(0,r.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R()._get(A(t));case 2:if(n=e.sent,e.t0=n,!e.t0){e.next=7;break}return e.next=7,R()._remove(A(t));case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function R(){return(0,s.ay)(s.b)}function A(e){return(0,s.az)("authEvent",e.config.apiKey,e.name)}function O(e){if(!(null==e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=a(t=n)||c(t)||h(t)||i(),o=(r[0],r.slice(1));return(0,l.zd)(o.join("?"))}function N(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,s.aw)("no-auth-event")}}function P(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,l.z$)();return!("file:"!==P()&&"ionic:"!==P()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function L(){try{var e=self.localStorage,t=s.aI();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,l.z$)();return(0,l.w1)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,l.z$)();return/Edge\/\d+/.test(e)}(e)}()||(0,l.hl)()}catch(n){return M()&&(0,l.hl)()}return!1}function M(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function U(){return("http:"===P()||"https:"===P()||(0,l.ru)()||D())&&!((0,l.b$)()||(0,l.UG)())&&L()&&!M()}function F(){return D()&&"undefined"!=typeof document}function V(){return(V=(0,r.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!!F()&&new Promise(function(e){var t=setTimeout(function(){e(!1)},1e3);document.addEventListener("deviceready",function(){clearTimeout(t),e(!0)})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Z={LOCAL:"local",NONE:"none",SESSION:"session"},q=s.ax;function j(e){return B.apply(this,arguments)}function B(){return(B=(0,r.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=z(),r=s.az("persistence",t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function z(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var H=s.ax,G=function(){function e(){v(this,e),this.browserResolver=s.ay(s.k),this.cordovaResolver=s.ay(function(){function e(){v(this,e),this._redirectPersistence=s.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=s.aB,this._overrideRedirectResult=s.aC}return p(e,[{key:"_initialize",value:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e._key(),i=t.eventManagers.get(r),n.abrupt("return",(i||(i=new S(e),t.eventManagers.set(r,i),t.attachCallbackListeners(e,i)),i));case 3:case"end":return n.stop()}},n)}))()}},{key:"_openPopup",value:function(e){(0,s.at)(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(e,t,n,i){var a=this;return(0,r.Z)(regeneratorRuntime.mark(function r(){var o,u,c,l;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return function(e){var t,n,r,i,a,o,u,c,l,h,f=d();(0,s.ax)("function"==typeof(null===(t=null==f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,s.ax)(void 0!==(null===(n=null==f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,s.ax)("function"==typeof(null===(a=null===(i=null===(r=null==f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,s.ax)("function"==typeof(null===(c=null===(u=null===(o=null==f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,s.ax)("function"==typeof(null===(h=null===(l=null==f?void 0:f.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===h?void 0:h.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e),r.next=3,a._initialize(e);case 3:return o=r.sent,r.next=6,o.initialized();case 6:return o.resetRedirect(),(0,s.aD)(),r.next=10,a._originValidation(e);case 10:return u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:C(),postBody:null,tenantId:e.tenantId,error:(0,s.aw)(e,"no-auth-event")}}(e,n,i),r.next=13,function(e,t){return R()._set(A(e),t)}(e,u);case 13:return r.next=15,function(e,t,n){return y.apply(this,arguments)}(e,u,t);case 15:return c=r.sent,r.next=18,function(e){var t=d().cordova;return new Promise(function(n){t.plugins.browsertab.isAvailable(function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,(0,s.ap)()?"_blank":"_system","location=yes"),n(i)})})}(c);case 18:return l=r.sent,r.abrupt("return",function(e,t,n){return b.apply(this,arguments)}(e,o,l));case 20:case"end":return r.stop()}},r)}))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return k.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n,i=d(),a=i.universalLinks,o=i.handleOpenURL,u=i.BuildInfo,c=setTimeout((0,r.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,I(e);case 2:t.onEvent(N());case 3:case"end":return n.stop()}},n)})),500),l=(n=(0,r.Z)(regeneratorRuntime.mark(function n(r){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(c),n.next=3,I(e);case 3:i=n.sent,a=null,i&&(null==r?void 0:r.url)&&(a=function(e,t){var n,r,i=function(e){var t=O(e),n=t.link?decodeURIComponent(t.link):void 0,r=O(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return O(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=O(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null==o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],c=u?(0,s.aw)(u):null;return c?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(i,r.url)),t.onEvent(a||N());case 6:case"end":return n.stop()}},n)})),function(e){return n.apply(this,arguments)});void 0!==a&&"function"==typeof a.subscribe&&a.subscribe(null,l);var h,f=o,p="".concat(u.packageName.toLowerCase(),"://");d().handleOpenURL=(h=(0,r.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(p)&&l({url:t}),"function"==typeof f)try{f(t)}catch(n){console.error(n)}case 1:case"end":return e.stop()}},e)})),function(e){return h.apply(this,arguments)})}}]),e}()),this.underlyingResolver=null,this._redirectPersistence=s.a,this._completeRedirectFn=s.aB,this._overrideRedirectResult=s.aC}return p(e,[{key:"_initialize",value:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.selectUnderlyingResolver();case 2:return n.abrupt("return",t.assertedUnderlyingResolver._initialize(e));case 3:case"end":return n.stop()}},n)}))()}},{key:"_openPopup",value:function(e,t,n,i){var a=this;return(0,r.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.selectUnderlyingResolver();case 2:return r.abrupt("return",a.assertedUnderlyingResolver._openPopup(e,t,n,i));case 3:case"end":return r.stop()}},r)}))()}},{key:"_openRedirect",value:function(e,t,n,i){var a=this;return(0,r.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.selectUnderlyingResolver();case 2:return r.abrupt("return",a.assertedUnderlyingResolver._openRedirect(e,t,n,i));case 3:case"end":return r.stop()}},r)}))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return F()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return H(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=this;return(0,r.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.underlyingResolver){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,function(){return V.apply(this,arguments)}();case 4:n=t.sent,e.underlyingResolver=n?e.cordovaResolver:e.browserResolver;case 6:case"end":return t.stop()}},t)}))()}}]),e}();function K(e){return e.unwrap()}function W(e){var t=(e instanceof l.ZR?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof l.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return s.P.credentialFromResult(e);var n,r=t.providerId;if(!r||r===s.o.PASSWORD)return null;switch(r){case s.o.GOOGLE:n=s.Q;break;case s.o.FACEBOOK:n=s.N;break;case s.o.GITHUB:n=s.T;break;case s.o.TWITTER:n=s.W;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,c=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?s.aL._create(r,u):s.J._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new s.U(r).credential({idToken:i,accessToken:a,rawNonce:c}):null}return e instanceof l.ZR?n.credentialFromError(e):n.credentialFromResult(e)}function J(e,t){return t.catch(function(t){throw t instanceof l.ZR&&function(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new $(e,s.an(e,t));else if(r){var i=W(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}(e,t),t}).then(function(e){var t,n=e.user;return{operationType:e.operationType,credential:(t=e,W(t)),additionalUserInfo:s.al(e),user:X.getOrCreate(n)}})}function Y(e,t){return Q.apply(this,arguments)}function Q(){return(Q=(0,r.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return J(t,r.confirm(e))}});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var $=function(){function e(t,n){v(this,e),this.resolver=n,this.auth=t.wrapped()}return p(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return J(K(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),X=function(){function e(t){v(this,e),this._delegate=t,this.multiFactor=s.ao(t)}return p(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",J(t.auth,s.Z(t._delegate,e)));case 1:case"end":return n.stop()}},n)}))()}},{key:"linkWithPhoneNumber",value:function(e,t){var n=this;return(0,r.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Y(n.auth,s.l(n._delegate,e,t)));case 1:case"end":return r.stop()}},r)}))()}},{key:"linkWithPopup",value:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",J(t.auth,s.d(t._delegate,e,G)));case 1:case"end":return n.stop()}},n)}))()}},{key:"linkWithRedirect",value:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j(s.aE(t.auth));case 2:return n.abrupt("return",s.g(t._delegate,e,G));case 3:case"end":return n.stop()}},n)}))()}},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",J(t.auth,s._(t._delegate,e)));case 1:case"end":return n.stop()}},n)}))()}},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Y(this.auth,s.r(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return J(this.auth,s.e(this._delegate,e,G))}},{key:"reauthenticateWithRedirect",value:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j(s.aE(t.auth));case 2:return n.abrupt("return",s.h(t._delegate,e,G));case 3:case"end":return n.stop()}},n)}))()}},{key:"sendEmailVerification",value:function(e){return s.ab(this._delegate,e)}},{key:"unlink",value:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.ak(t._delegate,e);case 2:return n.abrupt("return",t);case 3:case"end":return n.stop()}},n)}))()}},{key:"updateEmail",value:function(e){return s.ag(this._delegate,e)}},{key:"updatePassword",value:function(e){return s.ah(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return s.u(this._delegate,e)}},{key:"updateProfile",value:function(e){return s.af(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return s.ac(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();X.USER_MAP=new WeakMap;var ee=s.ax,te=function(){var e=function(){function e(t,n){if(v(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;ee(r,"invalid-api-key",{appName:t.name}),ee(r,"invalid-api-key",{appName:t.name});var i="undefined"!=typeof window?G:void 0;this._delegate=n.initialize({options:{persistence:re(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(s.B),this.linkUnderlyingAuth()}return p(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?X.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){s.G(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return s.a2(this._delegate,e)}},{key:"checkActionCode",value:function(e){return s.a3(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return s.a1(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(e,t){var n=this;return(0,r.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",J(n._delegate,s.a5(n._delegate,e,t)));case 1:case"end":return r.stop()}},r)}))()}},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return s.aa(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return s.a8(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=this;return(0,r.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return ee(U(),e._delegate,"operation-not-supported-in-this-environment"),t.next=3,s.j(e._delegate,G);case 3:return n=t.sent,t.abrupt("return",n?J(e._delegate,Promise.resolve(n)):{credential:null,user:null});case 5:case"end":return t.stop()}},t)}))()}},{key:"addFrameworkForLogging",value:function(e){!function(e,t){(0,s.aE)(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=ne(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=ne(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return s.a7(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return s.a0(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=(function(e,t){q(Object.values(Z).includes(t),e,"invalid-persistence-type"),(0,l.b$)()?q(t!==Z.SESSION,e,"unsupported-persistence-type"):(0,l.UG)()?q(t===Z.NONE,e,"unsupported-persistence-type"):M()?q(t===Z.NONE||t===Z.LOCAL&&(0,l.hl)(),e,"unsupported-persistence-type"):q(t===Z.NONE||L(),e,"unsupported-persistence-type")}(t._delegate,e),e),n.next=n.t0===Z.SESSION?3:n.t0===Z.LOCAL?5:n.t0===Z.NONE?14:16;break;case 3:return r=s.a,n.abrupt("break",17);case 5:return n.next=7,s.ay(s.i)._isAvailable();case 7:if(!n.sent){n.next=11;break}n.t1=s.i,n.next=12;break;case 11:n.t1=s.b;case 12:return r=n.t1,n.abrupt("break",17);case 14:return r=s.L,n.abrupt("break",17);case 16:return n.abrupt("return",s.at("argument-error",{appName:t._delegate.name}));case 17:return n.abrupt("return",t._delegate.setPersistence(r));case 18:case"end":return n.stop()}},n)}))()}},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return J(this._delegate,s.X(this._delegate))}},{key:"signInWithCredential",value:function(e){return J(this._delegate,s.Y(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return J(this._delegate,s.$(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return J(this._delegate,s.a6(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return J(this._delegate,s.a9(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Y(this._delegate,s.s(this._delegate,e,t))}},{key:"signInWithPopup",value:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(ee(U(),t._delegate,"operation-not-supported-in-this-environment"),J(t._delegate,s.c(t._delegate,e,G))));case 1:case"end":return n.stop()}},n)}))()}},{key:"signInWithRedirect",value:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return ee(U(),t._delegate,"operation-not-supported-in-this-environment"),n.next=3,j(t._delegate);case 3:return n.abrupt("return",s.f(t._delegate,e,G));case 4:case"end":return n.stop()}},n)}))()}},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return s.a4(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();return e.Persistence=Z,e}();function ne(e,t,n){var r,i=e;"function"!=typeof e&&(i=(r=e).next,t=r.error,n=r.complete);var a=i;return{next:function(e){return a(e&&X.getOrCreate(e))},error:t,complete:n}}function re(e,t){var n=function(e,t){var n=z();if(!n)return[];var r=s.az("persistence",e,t);switch(n.getItem(r)){case Z.NONE:return[s.L];case Z.LOCAL:return[s.i,s.a];case Z.SESSION:return[s.a];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(s.i)||n.push(s.i),"undefined"!=typeof window)for(var r=0,i=[s.b,s.a];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(s.L)||n.push(s.L),n}var ie=function(){function e(){v(this,e),this.providerId="phone",this._delegate=new s.P(K(u.Z.auth()))}return p(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return s.P.credential(e,t)}}]),e}();ie.PHONE_SIGN_IN_METHOD=s.P.PHONE_SIGN_IN_METHOD,ie.PROVIDER_ID=s.P.PROVIDER_ID;var ae,oe=s.ax;(ae=u.Z).INTERNAL.registerComponent(new f.wA("auth-compat",function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new te(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:s.A.EMAIL_SIGNIN,PASSWORD_RESET:s.A.PASSWORD_RESET,RECOVER_EMAIL:s.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:s.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:s.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:s.A.VERIFY_EMAIL}},EmailAuthProvider:s.M,FacebookAuthProvider:s.N,GithubAuthProvider:s.T,GoogleAuthProvider:s.Q,OAuthProvider:s.U,SAMLAuthProvider:s.V,PhoneAuthProvider:ie,PhoneMultiFactorGenerator:s.m,RecaptchaVerifier:function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.Z.app();v(this,e),oe(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new s.R(t,n,i.auth()),this.type=this._delegate.type}return p(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}(),TwitterAuthProvider:s.W,Auth:te,AuthCredential:s.H,Error:l.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ae.registerVersion("@firebase/auth-compat","0.2.14")},250:function(e,t){"use strict";var n=function(){function e(t){if(!t)throw new TypeError("Invalid argument; `value` has no value.");this.value=e.EMPTY,t&&e.isGuid(t)&&(this.value=t)}return e.isGuid=function(t){var n=t.toString();return t&&(t instanceof e||e.validator.test(n))},e.create=function(){return new e([e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-"))},e.createEmpty=function(){return new e("emptyguid")},e.parse=function(t){return new e(t)},e.raw=function(){return[e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-")},e.gen=function(e){for(var t="",n=0;n<e;n++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t},e.prototype.equals=function(t){return e.isGuid(t)&&this.value===t.toString()},e.prototype.isEmpty=function(){return this.value===e.EMPTY},e.prototype.toString=function(){return this.value},e.prototype.toJSON=function(){return{value:this.value}},e.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),e.EMPTY="00000000-0000-0000-0000-000000000000",e}();t.i=n},6508:function(e,n,r){"use strict";r.d(n,{Lj:function(){return g},X3:function(){return v}});var i,a,o=r(6304),u=new WeakMap,s=new WeakMap,c=new WeakMap,l=new WeakMap,h=new WeakMap,f={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return s.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return d(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function d(e){if(e instanceof IDBRequest)return t=e,(n=new Promise(function(e,n){var r=function(){t.removeEventListener("success",i),t.removeEventListener("error",a)},i=function(){e(d(t.result)),r()},a=function(){n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",a)})).then(function(e){e instanceof IDBCursor&&u.set(e,t)}).catch(function(){}),h.set(n,t),n;var t,n;if(l.has(e))return l.get(e);var r=function(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(p(this),n),d(u.get(this))}:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return d(t.apply(p(this),n))}:function(e){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];var o=(n=t).call.apply(n,[p(this),e].concat(i));return c.set(o,e.sort?e.sort():[e]),d(o)}:(e instanceof IDBTransaction&&function(e){if(!s.has(e)){var t=new Promise(function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});s.set(e,t)}}(e),n=e,(i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(function(e){return n instanceof e})?new Proxy(e,f):e);var t,n}(e);return r!==e&&(l.set(e,r),h.set(r,e)),r}var p=function(e){return h.get(e)};function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=d(u);return i&&u.addEventListener("upgradeneeded",function(e){i(d(u.result),e.oldVersion,e.newVersion,d(u.transaction))}),r&&u.addEventListener("blocked",function(){return r()}),s.then(function(e){o&&e.addEventListener("close",function(){return o()}),a&&e.addEventListener("versionchange",function(){return a()})}).catch(function(){}),s}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.blocked,r=indexedDB.deleteDatabase(e);return n&&r.addEventListener("blocked",function(){return n()}),d(r).then(function(){})}var m,y=["get","getKey","getAll","getAllKeys","count"],k=["put","add","delete","clear"],b=new Map;function w(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(b.get(t))return b.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=k.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||y.includes(n))){var a,u=(a=(0,o.Z)(regeneratorRuntime.mark(function e(t){var a,o,u,s,c,l,h=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=h.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=h[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)});return b.set(t,u),u}}}f=t(t({},m=f),{},{get:function(e,t,n){return w(e,t)||m.get(e,t,n)},has:function(e,t){return!!w(e,t)||m.has(e,t)}})},3098:function(e,t,n){"use strict";n.d(t,{P:function(){return o}});var r=n(9193),i=n(5917),a=n(205),o=function(){function e(t,n,r){v(this,e),this.kind=t,this.value=n,this.error=r,this.hasValue="N"===t}return p(e,[{key:"observe",value:function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}},{key:"do",value:function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}},{key:"accept",value:function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return(0,i.of)(this.value);case"E":return(0,a._)(this.error);case"C":return(0,r.c)()}throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}},{key:"createError",value:function(t){return new e("E",void 0,t)}},{key:"createComplete",value:function(){return e.completeNotification}}]),e}();o.completeNotification=new o("C"),o.undefinedValueNotification=new o("N",void 0)},7574:function(e,t,n){"use strict";n.d(t,{y:function(){return c}});var r=n(7393),i=n(9181),a=n(6490),o=n(6554),u=n(4487),s=n(2494),c=function(){var e=function(e){function t(e){v(this,t),this._isScalar=!1,e&&(this._subscribe=e)}return p(t,[{key:"lift",value:function(e){var n=new t;return n.source=this,n.operator=e,n}},{key:"subscribe",value:function(e,t,n){var o=this.operator,u=function(e,t,n){if(e){if(e instanceof r.L)return e;if(e[i.b])return e[i.b]()}return e||t||n?new r.L(e,t,n):new r.L(a.c)}(e,t,n);if(u.add(o?o.call(u,this.source):this.source||s.v.useDeprecatedSynchronousErrorHandling&&!u.syncErrorThrowable?this._subscribe(u):this._trySubscribe(u)),s.v.useDeprecatedSynchronousErrorHandling&&u.syncErrorThrowable&&(u.syncErrorThrowable=!1,u.syncErrorThrown))throw u.syncErrorValue;return u}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){s.v.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,i=t.destination,a=t.isStopped;if(n||a)return!1;e=i&&i instanceof r.L?i:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=l(t))(function(t,r){var i;i=n.subscribe(function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}},r,t)})}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:e,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?this:(0===(r=t).length?u.y:1===r.length?r[0]:function(e){return r.reduce(function(e,t){return t(e)},e)})(this);var r}},{key:"toPromise",value:function(e){var t=this;return new(e=l(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})}}]),t}(o.L);return e.create=function(t){return new e(t)},e}();function l(e){if(e||(e=s.v.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},6490:function(e,t,n){"use strict";n.d(t,{c:function(){return a}});var r=n(2494),i=n(4449),a={closed:!0,next:function(e){},error:function(e){if(r.v.useDeprecatedSynchronousErrorHandling)throw e;(0,i.z)(e)},complete:function(){}}},9765:function(e,t,n){"use strict";n.d(t,{Yc:function(){return l},xQ:function(){return h}});var r=n(7574),i=n(7393),a=n(5319),u=n(7971),s=n(8858),c=n(9181),l=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).destination=e,r}return p(n)}(i.L),h=function(){var e=function(e,t){g(i,e);var n=m(i);function i(){var e;return v(this,i),(e=n.call(this)).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return p(i,[{key:t,value:function(){return new l(this)}},{key:"lift",value:function(e){var t=new f(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new u.N;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)}},{key:"error",value:function(e){if(this.closed)throw new u.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new u.N;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new u.N;return o(T(i.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new u.N;return this.hasError?(e.error(this.thrownError),a.w.EMPTY):this.isStopped?(e.complete(),a.w.EMPTY):(this.observers.push(e),new s.W(this,e))}},{key:"asObservable",value:function(){var e=new r.y;return e.source=this,e}}]),i}(r.y,c.b);return e.create=function(e,t){return new f(e,t)},e}(),f=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).destination=e,i.source=r,i}return p(n,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):a.w.EMPTY}}]),n}(h)},8858:function(e,t,n){"use strict";n.d(t,{W:function(){return r}});var r=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).subject=e,i.subscriber=r,i.closed=!1,i}return p(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}}}]),n}(n(5319).w)},7393:function(e,t,n){"use strict";n.d(t,{L:function(){return l}});var r=n(9105),i=n(6490),a=n(5319),u=n(9181),s=n(2494),c=n(4449),l=function(e,t){g(r,e);var n=m(r);function r(e,t,a){var o;switch(v(this,r),(o=n.call(this)).syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=i.c;break;case 1:if(!e){o.destination=i.c;break}if("object"==typeof e){e instanceof r?(o.syncErrorThrowable=e.syncErrorThrowable,o.destination=e,e.add(k(o))):(o.syncErrorThrowable=!0,o.destination=new h(k(o),e));break}default:o.syncErrorThrowable=!0,o.destination=new h(k(o),e,t,a)}return o}return p(r,[{key:t,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,o(T(r.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}],[{key:"create",value:function(e,t,n){var i=new r(e,t,n);return i.syncErrorThrowable=!1,i}}]),r}(a.w,u.b),h=function(e){g(n,e);var t=m(n);function n(e,a,o,u){var s,c;v(this,n),(s=t.call(this))._parentSubscriber=e;var l=k(s);return(0,r.m)(a)?c=a:a&&(c=a.next,o=a.error,u=a.complete,a!==i.c&&(l=Object.create(a),(0,r.m)(l.unsubscribe)&&s.add(l.unsubscribe.bind(l)),l.unsubscribe=s.unsubscribe.bind(k(s)))),s._context=l,s._next=c,s._error=o,s._complete=u,s}return p(n,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;s.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,n=s.v.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,c.z)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,c.z)(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};s.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),s.v.useDeprecatedSynchronousErrorHandling)throw n;(0,c.z)(n)}}},{key:"__tryOrSetError",value:function(e,t,n){if(!s.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return s.v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):((0,c.z)(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),n}(l)},5319:function(e,t,n){"use strict";n.d(t,{w:function(){return s}});var r,i=n(9796),a=n(1555),o=n(9105),u=function(){function e(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map(function(e,t){return"".concat(t+1,") ").concat(e.toString())}).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),s=function(){function e(t){v(this,e),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return p(e,[{key:"unsubscribe",value:function(){var t;if(!this.closed){var n=this._parentOrParents,r=this._ctorUnsubscribe,s=this._unsubscribe,l=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var h=0;h<n.length;++h)n[h].remove(this);if((0,o.m)(s)){r&&(this._unsubscribe=void 0);try{s.call(this)}catch(v){t=v instanceof u?c(v.errors):[v]}}if((0,i.k)(l))for(var f=-1,d=l.length;++f<d;){var p=l[f];if((0,a.K)(p))try{p.unsubscribe()}catch(v){t=t||[],v instanceof u?t=t.concat(c(v.errors)):t.push(v)}}if(t)throw new u(t)}}},{key:"add",value:function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[n]:a.push(n),n}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}]),e}();function c(e){return e.reduce(function(e,t){return e.concat(t instanceof u?t.errors:t)},[])}s.EMPTY=((r=new s).closed=!0,r)},2494:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:function(e,t,n){"use strict";n.d(t,{IY:function(){return o},Ds:function(){return u},ft:function(){return s}});var r=n(7393),i=n(7574),a=n(7444),o=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this)).parent=e,r}return p(n,[{key:"_next",value:function(e){this.parent.notifyNext(e)}},{key:"_error",value:function(e){this.parent.notifyError(e),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(),this.unsubscribe()}}]),n}(r.L),u=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"notifyNext",value:function(e){this.destination.next(e)}},{key:"notifyError",value:function(e){this.destination.error(e)}},{key:"notifyComplete",value:function(){this.destination.complete()}}]),n}(r.L);function s(e,t){if(!t.closed){if(e instanceof i.y)return e.subscribe(t);var n;try{n=(0,a.s)(e)(t)}catch(r){t.error(r)}return n}}},2441:function(e,t,n){"use strict";n.d(t,{c:function(){return c},N:function(){return l}});var r,i=n(9765),a=n(7574),u=n(5319),s=n(1307),c=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).source=e,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return p(n,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new u.w).add(this.source.subscribe(new h(this.getSubject(),this))),e.closed&&(this._connection=null,e=u.w.EMPTY)),e}},{key:"refCount",value:function(){return(0,s.x)()(this)}}]),n}(a.y),l={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(r=c.prototype)._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}},h=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).connectable=r,i}return p(n,[{key:"_error",value:function(e){this._unsubscribe(),o(T(n.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),o(T(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),n}(i.Yc)},9193:function(e,t,n){"use strict";n.d(t,{E:function(){return i},c:function(){return a}});var r=n(7574),i=new r.y(function(e){return e.complete()});function a(e){return e?function(e){return new r.y(function(t){return e.schedule(function(){return t.complete()})})}(e):i}},4402:function(e,t,n){"use strict";n.d(t,{D:function(){return h}});var r=n(7574),i=n(7444),a=n(5319),o=n(6554),u=n(4087),s=n(377),c=n(4072),l=n(9489);function h(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o.L]}(e))return function(e,t){return new r.y(function(n){var r=new a.w;return r.add(t.schedule(function(){var i=e[o.L]();r.add(i.subscribe({next:function(e){r.add(t.schedule(function(){return n.next(e)}))},error:function(e){r.add(t.schedule(function(){return n.error(e)}))},complete:function(){r.add(t.schedule(function(){return n.complete()}))}}))})),r})}(e,t);if((0,c.t)(e))return function(e,t){return new r.y(function(n){var r=new a.w;return r.add(t.schedule(function(){return e.then(function(e){r.add(t.schedule(function(){n.next(e),r.add(t.schedule(function(){return n.complete()}))}))},function(e){r.add(t.schedule(function(){return n.error(e)}))})})),r})}(e,t);if((0,l.z)(e))return(0,u.r)(e,t);if(function(e){return e&&"function"==typeof e[s.hZ]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y(function(n){var r,i=new a.w;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(t.schedule(function(){r=e[s.hZ](),i.add(t.schedule(function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(a){return void n.error(a)}t?n.complete():(n.next(e),this.schedule())}}))})),i})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof r.y?e:new r.y((0,i.s)(e))}},6693:function(e,t,n){"use strict";n.d(t,{n:function(){return o}});var r=n(7574),i=n(5015),a=n(4087);function o(e,t){return t?(0,a.r)(e,t):new r.y((0,i.V)(e))}},6682:function(e,t,n){"use strict";n.d(t,{T:function(){return u}});var r=n(7574),i=n(4869),a=n(3282),o=n(6693);function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var u=Number.POSITIVE_INFINITY,s=null,c=t[t.length-1];return(0,i.K)(c)?(s=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(u=t.pop())):"number"==typeof c&&(u=t.pop()),null===s&&1===t.length&&t[0]instanceof r.y?t[0]:(0,a.J)(u)((0,o.n)(t,s))}},5917:function(e,t,n){"use strict";n.d(t,{of:function(){return o}});var r=n(4869),i=n(6693),a=n(4087);function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t[t.length-1];return(0,r.K)(o)?(t.pop(),(0,a.r)(t,o)):(0,i.n)(t)}},205:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var r=n(7574);function i(e,t){return new r.y(t?function(n){return t.schedule(a,0,{error:e,subscriber:n})}:function(t){return t.error(e)})}function a(e){var t=e.error;e.subscriber.error(t)}},8002:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(7393);function i(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new a(e,t))}}var a=function(){function e(t,n){v(this,e),this.project=t,this.thisArg=n}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new o(e,this.project,this.thisArg))}}]),e}(),o=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e)).project=r,a.count=0,a.thisArg=i||k(a),a}return p(n,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(r.L)},3282:function(e,t,n){"use strict";n.d(t,{J:function(){return a}});var r=n(9773),i=n(4487);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return(0,r.zg)(i.y,e)}},9773:function(e,t,n){"use strict";n.d(t,{zg:function(){return o}});var r=n(8002),i=n(4402),a=n(5345);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof t?function(a){return a.pipe(o(function(n,a){return(0,i.D)(e(n,a)).pipe((0,r.U)(function(e,r){return t(n,e,a,r)}))},n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new u(e,n))})}var u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;v(this,e),this.project=t,this.concurrent=n}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new s(e,this.project,this.concurrent))}}]),e}(),s=function(e){g(n,e);var t=m(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return v(this,n),(i=t.call(this,e)).project=r,i.concurrent=a,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return p(n,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}},{key:"_innerSub",value:function(e){var t=new a.IY(this),n=this.destination;n.add(t);var r=(0,a.ft)(e,t);r!==t&&n.add(r)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e){this.destination.next(e)}},{key:"notifyComplete",value:function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(a.Ds)},9746:function(e,t,n){"use strict";n.d(t,{QV:function(){return a},ht:function(){return u}});var r=n(7393),i=n(3098);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new o(e,t))}}var o=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;v(this,e),this.scheduler=t,this.delay=n}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new u(e,this.scheduler,this.delay))}}]),e}(),u=function(e){g(n,e);var t=m(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return v(this,n),(i=t.call(this,e)).scheduler=r,i.delay=a,i}return p(n,[{key:"scheduleMessage",value:function(e){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new s(e,this.destination)))}},{key:"_next",value:function(e){this.scheduleMessage(i.P.createNext(e))}},{key:"_error",value:function(e){this.scheduleMessage(i.P.createError(e)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(i.P.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()}}]),n}(r.L),s=p(function e(t,n){v(this,e),this.notification=t,this.destination=n})},1307:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});var r=n(7393);function i(){return function(e){return e.lift(new a(e))}}var a=function(){function e(t){v(this,e),this.connectable=t}return p(e,[{key:"call",value:function(e,t){var n=this.connectable;n._refCount++;var r=new o(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),e}(),o=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).connectable=r,i}return p(n,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),n}(r.L)},3101:function(e,t,n){"use strict";n.d(t,{R:function(){return k}});var r=n(7574),i=1,a=Promise.resolve(),u={};function s(e){return e in u&&(delete u[e],!0)}var c=function(e){var t=i++;return u[t]=!0,a.then(function(){return s(t)&&e()}),t},l=function(e){s(e)},h=n(6465),f=new(function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"flush",value:function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}}}]),n}(n(6102).v))(function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i}return p(n,[{key:"requestAsyncId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0?o(T(n.prototype),"requestAsyncId",this).call(this,e,t,r):(e.actions.push(this),e.scheduled||(e.scheduled=c(e.flush.bind(e,null))))}},{key:"recycleAsyncId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==r&&r>0||null===r&&this.delay>0)return o(T(n.prototype),"recycleAsyncId",this).call(this,e,t,r);0===e.actions.length&&(l(t),e.scheduled=void 0)}}]),n}(h.o)),d=n(9796),y=function(e){g(n,e);var t=m(n);function n(e){var r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;return v(this,n),(r=t.call(this)).source=e,r.delayTime=a,r.scheduler=o,((0,d.k)(i=a)||!(i-parseFloat(i)+1>=0)||a<0)&&(r.delayTime=0),o&&"function"==typeof o.schedule||(r.scheduler=f),r}return p(n,[{key:"_subscribe",value:function(e){return this.scheduler.schedule(n.dispatch,this.delayTime,{source:this.source,subscriber:e})}}],[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;return new n(e,t,r)}},{key:"dispatch",value:function(e){var t=e.source,n=e.subscriber;return this.add(t.subscribe(n))}}]),n}(r.y);function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new b(e,t))}}var b=function(){function e(t,n){v(this,e),this.scheduler=t,this.delay=n}return p(e,[{key:"call",value:function(e,t){return new y(t,this.delay,this.scheduler).subscribe(e)}}]),e}()},3342:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(7393);function i(){}var a=n(9105);function o(e,t,n){return function(r){return r.lift(new u(e,t,n))}}var u=function(){function e(t,n,r){v(this,e),this.nextOrObserver=t,this.error=n,this.complete=r}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new s(e,this.nextOrObserver,this.error,this.complete))}}]),e}(),s=function(e){g(n,e);var t=m(n);function n(e,r,o,u){var s;return v(this,n),(s=t.call(this,e))._tapNext=i,s._tapError=i,s._tapComplete=i,s._tapError=o||i,s._tapComplete=u||i,(0,a.m)(r)?(s._context=k(s),s._tapNext=r):r&&(s._context=r,s._tapNext=r.next||i,s._tapError=r.error||i,s._tapComplete=r.complete||i),s}return p(n,[{key:"_next",value:function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}},{key:"_error",value:function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}]),n}(r.L)},4087:function(e,t,n){"use strict";n.d(t,{r:function(){return a}});var r=n(7574),i=n(5319);function a(e,t){return new r.y(function(n){var r=new i.w,a=0;return r.add(t.schedule(function(){a!==e.length?(n.next(e[a++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:function(e,t,n){"use strict";n.d(t,{o:function(){return r}});var r=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i.pending=!1,i}return p(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}},{key:"requestAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(e.flush.bind(e,this),n)}},{key:"recycleAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}},{key:"execute",value:function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(e,t){var n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}},{key:"_unsubscribe",value:function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}]),n}(function(e){g(n,e);var t=m(n);function n(e,r){return v(this,n),t.call(this)}return p(n,[{key:"schedule",value:function(e){return this}}]),n}(n(5319).w))},6102:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});var r=function(){var e=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.now;v(this,e),this.SchedulerAction=t,this.now=n}return p(e,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,e).schedule(n,t)}}]),e}();return e.now=function(){return Date.now()},e}(),i=function(e){g(n,e);var t=m(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.now;return v(this,n),(i=t.call(this,e,function(){return n.delegate&&n.delegate!==k(i)?n.delegate.now():a()})).actions=[],i.active=!1,i.scheduled=void 0,i}return p(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(e,t,r):o(T(n.prototype),"schedule",this).call(this,e,t,r)}},{key:"flush",value:function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}}]),n}(r)},3637:function(e,t,n){"use strict";n.d(t,{z:function(){return i},P:function(){return a}});var r=n(6465),i=new(n(6102).v)(r.o),a=i},7771:function(e,t,n){"use strict";n.d(t,{c:function(){return a},N:function(){return i}});var r=n(6465),i=new(function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n)}(n(6102).v))(function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i}return p(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t>0?o(T(n.prototype),"schedule",this).call(this,e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}},{key:"execute",value:function(e,t){return t>0||this.closed?o(T(n.prototype),"execute",this).call(this,e,t):this._execute(e,t)}},{key:"requestAsyncId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0||null===r&&this.delay>0?o(T(n.prototype),"requestAsyncId",this).call(this,e,t,r):e.flush(this)}}]),n}(r.o)),a=i},377:function(e,t,n){"use strict";n.d(t,{hZ:function(){return r}});var r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});var r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});var r=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},4449:function(e,t,n){"use strict";function r(e){setTimeout(function(){throw e},0)}n.d(t,{z:function(){return r}})},4487:function(e,t,n){"use strict";function r(e){return e}n.d(t,{y:function(){return r}})},9796:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});var r=Array.isArray||function(e){return e&&"number"==typeof e.length}},9489:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},9105:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,{m:function(){return r}})},1555:function(e,t,n){"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,{K:function(){return r}})},4072:function(e,t,n){"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:function(){return r}})},4869:function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,{K:function(){return r}})},7444:function(e,t,n){"use strict";n.d(t,{s:function(){return l}});var r=n(5015),i=n(4449),a=n(377),o=n(6554),u=n(9489),s=n(4072),c=n(1555),l=function(e){if(e&&"function"==typeof e[o.L])return l=e,function(e){var t=l[o.L]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if((0,u.z)(e))return(0,r.V)(e);if((0,s.t)(e))return n=e,function(e){return n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,i.z),e};if(e&&"function"==typeof e[a.hZ])return t=e,function(e){for(var n=t[a.hZ]();;){var r=void 0;try{r=n.next()}catch(i){return e.error(i),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e};var t,n,l,h=(0,c.K)(e)?"an invalid object":"'".concat(e,"'");throw new TypeError("You provided ".concat(h," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))}},5015:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var r=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}}},3205:function(e,t,i){"use strict";var a=i(3018),u=null;function c(){return u}var h=new a.OlP("DocumentToken"),f=function(){var e=function(){function e(){v(this,e)}return p(e,[{key:"historyGo",value:function(e){throw new Error("Not implemented")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,a.Yz7)({factory:d,token:e,providedIn:"platform"}),e}();function d(){return(0,a.LFG)(_)}var b=new a.OlP("Location Initialized"),_=function(){var e=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this))._doc=e,r._init(),r}return p(n,[{key:"_init",value:function(){this.location=window.location,this._history=window.history}},{key:"getBaseHrefFromDOM",value:function(){return c().getBaseHref(this._doc)}},{key:"onPopState",value:function(e){var t=c().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),function(){return t.removeEventListener("popstate",e)}}},{key:"onHashChange",value:function(e){var t=c().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),function(){return t.removeEventListener("hashchange",e)}}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(e){this.location.pathname=e}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(e,t,n){x()?this._history.pushState(e,t,n):this.location.hash=n}},{key:"replaceState",value:function(e,t,n){x()?this._history.replaceState(e,t,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"historyGo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._history.go(e)}},{key:"getState",value:function(){return this._history.state}}]),n}(f);return e.\u0275fac=function(t){return new(t||e)(a.LFG(h))},e.\u0275prov=(0,a.Yz7)({factory:S,token:e,providedIn:"platform"}),e}();function x(){return!!window.history.pushState}function S(){return new _((0,a.LFG)(h))}function I(e,t){if(0==e.length)return t;if(0==t.length)return e;var n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function E(e){var t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function C(e){return e&&"?"!==e[0]?"?"+e:e}var R=function(){var e=function(){function e(){v(this,e)}return p(e,[{key:"historyGo",value:function(e){throw new Error("Not implemented")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,a.Yz7)({factory:A,token:e,providedIn:"root"}),e}();function A(e){var t=(0,a.LFG)(h).location;return new N((0,a.LFG)(f),t&&t.origin||"")}var O=new a.OlP("appBaseHref"),N=function(){var e=function(e){g(n,e);var t=m(n);function n(e,r){var i;if(v(this,n),(i=t.call(this))._platformLocation=e,i._removeListenerFns=[],null==r&&(r=i._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return i._baseHref=r,y(i)}return p(n,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(e){return I(this._baseHref,e)}},{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._platformLocation.pathname+C(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?"".concat(t).concat(n):t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+C(r));this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+C(r));this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformLocation).historyGo)||void 0===t||t.call(e,n)}}]),n}(R);return e.\u0275fac=function(t){return new(t||e)(a.LFG(f),a.LFG(O,8))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),P=function(){var e=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this))._platformLocation=e,i._baseHref="",i._removeListenerFns=[],null!=r&&(i._baseHref=r),i}return p(n,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}},{key:"prepareExternalUrl",value:function(e){var t=I(this._baseHref,e);return t.length>0?"#"+t:t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+C(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+C(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformLocation).historyGo)||void 0===t||t.call(e,n)}}]),n}(R);return e.\u0275fac=function(t){return new(t||e)(a.LFG(f),a.LFG(O,8))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),D=function(){var e=function(){function e(t,n){var r=this;v(this,e),this._subject=new a.vpe,this._urlChangeListeners=[],this._platformStrategy=t;var i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=E(M(i)),this._platformStrategy.onPopState(function(e){r._subject.emit({url:r.path(!0),pop:!0,state:e.state,type:e.type})})}return p(e,[{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(e))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(e+C(t))}},{key:"normalize",value:function(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,M(t)))}},{key:"prepareExternalUrl",value:function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+C(t)),n)}},{key:"replaceState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+C(t)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformStrategy).historyGo)||void 0===t||t.call(e,n)}},{key:"onUrlChange",value:function(e){var t=this;this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(function(e){t._notifyUrlChangeListeners(e.url,e.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach(function(n){return n(e,t)})}},{key:"subscribe",value:function(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(R),a.LFG(f))},e.normalizeQueryParams=C,e.joinWithSlash=I,e.stripTrailingSlash=E,e.\u0275prov=(0,a.Yz7)({factory:L,token:e,providedIn:"root"}),e}();function L(){return new D((0,a.LFG)(R),(0,a.LFG)(f))}function M(e){return e.replace(/\/index.html$/,"")}var U=((U=U||{})[U.Zero=0]="Zero",U[U.One=1]="One",U[U.Two=2]="Two",U[U.Few=3]="Few",U[U.Many=4]="Many",U[U.Other=5]="Other",U),F=a.kL8,V=p(function e(){v(this,e)}),Z=function(){var e=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this)).locale=e,r}return p(n,[{key:"getPluralCategory",value:function(e,t){switch(F(t||this.locale)(e)){case U.Zero:return"zero";case U.One:return"one";case U.Two:return"two";case U.Few:return"few";case U.Many:return"many";default:return"other"}}}]),n}(V);return e.\u0275fac=function(t){return new(t||e)(a.LFG(a.soG))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}();function q(e,t){t=encodeURIComponent(t);var n,i=l(e.split(";"));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.indexOf("="),u=r(-1==o?[a,""]:[a.slice(0,o),a.slice(o+1)],2),s=u[0],c=u[1];if(s.trim()===t)return decodeURIComponent(c)}}catch(h){i.e(h)}finally{i.f()}return null}var j=function(){function e(t,n,r,i){v(this,e),this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}return p(e,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),e}(),B=function(){var e=function(){function e(t,n,r){v(this,e),this._viewContainer=t,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return p(e,[{key:"ngForOf",set:function(e){this._ngForOf=e,this._ngForOfDirty=!0}},{key:"ngForTrackBy",get:function(){return this._trackByFn},set:function(e){this._trackByFn=e}},{key:"ngForTemplate",set:function(e){e&&(this._template=e)}},{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(Wg){throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'. NgFor only supports binding to Iterables such as Arrays."))}}var t;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(e){var t=this,n=[];e.forEachOperation(function(e,r,i){if(null==e.previousIndex){var a=t._viewContainer.createEmbeddedView(t._template,new j(null,t._ngForOf,-1,-1),null===i?void 0:i),o=new z(e,a);n.push(o)}else if(null==i)t._viewContainer.remove(null===r?void 0:r);else if(null!==r){var u=t._viewContainer.get(r);t._viewContainer.move(u,i);var s=new z(e,u);n.push(s)}});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var i=0,a=this._viewContainer.length;i<a;i++){var o=this._viewContainer.get(i);o.context.index=i,o.context.count=a,o.context.ngForOf=this._ngForOf}e.forEachIdentityChange(function(e){t._viewContainer.get(e.currentIndex).context.$implicit=e.item})}},{key:"_perViewChange",value:function(e,t){e.context.$implicit=t.item}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))},e.\u0275dir=a.lG2({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e}(),z=p(function e(t,n){v(this,e),this.record=t,this.view=n}),H=function(){var e=function(){function e(t,n){v(this,e),this._viewContainer=t,this._context=new G,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return p(e,[{key:"ngIf",set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}},{key:"ngIfThen",set:function(e){K("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(e){K("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(a.s_b),a.Y36(a.Rgc))},e.\u0275dir=a.lG2({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e}(),G=p(function e(){v(this,e),this.$implicit=null,this.ngIf=null});function K(e,t){if(t&&!t.createEmbeddedView)throw new Error("".concat(e," must be a TemplateRef, but received '").concat((0,a.AaK)(t),"'."))}var W,J=function(){function e(){v(this,e)}return p(e,[{key:"createSubscription",value:function(e,t){return e.subscribe({next:t,error:function(e){throw e}})}},{key:"dispose",value:function(e){e.unsubscribe()}},{key:"onDestroy",value:function(e){e.unsubscribe()}}]),e}(),Y=new(function(){function e(){v(this,e)}return p(e,[{key:"createSubscription",value:function(e,t){return e.then(t,function(e){throw e})}},{key:"dispose",value:function(e){}},{key:"onDestroy",value:function(e){}}]),e}()),Q=new J,$=((W=function(){function e(t){v(this,e),this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}return p(e,[{key:"ngOnDestroy",value:function(){this._subscription&&this._dispose()}},{key:"transform",value:function(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}},{key:"_subscribe",value:function(e){var t=this;this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,function(n){return t._updateLatestValue(e,n)})}},{key:"_selectStrategy",value:function(t){if((0,a.QGY)(t))return Y;if((0,a.F4k)(t))return Q;throw Error("InvalidPipeArgument: '".concat(t,"' for pipe '").concat((0,a.AaK)(e),"'"))}},{key:"_dispose",value:function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}},{key:"_updateLatestValue",value:function(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}]),e}()).\u0275fac=function(e){return new(e||W)(a.Y36(a.sBO,16))},W.\u0275pipe=a.Yjl({name:"async",type:W,pure:!1}),W),X=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[{provide:V,useClass:Z}]}),e}();function ee(e){return"server"===e}var te=function(){var e=p(function e(){v(this,e)});return e.\u0275prov=(0,a.Yz7)({token:e,providedIn:"root",factory:function(){return new ne((0,a.LFG)(h),window)}}),e}(),ne=function(){function e(t,n){v(this,e),this.document=t,this.window=n,this.offset=function(){return[0,0]}}return p(e,[{key:"setOffset",value:function(e){this.offset=Array.isArray(e)?function(){return e}:e}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}},{key:"scrollToPosition",value:function(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}},{key:"scrollToAnchor",value:function(e){if(this.supportsScrolling()){var t=function(e,t){var n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow))for(var r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;i;){var a=i.shadowRoot;if(a){var o=a.getElementById(t)||a.querySelector('[name="'.concat(t,'"]'));if(o)return o}i=r.nextNode()}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}}},{key:"setHistoryScrollRestoration",value:function(e){if(this.supportScrollRestoration()){var t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}},{key:"scrollToElement",value:function(e){var t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"attemptFocus",value:function(e){return e.focus(),this.document.activeElement===e}},{key:"supportScrollRestoration",value:function(){try{if(!this.supportsScrolling())return!1;var e=re(this.window.history)||re(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(Wg){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Wg){return!1}}}]),e}();function re(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}var ie,ae=p(function e(){v(this,e)}),oe=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"onAndCancel",value:function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"remove",value:function(e){e.parentNode&&e.parentNode.removeChild(e)}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getBaseHref",value:function(e){var t=(ue=ue||document.querySelector("base"))?ue.getAttribute("href"):null;return null==t?null:function(e){(ie=ie||document.createElement("a")).setAttribute("href",e);var t=ie.pathname;return"/"===t.charAt(0)?t:"/".concat(t)}(t)}},{key:"resetBaseElement",value:function(){ue=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getCookie",value:function(e){return q(document.cookie,e)}}],[{key:"makeCurrent",value:function(){var e;e=new n,u||(u=e)}}]),n}(function(e){g(n,e);var t=m(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments)).supportsDOMEvents=!0,e}return p(n)}(function(){return p(function e(){v(this,e)})}())),ue=null,se=new a.OlP("TRANSITION_ID"),ce=[{provide:a.ip1,useFactory:function(e,t,n){return function(){n.get(a.CZH).donePromise.then(function(){var n=c();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(function(t){return t.getAttribute("ng-transition")===e}).forEach(function(e){return n.remove(e)})})}},deps:[se,h,a.zs3],multi:!0}],le=function(){function e(){v(this,e)}return p(e,[{key:"addToWindow",value:function(e){a.dqk.getAngularTestability=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},a.dqk.getAllAngularTestabilities=function(){return e.getAllTestabilities()},a.dqk.getAllAngularRootElements=function(){return e.getAllRootElements()},a.dqk.frameworkStabilizers||(a.dqk.frameworkStabilizers=[]),a.dqk.frameworkStabilizers.push(function(e){var t=a.dqk.getAllAngularTestabilities(),n=t.length,r=!1,i=function(t){r=r||t,0==--n&&e(r)};t.forEach(function(e){e.whenStable(i)})})}},{key:"findTestabilityInTree",value:function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?c().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}],[{key:"init",value:function(){(0,a.VLi)(new e)}}]),e}(),he=function(){var e=function(){function e(){v(this,e)}return p(e,[{key:"build",value:function(){return new XMLHttpRequest}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),fe=new a.OlP("EventManagerPlugins"),de=function(){var e=function(){function e(t,n){var r=this;v(this,e),this._zone=n,this._eventNameToPlugin=new Map,t.forEach(function(e){return e.manager=r}),this._plugins=t.slice().reverse()}return p(e,[{key:"addEventListener",value:function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}},{key:"addGlobalEventListener",value:function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event ".concat(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(fe),a.LFG(a.R0b))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),pe=function(){function e(t){v(this,e),this._doc=t}return p(e,[{key:"addGlobalEventListener",value:function(e,t,n){var r=c().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(t));return this.addEventListener(r,t,n)}}]),e}(),ve=function(){var e=function(){function e(){v(this,e),this._stylesSet=new Set}return p(e,[{key:"addStyles",value:function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),ge=function(){var e=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this))._doc=e,r._hostNodes=new Map,r._hostNodes.set(e.head,[]),r}return p(n,[{key:"_addStylesToHost",value:function(e,t,n){var r=this;e.forEach(function(e){var i=r._doc.createElement("style");i.textContent=e,n.push(t.appendChild(i))})}},{key:"addHost",value:function(e){var t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}},{key:"removeHost",value:function(e){var t=this._hostNodes.get(e);t&&t.forEach(me),this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach(function(n,r){t._addStylesToHost(e,r,n)})}},{key:"ngOnDestroy",value:function(){this._hostNodes.forEach(function(e){return e.forEach(me)})}}]),n}(ve);return e.\u0275fac=function(t){return new(t||e)(a.LFG(h))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}();function me(e){c().remove(e)}var ye={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ke=/%COMP%/g;function be(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?be(e,i,n):(i=i.replace(ke,e),n.push(i))}return n}function we(e){return function(t){if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var _e=function(){var e=function(){function e(t,n,r){v(this,e),this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new xe(t)}return p(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case a.ifc.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new Te(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case 1:case a.ifc.ShadowDom:return new Se(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var r=be(t.id,t.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(de),a.LFG(ge),a.LFG(a.AFp))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),xe=function(){function e(t){v(this,e),this.eventManager=t,this.data=Object.create(null)}return p(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS(ye[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,n){e&&e.insertBefore(t,n)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(n.textContent=""),n}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,n,r){if(r){t=r+":"+t;var i=ye[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}},{key:"removeAttribute",value:function(e,t,n){if(n){var r=ye[n];r?e.removeAttributeNS(r,t):e.removeAttribute("".concat(n,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,n,r){r&(a.JOm.DashCase|a.JOm.Important)?e.style.setProperty(t,n,r&a.JOm.Important?"important":""):e.style[t]=n}},{key:"removeStyle",value:function(e,t,n){n&a.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,n){e[t]=n}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,we(n)):this.eventManager.addEventListener(e,t,we(n))}}]),e}(),Te=function(e){g(n,e);var t=m(n);function n(e,r,i,a){var o;v(this,n),(o=t.call(this,e)).component=i;var u=be(a+"-"+i.id,i.styles,[]);return r.addStyles(u),o.contentAttr="_ngcontent-%COMP%".replace(ke,a+"-"+i.id),o.hostAttr="_nghost-%COMP%".replace(ke,a+"-"+i.id),o}return p(n,[{key:"applyToHost",value:function(e){o(T(n.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,t){var r=o(T(n.prototype),"createElement",this).call(this,e,t);return o(T(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(xe),Se=function(e){g(n,e);var t=m(n);function n(e,r,i,a){var o;v(this,n),(o=t.call(this,e)).sharedStylesHost=r,o.hostEl=i,o.shadowRoot=i.attachShadow({mode:"open"}),o.sharedStylesHost.addHost(o.shadowRoot);for(var u=be(a.id,a.styles,[]),s=0;s<u.length;s++){var c=document.createElement("style");c.textContent=u[s],o.shadowRoot.appendChild(c)}return o}return p(n,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,t){return o(T(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"insertBefore",value:function(e,t,r){return o(T(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),t,r)}},{key:"removeChild",value:function(e,t){return o(T(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(o(T(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),n}(xe),Ie=function(){var e=function(e){g(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e)}return p(n,[{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,n){var r=this;return e.addEventListener(t,n,!1),function(){return r.removeEventListener(e,t,n)}}},{key:"removeEventListener",value:function(e,t,n){return e.removeEventListener(t,n)}}]),n}(pe);return e.\u0275fac=function(t){return new(t||e)(a.LFG(h))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),Ee=["alt","control","meta","shift"],Ce={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Re={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ae={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},Oe=function(){var e=function(e){g(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e)}return p(n,[{key:"supports",value:function(e){return null!=n.parseEventName(e)}},{key:"addEventListener",value:function(e,t,r){var i=n.parseEventName(t),a=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return c().onAndCancel(e,i.domEventName,a)})}}],[{key:"parseEventName",value:function(e){var t=e.toLowerCase().split("."),r=t.shift();if(0===t.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(t.pop()),a="";if(Ee.forEach(function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),a+=e+".")}),a+=i,0!=t.length||0===i.length)return null;var o={};return o.domEventName=r,o.fullKey=a,o}},{key:"getEventFullKey",value:function(e){var t="",n=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Re.hasOwnProperty(t)&&(t=Re[t]))}return Ce[t]||t}(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),Ee.forEach(function(r){r!=n&&(0,Ae[r])(e)&&(t+=r+".")}),t+=n}},{key:"eventCallback",value:function(e,t,r){return function(i){n.getEventFullKey(i)===e&&r.runGuarded(function(){return t(i)})}}},{key:"_normalizeKey",value:function(e){switch(e){case"esc":return"escape";default:return e}}}]),n}(pe);return e.\u0275fac=function(t){return new(t||e)(a.LFG(h))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),Ne=(0,a.eFA)(a._c5,"browser",[{provide:a.Lbi,useValue:"browser"},{provide:a.g9A,useValue:function(){oe.makeCurrent(),le.init()},multi:!0},{provide:h,useFactory:function(){return(0,a.RDi)(document),document},deps:[]}]),Pe=[[],{provide:a.zSh,useValue:"root"},{provide:a.qLn,useFactory:function(){return new a.qLn},deps:[]},{provide:fe,useClass:Ie,multi:!0,deps:[h,a.R0b,a.Lbi]},{provide:fe,useClass:Oe,multi:!0,deps:[h]},[],{provide:_e,useClass:_e,deps:[de,ge,a.AFp]},{provide:a.FYo,useExisting:_e},{provide:ve,useExisting:ge},{provide:ge,useClass:ge,deps:[h]},{provide:a.dDg,useClass:a.dDg,deps:[a.R0b]},{provide:de,useClass:de,deps:[fe,a.R0b]},{provide:ae,useClass:he,deps:[]},[]],De=function(){var e=function(){function e(t){if(v(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return p(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:a.AFp,useValue:t.appId},{provide:se,useExisting:a.AFp},ce]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(e,12))},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:Pe,imports:[X,a.hGG]}),e}();function Le(){return new Me((0,a.LFG)(h))}var Me=function(){var e=function(){function e(t){v(this,e),this._doc=t,this._dom=c()}return p(e,[{key:"addTag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?this._getOrCreateElement(e,t):null}},{key:"addTags",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?e.reduce(function(e,r){return r&&e.push(t._getOrCreateElement(r,n)),e},[]):[]}},{key:"getTag",value:function(e){return e&&this._doc.querySelector("meta[".concat(e,"]"))||null}},{key:"getTags",value:function(e){if(!e)return[];var t=this._doc.querySelectorAll("meta[".concat(e,"]"));return t?[].slice.call(t):[]}},{key:"updateTag",value:function(e,t){if(!e)return null;t=t||this._parseSelector(e);var n=this.getTag(t);return n?this._setMetaElementAttributes(e,n):this._getOrCreateElement(e,!0)}},{key:"removeTag",value:function(e){this.removeTagElement(this.getTag(e))}},{key:"removeTagElement",value:function(e){e&&this._dom.remove(e)}},{key:"_getOrCreateElement",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!n){var r=this._parseSelector(e),i=this.getTags(r).filter(function(n){return t._containsAttributes(e,n)})[0];if(void 0!==i)return i}var a=this._dom.createElement("meta");return this._setMetaElementAttributes(e,a),this._doc.getElementsByTagName("head")[0].appendChild(a),a}},{key:"_setMetaElementAttributes",value:function(e,t){var n=this;return Object.keys(e).forEach(function(r){return t.setAttribute(n._getMetaKeyMap(r),e[r])}),t}},{key:"_parseSelector",value:function(e){var t=e.name?"name":"property";return"".concat(t,'="').concat(e[t],'"')}},{key:"_containsAttributes",value:function(e,t){var n=this;return Object.keys(e).every(function(r){return t.getAttribute(n._getMetaKeyMap(r))===e[r]})}},{key:"_getMetaKeyMap",value:function(e){return Ue[e]||e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(h))},e.\u0275prov=(0,a.Yz7)({factory:Le,token:e,providedIn:"root"}),e}(),Ue={httpEquiv:"http-equiv"};"undefined"!=typeof window&&window;var Fe=i(5917),Ve=i(7574),Ze=i(9773);function qe(e,t){return(0,Ze.zg)(e,t,1)}var je=i(7393);function Be(e,t){return function(n){return n.lift(new ze(e,t))}}var ze=function(){function e(t,n){v(this,e),this.predicate=t,this.thisArg=n}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new He(e,this.predicate,this.thisArg))}}]),e}(),He=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e)).predicate=r,a.thisArg=i,a.count=0,a}return p(n,[{key:"_next",value:function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}]),n}(je.L),Ge=i(8002),Ke=p(function e(){v(this,e)}),We=p(function e(){v(this,e)}),Je=function(){function e(t){var n=this;v(this,e),this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){n.headers=new Map,t.split("\n").forEach(function(e){var t=e.indexOf(":");if(t>0){var r=e.slice(0,t),i=r.toLowerCase(),a=e.slice(t+1).trim();n.maybeSetNormalizedName(r,i),n.headers.has(i)?n.headers.get(i).push(a):n.headers.set(i,[a])}})}:function(){n.headers=new Map,Object.keys(t).forEach(function(e){var r=t[e],i=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(n.headers.set(i,r),n.maybeSetNormalizedName(e,i))})}:this.headers=new Map}return p(e,[{key:"has",value:function(e){return this.init(),this.headers.has(e.toLowerCase())}},{key:"get",value:function(e){this.init();var t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(e){return this.init(),this.headers.get(e.toLowerCase())||null}},{key:"append",value:function(e,t){return this.clone({name:e,value:t,op:"a"})}},{key:"set",value:function(e,t){return this.clone({name:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({name:e,value:t,op:"d"})}},{key:"maybeSetNormalizedName",value:function(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}},{key:"init",value:function(){var t=this;this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(e){return t.applyUpdate(e)}),this.lazyUpdate=null))}},{key:"copyFrom",value:function(e){var t=this;e.init(),Array.from(e.headers.keys()).forEach(function(n){t.headers.set(n,e.headers.get(n)),t.normalizedNames.set(n,e.normalizedNames.get(n))})}},{key:"clone",value:function(t){var n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}},{key:"applyUpdate",value:function(e){var t=e.name.toLowerCase();switch(e.op){case"a":case"s":var n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);var r=("a"===e.op?this.headers.get(t):void 0)||[];r.push.apply(r,s(n)),this.headers.set(t,r);break;case"d":var i=e.value;if(i){var a=this.headers.get(t);if(!a)return;0===(a=a.filter(function(e){return-1===i.indexOf(e)})).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}else this.headers.delete(t),this.normalizedNames.delete(t)}}},{key:"forEach",value:function(e){var t=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return e(t.normalizedNames.get(n),t.headers.get(n))})}}]),e}(),Ye=function(){function e(){v(this,e)}return p(e,[{key:"encodeKey",value:function(e){return Qe(e)}},{key:"encodeValue",value:function(e){return Qe(e)}},{key:"decodeKey",value:function(e){return decodeURIComponent(e)}},{key:"decodeValue",value:function(e){return decodeURIComponent(e)}}]),e}();function Qe(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function $e(e){return"".concat(e)}var Xe=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(v(this,e),this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new Ye,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){var n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(function(e){var i=e.indexOf("="),a=r(-1==i?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,i)),t.decodeValue(e.slice(i+1))],2),o=a[0],u=a[1],s=n.get(o)||[];s.push(u),n.set(o,s)}),n}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(function(e){var r=n.fromObject[e];t.map.set(e,Array.isArray(r)?r:[r])})):this.map=null}return p(e,[{key:"has",value:function(e){return this.init(),this.map.has(e)}},{key:"get",value:function(e){this.init();var t=this.map.get(e);return t?t[0]:null}},{key:"getAll",value:function(e){return this.init(),this.map.get(e)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(e,t){return this.clone({param:e,value:t,op:"a"})}},{key:"appendAll",value:function(e){var t=[];return Object.keys(e).forEach(function(n){var r=e[n];Array.isArray(r)?r.forEach(function(e){t.push({param:n,value:e,op:"a"})}):t.push({param:n,value:r,op:"a"})}),this.clone(t)}},{key:"set",value:function(e,t){return this.clone({param:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({param:e,value:t,op:"d"})}},{key:"toString",value:function(){var e=this;return this.init(),this.keys().map(function(t){var n=e.encoder.encodeKey(t);return e.map.get(t).map(function(t){return n+"="+e.encoder.encodeValue(t)}).join("&")}).filter(function(e){return""!==e}).join("&")}},{key:"clone",value:function(t){var n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}},{key:"init",value:function(){var e=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(t){return e.map.set(t,e.cloneFrom.map.get(t))}),this.updates.forEach(function(t){switch(t.op){case"a":case"s":var n=("a"===t.op?e.map.get(t.param):void 0)||[];n.push($e(t.value)),e.map.set(t.param,n);break;case"d":if(void 0===t.value){e.map.delete(t.param);break}var r=e.map.get(t.param)||[],i=r.indexOf($e(t.value));-1!==i&&r.splice(i,1),r.length>0?e.map.set(t.param,r):e.map.delete(t.param)}}),this.cloneFrom=this.updates=null)}}]),e}(),et=function(){function e(){v(this,e),this.map=new Map}return p(e,[{key:"set",value:function(e,t){return this.map.set(e,t),this}},{key:"get",value:function(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}},{key:"delete",value:function(e){return this.map.delete(e),this}},{key:"keys",value:function(){return this.map.keys()}}]),e}();function tt(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function nt(e){return"undefined"!=typeof Blob&&e instanceof Blob}function rt(e){return"undefined"!=typeof FormData&&e instanceof FormData}var it=function(){function e(t,n,r,i){var a;if(v(this,e),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Je),this.context||(this.context=new et),this.params){var o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{var u=n.indexOf("?");this.urlWithParams=n+(-1===u?"?":u<n.length-1?"&":"")+o}}else this.params=new Xe,this.urlWithParams=n}return p(e,[{key:"serializeBody",value:function(){return null===this.body?null:tt(this.body)||nt(this.body)||rt(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof Xe?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||rt(this.body)?null:nt(this.body)?this.body.type||null:tt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Xe?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}},{key:"clone",value:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.method||this.method,i=n.url||this.url,a=n.responseType||this.responseType,o=void 0!==n.body?n.body:this.body,u=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,s=void 0!==n.reportProgress?n.reportProgress:this.reportProgress,c=n.headers||this.headers,l=n.params||this.params,h=null!==(t=n.context)&&void 0!==t?t:this.context;return void 0!==n.setHeaders&&(c=Object.keys(n.setHeaders).reduce(function(e,t){return e.set(t,n.setHeaders[t])},c)),n.setParams&&(l=Object.keys(n.setParams).reduce(function(e,t){return e.set(t,n.setParams[t])},l)),new e(r,i,o,{params:l,headers:c,context:h,reportProgress:s,responseType:a,withCredentials:u})}}]),e}(),at=((at=at||{})[at.Sent=0]="Sent",at[at.UploadProgress=1]="UploadProgress",at[at.ResponseHeader=2]="ResponseHeader",at[at.DownloadProgress=3]="DownloadProgress",at[at.Response=4]="Response",at[at.User=5]="User",at),ot=p(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";v(this,e),this.headers=t.headers||new Je,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}),ut=function(e){g(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v(this,n),(e=t.call(this,r)).type=at.ResponseHeader,e}return p(n,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),n}(ot),st=function(e){g(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v(this,n),(e=t.call(this,r)).type=at.Response,e.body=void 0!==r.body?r.body:null,e}return p(n,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),n}(ot),ct=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e,0,"Unknown Error")).name="HttpErrorResponse",r.ok=!1,r.message=r.status>=200&&r.status<300?"Http failure during parsing for ".concat(e.url||"(unknown url)"):"Http failure response for ".concat(e.url||"(unknown url)",": ").concat(e.status," ").concat(e.statusText),r.error=e.error||null,r}return p(n)}(ot);function lt(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}var ht=function(){var e=function(){function e(t){v(this,e),this.handler=t}return p(e,[{key:"request",value:function(e,t){var n,r,i,a=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e instanceof it?n=e:(r=o.headers instanceof Je?o.headers:new Je(o.headers),o.params&&(i=o.params instanceof Xe?o.params:new Xe({fromObject:o.params})),n=new it(e,t,void 0!==o.body?o.body:null,{headers:r,context:o.context,params:i,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials}));var u=(0,Fe.of)(n).pipe(qe(function(e){return a.handler.handle(e)}));if(e instanceof it||"events"===o.observe)return u;var s=u.pipe(Be(function(e){return e instanceof st}));switch(o.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return s.pipe((0,Ge.U)(function(e){if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return s.pipe((0,Ge.U)(function(e){if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return s.pipe((0,Ge.U)(function(e){if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return s.pipe((0,Ge.U)(function(e){return e.body}))}case"response":return s;default:throw new Error("Unreachable: unhandled observe type ".concat(o.observe,"}"))}}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",e,t)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",e,t)}},{key:"head",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",e,t)}},{key:"jsonp",value:function(e,t){return this.request("JSONP",e,{params:(new Xe).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",e,t)}},{key:"patch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",e,lt(n,t))}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",e,lt(n,t))}},{key:"put",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",e,lt(n,t))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(Ke))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),ft=function(){function e(t,n){v(this,e),this.next=t,this.interceptor=n}return p(e,[{key:"handle",value:function(e){return this.interceptor.intercept(e,this.next)}}]),e}(),dt=new a.OlP("HTTP_INTERCEPTORS"),pt=function(){var e=function(){function e(){v(this,e)}return p(e,[{key:"intercept",value:function(e,t){return t.handle(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),vt=/^\)\]\}',?\n/,gt=function(){var e=function(){function e(t){v(this,e),this.xhrFactory=t}return p(e,[{key:"handle",value:function(e){var t=this;if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ve.y(function(n){var r=t.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach(function(e,t){return r.setRequestHeader(e,t.join(","))}),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){var i=e.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(e.responseType){var a=e.responseType.toLowerCase();r.responseType="json"!==a?a:"text"}var o=e.serializeBody(),u=null,s=function(){if(null!==u)return u;var t=1223===r.status?204:r.status,n=r.statusText||"OK",i=new Je(r.getAllResponseHeaders()),a=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(r)||e.url;return u=new ut({headers:i,status:t,statusText:n,url:a})},c=function(){var t=s(),i=t.headers,a=t.status,o=t.statusText,u=t.url,c=null;204!==a&&(c=void 0===r.response?r.responseText:r.response),0===a&&(a=c?200:0);var l=a>=200&&a<300;if("json"===e.responseType&&"string"==typeof c){var h=c;c=c.replace(vt,"");try{c=""!==c?JSON.parse(c):null}catch(f){c=h,l&&(l=!1,c={error:f,text:c})}}l?(n.next(new st({body:c,headers:i,status:a,statusText:o,url:u||void 0})),n.complete()):n.error(new ct({error:c,headers:i,status:a,statusText:o,url:u||void 0}))},l=function(e){var t=s().url,i=new ct({error:e,status:r.status||0,statusText:r.statusText||"Unknown Error",url:t||void 0});n.error(i)},h=!1,f=function(t){h||(n.next(s()),h=!0);var i={type:at.DownloadProgress,loaded:t.loaded};t.lengthComputable&&(i.total=t.total),"text"===e.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},d=function(e){var t={type:at.UploadProgress,loaded:e.loaded};e.lengthComputable&&(t.total=e.total),n.next(t)};return r.addEventListener("load",c),r.addEventListener("error",l),r.addEventListener("timeout",l),r.addEventListener("abort",l),e.reportProgress&&(r.addEventListener("progress",f),null!==o&&r.upload&&r.upload.addEventListener("progress",d)),r.send(o),n.next({type:at.Sent}),function(){r.removeEventListener("error",l),r.removeEventListener("abort",l),r.removeEventListener("load",c),r.removeEventListener("timeout",l),e.reportProgress&&(r.removeEventListener("progress",f),null!==o&&r.upload&&r.upload.removeEventListener("progress",d)),r.readyState!==r.DONE&&r.abort()}})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(ae))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),mt=new a.OlP("XSRF_COOKIE_NAME"),yt=new a.OlP("XSRF_HEADER_NAME"),kt=p(function e(){v(this,e)}),bt=function(){var e=function(){function e(t,n,r){v(this,e),this.doc=t,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return p(e,[{key:"getToken",value:function(){if("server"===this.platform)return null;var e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=q(e,this.cookieName),this.lastCookieString=e),this.lastToken}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(h),a.LFG(a.Lbi),a.LFG(mt))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),wt=function(){var e=function(){function e(t,n){v(this,e),this.tokenService=t,this.headerName=n}return p(e,[{key:"intercept",value:function(e,t){var n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);var r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(kt),a.LFG(yt))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),_t=function(){var e=function(){function e(t,n){v(this,e),this.backend=t,this.injector=n,this.chain=null}return p(e,[{key:"handle",value:function(e){if(null===this.chain){var t=this.injector.get(dt,[]);this.chain=t.reduceRight(function(e,t){return new ft(e,t)},this.backend)}return this.chain.handle(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(We),a.LFG(a.zs3))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),xt=function(){var e=function(){function e(){v(this,e)}return p(e,null,[{key:"disable",value:function(){return{ngModule:e,providers:[{provide:wt,useClass:pt}]}}},{key:"withOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:e,providers:[t.cookieName?{provide:mt,useValue:t.cookieName}:[],t.headerName?{provide:yt,useValue:t.headerName}:[]]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[wt,{provide:dt,useExisting:wt,multi:!0},{provide:kt,useClass:bt},{provide:mt,useValue:"XSRF-TOKEN"},{provide:yt,useValue:"X-XSRF-TOKEN"}]}),e}(),Tt=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[ht,{provide:Ke,useClass:_t},gt,{provide:We,useExisting:gt}],imports:[[xt.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),e}(),St=i(2329),It=i(4459),Et=p(function e(t){return v(this,e),t}),Ct=p(function e(){return v(this,e),(0,St.C6)()}),Rt=new a.OlP("angularfire2._apps"),At={provide:Et,useFactory:function(e){return e&&1===e.length?e[0]:new Et((0,St.Mq)())},deps:[[new a.FiY,Rt]]},Ot={provide:Ct,deps:[[new a.FiY,Rt]]};function Nt(e){return function(t,n){var r=t.runOutsideAngular(function(){return e(n)});return new Et(r)}}var Pt=function(){var e=p(function e(t){v(this,e),(0,St.KN)("angularfire",It.q4.full,"core"),(0,St.KN)("angularfire",It.q4.full,"app"),(0,St.KN)("angular",a.q4F.full,t.toString())});return e.\u0275fac=function(t){return new(t||e)(a.LFG(a.Lbi))},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[At,Ot]}),e}();function Dt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{ngModule:Pt,providers:[{provide:Rt,useFactory:Nt(e),multi:!0,deps:[a.R0b,a.zs3,It.HU].concat(n)}]}}var Lt=(0,It.u3)(St.ZF,!0);i(8882);var Mt=i(3854),Ut=i(279),Ft=i(9306),Vt=i(8604),Zt=p(function e(){return v(this,e),(0,It.vb)("auth")}),qt=i(6304),jt=new Map,Bt={activated:!1,tokenObservers:[]},zt={initialized:!1,enabled:!1};function Ht(e){return jt.get(e)||Bt}function Gt(e,t){jt.set(e,t)}function Kt(){return zt}var Wt=function(){function e(t,n,r,i,a){if(v(this,e),this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}return p(e,[{key:"start",value:function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})}},{key:"stop",value:function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}},{key:"isRunning",value:function(){return!!this.pending}},{key:"process",value:function(e){var t=this;return(0,qt.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.stop(),n.prev=1,t.pending=new Mt.BH,n.next=5,function(e){return new Promise(function(t){setTimeout(t,e)})}(t.getNextRun(e));case 5:return t.pending.resolve(),n.next=8,t.pending.promise;case 8:return t.pending=new Mt.BH,n.next=11,t.operation();case 11:return t.pending.resolve(),n.next=14,t.pending.promise;case 14:t.process(!0).catch(function(){}),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(1),t.retryPolicy(n.t0)?t.process(!1).catch(function(){}):t.stop();case 20:case"end":return n.stop()}},n,null,[[1,17]])}))()}},{key:"getNextRun",value:function(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}]),e}(),Jt=new Mt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Yt(e){if(!Ht(e).activated)throw Jt.create("use-before-activation",{appName:e.name})}function Qt(e,t){return $t.apply(this,arguments)}function $t(){return($t=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u,s,c,l,h,f,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.url,i=t.body,a={"Content-Type":"application/json"},!(o=n.getImmediate({optional:!0}))){e.next=7;break}return e.next=5,o.getHeartbeatsHeader();case 5:(u=e.sent)&&(a["X-Firebase-Client"]=u);case 7:return s={method:"POST",body:JSON.stringify(i),headers:a},e.prev=8,e.next=11,fetch(r,s);case 11:c=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(8),Jt.create("fetch-network-error",{originalErrorMessage:e.t0.message});case 17:if(200===c.status){e.next=19;break}throw Jt.create("fetch-status-error",{httpStatus:c.status});case 19:return e.prev=19,e.next=22,c.json();case 22:l=e.sent,e.next=28;break;case 25:throw e.prev=25,e.t1=e.catch(19),Jt.create("fetch-parse-error",{originalErrorMessage:e.t1.message});case 28:if((h=l.ttl.match(/^([\d.]+)(s)$/))&&h[2]&&!isNaN(Number(h[1]))){e.next=31;break}throw Jt.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: ".concat(l.ttl)});case 31:return f=1e3*Number(h[1]),d=Date.now(),e.abrupt("return",{token:l.token,expireTimeMillis:d+f,issuedAtTimeMillis:d});case 33:case"end":return e.stop()}},e,null,[[8,14],[19,25]])}))).apply(this,arguments)}function Xt(e,t){var n=e.options,r=n.projectId,i=n.appId,a=n.apiKey;return{url:"https://content-firebaseappcheck.googleapis.com/v1/projects/".concat(r,"/apps/").concat(i,":exchangeDebugToken?key=").concat(a),body:{debug_token:t}}}var en="firebase-app-check-store",tn=null;function nn(){return tn||(tn=new Promise(function(e,t){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(t){e(t.target.result)},n.onerror=function(e){var n;t(Jt.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(en,{keyPath:"compositeKey"})}}}catch(r){t(Jt.create("storage-open",{originalErrorMessage:r.message}))}}))}function rn(){return(rn=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn();case 2:return r=e.sent.transaction(en,"readwrite"),i=r.objectStore(en).put({compositeKey:t,value:n}),e.abrupt("return",new Promise(function(e,t){i.onsuccess=function(t){e()},r.onerror=function(e){var n;t(Jt.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var an=new Ft.Yd("@firebase/app-check");function on(e,t){return(0,Mt.hl)()?function(e,t){return function(e,t){return rn.apply(this,arguments)}(function(e){return"".concat(e.options.appId,"-").concat(e.name)}(e),t)}(e,t).catch(function(e){an.warn("Failed to write token to IndexedDB. Error: ".concat(e))}):Promise.resolve()}function un(){return Kt().enabled}function sn(){return cn.apply(this,arguments)}function cn(){return(cn=(0,qt.Z)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=Kt()).enabled||!t.token){e.next=3;break}return e.abrupt("return",t.token.promise);case 3:throw Error("\n            Can't get debug token in production mode.\n        ");case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ln={error:"UNKNOWN_ERROR"};function hn(e){return fn.apply(this,arguments)}function fn(){return(fn=(0,qt.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,u,s,c,l,h=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]&&h[1],Yt(r=t.app),i=Ht(r),o=i.token){e.next=10;break}return e.next=8,i.cachedTokenPromise;case 8:(u=e.sent)&&gn(u)&&(o=u);case 10:if(n||!o||!gn(o)){e.next=12;break}return e.abrupt("return",{token:o.token});case 12:if(c=!1,!un()){e.next=33;break}if(e.t0=i.exchangeTokenPromise,e.t0){e.next=26;break}return e.t1=Qt,e.t2=Xt,e.t3=r,e.next=21,sn();case 21:e.t4=e.sent,e.t5=(0,e.t2)(e.t3,e.t4),e.t6=t.heartbeatServiceProvider,i.exchangeTokenPromise=(0,e.t1)(e.t5,e.t6).then(function(e){return i.exchangeTokenPromise=void 0,e}),c=!0;case 26:return e.next=28,i.exchangeTokenPromise;case 28:return l=e.sent,e.next=31,on(r,l);case 31:return Gt(r,Object.assign(Object.assign({},i),{token:l})),e.abrupt("return",{token:l.token});case 33:return e.prev=33,i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(function(e){return i.exchangeTokenPromise=void 0,e}),c=!0),e.next=37,i.exchangeTokenPromise;case 37:o=e.sent,e.next=43;break;case 40:e.prev=40,e.t7=e.catch(33),"appCheck/throttled"===e.t7.code?an.warn(e.t7.message):an.error(e.t7),a=e.t7;case 43:if(!o){e.next=50;break}return s={token:o.token},Gt(r,Object.assign(Object.assign({},i),{token:o})),e.next=48,on(r,o);case 48:e.next=51;break;case 50:s=mn(a);case 51:return c&&vn(r,s),e.abrupt("return",s);case 53:case"end":return e.stop()}},e,null,[[33,40]])}))).apply(this,arguments)}function dn(e,t){var n=Ht(e),r=n.tokenObservers.filter(function(e){return e.next!==t});0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),Gt(e,Object.assign(Object.assign({},n),{tokenObservers:r}))}function pn(e){var t=e.app,n=Ht(t),r=n.tokenRefresher;r||(r=function(e){var t=e.app;return new Wt((0,qt.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!Ht(t).token){n.next=6;break}return n.next=3,hn(e,!0);case 3:n.t0=n.sent,n.next=9;break;case 6:return n.next=8,hn(e);case 8:n.t0=n.sent;case 9:if(!(r=n.t0).error){n.next=12;break}throw r.error;case 12:case"end":return n.stop()}},n)})),function(){return!0},function(){var e=Ht(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return n=Math.min(n,e.token.expireTimeMillis-3e5),Math.max(0,n-Date.now())}return 0},3e4,96e4)}(e),Gt(t,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function vn(e,t){var n,r=l(Ht(e).tokenObservers);try{for(r.s();!(n=r.n()).done;){var i=n.value;try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(a){}}}catch(o){r.e(o)}finally{r.f()}}function gn(e){return e.expireTimeMillis-Date.now()>0}function mn(e){return{token:(t=ln,Mt.US.encodeString(JSON.stringify(t),!1)),error:e};var t}var yn=function(){function e(t,n){v(this,e),this.app=t,this.heartbeatServiceProvider=n}return p(e,[{key:"_delete",value:function(){var e,t=l(Ht(this.app).tokenObservers);try{for(t.s();!(e=t.n()).done;){var n=e.value;dn(this.app,n.next)}}catch(r){t.e(r)}finally{t.f()}return Promise.resolve()}}]),e}();(0,Ut._registerComponent)(new Vt.wA("app-check",function(e){return t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat"),new yn(t,n);var t,n},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,n){e.getProvider("app-check-internal").initialize()})),(0,Ut._registerComponent)(new Vt.wA("app-check-internal",function(e){return t=e.getProvider("app-check").getImmediate(),{getToken:function(e){return hn(t,e)},addTokenListener:function(e){return function(e,t,n,r){var i=e.app,a=Ht(i),o={next:n,error:void 0,type:"INTERNAL"};if(Gt(i,Object.assign(Object.assign({},a),{tokenObservers:[].concat(s(a.tokenObservers),[o])})),a.token&&gn(a.token)){var u=a.token;Promise.resolve().then(function(){n({token:u.token}),pn(e)}).catch(function(){})}a.cachedTokenPromise.then(function(){return pn(e)})}(t,0,e)},removeTokenListener:function(e){return dn(t.app,e)}};var t},"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ut.registerVersion)("@firebase/app-check","0.5.8");var kn=p(function e(){return v(this,e),(0,It.vb)("app-check")});"undefined"!=typeof window&&window;var bn=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,wn(e),"Firebase Storage: ".concat(r," (").concat(wn(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(k(i),n.prototype),i}return p(n,[{key:"_codeEquals",value:function(e){return wn(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?"".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this._baseMessage}}]),n}(Mt.ZR);function wn(e){return"storage/"+e}function _n(){return new bn("unknown","An unknown error occurred, please check the error payload for server response.")}function xn(){return new bn("canceled","User canceled the upload/download.")}function Tn(){return new bn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Sn(e){return new bn("invalid-argument",e)}function In(){return new bn("app-deleted","The Firebase app was deleted.")}function En(e){return new bn("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Cn(e,t){return new bn("invalid-format","String does not match format '"+e+"': "+t)}function Rn(e){throw new bn("internal-error","Internal error: "+e)}var An=function(){function e(t,n){v(this,e),this.bucket=t,this.path_=n}return p(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new bn("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}for(var o=n.replace(/[.]/g,"\\."),u=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://".concat("firebasestorage.googleapis.com"===n?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/([A-Za-z0-9.\\-_]+)/([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:a}],s=0;s<u.length;s++){var c=u[s],l=c.regex.exec(t);if(l){var h=l[c.indices.path];h||(h=""),r=new e(l[c.indices.bucket],h),c.postModify(r);break}}if(null==r)throw function(e){return new bn("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),On=function(){function e(t){v(this,e),this.promise_=Promise.reject(t)}return p(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function Nn(e){return"string"==typeof e||e instanceof String}function Pn(e){return Dn()&&e instanceof Blob}function Dn(){return"undefined"!=typeof Blob}function Ln(e,t,n,r){if(r<t)throw Sn("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Sn("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Mn(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Un(e){var t=encodeURIComponent,n="?";for(var r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n=n.slice(0,-1)}var Fn=(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Fn||(Fn={})),Fn),Vn=function(){function e(t,n,r,i,a,o,u,s,c,l,h){var f=this;v(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(function(e,t){f.resolve_=e,f.reject_=t,f.start_()})}return p(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=_n();u.serverResponse=a.getErrorText(),i(e.errorCallback_?e.errorCallback_(a,u):u)}else i(n.canceled?e.appDelete_?In():xn():new bn("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?t(0,new Zn(!1,null,!0)):this.backoffId_=function(t,n,r){var i=1,a=null,o=null,u=!1,s=0;function c(){return 2===s}var l=!1;function h(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];l||(l=!0,n.apply(null,t))}function f(t){a=setTimeout(function(){a=null,function(t,n){if(n)return void t(!1,new Zn(!1,null,!0));var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){null!==e.progressCallback_&&e.progressCallback_(t.loaded,t.lengthComputable?t.total:-1)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then(function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===Fn.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new Zn(o,r))}else{var u=r.getErrorCode()===Fn.ABORT;t(!1,new Zn(!1,null,u))}})}(p,c())},t)}function d(){o&&clearTimeout(o)}function p(e){if(!l){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e||c()||u?(d(),void h.call.apply(h,[null,e].concat(n))):(i<64&&(i*=2),1===s?(s=2,a=0):a=1e3*(i+Math.random()),void f(a));var a}d()}var v=!1;function g(e){v||(v=!0,d(),l||(null!==a?(e||(s=2),clearTimeout(a),f(0)):e||(s=1)))}return f(0),o=setTimeout(function(){u=!0,g(!0)},r),g}(0,t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),Zn=p(function e(t,n,r){v(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r});function qn(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function jn(){for(var e=qn(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(Dn())return new Blob(n);throw new bn("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Bn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},zn=p(function e(t,n){v(this,e),this.data=t,this.contentType=n||null});function Hn(e,t){switch(e){case Bn.RAW:return new zn(Gn(t));case Bn.BASE64:case Bn.BASE64URL:return new zn(Kn(e,t));case Bn.DATA_URL:return new zn((n=new Wn(t)).base64?Kn(Bn.BASE64,n.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw Cn(Bn.DATA_URL,"Malformed data URL.")}return Gn(t)}(n.rest),new Wn(t).contentType)}var n;throw _n()}function Gn(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?n<e.length-1&&56320==(64512&e.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Kn(e,t){switch(e){case Bn.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Cn(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Bn.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw Cn(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw Cn(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var Wn=p(function e(t){v(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw Cn(Bn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r,i=n[1]||null;null!=i&&(this.base64=(r=i).length>=";base64".length&&";base64"===r.substring(r.length-";base64".length),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}),Jn=function(){function e(t,n){v(this,e);var r=0,i="";Pn(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return p(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(Pn(this.data_)){var r=(a=t,o=n,(i=this.data_).webkitSlice?i.webkitSlice(a,o):i.mozSlice?i.mozSlice(a,o):i.slice?i.slice(a,o):null);return null===r?null:new e(r)}var i,a,o,u=new Uint8Array(this.data_.buffer,t,n-t);return new e(u,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Dn()){var i=n.map(function(t){return t instanceof e?t.data_:t});return new e(jn.apply(null,i))}var a=n.map(function(e){return Nn(e)?Hn(Bn.RAW,e).data:e.data_}),o=0;a.forEach(function(e){o+=e.byteLength});var u=new Uint8Array(o),s=0;return a.forEach(function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]}),new e(u,!0)}}]),e}();function Yn(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"==typeof e&&!Array.isArray(e)}(t)?t:null}function Qn(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function $n(e,t){return t}var Xn=p(function e(t,n,r,i){v(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||$n}),er=null;function tr(){if(er)return er;var e=[];e.push(new Xn("bucket")),e.push(new Xn("generation")),e.push(new Xn("metageneration")),e.push(new Xn("name","fullPath",!0));var t=new Xn("name");t.xform=function(e,t){return function(e){return!Nn(e)||e.length<2?e:Qn(e)}(t)},e.push(t);var n=new Xn("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Xn("timeCreated")),e.push(new Xn("updated")),e.push(new Xn("md5Hash",null,!0)),e.push(new Xn("cacheControl",null,!0)),e.push(new Xn("contentDisposition",null,!0)),e.push(new Xn("contentEncoding",null,!0)),e.push(new Xn("contentLanguage",null,!0)),e.push(new Xn("contentType",null,!0)),e.push(new Xn("metadata","customMetadata",!0)),er=e}function nr(e,t,n){var r=Yn(t);return null===r?null:function(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=new An(e.bucket,e.fullPath);return t._makeStorageReference(n)}})}(r,e),r}(e,r,n)}function rr(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var ir=p(function e(t,n,r,i){v(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]});function ar(e){if(!e)throw _n()}function or(e,t){return function(n,r){var i=nr(e,r,t);return ar(null!==i),i}}function ur(e){return function(t,n){var r;return(r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?new bn("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new bn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?new bn("quota-exceeded","Quota for bucket '"+e.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===t.getStatus()?new bn("unauthorized","User does not have permission to access '"+e.path+"'."):n).serverResponse=n.serverResponse,r}}function sr(e){var t=ur(e);return function(n,r){var i=t(n,r);return 404===n.getStatus()&&(i=new bn("object-not-found","Object '"+e.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function cr(e,t,n){var r=Mn(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new ir(r,"GET",or(e,n),i);return a.errorHandler=sr(t),a}function lr(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}function hr(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=lr(t,r,i),c=rr(s,n),l=Jn.getBlob("--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",r,"\r\n--"+u+"--");if(null===l)throw Tn();var h={name:s.fullPath},f=Mn(a,e.host,e._protocol),d=e.maxUploadRetryTime,p=new ir(f,"POST",or(e,n),d);return p.urlParams=h,p.headers=o,p.body=l.uploadData(),p.errorHandler=ur(t),p}var fr=p(function e(t,n,r,i){v(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null});function dr(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){ar(!1)}return ar(!!n&&-1!==(t||["active"]).indexOf(n)),n}var pr={STATE_CHANGED:"state_changed"},vr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function gr(e){switch(e){case"running":case"pausing":case"canceling":return vr.RUNNING;case"paused":return vr.PAUSED;case"success":return vr.SUCCESS;case"canceled":return vr.CANCELED;case"error":default:return vr.ERROR}}var mr=p(function e(t,n,r){if(v(this,e),function(e){return"function"==typeof e}(t)||null!=n||null!=r)this.next=t,this.error=null!=n?n:void 0,this.complete=null!=r?r:void 0;else{var i=t;this.next=i.next,this.error=i.error,this.complete=i.complete}});function yr(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then(function(){return e.apply(void 0,n)})}}var kr=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(function(){function e(){var t=this;v(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fn.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=Fn.ABORT,e()}),t.xhr_.addEventListener("error",function(){t.errorCode_=Fn.NETWORK_ERROR,e()}),t.xhr_.addEventListener("load",function(){e()})})}return p(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Rn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Rn("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Rn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Rn("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Rn("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}());function br(){return new kr}var wr=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;v(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=tr(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise(function(e,t){r._resolve=e,r._reject=t,r._start()}),this._promise.then(null,function(){})}return p(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var i=r(n,2),a=i[0],o=i[1];switch(t._state){case"running":e(a,o);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}})}},{key:"_createResumable",value:function(){var e=this;this._resolveToken(function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=lr(t,r,i),u={name:o.fullPath},s=Mn(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=rr(o,n),h=new ir(s,"POST",function(e){var t;dr(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){ar(!1)}return ar(Nn(t)),t},e.maxUploadRetryTime);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=ur(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,br,t,n);e._request=i,i.getPromise().then(function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()},e._errorHandler)})}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken(function(n,r){var i=function(e,t,n,r){var i=new ir(n,"POST",function(e){var t=dr(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){ar(!1)}n||ar(!1);var i=Number(n);return ar(!isNaN(i)),new fr(i,r.size(),"final"===t)},e.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=ur(t),i}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,br,n,r);e._request=a,a.getPromise().then(function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()},e._errorHandler)})}},{key:"_continueUpload",value:function(){var e=this,t=262144*this._chunkMultiplier,n=new fr(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,a){var o;try{o=function(e,t,n,r,i,a,o,u){var s=new fr(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new bn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var h=s.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},d=r.slice(h,h+l);if(null===d)throw Tn();var p=new ir(n,"POST",function(e,n){var i,o=dr(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?or(t,a)(e,n):null,new fr(u,c,"final"===o,i)},t.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=u||null,p.errorHandler=ur(e),p}(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,br,i,a);e._request=u,u.getPromise().then(function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()},e._errorHandler)})}},{key:"_increaseMultiplier",value:function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken(function(t,n){var r=cr(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,br,t,n);e._request=i,i.getPromise().then(function(t){e._request=void 0,e._metadata=t,e._transition("success")},e._metadataErrorHandler)})}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken(function(t,n){var r=hr(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,br,t,n);e._request=i,i.getPromise().then(function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")},e._errorHandler)})}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=xn(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=gr(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new mr(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach(function(t){e._notifyObserver(t)})}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(gr(this._state)){case vr.SUCCESS:yr(this._resolve.bind(null,this.snapshot))();break;case vr.CANCELED:case vr.ERROR:yr(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(gr(this._state)){case vr.RUNNING:case vr.PAUSED:e.next&&yr(e.next.bind(e,this.snapshot))();break;case vr.SUCCESS:e.complete&&yr(e.complete.bind(e))();break;case vr.CANCELED:case vr.ERROR:e.error&&yr(e.error.bind(e,this._error))();break;default:e.error&&yr(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),_r=function(){function e(t,n){v(this,e),this._service=t,this._location=n instanceof An?n:An.makeFromUrl(n,t.host)}return p(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new An(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return Qn(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new An(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw En(e)}}]),e}();function xr(e,t,n){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,Sr(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,s(u.prefixes)),(a=n.items).push.apply(a,s(u.items)),e.t0=null!=u.nextPageToken,!e.t0){e.next=10;break}return e.next=10,xr(t,n,u.nextPageToken);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Sr(e,t){null!=t&&"number"==typeof t.maxResults&&Ln("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=function(e,t,n,r,i){var a={};a.prefix=t.isRoot?"":t.path+"/","/".length>0&&(a.delimiter="/"),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=Mn(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new ir(o,"GET",function(e,t){return function(n,r){var i=function(e,t,n){var r=Yn(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=l(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new An(t,o));r.prefixes.push(u)}}catch(d){a.e(d)}finally{a.f()}}if(n.items){var s,c=l(n.items);try{for(c.s();!(s=c.n()).done;){var h=s.value,f=e._makeStorageReference(new An(t,h.name));r.items.push(f)}}catch(d){c.e(d)}finally{c.f()}}return r}(e,t,r)}(e,t,r);return ar(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=ur(t),s}(e.storage,e._location,0,n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,br)}function Ir(e,t){var n=function(e,t){var n=t.split("/").filter(function(e){return e.length>0}).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new An(e._location.bucket,n);return new _r(e.storage,r)}function Er(e,t){if(e instanceof Ar){var n=e;if(null==n._bucket)throw new bn("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new _r(n,n._bucket);return null!=t?Er(r,t):r}return void 0!==t?Ir(e,t):e}function Cr(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Ar)return new _r(e,t);throw Sn("To use ref(service, url), the first argument must be a Storage instance.")}return Er(e,t)}function Rr(e,t){var n=null==t?void 0:t.storageBucket;return null==n?null:An.makeFromBucketSpec(n,e)}var Ar=function(){function e(t,n,r,i,a){v(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host="firebasestorage.googleapis.com",this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?An.makeFromBucketSpec(i,this._host):Rr(this._host,this.app.options)}return p(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,this._bucket=null!=this._url?An.makeFromBucketSpec(this._url,e):Rr(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){Ln("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){Ln("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._overrideAuthToken){t.next=2;break}return t.abrupt("return",e._overrideAuthToken);case 2:if(!(n=e._authProvider.getImmediate({optional:!0}))){t.next=9;break}return t.next=6,n.getToken();case 6:if(null===(r=t.sent)){t.next=9;break}return t.abrupt("return",r.accessToken);case 9:return t.abrupt("return",null);case 10:case"end":return t.stop()}},t)}))()}},{key:"_getAppCheckToken",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e._appCheckProvider.getImmediate({optional:!0}))){t.next=7;break}return t.next=4,n.getToken();case 4:t.t0=t.sent.token,t.next=8;break;case 7:t.t0=null;case 8:return t.abrupt("return",t.t0);case 9:case"end":return t.stop()}},t)}))()}},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(e){return e.cancel()}),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new _r(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new On(In());var a=function(e,t,n,r,i,a){var o=Un(e.urlParams),u=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(s,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(s,r),new Vn(u,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(function(){return i._requests.delete(a)},function(){return i._requests.delete(a)}),a}},{key:"makeRequestWithTokens",value:function(e,t){var n=this;return(0,qt.Z)(regeneratorRuntime.mark(function i(){var a,o,u,s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Promise.all([n._getAuthToken(),n._getAppCheckToken()]);case 2:return a=i.sent,o=r(a,2),u=o[0],s=o[1],i.abrupt("return",n._makeRequest(e,t,u,s).getPromise());case 7:case"end":return i.stop()}},i)}))()}}]),e}();function Or(e){return function(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=Mn(t.fullServerUrl(),e.host,e._protocol),r=new ir(n,"DELETE",function(e,t){},e.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=sr(t),r}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,br)}(e=(0,Mt.m9)(e))}function Nr(e,t){return Cr(e=(0,Mt.m9)(e),t)}(0,Ut._registerComponent)(new Vt.wA("storage",function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new Ar(r,i,a,n,Ut.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,Ut.registerVersion)("@firebase/storage","0.9.6",""),(0,Ut.registerVersion)("@firebase/storage","0.9.6","esm2017");var Pr=p(function e(t){return v(this,e),t}),Dr=new a.OlP("angularfire2.storage-instances");function Lr(e){return function(t,n){var r=t.runOutsideAngular(function(){return e(n)});return new Pr(r)}}var Mr={provide:p(function e(){return v(this,e),(0,It.vb)("storage")}),deps:[[new a.FiY,Dr]]},Ur={provide:Pr,useFactory:function(e,t){var n=(0,It.JM)("storage",e,t);return n&&new Pr(n)},deps:[[new a.FiY,Dr],Et]},Fr=function(){var e=p(function e(){v(this,e),(0,St.KN)("angularfire",It.q4.full,"gcs")});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[Ur,Mr]}),e}();function Vr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{ngModule:Fr,providers:[{provide:Dr,useFactory:Lr(e),multi:!0,deps:[a.R0b,a.zs3,It.HU,Ct,[new a.FiY,Zt],[new a.FiY,kn]].concat(n)}]}}var Zr,qr=(0,It.u3)(Or,!0),jr=(0,It.u3)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ut.getApp)(),t=arguments.length>1?arguments[1]:void 0;return e=(0,Mt.m9)(e),(0,Ut._getProvider)(e,"storage").getImmediate({identifier:t})},!0),Br=(0,It.u3)(Nr,!0),zr=(0,It.u3)(function(e,t,n,r){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bn.RAW,r=arguments.length>3?arguments[3]:void 0;e._throwIfRoot("uploadString");var i=Hn(n,t),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),function(e,t,n){e._throwIfRoot("uploadBytes");var r=hr(e.storage,e._location,tr(),new Jn(t,!0),n);return e.storage.makeRequestWithTokens(r,br).then(function(t){return{metadata:t,ref:e}})}(e,i.data,a)}(e=(0,Mt.m9)(e),t,n,r)},!0),Hr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Gr={},Kr=Kr||{},Wr=Hr||self;function Jr(){}function Yr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Qr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var $r="closure_uid_"+(1e9*Math.random()>>>0),Xr=0;function ei(e,t,n){return e.call.apply(e.bind,arguments)}function ti(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ni(e,t,n){return(ni=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ei:ti).apply(null,arguments)}function ri(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ii(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function ai(){this.s=this.s,this.o=this.o}var oi={};ai.prototype.s=!1,ai.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,$r)&&e[$r]||(e[$r]=++Xr)}(this);delete oi[e]}},ai.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ui=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},si=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function ci(e){return Array.prototype.concat.apply([],arguments)}function li(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function hi(e){return/^[\s\xa0]*$/.test(e)}var fi,di=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function pi(e,t){return-1!=e.indexOf(t)}function vi(e,t){return e<t?-1:e>t?1:0}e:{var gi=Wr.navigator;if(gi){var mi=gi.userAgent;if(mi){fi=mi;break e}}fi=""}function yi(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function ki(e){var t={};for(var n in e)t[n]=e[n];return t}var bi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wi(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<bi.length;a++)n=bi[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _i(e){return _i[" "](e),e}_i[" "]=Jr;var xi,Ti,Si=pi(fi,"Opera"),Ii=pi(fi,"Trident")||pi(fi,"MSIE"),Ei=pi(fi,"Edge"),Ci=Ei||Ii,Ri=pi(fi,"Gecko")&&!(pi(fi.toLowerCase(),"webkit")&&!pi(fi,"Edge"))&&!(pi(fi,"Trident")||pi(fi,"MSIE"))&&!pi(fi,"Edge"),Ai=pi(fi.toLowerCase(),"webkit")&&!pi(fi,"Edge");function Oi(){var e=Wr.document;return e?e.documentMode:void 0}e:{var Ni="",Pi=(Ti=fi,Ri?/rv:([^\);]+)(\)|;)/.exec(Ti):Ei?/Edge\/([\d\.]+)/.exec(Ti):Ii?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ti):Ai?/WebKit\/(\S+)/.exec(Ti):Si?/(?:Version)[ \/]?(\S+)/.exec(Ti):void 0);if(Pi&&(Ni=Pi?Pi[1]:""),Ii){var Di=Oi();if(null!=Di&&Di>parseFloat(Ni)){xi=String(Di);break e}}xi=Ni}var Li={},Mi=Wr.document&&Ii&&(Oi()||parseInt(xi,10))||void 0,Ui=function(){if(!Wr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Wr.addEventListener("test",Jr,t),Wr.removeEventListener("test",Jr,t)}catch(n){}return e}();function Fi(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Vi(e,t){if(Fi.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ri){e:{try{_i(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Zi[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Vi.Z.h.call(this)}}Fi.prototype.h=function(){this.defaultPrevented=!0},ii(Vi,Fi);var Zi={2:"touch",3:"pen",4:"mouse"};Vi.prototype.h=function(){Vi.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var qi="closure_listenable_"+(1e6*Math.random()|0),ji=0;function Bi(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++ji,this.ca=this.fa=!1}function zi(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Hi(e){this.src=e,this.g={},this.h=0}function Gi(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=ui(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(zi(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ki(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Hi.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Ki(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Bi(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Wi="closure_lm_"+(1e6*Math.random()|0),Ji={};function Yi(e,t,n,r,i){if(r&&r.once)return $i(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Yi(e,t[a],n,r,i);return null}return n=aa(n),e&&e[qi]?e.N(t,n,Qr(r)?!!r.capture:!!r,i):Qi(e,t,n,!1,r,i)}function Qi(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Qr(i)?!!i.capture:!!i,u=ra(e);if(u||(e[Wi]=u=new Hi(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){var e=na;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ui||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ta(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function $i(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)$i(e,t[a],n,r,i);return null}return n=aa(n),e&&e[qi]?e.O(t,n,Qr(r)?!!r.capture:!!r,i):Qi(e,t,n,!0,r,i)}function Xi(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Xi(e,t[a],n,r,i);else r=Qr(r)?!!r.capture:!!r,n=aa(n),e&&e[qi]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=Ki(a=e.g[t],n,r,i))&&(zi(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--))):e&&(e=ra(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ki(t,n,r,i)),(n=-1<e?t[e]:null)&&ea(n))}function ea(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[qi])Gi(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ta(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ra(t))?(Gi(n,e),0==n.h&&(n.src=null,t[Wi]=null)):zi(e)}}}function ta(e){return e in Ji?Ji[e]:Ji[e]="on"+e}function na(e,t){if(e.ca)e=!0;else{t=new Vi(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&ea(e),e=n.call(r,t)}return e}function ra(e){return(e=e[Wi])instanceof Hi?e:null}var ia="__closure_events_fn_"+(1e9*Math.random()>>>0);function aa(e){return"function"==typeof e?e:(e[ia]||(e[ia]=function(t){return e.handleEvent(t)}),e[ia])}function oa(){ai.call(this),this.i=new Hi(this),this.P=this,this.I=null}function ua(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new Fi(t,e);else if(t instanceof Fi)t.target=t.target||e;else{var i=t;wi(t=new Fi(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=sa(o,r,!0,t)&&i}if(i=sa(o=t.g=e,r,!0,t)&&i,i=sa(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=sa(o=t.g=n[a],r,!1,t)&&i}function sa(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Gi(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}ii(oa,ai),oa.prototype[qi]=!0,oa.prototype.removeEventListener=function(e,t,n,r){Xi(this,e,t,n,r)},oa.prototype.M=function(){if(oa.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)zi(n[r]);delete t.g[e],t.h--}}this.I=null},oa.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},oa.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ca=Wr.JSON.stringify;function la(){var e=ma,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ha,fa=new(function(){function e(t,n){v(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return p(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())(function(){return new da},function(e){return e.reset()}),da=function(){function e(){v(this,e),this.next=this.g=this.h=null}return p(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function pa(e){Wr.setTimeout(function(){throw e},0)}function va(e,t){ha||function(){var e=Wr.Promise.resolve(void 0);ha=function(){e.then(ya)}}(),ga||(ha(),ga=!0),ma.add(e,t)}var ga=!1,ma=new(function(){function e(){v(this,e),this.h=this.g=null}return p(e,[{key:"add",value:function(e,t){var n=fa.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}());function ya(){for(var e;e=la();){try{e.h.call(e.g)}catch(n){pa(n)}var t=fa;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ga=!1}function ka(e,t){oa.call(this),this.h=e||1,this.g=t||Wr,this.j=ni(this.kb,this),this.l=Date.now()}function ba(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function wa(e,t,n){if("function"==typeof e)n&&(e=ni(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ni(e.handleEvent,e)}return 2147483647<Number(t)?-1:Wr.setTimeout(e,t||0)}function _a(e){e.g=wa(function(){e.g=null,e.i&&(e.i=!1,_a(e))},e.j);var t=e.h;e.h=null,e.m.apply(null,t)}ii(ka,oa),(Zr=ka.prototype).da=!1,Zr.S=null,Zr.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ua(this,"tick"),this.da&&(ba(this),this.start()))}},Zr.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Zr.M=function(){ka.Z.M.call(this),ba(this),delete this.g};var xa=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return p(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:_a(this)}},{key:"M",value:function(){o(T(n.prototype),"M",this).call(this),this.g&&(Wr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(ai);function Ta(e){ai.call(this),this.h=e,this.g={}}ii(Ta,ai);var Sa=[];function Ia(e,t,n,r){Array.isArray(n)||(n&&(Sa[0]=n.toString()),n=Sa);for(var i=0;i<n.length;i++){var a=Yi(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Ea(e){yi(e.g,function(e,t){this.g.hasOwnProperty(t)&&ea(e)},e),e.g={}}function Ca(){this.g=!0}function Ra(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return ca(n)}catch(u){return t}}(e,n)+(r?" "+r:"")})}Ta.prototype.M=function(){Ta.Z.M.call(this),Ea(this)},Ta.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ca.prototype.Aa=function(){this.g=!1},Ca.prototype.info=function(){};var Aa={},Oa=null;function Na(){return Oa=Oa||new oa}function Pa(e){Fi.call(this,Aa.Ma,e)}function Da(e){var t=Na();ua(t,new Pa(t,e))}function La(e,t){Fi.call(this,Aa.STAT_EVENT,e),this.stat=t}function Ma(e){var t=Na();ua(t,new La(t,e))}function Ua(e,t){Fi.call(this,Aa.Na,e),this.size=t}function Fa(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Wr.setTimeout(function(){e()},t)}Aa.Ma="serverreachability",ii(Pa,Fi),Aa.STAT_EVENT="statevent",ii(La,Fi),Aa.Na="timingevent",ii(Ua,Fi);var Va={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Za={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function qa(){}function ja(){}qa.prototype.h=null;var Ba,za={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ha(){Fi.call(this,"d")}function Ga(){Fi.call(this,"c")}function Ka(){}function Wa(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Ta(this),this.P=Ya,this.W=new ka(e=Ci?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ja}function Ja(){this.i=null,this.g="",this.h=!1}ii(Ha,Fi),ii(Ga,Fi),ii(Ka,qa),Ka.prototype.g=function(){return new XMLHttpRequest},Ka.prototype.i=function(){return{}},Ba=new Ka;var Ya=45e3,Qa={},$a={};function Xa(e,t,n){e.K=1,e.v=xo(mo(t)),e.s=n,e.U=!0,eo(e,null)}function eo(e,t){e.F=Date.now(),io(e),e.A=mo(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Mo(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Ja,e.g=Mu(e.l,n?t:null,!e.s),0<e.O&&(e.L=new xa(ni(e.Ia,e,e.g),e.O)),Ia(e.V,e.g,"readystatechange",e.gb),t=e.H?ki(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Da(1),function(e,t,n,r,i,a){e.info(function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.X,e.s)}function to(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function no(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=ro(e,n))==$a){4==t&&(e.o=4,Ma(14),i=!1),Ra(e.j,e.m,null,"[Incomplete Response]");break}if(r==Qa){e.o=4,Ma(15),Ra(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ra(e.j,e.m,r,null),co(e,r)}to(e)&&r!=$a&&r!=Qa&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ma(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Cu(t),t.L=!0,Ma(11))):(Ra(e.j,e.m,n,"[Invalid Chunked Response]"),so(e),uo(e))}function ro(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?$a:(n=Number(t.substring(n,r)),isNaN(n)?Qa:(r+=1)+n>t.length?$a:(t=t.substr(r,n),e.C=r+n,t))}function io(e){e.Y=Date.now()+e.P,ao(e,e.P)}function ao(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Fa(ni(e.eb,e),t)}function oo(e){e.B&&(Wr.clearTimeout(e.B),e.B=null)}function uo(e){0==e.l.G||e.I||Ou(e.l,e)}function so(e){oo(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,ba(e.W),Ea(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function co(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||jo(n.i,e)))if(n.I=e.N,!e.J&&jo(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Au(n),ku(n)}Eu(n),Ma(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Fa(ni(n.ab,n),6e3));if(1>=qo(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Pu(n,11)}else if((e.J||n.g==e)&&Au(n),!hi(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"==typeof s&&0<s&&(n.K=r=1.5*s,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(pi(l,"spdy")||pi(l,"quic")||pi(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Bo(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,_o(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Lu(r,r.H?r.la:null,r.W),d.J){zo(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(oo(p),io(p)),r.g=d}else Iu(r);0<n.l.length&&_u(n)}else"stop"!=a[0]&&"close"!=a[0]||Pu(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Pu(n,7):yu(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Da(4)}catch(a){}}function lo(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Yr(e)||"string"==typeof e)si(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Yr(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(Yr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function ho(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof ho)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function fo(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];po(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)po(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function po(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Zr=Wa.prototype).setTimeout=function(e){this.P=e},Zr.gb=function(e){e=e.target;var t=this.L;t&&3==du(e)?t.l():this.Ia(e)},Zr.Ia=function(e){try{if(e==this.g)e:{var t=du(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Ci||this.g&&(this.h.h||this.g.ga()||pu(this.g)))){this.I||4!=t||7==n||Da(8==n||0>=r?3:2),oo(this);var i=this.g.ba();this.N=i;t:if(to(this)){var a=pu(this.g);e="";var o=a.length,u=4==du(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){so(this),uo(this);var s="";break t}this.h.i=new Wr.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o})}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hi(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,Ma(12),so(this),uo(this);break e}Ra(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,co(this,i)}this.U?(no(this,t,s),Ci&&this.i&&3==t&&(Ia(this.V,this.W,"tick",this.fb),this.W.start())):(Ra(this.j,this.m,s,null),co(this,s)),4==t&&so(this),this.i&&!this.I&&(4==t?Ou(this.l,this):(this.i=!1,io(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Ma(12)):(this.o=0,Ma(13)),so(this),uo(this)}}}catch(t){}},Zr.fb=function(){if(this.g){var e=du(this.g),t=this.g.ga();this.C<t.length&&(oo(this),no(this,e,t),this.i&&4!=e&&io(this))}},Zr.cancel=function(){this.I=!0,so(this)},Zr.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Da(3),Ma(17)),so(this),this.o=2,uo(this)):ao(this,this.Y-e)},(Zr=ho.prototype).R=function(){fo(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Zr.T=function(){return fo(this),this.g.concat()},Zr.get=function(e,t){return po(this.h,e)?this.h[e]:t},Zr.set=function(e,t){po(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Zr.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var vo=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function go(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof go){this.g=void 0!==t?t:e.g,yo(this,e.j),this.s=e.s,ko(this,e.i),bo(this,e.m),this.l=e.l,t=e.h;var n=new No;n.i=t.i,t.g&&(n.g=new ho(t.g),n.h=t.h),wo(this,n),this.o=e.o}else e&&(n=String(e).match(vo))?(this.g=!!t,yo(this,n[1]||"",!0),this.s=To(n[2]||""),ko(this,n[3]||"",!0),bo(this,n[4]),this.l=To(n[5]||"",!0),wo(this,n[6]||"",!0),this.o=To(n[7]||"")):(this.g=!!t,this.h=new No(null,this.g))}function mo(e){return new go(e)}function yo(e,t,n){e.j=n?To(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ko(e,t,n){e.i=n?To(t,!0):t}function bo(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function wo(e,t,n){t instanceof No?(e.h=t,function(e,t){t&&!e.j&&(Po(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Do(this,t),Mo(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=So(t,Ao)),e.h=new No(t,e.g))}function _o(e,t,n){e.h.set(t,n)}function xo(e){return _o(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function To(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function So(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Io),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Io(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}go.prototype.toString=function(){var e=[],t=this.j;t&&e.push(So(t,Eo,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(So(t,Eo,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(So(n,"/"==n.charAt(0)?Ro:Co,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",So(n,Oo)),e.join("")};var Eo=/[#\/\?@]/g,Co=/[#\?:]/g,Ro=/[#\?]/g,Ao=/[#\?@]/g,Oo=/#/g;function No(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Po(e){e.g||(e.g=new ho,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Do(e,t){Po(e),t=Uo(e,t),po(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,po((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&fo(e)))}function Lo(e,t){return Po(e),t=Uo(e,t),po(e.g.h,t)}function Mo(e,t,n){Do(e,t),0<n.length&&(e.i=null,e.g.set(Uo(e,t),li(n)),e.h+=n.length)}function Uo(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Fo(e){this.l=e||Vo,e=Wr.PerformanceNavigationTiming?0<(e=Wr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(Wr.g&&Wr.g.Ea&&Wr.g.Ea()&&Wr.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Zr=No.prototype).add=function(e,t){Po(this),this.i=null,e=Uo(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Zr.forEach=function(e,t){Po(this),this.g.forEach(function(n,r){si(n,function(n){e.call(t,n,r,this)},this)},this)},Zr.T=function(){Po(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Zr.R=function(e){Po(this);var t=[];if("string"==typeof e)Lo(this,e)&&(t=ci(t,this.g.get(Uo(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=ci(t,e[n])}return t},Zr.set=function(e,t){return Po(this),this.i=null,Lo(this,e=Uo(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Zr.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Zr.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Vo=10;function Zo(e){return!!e.h||!!e.g&&e.g.size>=e.j}function qo(e){return e.h?1:e.g?e.g.size:0}function jo(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Bo(e,t){e.g?e.g.add(t):e.h=t}function zo(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ho(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=l(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return li(e.i)}function Go(){}function Ko(){this.g=new Go}function Wo(e,t,n){var r=n||"";try{lo(e,function(e,n){var i=e;Qr(e)&&(i=ca(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Jo(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Yo(e){this.l=e.$b||null,this.j=e.ib||!1}function Qo(e,t){oa.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=$o,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Fo.prototype.cancel=function(){if(this.i=Ho(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=l(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Go.prototype.stringify=function(e){return Wr.JSON.stringify(e,void 0)},Go.prototype.parse=function(e){return Wr.JSON.parse(e,void 0)},ii(Yo,qa),Yo.prototype.g=function(){return new Qo(this.l,this.j)},Yo.prototype.i=function(e){return function(){return e}}({}),ii(Qo,oa);var $o=0;function Xo(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function eu(e){e.readyState=4,e.l=null,e.j=null,e.A=null,tu(e)}function tu(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Zr=Qo.prototype).open=function(e,t){if(this.readyState!=$o)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,tu(this)},Zr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Wr).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Zr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,eu(this)),this.readyState=$o},Zr.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,tu(this)),this.g&&(this.readyState=3,tu(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Wr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Xo(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Zr.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?eu(this):tu(this),3==this.readyState&&Xo(this)}},Zr.Ua=function(e){this.g&&(this.response=this.responseText=e,eu(this))},Zr.Ta=function(e){this.g&&(this.response=e,eu(this))},Zr.ha=function(){this.g&&eu(this)},Zr.setRequestHeader=function(e,t){this.v.append(e,t)},Zr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Zr.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Qo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var nu=Wr.JSON.parse;function ru(e){oa.call(this),this.headers=new ho,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=iu,this.K=this.L=!1}ii(ru,oa);var iu="",au=/^https?$/i,ou=["POST","PUT"];function uu(e){return"content-type"==e.toLowerCase()}function su(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,cu(e),hu(e)}function cu(e){e.D||(e.D=!0,ua(e,"complete"),ua(e,"error"))}function lu(e){if(e.h&&void 0!==Kr&&(!e.C[1]||4!=du(e)||2!=e.ba()))if(e.v&&4==du(e))wa(e.Fa,0,e);else if(ua(e,"readystatechange"),4==du(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(vo)[1]||null;if(!a&&Wr.self&&Wr.self.location){var o=Wr.self.location.protocol;a=o.substr(0,o.length-1)}i=!au.test(a?a.toLowerCase():"")}t=i}if(t)ua(e,"complete"),ua(e,"success");else{e.m=6;try{var u=2<du(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",cu(e)}}finally{hu(e)}}}function hu(e,t){if(e.g){fu(e);var n=e.g,r=e.C[0]?Jr:null;e.g=null,e.C=null,t||ua(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function fu(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Wr.clearTimeout(e.A),e.A=null)}function du(e){return e.g?e.g.readyState:0}function pu(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case iu:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function vu(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return yi(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):_o(e,t,n))}function gu(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function mu(e){this.za=0,this.l=[],this.h=new Ca,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=gu("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=gu("baseRetryDelayMs",5e3,e),this.$a=gu("retryDelaySeedMs",1e4,e),this.Ya=gu("forwardChannelMaxRetries",2,e),this.ra=gu("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Fo(e&&e.concurrentRequestLimit),this.Ca=new Ko,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function yu(e){if(bu(e),3==e.G){var t=e.V++,n=mo(e.F);_o(n,"SID",e.J),_o(n,"RID",t),_o(n,"TYPE","terminate"),Tu(e,n),(t=new Wa(e,e.h,t,void 0)).K=2,t.v=xo(mo(n)),n=!1,Wr.navigator&&Wr.navigator.sendBeacon&&(n=Wr.navigator.sendBeacon(t.v.toString(),"")),!n&&Wr.Image&&((new Image).src=t.v,n=!0),n||(t.g=Mu(t.l,null),t.g.ea(t.v)),t.F=Date.now(),io(t)}Du(e)}function ku(e){e.g&&(Cu(e),e.g.cancel(),e.g=null)}function bu(e){ku(e),e.u&&(Wr.clearTimeout(e.u),e.u=null),Au(e),e.i.cancel(),e.m&&("number"==typeof e.m&&Wr.clearTimeout(e.m),e.m=null)}function wu(e,t){e.l.push(new(function(){return p(function e(t,n){v(this,e),this.h=t,this.g=n})}())(e.Za++,t)),3==e.G&&_u(e)}function _u(e){Zo(e.i)||e.m||(e.m=!0,va(e.Ha,e),e.C=0)}function xu(e,t){var n;n=t?t.m:e.V++;var r=mo(e.F);_o(r,"SID",e.J),_o(r,"RID",n),_o(r,"AID",e.U),Tu(e,r),e.o&&e.s&&vu(r,e.o,e.s),n=new Wa(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Su(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Bo(e.i,n),Xa(n,r,t)}function Tu(e,t){e.j&&lo({},function(e,n){_o(t,n,e)})}function Su(e,t,n){n=Math.min(e.l.length,n);var r=e.j?ni(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Wo(l,o,"req"+c+"_")}catch(cs){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Iu(e){e.g||e.u||(e.Y=1,va(e.Ga,e),e.A=0)}function Eu(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=Fa(ni(e.Ga,e),Nu(e,e.A)),e.A++,0))}function Cu(e){null!=e.B&&(Wr.clearTimeout(e.B),e.B=null)}function Ru(e){e.g=new Wa(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=mo(e.oa);_o(t,"RID","rpc"),_o(t,"SID",e.J),_o(t,"CI",e.N?"0":"1"),_o(t,"AID",e.U),Tu(e,t),_o(t,"TYPE","xmlhttp"),e.o&&e.s&&vu(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=xo(mo(t)),n.s=null,n.U=!0,eo(n,e)}function Au(e){null!=e.v&&(Wr.clearTimeout(e.v),e.v=null)}function Ou(e,t){var n=null;if(e.g==t){Au(e),Cu(e),e.g=null;var r=2}else{if(!jo(e.i,t))return;n=t.D,zo(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;ua(r=Na(),new Ua(r,n,t,i)),_u(e)}else Iu(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(qo(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=Fa(ni(e.Ha,e,t),Nu(e,e.C)),e.C++,0)))}(e,t)||2==r&&Eu(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Pu(e,5);break;case 4:Pu(e,10);break;case 3:Pu(e,6);break;default:Pu(e,2)}}function Nu(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Pu(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=ni(e.jb,e);n||(n=new go("//www.google.com/images/cleardot.gif"),Wr.location&&"http"==Wr.location.protocol||yo(n,"https"),xo(n)),function(e,t){var n=new Ca;if(Wr.Image){var r=new Image;r.onload=ri(Jo,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ri(Jo,n,r,"TestLoadImage: error",!1,t),r.onabort=ri(Jo,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ri(Jo,n,r,"TestLoadImage: timeout",!1,t),Wr.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ma(2);e.G=0,e.j&&e.j.va(t),Du(e),bu(e)}function Du(e){e.G=0,e.I=-1,e.j&&(0==Ho(e.i).length&&0==e.l.length||(e.i.i.length=0,li(e.l),e.l.length=0),e.j.ua())}function Lu(e,t,n){var r=function(e){return e instanceof go?mo(e):new go(e,void 0)}(n);if(""!=r.i)t&&ko(r,t+"."+r.i),bo(r,r.m);else{var i=Wr.location;r=function(e,t,n,r){var i=new go(null,void 0);return e&&yo(i,e),t&&ko(i,t),n&&bo(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&yi(e.aa,function(e,t){_o(r,t,e)}),n=e.sa,(t=e.D)&&n&&_o(r,t,n),_o(r,"VER",e.ma),Tu(e,r),r}function Mu(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new ru(n&&e.Ba&&!e.qa?new Yo({ib:!0}):e.qa)).L=e.H,t}function Uu(){}function Fu(){if(Ii&&!(10<=Number(Mi)))throw Error("Environmental error: no available transport.")}function Vu(e,t){oa.call(this),this.g=new mu(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!hi(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!hi(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new ju(this)}function Zu(e){Ha.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function qu(){Ga.call(this),this.status=1}function ju(e){this.g=e}(Zr=ru.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ba.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:Ba),this.g.onreadystatechange=ni(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void su(this,a)}e=n||"";var i=new ho(this.headers);r&&lo(r,function(e,t){i.set(t,e)}),r=function(e){e:{for(var t=uu,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=Wr.FormData&&e instanceof Wr.FormData,!(0<=ui(ou,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{fu(this),0<this.B&&((this.K=function(e){return Ii&&function(){return e=Li,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){for(var e=0,t=di(String(xi)).split("."),n=di("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=vi(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||vi(0==a[2].length,0==o[2].length)||vi(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}();var e}()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ni(this.pa,this)):this.A=wa(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){su(this,a)}},Zr.pa=function(){void 0!==Kr&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ua(this,"timeout"),this.abort(8))},Zr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ua(this,"complete"),ua(this,"abort"),hu(this))},Zr.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hu(this,!0)),ru.Z.M.call(this)},Zr.Fa=function(){this.s||(this.F||this.v||this.l?lu(this):this.cb())},Zr.cb=function(){lu(this)},Zr.ba=function(){try{return 2<du(this)?this.g.status:-1}catch(Ti){return-1}},Zr.ga=function(){try{return this.g?this.g.responseText:""}catch(Ti){return""}},Zr.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),nu(t)}},Zr.Da=function(){return this.m},Zr.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Zr=mu.prototype).ma=8,Zr.G=1,Zr.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Zr.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Wa(this,this.h,e,void 0),n=this.s;if(this.P&&(n?wi(n=ki(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Su(this,t,r),_o(i=mo(this.F),"RID",e),_o(i,"CVER",22),this.D&&_o(i,"X-HTTP-Session-Id",this.D),Tu(this,i),this.o&&n&&vu(i,this.o,n),Bo(this.i,t),this.Ra&&_o(i,"TYPE","init"),this.ja?(_o(i,"$req",r),_o(i,"SID","null"),t.$=!0,Xa(t,i,null)):Xa(t,i,r),this.G=2}}else 3==this.G&&(e?xu(this,e):0==this.l.length||Zo(this.i)||xu(this))},Zr.Ga=function(){if(this.u=null,Ru(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Fa(ni(this.bb,this),e)}},Zr.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ma(10),ku(this),Ru(this))},Zr.ab=function(){null!=this.v&&(this.v=null,ku(this),Eu(this),Ma(19))},Zr.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Ma(2)):(this.h.info("Failed to ping google.com"),Ma(1))},(Zr=Uu.prototype).xa=function(){},Zr.wa=function(){},Zr.va=function(){},Zr.ua=function(){},Zr.Oa=function(){},Fu.prototype.g=function(e,t){return new Vu(e,t)},ii(Vu,oa),Vu.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),va(ni(e.hb,e,t))),Ma(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Lu(e,null,e.W),_u(e)},Vu.prototype.close=function(){yu(this.g)},Vu.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,wu(this.g,t)}else this.v?((t={}).__data__=ca(e),wu(this.g,t)):wu(this.g,e)},Vu.prototype.M=function(){this.g.j=null,delete this.j,yu(this.g),delete this.g,Vu.Z.M.call(this)},ii(Zu,Ha),ii(qu,Ga),ii(ju,Uu),ju.prototype.xa=function(){ua(this.g,"a")},ju.prototype.wa=function(e){ua(this.g,new Zu(e))},ju.prototype.va=function(e){ua(this.g,new qu(e))},ju.prototype.ua=function(){ua(this.g,"b")},Fu.prototype.createWebChannel=Fu.prototype.g,Vu.prototype.send=Vu.prototype.u,Vu.prototype.open=Vu.prototype.m,Vu.prototype.close=Vu.prototype.close,Va.NO_ERROR=0,Va.TIMEOUT=8,Va.HTTP_ERROR=6,Za.COMPLETE="complete",ja.EventType=za,za.OPEN="a",za.CLOSE="b",za.ERROR="c",za.MESSAGE="d",oa.prototype.listen=oa.prototype.N,ru.prototype.listenOnce=ru.prototype.O,ru.prototype.getLastError=ru.prototype.La,ru.prototype.getLastErrorCode=ru.prototype.Da,ru.prototype.getStatus=ru.prototype.ba,ru.prototype.getResponseJson=ru.prototype.Qa,ru.prototype.getResponseText=ru.prototype.ga,ru.prototype.send=ru.prototype.ea;var Bu=Gr.createWebChannelTransport=function(){return new Fu},zu=Gr.getStatEventTarget=function(){return Na()},Hu=Gr.ErrorCode=Va,Gu=Gr.EventType=Za,Ku=Gr.Event=Aa,Wu=Gr.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Ju=Gr.FetchXmlHttpFactory=Yo,Yu=Gr.WebChannel=ja,Qu=Gr.XhrIo=ru,$u=function(){function e(t){v(this,e),this.uid=t}return p(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();$u.UNAUTHENTICATED=new $u(null),$u.GOOGLE_CREDENTIALS=new $u("google-credentials-uid"),$u.FIRST_PARTY=new $u("first-party-uid"),$u.MOCK_USER=new $u("mock-user");var Xu="9.8.0",es=new Ft.Yd("@firebase/firestore");function ts(){return es.logLevel}function ns(e){if(es.logLevel<=Ft.in.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(as);es.debug.apply(es,["Firestore (".concat(Xu,"): ").concat(e)].concat(s(i)))}}function rs(e){if(es.logLevel<=Ft.in.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(as);es.error.apply(es,["Firestore (".concat(Xu,"): ").concat(e)].concat(s(i)))}}function is(e){if(es.logLevel<=Ft.in.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(as);es.warn.apply(es,["Firestore (".concat(Xu,"): ").concat(e)].concat(s(i)))}}function as(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function os(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Xu,") INTERNAL ASSERTION FAILED: ")+e;throw rs(t),new Error(t)}function us(e,t){e||os()}function ss(e,t){return e}var cs={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ls=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return p(n)}(Mt.ZR),hs=p(function e(){var t=this;v(this,e),this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}),fs=p(function e(t,n){v(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))}),ds=function(){function e(){v(this,e)}return p(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t($u.UNAUTHENTICATED)})}},{key:"shutdown",value:function(){}}]),e}(),ps=function(){function e(t){v(this,e),this.token=t,this.changeListener=null}return p(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable(function(){return t(n.token.user)})}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),vs=function(){function e(t){v(this,e),this.t=t,this.currentUser=$u.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return p(e,[{key:"start",value:function(e,t){var n=this,r=this,i=this.i,a=function(e){return n.i!==i?(i=n.i,t(e)):Promise.resolve()},o=new hs;this.o=function(){n.i++,n.currentUser=n.u(),o.resolve(),o=new hs,e.enqueueRetryable(function(){return a(n.currentUser)})};var u=function(){var t=o;e.enqueueRetryable((0,qt.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,a(r.currentUser);case 4:case"end":return e.stop()}},e)})))},s=function(e){ns("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),u()};this.t.onInit(function(e){return s(e)}),setTimeout(function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(ns("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new hs)}},0),u()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return e.i!==t?(ns("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(us("string"==typeof n.accessToken),new fs(n.accessToken,e.currentUser)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return us(null===e||"string"==typeof e),new $u(e)}}]),e}(),gs=p(function e(t,n,r){v(this,e),this.type="FirstParty",this.user=$u.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}),ms=function(){function e(t,n,r){v(this,e),this.h=t,this.l=n,this.m=r}return p(e,[{key:"getToken",value:function(){return Promise.resolve(new gs(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t($u.FIRST_PARTY)})}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),ys=p(function e(t){v(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}),ks=function(){function e(t){v(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return p(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&ns("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,ns("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable(function(){return r(t)})};var i=function(e){ns("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit(function(e){return i(e)}),setTimeout(function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):ns("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(function(t){return t?(us("string"==typeof t.token),e.p=t.token,new ys(t.token)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),bs=function(){function e(t,n){var r=this;v(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return p(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function ws(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}bs.A=-1;var _s=function(){function e(){v(this,e)}return p(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=ws(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function xs(e,t){return e<t?-1:e>t?1:0}function Ts(e,t,n){return e.length===t.length&&e.every(function(e,r){return n(e,t[r])})}function Ss(e){return e+"\0"}var Is=function(){function e(t,n){if(v(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new ls(cs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ls(cs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ls(cs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ls(cs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return p(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?xs(this.nanoseconds,e.nanoseconds):xs(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Es=function(){function e(t){v(this,e),this.timestamp=t}return p(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Is(0,0))}},{key:"max",value:function(){return new e(new Is(253402300799,999999999))}}]),e}();function Cs(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Rs(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function As(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Os=function(){function e(t,n,r){v(this,e),void 0===n?n=0:n>t.length&&os(),void 0===r?r=t.length-n:r>t.length-n&&os(),this.segments=t,this.offset=n,this.len=r}return p(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Ns=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new ls(cs.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,s(u.split("/").filter(function(e){return e.length>0})))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Os),Ps=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ds=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map(function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Ps.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new ls(cs.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new ls(cs.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new ls(cs.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new ls(cs.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Os),Ls=function(){function e(t){v(this,e),this.fields=t,t.sort(Ds.comparator)}return p(e,[{key:"covers",value:function(e){var t,n=l(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ts(this.fields,e.fields,function(e,t){return e.isEqual(t)})}}]),e}(),Ms=function(e){function t(e){v(this,t),this.binaryString=e}return p(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return btoa(this.binaryString)}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return xs(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){return new t(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e))}}]),t}();Ms.EMPTY_BYTE_STRING=new Ms("");var Us=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fs(e){if(us(!!e),"string"==typeof e){var t=0,n=Us.exec(e);if(us(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Vs(e.seconds),nanos:Vs(e.nanos)}}function Vs(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Zs(e){return"string"==typeof e?Ms.fromBase64String(e):Ms.fromUint8Array(e)}function qs(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function js(e){var t=e.mapValue.fields.__previous_value__;return qs(t)?js(t):t}function Bs(e){var t=Fs(e.mapValue.fields.__local_write_time__.timestampValue);return new Is(t.seconds,t.nanos)}var zs=p(function e(t,n,r,i,a,o,u,s){v(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s}),Hs=function(){function e(t,n){v(this,e),this.projectId=t,this.database=n||"(default)"}return p(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Gs(e){return null==e}function Ks(e){return 0===e&&1/e==-1/0}function Ws(e){return"number"==typeof e&&Number.isInteger(e)&&!Ks(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Js=function(){function e(t){v(this,e),this.path=t}return p(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Ns.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Ns.fromString(t))}},{key:"fromName",value:function(t){return new e(Ns.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Ns.emptyPath())}},{key:"comparator",value:function(e,t){return Ns.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Ns(t.slice()))}}]),e}(),Ys={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Qs={nullValue:"NULL_VALUE"};function $s(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?qs(e)?4:fc(e)?9007199254740991:10:os()}function Xs(e,t){if(e===t)return!0;var n=$s(e);if(n!==$s(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Bs(e).isEqual(Bs(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Fs(e.timestampValue),r=Fs(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Zs(e.bytesValue).isEqual(Zs(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Vs(e.geoPointValue.latitude)===Vs(t.geoPointValue.latitude)&&Vs(e.geoPointValue.longitude)===Vs(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Vs(e.integerValue)===Vs(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Vs(e.doubleValue),r=Vs(t.doubleValue);return n===r?Ks(n)===Ks(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ts(e.arrayValue.values||[],t.arrayValue.values||[],Xs);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Cs(n)!==Cs(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Xs(n[i],r[i])))return!1;return!0}(e,t);default:return os()}}function ec(e,t){return void 0!==(e.values||[]).find(function(e){return Xs(e,t)})}function tc(e,t){if(e===t)return 0;var n=$s(e),r=$s(t);if(n!==r)return xs(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xs(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Vs(e.integerValue||e.doubleValue),r=Vs(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return nc(e.timestampValue,t.timestampValue);case 4:return nc(Bs(e),Bs(t));case 5:return xs(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Zs(e),r=Zs(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=xs(n[i],r[i]);if(0!==a)return a}return xs(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=xs(Vs(e.latitude),Vs(t.latitude));return 0!==n?n:xs(Vs(e.longitude),Vs(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=tc(n[i],r[i]);if(a)return a}return xs(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Ys.mapValue&&t===Ys.mapValue)return 0;if(e===Ys.mapValue)return 1;if(t===Ys.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=xs(r[o],a[o]);if(0!==u)return u;var s=tc(n[r[o]],i[a[o]]);if(0!==s)return s}return xs(r.length,a.length)}(e.mapValue,t.mapValue);default:throw os()}}function nc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return xs(e,t);var n=Fs(e),r=Fs(t),i=xs(n.seconds,r.seconds);return 0!==i?i:xs(n.nanos,r.nanos)}function rc(e){return ic(e)}function ic(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Fs(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Zs(e.bytesValue).toBase64():"referenceValue"in e?Js.fromName(e.referenceValue).toString():"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=l(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ic(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=l(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ic(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):os();var t}function ac(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function oc(e){return!!e&&"integerValue"in e}function uc(e){return!!e&&"arrayValue"in e}function sc(e){return!!e&&"nullValue"in e}function cc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function lc(e){return!!e&&"mapValue"in e}function hc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Rs(e.mapValue.fields,function(e,n){return t.mapValue.fields[e]=hc(n)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=hc(e.arrayValue.values[r]);return n}return Object.assign({},e)}function fc(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function dc(e){return"nullValue"in e?Qs:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?ac(Hs.empty(),Js.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:os()}function pc(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?ac(Hs.empty(),Js.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Ys:os()}function vc(e,t){var n=tc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function gc(e,t){var n=tc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var mc=function(){function e(t){v(this,e),this.value=t}return p(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!lc(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hc(t)}},{key:"setAll",value:function(e){var t=this,n=Ds.emptyPath(),r={},i=[];e.forEach(function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=hc(e):i.push(a.lastSegment())});var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());lc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Xs(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];lc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Rs(t,function(t,n){return e[t]=n});var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(hc(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function yc(e){var t=[];return Rs(e.fields,function(e,n){var r=new Ds([e]);if(lc(n)){var i=yc(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=l(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)}),new Ls(t)}var kc=function(){function e(t,n,r,i,a,o){v(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return p(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=mc.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=mc.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Es.min(),Es.min(),mc.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Es.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Es.min(),mc.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Es.min(),mc.empty(),2)}}]),e}(),bc=p(function e(t,n,r,i){v(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i});function wc(e){return e.fields.find(function(e){return 2===e.kind})}function _c(e){return e.fields.filter(function(e){return 2!==e.kind})}bc.UNKNOWN_ID=-1;var xc=p(function e(t,n){v(this,e),this.fieldPath=t,this.kind=n}),Tc=function(){function e(t,n){v(this,e),this.sequenceNumber=t,this.offset=n}return p(e,null,[{key:"empty",value:function(){return new e(0,Ec.min())}}]),e}();function Sc(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Es.fromTimestamp(1e9===r?new Is(n+1,0):new Is(n,r));return new Ec(i,Js.empty(),t)}function Ic(e){return new Ec(e.readTime,e.key,-1)}var Ec=function(){function e(t,n,r){v(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return p(e,null,[{key:"min",value:function(){return new e(Es.min(),Js.empty(),-1)}},{key:"max",value:function(){return new e(Es.max(),Js.empty(),-1)}}]),e}();function Cc(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Js.comparator(e.documentKey,t.documentKey))?n:xs(e.largestBatchId,t.largestBatchId)}var Rc=function(){function e(t,n){v(this,e),this.comparator=t,this.root=n||Oc.EMPTY}return p(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Oc.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Oc.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})}},{key:"toString",value:function(){var e=[];return this.inorderTraversal(function(t,n){return e.push("".concat(t,":").concat(n)),!1}),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Ac(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Ac(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Ac(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Ac(this.root,e,this.comparator,!0)}}]),e}(),Ac=function(){function e(t,n,r,i){v(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return p(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Oc=function(){function e(t,n,r,i,a){v(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return p(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw os();if(this.right.isRed())throw os();var e=this.left.check();if(e!==this.right.check())throw os();return e+(this.isRed()?0:1)}}]),e}();Oc.EMPTY=null,Oc.RED=!0,Oc.BLACK=!1,Oc.EMPTY=new(function(){function e(){v(this,e),this.size=0}return p(e,[{key:"key",get:function(){throw os()}},{key:"value",get:function(){throw os()}},{key:"color",get:function(){throw os()}},{key:"left",get:function(){throw os()}},{key:"right",get:function(){throw os()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Oc(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Nc=function(){function e(t){v(this,e),this.comparator=t,this.data=new Rc(this.comparator)}return p(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Pc(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Pc(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach(function(e){t=t.add(e)}),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Pc=function(){function e(t){v(this,e),this.iter=t}return p(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Dc(e){return e.hasNext()?e.getNext():void 0}var Lc=p(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;v(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null});function Mc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Lc(e,t,n,r,i,a,o)}function Uc(e){var t=ss(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(e){return(t=e).field.canonicalString()+t.op.toString()+rc(t.value);var t}).join(","),n+="|ob:",n+=t.orderBy.map(function(e){return function(e){return e.field.canonicalString()+e.dir}(e)}).join(","),Gs(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(function(e){return rc(e)}).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(function(e){return rc(e)}).join(",")),t.P=n}return t.P}function Fc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!el(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if((i=e.filters[r]).op!==(a=t.filters[r]).op||!i.field.isEqual(a.field)||!Xs(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!nl(e.startAt,t.startAt)&&nl(e.endAt,t.endAt)}function Vc(e){return Js.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Zc(e,t){return e.filters.filter(function(e){return e instanceof Bc&&e.field.isEqual(t)})}function qc(e,t,n){var r,i=Qs,a=!0,o=l(Zc(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Qs,c=!0;switch(u.op){case"<":case"<=":s=dc(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Qs}vc({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(d){o.e(d)}finally{o.f()}if(null!==n)for(var h=0;h<e.orderBy.length;++h)if(e.orderBy[h].field.isEqual(t)){var f=n.position[h];vc({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function jc(e,t,n){var r,i=Ys,a=!0,o=l(Zc(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Ys,c=!0;switch(u.op){case">=":case">":s=pc(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Ys}gc({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(d){o.e(d)}finally{o.f()}if(null!==n)for(var h=0;h<e.orderBy.length;++h)if(e.orderBy[h].field.isEqual(t)){var f=n.position[h];gc({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Bc=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(tc(t,this.value)):null!==t&&$s(this.value)===$s(t)&&this.v(tc(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return os()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new zc(e,t,r):"array-contains"===t?new Wc(e,r):"in"===t?new Jc(e,r):"not-in"===t?new Yc(e,r):"array-contains-any"===t?new Qc(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new Hc(e,n):new Gc(e,n)}}]),n}(function(){return p(function e(){v(this,e)})}()),zc=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e,r,i)).key=Js.fromName(i.referenceValue),a}return p(n,[{key:"matches",value:function(e){var t=Js.comparator(e.key,this.key);return this.v(t)}}]),n}(Bc),Hc=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,"in",r)).keys=Kc(0,r),i}return p(n,[{key:"matches",value:function(e){return this.keys.some(function(t){return t.isEqual(e.key)})}}]),n}(Bc),Gc=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,"not-in",r)).keys=Kc(0,r),i}return p(n,[{key:"matches",value:function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})}}]),n}(Bc);function Kc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(e){return Js.fromName(e.referenceValue)})}var Wc=function(e){g(n,e);var t=m(n);function n(e,r){return v(this,n),t.call(this,e,"array-contains",r)}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return uc(t)&&ec(t.arrayValue,this.value)}}]),n}(Bc),Jc=function(e){g(n,e);var t=m(n);function n(e,r){return v(this,n),t.call(this,e,"in",r)}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&ec(this.value.arrayValue,t)}}]),n}(Bc),Yc=function(e){g(n,e);var t=m(n);function n(e,r){return v(this,n),t.call(this,e,"not-in",r)}return p(n,[{key:"matches",value:function(e){if(ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!ec(this.value.arrayValue,t)}}]),n}(Bc),Qc=function(e){g(n,e);var t=m(n);function n(e,r){return v(this,n),t.call(this,e,"array-contains-any",r)}return p(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!uc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(e){return ec(t.value.arrayValue,e)})}}]),n}(Bc),$c=p(function e(t,n){v(this,e),this.position=t,this.inclusive=n}),Xc=p(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";v(this,e),this.field=t,this.dir=n});function el(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function tl(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Js.comparator(Js.fromName(o.referenceValue),n.key):tc(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function nl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Xs(e.position[n],t.position[n]))return!1;return!0}var rl=p(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;v(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null});function il(e,t,n,r,i,a,o,u){return new rl(e,t,n,r,i,a,o,u)}function al(e){return new rl(e)}function ol(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ul(e){var t,n=l(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function sl(e){return null!==e.collectionGroup}function cl(e){var t=ss(e);if(null===t.D){t.D=[];var n=ul(t),r=ol(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new Xc(n)),t.D.push(new Xc(Ds.keyField(),"asc"));else{var i,a=!1,o=l(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Xc(Ds.keyField(),s))}}}return t.D}function ll(e){var t=ss(e);if(!t.C)if("F"===t.limitType)t.C=Mc(t.path,t.collectionGroup,cl(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=l(cl(t));try{for(i.s();!(n=i.n()).done;){var a=n.value;r.push(new Xc(a.field,"desc"===a.dir?"asc":"desc"))}}catch(s){i.e(s)}finally{i.f()}var o=t.endAt?new $c(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new $c(t.startAt.position,t.startAt.inclusive):null;t.C=Mc(t.path,t.collectionGroup,r,t.filters,t.limit,o,u)}return t.C}function hl(e,t,n){return new rl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function fl(e,t){return Fc(ll(e),ll(t))&&e.limitType===t.limitType}function dl(e){return"".concat(Uc(ll(e)),"|lt:").concat(e.limitType)}function pl(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(rc(t.value));var t}).join(", "),"]")),Gs(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)}).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(function(e){return rc(e)}).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(function(e){return rc(e)}).join(",")),"Target(".concat(t,")")}(ll(e)),"; limitType=").concat(e.limitType,")")}function vl(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Js.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=l(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=l(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=tl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,cl(e),t)||e.endAt&&!function(e,t,n){var r=tl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,cl(e),t))}(e,t)}function gl(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ml(e){return function(t,n){var r,i=!1,a=l(cl(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=yl(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function yl(e,t,n){var r=e.field.isKeyField()?Js.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?tc(r,i):os()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return os()}}function kl(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ks(t)?"-0":t}}function bl(e){return{integerValue:""+e}}function wl(e,t){return Ws(t)?bl(t):kl(e,t)}var _l=p(function e(){v(this,e),this._=void 0});function xl(e,t,n){return e instanceof Il?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof El?Cl(e,t):e instanceof Rl?Al(e,t):function(e,t){var n=Sl(e,t),r=Nl(n)+Nl(e.k);return oc(n)&&oc(e.k)?bl(r):kl(e.M,r)}(e,t)}function Tl(e,t,n){return e instanceof El?Cl(e,t):e instanceof Rl?Al(e,t):n}function Sl(e,t){return e instanceof Ol?oc(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Il=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n)}(_l),El=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this)).elements=e,r}return p(n)}(_l);function Cl(e,t){var n,r=Pl(t),i=l(e.elements);try{var a=function(){var e=n.value;r.some(function(t){return Xs(t,e)})||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Rl=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this)).elements=e,r}return p(n)}(_l);function Al(e,t){var n,r=Pl(t),i=l(e.elements);try{var a=function(){var e=n.value;r=r.filter(function(t){return!Xs(t,e)})};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Ol=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).M=e,i.k=r,i}return p(n)}(_l);function Nl(e){return Vs(e.integerValue||e.doubleValue)}function Pl(e){return uc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Dl=p(function e(t,n){v(this,e),this.field=t,this.transform=n}),Ll=p(function e(t,n){v(this,e),this.version=t,this.transformResults=n}),Ml=function(){function e(t,n){v(this,e),this.updateTime=t,this.exists=n}return p(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Ul(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Fl=p(function e(){v(this,e)});function Vl(e,t,n){e instanceof zl?function(e,t,n){var r=e.value.clone(),i=Kl(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Hl?function(e,t,n){if(Ul(e.precondition,t)){var r=Kl(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Gl(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Zl(e,t,n){e instanceof zl?function(e,t,n){if(Ul(e.precondition,t)){var r=e.value.clone(),i=Wl(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Bl(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Hl?function(e,t,n){if(Ul(e.precondition,t)){var r=Wl(e.fieldTransforms,n,t),i=t.data;i.setAll(Gl(e)),i.setAll(r),t.convertToFoundDocument(Bl(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Ul(e.precondition,t)&&t.convertToNoDocument(Es.min())}(e,t)}function ql(e,t){var n,r=null,i=l(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Sl(a.transform,o||null);null!=u&&(null==r&&(r=mc.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function jl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ts(e,t,function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof El&&t instanceof El||e instanceof Rl&&t instanceof Rl?Ts(e.elements,t.elements,Xs):e instanceof Ol&&t instanceof Ol?Xs(e.k,t.k):e instanceof Il&&t instanceof Il}(e.transform,t.transform)}(e,t)})}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Bl(e){return e.isFoundDocument()?e.version:Es.min()}var zl=function(e){g(n,e);var t=m(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return v(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return p(n)}(Fl),Hl=function(e){g(n,e);var t=m(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return v(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return p(n)}(Fl);function Gl(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function Kl(e,t,n){var r=new Map;us(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Tl(o,u,n[i]))}return r}function Wl(e,t,n){var r,i=new Map,a=l(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,xl(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Jl,Yl,Ql=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return p(n)}(Fl),$l=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return p(n)}(Fl),Xl=p(function e(t){v(this,e),this.count=t});function eh(e){switch(e){default:return os();case cs.CANCELLED:case cs.UNKNOWN:case cs.DEADLINE_EXCEEDED:case cs.RESOURCE_EXHAUSTED:case cs.INTERNAL:case cs.UNAVAILABLE:case cs.UNAUTHENTICATED:return!1;case cs.INVALID_ARGUMENT:case cs.NOT_FOUND:case cs.ALREADY_EXISTS:case cs.PERMISSION_DENIED:case cs.FAILED_PRECONDITION:case cs.ABORTED:case cs.OUT_OF_RANGE:case cs.UNIMPLEMENTED:case cs.DATA_LOSS:return!0}}function th(e){if(void 0===e)return rs("GRPC error has no .code"),cs.UNKNOWN;switch(e){case Jl.OK:return cs.OK;case Jl.CANCELLED:return cs.CANCELLED;case Jl.UNKNOWN:return cs.UNKNOWN;case Jl.DEADLINE_EXCEEDED:return cs.DEADLINE_EXCEEDED;case Jl.RESOURCE_EXHAUSTED:return cs.RESOURCE_EXHAUSTED;case Jl.INTERNAL:return cs.INTERNAL;case Jl.UNAVAILABLE:return cs.UNAVAILABLE;case Jl.UNAUTHENTICATED:return cs.UNAUTHENTICATED;case Jl.INVALID_ARGUMENT:return cs.INVALID_ARGUMENT;case Jl.NOT_FOUND:return cs.NOT_FOUND;case Jl.ALREADY_EXISTS:return cs.ALREADY_EXISTS;case Jl.PERMISSION_DENIED:return cs.PERMISSION_DENIED;case Jl.FAILED_PRECONDITION:return cs.FAILED_PRECONDITION;case Jl.ABORTED:return cs.ABORTED;case Jl.OUT_OF_RANGE:return cs.OUT_OF_RANGE;case Jl.UNIMPLEMENTED:return cs.UNIMPLEMENTED;case Jl.DATA_LOSS:return cs.DATA_LOSS;default:return os()}}(Yl=Jl||(Jl={}))[Yl.OK=0]="OK",Yl[Yl.CANCELLED=1]="CANCELLED",Yl[Yl.UNKNOWN=2]="UNKNOWN",Yl[Yl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yl[Yl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yl[Yl.NOT_FOUND=5]="NOT_FOUND",Yl[Yl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yl[Yl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yl[Yl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yl[Yl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yl[Yl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yl[Yl.ABORTED=10]="ABORTED",Yl[Yl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yl[Yl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yl[Yl.INTERNAL=13]="INTERNAL",Yl[Yl.UNAVAILABLE=14]="UNAVAILABLE",Yl[Yl.DATA_LOSS=15]="DATA_LOSS";var nh=function(){function e(t,n){v(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return p(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var i,a=l(n);try{for(a.s();!(i=a.n()).done;){var o=r(i.value,2),u=o[0],s=o[1];if(this.equalsFn(u,e))return s}}catch(c){a.e(c)}finally{a.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Rs(this.inner,function(t,n){var i,a=l(n);try{for(a.s();!(i=a.n()).done;){var o=r(i.value,2),u=o[0],s=o[1];e(u,s)}}catch(c){a.e(c)}finally{a.f()}})}},{key:"isEmpty",value:function(){return As(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),rh=new Rc(Js.comparator);function ih(){return rh}var ah=new Rc(Js.comparator);function oh(){for(var e=ah,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function uh(){return new nh(function(e){return e.toString()},function(e,t){return e.isEqual(t)})}var sh=new Rc(Js.comparator),ch=new Nc(Js.comparator);function lh(){for(var e=ch,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var hh=new Nc(xs);function fh(){return hh}var dh=function(){function e(t,n,r,i,a){v(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return p(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,ph.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Es.min(),r,fh(),ih(),lh())}}]),e}(),ph=function(){function e(t,n,r,i,a){v(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return p(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Ms.EMPTY_BYTE_STRING,n,lh(),lh(),lh())}}]),e}(),vh=p(function e(t,n,r,i){v(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i}),gh=p(function e(t,n){v(this,e),this.targetId=t,this.$=n}),mh=p(function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ms.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;v(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}),yh=function(){function e(){v(this,e),this.B=0,this.L=wh(),this.U=Ms.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return p(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=lh(),t=lh(),n=lh();return this.L.forEach(function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:os()}}),new ph(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=wh()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),kh=function(){function e(t){v(this,e),this.nt=t,this.st=new Map,this.it=ih(),this.rt=bh(),this.ot=new Nc(xs)}return p(e,[{key:"ut",value:function(e){var t,n=l(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=l(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:os()}})}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach(function(e,r){n.ft(r)&&t(r)})}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(Vc(i))if(0===n){var a=new Js(i.path);this.ct(t,a,kc.newNoDocument(a,Es.min()))}else us(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach(function(r,i){var a=t.wt(i);if(a){if(r.current&&Vc(a.target)){var o=new Js(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,kc.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}});var r=lh();this.rt.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(e))}),this.it.forEach(function(t,n){return n.setReadTime(e)});var i=new dh(e,n,this.ot,this.it,r);return this.it=ih(),this.rt=bh(),this.ot=new Nc(xs),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new yh,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new Nc(xs),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||ns("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new yh),this.nt.getRemoteKeysForTarget(e).forEach(function(n){t.ct(e,n,null)})}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function bh(){return new Rc(Js.comparator)}function wh(){return new Rc(Js.comparator)}var _h={asc:"ASCENDING",desc:"DESCENDING"},xh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Th=p(function e(t,n){v(this,e),this.databaseId=t,this.N=n});function Sh(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ih(e,t){return e.N?t.toBase64():t.toUint8Array()}function Eh(e,t){return Sh(e,t.toTimestamp())}function Ch(e){return us(!!e),Es.fromTimestamp(function(e){var t=Fs(e);return new Is(t.seconds,t.nanos)}(e))}function Rh(e,t){return function(e){return new Ns(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Ah(e){var t=Ns.fromString(e);return us($h(t)),t}function Oh(e,t){return Rh(e.databaseId,t.path)}function Nh(e,t){var n=Ah(t);if(n.get(1)!==e.databaseId.projectId)throw new ls(cs.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ls(cs.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Js(Mh(n))}function Ph(e,t){return Rh(e.databaseId,t)}function Dh(e){var t=Ah(e);return 4===t.length?Ns.emptyPath():Mh(t)}function Lh(e){return new Ns(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Mh(e){return us(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Uh(e,t,n){return{name:Oh(e,t),fields:n.value.mapValue.fields}}function Fh(e,t,n){var r=Nh(e,t.name),i=Ch(t.updateTime),a=new mc({mapValue:{fields:t.fields}}),o=kc.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Vh(e,t){var n;if(t instanceof zl)n={update:Uh(e,t.key,t.value)};else if(t instanceof Ql)n={delete:Oh(e,t.key)};else if(t instanceof Hl)n={update:Uh(e,t.key,t.data),updateMask:Qh(t.fieldMask)};else{if(!(t instanceof $l))return os();n={verify:Oh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(e){return function(e,t){var n=t.transform;if(n instanceof Il)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof El)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Rl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ol)return{fieldPath:t.field.canonicalString(),increment:n.k};throw os()}(0,e)})),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Eh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:os()}(e,t.precondition)),n}function Zh(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Ml.updateTime(Ch(e.updateTime)):void 0!==e.exists?Ml.exists(e.exists):Ml.none()}(t.currentDocument):Ml.none(),r=t.updateTransforms?t.updateTransforms.map(function(t){return function(e,t){var n=null;"setToServerValue"in t?(us("REQUEST_TIME"===t.setToServerValue),n=new Il):"appendMissingElements"in t?n=new El(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new Rl(t.removeAllFromArray.values||[]):"increment"in t?n=new Ol(e,t.increment):os();var r=Ds.fromServerFormat(t.fieldPath);return new Dl(r,n)}(e,t)}):[];if(t.update){var i=Nh(e,t.update.name),a=new mc({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){return new Ls((e.fieldPaths||[]).map(function(e){return Ds.fromServerFormat(e)}))}(t.updateMask);return new Hl(i,a,o,n,r)}return new zl(i,a,n,r)}if(t.delete){var u=Nh(e,t.delete);return new Ql(u,n)}if(t.verify){var s=Nh(e,t.verify);return new $l(s,n)}return os()}function qh(e,t){return{documents:[Ph(e,t.path)]}}function jh(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Ph(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Ph(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map(function(e){return function(e){if("=="===e.op){if(cc(e.value))return{unaryFilter:{field:Kh(e.field),op:"IS_NAN"}};if(sc(e.value))return{unaryFilter:{field:Kh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(cc(e.value))return{unaryFilter:{field:Kh(e.field),op:"IS_NOT_NAN"}};if(sc(e.value))return{unaryFilter:{field:Kh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kh(e.field),op:Gh(e.op),value:e.value}}}(e)});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map(function(e){return function(e){return{field:Kh(e.field),direction:Hh(e.dir)}}(e)})}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||Gs(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Bh(e){var t=Dh(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){us(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=zh(n.where));var u=[];n.orderBy&&(u=n.orderBy.map(function(e){return function(e){return new Xc(Wh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}));var s=null;n.limit&&(s=function(e){var t;return Gs(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){return new $c(e.values||[],!!e.before)}(n.startAt));var l=null;return n.endAt&&(l=function(e){return new $c(e.values||[],!e.before)}(n.endAt)),il(t,i,u,o,s,"F",c,l)}function zh(e){return e?void 0!==e.unaryFilter?[Yh(e)]:void 0!==e.fieldFilter?[Jh(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return zh(e)}).reduce(function(e,t){return e.concat(t)}):os():[]}function Hh(e){return _h[e]}function Gh(e){return xh[e]}function Kh(e){return{fieldPath:e.canonicalString()}}function Wh(e){return Ds.fromServerFormat(e.fieldPath)}function Jh(e){return Bc.create(Wh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return os()}}(e.fieldFilter.op),e.fieldFilter.value)}function Yh(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Wh(e.unaryFilter.field);return Bc.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Wh(e.unaryFilter.field);return Bc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Wh(e.unaryFilter.field);return Bc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Wh(e.unaryFilter.field);return Bc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return os()}}function Qh(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}}function $h(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Xh(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=tf(t)),t=ef(e.get(n),t);return tf(t)}function ef(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function tf(e){return e+"\x01\x01"}function nf(e){var t=e.length;if(us(t>=2),2===t)return us("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Ns.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&os(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:os()}a=o+2}return new Ns(r)}var rf=["userId","batchId"];function af(e,t){return[e,Xh(t)]}function of(e,t,n){return[e,Xh(t),n]}var uf={},sf=["prefixPath","collectionGroup","readTime","documentId"],cf=["prefixPath","collectionGroup","documentId"],lf=["collectionGroup","readTime","prefixPath","documentId"],hf=["canonicalId","targetId"],ff=["targetId","path"],df=["path","targetId"],pf=["collectionId","parent"],vf=["indexId","uid"],gf=["uid","sequenceNumber"],mf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yf=["indexId","uid","orderedDocumentKey"],kf=["userId","collectionPath","documentId"],bf=["userId","collectionPath","largestBatchId"],wf=["userId","collectionGroup","largestBatchId"],_f=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],xf=[].concat(_f,["documentOverlays"]),Tf=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Sf=[].concat(Tf,["indexConfiguration","indexState","indexEntries"]),If="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ef=function(){function e(){v(this,e),this.onCommittedListeners=[]}return p(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach(function(e){return e()})}}]),e}(),Cf=function(){function e(t){var n=this;v(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)},function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)})}return p(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&os(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}})}},{key:"toPromise",value:function(){var e=this;return new Promise(function(t,n){e.next(t,n)})}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)}}],[{key:"resolve",value:function(t){return new e(function(e,n){e(t)})}},{key:"reject",value:function(t){return new e(function(e,n){n(t)})}},{key:"waitFor",value:function(t){return new e(function(e,n){var r=0,i=0,a=!1;t.forEach(function(t){++r,t.next(function(){++i,a&&i===r&&e()},function(e){return n(e)})}),a=!0,i===r&&e()})}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=l(t);try{var a=function(){var t=n.value;r=r.next(function(n){return n?e.resolve(n):t()})};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)}}]),e}(),Rf=function(){function e(t,n){var r=this;v(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new hs,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Nf(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=Uf(e.target.error);r.At.reject(new Nf(t,n))}}return p(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(ns("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Df(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Nf(n,t)}}}]),e}(),Af=function(){function e(t,n,r){v(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt((0,Mt.z$)())&&rs("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return p(e,[{key:"Nt",value:function(e){var t=this;return(0,qt.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=t.db,n.t0){n.next=6;break}return ns("SimpleDb","Opening database:",t.name),n.next=5,new Promise(function(n,r){var i=indexedDB.open(t.name,t.version);i.onsuccess=function(e){n(e.target.result)},i.onblocked=function(){r(new Nf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;r("VersionError"===n.name?new ls(cs.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new ls(cs.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new Nf(e,n))},i.onupgradeneeded=function(e){ns("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',e.oldVersion),t.Pt.kt(e.target.result,i.transaction,e.oldVersion,t.version).next(function(){ns("SimpleDb","Database upgrade to version "+t.version+" complete")})}});case 5:t.db=n.sent;case 6:return t.Mt&&(t.db.onversionchange=function(e){return t.Mt(e)}),n.abrupt("return",t.db);case 8:case"end":return n.stop()}},n)}))()}},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(e,t,n,r){var i=this;return(0,qt.Z)(regeneratorRuntime.mark(function a(){var o,u,s,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:o="readonly"===t,u=0;case 2:return++u,a.prev=3,a.delegateYield(regeneratorRuntime.mark(function t(){var a,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.Nt(e);case 2:return i.db=t.sent,a=Rf.open(i.db,e,o?"readonly":"readwrite",n),(u=r(a).next(function(e){return a.bt(),e}).catch(function(e){return a.abort(e),Cf.reject(e)}).toPromise()).catch(function(){}),t.next=7,a.Rt;case 7:return t.t0=u,t.abrupt("return",{v:t.t0});case 9:case"end":return t.stop()}},t)})(),"t0",5);case 5:if("object"!=typeof(s=a.t0)){a.next=8;break}return a.abrupt("return",s.v);case 8:a.next=15;break;case 10:if(a.prev=10,a.t1=a.catch(3),c="FirebaseError"!==a.t1.name&&u<3,ns("SimpleDb","Transaction failed with error:",a.t1.message,"Retrying:",c),i.close(),c){a.next=15;break}return a.abrupt("return",Promise.reject(a.t1));case 15:a.next=2;break;case 17:case"end":return a.stop()}},a,null,[[3,10]])}))()}},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return ns("SimpleDb","Removing database:",e),Lf(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!(0,Mt.hl)())return!1;if(e.St())return!0;var t=(0,Mt.z$)(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Of=function(){function e(t){v(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return p(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Lf(this.Ft.delete())}}]),e}(),Nf=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,cs.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return p(n)}(ls);function Pf(e){return"IndexedDbTransactionError"===e.name}var Df=function(){function e(t){v(this,e),this.store=t}return p(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(ns("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ns("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Lf(n)}},{key:"add",value:function(e){return ns("SimpleDb","ADD",this.store.name,e,e),Lf(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Lf(this.store.get(e)).next(function(n){return void 0===n&&(n=null),ns("SimpleDb","GET",t.store.name,e,n),n})}},{key:"delete",value:function(e){return ns("SimpleDb","DELETE",this.store.name,e),Lf(this.store.delete(e))}},{key:"count",value:function(){return ns("SimpleDb","COUNT",this.store.name),Lf(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,function(e,t){i.push(t)}).next(function(){return i})}var a=this.store.getAll(n.range);return new Cf(function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}})}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Cf(function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}})}},{key:"Qt",value:function(e,t){ns("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,function(e,t,n){return n.delete()})}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new Cf(function(n,r){t.onerror=function(e){var t=Uf(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next(function(e){e?r.continue():n()}):n()}})}},{key:"Kt",value:function(e,t){var n=[];return new Cf(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Of(i),o=t(i.primaryKey,i.value,a);if(o instanceof Cf){var u=o.catch(function(e){return a.done(),Cf.reject(e)});n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}}).next(function(){return Cf.waitFor(n)})}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Lf(e){return new Cf(function(t,n){e.onsuccess=function(e){t(e.target.result)},e.onerror=function(e){var t=Uf(e.target.error);n(t)}})}var Mf=!1;function Uf(e){var t=Af.Vt((0,Mt.z$)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new ls("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Mf||(Mf=!0,setTimeout(function(){throw r},0)),r}}return e}var Ff=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return p(n)}(Ef);function Vf(e,t){var n=ss(e);return Af.xt(n.Ht,t)}var Zf=function(){function e(t,n,r,i){v(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return p(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Vl(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=l(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Zl(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=l(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Zl(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach(function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Es.min())})}},{key:"keys",value:function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},lh())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ts(this.mutations,e.mutations,function(e,t){return jl(e,t)})&&Ts(this.baseMutations,e.baseMutations,function(e,t){return jl(e,t)})}}]),e}(),qf=function(){function e(t,n,r,i){v(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return p(e,null,[{key:"from",value:function(t,n,r){us(t.mutations.length===r.length);for(var i=sh,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),jf=function(){function e(t,n){v(this,e),this.largestBatchId=t,this.mutation=n}return p(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Bf=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Es.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Es.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ms.EMPTY_BYTE_STRING;v(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return p(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),zf=p(function e(t){v(this,e),this.Jt=t});function Hf(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Gf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Oh(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Sh(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Kf(t.version)};else{if(!t.isUnknownDocument())return os();r.unknownDocument={path:n.path.toArray(),version:Kf(t.version)}}return r}function Gf(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Kf(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Wf(e){var t=new Is(e.seconds,e.nanoseconds);return Es.fromTimestamp(t)}function Jf(e,t){for(var n=(t.baseMutations||[]).map(function(t){return Zh(e.Jt,t)}),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform&&(i.updateTransforms=t.mutations[r+1].transform.fieldTransforms,t.mutations.splice(r+1,1),++r)}var a=t.mutations.map(function(t){return Zh(e.Jt,t)}),o=Is.fromMillis(t.localWriteTimeMs);return new Zf(t.batchId,o,n,a)}function Yf(e){var t,n,r=Wf(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Wf(e.lastLimboFreeSnapshotVersion):Es.min();return void 0!==e.query.documents?(us(1===(n=e.query).documents.length),t=ll(al(Dh(n.documents[0])))):t=function(e){return ll(Bh(e))}(e.query),new Bf(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Ms.fromBase64String(e.resumeToken))}function Qf(e,t){var n,r=Kf(t.snapshotVersion),i=Kf(t.lastLimboFreeSnapshotVersion);n=Vc(t.target)?qh(e.Jt,t.target):jh(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Uc(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function $f(e){var t=Bh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?hl(t,t.limit,"L"):t}function Xf(e,t){return new jf(t.largestBatchId,Zh(e.Jt,t.overlayMutation))}function ed(e,t){var n=t.path.lastSegment();return[e,Xh(t.path.popLast()),n]}var td=function(){function e(){v(this,e)}return p(e,[{key:"getBundleMetadata",value:function(e,t){return nd(e).get(t).next(function(e){if(e)return{id:(t=e).bundleId,createTime:Wf(t.createTime),version:t.version};var t})}},{key:"saveBundleMetadata",value:function(e,t){return nd(e).put({bundleId:(n=t).id,createTime:Kf(Ch(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return rd(e).get(t).next(function(e){if(e)return{name:(t=e).name,query:$f(t.bundledQuery),readTime:Wf(t.readTime)};var t})}},{key:"saveNamedQuery",value:function(e,t){return rd(e).put(function(e){return{name:e.name,readTime:Kf(Ch(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function nd(e){return Vf(e,"bundles")}function rd(e){return Vf(e,"namedQueries")}var id=function(){function e(t,n){v(this,e),this.M=t,this.userId=n}return p(e,[{key:"getOverlay",value:function(e,t){var n=this;return ad(e).get(ed(this.userId,t)).next(function(e){return e?Xf(n.M,e):null})}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach(function(n,a){var o=new jf(t,a);i.push(r.Xt(e,o))}),Cf.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach(function(e){return i.add(Xh(e.getCollectionPath()))});var a=[];return i.forEach(function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(ad(e).Qt("collectionPathOverlayIndex",i))}),Cf.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=uh(),a=Xh(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return ad(e).qt("collectionPathOverlayIndex",o).next(function(e){var t,n=l(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Xf(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i})}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=uh(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ad(e).Wt({index:"collectionGroupOverlayIndex",range:u},function(e,t,n){var u=Xf(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()}).next(function(){return o})}},{key:"Xt",value:function(e,t){return ad(e).put(function(e,t,n){var i=r(ed(t,n.mutation.key),3);i[0];return{userId:t,collectionPath:i[1],documentId:i[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Vh(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function ad(e){return Vf(e,"documentOverlays")}var od=function(){function e(){v(this,e)}return p(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Vs(e.integerValue));else if("doubleValue"in e){var n=Vs(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),Ks(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Zs(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?fc(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):os()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),Js.fromName(e).path.forEach(function(e){n.ne(t,60),n.le(e,t)})}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function ud(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function sd(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=ud(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}od.fe=new od;var cd=function(){function e(){v(this,e),this.buffer=new Uint8Array(1024),this.position=0}return p(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=l(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=l(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=sd(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=sd(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),ld=function(){function e(t){v(this,e),this.De=t}return p(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),hd=function(){function e(t){v(this,e),this.De=t}return p(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),fd=function(){function e(){v(this,e),this.De=new cd,this.Ce=new ld(this.De),this.xe=new hd(this.De)}return p(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),dd=function(){function e(t,n,r,i){v(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return p(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function pd(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=vd(e.arrayValue,t.arrayValue))?n:0!==(n=vd(e.directionalValue,t.directionalValue))?n:Js.comparator(e.documentKey,t.documentKey)}function vd(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var gd=function(){function e(t){v(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=l(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return p(e,[{key:"$e",value:function(e){var t=wc(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=_c(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=l(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),md=function(){function e(){v(this,e),this.qe=new yd}return p(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),Cf.resolve()}},{key:"getCollectionParents",value:function(e,t){return Cf.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Cf.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Cf.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Cf.resolve(null)}},{key:"getIndexType",value:function(e,t){return Cf.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Cf.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Cf.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Cf.resolve(Ec.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Cf.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Cf.resolve()}}]),e}(),yd=function(){function e(){v(this,e),this.index={}}return p(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Nc(Ns.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Nc(Ns.comparator)).toArray()}}]),e}(),kd=new Uint8Array(0),bd=function(){function e(t,n){v(this,e),this.user=t,this.databaseId=n,this.Ke=new yd,this.Ge=new nh(function(e){return Uc(e)},function(e,t){return Fc(e,t)}),this.uid=t.uid||""}return p(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(function(){n.Ke.add(t)});var a={collectionId:r,parent:Xh(i)};return wd(e).put(a)}return Cf.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Ss(t),""],!1,!0);return wd(e).qt(r).next(function(e){var r,i=l(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(nf(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n})}},{key:"addFieldIndex",value:function(e,t){var n=xd(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(function(e){return[e.fieldPath.canonicalString(),e.kind]})}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=xd(e),r=Td(e),i=_d(e);return n.delete(t.indexId).next(function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}).next(function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=_d(e),i=!0,a=new Map;return Cf.forEach(this.Qe(t),function(t){return n.je(e,t).next(function(e){i&&(i=!!e),a.set(t,e)})}).next(function(){if(i){var e=lh(),o=[];return Cf.forEach(a,function(i,a){var u;ns("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map(function(e){return"".concat(e.fieldPath,":").concat(e.kind)}).join(",")))," to execute ").concat(Uc(t)));var s=function(e,t){var n=wc(t);if(void 0===n)return null;var r,i=l(Zc(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=l(_c(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=l(Zc(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),h=function(e,t){var n,r=[],i=!0,a=l(_c(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?qc(e,o.fieldPath,e.startAt):jc(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new $c(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=l(_c(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?jc(e,o.fieldPath,e.endAt):qc(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new $c(r,i)}(a,i),d=n.We(i,a,h),p=n.We(i,a,f),v=n.ze(i,a,c),g=n.He(i.indexId,s,d,h.inclusive,p,f.inclusive,v);return Cf.forEach(g,function(n){return r.Gt(n,t.limit).next(function(t){t.forEach(function(t){var n=Js.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))})})})}).next(function(){return o})}return Cf.resolve(null)})}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"He",value:function(e,t,n,r,i,a,o){for(var u=this,c=(null!=t?t.length:1)*Math.max(n.length,i.length),l=c/(null!=t?t.length:1),h=[],f=function(c){var f=t?u.Je(t[c/l]):kd,d=u.Ye(e,f,n[c%l],r),p=u.Xe(e,f,i[c%l],a),v=o.map(function(t){return u.Ye(e,f,t,!0)});h.push.apply(h,s(u.createRange(d,p,v)))},d=0;d<c;++d)f(d);return h}},{key:"Ye",value:function(e,t,n,r){var i=new dd(e,Js.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new dd(e,Js.empty(),t,n);return r?i.ke():i}},{key:"je",value:function(e,t){var n=new gd(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(function(e){var t,r=null,i=l(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.$e(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r})}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Cf.forEach(this.Qe(t),function(t){return n.je(e,t).next(function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Nc(Ds.comparator),r=!1,i=l(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=l(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0})}).next(function(){return r})}},{key:"Ze",value:function(e,t){var n,r=new fd,i=l(_c(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);od.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"Je",value:function(e){var t=new fd;return od.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new fd;return od.fe.Zt(ac(this.databaseId,t),n.Ne(function(e){var t=_c(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"ze",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new fd);var i,a=0,o=l(_c(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],h=l(r);try{for(h.s();!(u=h.n()).done;){var f=u.value;if(this.en(t,s.fieldPath)&&uc(c))r=this.nn(r,s,c);else{var d=f.Ne(s.kind);od.fe.Zt(c,d)}}}catch(p){h.e(p)}finally{h.f()}}}catch(p){o.e(p)}finally{o.f()}return this.sn(r)}},{key:"We",value:function(e,t,n){return this.ze(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=s(e),a=[],o=l(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,c=r.value,h=l(i);try{for(h.s();!(u=h.n()).done;){var f=u.value,d=new fd;d.seed(f.Se()),od.fe.Zt(c,d.Ne(t.kind)),a.push(d)}}catch(p){h.e(p)}finally{h.f()}}}catch(p){o.e(p)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find(function(e){return e instanceof Bc&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)})}},{key:"getFieldIndexes",value:function(e,t){var n=this,i=xd(e),a=Td(e);return(t?i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.qt()).next(function(e){var t=[];return Cf.forEach(e,function(e){return a.get([e.indexId,n.uid]).next(function(n){t.push(function(e,t){var n=t?new Tc(t.sequenceNumber,new Ec(Wf(t.readTime),new Js(nf(t.documentKey)),t.largestBatchId)):Tc.empty(),i=e.fields.map(function(e){var t=r(e,2),n=t[0],i=t[1];return new xc(Ds.fromServerFormat(n),i)});return new bc(e.indexId,e.collectionGroup,i,n)}(e,n))})}).next(function(){return t})})}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next(function(e){return 0===e.length?null:(e.sort(function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:xs(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup)})}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=xd(e),a=Td(e);return this.rn(e).next(function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(function(t){return Cf.forEach(t,function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Kf(r.readTime),documentKey:Xh(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))})})})}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Cf.forEach(t,function(t,i){var a=r.get(t.collectionGroup);return(a?Cf.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next(function(a){return r.set(t.collectionGroup,a),Cf.forEach(a,function(r){return n.on(e,t,r).next(function(t){var a=n.un(i,r);return t.isEqual(a)?Cf.resolve():n.an(e,i,r,t,a)})})})})}},{key:"cn",value:function(e,t,n,r){return _d(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return _d(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=_d(e),i=new Nc(pd);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},function(e,r){i=i.add(new dd(n.indexId,t,r.arrayValue,r.directionalValue))}).next(function(){return i})}},{key:"un",value:function(e,t){var n=new Nc(pd),r=this.Ze(t,e);if(null==r)return n;var i=wc(t);if(null!=i){var a=e.data.field(i.fieldPath);if(uc(a)){var o,u=l(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new dd(t.indexId,e.key,this.Je(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new dd(t.indexId,e.key,kd,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;ns("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Dc(a),s=Dc(o);u||s;){var c=!1,l=!1;if(u&&s){var h=n(u,s);h<0?l=!0:h>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Dc(o)):l?(i(u),u=Dc(a)):(u=Dc(a),s=Dc(o))}}(r,i,pd,function(r){o.push(a.cn(e,t,n,r))},function(r){o.push(a.hn(e,t,n,r))}),Cf.waitFor(o)}},{key:"rn",value:function(e){var t=1;return Td(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},function(e,n,r){r.done(),t=n.sequenceNumber+1}).next(function(){return t})}},{key:"createRange",value:function(e,t,n){n=n.sort(function(e,t){return pd(e,t)}).filter(function(e,t,n){return!t||0!==pd(e,n[t-1])});var r=[];r.push(e);var i,a=l(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=pd(o,e),s=pd(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],h=0;h<r.length;h+=2)c.push(IDBKeyRange.bound([r[h].indexId,this.uid,r[h].arrayValue,r[h].directionalValue,kd,[]],[r[h+1].indexId,this.uid,r[h+1].arrayValue,r[h+1].directionalValue,kd,[]]));return c}},{key:"getMinOffset",value:function(e,t){var n,r=this;return Cf.forEach(this.Qe(t),function(t){return r.je(e,t).next(function(e){e?(!n||Cc(e.indexState.offset,n)<0)&&(n=e.indexState.offset):n=Ec.min()})}).next(function(){return n})}}]),e}();function wd(e){return Vf(e,"collectionParents")}function _d(e){return Vf(e,"indexEntries")}function xd(e){return Vf(e,"indexConfiguration")}function Td(e){return Vf(e,"indexState")}var Sd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Id=function(){function e(t,n,r){v(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return p(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Ed(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},function(e,t,n){return u++,n.delete()});a.push(s.next(function(){us(1===u)}));var c,h=[],f=l(n.mutations);try{for(f.s();!(c=f.n()).done;){var d=c.value,p=of(t,d.key.path,n.batchId);a.push(i.delete(p)),h.push(d.key)}}catch(v){f.e(v)}finally{f.f()}return Cf.waitFor(a).next(function(){return h})}function Cd(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw os();t=e.noDocument}return JSON.stringify(t).length}Id.DEFAULT_COLLECTION_PERCENTILE=10,Id.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Id.DEFAULT=new Id(41943040,Id.DEFAULT_COLLECTION_PERCENTILE,Id.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Id.DISABLED=new Id(-1,0,0);var Rd=function(){function e(t,n,r,i){v(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return p(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Od(e).Wt({index:"userMutationsIndex",range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Nd(e),o=Od(e);return o.add({}).next(function(u){us("number"==typeof u);var s,c=new Zf(u,t,n,r),h=function(e,t,n){var r=n.baseMutations.map(function(t){return Vh(e.Jt,t)}),i=n.mutations.map(function(t){return Vh(e.Jt,t)});return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],d=new Nc(function(e,t){return xs(e.canonicalString(),t.canonicalString())}),p=l(r);try{for(p.s();!(s=p.n()).done;){var v=s.value,g=of(i.userId,v.key.path,u);d=d.add(v.key.path.popLast()),f.push(o.put(h)),f.push(a.put(g,uf))}}catch(m){p.e(m)}finally{p.f()}return d.forEach(function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(function(){i.ln[u]=c.keys()}),Cf.waitFor(f).next(function(){return c})})}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Od(e).get(t).next(function(e){return e?(us(e.userId===n.userId),Jf(n.M,e)):null})}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?Cf.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null})}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Od(e).Wt({index:"userMutationsIndex",range:i},function(e,t,i){t.userId===n.userId&&(us(t.batchId>=r),a=Jf(n.M,t)),i.done()}).next(function(){return a})}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Od(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},function(e,t,r){n=t.batchId,r.done()}).next(function(){return n})}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Od(e).qt("userMutationsIndex",n).next(function(e){return e.map(function(e){return Jf(t.M,e)})})}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,i=af(this.userId,t.path),a=IDBKeyRange.lowerBound(i),o=[];return Nd(e).Wt({range:a},function(i,a,u){var s=r(i,3),c=s[0],l=s[1],h=s[2],f=nf(l);if(c===n.userId&&t.path.isEqual(f))return Od(e).get(h).next(function(e){if(!e)throw os();us(e.userId===n.userId),o.push(Jf(n.M,e))});u.done()}).next(function(){return o})}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,i=new Nc(xs),a=[];return t.forEach(function(t){var o=af(n.userId,t.path),u=IDBKeyRange.lowerBound(o),s=Nd(e).Wt({range:u},function(e,a,o){var u=r(e,3),s=u[0],c=u[1],l=u[2],h=nf(c);s===n.userId&&t.path.isEqual(h)?i=i.add(l):o.done()});a.push(s)}),Cf.waitFor(a).next(function(){return n.dn(e,i)})}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,i=t.path,a=i.length+1,o=af(this.userId,i),u=IDBKeyRange.lowerBound(o),s=new Nc(xs);return Nd(e).Wt({range:u},function(e,t,o){var u=r(e,3),c=u[0],l=u[1],h=u[2],f=nf(l);c===n.userId&&i.isPrefixOf(f)?f.length===a&&(s=s.add(h)):o.done()}).next(function(){return n.dn(e,s)})}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(Od(e).get(t).next(function(e){if(null===e)throw os();us(e.userId===n.userId),r.push(Jf(n.M,e))}))}),Cf.waitFor(i).next(function(){return r})}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Ed(e.Ht,this.userId,t).next(function(r){return e.addOnCommittedListener(function(){n._n(t.batchId)}),Cf.forEach(r,function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)})})}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return Cf.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Nd(e).Wt({range:r},function(e,n,r){if(e[0]===t.userId){var a=nf(e[1]);i.push(a)}else r.done()}).next(function(){us(0===i.length)})})}},{key:"containsKey",value:function(e,t){return Ad(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return Pd(e).get(this.userId).next(function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}})}}],[{key:"Yt",value:function(t,n,r,i){return us(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Ad(e,t,n){var i=af(t,n.path),a=i[1],o=IDBKeyRange.lowerBound(i),u=!1;return Nd(e).Wt({range:o,jt:!0},function(e,n,i){var o=r(e,3),s=o[0],c=o[1];o[2];s===t&&c===a&&(u=!0),i.done()}).next(function(){return u})}function Od(e){return Vf(e,"mutations")}function Nd(e){return Vf(e,"documentMutations")}function Pd(e){return Vf(e,"mutationQueues")}var Dd=function(){function e(t){v(this,e),this.mn=t}return p(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),Ld=function(){function e(t,n){v(this,e),this.referenceDelegate=t,this.M=n}return p(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next(function(n){var r=new Dd(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next(function(){return n.highestTargetId})})}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next(function(e){return Es.fromTimestamp(new Is(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next(function(e){return e.highestListenSequenceNumber})}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)})}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next(function(){return n.pn(e).next(function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)})})}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return Md(e).delete(t.targetId)}).next(function(){return n.pn(e)}).next(function(t){return us(t.targetCount>0),t.targetCount-=1,n.In(e,t)})}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Md(e).Wt(function(o,u){var s=Yf(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))}).next(function(){return Cf.waitFor(a)}).next(function(){return i})}},{key:"forEachTarget",value:function(e,t){return Md(e).Wt(function(e,n){var r=Yf(n);t(r)})}},{key:"pn",value:function(e){return Ud(e).get("targetGlobalKey").next(function(e){return us(null!==e),e})}},{key:"In",value:function(e,t){return Ud(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return Md(e).put(Qf(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next(function(e){return e.targetCount})}},{key:"getTargetData",value:function(e,t){var n=Uc(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Md(e).Wt({range:r,index:"queryTargetsIndex"},function(e,n,r){var a=Yf(n);Fc(t,a.target)&&(i=a,r.done())}).next(function(){return i})}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Fd(e);return t.forEach(function(t){var o=Xh(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))}),Cf.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Fd(e);return Cf.forEach(t,function(t){var a=Xh(t.path);return Cf.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])})}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Fd(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Fd(e),i=lh();return r.Wt({range:n,jt:!0},function(e,t,n){var r=nf(e[1]),a=new Js(r);i=i.add(a)}).next(function(){return i})}},{key:"containsKey",value:function(e,t){var n=Xh(t.path),i=IDBKeyRange.bound([n],[Ss(n)],!1,!0),a=0;return Fd(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},function(e,t,n){var i=r(e,2),o=i[0];i[1];0!==o&&(a++,n.done())}).next(function(){return a>0})}},{key:"Et",value:function(e,t){return Md(e).get(t).next(function(e){return e?Yf(e):null})}}]),e}();function Md(e){return Vf(e,"targets")}function Ud(e){return Vf(e,"targetGlobal")}function Fd(e){return Vf(e,"targetDocuments")}function Vd(e){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,qt.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===cs.FAILED_PRECONDITION&&t.message===If){e.next=2;break}throw t;case 2:ns("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qd(e,t){var n=r(e,2),i=n[0],a=n[1],o=r(t,2),u=o[0],s=o[1],c=xs(i,u);return 0===c?xs(a,s):c}var jd=function(){function e(t){v(this,e),this.An=t,this.buffer=new Nc(qd),this.Rn=0}return p(e,[{key:"bn",value:function(){return++this.Rn}},{key:"Pn",value:function(e){var t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();qd(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Bd=function(){function e(t,n){v(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return p(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;ns("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,qt.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Pf(n.t0)){n.next=12;break}ns("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Vd(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}},n,null,[[1,6]])})))}}]),e}(),zd=function(){function e(t,n){v(this,e),this.Dn=t,this.params=n}return p(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next(function(e){return Math.floor(t/100*e)})}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Cf.resolve(bs.A);var r=new jd(t);return this.Dn.forEachTarget(e,function(e){return r.Pn(e.sequenceNumber)}).next(function(){return n.Dn.xn(e,function(e){return r.Pn(e)})}).next(function(){return r.maxValue})}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(ns("LruGarbageCollector","Garbage collection skipped; disabled"),Cf.resolve(Sd)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(ns("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Sd):n.Nn(e,t)})}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return t>c.params.maximumSequenceNumbersToCollect?(ns("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)}).next(function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)}).next(function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)}).next(function(e){return s=Date.now(),ts()<=Ft.in.DEBUG&&ns("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Cf.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})})}}]),e}(),Hd=function(){function e(t,n){v(this,e),this.db=t,this.garbageCollector=function(e,t){return new zd(e,t)}(this,n)}return p(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})}},{key:"kn",value:function(e){var t=0;return this.xn(e,function(e){t++}).next(function(){return t})}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,function(e,n){return t(n)})}},{key:"addReference",value:function(e,t,n){return Gd(e,n)}},{key:"removeReference",value:function(e,t,n){return Gd(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Gd(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return Pd(e).zt(function(r){return Ad(e,r,t).next(function(e){return e&&(n=!0),Cf.resolve(!e)})}).next(function(){return n})}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,function(o,u){if(u<=t){var s=n.On(e,o).next(function(t){if(!t)return a++,r.getEntry(e,o).next(function(){return r.removeEntry(o,Es.min()),Fd(e).delete([0,Xh(o.path)])})});i.push(s)}}).next(function(){return Cf.waitFor(i)}).next(function(){return r.apply(e)}).next(function(){return a})}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Gd(e,t)}},{key:"Mn",value:function(e,t){var n,i=Fd(e),a=bs.A;return i.Wt({index:"documentTargetsIndex"},function(e,i){var o=r(e,2),u=o[0],s=(o[1],i.path),c=i.sequenceNumber;0===u?(a!==bs.A&&t(new Js(nf(n)),a),a=c,n=s):a=bs.A}).next(function(){a!==bs.A&&t(new Js(nf(n)),a)})}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Gd(e,t){return Fd(e).put(function(e,t){return{targetId:0,path:Xh(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Kd=function(){function e(){v(this,e),this.changes=new nh(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),this.changesApplied=!1}return p(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,kc.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Cf.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Wd=function(){function e(t){v(this,e),this.M=t}return p(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Qd(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Qd(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Gf(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next(function(r){return r.byteSize+=t,n.Fn(e,r)})}},{key:"getEntry",value:function(e,t){var n=this,r=kc.newInvalidDocument(t);return Qd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only($d(t))},function(e,i){r=n.$n(t,i)}).next(function(){return r})}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:kc.newInvalidDocument(t)};return Qd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only($d(t))},function(e,i){r={document:n.$n(t,i),size:Cd(i)}}).next(function(){return r})}},{key:"getEntries",value:function(e,t){var n=this,r=ih();return this.Ln(e,t,function(e,t){var i=n.$n(e,t);r=r.insert(e,i)}).next(function(){return r})}},{key:"Un",value:function(e,t){var n=this,r=ih(),i=new Rc(Js.comparator);return this.Ln(e,t,function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,Cd(t))}).next(function(){return{documents:r,qn:i}})}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return Cf.resolve();var r=new Nc(ep);t.forEach(function(e){return r=r.add(e)});var i=IDBKeyRange.bound($d(r.first()),$d(r.last())),a=r.getIterator(),o=a.getNext();return Qd(e).Wt({index:"documentKeyIndex",range:i},function(e,t,r){for(var i=Js.fromSegments([].concat(s(t.prefixPath),[t.collectionGroup,t.documentId]));o&&ep(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut($d(o)):r.done()}).next(function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null})}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Gf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Qd(e).qt(IDBKeyRange.bound(i,a,!0)).next(function(e){var t,n=ih(),i=l(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(Js.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n})}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=ih(),o=Xd(t,n),u=Xd(t,Ec.max());return Qd(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},function(e,t,n){var o=i.$n(Js.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()}).next(function(){return a})}},{key:"newChangeBuffer",value:function(e){return new Jd(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next(function(e){return e.byteSize})}},{key:"getMetadata",value:function(e){return Yd(e).get("remoteDocumentGlobalKey").next(function(e){return us(!!e),e})}},{key:"Fn",value:function(e,t){return Yd(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Fh(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Js.fromSegments(t.noDocument.path),i=Wf(t.noDocument.readTime);n=kc.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return os();var a=Js.fromSegments(t.unknownDocument.path),o=Wf(t.unknownDocument.version);n=kc.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Is(e[0],e[1]);return Es.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(Es.min()))return n}return kc.newInvalidDocument(e)}}]),e}(),Jd=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new nh(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),i}return p(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Nc(function(e,t){return xs(e.canonicalString(),t.canonicalString())});return this.changes.forEach(function(a,o){var u=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Hf(t.Kn.M,o);i=i.add(a.path.popLast());var c=Cd(s);r+=c-u.size,n.push(t.Kn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Hf(t.Kn.M,o.convertToNoDocument(Es.min()));n.push(t.Kn.addEntry(e,a,l))}}),i.forEach(function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))}),n.push(this.Kn.updateMetadata(e,r)),Cf.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next(function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document})}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next(function(e){var t=e.documents;return e.qn.forEach(function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})}),t})}}]),n}(Kd);function Yd(e){return Vf(e,"remoteDocumentGlobal")}function Qd(e){return Vf(e,"remoteDocumentsV14")}function $d(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Xd(e,t){var n=t.documentKey.path.toArray();return[e,Gf(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ep(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=xs(n[a],r[a]))return i;return(i=xs(n.length,r.length))||((i=xs(n[n.length-2],r[r.length-2]))||xs(n[n.length-1],r[r.length-1]))}var tp=function(){function e(t){v(this,e),this.M=t}return p(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Rf("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rf,{unique:!0}),e.createObjectStore("documentMutations")}(e),np(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Cf.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),np(e)),o=o.next(function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Es.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(e,t){return t.store("mutations").qt().next(function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rf,{unique:!0});var r=t.store("mutations"),i=n.map(function(e){return r.put(e)});return Cf.waitFor(i)})}(e,a)})),o=o.next(function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(o=o.next(function(){return i.Qn(a)})),n<6&&r>=6&&(o=o.next(function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)})),n<7&&r>=7&&(o=o.next(function(){return i.Wn(a)})),n<8&&r>=8&&(o=o.next(function(){return i.zn(e,a)})),n<9&&r>=9&&(o=o.next(function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(o=o.next(function(){return i.Hn(a)})),n<11&&r>=11&&(o=o.next(function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&r>=12&&(o=o.next(function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:kf});t.createIndex("collectionPathOverlayIndex",bf,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",wf,{unique:!1})}(e)})),n<13&&r>=13&&(o=o.next(function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:sf});t.createIndex("documentKeyIndex",cf),t.createIndex("collectionGroupIndex",lf)}(e)}).next(function(){return i.Jn(e,a)}).next(function(){return e.deleteObjectStore("remoteDocuments")})),n<14&&r>=14&&(o=o.next(function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:vf}).createIndex("sequenceNumberIndex",gf,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:mf}).createIndex("documentKeyIndex",yf,{unique:!1})}(e)})),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt(function(e,n){t+=Cd(n)}).next(function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next(function(n){return Cf.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next(function(r){return Cf.forEach(r,function(r){us(r.userId===n.userId);var i=Jf(t.M,r);return Ed(e,n.userId,i).next(function(){})})})})})}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(function(e){var r=[];return n.Wt(function(n,i){var a=new Ns(n),o=function(e){return[0,Xh(e)]}(a);r.push(t.get(o).next(function(n){return n?Cf.resolve():function(n){return t.put({targetId:0,path:Xh(n),sequenceNumber:e.highestListenSequenceNumber})}(a)}))}).next(function(){return Cf.waitFor(r)})})}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:pf});var n=t.store("collectionParents"),i=new yd,a=function(e){if(i.add(e)){var t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Xh(r)})}};return t.store("remoteDocuments").Wt({jt:!0},function(e,t){var n=new Ns(e);return a(n.popLast())}).next(function(){return t.store("documentMutations").Wt({jt:!0},function(e,t){var n=r(e,3),i=(n[0],n[1]),o=(n[2],nf(i));return a(o.popLast())})})}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt(function(e,r){var i=Yf(r),a=Qf(t.M,i);return n.put(a)})}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt(function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Js(Ns.fromString(i.document.name).popFirst(5)):i.noDocument?Js.fromSegments(i.noDocument.path):i.unknownDocument?Js.fromSegments(i.unknownDocument.path):os()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))}).next(function(){return Cf.waitFor(r)})}}]),e}();function np(e){e.createObjectStore("targetDocuments",{keyPath:ff}).createIndex("documentTargetsIndex",df,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hf,{unique:!0}),e.createObjectStore("targetGlobal")}var rp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ip=function(){function e(t,n,r,i,a,o,u,s,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(v(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=u,this.Xn=c,this.Zn=l,this.ts=h,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new ls(cs.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hd(this,i),this.hs=n+"main",this.M=new zf(s),this.ls=new Af(this.hs,this.ts,new tp(this.M)),this.fs=new Ld(this.referenceDelegate,this.M),this.ds=function(e){return new Wd(e)}(this.M),this._s=new td,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l&&rs("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return p(e,[{key:"start",value:function(){var e=this;return this.gs().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new ls(cs.FAILED_PRECONDITION,rp);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.fs.getHighestSequenceNumber(t)})}).then(function(t){e.es=new bs(t,e.Xn)}).then(function(){e.ns=!0}).catch(function(t){return e.ls&&e.ls.close(),Promise.reject(t)})}},{key:"Ts",value:function(e){var t,n=this;return this.cs=(t=(0,qt.Z)(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.started){t.next=2;break}return t.abrupt("return",e(r));case 2:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){var t;this.ls.Ot((t=(0,qt.Z)(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}))}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,qt.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}},e)}))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(t){return op(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next(function(){if(e.isPrimary)return e.Es(t).next(function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable(function(){return e.cs(!1)}))})}).next(function(){return e.As(t)}).next(function(n){return e.isPrimary&&!n?e.Rs(t).next(function(){return!1}):!!n&&e.bs(t).next(function(){return!0})})}).catch(function(t){if(Pf(t))return ns("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return ns("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable(function(){return e.cs(t)}),e.isPrimary=t})}},{key:"Es",value:function(e){var t=this;return ap(e).get("owner").next(function(e){return Cf.resolve(t.Ps(e))})}},{key:"Vs",value:function(e){return op(e).delete(this.clientId)}},{key:"vs",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isPrimary||e.Ss(e.us,18e5)){t.next=6;break}return e.us=Date.now(),t.next=4,e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var n=Vf(t,"clientMetadata");return n.qt().next(function(t){var r=e.Ds(t,18e5),i=t.filter(function(e){return-1===r.indexOf(e)});return Cf.forEach(i,function(e){return n.delete(e.clientId)}).next(function(){return i})})}).catch(function(){return[]});case 4:if(n=t.sent,e.ws){r=l(n);try{for(r.s();!(i=r.n()).done;)a=i.value,e.ws.removeItem(e.Cs(a.clientId))}catch(o){r.e(o)}finally{r.f()}}case 6:case"end":return t.stop()}},t)}))()}},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.gs().then(function(){return e.vs()}).then(function(){return e.Is()})})}},{key:"Ps",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?Cf.resolve(!0):ap(e).get("owner").next(function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.Ps(n)&&t.networkEnabled)return!0;if(!t.Ps(n)){if(!n.allowTabSynchronization)throw new ls(cs.FAILED_PRECONDITION,rp);return!1}}return!(!t.networkEnabled||!t.inForeground)||op(e).qt().next(function(e){return void 0===t.Ds(e,5e3).find(function(e){if(t.clientId!==e.clientId){var n=!t.inForeground&&e.inForeground,r=t.networkEnabled===e.networkEnabled;if(!t.networkEnabled&&e.networkEnabled||n&&r)return!0}return!1})})}).next(function(e){return t.isPrimary!==e&&ns("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e})}},{key:"shutdown",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),t.next=7,e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],function(t){var n=new Ff(t,bs.A);return e.Rs(n).next(function(){return e.Vs(n)})});case 7:e.ls.close(),e.Os();case 9:case"end":return t.stop()}},t)}))()}},{key:"Ds",value:function(e,t){var n=this;return e.filter(function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)})}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return op(t).qt().next(function(t){return e.Ds(t,18e5).map(function(e){return e.clientId})})})}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return Rd.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new bd(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return id.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;ns("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.ts)?Sf:13===i?Tf:12===i?xf:11===i?_f:void os();return this.ls.runTransaction(e,o,u,function(i){return a=new Ff(i,r.es?r.es.next():bs.A),"readwrite-primary"===t?r.Es(a).next(function(e){return!!e||r.As(a)}).next(function(t){if(!t)throw rs("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable(function(){return r.cs(!1)}),new ls(cs.FAILED_PRECONDITION,If);return n(a)}).next(function(e){return r.bs(a).next(function(){return e})}):r.$s(a).next(function(){return n(a)})}).then(function(e){return a.raiseOnCommittedEvent(),e})}},{key:"$s",value:function(e){var t=this;return ap(e).get("owner").next(function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.Ps(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new ls(cs.FAILED_PRECONDITION,rp)})}},{key:"bs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ap(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=ap(e);return n.get("owner").next(function(e){return t.Ps(e)?(ns("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Cf.resolve()})}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t||e>n&&(rs("Detected an update time that is in the future: ".concat(e," > ").concat(n)),1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()})},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),(0,Mt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return ns("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return rs("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(ii){rs("Failed to set zombie client id.",ii)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(ii){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return Af.vt()}}]),e}();function ap(e){return Vf(e,"owner")}function op(e){return Vf(e,"clientMetadata")}function up(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var sp=function(){function e(t,n,r){v(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return p(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.Us(e,t,r)})}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next(function(e){var t,r=l(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e})}},{key:"qs",value:function(e,t){e.forEach(function(e,n){var r,i=l(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}})}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next(function(t){return n.Gs(e,t).next(function(){return t})})}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(e){return n.qs(t,e)})}},{key:"Qs",value:function(e,t,n){return function(e){return Js.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):sl(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new Js(t)).next(function(e){var t=oh();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=oh();return this.indexManager.getCollectionParents(e,i).next(function(o){return Cf.forEach(o,function(o){var u=function(e,t){return new rl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,u,n).next(function(e){e.forEach(function(e,t){a=a.insert(e,t)})})}).next(function(){return a})})}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next(function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)}).next(function(e){var t,n=l(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=l(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=kc.newInvalidDocument(s),r=r.insert(s,c)),Zl(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(h){o.e(h)}finally{o.f()}}}catch(h){n.e(h)}finally{n.f()}}).next(function(){return r.forEach(function(e,n){vl(t,n)||(r=r.remove(e))}),r})}}]),e}(),cp=function(){function e(t,n,r,i){v(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return p(e,null,[{key:"Ys",value:function(t,n){var r,i=lh(),a=lh(),o=l(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),lp=function(){function e(){v(this,e),this.Xs=!1}return p(e,[{key:"initialize",value:function(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}},{key:"Qs",value:function(e,t,n,r){var i=this;return this.ti(e,t).next(function(a){return a||i.ei(e,t,r,n)}).next(function(n){return n||i.ni(e,t)})}},{key:"ti",value:function(e,t){return Cf.resolve(null)}},{key:"ei",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Es.min())?this.ni(e,t):this.Zs.Ks(e,n).next(function(a){var o=i.si(t,a);return i.ii(t,o,n,r)?i.ni(e,t):(ts()<=Ft.in.DEBUG&&ns("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),pl(t)),i.ri(e,o,t,Sc(r,-1)))})}},{key:"si",value:function(e,t){var n=new Nc(ml(e));return t.forEach(function(t,r){vl(e,r)&&(n=n.add(r))}),n}},{key:"ii",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ni",value:function(e,t){return ts()<=Ft.in.DEBUG&&ns("QueryEngine","Using full collection scan to execute query:",pl(t)),this.Zs.Qs(e,t,Ec.min())}},{key:"ri",value:function(e,t,n,r){return this.Zs.Qs(e,n,r).next(function(e){return t.forEach(function(t){e=e.insert(t.key,t)}),e})}}]),e}(),hp=function(){function e(t,n,r,i){v(this,e),this.persistence=t,this.oi=n,this.M=i,this.ui=new Rc(xs),this.ai=new nh(function(e){return Uc(e)},Fc),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(r)}return p(e,[{key:"li",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new sp(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.ui)})}}]),e}();function fp(e,t,n,r){return new hp(e,t,n,r)}function dp(e,t){return pp.apply(this,arguments)}function pp(){return(pp=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=ss(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",function(e){var t;return r.Bs.getAllMutationBatches(e).next(function(i){return t=i,r.li(n),r.Bs.getAllMutationBatches(e)}).next(function(n){var i,a=[],o=[],u=lh(),s=l(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var h,f=l(c.mutations);try{for(f.s();!(h=f.n()).done;){var d=h.value;u=u.add(d.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){s.e(b)}finally{s.f()}var p,v=l(n);try{for(v.s();!(p=v.n()).done;){var g=p.value;o.push(g.batchId);var m,y=l(g.mutations);try{for(y.s();!(m=y.n()).done;){var k=m.value;u=u.add(k.key)}}catch(b){y.e(b)}finally{y.f()}}}catch(b){v.e(b)}finally{v.f()}return r.fi.Ks(e,u).next(function(e){return{di:e,removedBatchIds:a,addedBatchIds:o}})})});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function vp(e,t){var n=ss(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(e){var r=t.batch.keys(),i=n.hi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Cf.resolve();return a.forEach(function(e){o=o.next(function(){return r.getEntry(t,e)}).next(function(t){var a=n.docVersions.get(e);us(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(function(){return e.Bs.removeMutationBatch(t,i)})}(n,e,t,i).next(function(){return i.apply(e)}).next(function(){return n.Bs.performConsistencyCheck(e)}).next(function(){return n.fi.Ks(e,r)})})}function gp(e){var t=ss(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.fs.getLastRemoteSnapshotVersion(e)})}function mp(e,t){var n=ss(e),r=t.snapshotVersion,i=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(e){var a=n.hi.newChangeBuffer({trackRemovals:!0});i=n.ui;var o=[];t.targetChanges.forEach(function(a,u){var s=i.get(u);if(s){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,u).next(function(){return n.fs.addMatchingKeys(e,a.addedDocuments,u)}));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Ms.EMPTY_BYTE_STRING,Es.min()).withLastLimboFreeSnapshotVersion(Es.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,a)&&o.push(n.fs.updateTargetData(e,c))}});var u=ih();if(t.documentUpdates.forEach(function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(yp(e,a,t.documentUpdates).next(function(e){u=e})),!r.isEqual(Es.min())){var s=n.fs.getLastRemoteSnapshotVersion(e).next(function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)});o.push(s)}return Cf.waitFor(o).next(function(){return a.apply(e)}).next(function(){return n.fi.Gs(e,u)}).next(function(){return u})}).then(function(e){return n.ui=i,e})}function yp(e,t,n){var r=lh();return n.forEach(function(e){return r=r.add(e)}),t.getEntries(e,r).next(function(e){var r=ih();return n.forEach(function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Es.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):ns("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),r})}function kp(e,t){var n=ss(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)})}function bp(e,t){var n=ss(e);return n.persistence.runTransaction("Allocate target","readwrite",function(e){var r;return n.fs.getTargetData(e,t).next(function(i){return i?(r=i,Cf.resolve(r)):n.fs.allocateTargetId(e).next(function(i){return r=new Bf(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next(function(){return r})})})}).then(function(e){var r=n.ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ui=n.ui.insert(e.targetId,e),n.ai.set(t,e.targetId)),e})}function wp(e,t,n){return _p.apply(this,arguments)}function _p(){return(_p=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ss(t),a=i.ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,function(e){return i.persistence.referenceDelegate.removeTarget(e,a)});case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Pf(e.t1)){e.next=12;break}throw e.t1;case 12:ns("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ui=i.ui.remove(n),i.ai.delete(a.target);case 14:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function xp(e,t,n){var r=ss(e),i=Es.min(),a=lh();return r.persistence.runTransaction("Execute query","readonly",function(e){return function(e,t,n){var r=ss(e),i=r.ai.get(n);return void 0!==i?Cf.resolve(r.ui.get(i)):r.fs.getTargetData(t,n)}(r,e,ll(t)).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next(function(e){a=e})}).next(function(){return r.oi.Qs(e,t,n?i:Es.min(),n?a:lh())}).next(function(e){return Ip(r,gl(t),e),{documents:e,_i:a}})})}function Tp(e,t){var n=ss(e),r=ss(n.fs),i=n.ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(e){return r.Et(e,t).next(function(e){return e?e.target:null})})}function Sp(e,t){var n=ss(e),r=n.ci.get(t)||Es.min();return n.persistence.runTransaction("Get new document changes","readonly",function(e){return n.hi.getAllFromCollectionGroup(e,t,Sc(r,-1),Number.MAX_SAFE_INTEGER)}).then(function(e){return Ip(n,t,e),e})}function Ip(e,t,n){var r=Es.min();n.forEach(function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.ci.set(t,r)}function Ep(){return(Ep=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,u,s,c,h,f,d,p,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=ss(t),o=lh(),u=ih(),s=l(r);try{for(s.s();!(c=s.n()).done;)h=c.value,f=n.wi(h.metadata.name),h.document&&(o=o.add(f)),(d=n.mi(h)).setReadTime(n.gi(h.metadata.readTime)),u=u.insert(f,d)}catch(g){s.e(g)}finally{s.f()}return p=a.hi.newChangeBuffer({trackRemovals:!0}),e.next=7,bp(a,function(e){return ll(al(Ns.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return yp(e,p,u).next(function(t){return p.apply(e),t}).next(function(t){return a.fs.removeMatchingKeysForTargetId(e,v.targetId).next(function(){return a.fs.addMatchingKeys(e,o,v.targetId)}).next(function(){return a.fi.Gs(e,t)}).next(function(){return t})})}));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Cp(e,t){return Rp.apply(this,arguments)}function Rp(){return(Rp=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:lh(),e.next=3,bp(t,ll($f(n.bundledQuery)));case 3:return i=e.sent,a=ss(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",function(e){var t=Ch(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(Ms.EMPTY_BYTE_STRING,t);return a.ui=a.ui.insert(o.targetId,o),a.fs.updateTargetData(e,o).next(function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)}).next(function(){return a.fs.addMatchingKeys(e,r,i.targetId)}).next(function(){return a._s.saveNamedQuery(e,n)})}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Ap=function(){function e(t){v(this,e),this.M=t,this.yi=new Map,this.pi=new Map}return p(e,[{key:"getBundleMetadata",value:function(e,t){return Cf.resolve(this.yi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.yi.set(t.id,{id:(n=t).id,version:n.version,createTime:Ch(n.createTime)}),Cf.resolve()}},{key:"getNamedQuery",value:function(e,t){return Cf.resolve(this.pi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.pi.set(t.name,function(e){return{name:e.name,query:$f(e.bundledQuery),readTime:Ch(e.readTime)}}(t)),Cf.resolve()}}]),e}(),Op=function(){function e(){v(this,e),this.overlays=new Rc(Js.comparator),this.Ii=new Map}return p(e,[{key:"getOverlay",value:function(e,t){return Cf.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach(function(n,i){r.Xt(e,t,i)}),Cf.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Ii.get(n);return void 0!==i&&(i.forEach(function(e){return r.overlays=r.overlays.remove(e)}),this.Ii.delete(n)),Cf.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=uh(),i=t.length+1,a=new Js(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Cf.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Rc(function(e,t){return e-t}),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=uh(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=uh(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach(function(e,t){return s.set(e,t)}),!(s.size()>=r)););return Cf.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Ii.get(r.largestBatchId).delete(n.key);this.Ii.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new jf(t,n));var a=this.Ii.get(t);void 0===a&&(a=lh(),this.Ii.set(t,a)),this.Ii.set(t,a.add(n.key))}}}]),e}(),Np=function(){function e(){v(this,e),this.Ti=new Nc(Pp.Ei),this.Ai=new Nc(Pp.Ri)}return p(e,[{key:"isEmpty",value:function(){return this.Ti.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Pp(e,t);this.Ti=this.Ti.add(n),this.Ai=this.Ai.add(n)}},{key:"bi",value:function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})}},{key:"removeReference",value:function(e,t){this.Pi(new Pp(e,t))}},{key:"Vi",value:function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})}},{key:"vi",value:function(e){var t=this,n=new Js(new Ns([])),r=new Pp(n,e),i=new Pp(n,e+1),a=[];return this.Ai.forEachInRange([r,i],function(e){t.Pi(e),a.push(e.key)}),a}},{key:"Si",value:function(){var e=this;this.Ti.forEach(function(t){return e.Pi(t)})}},{key:"Pi",value:function(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}},{key:"Di",value:function(e){var t=new Js(new Ns([])),n=new Pp(t,e),r=new Pp(t,e+1),i=lh();return this.Ai.forEachInRange([n,r],function(e){i=i.add(e.key)}),i}},{key:"containsKey",value:function(e){var t=new Pp(e,0),n=this.Ti.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Pp=function(){function e(t,n){v(this,e),this.key=t,this.Ci=n}return p(e,null,[{key:"Ei",value:function(e,t){return Js.comparator(e.key,t.key)||xs(e.Ci,t.Ci)}},{key:"Ri",value:function(e,t){return xs(e.Ci,t.Ci)||Js.comparator(e.key,t.key)}}]),e}(),Dp=function(){function e(t,n){v(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.xi=1,this.Ni=new Nc(Pp.Ei)}return p(e,[{key:"checkEmpty",value:function(e){return Cf.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.xi;this.xi++;var a=new Zf(i,t,n,r);this.Bs.push(a);var o,u=l(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Ni=this.Ni.add(new Pp(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Cf.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Cf.resolve(this.ki(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this.Mi(t+1),r=n<0?0:n;return Cf.resolve(this.Bs.length>r?this.Bs[r]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Cf.resolve(0===this.Bs.length?-1:this.xi-1)}},{key:"getAllMutationBatches",value:function(e){return Cf.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Pp(t,0),i=new Pp(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],function(e){var t=n.ki(e.Ci);a.push(t)}),Cf.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Nc(xs);return t.forEach(function(e){var t=new Pp(e,0),i=new Pp(e,Number.POSITIVE_INFINITY);n.Ni.forEachInRange([t,i],function(e){r=r.add(e.Ci)})}),Cf.resolve(this.Oi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Js.isDocumentKey(i)||(i=i.child(""));var a=new Pp(new Js(i),0),o=new Nc(xs);return this.Ni.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Ci)),!0)},a),Cf.resolve(this.Oi(o))}},{key:"Oi",value:function(e){var t=this,n=[];return e.forEach(function(e){var r=t.ki(e);null!==r&&n.push(r)}),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;us(0===this.Fi(t.batchId,"removed")),this.Bs.shift();var r=this.Ni;return Cf.forEach(t.mutations,function(i){var a=new Pp(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(function(){n.Ni=r})}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Pp(t,0),r=this.Ni.firstAfterOrEqual(n);return Cf.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return Cf.resolve()}},{key:"Fi",value:function(e,t){return this.Mi(e)}},{key:"Mi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"ki",value:function(e){var t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),Lp=function(){function e(t){v(this,e),this.$i=t,this.docs=new Rc(Js.comparator),this.size=0}return p(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.$i(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Cf.resolve(n?n.document.mutableCopy():kc.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=ih();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():kc.newInvalidDocument(e))}),Cf.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=ih(),i=new Js(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Cc(Ic(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Cf.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){os()}},{key:"Bi",value:function(e,t){return Cf.forEach(this.docs,function(e){return t(e)})}},{key:"newChangeBuffer",value:function(e){return new Mp(this)}},{key:"getSize",value:function(e){return Cf.resolve(this.size)}}]),e}(),Mp=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this)).Kn=e,r}return p(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach(function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)}),Cf.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(Kd),Up=function(){function e(t){v(this,e),this.persistence=t,this.Li=new nh(function(e){return Uc(e)},Fc),this.lastRemoteSnapshotVersion=Es.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Np,this.targetCount=0,this.Ki=Dd.gn()}return p(e,[{key:"forEachTarget",value:function(e,t){return this.Li.forEach(function(e,n){return t(n)}),Cf.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Cf.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Cf.resolve(this.Ui)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ki.next(),Cf.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ui&&(this.Ui=t),Cf.resolve()}},{key:"Tn",value:function(e){this.Li.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ki=new Dd(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,Cf.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),Cf.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,Cf.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Li.forEach(function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Li.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),Cf.waitFor(a).next(function(){return i})}},{key:"getTargetCount",value:function(e){return Cf.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Li.get(t)||null;return Cf.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.qi.bi(t,n),Cf.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.qi.Vi(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.markPotentiallyOrphaned(e,t))}),Cf.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.qi.vi(t),Cf.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.qi.Di(t);return Cf.resolve(n)}},{key:"containsKey",value:function(e,t){return Cf.resolve(this.qi.containsKey(t))}}]),e}(),Fp=function(){function e(t,n){var r=this;v(this,e),this.Gi={},this.overlays={},this.es=new bs(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new Up(this),this.indexManager=new md,this.ds=new Lp(function(e){return r.referenceDelegate.Qi(e)}),this.M=new zf(n),this._s=new Ap(this.M)}return p(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Op,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Gi[e.toKey()];return n||(n=new Dp(t,this.referenceDelegate),this.Gi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;ns("MemoryPersistence","Starting transaction:",e);var i=new Vp(this.es.next());return this.referenceDelegate.ji(),n(i).next(function(e){return r.referenceDelegate.Wi(i).next(function(){return e})}).toPromise().then(function(e){return i.raiseOnCommittedEvent(),e})}},{key:"zi",value:function(e,t){return Cf.or(Object.values(this.Gi).map(function(n){return function(){return n.containsKey(e,t)}}))}}]),e}(),Vp=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return p(n)}(Ef),Zp=function(){function e(t){v(this,e),this.persistence=t,this.Hi=new Np,this.Ji=null}return p(e,[{key:"Xi",get:function(){if(this.Ji)return this.Ji;throw os()}},{key:"addReference",value:function(e,t,n){return this.Hi.addReference(n,t),this.Xi.delete(n.toString()),Cf.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Hi.removeReference(n,t),this.Xi.add(n.toString()),Cf.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Xi.add(t.toString()),Cf.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Hi.vi(t.targetId).forEach(function(e){return n.Xi.add(e.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.Xi.add(e.toString())})}).next(function(){return r.removeTargetData(e,t)})}},{key:"ji",value:function(){this.Ji=new Set}},{key:"Wi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Cf.forEach(this.Xi,function(r){var i=Js.fromPath(r);return t.Zi(e,i).next(function(e){e||n.removeEntry(i,Es.min())})}).next(function(){return t.Ji=null,n.apply(e)})}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zi(e,t).next(function(e){e?n.Xi.delete(t.toString()):n.Xi.add(t.toString())})}},{key:"Qi",value:function(e){return 0}},{key:"Zi",value:function(e,t){var n=this;return Cf.or([function(){return Cf.resolve(n.Hi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zi(e,t)}])}}],[{key:"Yi",value:function(t){return new e(t)}}]),e}();function qp(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function jp(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Bp(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var zp=function(){function e(t,n,r,i){v(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return p(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new ls(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(rs("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Hp=function(){function e(t,n,r){v(this,e),this.targetId=t,this.state=n,this.error=r}return p(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ls(i.error.code,i.error.message))),a?new e(t,i.state,r):(rs("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Gp=function(){function e(t,n){v(this,e),this.clientId=t,this.activeTargetIds=n}return p(e,null,[{key:"tr",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=fh(),o=0;i&&o<r.activeTargetIds.length;++o)i=Ws(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(rs("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Kp=function(){function e(t,n){v(this,e),this.clientId=t,this.onlineState=n}return p(e,null,[{key:"tr",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(rs("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Wp=function(){function e(){v(this,e),this.activeTargetIds=fh()}return p(e,[{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"er",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Jp=function(){function e(t,n,r,i,a){v(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Rc(xs),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=qp(this.persistenceKey,this.ir),this.lr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.ir,new Wp),this.dr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this._r=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.wr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.mr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.gr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}return p(e,[{key:"start",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a,o,u,s,c,h,f,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.syncEngine.Fs();case 2:n=t.sent,r=l(n),t.prev=4,r.s();case 6:if((i=r.n()).done){t.next=14;break}if((a=i.value)!==e.ir){t.next=10;break}return t.abrupt("continue",12);case 10:(o=e.getItem(qp(e.persistenceKey,a)))&&(u=Gp.tr(a,o))&&(e.ar=e.ar.insert(u.clientId,u));case 12:t.next=6;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(4),r.e(t.t0);case 19:return t.prev=19,r.f(),t.finish(19);case 22:e.yr(),(s=e.storage.getItem(e.mr))&&(c=e.pr(s))&&e.Ir(c),h=l(e.cr);try{for(h.s();!(f=h.n()).done;)d=f.value,e.ur(d)}catch(p){h.e(p)}finally{h.f()}e.cr=[],e.window.addEventListener("pagehide",function(){return e.shutdown()}),e.started=!0;case 28:case"end":return t.stop()}},t,null,[[4,16,19,22]])}))()}},{key:"writeSequenceNumber",value:function(e){this.setItem(this.lr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Tr(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach(function(n,r){r.activeTargetIds.has(e)&&(t=!0)}),t}},{key:"addPendingMutation",value:function(e){this.Er(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Er(e,t,n),this.Ar(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Bp(this.persistenceKey,e));if(n){var r=Hp.tr(e,n);r&&(t=r.state)}}return this.Rr.nr(e),this.yr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Rr.sr(e),this.yr()}},{key:"isLocalQueryTarget",value:function(e){return this.Rr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Bp(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.br(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach(function(e){r.Ar(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})}},{key:"setOnlineState",value:function(e){this.Pr(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return ns("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){ns("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){ns("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ur",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(ns("SharedClientState","EVENT",n.key,n.newValue),n.key===this.hr)return void rs("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,qt.Z)(regeneratorRuntime.mark(function e(){var r,i,a,o,u,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.dr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Sr(r,null));case 6:if(!(i=t.Dr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Sr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t._r.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Cr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Nr(a));case 16:e.next=41;break;case 18:if(!t.wr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.kr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(o));case 23:e.next=41;break;case 25:if(n.key!==t.mr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.pr(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ir(u));case 30:e.next=41;break;case 32:if(n.key!==t.lr){e.next=37;break}(s=function(e){var t=bs.A;if(null!=e)try{var n=JSON.parse(e);us("number"==typeof n),t=n}catch(e){rs("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==bs.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.gr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map(function(e){return t.syncEngine.Fr(e)}));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}},e)})))}}},{key:"Rr",get:function(){return this.ar.get(this.ir)}},{key:"yr",value:function(){this.setItem(this.hr,this.Rr.er())}},{key:"Er",value:function(e,t,n){var r=new zp(this.currentUser,e,t,n),i=jp(this.persistenceKey,this.currentUser,e);this.setItem(i,r.er())}},{key:"Ar",value:function(e){var t=jp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Pr",value:function(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}},{key:"br",value:function(e,t,n){var r=Bp(this.persistenceKey,e),i=new Hp(e,t,n);this.setItem(r,i.er())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}},{key:"vr",value:function(e){var t=this.dr.exec(e);return t?t[1]:null}},{key:"Dr",value:function(e,t){var n=this.vr(e);return Gp.tr(n,t)}},{key:"Cr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return zp.tr(new $u(void 0!==n[2]?n[2]:null),r,t)}},{key:"kr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]);return Hp.tr(r,t)}},{key:"pr",value:function(e){return Kp.tr(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Nr",value:function(e){var t=this;return(0,qt.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.user.uid!==t.currentUser.uid){n.next=2;break}return n.abrupt("return",t.syncEngine.$r(e.batchId,e.state,e.error));case 2:ns("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid));case 3:case"end":return n.stop()}},n)}))()}},{key:"Mr",value:function(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}},{key:"Sr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),o=[],u=[];return a.forEach(function(e){i.has(e)||o.push(e)}),i.forEach(function(e){a.has(e)||u.push(e)}),this.syncEngine.Lr(o,u).then(function(){n.ar=r})}},{key:"Ir",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Tr",value:function(e){var t=fh();return e.forEach(function(e,n){t=t.unionWith(n.activeTargetIds)}),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Yp=function(){function e(){v(this,e),this.Ur=new Wp,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return p(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.nr(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.sr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new Wp,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Qp=function(){function e(){v(this,e)}return p(e,[{key:"Kr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),$p=function(){function e(){var t=this;v(this,e),this.Gr=function(){return t.Qr()},this.jr=function(){return t.Wr()},this.zr=[],this.Hr()}return p(e,[{key:"Kr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}},{key:"Hr",value:function(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}},{key:"Qr",value:function(){ns("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=l(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){ns("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=l(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Xp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ev=function(){function e(t){v(this,e),this.Jr=t.Jr,this.Yr=t.Yr}return p(e,[{key:"Xr",value:function(e){this.Zr=e}},{key:"eo",value:function(e){this.no=e}},{key:"onMessage",value:function(e){this.so=e}},{key:"close",value:function(){this.Yr()}},{key:"send",value:function(e){this.Jr(e)}},{key:"io",value:function(){this.Zr()}},{key:"ro",value:function(e){this.no(e)}},{key:"oo",value:function(e){this.so(e)}}]),e}(),tv=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return p(n,[{key:"fo",value:function(e,t,n,r){return new Promise(function(i,a){var o=new Qu;o.listenOnce(Gu.COMPLETE,function(){try{switch(o.getLastErrorCode()){case Hu.NO_ERROR:var t=o.getResponseJson();ns("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Hu.TIMEOUT:ns("Connection",'RPC "'+e+'" timed out'),a(new ls(cs.DEADLINE_EXCEEDED,"Request time out"));break;case Hu.HTTP_ERROR:var n=o.getStatus();if(ns("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(cs).indexOf(t)>=0?t:cs.UNKNOWN}(r.status);a(new ls(u,r.message))}else a(new ls(cs.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new ls(cs.UNAVAILABLE,"Connection failed."));break;default:os()}}finally{ns("Connection",'RPC "'+e+'" completed.')}});var u=JSON.stringify(r);o.send(t,"POST",u,n,15)})}},{key:"wo",value:function(e,t,n){var r=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Bu(),a=zu(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Ju({})),this.lo(o.initMessageHeaders,t,n),(0,Mt.uI)()||(0,Mt.b$)()||(0,Mt.d)()||(0,Mt.w1)()||(0,Mt.Mn)()||(0,Mt.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");ns("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,h=new ev({Jr:function(e){l?ns("Connection","Not sending because WebChannel is closed:",e):(c||(ns("Connection","Opening WebChannel transport."),s.open(),c=!0),ns("Connection","WebChannel sending:",e),s.send(e))},Yr:function(){return s.close()}}),f=function(e,t,n){e.listen(t,function(e){try{n(e)}catch(e){setTimeout(function(){throw e},0)}})};return f(s,Yu.EventType.OPEN,function(){l||ns("Connection","WebChannel transport opened.")}),f(s,Yu.EventType.CLOSE,function(){l||(l=!0,ns("Connection","WebChannel transport closed"),h.ro())}),f(s,Yu.EventType.ERROR,function(e){l||(l=!0,is("Connection","WebChannel transport errored:",e),h.ro(new ls(cs.UNAVAILABLE,"The operation could not be completed")))}),f(s,Yu.EventType.MESSAGE,function(e){var t;if(!l){var n=e.data[0];us(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){ns("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Jl[e];if(void 0!==t)return th(t)}(a),u=i.message;void 0===o&&(o=cs.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,h.ro(new ls(o,u)),s.close()}else ns("Connection","WebChannel received:",n),h.oo(n)}}),f(a,Ku.STAT_EVENT,function(e){e.stat===Wu.PROXY?ns("Connection","Detected buffering proxy"):e.stat===Wu.NOPROXY&&ns("Connection","Detected no buffering proxy")}),setTimeout(function(){h.io()},0),h}}]),n}(function(){function e(t){v(this,e),this.databaseInfo=t,this.databaseId=t.databaseId,this.uo=(t.ssl?"https":"http")+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return p(e,[{key:"co",value:function(e,t,n,r,i){var a=this.ho(e,t);ns("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then(function(e){return ns("RestConnection","Received: ",e),e},function(t){throw is("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t})}},{key:"_o",value:function(e,t,n,r,i){return this.co(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Xu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(function(t,n){return e[n]=t}),n&&n.headers.forEach(function(t,n){return e[n]=t})}},{key:"ho",value:function(e,t){return"".concat(this.uo,"/v1/").concat(t,":").concat(Xp[e])}}]),e}());function nv(){return"undefined"!=typeof window?window:null}function rv(){return"undefined"!=typeof document?document:null}function iv(e){return new Th(e,!0)}var av=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;v(this,e),this.Yn=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return p(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&ns("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,function(){return t.Eo=Date.now(),e()}),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),ov=function(){function e(t,n,r,i,a,o,u,s){v(this,e),this.Yn=t,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new av(t,n)}return p(e,[{key:"ko",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.ko(),!t.t0){t.next=4;break}return t.next=4,e.close(0);case 4:case"end":return t.stop()}},t)}))()}},{key:"Fo",value:function(){this.state=0,this.No.reset()}},{key:"$o",value:function(){var e=this;this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,function(){return e.Bo()}))}},{key:"Lo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Bo",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.Mo()){t.next=2;break}return t.abrupt("return",e.close(0));case 2:case"end":return t.stop()}},t)}))()}},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"qo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"close",value:function(e,t){var n=this;return(0,qt.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n.Uo(),n.qo(),n.No.cancel(),n.Do++,4!==e?n.No.reset():t&&t.code===cs.RESOURCE_EXHAUSTED?(rs(t.toString()),rs("Using maximum backoff delay to prevent overloading the backend."),n.No.Ao()):t&&t.code===cs.UNAUTHENTICATED&&3!==n.state&&(n.authCredentialsProvider.invalidateToken(),n.appCheckCredentialsProvider.invalidateToken()),null!==n.stream&&(n.Ko(),n.stream.close(),n.stream=null),n.state=e,r.next=9,n.listener.eo(t);case 9:case"end":return r.stop()}},r)}))()}},{key:"Ko",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(function(t){var i=r(t,2),a=i[0],o=i[1];e.Do===n&&e.Qo(a,o)},function(n){t(function(){var t=new ls(cs.UNKNOWN,"Fetching auth token failed: "+n.message);return e.jo(t)})})}},{key:"Qo",value:function(e,t){var n=this,r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(function(){r(function(){return n.state=2,n.xo=n.Yn.enqueueAfterDelay(n.vo,1e4,function(){return n.Mo()&&(n.state=3),Promise.resolve()}),n.listener.Xr()})}),this.stream.eo(function(e){r(function(){return n.jo(e)})}),this.stream.onMessage(function(e){r(function(){return n.onMessage(e)})})}},{key:"Oo",value:function(){var e=this;this.state=5,this.No.Ro((0,qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}},t)})))}},{key:"jo",value:function(e){return ns("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Go",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget(function(){return t.Do===e?n():(ns("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}}}]),e}(),uv=function(e){g(n,e);var t=m(n);function n(e,r,i,a,o,u){var s;return v(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).M=o,s}return p(n,[{key:"Wo",value:function(e,t){return this.So.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.No.reset();var t=function(e,t){var n;if("targetChange"in t){var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:os()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(us(void 0===t||"string"==typeof t),Ms.fromBase64String(t||"")):(us(void 0===t||t instanceof Uint8Array),Ms.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?cs.UNKNOWN:th(e.code);return new ls(t,e.message||"")}(o);n=new mh(r,i,a,u||null)}else if("documentChange"in t){var s=t.documentChange,c=Nh(e,s.document.name),l=Ch(s.document.updateTime),h=new mc({mapValue:{fields:s.document.fields}}),f=kc.newFoundDocument(c,l,h);n=new vh(s.targetIds||[],s.removedTargetIds||[],f.key,f)}else if("documentDelete"in t){var d=t.documentDelete,p=Nh(e,d.document),v=d.readTime?Ch(d.readTime):Es.min(),g=kc.newNoDocument(p,v);n=new vh([],d.removedTargetIds||[],g.key,g)}else if("documentRemove"in t){var m=t.documentRemove,y=Nh(e,m.document);n=new vh([],m.removedTargetIds||[],y,null)}else{if(!("filter"in t))return os();var k=t.filter,b=new Xl(k.count||0);n=new gh(k.targetId,b)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Es.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Es.min():t.readTime?Ch(t.readTime):Es.min()}(e);return this.listener.zo(t,n)}},{key:"Ho",value:function(e){var t={};t.database=Lh(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=Vc(r)?{documents:qh(e,r)}:{query:jh(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Ih(e,t.resumeToken):t.snapshotVersion.compareTo(Es.min())>0&&(n.readTime=Sh(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return os()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);n&&(t.labels=n),this.Lo(t)}},{key:"Jo",value:function(e){var t={};t.database=Lh(this.M),t.removeTarget=e,this.Lo(t)}}]),n}(ov),sv=function(e){g(n,e);var t=m(n);function n(e,r,i,a,o,u){var s;return v(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).M=o,s.Yo=!1,s}return p(n,[{key:"Xo",get:function(){return this.Yo}},{key:"start",value:function(){this.Yo=!1,this.lastStreamToken=void 0,o(T(n.prototype),"start",this).call(this)}},{key:"Ko",value:function(){this.Yo&&this.Zo([])}},{key:"Wo",value:function(e,t){return this.So.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(us(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();var t=function(e,t){return e&&e.length>0?(us(void 0!==t),e.map(function(e){return function(e,t){var n=Ch(e.updateTime?e.updateTime:t);return n.isEqual(Es.min())&&(n=Ch(t)),new Ll(n,e.transformResults||[])}(e,t)})):[]}(e.writeResults,e.commitTime),n=Ch(e.commitTime);return this.listener.tu(n,t)}return us(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}},{key:"nu",value:function(){var e={};e.database=Lh(this.M),this.Lo(e)}},{key:"Zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map(function(e){return Vh(t.M,e)})};this.Lo(n)}}]),n}(ov),cv=function(e){g(n,e);var t=m(n);function n(e,r,i,a){var o;return v(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.So=i,o.M=a,o.su=!1,o}return p(n,[{key:"iu",value:function(){if(this.su)throw new ls(cs.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var i=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(function(a){var o=r(a,2),u=o[0],s=o[1];return i.So.co(e,t,n,u,s)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===cs.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new ls(cs.UNKNOWN,e.toString())})}},{key:"_o",value:function(e,t,n){var i=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(function(a){var o=r(a,2),u=o[0],s=o[1];return i.So._o(e,t,n,u,s)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===cs.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new ls(cs.UNKNOWN,e.toString())})}},{key:"terminate",value:function(){this.su=!0}}]),n}(function(){return p(function e(){v(this,e)})}()),lv=function(){function e(t,n){v(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}return p(e,[{key:"au",value:function(){var e=this;0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.ou=null,e.hu("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()}))}},{key:"lu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"hu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.uu?(rs(t),this.uu=!1):ns("OnlineStateTracker",t)}},{key:"fu",value:function(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}]),e}(),hv=p(function e(t,n,r,i,a){v(this,e);var o=this;this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr(function(e){r.enqueueAndForget((0,qt.Z)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=_v(o),!e.t0){e.next=5;break}return ns("RemoteStore","Restarting streams for network reachability change."),e.next=5,(t=(0,qt.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=ss(t)).wu.add(4),e.next=4,pv(n);case 4:return n.yu.set("Unknown"),n.wu.delete(4),e.next=8,fv(n);case 8:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})(o);case 5:case"end":return e.stop()}},e)})))}),this.yu=new lv(r,i)});function fv(e){return dv.apply(this,arguments)}function dv(){return(dv=(0,qt.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!_v(t)){e.next=18;break}n=l(t.mu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[2,12,15,18]])}))).apply(this,arguments)}function pv(e){return vv.apply(this,arguments)}function vv(){return(vv=(0,qt.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=l(t.mu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[1,11,14,17]])}))).apply(this,arguments)}function gv(e,t){var n=ss(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),wv(n)?bv(n):Qv(n).Mo()&&yv(n,t))}function mv(e,t){var n=ss(e),r=Qv(n);n._u.delete(t),r.Mo()&&kv(n,t),0===n._u.size&&(r.Mo()?r.$o():_v(n)&&n.yu.set("Unknown"))}function yv(e,t){e.pu.Z(t.targetId),Qv(e).Ho(t)}function kv(e,t){e.pu.Z(t),Qv(e).Jo(t)}function bv(e){e.pu=new kh({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e._u.get(t)||null}}),Qv(e).start(),e.yu.au()}function wv(e){return _v(e)&&!Qv(e).ko()&&e._u.size>0}function _v(e){return 0===ss(e).wu.size}function xv(e){e.pu=void 0}function Tv(e){return Sv.apply(this,arguments)}function Sv(){return(Sv=(0,qt.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t._u.forEach(function(e,n){yv(t,e)});case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Iv(e,t){return Ev.apply(this,arguments)}function Ev(){return(Ev=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:xv(t),wv(t)?(t.yu.lu(n),bv(t)):t.yu.set("Unknown");case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Cv(e,t,n){return Rv.apply(this,arguments)}function Rv(){return(Rv=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.yu.set("Online"),!(n instanceof mh&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,(a=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=l(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t._u.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t._u.delete(o),t.pu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}},e,null,[[2,16,19,22]])})),function(e,t){return a.apply(this,arguments)})(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),ns("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Av(t,e.t0);case 11:e.next=29;break;case 13:if(n instanceof vh?t.pu.ut(n):n instanceof gh?t.pu._t(n):t.pu.ht(n),r.isEqual(Es.min())){e.next=29;break}return e.prev=14,e.next=17,gp(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.pu.yt(t);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(function(t){var n=e._u.get(t);if(n){e._u.set(t,n.withResumeToken(Ms.EMPTY_BYTE_STRING,n.snapshotVersion)),kv(e,t);var r=new Bf(n.target,t,1,n.sequenceNumber);yv(e,r)}}),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 22:e.next=29;break;case 24:return e.prev=24,e.t2=e.catch(14),ns("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Av(t,e.t2);case 29:case"end":return e.stop()}},e,null,[[1,6],[14,24]])}))).apply(this,arguments)}function Av(e,t,n){return Ov.apply(this,arguments)}function Ov(){return(Ov=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Pf(n)){e.next=2;break}throw n;case 2:return t.wu.add(1),e.next=5,pv(t);case 5:t.yu.set("Offline"),r||(r=function(){return gp(t.localStore)}),t.asyncQueue.enqueueRetryable((0,qt.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ns("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.wu.delete(1),e.next=6,fv(t);case 6:case"end":return e.stop()}},e)})));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Nv(e,t){return t().catch(function(n){return Av(e,n,t)})}function Pv(e){return Dv.apply(this,arguments)}function Dv(){return(Dv=(0,qt.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=ss(t),r=$v(n),i=n.du.length>0?n.du[n.du.length-1].batchId:-1;case 2:if(!Lv(n)){e.next=19;break}return e.prev=3,e.next=6,kp(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.du.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,Mv(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Av(n,e.t0);case 17:e.next=2;break;case 19:Uv(n)&&Fv(n);case 20:case"end":return e.stop()}},e,null,[[3,13]])}))).apply(this,arguments)}function Lv(e){return _v(e)&&e.du.length<10}function Mv(e,t){e.du.push(t);var n=$v(e);n.Mo()&&n.Xo&&n.Zo(t.mutations)}function Uv(e){return _v(e)&&!$v(e).ko()&&e.du.length>0}function Fv(e){$v(e).start()}function Vv(e){return Zv.apply(this,arguments)}function Zv(){return(Zv=(0,qt.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$v(t).nu();case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qv(e){return jv.apply(this,arguments)}function jv(){return(jv=(0,qt.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=$v(t),r=l(t.du);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Zo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Bv(e,t,n){return zv.apply(this,arguments)}function zv(){return(zv=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.du.shift(),a=qf.from(i,n,r),e.next=3,Nv(t,function(){return t.remoteSyncer.applySuccessfulWrite(a)});case 3:return e.next=5,Pv(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Hv(e,t){return Gv.apply(this,arguments)}function Gv(){return(Gv=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&$v(t).Xo,!e.t0){e.next=4;break}return e.next=4,(r=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!eh(i=n.code)||i===cs.ABORTED){e.next=7;break}return r=t.du.shift(),$v(t).Fo(),e.next=5,Nv(t,function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)});case 5:return e.next=7,Pv(t);case 7:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)})(t,n);case 4:Uv(t)&&Fv(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Kv(e,t){return Wv.apply(this,arguments)}function Wv(){return(Wv=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=ss(t)).asyncQueue.verifyOperationInProgress(),ns("RemoteStore","RemoteStore received new credentials"),i=_v(r),r.wu.add(3),e.next=6,pv(r);case 6:return i&&r.yu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.wu.delete(3),e.next=12,fv(r);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Jv(e,t){return Yv.apply(this,arguments)}function Yv(){return(Yv=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ss(t),!n){e.next=7;break}return r.wu.delete(2),e.next=5,fv(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.wu.add(2),e.next=12,pv(r);case 12:r.yu.set("Unknown");case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qv(e){return e.Iu||(e.Iu=function(e,t,n){var r=ss(e);return r.iu(),new uv(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Tv.bind(null,e),eo:Iv.bind(null,e),zo:Cv.bind(null,e)}),e.mu.push((t=(0,qt.Z)(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Iu.Fo(),wv(e)?bv(e):e.yu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Iu.stop();case 6:xv(e);case 7:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}))),e.Iu;var t}function $v(e){return e.Tu||(e.Tu=function(e,t,n){var r=ss(e);return r.iu(),new sv(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Vv.bind(null,e),eo:Hv.bind(null,e),eu:qv.bind(null,e),tu:Bv.bind(null,e)}),e.mu.push((t=(0,qt.Z)(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Tu.Fo(),t.next=4,Pv(e);case 4:t.next=9;break;case 6:return t.next=8,e.Tu.stop();case 8:e.du.length>0&&(ns("RemoteStore","Stopping write stream with ".concat(e.du.length," pending writes")),e.du=[]);case 9:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}))),e.Tu;var t}var Xv=function(){function e(t,n,r,i,a){v(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new hs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return p(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ls(cs.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)})}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function eg(e,t){if(rs("AsyncQueue","".concat(t,": ").concat(e)),Pf(e))return new ls(cs.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var tg=function(){function e(t){v(this,e),this.comparator=t?function(e,n){return t(e,n)||Js.comparator(e.key,n.key)}:function(e,t){return Js.comparator(e.key,t.key)},this.keyedMap=oh(),this.sortedSet=new Rc(this.comparator)}return p(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),ng=function(){function e(){v(this,e),this.Eu=new Rc(Js.comparator)}return p(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):os():this.Eu=this.Eu.insert(t,e)}},{key:"Au",value:function(){var e=[];return this.Eu.inorderTraversal(function(t,n){e.push(n)}),e}}]),e}(),rg=function(){function e(t,n,r,i,a,o,u,s){v(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return p(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach(function(e){a.push({type:0,doc:e})}),new e(t,n,tg.emptySet(n),a,r,i,!0,!1)}}]),e}(),ig=p(function e(){v(this,e),this.Ru=void 0,this.listeners=[]}),ag=p(function e(){v(this,e),this.queries=new nh(function(e){return dl(e)},fl),this.onlineState="Unknown",this.bu=new Set});function og(e,t){return ug.apply(this,arguments)}function ug(){return(ug=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ss(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new ig),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Ru=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=eg(e.t0,"Initialization of query '".concat(pl(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Pu(r.onlineState),o.Ru&&n.Vu(o.Ru)&&fg(r);case 14:case"end":return e.stop()}},e,null,[[3,9]])}))).apply(this,arguments)}function sg(e,t){return cg.apply(this,arguments)}function cg(){return(cg=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ss(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function lg(e,t){var n,r=ss(e),i=!1,a=l(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=r.queries.get(o.query);if(u){var s,c=l(u.listeners);try{for(c.s();!(s=c.n()).done;){s.value.Vu(o)&&(i=!0)}}catch(h){c.e(h)}finally{c.f()}u.Ru=o}}}catch(h){a.e(h)}finally{a.f()}i&&fg(r)}function hg(e,t,n){var r=ss(e),i=r.queries.get(t);if(i){var a,o=l(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function fg(e){e.bu.forEach(function(e){e.next()})}var dg=function(){function e(t,n,r){v(this,e),this.query=t,this.vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}return p(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=l(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new rg(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),a=!0):this.xu(e,this.onlineState)&&(this.Nu(e),a=!0),this.Du=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}},{key:"xu",value:function(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}},{key:"Cu",value:function(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}},{key:"Nu",value:function(e){e=rg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}]),e}(),pg=function(){function e(t,n){v(this,e),this.payload=t,this.byteLength=n}return p(e,[{key:"Mu",value:function(){return"metadata"in this.payload}}]),e}(),vg=function(){function e(t){v(this,e),this.M=t}return p(e,[{key:"wi",value:function(e){return Nh(this.M,e)}},{key:"mi",value:function(e){return e.metadata.exists?Fh(this.M,e.document,!1):kc.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}},{key:"gi",value:function(e){return Ch(e)}}]),e}(),gg=function(){function e(t,n,r){v(this,e),this.Ou=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mg(t)}return p(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Ns.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new vg(this.M),i=l(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.wi(a.metadata.name),s=l(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,h=(n.get(c)||lh()).add(u);n.set(c,h)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(e,t,n,r){return Ep.apply(this,arguments)}(e.localStore,new vg(e.M),e.documents,e.Ou.id);case 2:n=t.sent,r=e.$u(e.documents),i=l(e.queries),t.prev=5,i.s();case 7:if((a=i.n()).done){t.next=13;break}return o=a.value,t.next=11,Cp(e.localStore,o,r.get(o.name));case 11:t.next=7;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),i.e(t.t0);case 18:return t.prev=18,i.f(),t.finish(18);case 21:return t.abrupt("return",(e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:n}));case 22:case"end":return t.stop()}},t,null,[[5,15,18,21]])}))()}}]),e}();function mg(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var yg=p(function e(t){v(this,e),this.key=t}),kg=p(function e(t){v(this,e),this.key=t}),bg=function(){function e(t,n){v(this,e),this.query=t,this.Uu=n,this.qu=null,this.current=!1,this.Ku=lh(),this.mutatedKeys=lh(),this.Gu=ml(t),this.Qu=new tg(this.Gu)}return p(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new ng,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(function(e,t){var l=i.get(e),h=vl(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Hu(l,h)||(r.track({type:2,doc:h}),p=!0,(s&&n.Gu(h,s)>0||c&&n.Gu(h,c)<0)&&(u=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,ii:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Au();a.sort(function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return os()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)}),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new rg(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1),Xu:o}:{Xu:o}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new ng,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t.Uu=t.Uu.add(e)}),e.modifiedDocuments.forEach(function(e){}),e.removedDocuments.forEach(function(e){return t.Uu=t.Uu.delete(e)}),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=lh(),this.Qu.forEach(function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))});var n=[];return t.forEach(function(t){e.Ku.has(t)||n.push(new kg(t))}),this.Ku.forEach(function(e){t.has(e)||n.push(new yg(e))}),n}},{key:"ta",value:function(e){this.Uu=e._i,this.Ku=lh();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ea",value:function(){return rg.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}]),e}(),wg=p(function e(t,n,r){v(this,e),this.query=t,this.targetId=n,this.view=r}),_g=p(function e(t){v(this,e),this.key=t,this.na=!1}),xg=function(){function e(t,n,r,i,a,o){v(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sa={},this.ia=new nh(function(e){return dl(e)},fl),this.ra=new Map,this.oa=new Set,this.ua=new Rc(Js.comparator),this.aa=new Map,this.ca=new Np,this.ha={},this.la=new Map,this.fa=Dd.yn(),this.onlineState="Unknown",this.da=void 0}return p(e,[{key:"isPrimaryClient",get:function(){return!0===this.da}}]),e}();function Tg(e,t){return Sg.apply(this,arguments)}function Sg(){return(Sg=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=pm(t),!(o=r.ia.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ea(),e.next=15;break;case 6:return e.next=8,bp(r.localStore,ll(n));case 8:return u=e.sent,r.isPrimaryClient&&gv(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Ig(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ig(e,t,n,r){return Eg.apply(this,arguments)}function Eg(){return(Eg=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,u,s,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t._a=function(e,n,r){return(i=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.ii,!e.t0){e.next=6;break}return e.next=5,xp(t.localStore,n.query,!1).then(function(e){var t=e.documents;return n.view.Wu(t,a)});case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Hg(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}},e)})),function(e,t,n,r){return i.apply(this,arguments)})(t,e,n,r);var i},e.next=3,xp(t.localStore,n,!0);case 3:return a=e.sent,o=new bg(n,a._i),u=o.Wu(a.documents),s=ph.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),Hg(t,r,c.Xu),l=new wg(n,r,o),e.abrupt("return",(t.ia.set(n,l),t.ra.has(r)?t.ra.get(r).push(n):t.ra.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Cg(e,t){return Rg.apply(this,arguments)}function Rg(){return(Rg=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ss(t),i=r.ia.get(n),!((a=r.ra.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ra.set(i.targetId,a.filter(function(e){return!fl(e,n)})),void r.ia.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,wp(r.localStore,i.targetId,!1).then(function(){r.sharedClientState.clearQueryState(i.targetId),mv(r.remoteStore,i.targetId),Bg(r,i.targetId)}).catch(Vd);case 9:e.next=14;break;case 11:return Bg(r,i.targetId),e.next=14,wp(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ag(){return(Ag=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=vm(t),e.prev=1,e.next=4,function(e,t){var n,r=ss(e),i=Is.now(),a=t.reduce(function(e,t){return e.add(t.key)},lh());return r.persistence.runTransaction("Locally write mutations","readwrite",function(e){return r.fi.Ks(e,a).next(function(a){n=a;var o,u=[],s=l(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,h=ql(c,n.get(c.key));null!=h&&u.push(new Hl(c.key,h,yc(h.value.mapValue),Ml.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.Bs.addMutationBatch(e,i,u,t)})}).then(function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}})}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ha[e.currentUser.toKey()];r||(r=new Rc(xs)),r=r.insert(t,n),e.ha[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Wg(i,a.changes);case 9:return e.next=11,Pv(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=eg(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}},e,null,[[1,13]])}))).apply(this,arguments)}function Og(e,t){return Ng.apply(this,arguments)}function Ng(){return(Ng=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=ss(t),e.prev=1,e.next=4,mp(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach(function(e,t){var n=r.aa.get(t);n&&(us(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.na=!0:e.modifiedDocuments.size>0?us(n.na):e.removedDocuments.size>0&&(us(n.na),n.na=!1))}),e.next=8,Wg(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Vd(e.t0);case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function Pg(e,t,n){var r=ss(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ia.forEach(function(e,n){var r=n.view.Pu(t);r.snapshot&&i.push(r.snapshot)}),function(e,t){var n=ss(e);n.onlineState=t;var r=!1;n.queries.forEach(function(e,n){var i,a=l(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Pu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}}),r&&fg(n)}(r.eventManager,t),i.length&&r.sa.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Dg(e,t,n){return Lg.apply(this,arguments)}function Lg(){return(Lg=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((i=ss(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.aa.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Rc(Js.comparator)).insert(o,kc.newNoDocument(o,Es.min())),s=lh().add(o),c=new dh(Es.min(),new Map,new Nc(xs),u,s),e.next=9,Og(i,c);case 9:i.ua=i.ua.remove(o),i.aa.delete(n),Kg(i),e.next=16;break;case 14:return e.next=16,wp(i.localStore,n,!1).then(function(){return Bg(i,n,r)}).catch(Vd);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Mg(e,t){return Ug.apply(this,arguments)}function Ug(){return(Ug=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=ss(t),i=n.batch.batchId,e.prev=1,e.next=4,vp(r.localStore,n);case 4:return a=e.sent,jg(r,i,null),qg(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Wg(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Vd(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function Fg(e,t,n){return Vg.apply(this,arguments)}function Vg(){return(Vg=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=ss(t),e.prev=1,e.next=4,function(e,t){var n=ss(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var r;return n.Bs.lookupMutationBatch(e,t).next(function(t){return us(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)}).next(function(){return n.Bs.performConsistencyCheck(e)}).next(function(){return n.fi.Ks(e,r)})})}(i.localStore,n);case 4:return a=e.sent,jg(i,n,r),qg(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Wg(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Vd(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function Zg(){return(Zg=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _v((r=ss(t)).remoteStore)||ns("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=ss(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)})}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.la.get(i)||[]).push(n),r.la.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=eg(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}},e,null,[[2,12]])}))).apply(this,arguments)}function qg(e,t){(e.la.get(t)||[]).forEach(function(e){e.resolve()}),e.la.delete(t)}function jg(e,t,n){var r=ss(e),i=r.ha[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ha[r.currentUser.toKey()]=i}}function Bg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=l(e.ra.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ia.delete(a),n&&e.sa.wa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ra.delete(t),e.isPrimaryClient&&e.ca.vi(t).forEach(function(t){e.ca.containsKey(t)||zg(e,t)})}function zg(e,t){e.oa.delete(t.path.canonicalString());var n=e.ua.get(t);null!==n&&(mv(e.remoteStore,n),e.ua=e.ua.remove(t),e.aa.delete(n),Kg(e))}function Hg(e,t,n){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof yg?(e.ca.addReference(a.key,t),Gg(e,a)):a instanceof kg?(ns("SyncEngine","Document no longer in limbo: "+a.key),e.ca.removeReference(a.key,t),e.ca.containsKey(a.key)||zg(e,a.key)):os()}}catch(o){i.e(o)}finally{i.f()}}function Gg(e,t){var n=t.key,r=n.path.canonicalString();e.ua.get(n)||e.oa.has(r)||(ns("SyncEngine","New document in limbo: "+n),e.oa.add(r),Kg(e))}function Kg(e){for(;e.oa.size>0&&e.ua.size<e.maxConcurrentLimboResolutions;){var t=e.oa.values().next().value;e.oa.delete(t);var n=new Js(Ns.fromString(t)),r=e.fa.next();e.aa.set(r,new _g(n)),e.ua=e.ua.insert(n,r),gv(e.remoteStore,new Bf(ll(al(n.path)),r,2,bs.A))}}function Wg(e,t,n){return Jg.apply(this,arguments)}function Jg(){return(Jg=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ss(t),a=[],o=[],u=[],e.t0=i.ia.isEmpty(),e.t0){e.next=9;break}return i.ia.forEach(function(e,t){u.push(i._a(t,n,r).then(function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=cp.Ys(t.targetId,e);o.push(n)}}))}),e.next=6,Promise.all(u);case 6:return i.sa.zo(a),e.next=9,(s=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=ss(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(e){return Cf.forEach(n,function(t){return Cf.forEach(t.Hs,function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)}).next(function(){return Cf.forEach(t.Js,function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)})})})});case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Pf(e.t0)){e.next=10;break}throw e.t0;case 10:ns("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=l(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.ui.get(u),c=s.withLastLimboFreeSnapshotVersion(s.snapshotVersion),r.ui=r.ui.insert(u,c))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}},e,null,[[1,6]])})),function(e,t){return s.apply(this,arguments)})(i.localStore,o);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Yg(e,t){return Qg.apply(this,arguments)}function Qg(){return(Qg=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=ss(t)).currentUser.isEqual(n)){e.next=11;break}return ns("SyncEngine","User change. New user:",n.toKey()),e.next=5,dp(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.la.forEach(function(e){e.forEach(function(e){e.reject(new ls(cs.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.la.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Wg(r,i.di);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $g(e,t){var n=ss(e),r=n.aa.get(t);if(r&&r.na)return lh().add(r.key);var i=lh(),a=n.ra.get(t);if(!a)return i;var o,u=l(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ia.get(s);i=i.unionWith(c.view.ju)}}catch(h){u.e(h)}finally{u.f()}return i}function Xg(e,t){return em.apply(this,arguments)}function em(){return(em=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=ss(t),e.next=3,xp(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ta(i),e.abrupt("return",(r.isPrimaryClient&&Hg(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tm(e,t){return nm.apply(this,arguments)}function nm(){return(nm=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=ss(t),e.abrupt("return",Sp(r.localStore,n).then(function(e){return Wg(r,e)}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rm(e,t,n,r){return im.apply(this,arguments)}function im(){return(im=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=ss(t),e.next=3,function(e,t){var n=ss(e),r=ss(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return r.fn(e,t).next(function(t){return t?n.fi.Ks(e,t):Cf.resolve(null)})})}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Pv(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(jg(a,n,i||null),qg(a,n),function(e,t){ss(ss(e).Bs)._n(t)}(a.localStore,n)):os();case 11:return e.next=13,Wg(a,o);case 13:e.next=16;break;case 15:ns("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function am(){return(am=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u,s,c,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(pm(r=ss(t)),vm(r),!0!==n||!0===r.da){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,om(r,i.toArray());case 5:return a=e.sent,r.da=!0,e.next=9,Jv(r.remoteStore,!0);case 9:o=l(a);try{for(o.s();!(u=o.n()).done;)s=u.value,gv(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.da){e.next=25;break}return c=[],h=Promise.resolve(),r.ra.forEach(function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):h=h.then(function(){return Bg(r,t),wp(r.localStore,t,!0)}),mv(r.remoteStore,t)}),e.next=19,h;case 19:return e.next=21,om(r,c);case 21:return function(e){var t=ss(e);t.aa.forEach(function(e,n){mv(t.remoteStore,n)}),t.ca.Si(),t.aa=new Map,t.ua=new Rc(Js.comparator)}(r),r.da=!1,e.next=25,Jv(r.remoteStore,!1);case 25:case"end":return e.stop()}},e)}))).apply(this,arguments)}function om(e,t,n){return um.apply(this,arguments)}function um(){return(um=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u,s,c,h,f,d,p,v,g,m,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=ss(t),a=[],o=[],u=l(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,h=void 0,!(f=i.ra.get(c))||0===f.length){e.next=34;break}return e.next=11,bp(i.localStore,ll(f[0]));case 11:h=e.sent,d=l(f),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,g=i.ia.get(v),e.next=20,Xg(i,g);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Tp(i.localStore,c);case 36:return y=e.sent,e.next=39,bp(i.localStore,y);case 39:return h=e.sent,e.next=42,Ig(i,sm(y),c,!1);case 42:a.push(h);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sa.zo(o),a));case 54:case"end":return e.stop()}},e,null,[[2,47,50,53],[13,26,29,32]])}))).apply(this,arguments)}function sm(e){return il(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function cm(e){var t=ss(e);return ss(ss(t.localStore).persistence).Fs()}function lm(e,t,n,r){return hm.apply(this,arguments)}function hm(){return(hm=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=ss(t)).da){e.next=3;break}return e.abrupt("return",void ns("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ra.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Sp(a.localStore,gl(o[0]));case 10:return u=e.sent,s=dh.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,Wg(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,wp(a.localStore,n,!0);case 17:return Bg(a,n,i),e.abrupt("break",20);case 19:os();case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fm(e,t,n){return dm.apply(this,arguments)}function dm(){return(dm=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u,s,c,h,f,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=pm(t)).da){e.next=45;break}a=l(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ra.has(u)){e.next=10;break}return ns("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Tp(i.localStore,u);case 12:return s=e.sent,e.next=15,bp(i.localStore,s);case 15:return c=e.sent,e.next=18,Ig(i,sm(s),c.targetId,!1);case 18:gv(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:h=l(r),e.prev=30,d=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ra.has(t),!e.t0){e.next=5;break}return e.next=5,wp(i.localStore,t,!1).then(function(){mv(i.remoteStore,t),Bg(i,t)}).catch(Vd);case 5:case"end":return e.stop()}},e)}),h.s();case 33:if((f=h.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),h.e(e.t2);case 42:return e.prev=42,h.f(),e.finish(42);case 45:case"end":return e.stop()}},e,null,[[3,23,26,29],[30,39,42,45]])}))).apply(this,arguments)}function pm(e){var t=ss(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Og.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=$g.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Dg.bind(null,t),t.sa.zo=lg.bind(null,t.eventManager),t.sa.wa=hg.bind(null,t.eventManager),t}function vm(e){var t=ss(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Mg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Fg.bind(null,t),t}var gm=function(){function e(){v(this,e),this.synchronizeTabs=!1}return p(e,[{key:"initialize",value:function(e){var t=this;return(0,qt.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.M=iv(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),n.next=5,t.persistence.start();case 5:t.gcScheduler=t.pa(e),t.localStore=t.Ia(e);case 7:case"end":return n.stop()}},n)}))()}},{key:"pa",value:function(e){return null}},{key:"Ia",value:function(e){return fp(this.persistence,new lp,e.initialUser,this.M)}},{key:"ya",value:function(e){return new Fp(Zp.Yi,this.M)}},{key:"ga",value:function(e){return new Yp}},{key:"terminate",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.gcScheduler&&e.gcScheduler.stop(),t.next=3,e.sharedClientState.shutdown();case 3:return t.next=5,e.persistence.shutdown();case 5:case"end":return t.stop()}},t)}))()}}]),e}(),mm=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).Ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return p(n,[{key:"initialize",value:function(e){var t=this,r=this;return(0,qt.Z)(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,o(T(n.prototype),"initialize",t).call(r,e);case 2:return i.next=4,r.Ta.initialize(r,e);case 4:return i.next=6,vm(r.Ta.syncEngine);case 6:return i.next=8,Pv(r.Ta.remoteStore);case 8:return i.next=10,r.persistence.Ts(function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()});case 10:case"end":return i.stop()}},i)}))()}},{key:"Ia",value:function(e){return fp(this.persistence,new lp,e.initialUser,this.M)}},{key:"pa",value:function(e){return new Bd(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}},{key:"ya",value:function(e){var t=up(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Id.withCacheSize(this.cacheSizeBytes):Id.DEFAULT;return new ip(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,nv(),rv(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"ga",value:function(e){return new Yp}}]),n}(gm),ym=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r,!1)).Ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return p(n,[{key:"initialize",value:function(e){var t=this,r=this;return(0,qt.Z)(regeneratorRuntime.mark(function i(){var a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,o(T(n.prototype),"initialize",t).call(r,e);case 2:if(a=r.Ta.syncEngine,i.t0=r.sharedClientState instanceof Jp,!i.t0){i.next=8;break}return r.sharedClientState.syncEngine={$r:rm.bind(null,a),Br:lm.bind(null,a),Lr:fm.bind(null,a),Fs:cm.bind(null,a),Fr:tm.bind(null,a)},i.next=8,r.sharedClientState.start();case 8:return i.next=10,r.persistence.Ts(function(){var e=(0,qt.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e,t){return am.apply(this,arguments)}(r.Ta.syncEngine,t);case 2:r.gcScheduler&&(t&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):t||r.gcScheduler.stop());case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return i.stop()}},i)}))()}},{key:"ga",value:function(e){var t=nv();if(!Jp.vt(t))throw new ls(cs.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=up(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Jp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(mm),km=function(){function e(){v(this,e)}return p(e,[{key:"initialize",value:function(e,t){var n=this;return(0,qt.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=n.localStore,r.t0){r.next=12;break}return n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=function(e){return Pg(n.syncEngine,e,1)},n.remoteStore.remoteSyncer.handleCredentialChange=Yg.bind(null,n.syncEngine),r.next=12,Jv(n.remoteStore,n.syncEngine.isPrimaryClient);case 12:case"end":return r.stop()}},r)}))()}},{key:"createEventManager",value:function(e){return new ag}},{key:"createDatastore",value:function(e){var t=iv(e.databaseInfo.databaseId),n=new tv(e.databaseInfo);return function(e,t,n,r){return new cv(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Pg(o.syncEngine,e,0)},a=$p.vt()?new $p:new Qp,new hv(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new xg(e,t,n,r,i,a);return o&&(u.da=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return(e=(0,qt.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=ss(t),ns("RemoteStore","RemoteStore shutting down."),n.wu.add(5),e.next=5,pv(n);case 5:n.gu.shutdown(),n.yu.set("Unknown");case 7:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}]),e}();function bm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return(0,qt.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}},r)}))()},cancel:function(){return(0,qt.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var wm=function(){function e(t){v(this,e),this.observer=t,this.muted=!1}return p(e,[{key:"next",value:function(e){this.observer.next&&this.Ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Aa",value:function(){this.muted=!0}},{key:"Ea",value:function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)}}]),e}(),_m=function(){function e(t,n){var r=this;v(this,e),this.Ra=t,this.M=n,this.metadata=new hs,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(function(e){e&&e.Mu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))},function(e){return r.metadata.reject(e)})}return p(e,[{key:"close",value:function(){return this.Ra.cancel()}},{key:"getMetadata",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.metadata.promise);case 1:case"end":return t.stop()}},t)}))()}},{key:"ma",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMetadata();case 2:return t.abrupt("return",e.Pa());case 3:case"end":return t.stop()}},t)}))()}},{key:"Pa",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Va();case 2:if(null!==(n=t.sent)){t.next=5;break}return t.abrupt("return",null);case 5:return r=e.ba.decode(n),i=Number(r),isNaN(i)&&e.va("length string (".concat(r,") is not valid number")),t.next=9,e.Sa(i);case 9:return a=t.sent,t.abrupt("return",new pg(JSON.parse(a),n.length+i));case 11:case"end":return t.stop()}},t)}))()}},{key:"Da",value:function(){return this.buffer.findIndex(function(e){return e==="{".charCodeAt(0)})}},{key:"Va",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.Da()<0,!t.t0){t.next=5;break}return t.next=4,e.Ca();case 4:t.t0=!t.sent;case 5:if(!t.t0){t.next=9;break}case 7:t.next=0;break;case 9:if(0!==e.buffer.length){t.next=11;break}return t.abrupt("return",null);case 11:return(n=e.Da())<0&&e.va("Reached the end of bundle when a length string is expected."),r=e.buffer.slice(0,n),t.abrupt("return",(e.buffer=e.buffer.slice(n),r));case 15:case"end":return t.stop()}},t)}))()}},{key:"Sa",value:function(e){var t=this;return(0,qt.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t.buffer.length<e)){n.next=8;break}return n.next=3,t.Ca();case 3:if(n.t0=n.sent,!n.t0){n.next=6;break}t.va("Reached the end of bundle when more is expected.");case 6:n.next=0;break;case 8:return r=t.ba.decode(t.buffer.slice(0,e)),n.abrupt("return",(t.buffer=t.buffer.slice(e),r));case 10:case"end":return n.stop()}},n)}))()}},{key:"va",value:function(e){throw this.Ra.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ca",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Ra.read();case 2:return(n=t.sent).done||((r=new Uint8Array(e.buffer.length+n.value.length)).set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r),t.abrupt("return",n.done);case 5:case"end":return t.stop()}},t)}))()}}]),e}(),xm=function(){function e(t){v(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return p(e,[{key:"lookup",value:function(e){var t=this;return(0,qt.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.ensureCommitNotCalled(),!(t.mutations.length>0)){n.next=2;break}throw new ls(cs.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return n.next=4,(i=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=ss(t),i=Lh(r.M)+"/documents",a={documents:n.map(function(e){return Oh(r.M,e)})},e.next=5,r._o("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach(function(e){var t=function(e,t){return"found"in t?function(e,t){us(!!t.found);var n=Nh(e,t.found.name),r=Ch(t.found.updateTime),i=new mc({mapValue:{fields:t.found.fields}});return kc.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){us(!!t.missing),us(!!t.readTime);var n=Nh(e,t.missing),r=Ch(t.readTime);return kc.newNoDocument(n,r)}(e,t):os()}(r.M,e);u.set(t.key.toString(),t)}),s=[],e.abrupt("return",(n.forEach(function(e){var t=u.get(e.toString());us(!!t),s.push(t)}),s));case 10:case"end":return e.stop()}},e)})),function(e,t){return i.apply(this,arguments)})(t.datastore,e);case 4:return r=n.sent,n.abrupt("return",(r.forEach(function(e){return t.recordVersion(e)}),r));case 6:case"end":return n.stop()}},n)}))()}},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Ql(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ensureCommitNotCalled(),!e.lastWriteError){t.next=2;break}throw e.lastWriteError;case 2:return n=e.readVersions,e.mutations.forEach(function(e){n.delete(e.key.toString())}),n.forEach(function(t,n){var r=Js.fromPath(n);e.mutations.push(new $l(r,e.precondition(r)))}),t.next=7,(r=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=ss(t),i=Lh(r.M)+"/documents",a={writes:n.map(function(e){return Vh(r.M,e)})},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)})(e.datastore,e.mutations);case 7:e.committed=!0;case 8:case"end":return t.stop()}},t)}))()}},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw os();t=Es.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new ls(cs.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ml.updateTime(t):Ml.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Es.min()))throw new ls(cs.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ml.updateTime(t)}return Ml.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Tm=function(){function e(t,n,r,i,a){v(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new av(this.asyncQueue,"transaction_retry")}return p(e,[{key:"run",value:function(){this.xa-=1,this.Na()}},{key:"Na",value:function(){var e=this;this.No.Ro((0,qt.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=new xm(e.datastore),(r=e.ka(n))&&r.then(function(t){e.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){e.deferred.resolve(t)}).catch(function(t){e.Ma(t)})})}).catch(function(t){e.Ma(t)});case 2:case"end":return t.stop()}},t)})))}},{key:"ka",value:function(e){try{var t=this.updateFunction(e);return!Gs(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ma",value:function(e){var t=this;this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(function(){return t.Na(),Promise.resolve()})):this.deferred.reject(e)}},{key:"Oa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!eh(t)}return!1}}]),e}(),Sm=function(){function e(t,n,r,i){var a=this;v(this,e);var o,u=this;this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=$u.UNAUTHENTICATED,this.clientId=_s.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,(o=(0,qt.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ns("FirestoreClient","Received user=",t.uid),e.next=3,u.authCredentialListener(t);case 3:u.user=t;case 4:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)})),this.appCheckCredentials.start(r,function(e){return ns("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)})}return p(e,[{key:"getConfiguration",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100});case 1:case"end":return t.stop()}},t)}))()}},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new ls(cs.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new hs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,qt.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=eg(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}},n,null,[[0,14]])}))),t.promise}}]),e}();function Im(e,t){return Em.apply(this,arguments)}function Em(){return(Em=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),ns("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=(0,qt.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,dp(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=n;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Cm(e,t){return Rm.apply(this,arguments)}function Rm(){return(Rm=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Am(t);case 3:return r=e.sent,ns("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener(function(e){return Kv(n.remoteStore,e)}),t.setAppCheckTokenChangeListener(function(e,t){return Kv(n.remoteStore,t)}),t.onlineComponents=n;case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Am(e){return Om.apply(this,arguments)}function Om(){return(Om=(0,qt.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return ns("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Im(t,new gm);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Nm(e){return Pm.apply(this,arguments)}function Pm(){return(Pm=(0,qt.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return ns("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Cm(t,new km);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Dm(e){return Am(e).then(function(e){return e.persistence})}function Lm(e){return Am(e).then(function(e){return e.localStore})}function Mm(e){return Nm(e).then(function(e){return e.remoteStore})}function Um(e){return Nm(e).then(function(e){return e.syncEngine})}function Fm(e){return Vm.apply(this,arguments)}function Vm(){return(Vm=(0,qt.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nm(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Tg.bind(null,n.syncEngine),r.onUnlisten=Cg.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Zm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new hs;return e.asyncQueue.enqueueAndForget((0,qt.Z)(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new wm({next:function(a){t.enqueueAndForget(function(){return sg(e,o)});var u=a.docs.has(n);!u&&a.fromCache?i.reject(new ls(cs.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new ls(cs.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new dg(al(n.path),a,{includeMetadataChanges:!0,ku:!0});return og(e,o)},i.next=3,Fm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}},i)}))),r.promise}function qm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new hs;return e.asyncQueue.enqueueAndForget((0,qt.Z)(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new wm({next:function(n){t.enqueueAndForget(function(){return sg(e,o)}),n.fromCache&&"server"===r.source?i.reject(new ls(cs.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new dg(n,a,{includeMetadataChanges:!0,ku:!0});return og(e,o)},i.next=3,Fm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}},i)}))),r.promise}var jm=new Map;function Bm(e,t,n){if(!n)throw new ls(cs.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function zm(e,t,n,r){if(!0===t&&!0===r)throw new ls(cs.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Hm(e){if(!Js.isDocumentKey(e))throw new ls(cs.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Gm(e){if(Js.isDocumentKey(e))throw new ls(cs.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Km(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":os()}function Wm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ls(cs.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Km(e);throw new ls(cs.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Jm(e,t){if(t<=0)throw new ls(cs.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Ym=function(){function e(t){var n;if(v(this,e),void 0===t.host){if(void 0!==t.ssl)throw new ls(cs.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ls(cs.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,zm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return p(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Qm=function(){function e(t,n,r){v(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ym({}),this._settingsFrozen=!1,t instanceof Hs?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ls(cs.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hs(e.options.projectId)}(t))}return p(e,[{key:"app",get:function(){if(!this._app)throw new ls(cs.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new ls(cs.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ym(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ds;switch(e.type){case"gapi":var t=e.client;return us(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new ms(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new ls(cs.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=jm.get(e);t&&(ns("ComponentProvider","Removing Datastore"),jm.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}(),$m=function(){function e(t,n,r){v(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return p(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new ey(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Xm=function(){function e(t,n,r){v(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return p(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),ey=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e,r,al(i)))._path=i,a.type="collection",a}return p(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new $m(this.firestore,null,new Js(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Xm);function ty(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,Mt.m9)(e),Bm("collection","path",t),e instanceof Qm){var a=Ns.fromString.apply(Ns,[t].concat(r));return Gm(a),new ey(e,null,a)}if(!(e instanceof $m||e instanceof ey))throw new ls(cs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ns.fromString.apply(Ns,[t].concat(r)));return Gm(o),new ey(e.firestore,null,o)}function ny(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,Mt.m9)(e),1===arguments.length&&(t=_s.R()),Bm("doc","path",t),e instanceof Qm){var a=Ns.fromString.apply(Ns,[t].concat(r));return Hm(a),new $m(e,null,new Js(a))}if(!(e instanceof $m||e instanceof ey))throw new ls(cs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ns.fromString.apply(Ns,[t].concat(r)));return Hm(o),new $m(e.firestore,e instanceof ey?e.converter:null,new Js(o))}function ry(e,t){return e=(0,Mt.m9)(e),t=(0,Mt.m9)(t),(e instanceof $m||e instanceof ey)&&(t instanceof $m||t instanceof ey)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function iy(e,t){return e=(0,Mt.m9)(e),t=(0,Mt.m9)(t),e instanceof Xm&&t instanceof Xm&&e.firestore===t.firestore&&fl(e._query,t._query)&&e.converter===t.converter}var ay=function(){function e(){var t=this;v(this,e),this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new av(this,"async_queue_retry"),this.Qa=function(){var e=rv();e&&ns("AsyncQueue","Visibility state changed to "+e.visibilityState),t.No.Po()};var n=rv();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Qa)}return p(e,[{key:"isShuttingDown",get:function(){return this.Ba}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.ja(),this.Wa(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;var t=rv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.ja(),this.Ba)return new Promise(function(){});var n=new hs;return this.Wa(function(){return t.Ba&&t.Ka?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget(function(){return t.$a.push(e),t.za()})}},{key:"za",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e.$a.length){t.next=14;break}return t.prev=1,t.next=4,e.$a[0]();case 4:e.$a.shift(),e.No.reset(),t.next=13;break;case 8:if(t.prev=8,t.t0=t.catch(1),Pf(t.t0)){t.next=12;break}throw t.t0;case 12:ns("AsyncQueue","Operation failed with retryable error: "+t.t0);case 13:e.$a.length>0&&e.No.Ro(function(){return e.za()});case 14:case"end":return t.stop()}},t,null,[[1,8]])}))()}},{key:"Wa",value:function(e){var t=this,n=this.Fa.then(function(){return t.qa=!0,e().catch(function(e){throw t.Ua=e,t.qa=!1,rs("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(function(e){return t.qa=!1,e})});return this.Fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.ja(),this.Ga.indexOf(e)>-1&&(t=0);var i=Xv.createAndSchedule(this,e,t,n,function(e){return r.Ha(e)});return this.La.push(i),i}},{key:"ja",value:function(){this.Ua&&os()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Ja",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.Fa,t.next=3,n;case 3:if(n!==e.Fa){t.next=0;break}case 4:case"end":return t.stop()}},t)}))()}},{key:"Ya",value:function(e){var t,n=l(this.La);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Xa",value:function(e){var t=this;return this.Ja().then(function(){t.La.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});var n,r=l(t.La);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Ja()})}},{key:"Za",value:function(e){this.Ga.push(e)}},{key:"Ha",value:function(e){var t=this.La.indexOf(e);this.La.splice(t,1)}}]),e}();function oy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var a=i[r];if(a in n&&"function"==typeof n[a])return!0}return!1}(e)}var uy=function(){function e(){v(this,e),this._progressObserver={},this._taskCompletionResolver=new hs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return p(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),sy=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new ay,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return p(n,[{key:"_terminate",value:function(){return this._firestoreClient||ly(this),this._firestoreClient.terminate()}}]),n}(Qm);function cy(e){return e._firestoreClient||ly(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ly(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new zs(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Sm(e._authCredentials,e._appCheckCredentials,e._queue,r)}function hy(e,t,n){var r=new hs;return e.asyncQueue.enqueue((0,qt.Z)(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Im(e,n);case 3:return i.next=5,Cm(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===cs.FAILED_PRECONDITION||e.code===cs.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}},i,null,[[0,8]])}))).then(function(){return r.promise})}function fy(e){if(e._initialized||e._terminated)throw new ls(cs.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var dy=function(){function e(){v(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new ls(cs.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ds(n)}return p(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}(),py=function(){function e(t){v(this,e),this._byteString=t}return p(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Ms.fromBase64String(t))}catch(t){throw new ls(cs.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Ms.fromUint8Array(t))}}]),e}(),vy=p(function e(t){v(this,e),this._methodName=t}),gy=function(){function e(t,n){if(v(this,e),!isFinite(t)||t<-90||t>90)throw new ls(cs.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ls(cs.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return p(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return xs(this._lat,e._lat)||xs(this._long,e._long)}}]),e}(),my=/^__.*__$/,yy=function(){function e(t,n,r){v(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return p(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Hl(e,this.data,this.fieldMask,t,this.fieldTransforms):new zl(e,this.data,t,this.fieldTransforms)}}]),e}(),ky=function(){function e(t,n,r){v(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return p(e,[{key:"toMutation",value:function(e,t){return new Hl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function by(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw os()}}var wy=function(){function e(t,n,r,i,a,o){v(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return p(e,[{key:"path",get:function(){return this.settings.path}},{key:"ec",get:function(){return this.settings.ec}},{key:"nc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.rc(e),r}},{key:"oc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.tc(),r}},{key:"uc",value:function(e){return this.nc({path:void 0,ic:!0})}},{key:"ac",value:function(e){return qy(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})}},{key:"tc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.rc(this.path.get(e))}},{key:"rc",value:function(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(by(this.ec)&&my.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}]),e}(),_y=function(){function e(t,n,r){v(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||iv(t)}return p(e,[{key:"lc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new wy({ec:e,methodName:t,hc:n,path:Ds.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function xy(e){var t=e._freezeSettings(),n=iv(e._databaseId);return new _y(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ty(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.lc(a.merge||a.mergeFields?2:0,t,n,i);Uy("Data must be an object, but it was:",o,r);var u,s,c=Ly(r,o);if(a.merge)u=new Ls(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var h,f=[],d=l(a.mergeFields);try{for(d.s();!(h=d.n()).done;){var p=h.value,v=Fy(t,p,n);if(!o.contains(v))throw new ls(cs.INVALID_ARGUMENT,"Field '".concat(v,"' is specified in your field mask but missing from your input data."));jy(f,v)||f.push(v)}}catch(g){d.e(g)}finally{d.f()}u=new Ls(f),s=o.fieldTransforms.filter(function(e){return u.covers(e.field)})}else u=null,s=o.fieldTransforms;return new yy(new mc(c),u,s)}var Sy=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ec)throw e.ac(1===e.ec?"".concat(this._methodName,"() can only appear at the top level of your update data"):"".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(vy);function Iy(e,t,n){return new wy({ec:3,hc:t.settings.hc,methodName:e._methodName,ic:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var Ey=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"_toFieldTransform",value:function(e){return new Dl(e.path,new Il)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(vy),Cy=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).fc=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=Iy(this,e,!0),n=this.fc.map(function(e){return Dy(e,t)}),r=new El(n);return new Dl(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(vy),Ry=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).fc=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=Iy(this,e,!0),n=this.fc.map(function(e){return Dy(e,t)}),r=new Rl(n);return new Dl(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(vy),Ay=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).dc=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=new Ol(e.M,wl(e.M,this.dc));return new Dl(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(vy);function Oy(e,t,n,r){var i=e.lc(1,t,n);Uy("Data must be an object, but it was:",i,r);var a=[],o=mc.empty();Rs(r,function(e,r){var u=Zy(t,e,n);r=(0,Mt.m9)(r);var s=i.oc(u);if(r instanceof Sy)a.push(u);else{var c=Dy(r,s);null!=c&&(a.push(u),o.set(u,c))}});var u=new Ls(a);return new ky(o,u,i.fieldTransforms)}function Ny(e,t,n,r,i,a){var o=e.lc(1,t,n),u=[Fy(t,r,n)],s=[i];if(a.length%2!=0)throw new ls(cs.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Fy(t,a[c])),s.push(a[c+1]);for(var l=[],h=mc.empty(),f=u.length-1;f>=0;--f)if(!jy(l,u[f])){var d=u[f],p=s[f];p=(0,Mt.m9)(p);var v=o.oc(d);if(p instanceof Sy)l.push(d);else{var g=Dy(p,v);null!=g&&(l.push(d),h.set(d,g))}}var m=new Ls(l);return new ky(h,m,o.fieldTransforms)}function Py(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Dy(n,e.lc(r?4:3,t))}function Dy(e,t){if(My(e=(0,Mt.m9)(e)))return Uy("Unsupported field value:",t,e),Ly(e,t);if(e instanceof vy)return function(e,t){if(!by(t.ec))throw t.ac("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ac("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=l(e);try{for(a.s();!(n=a.n()).done;){var o=Dy(n.value,t.uc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=(0,Mt.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return wl(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Is.fromDate(e);return{timestampValue:Sh(t.M,n)}}if(e instanceof Is){var r=new Is(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Sh(t.M,r)}}if(e instanceof gy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof py)return{bytesValue:Ih(t.M,e._byteString)};if(e instanceof $m){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ac("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Rh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ac("Unsupported field value: ".concat(Km(e)))}(e,t)}function Ly(e,t){var n={};return As(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Rs(e,function(e,r){var i=Dy(r,t.sc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function My(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Is||e instanceof gy||e instanceof py||e instanceof $m||e instanceof vy)}function Uy(e,t,n){if(!My(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Km(n);throw t.ac("an object"===r?e+" a custom object":e+" "+r)}}function Fy(e,t,n){if((t=(0,Mt.m9)(t))instanceof dy)return t._internalPath;if("string"==typeof t)return Zy(e,t);throw qy("Field path arguments must be of type string or ",e,!1,void 0,n)}var Vy=new RegExp("[~\\*/\\[\\]]");function Zy(e,t,n){if(t.search(Vy)>=0)throw qy("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return w(dy,s(t.split(".")))._internalPath}catch(r){throw qy("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function qy(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new ls(cs.INVALID_ARGUMENT,u+e+s)}function jy(e,t){return e.some(function(e){return e.isEqual(t)})}var By=function(){function e(t,n,r,i,a){v(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return p(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new $m(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new zy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Hy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),zy=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(){return o(T(n.prototype),"data",this).call(this)}}]),n}(By);function Hy(e,t){return"string"==typeof t?Zy(e,t):t instanceof dy?t._internalPath:t._delegate._internalPath}var Gy=function(){function e(t,n){v(this,e),this.hasPendingWrites=t,this.fromCache=n}return p(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Ky=function(e){g(n,e);var t=m(n);function n(e,r,i,a,o,u){var s;return v(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return p(n,[{key:"exists",value:function(){return o(T(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Wy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Hy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(By),Wy=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(T(n.prototype),"data",this).call(this,e)}}]),n}(Ky),Jy=function(){function e(t,n,r,i){v(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Gy(i.hasPendingWrites,i.fromCache),this.query=r}return p(e,[{key:"docs",get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach(function(r){e.call(t,new Wy(n._firestore,n._userDataWriter,r.key,r,new Gy(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ls(cs.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map(function(t){return{type:"added",doc:new Wy(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Gy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}})}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(function(e){return t||3!==e.type}).map(function(t){var n=new Wy(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Gy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Yy(t.type),doc:n,oldIndex:i,newIndex:a}})}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function Yy(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return os()}}function Qy(e,t){return e instanceof Ky&&t instanceof Ky?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Jy&&t instanceof Jy&&e._firestore===t._firestore&&iy(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function $y(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ls(cs.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Xy=p(function e(){v(this,e)});function ek(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var tk=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this))._c=e,a.wc=r,a.mc=i,a.type="where",a}return p(n,[{key:"_apply",value:function(e){var t=xy(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new ls(cs.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){sk(o,a);var s,c=[],h=l(o);try{for(h.s();!(s=h.n()).done;){var f=s.value;c.push(uk(r,e,f))}}catch(p){h.e(p)}finally{h.f()}u={arrayValue:{values:c}}}else u=uk(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||sk(o,a),u=Py(n,"where",o,"in"===a||"not-in"===a);var d=Bc.create(i,a,u);return function(e,t){if(t.S()){var n=ul(e);if(null!==n&&!n.isEqual(t.field))throw new ls(cs.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=ol(e);null!==r&&ck(0,t.field,r)}var i=function(e,t){var n,r=l(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(p){r.e(p)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw new ls(cs.INVALID_ARGUMENT,i===t.op?"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter."):"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,d),d}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Xm(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new rl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(Xy),nk=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this))._c=e,i.gc=r,i.type="orderBy",i}return p(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new ls(cs.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ls(cs.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Xc(t,n);return function(e,t){if(null===ol(e)){var n=ul(e);null!==n&&ck(0,n,t.field)}}(e,r),r}(e._query,this._c,this.gc);return new Xm(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new rl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(Xy),rk=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).type=e,a.yc=r,a.Ic=i,a}return p(n,[{key:"_apply",value:function(e){return new Xm(e.firestore,e.converter,hl(e._query,this.yc,this.Ic))}}]),n}(Xy),ik=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return p(n,[{key:"_apply",value:function(e){var t=ok(e,this.type,this.Tc,this.Ec);return new Xm(e.firestore,e.converter,function(e,t){return new rl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(Xy),ak=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return p(n,[{key:"_apply",value:function(e){var t=ok(e,this.type,this.Tc,this.Ec);return new Xm(e.firestore,e.converter,function(e,t){return new rl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(Xy);function ok(e,t,n,r){if(n[0]=(0,Mt.m9)(n[0]),n[0]instanceof By)return function(e,t,n,r,i){if(!r)throw new ls(cs.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=l(cl(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(ac(t,r.key));else{var c=r.data.field(s.field);if(qs(c))throw new ls(cs.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=s.field.canonicalString();throw new ls(cs.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(h,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new $c(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=xy(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new ls(cs.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new ls(cs.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!sl(e)&&-1!==c.indexOf("/"))throw new ls(cs.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Ns.fromString(c));if(!Js.isDocumentKey(l))throw new ls(cs.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new Js(l);u.push(ac(t,h))}else{var f=Py(n,r,c);u.push(f)}}return new $c(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function uk(e,t,n){if("string"==typeof(n=(0,Mt.m9)(n))){if(""===n)throw new ls(cs.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sl(t)&&-1!==n.indexOf("/"))throw new ls(cs.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Ns.fromString(n));if(!Js.isDocumentKey(r))throw new ls(cs.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ac(e,new Js(r))}if(n instanceof $m)return ac(e,n._key);throw new ls(cs.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Km(n),"."))}function sk(e,t){if(!Array.isArray(e)||0===e.length)throw new ls(cs.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new ls(cs.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function ck(e,t,n){if(!n.isEqual(t))throw new ls(cs.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var lk={maxAttempts:5},hk=function(){function e(){v(this,e)}return p(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch($s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw os()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Rs(e.fields,function(e,i){r[e]=n.convertValue(i,t)}),r}},{key:"convertGeoPoint",value:function(e){return new gy(Vs(e.latitude),Vs(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map(function(e){return n.convertValue(e,t)})}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=js(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Bs(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Fs(e);return new Is(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Ns.fromString(e);us($h(n));var r=new Hs(n.get(1),n.get(3)),i=new Js(n.popFirst(5));return r.isEqual(t)||rs("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function fk(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var dk=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new py(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new $m(this.firestore,null,t)}}]),n}(hk),pk=function(){function e(t,n){v(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=xy(t)}return p(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=vk(e,this._firestore),i=fk(r.converter,t,n),a=Ty(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Ml.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=vk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=(0,Mt.m9)(t))||t instanceof dy?Ny(this._dataReader,"WriteBatch.update",i._key,t,n,o):Oy(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Ml.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=vk(e,this._firestore);return this._mutations=this._mutations.concat(new Ql(t._key,Ml.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new ls(cs.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function vk(e,t){if((e=(0,Mt.m9)(e)).firestore!==t)throw new ls(cs.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var gk=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new py(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new $m(this.firestore,null,t)}}]),n}(hk);function mk(e){e=Wm(e,Xm);var t=Wm(e.firestore,sy),n=cy(t),r=new gk(t);return $y(e._query),qm(n,e._query).then(function(n){return new Jy(t,r,e,n)})}function yk(e,t,n){e=Wm(e,$m);var r=Wm(e.firestore,sy),i=fk(e.converter,t,n);return _k(r,[Ty(xy(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ml.none())])}function kk(e,t,n){e=Wm(e,$m);for(var r=Wm(e.firestore,sy),i=xy(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return _k(r,[("string"==typeof(t=(0,Mt.m9)(t))||t instanceof dy?Ny(i,"updateDoc",e._key,t,n,o):Oy(i,"updateDoc",e._key,t)).toMutation(e._key,Ml.exists(!0))])}function bk(e){return _k(Wm(e.firestore,sy),[new Ql(e._key,Ml.none())])}function wk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=(0,Mt.m9)(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||oy(n[s])||(u=n[s],s++);var c,l,h,f={includeMetadataChanges:u.includeMetadataChanges};if(oy(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof $m)l=Wm(e.firestore,sy),h=al(e._key.path),c={next:function(t){n[s]&&n[s](xk(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Wm(e,Xm);l=Wm(p.firestore,sy),h=p._query;var v=new gk(l);c={next:function(e){n[s]&&n[s](new Jy(l,v,p,e))},error:n[s+1],complete:n[s+2]},$y(e._query)}return function(e,t,n,r){var i=new wm(r),a=new dg(t,i,n);return e.asyncQueue.enqueueAndForget((0,qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=og,t.next=3,Fm(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)}))),function(){i.Aa(),e.asyncQueue.enqueueAndForget((0,qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=sg,t.next=3,Fm(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)})))}}(cy(l),h,f,c)}function _k(e,t){return function(e,t){var n=new hs;return e.asyncQueue.enqueueAndForget((0,qt.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(e,t,n){return Ag.apply(this,arguments)},r.next=3,Um(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(cy(e),t)}function xk(e,t,n){var r=n.docs.get(t._key),i=new gk(e);return new Ky(e,i,t._key,r,new Gy(n.hasPendingWrites,n.fromCache),t.converter)}var Tk=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r))._firestore=e,i}return p(n,[{key:"get",value:function(e){var t=this,r=vk(e,this._firestore),i=new gk(this._firestore);return o(T(n.prototype),"get",this).call(this,e).then(function(e){return new Ky(t._firestore,i,r._key,e._document,new Gy(!1,!1),r.converter)})}}]),n}(function(){function e(t,n){v(this,e),this._firestore=t,this._transaction=n,this._dataReader=xy(t)}return p(e,[{key:"get",value:function(e){var t=this,n=vk(e,this._firestore),r=new dk(this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return os();var i=e[0];if(i.isFoundDocument())return new By(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new By(t._firestore,r,n._key,null,n.converter);throw os()})}},{key:"set",value:function(e,t,n){var r=vk(e,this._firestore),i=fk(r.converter,t,n),a=Ty(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=vk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=(0,Mt.m9)(t))||t instanceof dy?Ny(this._dataReader,"Transaction.update",i._key,t,n,o):Oy(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=vk(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Xu=e}(Ut.SDK_VERSION),(0,Ut._registerComponent)(new Vt.wA("firestore",function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new sy(i,new vs(e.getProvider("auth-internal")),new ks(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a},"PUBLIC")),(0,Ut.registerVersion)("@firebase/firestore","3.4.9",e),(0,Ut.registerVersion)("@firebase/firestore","3.4.9","esm2017")}();var Sk=p(function e(t){return v(this,e),t}),Ik=new a.OlP("angularfire2.firestore-instances");function Ek(e){return function(t,n){var r=t.runOutsideAngular(function(){return e(n)});return new Sk(r)}}var Ck={provide:p(function e(){return v(this,e),(0,It.vb)("firestore")}),deps:[[new a.FiY,Ik]]},Rk={provide:Sk,useFactory:function(e,t){var n=(0,It.JM)("firestore",e,t);return n&&new Sk(n)},deps:[[new a.FiY,Ik],Et]},Ak=function(){var e=p(function e(){v(this,e),(0,St.KN)("angularfire",It.q4.full,"fst")});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[Rk,Ck]}),e}();function Ok(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{ngModule:Ak,providers:[{provide:Ik,useFactory:Ek(e),multi:!0,deps:[a.R0b,a.zs3,It.HU,Ct,[new a.FiY,Zt],[new a.FiY,kn]].concat(n)}]}}var Nk=(0,It.u3)(ty,!0),Pk=(0,It.u3)(bk,!0),Dk=(0,It.u3)(ny,!0),Lk=(0,It.u3)(mk,!0),Mk=(0,It.u3)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ut.getApp)();return(0,Ut._getProvider)(e,"firestore").getImmediate()},!0),Uk=(0,It.u3)(ek,!0),Fk=(0,It.u3)(yk,!0),Vk=(0,It.u3)(kk,!0),Zk=i(4402),qk=i(9765),jk=i(7971),Bk=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this))._value=e,r}return p(n,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(e){var t=o(T(n.prototype),"_subscribe",this).call(this,e);return t&&!t.closed&&e.next(this._value),t}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new jk.N;return this._value}},{key:"next",value:function(e){o(T(n.prototype),"next",this).call(this,this._value=e)}}]),n}(qk.xQ),zk=i(4869),Hk=i(9796),Gk=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),n}(je.L),Kk=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).parent=e,a.outerValue=r,a.outerIndex=i,a.index=0,a}return p(n,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(je.L),Wk=i(7444);function Jk(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Kk(e,n,r);if(!i.closed)return t instanceof Ve.y?t.subscribe(i):(0,Wk.s)(t)(i)}var Yk=i(6693),Qk={},$k=function(){function e(t){v(this,e),this.resultSelector=t}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new Xk(e,this.resultSelector))}}]),e}(),Xk=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return p(n,[{key:"_next",value:function(e){this.values.push(Qk),this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++)this.add(Jk(this,e[n],void 0,n))}}},{key:"notifyComplete",value:function(e){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(e,t,n){var r=this.values,i=this.toRespond?r[n]===Qk?--this.toRespond:this.toRespond:0;r[n]=t,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}},{key:"_tryResultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(Gk),eb=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),tb=i(3282);function nb(){return(0,tb.J)(1)(Fe.of.apply(void 0,arguments))}var rb=i(9193);function ib(e){return new Ve.y(function(t){var n;try{n=e()}catch(r){return void t.error(r)}return(n?(0,Zk.D)(n):(0,rb.c)()).subscribe(t)})}var ab=i(2441),ob=i(5345);function ub(e,t){return"function"==typeof t?function(n){return n.pipe(ub(function(n,r){return(0,Zk.D)(e(n,r)).pipe((0,Ge.U)(function(e,i){return t(n,e,r,i)}))}))}:function(t){return t.lift(new sb(e))}}var sb=function(){function e(t){v(this,e),this.project=t}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new cb(e,this.project))}}]),e}(),cb=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).project=r,i.index=0,i}return p(n,[{key:"_next",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}},{key:"_innerSub",value:function(e){var t=this.innerSubscription;t&&t.unsubscribe();var n=new ob.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,ob.ft)(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}},{key:"_complete",value:function(){var e=this.innerSubscription;e&&!e.closed||o(T(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=void 0}},{key:"notifyComplete",value:function(){this.innerSubscription=void 0,this.isStopped&&o(T(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(e){this.destination.next(e)}}]),n}(ob.Ds),lb=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}();function hb(e){return function(t){return 0===e?(0,rb.c)():t.lift(new fb(e))}}var fb=function(){function e(t){if(v(this,e),this.total=t,this.total<0)throw new lb}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new db(e,this.total))}}]),e}(),db=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).total=r,i.count=0,i}return p(n,[{key:"_next",value:function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}]),n}(je.L);function pb(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];return(0,zk.K)(r)?(t.pop(),function(e){return nb(t,e,r)}):function(e){return nb(t,e)}}function vb(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new gb(e,t,n))}}var gb=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];v(this,e),this.accumulator=t,this.seed=n,this.hasSeed=r}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new mb(e,this.accumulator,this.seed,this.hasSeed))}}]),e}(),mb=function(e){g(n,e);var t=m(n);function n(e,r,i,a){var o;return v(this,n),(o=t.call(this,e)).accumulator=r,o._seed=i,o.hasSeed=a,o.index=0,o}return p(n,[{key:"seed",get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e}},{key:"_next",value:function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(r){this.destination.error(r)}this.seed=t,this.destination.next(t)}}]),n}(je.L);function yb(e){return function(t){var n=new kb(e),r=t.lift(n);return n.caught=r}}var kb=function(){function e(t){v(this,e),this.selector=t}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new bb(e,this.selector,this.caught))}}]),e}(),bb=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e)).selector=r,a.caught=i,a}return p(n,[{key:"error",value:function(e){if(!this.isStopped){var t;try{t=this.selector(e,this.caught)}catch(a){return void o(T(n.prototype),"error",this).call(this,a)}this._unsubscribeAndRecycle();var r=new ob.IY(this);this.add(r);var i=(0,ob.ft)(t,r);i!==r&&this.add(i)}}}]),n}(ob.Ds);function wb(e){return function(t){return 0===e?(0,rb.c)():t.lift(new _b(e))}}var _b=function(){function e(t){if(v(this,e),this.total=t,this.total<0)throw new lb}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new xb(e,this.total))}}]),e}(),xb=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).total=r,i.ring=new Array,i.count=0,i}return p(n,[{key:"_next",value:function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}},{key:"_complete",value:function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var a=t++%n;e.next(r[a])}e.complete()}}]),n}(je.L);function Tb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Eb;return function(t){return t.lift(new Sb(e))}}var Sb=function(){function e(t){v(this,e),this.errorFactory=t}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new Ib(e,this.errorFactory))}}]),e}(),Ib=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).errorFactory=r,i.hasValue=!1,i}return p(n,[{key:"_next",value:function(e){this.hasValue=!0,this.destination.next(e)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}]),n}(je.L);function Eb(){return new eb}function Cb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return t.lift(new Rb(e))}}var Rb=function(){function e(t){v(this,e),this.defaultValue=t}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new Ab(e,this.defaultValue))}}]),e}(),Ab=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).defaultValue=r,i.isEmpty=!0,i}return p(n,[{key:"_next",value:function(e){this.isEmpty=!1,this.destination.next(e)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(je.L),Ob=i(4487);function Nb(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Be(function(t,n){return e(t,n,r)}):Ob.y,hb(1),n?Cb(t):Tb(function(){return new eb}))}}var Pb=i(3342),Db=i(1307),Lb=i(5319),Mb=function(){function e(t){v(this,e),this.callback=t}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new Ub(e,this.callback))}}]),e}(),Ub=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).add(new Lb.w(r)),i}return p(n)}(je.L),Fb=p(function e(t,n){v(this,e),this.id=t,this.url=n}),Vb=function(e){g(n,e);var t=m(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return v(this,n),(i=t.call(this,e,r)).navigationTrigger=a,i.restoredState=o,i}return p(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Fb),Zb=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e,r)).urlAfterRedirects=i,a}return p(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(Fb),qb=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e,r)).reason=i,a}return p(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Fb),jb=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e,r)).error=i,a}return p(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(Fb),Bb=function(e){g(n,e);var t=m(n);function n(e,r,i,a){var o;return v(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return p(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Fb),zb=function(e){g(n,e);var t=m(n);function n(e,r,i,a){var o;return v(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return p(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Fb),Hb=function(e){g(n,e);var t=m(n);function n(e,r,i,a,o){var u;return v(this,n),(u=t.call(this,e,r)).urlAfterRedirects=i,u.state=a,u.shouldActivate=o,u}return p(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(Fb),Gb=function(e){g(n,e);var t=m(n);function n(e,r,i,a){var o;return v(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return p(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Fb),Kb=function(e){g(n,e);var t=m(n);function n(e,r,i,a){var o;return v(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return p(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Fb),Wb=function(){function e(t){v(this,e),this.route=t}return p(e,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),e}(),Jb=function(){function e(t){v(this,e),this.route=t}return p(e,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),e}(),Yb=function(){function e(t){v(this,e),this.snapshot=t}return p(e,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Qb=function(){function e(t){v(this,e),this.snapshot=t}return p(e,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),$b=function(){function e(t){v(this,e),this.snapshot=t}return p(e,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Xb=function(){function e(t){v(this,e),this.snapshot=t}return p(e,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),ew=function(){function e(t,n,r){v(this,e),this.routerEvent=t,this.position=n,this.anchor=r}return p(e,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),e}(),tw=function(){function e(t){v(this,e),this.params=t||{}}return p(e,[{key:"has",value:function(e){return Object.prototype.hasOwnProperty.call(this.params,e)}},{key:"get",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t[0]:t}return null}},{key:"getAll",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t:[t]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),e}();function nw(e){return new tw(e)}function rw(e){var t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function iw(e,t,n){var r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;for(var i={},a=0;a<r.length;a++){var o=r[a],u=e[a];if(o.startsWith(":"))i[o.substring(1)]=u;else if(o!==u.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function aw(e,t){var n,r=e?Object.keys(e):void 0,i=t?Object.keys(t):void 0;if(!r||!i||r.length!=i.length)return!1;for(var a=0;a<r.length;a++)if(!ow(e[n=r[a]],t[n]))return!1;return!0}function ow(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;var n=s(e).sort(),r=s(t).sort();return n.every(function(e,t){return r[t]===e})}return e===t}function uw(e){return Array.prototype.concat.apply([],e)}function sw(e){return e.length>0?e[e.length-1]:null}function cw(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function lw(e){return(0,a.CqO)(e)?e:(0,a.QGY)(e)?(0,Zk.D)(Promise.resolve(e)):(0,Fe.of)(e)}var hw={exact:function e(t,n,r){if(!bw(t.segments,n.segments))return!1;if(!gw(t.segments,n.segments,r))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(var i in n.children){if(!t.children[i])return!1;if(!e(t.children[i],n.children[i],r))return!1}return!0},subset:pw},fw={exact:function(e,t){return aw(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(function(n){return ow(e[n],t[n])})},ignored:function(){return!0}};function dw(e,t,n){return hw[n.paths](e.root,t.root,n.matrixParams)&&fw[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function pw(e,t,n){return vw(e,t,t.segments,n)}function vw(e,t,n,r){if(e.segments.length>n.length){var i=e.segments.slice(0,n.length);return!!bw(i,n)&&!t.hasChildren()&&!!gw(i,n,r)}if(e.segments.length===n.length){if(!bw(e.segments,n))return!1;if(!gw(e.segments,n,r))return!1;for(var a in t.children){if(!e.children[a])return!1;if(!pw(e.children[a],t.children[a],r))return!1}return!0}var o=n.slice(0,e.segments.length),u=n.slice(e.segments.length);return!!bw(e.segments,o)&&!!gw(e.segments,o,r)&&!!e.children.primary&&vw(e.children.primary,t,u,r)}function gw(e,t,n){return t.every(function(t,r){return fw[n](e[r].parameters,t.parameters)})}var mw=function(){function e(t,n,r){v(this,e),this.root=t,this.queryParams=n,this.fragment=r}return p(e,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=nw(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return xw.serialize(this)}}]),e}(),yw=function(){function e(t,n){var r=this;v(this,e),this.segments=t,this.children=n,this.parent=null,cw(n,function(e,t){return e.parent=r})}return p(e,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return Tw(this)}}]),e}(),kw=function(){function e(t,n){v(this,e),this.path=t,this.parameters=n}return p(e,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=nw(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return Ow(this)}}]),e}();function bw(e,t){return e.length===t.length&&e.every(function(e,n){return e.path===t[n].path})}var ww=p(function e(){v(this,e)}),_w=function(){function e(){v(this,e)}return p(e,[{key:"parse",value:function(e){var t=new Mw(e);return new mw(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}},{key:"serialize",value:function(e){var t,n,r;return"/".concat(Sw(e.root,!0)).concat((n=e.queryParams,r=Object.keys(n).map(function(e){var t=n[e];return Array.isArray(t)?t.map(function(t){return"".concat(Ew(e),"=").concat(Ew(t))}).join("&"):"".concat(Ew(e),"=").concat(Ew(t))}).filter(function(e){return!!e}),r.length?"?".concat(r.join("&")):"")).concat("string"==typeof e.fragment?"#".concat((t=e.fragment,encodeURI(t))):"")}}]),e}(),xw=new _w;function Tw(e){return e.segments.map(function(e){return Ow(e)}).join("/")}function Sw(e,t){if(!e.hasChildren())return Tw(e);if(t){var n=e.children.primary?Sw(e.children.primary,!1):"",r=[];return cw(e.children,function(e,t){"primary"!==t&&r.push("".concat(t,":").concat(Sw(e,!1)))}),r.length>0?"".concat(n,"(").concat(r.join("//"),")"):n}var i=function(e,t){var n=[];return cw(e.children,function(e,r){"primary"===r&&(n=n.concat(t(e,r)))}),cw(e.children,function(e,r){"primary"!==r&&(n=n.concat(t(e,r)))}),n}(e,function(t,n){return"primary"===n?[Sw(e.children.primary,!1)]:["".concat(n,":").concat(Sw(t,!1))]});return 1===Object.keys(e.children).length&&null!=e.children.primary?"".concat(Tw(e),"/").concat(i[0]):"".concat(Tw(e),"/(").concat(i.join("//"),")")}function Iw(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ew(e){return Iw(e).replace(/%3B/gi,";")}function Cw(e){return Iw(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rw(e){return decodeURIComponent(e)}function Aw(e){return Rw(e.replace(/\+/g,"%20"))}function Ow(e){return"".concat(Cw(e.path)).concat((t=e.parameters,Object.keys(t).map(function(e){return";".concat(Cw(e),"=").concat(Cw(t[e]))}).join("")));var t}var Nw=/^[^\/()?;=#]+/;function Pw(e){var t=e.match(Nw);return t?t[0]:""}var Dw=/^[^=?&#]+/,Lw=/^[^?&#]+/,Mw=function(){function e(t){v(this,e),this.url=t,this.remaining=t}return p(e,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new yw([],{}):new yw([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new yw(e,t)),n}},{key:"parseSegment",value:function(){var e=Pw(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(e),new kw(Rw(e),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e}},{key:"parseParam",value:function(e){var t=Pw(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=Pw(this.remaining);r&&(n=r,this.capture(n))}e[Rw(t)]=Rw(n)}}},{key:"parseQueryParam",value:function(e){var t=function(e){var t=e.match(Dw);return t?t[0]:""}(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=function(e){var t=e.match(Lw);return t?t[0]:""}(this.remaining);r&&(n=r,this.capture(n))}var i=Aw(t),a=Aw(n);if(e.hasOwnProperty(i)){var o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(a)}else e[i]=a}}},{key:"parseParens",value:function(e){var t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=Pw(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i="primary");var a=this.parseChildren();t[i]=1===Object.keys(a).length?a.primary:new yw([],a),this.consumeOptional("//")}return t}},{key:"peekStartsWith",value:function(e){return this.remaining.startsWith(e)}},{key:"consumeOptional",value:function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}},{key:"capture",value:function(e){if(!this.consumeOptional(e))throw new Error('Expected "'.concat(e,'".'))}}]),e}(),Uw=function(){function e(t){v(this,e),this._root=t}return p(e,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(e){var t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}},{key:"children",value:function(e){var t=Fw(e,this._root);return t?t.children.map(function(e){return e.value}):[]}},{key:"firstChild",value:function(e){var t=Fw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}},{key:"siblings",value:function(e){var t=Vw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(function(e){return e.value}).filter(function(t){return t!==e})}},{key:"pathFromRoot",value:function(e){return Vw(e,this._root).map(function(e){return e.value})}}]),e}();function Fw(e,t){if(e===t.value)return t;var n,r=l(t.children);try{for(r.s();!(n=r.n()).done;){var i=Fw(e,n.value);if(i)return i}}catch(a){r.e(a)}finally{r.f()}return null}function Vw(e,t){if(e===t.value)return[t];var n,r=l(t.children);try{for(r.s();!(n=r.n()).done;){var i=Vw(e,n.value);if(i.length)return i.unshift(t),i}}catch(a){r.e(a)}finally{r.f()}return[]}var Zw=function(){function e(t,n){v(this,e),this.value=t,this.children=n}return p(e,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),e}();function qw(e){var t={};return e&&e.children.forEach(function(e){return t[e.value.outlet]=e}),t}var jw=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).snapshot=r,Ww(k(i),e),i}return p(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(Uw);function Bw(e,t){var n=function(e,t){var n=new Gw([],{},{},"",{},"primary",t,null,e.root,-1,{});return new Kw("",new Zw(n,[]))}(e,t),r=new Bk([new kw("",{})]),i=new Bk({}),a=new Bk({}),o=new Bk({}),u=new Bk(""),s=new zw(r,i,o,u,a,"primary",t,n.root);return s.snapshot=n.root,new jw(new Zw(s,[]),n)}var zw=function(){function e(t,n,r,i,a,o,u,s){v(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=o,this.component=u,this._futureSnapshot=s}return p(e,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ge.U)(function(e){return nw(e)}))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ge.U)(function(e){return nw(e)}))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),e}();function Hw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=e.pathFromRoot,r=0;if("always"!==t)for(r=n.length-1;r>=1;){var i=n[r],a=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function(e){return e.reduce(function(e,t){return{params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(r))}var Gw=function(){function e(t,n,r,i,a,o,u,s,c,l,h){v(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=o,this.component=u,this.routeConfig=s,this._urlSegment=c,this._lastPathIndex=l,this._resolve=h}return p(e,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=nw(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=nw(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return"Route(url:'".concat(this.url.map(function(e){return e.toString()}).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}}]),e}(),Kw=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,r)).url=e,Ww(k(i),r),i}return p(n,[{key:"toString",value:function(){return Jw(this._root)}}]),n}(Uw);function Ww(e,t){t.value._routerState=e,t.children.forEach(function(t){return Ww(e,t)})}function Jw(e){var t=e.children.length>0?" { ".concat(e.children.map(Jw).join(", ")," } "):"";return"".concat(e.value).concat(t)}function Yw(e){if(e.snapshot){var t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,aw(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),aw(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!aw(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),aw(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Qw(e,t){return aw(e.params,t.params)&&function(e,t){return bw(e,t)&&e.every(function(e,n){return aw(e.parameters,t[n].parameters)})}(e.url,t.url)&&!(!e.parent!=!t.parent)&&(!e.parent||Qw(e.parent,t.parent))}function $w(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){var r=n.value;r._futureSnapshot=t.value;var i=function(e,t,n){return t.children.map(function(t){var r,i=l(n.children);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(e.shouldReuseRoute(t.value,a.value.snapshot))return $w(e,t,a)}}catch(o){i.e(o)}finally{i.f()}return $w(e,t)})}(e,t,n);return new Zw(r,i)}if(e.shouldAttach(t.value)){var a=e.retrieve(t.value);if(null!==a){var o=a.route;return Xw(t,o),o}}var u,s=new zw(new Bk((u=t.value).url),new Bk(u.params),new Bk(u.queryParams),new Bk(u.fragment),new Bk(u.data),u.outlet,u.component,u),c=t.children.map(function(t){return $w(e,t)});return new Zw(s,c)}function Xw(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(var n=0;n<e.children.length;++n)Xw(e.children[n],t.children[n])}function e_(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function t_(e){return"object"==typeof e&&null!=e&&e.outlets}function n_(e,t,n,r,i){var a={};return r&&cw(r,function(e,t){a[t]=Array.isArray(e)?e.map(function(e){return"".concat(e)}):"".concat(e)}),new mw(n.root===e?t:r_(n.root,e,t),a,i)}function r_(e,t,n){var r={};return cw(e.children,function(e,i){r[i]=e===t?n:r_(e,t,n)}),new yw(e.segments,r)}var i_=function(){function e(t,n,r){if(v(this,e),this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&e_(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find(t_);if(i&&i!==sw(r))throw new Error("{outlets:{}} has to be the last command")}return p(e,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),e}(),a_=p(function e(t,n,r){v(this,e),this.segmentGroup=t,this.processChildren=n,this.index=r});function o_(e,t,n){if(e||(e=new yw([],{})),0===e.segments.length&&e.hasChildren())return u_(e,t,n);var r=function(e,t,n){for(var r=0,i=t,a={match:!1,pathIndex:0,commandIndex:0};i<e.segments.length;){if(r>=n.length)return a;var o=e.segments[i],u=n[r];if(t_(u))break;var s="".concat(u),c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&c&&"object"==typeof c&&void 0===c.outlets){if(!h_(s,c,o))return a;r+=2}else{if(!h_(s,{},o))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){var a=new yw(e.segments.slice(0,r.pathIndex),{});return a.children.primary=new yw(e.segments.slice(r.pathIndex),e.children),u_(a,0,i)}return r.match&&0===i.length?new yw(e.segments,{}):r.match&&!e.hasChildren()?s_(e,t,n):r.match?u_(e,0,i):s_(e,t,n)}function u_(e,t,n){if(0===n.length)return new yw(e.segments,{});var r=function(e){return t_(e[0])?e[0].outlets:{primary:e}}(n),i={};return cw(r,function(n,r){"string"==typeof n&&(n=[n]),null!==n&&(i[r]=o_(e.children[r],t,n))}),cw(e.children,function(e,t){void 0===r[t]&&(i[t]=e)}),new yw(e.segments,i)}function s_(e,t,n){for(var r=e.segments.slice(0,t),i=0;i<n.length;){var a=n[i];if(t_(a)){var o=c_(a.outlets);return new yw(r,o)}if(0===i&&e_(n[0]))r.push(new kw(e.segments[t].path,l_(n[0]))),i++;else{var u=t_(a)?a.outlets.primary:"".concat(a),s=i<n.length-1?n[i+1]:null;u&&s&&e_(s)?(r.push(new kw(u,l_(s))),i+=2):(r.push(new kw(u,{})),i++)}}return new yw(r,{})}function c_(e){var t={};return cw(e,function(e,n){"string"==typeof e&&(e=[e]),null!==e&&(t[n]=s_(new yw([],{}),0,e))}),t}function l_(e){var t={};return cw(e,function(e,n){return t[n]="".concat(e)}),t}function h_(e,t,n){return e==n.path&&aw(t,n.parameters)}var f_=function(){function e(t,n,r,i){v(this,e),this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}return p(e,[{key:"activate",value:function(e){var t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Yw(this.futureState.root),this.activateChildRoutes(t,n,e)}},{key:"deactivateChildRoutes",value:function(e,t,n){var r=this,i=qw(t);e.children.forEach(function(e){var t=e.value.outlet;r.deactivateRoutes(e,i[t],n),delete i[t]}),cw(i,function(e,t){r.deactivateRouteAndItsChildren(e,n)})}},{key:"deactivateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(r===i)if(r.component){var a=n.getContext(r.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}},{key:"deactivateRouteAndItsChildren",value:function(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}},{key:"detachAndStoreRouteSubtree",value:function(e,t){var n=t.getContext(e.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:r,route:e,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(e,t){for(var n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,i=qw(e),a=0,o=Object.keys(i);a<o.length;a++){var u=o[a];this.deactivateRouteAndItsChildren(i[u],r)}n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}},{key:"activateChildRoutes",value:function(e,t,n){var r=this,i=qw(t);e.children.forEach(function(e){r.activateRoutes(e,i[e.value.outlet],n),r.forwardEvent(new Xb(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Qb(e.value.snapshot))}},{key:"activateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(Yw(r),r===i)if(r.component){var a=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,n);else if(r.component){var o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var u=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(u.contexts),o.attachRef=u.componentRef,o.route=u.route.value,o.outlet&&o.outlet.attach(u.componentRef,u.route.value),d_(u.route)}else{var s=function(e){for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),c=s?s.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=c,o.outlet&&o.outlet.activateWith(r,c),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,n)}}]),e}();function d_(e){Yw(e.value),e.children.forEach(d_)}var p_=p(function e(t,n){v(this,e),this.routes=t,this.module=n});function v_(e){return"function"==typeof e}function g_(e){return e instanceof mw}var m_=Symbol("INITIAL_VALUE");function y_(){return ub(function(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i;return(0,zk.K)(t[t.length-1])&&(i=t.pop()),"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&(0,Hk.k)(t[0])&&(t=t[0]),(0,Yk.n)(t,i).lift(new $k(r))}(e.map(function(e){return e.pipe(hb(1),pb(m_))})).pipe(vb(function(e,t){var n=!1;return t.reduce(function(e,r,i){if(e!==m_)return e;if(r===m_&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||g_(r))return r}return e},e)},m_),Be(function(e){return e!==m_}),(0,Ge.U)(function(e){return g_(e)?e:!0===e}),hb(1))})}var k_=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&a._UZ(0,"router-outlet")},directives:function(){return[gx]},encapsulation:2}),e}();function b_(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<e.length;n++){var r=e[n];w_(r,__(t,r))}}function w_(e,t){e.children&&b_(e.children,t)}function __(e,t){return t?e||t.path?e&&!t.path?"".concat(e,"/"):!e&&t.path?t.path:"".concat(e,"/").concat(t.path):"":e}function x_(e){var t=e.children&&e.children.map(x_),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=k_),n}function T_(e){return e.outlet||"primary"}function S_(e,t){var n=e.filter(function(e){return T_(e)===t});return n.push.apply(n,s(e.filter(function(e){return T_(e)!==t}))),n}var I_={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function E_(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},I_):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};var i=(t.matcher||iw)(n,e,t);if(!i)return Object.assign({},I_);var a={};cw(i.posParams,function(e,t){a[t]=e.path});var o=i.consumed.length>0?Object.assign(Object.assign({},a),i.consumed[i.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function C_(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"corrected";if(n.length>0&&function(e,t,n){return n.some(function(n){return R_(e,t,n)&&"primary"!==T_(n)})}(e,n,r)){var a=new yw(t,function(e,t,n,r){var i={};i.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;var a,o=l(n);try{for(o.s();!(a=o.n()).done;){var u=a.value;if(""===u.path&&"primary"!==T_(u)){var s=new yw([],{});s._sourceSegment=e,s._segmentIndexShift=t.length,i[T_(u)]=s}}}catch(c){o.e(c)}finally{o.f()}return i}(e,t,r,new yw(n,e.children)));return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(function(n){return R_(e,t,n)})}(e,n,r)){var o=new yw(e.segments,function(e,t,n,r,i,a){var o,u={},s=l(r);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(R_(e,n,c)&&!i[T_(c)]){var h=new yw([],{});h._sourceSegment=e,h._segmentIndexShift="legacy"===a?e.segments.length:t.length,u[T_(c)]=h}}}catch(f){s.e(f)}finally{s.f()}return Object.assign(Object.assign({},i),u)}(e,t,n,r,e.children,i));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}var u=new yw(e.segments,e.children);return u._sourceSegment=e,u._segmentIndexShift=t.length,{segmentGroup:u,slicedSegments:n}}function R_(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function A_(e,t,n,r){return!!(T_(e)===r||"primary"!==r&&R_(t,n,e))&&("**"===e.path||E_(t,e,n).matched)}function O_(e,t,n){return 0===t.length&&!e.children[n]}var N_=p(function e(t){v(this,e),this.segmentGroup=t||null}),P_=p(function e(t){v(this,e),this.urlTree=t});function D_(e){return new Ve.y(function(t){return t.error(new N_(e))})}function L_(e){return new Ve.y(function(t){return t.error(new P_(e))})}function M_(e){return new Ve.y(function(t){return t.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(e,"'")))})}var U_=function(){function e(t,n,r,i,o){v(this,e),this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(a.h0i)}return p(e,[{key:"apply",value:function(){var e=this,t=C_(this.urlTree.root,[],[],this.config).segmentGroup,n=new yw(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,n,"primary").pipe((0,Ge.U)(function(t){return e.createUrlTree(F_(t),e.urlTree.queryParams,e.urlTree.fragment)})).pipe(yb(function(t){if(t instanceof P_)return e.allowRedirects=!1,e.match(t.urlTree);if(t instanceof N_)throw e.noMatchError(t);throw t}))}},{key:"match",value:function(e){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe((0,Ge.U)(function(n){return t.createUrlTree(F_(n),e.queryParams,e.fragment)})).pipe(yb(function(e){if(e instanceof N_)throw t.noMatchError(e);throw e}))}},{key:"noMatchError",value:function(e){return new Error("Cannot match any routes. URL Segment: '".concat(e.segmentGroup,"'"))}},{key:"createUrlTree",value:function(e,t,n){var r=e.segments.length>0?new yw([],{primary:e}):e;return new mw(r,t,n)}},{key:"expandSegmentGroup",value:function(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe((0,Ge.U)(function(e){return new yw([],e)})):this.expandSegment(e,n,t,n.segments,r,!0)}},{key:"expandChildren",value:function(e,t,n){for(var r=this,i=[],a=0,o=Object.keys(n.children);a<o.length;a++){var u=o[a];"primary"===u?i.unshift(u):i.push(u)}return(0,Zk.D)(i).pipe(qe(function(i){var a=n.children[i],o=S_(t,i);return r.expandSegmentGroup(e,o,a,i).pipe((0,Ge.U)(function(e){return{segment:e,outlet:i}}))}),vb(function(e,t){return e[t.outlet]=t.segment,e},{}),function(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Be(function(t,n){return e(t,n,r)}):Ob.y,wb(1),n?Cb(t):Tb(function(){return new eb}))}}())}},{key:"expandSegment",value:function(e,t,n,r,i,a){var o=this;return(0,Zk.D)(n).pipe(qe(function(u){return o.expandSegmentAgainstRoute(e,t,n,u,r,i,a).pipe(yb(function(e){if(e instanceof N_)return(0,Fe.of)(null);throw e}))}),Nb(function(e){return!!e}),yb(function(e,n){if(e instanceof eb||"EmptyError"===e.name){if(O_(t,r,i))return(0,Fe.of)(new yw([],{}));throw new N_(t)}throw e}))}},{key:"expandSegmentAgainstRoute",value:function(e,t,n,r,i,a,o){return A_(r,t,i,a)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i,a):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,a):D_(t):D_(t)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,a){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,a):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,a)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(e,t,n,r){var i=this,a=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?L_(a):this.lineralizeSegments(n,a).pipe((0,Ze.zg)(function(n){var a=new yw(n,{});return i.expandSegment(e,a,t,n,r,!1)}))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,a){var o=this,u=E_(t,r,i),s=u.matched,c=u.consumedSegments,l=u.lastChild,h=u.positionalParamSegments;if(!s)return D_(t);var f=this.applyRedirectCommands(c,r.redirectTo,h);return r.redirectTo.startsWith("/")?L_(f):this.lineralizeSegments(r,f).pipe((0,Ze.zg)(function(r){return o.expandSegment(e,t,n,r.concat(i.slice(l)),a,!1)}))}},{key:"matchSegmentAgainstRoute",value:function(e,t,n,r,i){var a=this;if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,Fe.of)(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe((0,Ge.U)(function(e){return n._loadedConfig=e,new yw(r,{})})):(0,Fe.of)(new yw(r,{}));var o=E_(t,n,r),u=o.matched,s=o.consumedSegments,c=o.lastChild;if(!u)return D_(t);var l=r.slice(c);return this.getChildConfig(e,n,r).pipe((0,Ze.zg)(function(e){var r=e.module,o=e.routes,u=C_(t,s,l,o),c=u.segmentGroup,h=u.slicedSegments,f=new yw(c.segments,c.children);if(0===h.length&&f.hasChildren())return a.expandChildren(r,o,f).pipe((0,Ge.U)(function(e){return new yw(s,e)}));if(0===o.length&&0===h.length)return(0,Fe.of)(new yw(s,{}));var d=T_(n)===i;return a.expandSegment(r,f,o,h,d?"primary":i,!0).pipe((0,Ge.U)(function(e){return new yw(s.concat(e.segments),e.children)}))}))}},{key:"getChildConfig",value:function(e,t,n){var r=this;return t.children?(0,Fe.of)(new p_(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,Fe.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe((0,Ze.zg)(function(n){return n?r.configLoader.load(e.injector,t).pipe((0,Ge.U)(function(e){return t._loadedConfig=e,e})):function(e){return new Ve.y(function(t){return t.error(rw("Cannot load children because the guard of the route \"path: '".concat(e.path,"'\" returned false")))})}(t)})):(0,Fe.of)(new p_([],e))}},{key:"runCanLoadGuards",value:function(e,t,n){var r=this,i=t.canLoad;if(!i||0===i.length)return(0,Fe.of)(!0);var a=i.map(function(r){var i,a=e.get(r);if(function(e){return e&&v_(e.canLoad)}(a))i=a.canLoad(t,n);else{if(!v_(a))throw new Error("Invalid CanLoad guard");i=a(t,n)}return lw(i)});return(0,Fe.of)(a).pipe(y_(),(0,Pb.b)(function(e){if(g_(e)){var t=rw('Redirecting to "'.concat(r.urlSerializer.serialize(e),'"'));throw t.url=e,t}}),(0,Ge.U)(function(e){return!0===e}))}},{key:"lineralizeSegments",value:function(e,t){for(var n=[],r=t.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,Fe.of)(n);if(r.numberOfChildren>1||!r.children.primary)return M_(e.redirectTo);r=r.children.primary}}},{key:"applyRedirectCommands",value:function(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}},{key:"applyRedirectCreatreUrlTree",value:function(e,t,n,r){var i=this.createSegmentGroup(e,t.root,n,r);return new mw(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}},{key:"createQueryParams",value:function(e,t){var n={};return cw(e,function(e,r){if("string"==typeof e&&e.startsWith(":")){var i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}},{key:"createSegmentGroup",value:function(e,t,n,r){var i=this,a=this.createSegments(e,t.segments,n,r),o={};return cw(t.children,function(t,a){o[a]=i.createSegmentGroup(e,t,n,r)}),new yw(a,o)}},{key:"createSegments",value:function(e,t,n,r){var i=this;return t.map(function(t){return t.path.startsWith(":")?i.findPosParam(e,t,r):i.findOrReturn(t,n)})}},{key:"findPosParam",value:function(e,t,n){var r=n[t.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(e,"'. Cannot find '").concat(t.path,"'."));return r}},{key:"findOrReturn",value:function(e,t){var n,r=0,i=l(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.path===e.path)return t.splice(r),a;r++}}catch(o){i.e(o)}finally{i.f()}return e}}]),e}();function F_(e){for(var t={},n=0,r=Object.keys(e.children);n<r.length;n++){var i=r[n],a=F_(e.children[i]);(a.segments.length>0||a.hasChildren())&&(t[i]=a)}return function(e){if(1===e.numberOfChildren&&e.children.primary){var t=e.children.primary;return new yw(e.segments.concat(t.segments),t.children)}return e}(new yw(e.segments,t))}var V_=p(function e(t){v(this,e),this.path=t,this.route=this.path[this.path.length-1]}),Z_=p(function e(t,n){v(this,e),this.component=t,this.route=n});function q_(e,t,n){var r=e._root;return B_(r,t?t._root:null,n,[r.value])}function j_(e,t,n){var r=function(e){if(!e)return null;for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function B_(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=qw(t);return e.children.forEach(function(e){!function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=e.value,o=t?t.value:null,u=n?n.getContext(e.value.outlet):null;if(o&&a.routeConfig===o.routeConfig){var s=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!bw(e.url,t.url);case"pathParamsOrQueryParamsChange":return!bw(e.url,t.url)||!aw(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qw(e,t)||!aw(e.queryParams,t.queryParams);case"paramsChange":default:return!Qw(e,t)}}(o,a,a.routeConfig.runGuardsAndResolvers);s?i.canActivateChecks.push(new V_(r)):(a.data=o.data,a._resolvedData=o._resolvedData),B_(e,t,a.component?u?u.children:null:n,r,i),s&&u&&u.outlet&&u.outlet.isActivated&&i.canDeactivateChecks.push(new Z_(u.outlet.component,o))}else o&&z_(t,u,i),i.canActivateChecks.push(new V_(r)),B_(e,null,a.component?u?u.children:null:n,r,i)}(e,a[e.value.outlet],n,r.concat([e.value]),i),delete a[e.value.outlet]}),cw(a,function(e,t){return z_(e,n.getContext(t),i)}),i}function z_(e,t,n){var r=qw(e),i=e.value;cw(r,function(e,r){z_(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new Z_(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}var H_=p(function e(){v(this,e)});function G_(e){return new Ve.y(function(t){return t.error(e)})}var K_=function(){function e(t,n,r,i,a,o){v(this,e),this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=o}return p(e,[{key:"recognize",value:function(){var e=C_(this.urlTree.root,[],[],this.config.filter(function(e){return void 0===e.redirectTo}),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,"primary");if(null===t)return null;var n=new Gw([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Zw(n,t),i=new Kw(this.url,r);return this.inheritParamsAndData(i._root),i}},{key:"inheritParamsAndData",value:function(e){var t=this,n=e.value,r=Hw(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(function(e){return t.inheritParamsAndData(e)})}},{key:"processSegmentGroup",value:function(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}},{key:"processChildren",value:function(e,t){for(var n=[],r=0,i=Object.keys(t.children);r<i.length;r++){var a=i[r],o=t.children[a],u=S_(e,a),c=this.processSegmentGroup(u,o,a);if(null===c)return null;n.push.apply(n,s(c))}var l=W_(n);return l.sort(function(e,t){return"primary"===e.value.outlet?-1:"primary"===t.value.outlet?1:e.value.outlet.localeCompare(t.value.outlet)}),l}},{key:"processSegment",value:function(e,t,n,r){var i,a=l(e);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=this.processSegmentAgainstRoute(o,t,n,r);if(null!==u)return u}}catch(s){a.e(s)}finally{a.f()}return O_(t,n,r)?[]:null}},{key:"processSegmentAgainstRoute",value:function(e,t,n,r){if(e.redirectTo||!A_(e,t,n,r))return null;var i,a=[],o=[];if("**"===e.path){var u=n.length>0?sw(n).parameters:{};i=new Gw(n,u,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Q_(e),T_(e),e.component,e,J_(t),Y_(t)+n.length,$_(e))}else{var s=E_(t,e,n);if(!s.matched)return null;a=s.consumedSegments,o=n.slice(s.lastChild),i=new Gw(a,s.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Q_(e),T_(e),e.component,e,J_(t),Y_(t)+a.length,$_(e))}var c=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),l=C_(t,a,o,c.filter(function(e){return void 0===e.redirectTo}),this.relativeLinkResolution),h=l.segmentGroup,f=l.slicedSegments;if(0===f.length&&h.hasChildren()){var d=this.processChildren(c,h);return null===d?null:[new Zw(i,d)]}if(0===c.length&&0===f.length)return[new Zw(i,[])];var p=T_(e)===r,v=this.processSegment(c,h,f,p?"primary":r);return null===v?null:[new Zw(i,v)]}}]),e}();function W_(e){var t,n=[],r=new Set,i=l(e);try{var a=function(){var e,i=t.value;if(!function(e){var t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}(i))return n.push(i),"continue";var a=n.find(function(e){return i.value.routeConfig===e.value.routeConfig});void 0!==a?((e=a.children).push.apply(e,s(i.children)),r.add(a)):n.push(i)};for(i.s();!(t=i.n()).done;)a()}catch(f){i.e(f)}finally{i.f()}var o,u=l(r);try{for(u.s();!(o=u.n()).done;){var c=o.value,h=W_(c.children);n.push(new Zw(c.value,h))}}catch(f){u.e(f)}finally{u.f()}return n.filter(function(e){return!r.has(e)})}function J_(e){for(var t=e;t._sourceSegment;)t=t._sourceSegment;return t}function Y_(e){for(var t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function Q_(e){return e.data||{}}function $_(e){return e.resolve||{}}function X_(e){return ub(function(t){var n=e(t);return n?(0,Zk.D)(n).pipe((0,Ge.U)(function(){return t})):(0,Fe.of)(t)})}var ex=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n)}(function(){function e(){v(this,e)}return p(e,[{key:"shouldDetach",value:function(e){return!1}},{key:"store",value:function(e,t){}},{key:"shouldAttach",value:function(e){return!1}},{key:"retrieve",value:function(e){return null}},{key:"shouldReuseRoute",value:function(e,t){return e.routeConfig===t.routeConfig}}]),e}()),tx=new a.OlP("ROUTES"),nx=function(){function e(t,n,r,i){v(this,e),this.loader=t,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return p(e,[{key:"load",value:function(e,t){var n=this;if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);var r=this.loadModuleFactory(t.loadChildren).pipe((0,Ge.U)(function(r){n.onLoadEndListener&&n.onLoadEndListener(t);var i=r.create(e);return new p_(uw(i.injector.get(tx,void 0,a.XFs.Self|a.XFs.Optional)).map(x_),i)}),yb(function(e){throw t._loader$=void 0,e}));return t._loader$=new ab.c(r,function(){return new qk.xQ}).pipe((0,Db.x)()),t._loader$}},{key:"loadModuleFactory",value:function(e){var t=this;return"string"==typeof e?(0,Zk.D)(this.loader.load(e)):lw(e()).pipe((0,Ze.zg)(function(e){return e instanceof a.YKP?(0,Fe.of)(e):(0,Zk.D)(t.compiler.compileModuleAsync(e))}))}}]),e}(),rx=p(function e(){v(this,e),this.outlet=null,this.route=null,this.resolver=null,this.children=new ix,this.attachRef=null}),ix=function(){function e(){v(this,e),this.contexts=new Map}return p(e,[{key:"onChildOutletCreated",value:function(e,t){var n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}},{key:"onChildOutletDestroyed",value:function(e){var t=this.getContext(e);t&&(t.outlet=null)}},{key:"onOutletDeactivated",value:function(){var e=this.contexts;return this.contexts=new Map,e}},{key:"onOutletReAttached",value:function(e){this.contexts=e}},{key:"getOrCreateContext",value:function(e){var t=this.getContext(e);return t||(t=new rx,this.contexts.set(e,t)),t}},{key:"getContext",value:function(e){return this.contexts.get(e)||null}}]),e}(),ax=function(){function e(){v(this,e)}return p(e,[{key:"shouldProcessUrl",value:function(e){return!0}},{key:"extract",value:function(e){return e}},{key:"merge",value:function(e,t){return e}}]),e}();function ox(e){throw e}function ux(e,t,n){return t.parse("/")}function sx(e,t){return(0,Fe.of)(null)}var cx={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lx={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},hx=function(){var e=function(){function e(t,n,r,i,o,u,s,c){var l=this;v(this,e),this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=r,this.location=i,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new qk.xQ,this.errorHandler=ox,this.malformedUriErrorHandler=ux,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:sx,afterPreactivation:sx},this.urlHandlingStrategy=new ax,this.routeReuseStrategy=new ex,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(a.h0i),this.console=o.get(a.c2e);var h=o.get(a.R0b);this.isNgZoneEnabled=h instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=new mw(new yw([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new nx(u,s,function(e){return l.triggerEvent(new Wb(e))},function(e){return l.triggerEvent(new Jb(e))}),this.routerState=Bw(this.currentUrlTree,this.rootComponentType),this.transitions=new Bk({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return p(e,[{key:"browserPageId",get:function(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}},{key:"setupNavigations",value:function(e){var t=this,n=this.events;return e.pipe(Be(function(e){return 0!==e.id}),(0,Ge.U)(function(e){return Object.assign(Object.assign({},e),{extractedUrl:t.urlHandlingStrategy.extract(e.rawUrl)})}),ub(function(e){var r,i,a,o,u=!1,s=!1;return(0,Fe.of)(e).pipe((0,Pb.b)(function(e){t.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:t.lastSuccessfulNavigation?Object.assign(Object.assign({},t.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ub(function(e){var r,i,a,o,u=!t.navigated||e.extractedUrl.toString()!==t.browserUrlTree.toString();if(("reload"===t.onSameUrlNavigation||u)&&t.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return(0,Fe.of)(e).pipe(ub(function(e){var r=t.transitions.getValue();return n.next(new Vb(e.id,t.serializeUrl(e.extractedUrl),e.source,e.restoredState)),r!==t.transitions.getValue()?rb.E:Promise.resolve(e)}),(r=t.ngModule.injector,i=t.configLoader,a=t.urlSerializer,o=t.config,ub(function(e){return function(e,t,n,r,i){return new U_(e,t,n,r,i).apply()}(r,i,a,e.extractedUrl,o).pipe((0,Ge.U)(function(t){return Object.assign(Object.assign({},e),{urlAfterRedirects:t})}))})),(0,Pb.b)(function(e){t.currentNavigation=Object.assign(Object.assign({},t.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,n,r,i,a){return(0,Ze.zg)(function(r){return function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";try{var o=new K_(e,t,n,r,i,a).recognize();return null===o?G_(new H_):(0,Fe.of)(o)}catch(u){return G_(u)}}(e,n,r.urlAfterRedirects,(o=r.urlAfterRedirects,t.serializeUrl(o)),i,a).pipe((0,Ge.U)(function(e){return Object.assign(Object.assign({},r),{targetSnapshot:e})}));var o})}(t.rootComponentType,t.config,0,t.paramsInheritanceStrategy,t.relativeLinkResolution),(0,Pb.b)(function(e){"eager"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(e.urlAfterRedirects,e),t.browserUrlTree=e.urlAfterRedirects);var r=new Bb(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.next(r)}));if(u&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){var s=e.id,c=e.extractedUrl,l=e.source,h=e.restoredState,f=e.extras,d=new Vb(s,t.serializeUrl(c),l,h);n.next(d);var p=Bw(c,t.rootComponentType).snapshot;return(0,Fe.of)(Object.assign(Object.assign({},e),{targetSnapshot:p,urlAfterRedirects:c,extras:Object.assign(Object.assign({},f),{skipLocationChange:!1,replaceUrl:!1})}))}return t.rawUrlTree=e.rawUrl,t.browserUrlTree=e.urlAfterRedirects,e.resolve(null),rb.E}),X_(function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,a=e.rawUrl,o=e.extras,u=o.skipLocationChange,s=o.replaceUrl;return t.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:a,skipLocationChange:!!u,replaceUrl:!!s})}),(0,Pb.b)(function(e){var n=new zb(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}),(0,Ge.U)(function(e){return Object.assign(Object.assign({},e),{guards:q_(e.targetSnapshot,e.currentSnapshot,t.rootContexts)})}),function(e,t){return(0,Ze.zg)(function(n){var r=n.targetSnapshot,i=n.currentSnapshot,a=n.guards,o=a.canActivateChecks,u=a.canDeactivateChecks;return 0===u.length&&0===o.length?(0,Fe.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return(0,Zk.D)(e).pipe((0,Ze.zg)(function(e){return function(e,t,n,r,i){var a=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,Fe.of)(!0);var o=a.map(function(a){var o,u=j_(a,t,i);if(function(e){return e&&v_(e.canDeactivate)}(u))o=lw(u.canDeactivate(e,t,n,r));else{if(!v_(u))throw new Error("Invalid CanDeactivate guard");o=lw(u(e,t,n,r))}return o.pipe(Nb())});return(0,Fe.of)(o).pipe(y_())}(e.component,e.route,n,t,r)}),Nb(function(e){return!0!==e},!0))}(u,r,i,e).pipe((0,Ze.zg)(function(n){return n&&function(e){return"boolean"==typeof e}(n)?function(e,t,n,r){return(0,Zk.D)(t).pipe(qe(function(t){return nb(function(e,t){return null!==e&&t&&t(new Yb(e)),(0,Fe.of)(!0)}(t.route.parent,r),function(e,t){return null!==e&&t&&t(new $b(e)),(0,Fe.of)(!0)}(t.route,r),function(e,t,n){var r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(function(e){return function(e){var t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)}).filter(function(e){return null!==e}).map(function(t){return ib(function(){var i=t.guards.map(function(i){var a,o=j_(i,t.node,n);if(function(e){return e&&v_(e.canActivateChild)}(o))a=lw(o.canActivateChild(r,e));else{if(!v_(o))throw new Error("Invalid CanActivateChild guard");a=lw(o(r,e))}return a.pipe(Nb())});return(0,Fe.of)(i).pipe(y_())})});return(0,Fe.of)(i).pipe(y_())}(e,t.path,n),function(e,t,n){var r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Fe.of)(!0);var i=r.map(function(r){return ib(function(){var i,a=j_(r,t,n);if(function(e){return e&&v_(e.canActivate)}(a))i=lw(a.canActivate(t,e));else{if(!v_(a))throw new Error("Invalid CanActivate guard");i=lw(a(t,e))}return i.pipe(Nb())})});return(0,Fe.of)(i).pipe(y_())}(e,t.route,n))}),Nb(function(e){return!0!==e},!0))}(r,o,e,t):(0,Fe.of)(n)}),(0,Ge.U)(function(e){return Object.assign(Object.assign({},n),{guardsResult:e})}))})}(t.ngModule.injector,function(e){return t.triggerEvent(e)}),(0,Pb.b)(function(e){if(g_(e.guardsResult)){var n=rw('Redirecting to "'.concat(t.serializeUrl(e.guardsResult),'"'));throw n.url=e.guardsResult,n}var r=new Hb(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);t.triggerEvent(r)}),Be(function(e){return!!e.guardsResult||(t.restoreHistory(e),t.cancelNavigationTransition(e,""),!1)}),X_(function(e){if(e.guards.canActivateChecks.length)return(0,Fe.of)(e).pipe((0,Pb.b)(function(e){var n=new Gb(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}),ub(function(e){var n,r,i=!1;return(0,Fe.of)(e).pipe((n=t.paramsInheritanceStrategy,r=t.ngModule.injector,(0,Ze.zg)(function(e){var t=e.targetSnapshot,i=e.guards.canActivateChecks;if(!i.length)return(0,Fe.of)(e);var a=0;return(0,Zk.D)(i).pipe(qe(function(e){return function(e,t,n,r){return function(e,t,n,r){var i=Object.keys(e);if(0===i.length)return(0,Fe.of)({});var a={};return(0,Zk.D)(i).pipe((0,Ze.zg)(function(i){return function(e,t,n,r){var i=j_(e,t,r);return lw(i.resolve?i.resolve(t,n):i(t,n))}(e[i],t,n,r).pipe((0,Pb.b)(function(e){a[i]=e}))}),wb(1),(0,Ze.zg)(function(){return Object.keys(a).length===i.length?(0,Fe.of)(a):rb.E}))}(e._resolve,e,t,r).pipe((0,Ge.U)(function(t){return e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),Hw(e,n).resolve),null}))}(e.route,t,n,r)}),(0,Pb.b)(function(){return a++}),wb(1),(0,Ze.zg)(function(t){return a===i.length?(0,Fe.of)(e):rb.E}))})),(0,Pb.b)({next:function(){return i=!0},complete:function(){i||(t.restoreHistory(e),t.cancelNavigationTransition(e,"At least one route resolver didn't emit any value."))}}))}),(0,Pb.b)(function(e){var n=new Kb(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}))}),X_(function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,a=e.rawUrl,o=e.extras,u=o.skipLocationChange,s=o.replaceUrl;return t.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:a,skipLocationChange:!!u,replaceUrl:!!s})}),(0,Ge.U)(function(e){var n=function(e,t,n){var r=$w(e,t._root,n?n._root:void 0);return new jw(r,t)}(t.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:n})}),(0,Pb.b)(function(e){t.currentUrlTree=e.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(t.currentUrlTree,e.rawUrl),t.routerState=e.targetRouterState,"deferred"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,e),t.browserUrlTree=e.urlAfterRedirects)}),(i=t.rootContexts,a=t.routeReuseStrategy,o=function(e){return t.triggerEvent(e)},(0,Ge.U)(function(e){return new f_(a,e.targetRouterState,e.currentRouterState,o).activate(i),e})),(0,Pb.b)({next:function(){u=!0},complete:function(){u=!0}}),(r=function(){if(!u&&!s){var n="Navigation ID ".concat(e.id," is not equal to the current navigation id ").concat(t.navigationId);"replace"===t.canceledNavigationResolution?(t.restoreHistory(e),t.cancelNavigationTransition(e,n)):t.cancelNavigationTransition(e,n)}t.currentNavigation=null},function(e){return e.lift(new Mb(r))}),yb(function(r){if(s=!0,(u=r)&&u.ngNavigationCancelingError){var i=g_(r.url);i||(t.navigated=!0,t.restoreHistory(e,!0));var a=new qb(e.id,t.serializeUrl(e.extractedUrl),r.message);n.next(a),i?setTimeout(function(){var n=t.urlHandlingStrategy.merge(r.url,t.rawUrlTree);t.scheduleNavigation(n,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{t.restoreHistory(e,!0);var o=new jb(e.id,t.serializeUrl(e.extractedUrl),r);n.next(o);try{e.resolve(t.errorHandler(r))}catch(yc){e.reject(yc)}}var u;return rb.E}))}))}},{key:"resetRootComponentType",value:function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}},{key:"setTransition",value:function(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(t){var n=e.extractLocationChangeInfoFromEvent(t);e.shouldScheduleNavigation(e.lastLocationChangeInfo,n)&&setTimeout(function(){var t=n.source,r=n.state,i=n.urlTree,a={replaceUrl:!0};if(r){var o=Object.assign({},r);delete o.navigationId,delete o.\u0275routerPageId,0!==Object.keys(o).length&&(a.state=o)}e.scheduleNavigation(i,t,r,a)},0),e.lastLocationChangeInfo=n}))}},{key:"extractLocationChangeInfoFromEvent",value:function(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}},{key:"shouldScheduleNavigation",value:function(e,t){if(!e)return!0;var n=t.urlTree.toString()===e.urlTree.toString();return!(t.transitionId===e.transitionId&&n&&("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source))}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(e){this.events.next(e)}},{key:"resetConfig",value:function(e){b_(e),this.config=e.map(x_),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}},{key:"createUrlTree",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.relativeTo,r=t.queryParams,i=t.fragment,a=t.queryParamsHandling,o=t.preserveFragment,u=n||this.routerState.root,c=o?this.currentUrlTree.fragment:i,l=null;switch(a){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=r||null}return null!==l&&(l=this.removeEmptyProps(l)),function(e,t,n,r,i){if(0===n.length)return n_(t.root,t.root,t,r,i);var a=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new i_(!0,0,e);var t=0,n=!1,r=e.reduce(function(e,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var a={};return cw(r.outlets,function(e,t){a[t]="string"==typeof e?e.split("/"):e}),[].concat(s(e),[{outlets:a}])}if(r.segmentPath)return[].concat(s(e),[r.segmentPath])}return"string"!=typeof r?[].concat(s(e),[r]):0===i?(r.split("/").forEach(function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[].concat(s(e),[r])},[]);return new i_(n,t,r)}(n);if(a.toRoot())return n_(t.root,new yw([],{}),t,r,i);var o=function(e,t,n){if(e.isAbsolute)return new a_(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){var r=n.snapshot._urlSegment;return new a_(r,r===t.root,0)}var i=e_(e.commands[0])?0:1;return function(e,t,n){for(var r=e,i=t,a=n;a>i;){if(a-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new a_(r,!1,i-a)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,e.numberOfDoubleDots)}(a,t,e),u=o.processChildren?u_(o.segmentGroup,o.index,a.commands):o_(o.segmentGroup,o.index,a.commands);return n_(o.segmentGroup,u,t,r,i)}(u,this.currentUrlTree,e,l,null!=c?c:null)}},{key:"navigateByUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1},n=g_(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(e){for(var t=0;t<e.length;t++){var n=e[t];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(t))}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}},{key:"serializeUrl",value:function(e){return this.urlSerializer.serialize(e)}},{key:"parseUrl",value:function(e){var t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}},{key:"isActive",value:function(e,t){var n;if(n=!0===t?Object.assign({},cx):!1===t?Object.assign({},lx):t,g_(e))return dw(this.currentUrlTree,e,n);var r=this.parseUrl(e);return dw(this.currentUrlTree,r,n)}},{key:"removeEmptyProps",value:function(e){return Object.keys(e).reduce(function(t,n){var r=e[n];return null!=r&&(t[n]=r),t},{})}},{key:"processNavigations",value:function(){var e=this;this.navigations.subscribe(function(t){e.navigated=!0,e.lastSuccessfulId=t.id,e.currentPageId=t.targetPageId,e.events.next(new Zb(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,t.resolve(!0)},function(t){e.console.warn("Unhandled Navigation Error: ")})}},{key:"scheduleNavigation",value:function(e,t,n,r,i){var a,o;if(this.disposed)return Promise.resolve(!1);var u,s,c,l=this.getTransition(),h="imperative"!==t&&"imperative"===(null==l?void 0:l.source),f=(this.lastSuccessfulId===l.id||this.currentNavigation?l.rawUrl:l.urlAfterRedirects).toString()===e.toString();if(h&&f)return Promise.resolve(!0);i?(u=i.resolve,s=i.reject,c=i.promise):c=new Promise(function(e,t){u=e,s=t});var d,p=++this.navigationId;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),d=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(o=this.browserPageId)&&void 0!==o?o:0)+1):d=0,this.setTransition({id:p,targetPageId:d,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:u,reject:s,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(function(e){return Promise.reject(e)})}},{key:"setBrowserUrl",value:function(e,t){var n=this.urlSerializer.serialize(e),r=Object.assign(Object.assign({},t.extras.state),this.generateNgRouterState(t.id,t.targetPageId));this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}},{key:"restoreHistory",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("computed"===this.canceledNavigationResolution){var i=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(t=this.currentNavigation)||void 0===t?void 0:t.finalUrl)||0===i?this.currentUrlTree===(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)&&0===i&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}},{key:"resetState",value:function(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}},{key:"cancelNavigationTransition",value:function(e,t){var n=new qb(e.id,this.serializeUrl(e.extractedUrl),t);this.triggerEvent(n),e.resolve(!1)}},{key:"generateNgRouterState",value:function(e,t){return"computed"===this.canceledNavigationResolution?{navigationId:e,"\u0275routerPageId":t}:{navigationId:e}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(a.DyG),a.LFG(ww),a.LFG(ix),a.LFG(D),a.LFG(a.zs3),a.LFG(a.v3s),a.LFG(a.Sil),a.LFG(void 0))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),fx=function(){var e=function(){function e(t,n,r,i,a){v(this,e),this.router=t,this.route=n,this.commands=[],this.onChanges=new qk.xQ,null==r&&i.setAttribute(a.nativeElement,"tabindex","0")}return p(e,[{key:"ngOnChanges",value:function(e){this.onChanges.next(this)}},{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"onClick",value:function(){var e={skipLocationChange:px(this.skipLocationChange),replaceUrl:px(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:px(this.preserveFragment)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(hx),a.Y36(zw),a.$8M("tabindex"),a.Y36(a.Qsj),a.Y36(a.SBq))},e.\u0275dir=a.lG2({type:e,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,t){1&e&&a.NdJ("click",function(){return t.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[a.TTD]}),e}(),dx=function(){var e=function(){function e(t,n,r){var i=this;v(this,e),this.router=t,this.route=n,this.locationStrategy=r,this.commands=[],this.onChanges=new qk.xQ,this.subscription=t.events.subscribe(function(e){e instanceof Zb&&i.updateTargetUrlAndHref()})}return p(e,[{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"ngOnChanges",value:function(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(e,t,n,r,i){if(0!==e||t||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var a={skipLocationChange:px(this.skipLocationChange),replaceUrl:px(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:px(this.preserveFragment)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(hx),a.Y36(zw),a.Y36(R))},e.\u0275dir=a.lG2({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&a.NdJ("click",function(e){return t.onClick(e.button,e.ctrlKey,e.shiftKey,e.altKey,e.metaKey)}),2&e&&(a.Ikx("href",t.href,a.LSH),a.uIk("target",t.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[a.TTD]}),e}();function px(e){return""===e||!!e}var vx=function(){var e=function(){function e(t,n,r,i,a,o){var u=this;v(this,e),this.router=t,this.element=n,this.renderer=r,this.cdr=i,this.link=a,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(function(e){e instanceof Zb&&u.update()})}return p(e,[{key:"ngAfterContentInit",value:function(){var e=this;(0,Fe.of)(this.links.changes,this.linksWithHrefs.changes,(0,Fe.of)(null)).pipe((0,tb.J)()).subscribe(function(t){e.update(),e.subscribeToEachLinkOnChanges()})}},{key:"subscribeToEachLinkOnChanges",value:function(){var e,t=this;null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe();var n=[].concat(s(this.links.toArray()),s(this.linksWithHrefs.toArray()),[this.link,this.linkWithHref]).filter(function(e){return!!e}).map(function(e){return e.onChanges});this.linkInputChangesSubscription=(0,Zk.D)(n).pipe((0,tb.J)()).subscribe(function(e){t.isActive!==t.isLinkActive(t.router)(e)&&t.update()})}},{key:"routerLinkActive",set:function(e){var t=Array.isArray(e)?e:e.split(" ");this.classes=t.filter(function(e){return!!e})}},{key:"ngOnChanges",value:function(e){this.update()}},{key:"ngOnDestroy",value:function(){var e;this.routerEventsSubscription.unsubscribe(),null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe()}},{key:"update",value:function(){var e=this;this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(function(){var t=e.hasActiveLinks();e.isActive!==t&&(e.isActive=t,e.cdr.markForCheck(),e.classes.forEach(function(n){t?e.renderer.addClass(e.element.nativeElement,n):e.renderer.removeClass(e.element.nativeElement,n)}))})}},{key:"isLinkActive",value:function(e){var t="paths"in this.routerLinkActiveOptions?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return function(n){return e.isActive(n.urlTree,t)}}},{key:"hasActiveLinks",value:function(){var e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(hx),a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(a.sBO),a.Y36(fx,8),a.Y36(dx,8))},e.\u0275dir=a.lG2({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(e,t,n){var r;(1&e&&(a.Suo(n,fx,5),a.Suo(n,dx,5)),2&e)&&(a.iGM(r=a.CRH())&&(t.links=r),a.iGM(r=a.CRH())&&(t.linksWithHrefs=r))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[a.TTD]}),e}(),gx=function(){var e=function(){function e(t,n,r,i,o){v(this,e),this.parentContexts=t,this.location=n,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.name=i||"primary",t.onChildOutletCreated(this.name,this)}return p(e,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e}},{key:"attach",value:function(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}},{key:"deactivate",value:function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}},{key:"activateWith",value:function(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new mx(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(ix),a.Y36(a.s_b),a.Y36(a._Vd),a.$8M("name"),a.Y36(a.sBO))},e.\u0275dir=a.lG2({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e}(),mx=function(){function e(t,n,r){v(this,e),this.route=t,this.childContexts=n,this.parent=r}return p(e,[{key:"get",value:function(e,t){return e===zw?this.route:e===ix?this.childContexts:this.parent.get(e,t)}}]),e}(),yx=p(function e(){v(this,e)}),kx=function(){function e(){v(this,e)}return p(e,[{key:"preload",value:function(e,t){return(0,Fe.of)(null)}}]),e}(),bx=function(){var e=function(){function e(t,n,r,i,a){v(this,e),this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new nx(n,r,function(e){return t.triggerEvent(new Wb(e))},function(e){return t.triggerEvent(new Jb(e))})}return p(e,[{key:"setUpPreloading",value:function(){var e=this;this.subscription=this.router.events.pipe(Be(function(e){return e instanceof Zb}),qe(function(){return e.preload()})).subscribe(function(){})}},{key:"preload",value:function(){var e=this.injector.get(a.h0i);return this.processRoutes(e,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(e,t){var n,r=[],i=l(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.loadChildren&&!a.canLoad&&a._loadedConfig){var o=a._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else a.loadChildren&&!a.canLoad?r.push(this.preloadConfig(e,a)):a.children&&r.push(this.processRoutes(e,a.children))}}catch(u){i.e(u)}finally{i.f()}return(0,Zk.D)(r).pipe((0,tb.J)(),(0,Ge.U)(function(e){}))}},{key:"preloadConfig",value:function(e,t){var n=this;return this.preloadingStrategy.preload(t,function(){return(t._loadedConfig?(0,Fe.of)(t._loadedConfig):n.loader.load(e.injector,t)).pipe((0,Ze.zg)(function(e){return t._loadedConfig=e,n.processRoutes(e.module,e.routes)}))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(hx),a.LFG(a.v3s),a.LFG(a.Sil),a.LFG(a.zs3),a.LFG(yx))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),wx=function(){var e=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};v(this,e),this.router=t,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return p(e,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var e=this;return this.router.events.subscribe(function(t){t instanceof Vb?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=t.navigationTrigger,e.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Zb&&(e.lastId=t.id,e.scheduleScrollEvent(t,e.router.parseUrl(t.urlAfterRedirects).fragment))})}},{key:"consumeScrollEvents",value:function(){var e=this;return this.router.events.subscribe(function(t){t instanceof ew&&(t.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))})}},{key:"scheduleScrollEvent",value:function(e,t){this.router.triggerEvent(new ew(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(hx),a.LFG(te),a.LFG(void 0))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),_x=new a.OlP("ROUTER_CONFIGURATION"),xx=new a.OlP("ROUTER_FORROOT_GUARD"),Tx=[D,{provide:ww,useClass:_w},{provide:hx,useFactory:function(e,t,n,r,i,a,o){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},s=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,l=new hx(null,e,t,n,r,i,a,uw(o));return s&&(l.urlHandlingStrategy=s),c&&(l.routeReuseStrategy=c),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(u,l),u.enableTracing&&l.events.subscribe(function(e){var t,n;null===(t=console.group)||void 0===t||t.call(console,"Router Event: ".concat(e.constructor.name)),console.log(e.toString()),console.log(e),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[ww,ix,D,a.zs3,a.v3s,a.Sil,tx,_x,[function(){return p(function e(){v(this,e)})}(),new a.FiY],[function(){return p(function e(){v(this,e)})}(),new a.FiY]]},ix,{provide:zw,useFactory:function(e){return e.routerState.root},deps:[hx]},{provide:a.v3s,useClass:a.EAV},bx,kx,function(){function e(){v(this,e)}return p(e,[{key:"preload",value:function(e,t){return t().pipe(yb(function(){return(0,Fe.of)(null)}))}}]),e}(),{provide:_x,useValue:{enableTracing:!1}}];function Sx(){return new a.PXZ("Router",hx)}var Ix=function(){var e=function(){function e(t,n){v(this,e)}return p(e,null,[{key:"forRoot",value:function(t,n){return{ngModule:e,providers:[Tx,Ax(t),{provide:xx,useFactory:Rx,deps:[[hx,new a.FiY,new a.tp0]]},{provide:_x,useValue:n||{}},{provide:R,useFactory:Cx,deps:[f,[new a.tBr(O),new a.FiY],_x]},{provide:wx,useFactory:Ex,deps:[hx,te,_x]},{provide:yx,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:kx},{provide:a.PXZ,multi:!0,useFactory:Sx},[Ox,{provide:a.ip1,multi:!0,useFactory:Nx,deps:[Ox]},{provide:Dx,useFactory:Px,deps:[Ox]},{provide:a.tb,multi:!0,useExisting:Dx}]]}}},{key:"forChild",value:function(t){return{ngModule:e,providers:[Ax(t)]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(xx,8),a.LFG(hx,8))},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({}),e}();function Ex(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new wx(e,t,n)}function Cx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new P(e,t):new N(e,t)}function Rx(e){return"guarded"}function Ax(e){return[{provide:a.deG,multi:!0,useValue:e},{provide:tx,multi:!0,useValue:e}]}var Ox=function(){var e=function(){function e(t){v(this,e),this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new qk.xQ}return p(e,[{key:"appInitializer",value:function(){var e=this;return this.injector.get(b,Promise.resolve(null)).then(function(){if(e.destroyed)return Promise.resolve(!0);var t=null,n=new Promise(function(e){return t=e}),r=e.injector.get(hx),i=e.injector.get(_x);return"disabled"===i.initialNavigation?(r.setUpLocationChangeListener(),t(!0)):"enabled"===i.initialNavigation||"enabledBlocking"===i.initialNavigation?(r.hooks.afterPreactivation=function(){return e.initNavigation?(0,Fe.of)(null):(e.initNavigation=!0,t(!0),e.resultOfPreactivationDone)},r.initialNavigation()):t(!0),n})}},{key:"bootstrapListener",value:function(e){var t=this.injector.get(_x),n=this.injector.get(bx),r=this.injector.get(wx),i=this.injector.get(hx),o=this.injector.get(a.z2F);e===o.components[0]&&("enabledNonBlocking"!==t.initialNavigation&&void 0!==t.initialNavigation||i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"ngOnDestroy",value:function(){this.destroyed=!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(a.zs3))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}();function Nx(e){return e.appInitializer.bind(e)}function Px(e){return e.bootstrapListener.bind(e)}var Dx=new a.OlP("Router Initializer"),Lx=i(205),Mx=i(3637),Ux=function(){function e(t,n){v(this,e),this.dueTime=t,this.scheduler=n}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new Fx(e,this.dueTime,this.scheduler))}}]),e}(),Fx=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e)).dueTime=r,a.scheduler=i,a.debouncedSubscription=null,a.lastValue=null,a.hasValue=!1,a}return p(n,[{key:"_next",value:function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Vx,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}},{key:"clearDebounce",value:function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}]),n}(je.L);function Vx(e){e.debouncedNext()}var Zx=i(8939),qx=i(156),jx=function(){function e(t,n,r){v(this,e),this._delegate=t,this.task=n,this.ref=r}return p(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),Bx=function(){function e(t,n){v(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return p(e,[{key:"snapshot",get:function(){return new jx(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then(function(t){if(e)return e(new jx(t,n,n._ref))},t)}},{key:"on",value:function(e,t,n,r){var i,a=this;return t&&(i="function"==typeof t?function(e){return t(new jx(e,a,a._ref))}:{next:t.next?function(e){return t.next(new jx(e,a,a._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}]),e}(),zx=function(){function e(t,n){v(this,e),this._delegate=t,this._service=n}return p(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map(function(t){return new Hx(t,e._service)})}},{key:"items",get:function(){var e=this;return this._delegate.items.map(function(t){return new Hx(t,e._service)})}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),Hx=function(){function e(t,n){v(this,e),this._delegate=t,this.storage=n}return p(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){return new e(function(e,t){return Ir(e,t)}(this._delegate,t),this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new Bx(function(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new wr(e,new Jn(t),n)}(e=(0,Mt.m9)(e),t,n)}(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bn.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=Hn(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Bx(new wr(this._delegate,new Jn(r.data,!0),i),this)}},{key:"listAll",value:function(){var e,t=this;return(e=this._delegate,function(e){var t={prefixes:[],items:[]};return xr(e,t).then(function(){return t})}(e=(0,Mt.m9)(e))).then(function(e){return new zx(e,t.storage)})}},{key:"list",value:function(e){var t=this;return function(e,t){return Sr(e=(0,Mt.m9)(e),t)}(this._delegate,e||void 0).then(function(e){return new zx(e,t.storage)})}},{key:"getMetadata",value:function(){return e=this._delegate,function(e){e._throwIfRoot("getMetadata");var t=cr(e.storage,e._location,tr());return e.storage.makeRequestWithTokens(t,br)}(e=(0,Mt.m9)(e));var e}},{key:"updateMetadata",value:function(e){return function(e,t){return function(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=Mn(t.fullServerUrl(),e.host,e._protocol),a=rr(n,r),o=e.maxOperationRetryTime,u=new ir(i,"PATCH",or(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=sr(t),u}(e.storage,e._location,t,tr());return e.storage.makeRequestWithTokens(n,br)}(e=(0,Mt.m9)(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return e=this._delegate,function(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=Mn(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new ir(r,"GET",function(e,t){return function(n,r){var i=nr(e,r,t);return ar(null!==i),function(e,t,n,r){var i=Yn(t);if(null===i)return null;if(!Nn(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map(function(t){var i=e.fullPath;return Mn("/b/"+o(e.bucket)+"/o/"+o(i),n,r)+Un({alt:"media",token:t})})[0]}(i,r,e.host,e._protocol)}}(e,n),i);return a.errorHandler=sr(t),a}(e.storage,e._location,tr());return e.storage.makeRequestWithTokens(t,br).then(function(e){if(null===e)throw new bn("no-download-url","The given file does not have any download URLs.");return e})}(e=(0,Mt.m9)(e));var e}},{key:"delete",value:function(){return this._throwIfRoot("delete"),Or(this._delegate)}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw En(e)}}]),e}(),Gx=function(){function e(t,n){v(this,e),this.app=t,this._delegate=n}return p(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(Kx(e))throw Sn("ref() expected a child path but got a URL, use refFromURL instead.");return new Hx(Nr(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!Kx(e))throw Sn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{An.makeFromUrl(e,this._delegate.host)}catch(t){throw Sn("refFromUrl() expected a valid full URL but got an invalid one.")}return new Hx(Nr(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"==typeof i?i:(0,Mt.Sg)(i,e.app.options.projectId))}(e,t,n,r)}(this._delegate,e,t,n)}}]),e}();function Kx(e){return/^[A-Za-z]+:\/\//.test(e)}function Wx(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new Gx(r,i)}!function(e){var t={TaskState:vr,TaskEvent:pr,StringFormat:Bn,Storage:Gx,Reference:Hx};e.INTERNAL.registerComponent(new Vt.wA("storage-compat",Wx,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.14")}(qx.Z);var Jx=i(7841);function Yx(e){var t=function(e){return new Ve.y(function(t){var n=function(e){return t.next(e)};n(e.snapshot);var r=e.on("state_changed",n);return e.then(function(e){n(e),t.complete()},function(r){n(e.snapshot),function(e){t.error(e)}(r)}),function(){r()}}).pipe(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mx.P;return function(n){return n.lift(new Ux(e,t))}}(0))}(e);return{task:e,then:e.then.bind(e),catch:e.catch.bind(e),pause:e.pause.bind(e),cancel:e.cancel.bind(e),resume:e.resume.bind(e),snapshotChanges:function(){return t},percentageChanges:function(){return t.pipe((0,Ge.U)(function(e){return e.bytesTransferred/e.totalBytes*100}))}}}function Qx(e){return{getDownloadURL:function(){return(0,Fe.of)(void 0).pipe(It.fc,ub(function(){return e.getDownloadURL()}),It.iC)},getMetadata:function(){return(0,Fe.of)(void 0).pipe(It.fc,ub(function(){return e.getMetadata()}),It.iC)},delete:function(){return(0,Zk.D)(e.delete())},child:function(t){return Qx(e.child(t))},updateMetadata:function(t){return(0,Zk.D)(e.updateMetadata(t))},put:function(t,n){return Yx(e.put(t,n))},putString:function(t,n,r){return Yx(e.putString(t,n,r))},list:function(t){return(0,Zk.D)(e.list(t))},listAll:function(){return(0,Zk.D)(e.listAll())}}}var $x=new a.OlP("angularfire2.storageBucket"),Xx=new a.OlP("angularfire2.storage.maxUploadRetryTime"),eT=new a.OlP("angularfire2.storage.maxOperationRetryTime"),tT=new a.OlP("angularfire2.storage.use-emulator"),nT=function(){var e=function(){function e(t,n,r,i,a,o,u,c,l,h){v(this,e);var f=(0,Zx.on)(t,a,n);this.storage=(0,Zx.cc)("".concat(f.name,".storage.").concat(r),"AngularFireStorage",f.name,function(){var e=a.runOutsideAngular(function(){return f.storage(r||void 0)}),t=l;return t&&e.useEmulator.apply(e,s(t)),u&&e.setMaxUploadRetryTime(u),c&&e.setMaxOperationRetryTime(c),e},[u,c])}return p(e,[{key:"ref",value:function(e){return Qx(this.storage.ref(e))}},{key:"refFromURL",value:function(e){return Qx(this.storage.refFromURL(e))}},{key:"upload",value:function(e,t,n){return Qx(this.storage.ref(e)).put(t,n)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(Zx.Dh),a.LFG(Zx.xv,8),a.LFG($x,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(It.HU),a.LFG(Xx,8),a.LFG(eT,8),a.LFG(tT,8),a.LFG(kn,8))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e}(),rT=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({}),e}(),iT=function(){var e=p(function e(){v(this,e),Jx.Z.registerVersion("angularfire",It.q4.full,"gcs-compat")});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[nT],imports:[rT]}),e}(),aT=function(){var e=function(){function e(t,n,r){v(this,e),this.http=t,this.firestore=n,this.firebaseStorage=r,this.liveStories=[],this.liveStories$=new qk.xQ,this.myStories=[],this.myStories$=new qk.xQ,this.myJunkies=[],this.myJunkies$=new qk.xQ,this.getMyStories(),this.getStoriesFromStorage()}return p(e,[{key:"getMyJunkies",value:function(e){var t=this;this.myJunkies=[],e&&this.http.get("https://api.etherscan.io/api?module=account&action=tokennfttx&address=".concat(e,"&startblock=0&endblock=999999999&sort=asc&apikey=SDHZ9FPMUK55TY5KAU2FBS222DKPIITD65")).subscribe(function(n){n.result.forEach(function(n){if("SJ"===n.tokenSymbol)if(n.to.toLowerCase()===e.toLowerCase())t.myJunkies.push(n.tokenID);else{var r=t.myJunkies.indexOf(n.tokenID);t.myJunkies.splice(r,1)}}),t.myJunkies$.next(t.myJunkies)})}},{key:"getStories",value:function(){return this.http.get("assets/stories.json")}},{key:"getRawStory",value:function(e){return this.http.get("assets/stories/".concat(e,".md"),{responseType:"text"})}},{key:"getStoryContent",value:function(e){return this.http.get(e,{responseType:"text"})}},{key:"getJunkies",value:function(){return this.http.get("assets/junkies.json")}},{key:"saveStory",value:function(e,t){var n=new Date,r=n.toDateString()+" "+n.toLocaleTimeString(),i=!1;""===e.id?(e.id=n.toJSON(),e.createdOn=r,i=!0):e.modifiedOn=r,e.id.includes(":")?this.saveStoryToLocal(e,i):t.role>2&&this.saveStoryToStorage(e)}},{key:"saveStoryToLocal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)this.myStories.push(e),localStorage.setItem("junkyardStories.local.".concat(e.id),e.content);else{var n=this.myStories.findIndex(function(t){return t.id===e.id});this.myStories[n]=e,this.myStories.find(function(t){return t.id===e.id}),localStorage.setItem("junkyardStories.local.".concat(e.id),e.content)}this.updateMyStories()}},{key:"publishStory",value:function(e){var t=Dk(this.firestore,"stories/".concat(e));Vk(t,{state:"published"}),this.getStoriesFromStorage()}},{key:"saveStoryToStorage",value:function(e){var t=this;return(0,qt.Z)(regeneratorRuntime.mark(function n(){var r,i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(r=JSON.parse(JSON.stringify(e))).content="",i=Dk(t.firestore,"stories/".concat(r.id)),Fk(i,r),n.next=6,t.getStoriesFromStorage();case 6:return a=Br(t.firebaseStorage,"stories/".concat(r.id,".md")),n.next=9,zr(a,e.content);case 9:case"end":return n.stop()}},n)}))()}},{key:"getMyStories",value:function(){var e,t=null===(e=localStorage.getItem("junkyardStories.local.myStories"))||void 0===e?void 0:e.toString(),n=JSON.parse(t||"[]");n.forEach(function(e){e.content=localStorage.getItem("junkyardStories.local.".concat(e.id))||""}),this.myStories=n}},{key:"deleteStoryDraft",value:function(e){console.log("junkyardStories.local.".concat(e.id)),localStorage.removeItem("junkyardStories.local.".concat(e.id));var t=this.myStories.findIndex(function(t){return t.id===e.id});this.myStories.splice(t,1),this.updateMyStories()}},{key:"deleteStoryFromStorage",value:function(e){var t=this;return(0,qt.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=Dk(t.firestore,"stories/".concat(e.id)),n.next=3,Pk(r);case 3:return i=Br(t.firebaseStorage,"stories/".concat(e.id,".md")),n.next=6,qr(i);case 6:return n.next=8,t.getStoriesFromStorage();case 8:case"end":return n.stop()}},n)}))()}},{key:"submitForReview",value:function(e,t){var n=Dk(this.firestore,"stories/".concat(e.id));Fk(n,e);var r=Br(this.firebaseStorage,"stories/".concat(e.id,".md"));return zr(r,t)}},{key:"getStoriesFromStorage",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Uk(Nk(e.firestore,"stories")),t.next=3,Lk(n);case 3:r=t.sent,e.liveStories=[],r.forEach(function(t){var n=t.data();e.liveStories.push(n)}),e.liveStories$.next(e.liveStories);case 5:case"end":return t.stop()}},t)}))()}},{key:"updateMyStories",value:function(){var e=[];this.myStories.forEach(function(t){e.push({id:t.id,seriesId:t.seriesId,seriesName:t.seriesName,title:t.title,subtitle:t.subtitle,cover:t.cover,description:t.description,authorId:t.authorId,author:t.author,content:"",casts:t.casts,tags:t.tags,likes:t.likes,views:t.views,modifiedOn:t.modifiedOn,createdOn:t.createdOn,state:t.state})}),this.myStories$.next(e),localStorage.setItem("junkyardStories.local.myStories",JSON.stringify(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(ht),a.LFG(Sk),a.LFG(Pr))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),oT=p(function e(){v(this,e),this.id="",this.role=0,this.name=""}),uT=function(){var e=function(){function e(t,n){var r=this;v(this,e),this.storyboardService=t,this.firestore=n,this.user=new oT,this.user$=new qk.xQ,this.activeAccount="",this.myJunkies=[],this.hasMetaMask&&(window.ethereum.on("accountsChanged",function(){window.location.reload()}),window.ethereum.on("chainChanged",function(){window.location.reload()}),this.requestAccount()),this.storyboardService.myJunkies$.subscribe(function(e){r.myJunkies=e,r.myJunkies.length>0&&r.user.role<2&&(r.user.role=2,r.user$.next(r.user))})}return p(e,[{key:"hasMetaMask",get:function(){return Boolean(window.ethereum&&window.ethereum.isMetaMask)}},{key:"isGenesisHolder",get:function(){return this.myJunkies.length>0}},{key:"isCorrectChain",get:function(){try{return"0x1"===window.ethereum.chainId}catch(Wg){return!1}}},{key:"switchNetwork",value:function(){return(0,qt.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x1"}]});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}},e,null,[[0,5]])}))()}},{key:"requestAccount",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:return t.next=5,e.getSelectedAccount();case 5:t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}},t,null,[[0,7]])}))()}},{key:"getSelectedAccount",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.activeAccount="",!e.hasMetaMask){t.next=8;break}return t.next=3,window.ethereum.request({method:"eth_accounts"});case 3:return n=t.sent,e.activeAccount=n[0]||"",e.storyboardService.getMyJunkies(e.activeAccount),t.next=8,e.getUser(e.activeAccount);case 8:case"end":return t.stop()}},t)}))()}},{key:"getUser",value:function(e){var t=this;return(0,qt.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=Uk(Nk(t.firestore,"users")),n.next=3,Lk(r);case 3:i=n.sent,t.user.id=e,t.user.name=e,t.user.role=1,i.forEach(function(n){var r=n.data();r.id.trim().toLowerCase()===e.trim().toLowerCase()&&(t.user=r)}),t.user$.next(t.user);case 5:case"end":return n.stop()}},n)}))()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(aT),a.LFG(Sk))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}();function sT(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"a",16),a.NdJ("click",function(){return a.CHM(n),a.oxw(2).connect()}),a.TgZ(1,"span",17),a._UZ(2,"img",18),a.qZA(),a.TgZ(3,"strong"),a._uU(4),a.qZA(),a.qZA()}if(2&e){var r=a.oxw(2);a.xp6(4),a.Oqu(r.isCorrectNetwork?"Connect Wallet":"Switch Network")}}function cT(e,t){if(1&e&&(a.TgZ(0,"a",19),a.TgZ(1,"strong"),a._uU(2),a.qZA(),a.qZA()),2&e){var n=a.oxw(2);a.xp6(2),a.Oqu(n.shortEthAccount)}}function lT(e,t){if(1&e&&(a.TgZ(0,"div",11),a.TgZ(1,"div",12),a.TgZ(2,"div",13),a.YNc(3,sT,5,1,"a",14),a.YNc(4,cT,3,1,"a",15),a.qZA(),a.qZA(),a.qZA()),2&e){var n=a.oxw();a.xp6(3),a.Q6J("ngIf",!n.ethAccount),a.xp6(1),a.Q6J("ngIf",n.ethAccount)}}var hT=function(){return["/story-editor"]},fT=function(){return["is-active"]},dT=function(){var e=function(){function e(t){v(this,e),this.accountService=t,this.isProcessing=!1,this.showMenu=!1}return p(e,[{key:"hasMetaMask",get:function(){return this.accountService.hasMetaMask}},{key:"ethAccount",get:function(){return""!==this.accountService.activeAccount}},{key:"isCorrectNetwork",get:function(){return this.accountService.isCorrectChain}},{key:"ngOnInit",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.accountService.getSelectedAccount();case 2:case"end":return t.stop()}},t)}))()}},{key:"shortEthAccount",get:function(){return this.accountService.activeAccount?"".concat(this.accountService.activeAccount.substr(0,6),"...").concat(this.accountService.activeAccount.substr(38,4)):""}},{key:"connect",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isProcessing){t.next=15;break}if(e.isProcessing=!0,t.prev=2,t.t0=e.accountService.isCorrectChain,t.t0){t.next=7;break}return t.next=7,e.accountService.switchNetwork();case 7:return t.next=9,e.accountService.requestAccount();case 9:e.isProcessing=!1,t.next=15;break;case 12:t.prev=12,t.t1=t.catch(2),e.isProcessing=!1;case 15:case"end":return t.stop()}},t,null,[[2,12]])}))()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(uT))},e.\u0275cmp=a.Xpm({type:e,selectors:[["navigation-widget"]],decls:15,vars:9,consts:[["role","navigation","aria-label","main navigation",1,"navbar"],[1,"navbar-brand"],["href","#",1,"navbar-item","brand"],["src","assets/images/shonen_junk_logo.svg","height","30"],[1,"title","heading","is-4"],["role","button","aria-label","menu","aria-expanded","false","data-target","navbarBasicExample",1,"navbar-burger",3,"click"],["aria-hidden","true"],["id","navbarBasicExample",1,"navbar-menu"],[1,"navbar-start"],[1,"navbar-item",3,"routerLink","routerLinkActive"],["class","navbar-end",4,"ngIf"],[1,"navbar-end"],[1,"navbar-item"],[1,"buttons"],["class","button is-info",3,"click",4,"ngIf"],["class","button is-success",4,"ngIf"],[1,"button","is-info",3,"click"],[1,"icon"],["src","assets/images/metamask.svg"],[1,"button","is-success"]],template:function(e,t){1&e&&(a.TgZ(0,"nav",0),a.TgZ(1,"div",1),a.TgZ(2,"a",2),a._UZ(3,"img",3),a.TgZ(4,"h1",4),a._uU(5,"Junkyard Stories"),a.qZA(),a.qZA(),a.TgZ(6,"a",5),a.NdJ("click",function(){return t.showMenu=!t.showMenu}),a._UZ(7,"span",6),a._UZ(8,"span",6),a._UZ(9,"span",6),a.qZA(),a.qZA(),a.TgZ(10,"div",7),a.TgZ(11,"div",8),a.TgZ(12,"a",9),a._uU(13," My Stories "),a.qZA(),a.qZA(),a.YNc(14,lT,5,2,"div",10),a.qZA(),a.qZA()),2&e&&(a.xp6(6),a.ekj("is-active",t.showMenu),a.xp6(4),a.ekj("is-active",t.showMenu),a.xp6(2),a.Q6J("routerLink",a.DdM(7,hT))("routerLinkActive",a.DdM(8,fT)),a.xp6(2),a.Q6J("ngIf",t.hasMetaMask))},directives:[dx,vx,H],styles:[".navbar[_ngcontent-%COMP%]{background-color:#333}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.navbar[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{font-family:Bangers}.navbar[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:30px}.navbar[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#ff0;margin-bottom:0}.navbar[_ngcontent-%COMP%]   .navbar-item.is-active[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   .navbar-item[_ngcontent-%COMP%]:active, .navbar[_ngcontent-%COMP%]   .navbar-item[_ngcontent-%COMP%]:focus, .navbar[_ngcontent-%COMP%]   .navbar-item[_ngcontent-%COMP%]:hover{background-color:#0065ff}.navbar[_ngcontent-%COMP%]   .navbar-menu[_ngcontent-%COMP%]{background-color:#333}.navbar[_ngcontent-%COMP%]   .navbar-end[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{font-family:Verdana;letter-spacing:1px}"]}),e}();function pT(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"a",3),a.NdJ("click",function(){return a.CHM(n),a.oxw().activate="in-review"}),a._uU(1,"Review"),a.qZA()}if(2&e){var r=a.oxw();a.ekj("is-active","in-review"===r.activate)}}function vT(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"a",3),a.NdJ("click",function(){return a.CHM(n),a.oxw().activate="published"}),a._uU(1,"Published"),a.qZA()}if(2&e){var r=a.oxw();a.ekj("is-active","published"===r.activate)}}var gT=function(e){return["/storyboard",e]};function mT(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"a",19),a.NdJ("click",function(){var e=a.CHM(n).$implicit;return a.oxw().select(e)}),a.TgZ(1,"div",20),a.TgZ(2,"div",21),a.TgZ(3,"span",12),a.TgZ(4,"a",22),a._uU(5," \u25ba "),a.qZA(),a.TgZ(6,"span",23),a._uU(7),a.qZA(),a.TgZ(8,"span",16),a._uU(9),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){var r=t.$implicit;a.xp6(4),a.Q6J("routerLink",a.VKq(5,gT,r.id)),a.xp6(3),a.Oqu(r.title),a.xp6(1),a.ekj("is-hidden",""===r.subtitle),a.xp6(1),a.Oqu(r.subtitle)}}function yT(e,t){1&e&&(a.TgZ(0,"div",24),a._uU(1," You don't have any "),a.TgZ(2,"strong"),a._uU(3,"Draft"),a.qZA(),a._uU(4," stories yet. "),a.qZA())}function kT(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"a",19),a.NdJ("click",function(){var e=a.CHM(n).$implicit;return a.oxw(2).select(e)}),a.TgZ(1,"div",20),a.TgZ(2,"div",21),a.TgZ(3,"span",12),a.TgZ(4,"a",22),a._uU(5," \u25ba "),a.qZA(),a.TgZ(6,"span",25),a._uU(7),a.qZA(),a.TgZ(8,"span",16),a._uU(9),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){var r=t.$implicit;a.xp6(4),a.Q6J("routerLink",a.VKq(5,gT,r.id)),a.xp6(3),a.Oqu(r.title),a.xp6(1),a.ekj("is-hidden",""===r.subtitle),a.xp6(1),a.Oqu(r.subtitle)}}function bT(e,t){1&e&&(a.TgZ(0,"div",24),a._uU(1," You don't have any stories "),a.TgZ(2,"strong"),a._uU(3,"In-Review"),a.qZA(),a._uU(4," yet. "),a.qZA())}function wT(e,t){if(1&e&&(a.TgZ(0,"div"),a.YNc(1,kT,10,7,"a",8),a.YNc(2,bT,5,0,"div",9),a.qZA()),2&e){var n=a.oxw();a.ekj("is-hidden","in-review"!==n.activate),a.xp6(1),a.Q6J("ngForOf",n.storiesInReview),a.xp6(1),a.Q6J("ngIf",n.storiesInReview.length<1)}}function _T(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"a",19),a.NdJ("click",function(){var e=a.CHM(n).$implicit;return a.oxw(2).select(e)}),a.TgZ(1,"div",20),a.TgZ(2,"div",21),a.TgZ(3,"span",12),a.TgZ(4,"a",22),a._uU(5," \u25ba "),a.qZA(),a.TgZ(6,"span",26),a._uU(7),a.qZA(),a.TgZ(8,"span",16),a._uU(9),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){var r=t.$implicit;a.xp6(4),a.Q6J("routerLink",a.VKq(5,gT,r.id)),a.xp6(3),a.Oqu(r.title),a.xp6(1),a.ekj("is-hidden",""===r.subtitle),a.xp6(1),a.Oqu(r.subtitle)}}function xT(e,t){1&e&&(a.TgZ(0,"div",24),a._uU(1," You don't have any "),a.TgZ(2,"strong"),a._uU(3,"Published"),a.qZA(),a._uU(4," stories yet. "),a.qZA())}function TT(e,t){if(1&e&&(a.TgZ(0,"div"),a.YNc(1,_T,10,7,"a",8),a.YNc(2,xT,5,0,"div",9),a.qZA()),2&e){var n=a.oxw();a.ekj("is-hidden","published"!==n.activate),a.xp6(1),a.Q6J("ngForOf",n.publishedStories),a.xp6(1),a.Q6J("ngIf",n.publishedStories.length<1)}}var ST=function(){var e=function(){function e(t,n){var r=this;v(this,e),this.accountService=t,this.storyboardService=n,this.storySelected=new a.vpe,this.user=new oT,this.activate="drafts",this.myStories=[],this.storiesInReview=[],this.publishedStories=[],this.myStories=n.myStories,this.storyboardService.myStories$.subscribe(function(){r.updateStories()}),this.storyboardService.liveStories$.subscribe(function(){r.updateStories()}),this.accountService.user$.subscribe(function(e){r.user=e,r.updateStories()})}return p(e,[{key:"search",value:function(e){var t;this.updateStories(null!==(t=e.target.value)&&void 0!==t?t:"")}},{key:"select",value:function(e){this.storySelected.emit(e)}},{key:"updateStories",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.myStories=this.storyboardService.myStories.filter(function(e){return e.title.toLowerCase().includes(t.toLowerCase())||e.subtitle.toLowerCase().includes(t.toLowerCase())}),this.accountService.user.role<3?(this.publishedStories=this.storyboardService.liveStories.filter(function(n){return"published"===n.state&&n.authorId===e.accountService.user.id&&(n.title.toLowerCase().includes(t.toLowerCase())||n.subtitle.toLowerCase().includes(t.toLowerCase()))}),this.storiesInReview=this.storyboardService.liveStories.filter(function(n){return"reviewing"===n.state&&n.authorId===e.accountService.user.id&&(n.title.toLowerCase().includes(t.toLowerCase())||n.subtitle.toLowerCase().includes(t.toLowerCase()))})):(this.publishedStories=this.storyboardService.liveStories.filter(function(e){return"published"===e.state&&(e.title.toLowerCase().includes(t.toLowerCase())||e.subtitle.toLowerCase().includes(t.toLowerCase()))}),this.storiesInReview=this.storyboardService.liveStories.filter(function(e){return"reviewing"===e.state&&(e.title.toLowerCase().includes(t.toLowerCase())||e.subtitle.toLowerCase().includes(t.toLowerCase()))}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(uT),a.Y36(aT))},e.\u0275cmp=a.Xpm({type:e,selectors:[["my-stories-listing-widget"]],outputs:{storySelected:"storySelected"},decls:165,vars:16,consts:[[1,"panel","is-link",2,"background-color","white"],[1,"panel-heading"],[1,"panel-tabs"],[3,"click"],[3,"is-active","click",4,"ngIf"],[1,"panel-block"],[1,"control"],["type","text","placeholder","Search",1,"input","is-link",3,"keyup"],["class","panel-block is-active",3,"click",4,"ngFor","ngForOf"],["class","notification is-light",4,"ngIf"],[3,"is-hidden",4,"ngIf"],[1,"help",2,"max-height","70vh","overflow-y","scroll"],[1,"heading"],[1,"content"],[1,"tag","is-dark"],[1,"tag","is-info"],[1,"tag"],[1,"tag","is-primary"],[1,"tag","is-warning"],[1,"panel-block","is-active",3,"click"],[1,"columns"],[1,"column"],["target","_blank",1,"button","is-success","is-small","pl-4",3,"routerLink"],[1,"tag","is-dark","ml-3"],[1,"notification","is-light"],[1,"tag","is-info","ml-3"],[1,"tag","is-primary","ml-3"]],template:function(e,t){1&e&&(a.TgZ(0,"article",0),a.TgZ(1,"p",1),a._uU(2," My Stories "),a.qZA(),a.TgZ(3,"p",2),a.TgZ(4,"a",3),a.NdJ("click",function(){return t.activate="drafts"}),a._uU(5,"Local"),a.qZA(),a.YNc(6,pT,2,2,"a",4),a.YNc(7,vT,2,2,"a",4),a.TgZ(8,"a",3),a.NdJ("click",function(){return t.activate="help"}),a._uU(9,"Help?"),a.qZA(),a.qZA(),a.TgZ(10,"div",5),a.TgZ(11,"p",6),a.TgZ(12,"input",7),a.NdJ("keyup",function(e){return t.search(e)}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(13,"div"),a.YNc(14,mT,10,7,"a",8),a.YNc(15,yT,5,0,"div",9),a.qZA(),a.YNc(16,wT,3,4,"div",10),a.YNc(17,TT,3,4,"div",10),a.TgZ(18,"div",11),a.TgZ(19,"p",12),a._uU(20,"Getting Started"),a.qZA(),a.TgZ(21,"div",13),a._uU(22," The story board player reads the "),a.TgZ(23,"span",14),a._uU(24,"screenplay"),a.qZA(),a._uU(25," line by line in a sequencial manner. Each line constitute as a command. "),a._UZ(26,"br"),a._UZ(27,"br"),a._uU(28,"Don't use multiple commands in a single line. "),a._UZ(29,"br"),a._UZ(30,"br"),a._uU(31,"Don't worry, unsupported command lines will be ignored by the player. "),a.qZA(),a.TgZ(32,"p",12),a._uU(33,"Creating Assets"),a.qZA(),a.TgZ(34,"div",13),a._uU(35," Before junkies and files(images and audio) can be used in your script, they must first be defined. "),a._UZ(36,"br"),a._UZ(37,"br"),a._uU(38,"Use "),a.TgZ(39,"span",15),a._uU(40,"+Junky"),a.qZA(),a._uU(41," or "),a.TgZ(42,"span",15),a._uU(43,"+File"),a.qZA(),a._uU(44," to define them. "),a._UZ(45,"br"),a._UZ(46,"br"),a._uU(47,"Names must be unique. "),a.qZA(),a.TgZ(48,"p",12),a._uU(49,"Using Assets"),a.qZA(),a.TgZ(50,"div",13),a._uU(51," Use "),a.TgZ(52,"span",16),a._uU(53,"[Text Commands]"),a.qZA(),a._uU(54," to show different presentations of texts. Multiple sentences are automatically broken down by the player. "),a._UZ(55,"br"),a.TgZ(56,"span",16),a._uU(57,"Speak"),a.qZA(),a._uU(58," - makes a character speak along with their avatar "),a._UZ(59,"br"),a.TgZ(60,"span",16),a._uU(61,"CC"),a.qZA(),a._uU(62," - closed caption text "),a._UZ(63,"br"),a.TgZ(64,"span",16),a._uU(65,"Narrate"),a.qZA(),a._uU(66," - narrator text "),a._UZ(67,"br"),a.TgZ(68,"span",16),a._uU(69,"Text Effect"),a.qZA(),a._uU(70," - sound effects in text form "),a._UZ(71,"br"),a.TgZ(72,"span",16),a._uU(73,"Title"),a.qZA(),a._uU(74," - show the title and subtitle "),a._UZ(75,"br"),a.TgZ(76,"span",16),a._uU(77,"Scene Title"),a.qZA(),a._uU(78," - show the scene title "),a._UZ(79,"br"),a._UZ(80,"br"),a._uU(81,"Use "),a.TgZ(82,"span",17),a._uU(83,"[File Commands]"),a.qZA(),a._uU(84," to show/hide/play/stop images and audio. "),a._UZ(85,"br"),a.TgZ(86,"span",17),a._uU(87,"Cover"),a.qZA(),a._uU(88," - changes the background image and waits for reader action "),a._UZ(89,"br"),a.TgZ(90,"span",17),a._uU(91,"Backdrop"),a.qZA(),a._uU(92," - changes the background image and proceeds to the next command "),a._UZ(93,"br"),a.TgZ(94,"span",17),a._uU(95,"Popup"),a.qZA(),a._uU(96," - shows an image/gif in the center of the screen "),a._UZ(97,"br"),a.TgZ(98,"span",17),a._uU(99,"BGM"),a.qZA(),a._uU(100," - plays a looping audio "),a._UZ(101,"br"),a.TgZ(102,"span",17),a._uU(103,"Soundclip"),a.qZA(),a._uU(104," - plays an audio once "),a.qZA(),a.TgZ(105,"p",12),a._uU(106,"Environment"),a.qZA(),a.TgZ(107,"div",13),a.TgZ(108,"span",18),a._uU(109,"[Weather Effects]"),a.qZA(),a._uU(110," changes the weather immediately. "),a._UZ(111,"br"),a._uU(112,"e.g. "),a._UZ(113,"br"),a.TgZ(114,"span",16),a._uU(115,"> W|rain"),a.qZA(),a._uU(116," - Raining "),a._UZ(117,"br"),a.TgZ(118,"span",16),a._uU(119,"> W|snow"),a.qZA(),a._uU(120," - Snowing "),a._UZ(121,"br"),a.TgZ(122,"span",16),a._uU(123,"> W|"),a.qZA(),a._uU(124," - Remove weather effects "),a.qZA(),a.TgZ(125,"p",12),a._uU(126,"Tips"),a.qZA(),a.TgZ(127,"div",13),a.TgZ(128,"span",16),a._uU(129,"Speak"),a.qZA(),a._uU(130," follows a specific format and has 3 parameters (position, anonimity, and name). "),a._UZ(131,"br"),a._uU(132,"Position - (required) can be either L, R, X "),a._UZ(133,"br"),a._uU(134,"Anonimity - (optional) can be either ?, ??, ??? "),a._UZ(135,"br"),a._uU(136,"Name - (required) a pre-defined name of Junkie. "),a._UZ(137,"br"),a._uU(138,"e.g. "),a._UZ(139,"br"),a.TgZ(140,"span",16),a._uU(141,"> L|Boppin: Hello!"),a.qZA(),a._uU(142,' - Boppin will appear in the upper left corner and say "Hello!" '),a._UZ(143,"br"),a.TgZ(144,"span",16),a._uU(145,"> R???|Billz: Hi!"),a.qZA(),a._uU(146,' - Billz will appear in the lower right with anonymous face and name and say "Hi!" '),a._UZ(147,"br"),a.TgZ(148,"span",16),a._uU(149,"> X|Boppin"),a.qZA(),a._uU(150," - Bippin exits the scene "),a._UZ(151,"hr"),a.TgZ(152,"span",17),a._uU(153,"[File Commands]"),a.qZA(),a._uU(154," can be removed from the scene on demand by using a blank value "),a._UZ(155,"br"),a._uU(156,"e.g. "),a._UZ(157,"br"),a.TgZ(158,"span",17),a._uU(159,"`bg`: []"),a.qZA(),a._uU(160," - This will remove the current value of th background "),a._UZ(161,"br"),a.TgZ(162,"span",17),a._uU(163,"`bgm`: []"),a.qZA(),a._uU(164," - This will stop the looping bgm "),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(4),a.ekj("is-active","drafts"===t.activate),a.xp6(2),a.Q6J("ngIf",t.user.role>1),a.xp6(1),a.Q6J("ngIf",t.user.role>1),a.xp6(1),a.ekj("is-active","help"===t.activate),a.xp6(2),a.ekj("is-hidden","help"===t.activate),a.xp6(3),a.ekj("is-hidden","drafts"!==t.activate),a.xp6(1),a.Q6J("ngForOf",t.myStories),a.xp6(1),a.Q6J("ngIf",t.myStories.length<1),a.xp6(1),a.Q6J("ngIf",t.user.role>1),a.xp6(1),a.Q6J("ngIf",t.user.role>1),a.xp6(1),a.ekj("is-hidden","help"!==t.activate))},directives:[H,B,dx],styles:[".heading[_ngcontent-%COMP%]{font-size:16px}",".help[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Press Start\\ 2P;font-size:12px;letter-spacing:1px}",".help[_ngcontent-%COMP%]{padding:20px}",".content[_ngcontent-%COMP%]{padding-left:20px;border-left:1px solid #bbb;font-family:Verdana;letter-spacing:1px;line-height:18px}"]}),e}(),IT=p(function e(){v(this,e),this.id="",this.seriesId="",this.seriesName="",this.title="",this.subtitle="",this.description="",this.cover="",this.authorId="",this.author="",this.content="",this.casts=[],this.tags=[],this.likes=0,this.views=0,this.createdOn="",this.modifiedOn="",this.state="draft"}),ET=i(250),CT=function(){function e(t,n){v(this,e),this._document=n;var r=this._textarea=this._document.createElement("textarea"),i=r.style;i.position="fixed",i.top=i.opacity="0",i.left="-999em",r.setAttribute("aria-hidden","true"),r.value=t,this._document.body.appendChild(r)}return p(e,[{key:"copy",value:function(){var e=this._textarea,t=!1;try{if(e){var n=this._document.activeElement;e.select(),e.setSelectionRange(0,e.value.length),t=this._document.execCommand("copy"),n&&n.focus()}}catch(r){}return t}},{key:"destroy",value:function(){var e=this._textarea;e&&(e.remove(),this._textarea=void 0)}}]),e}(),RT=function(){var e=function(){function e(t){v(this,e),this._document=t}return p(e,[{key:"copy",value:function(e){var t=this.beginCopy(e),n=t.copy();return t.destroy(),n}},{key:"beginCopy",value:function(e){return new CT(e,this._document)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(h))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),AT=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({}),e}(),OT=i(1555);function NT(e,t){return new Ve.y(function(n){var r=e.length;if(0!==r)for(var i=new Array(r),a=0,o=0,u=function(u){var s=(0,Zk.D)(e[u]),c=!1;n.add(s.subscribe({next:function(e){c||(c=!0,o++),i[u]=e},error:function(e){return n.error(e)},complete:function(){++a!==r&&c||(o===r&&n.next(t?t.reduce(function(e,t,n){return e[t]=i[n],e},{}):i),n.complete())}}))},s=0;s<r;s++)u(s);else n.complete()})}var PT=function(){var e=function(){function e(t,n){v(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return p(e,[{key:"setProperty",value:function(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"setDisabledState",value:function(e){this.setProperty("disabled",e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(a.Qsj),a.Y36(a.SBq))},e.\u0275dir=a.lG2({type:e}),e}(),DT=function(){var e,t=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n)}(PT);return t.\u0275fac=function(n){return(e||(e=a.n5z(t)))(n||t)},t.\u0275dir=a.lG2({type:t,features:[a.qOj]}),t}(),LT=new a.OlP("NgValueAccessor"),MT={provide:LT,useExisting:(0,a.Gpc)(function(){return FT}),multi:!0},UT=new a.OlP("CompositionEventMode"),FT=function(){var e=function(e){g(n,e);var t=m(n);function n(e,r,i){var a,o;return v(this,n),(a=t.call(this,e,r))._compositionMode=i,a._composing=!1,null==a._compositionMode&&(a._compositionMode=(o=c()?c().getUserAgent():"",!/android (\d+)/.test(o.toLowerCase()))),a}return p(n,[{key:"writeValue",value:function(e){this.setProperty("value",null==e?"":e)}},{key:"_handleInput",value:function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}]),n}(PT);return e.\u0275fac=function(t){return new(t||e)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(UT,8))},e.\u0275dir=a.lG2({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&a.NdJ("input",function(e){return t._handleInput(e.target.value)})("blur",function(){return t.onTouched()})("compositionstart",function(){return t._compositionStart()})("compositionend",function(e){return t._compositionEnd(e.target.value)})},features:[a._Bn([MT]),a.qOj]}),e}(),VT=new a.OlP("NgValidators"),ZT=new a.OlP("NgAsyncValidators");function qT(e){return null!=e}function jT(e){var t=(0,a.QGY)(e)?(0,Zk.D)(e):e;return(0,a.CqO)(t),t}function BT(e){var t={};return e.forEach(function(e){t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function zT(e,t){return t.map(function(t){return t(e)})}function HT(e){return e.map(function(e){return function(e){return!e.validate}(e)?e:function(t){return e.validate(t)}})}function GT(e){return null!=e?function(e){if(!e)return null;var t=e.filter(qT);return 0==t.length?null:function(e){return BT(zT(e,t))}}(HT(e)):null}function KT(e){return null!=e?function(e){if(!e)return null;var t=e.filter(qT);return 0==t.length?null:function(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];if((0,Hk.k)(r))return NT(r,null);if((0,OT.K)(r)&&Object.getPrototypeOf(r)===Object.prototype){var i=Object.keys(r);return NT(i.map(function(e){return r[e]}),i)}}if("function"==typeof t[t.length-1]){var a=t.pop();return NT(t=1===t.length&&(0,Hk.k)(t[0])?t[0]:t,null).pipe((0,Ge.U)(function(e){return a.apply(void 0,s(e))}))}return NT(t,null)}(zT(e,t).map(jT)).pipe((0,Ge.U)(BT))}}(HT(e)):null}function WT(e,t){return null===e?[t]:Array.isArray(e)?[].concat(s(e),[t]):[e,t]}var JT=function(){var e=function(){function e(){v(this,e),this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}return p(e,[{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}},{key:"_setValidators",value:function(e){this._rawValidators=e||[],this._composedValidatorFn=GT(this._rawValidators)}},{key:"_setAsyncValidators",value:function(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=KT(this._rawAsyncValidators)}},{key:"validator",get:function(){return this._composedValidatorFn||null}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn||null}},{key:"_registerOnDestroy",value:function(e){this._onDestroyCallbacks.push(e)}},{key:"_invokeOnDestroyCallbacks",value:function(){this._onDestroyCallbacks.forEach(function(e){return e()}),this._onDestroyCallbacks=[]}},{key:"reset",value:function(e){this.control&&this.control.reset(e)}},{key:"hasError",value:function(e,t){return!!this.control&&this.control.hasError(e,t)}},{key:"getError",value:function(e,t){return this.control?this.control.getError(e,t):null}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=a.lG2({type:e}),e}(),YT=function(){var e,t=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),n}(JT);return t.\u0275fac=function(n){return(e||(e=a.n5z(t)))(n||t)},t.\u0275dir=a.lG2({type:t,features:[a.qOj]}),t}(),QT=function(e){g(n,e);var t=m(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments))._parent=null,e.name=null,e.valueAccessor=null,e}return p(n)}(JT),$T=function(){var e=function(e){g(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e)}return p(n)}(function(){function e(t){v(this,e),this._cd=t}return p(e,[{key:"is",value:function(e){var t,n,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[e])}}]),e}());return e.\u0275fac=function(t){return new(t||e)(a.Y36(QT,2))},e.\u0275dir=a.lG2({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&a.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[a.qOj]}),e}();function XT(e,t){e.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function eS(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function tS(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}function nS(e){return(oS(e)?e.validators:e)||null}function rS(e){return Array.isArray(e)?GT(e):e||null}function iS(e,t){return(oS(t)?t.asyncValidators:e)||null}function aS(e){return Array.isArray(e)?KT(e):e||null}function oS(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var uS=function(){function e(t,n){v(this,e),this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=function(){},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=n,this._composedValidatorFn=rS(this._rawValidators),this._composedAsyncValidatorFn=aS(this._rawAsyncValidators)}return p(e,[{key:"validator",get:function(){return this._composedValidatorFn},set:function(e){this._rawValidators=this._composedValidatorFn=e}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn},set:function(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"setValidators",value:function(e){this._rawValidators=e,this._composedValidatorFn=rS(e)}},{key:"setAsyncValidators",value:function(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=aS(e)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild(function(e){return e.markAllAsTouched()})}},{key:"markAsUntouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"markAsDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}},{key:"markAsPristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"markAsPending",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(function(t){t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(function(e){return e(!0)})}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild(function(t){t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(function(e){return e(!1)})}},{key:"_updateAncestors",value:function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(e){this._parent=e}},{key:"updateValueAndValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}},{key:"_updateTreeValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild(function(t){return t._updateTreeValidity(e)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(e){var t=this;if(this.asyncValidator){this.status="PENDING",this._hasOwnPendingAsyncValidator=!0;var n=jT(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(function(n){t._hasOwnPendingAsyncValidator=!1,t.setErrors(n,{emitEvent:e})})}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}},{key:"setErrors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}},{key:"get",value:function(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;var r=e;return t.forEach(function(e){r=r instanceof cS?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof lS&&r.at(e)||null}),r}(this,e)}},{key:"getError",value:function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}},{key:"hasError",value:function(e,t){return!!this.getError(e,t)}},{key:"root",get:function(){for(var e=this;e._parent;)e=e._parent;return e}},{key:"_updateControlsErrors",value:function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}},{key:"_initObservables",value:function(){this.valueChanges=new a.vpe,this.statusChanges=new a.vpe}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(e){return this._anyControls(function(t){return t.status===e})}},{key:"_anyControlsDirty",value:function(){return this._anyControls(function(e){return e.dirty})}},{key:"_anyControlsTouched",value:function(){return this._anyControls(function(e){return e.touched})}},{key:"_updatePristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"_updateTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"_isBoxedValue",value:function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}},{key:"_registerOnCollectionChange",value:function(e){this._onCollectionChange=e}},{key:"_setUpdateStrategy",value:function(e){oS(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}},{key:"_parentMarkedDirty",value:function(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}]),e}(),sS=function(e){g(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return v(this,n),(e=t.call(this,nS(i),iS(a,i)))._onChange=[],e._applyFormState(r),e._setUpdateStrategy(i),e._initObservables(),e.updateValueAndValidity({onlySelf:!0,emitEvent:!!e.asyncValidator}),e}return p(n,[{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(function(e){return e(t.value,!1!==n.emitViewToModelChange)}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(e,t)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(e){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(e){this._onChange.push(e)}},{key:"_unregisterOnChange",value:function(e){tS(this._onChange,e)}},{key:"registerOnDisabledChange",value:function(e){this._onDisabledChange.push(e)}},{key:"_unregisterOnDisabledChange",value:function(e){tS(this._onDisabledChange,e)}},{key:"_forEachChild",value:function(e){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}]),n}(uS),cS=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,nS(r),iS(i,r))).controls=e,a._initObservables(),a._setUpdateStrategy(r),a._setUpControls(),a.updateValueAndValidity({onlySelf:!0,emitEvent:!!a.asyncValidator}),a}return p(n,[{key:"registerControl",value:function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}},{key:"addControl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}},{key:"removeControl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}},{key:"setControl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}},{key:"contains",value:function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),Object.keys(e).forEach(function(r){t._throwIfControlMissing(r),t.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!=e&&(Object.keys(e).forEach(function(r){t.controls[r]&&t.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof sS?t.value:t.getRawValue(),e})}},{key:"_syncPendingControls",value:function(){var e=this._reduceChildren(!1,function(e,t){return!!t._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: ".concat(e,"."))}},{key:"_forEachChild",value:function(e){var t=this;Object.keys(this.controls).forEach(function(n){var r=t.controls[n];r&&e(r,n)})}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild(function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)})}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(e){for(var t=0,n=Object.keys(this.controls);t<n.length;t++){var r=n[t],i=this.controls[r];if(this.contains(r)&&e(i))return!0}return!1}},{key:"_reduceValue",value:function(){var e=this;return this._reduceChildren({},function(t,n,r){return(n.enabled||e.disabled)&&(t[r]=n.value),t})}},{key:"_reduceChildren",value:function(e,t){var n=e;return this._forEachChild(function(e,r){n=t(n,e,r)}),n}},{key:"_allControlsDisabled",value:function(){for(var e=0,t=Object.keys(this.controls);e<t.length;e++){var n=t[e];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))})}}]),n}(uS),lS=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,nS(r),iS(i,r))).controls=e,a._initObservables(),a._setUpdateStrategy(r),a._setUpControls(),a.updateValueAndValidity({onlySelf:!0,emitEvent:!!a.asyncValidator}),a}return p(n,[{key:"at",value:function(e){return this.controls[e]}},{key:"push",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}},{key:"insert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}},{key:"removeAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}},{key:"setControl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}},{key:"length",get:function(){return this.controls.length}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),e.forEach(function(e,r){t._throwIfControlMissing(r),t.at(r).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!=e&&(e.forEach(function(e,r){t.at(r)&&t.at(r).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this.controls.map(function(e){return e instanceof sS?e.value:e.getRawValue()})}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.controls.length<1||(this._forEachChild(function(e){return e._registerOnCollectionChange(function(){})}),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}},{key:"_syncPendingControls",value:function(){var e=this.controls.reduce(function(e,t){return!!t._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index ".concat(e))}},{key:"_forEachChild",value:function(e){this.controls.forEach(function(t,n){e(t,n)})}},{key:"_updateValue",value:function(){var e=this;this.value=this.controls.filter(function(t){return t.enabled||e.disabled}).map(function(e){return e.value})}},{key:"_anyControls",value:function(e){return this.controls.some(function(t){return t.enabled&&e(t)})}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild(function(t){return e._registerControl(t)})}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))})}},{key:"_allControlsDisabled",value:function(){var e,t=l(this.controls);try{for(t.s();!(e=t.n()).done;){if(e.value.enabled)return!1}}catch(n){t.e(n)}finally{t.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}]),n}(uS),hS={provide:QT,useExisting:(0,a.Gpc)(function(){return dS})},fS=Promise.resolve(null),dS=function(){var e=function(e){g(n,e);var t=m(n);function n(e,r,i,o){var u;return v(this,n),(u=t.call(this)).control=new sS,u._registered=!1,u.update=new a.vpe,u._parent=e,u._setValidators(r),u._setAsyncValidators(i),u.valueAccessor=function(e,t){return t?(Array.isArray(t),t.forEach(function(e){e.constructor===FT?n=e:Object.getPrototypeOf(e.constructor)===DT?r=e:i=e}),i||r||n||null):null;var n,r,i}(0,o),u}return p(n,[{key:"ngOnChanges",value:function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,t){if(!e.hasOwnProperty("model"))return!1;var n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"path",get:function(){return this._parent?[].concat(s(this._parent.path),[this.name]):[this.name]}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"viewToModelUpdate",value:function(e){this.viewModel=e,this.update.emit(e)}},{key:"_setUpControl",value:function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}},{key:"_isStandalone",value:function(){return!this._parent||!(!this.options||!this.options.standalone)}},{key:"_setUpStandalone",value:function(){var e,t;(function(e,t){var n=function(e){return e._rawValidators}(e);null!==t.validator?e.setValidators(WT(n,t.validator)):"function"==typeof n&&e.setValidators([n]);var r=function(e){return e._rawAsyncValidators}(e);null!==t.asyncValidator?e.setAsyncValidators(WT(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);var i=function(){return e.updateValueAndValidity()};XT(t._rawValidators,i),XT(t._rawAsyncValidators,i)})(e=this.control,t=this),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(function(n){e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&eS(e,t)})}(e,t),function(e,t){var n=function(e,n){t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)};e.registerOnChange(n),t._registerOnDestroy(function(){e._unregisterOnChange(n)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&eS(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function(e,t){if(t.valueAccessor.setDisabledState){var n=function(e){t.valueAccessor.setDisabledState(e)};e.registerOnDisabledChange(n),t._registerOnDestroy(function(){e._unregisterOnDisabledChange(n)})}}(e,t),this.control.updateValueAndValidity({emitEvent:!1})}},{key:"_checkForErrors",value:function(){this._isStandalone()||this._checkParentType(),this._checkName()}},{key:"_checkParentType",value:function(){}},{key:"_checkName",value:function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}},{key:"_updateValue",value:function(e){var t=this;fS.then(function(){t.control.setValue(e,{emitViewToModelChange:!1})})}},{key:"_updateDisabled",value:function(e){var t=this,n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;fS.then(function(){r&&!t.control.disabled?t.control.disable():!r&&t.control.disabled&&t.control.enable()})}}]),n}(QT);return e.\u0275fac=function(t){return new(t||e)(a.Y36(YT,9),a.Y36(VT,10),a.Y36(ZT,10),a.Y36(LT,10))},e.\u0275dir=a.lG2({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[a._Bn([hS]),a.qOj,a.TTD]}),e}(),pS=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({}),e}(),vS={provide:VT,useExisting:(0,a.Gpc)(function(){return gS}),multi:!0},gS=function(){var e=function(){function e(){v(this,e),this._required=!1}return p(e,[{key:"required",get:function(){return this._required},set:function(e){this._required=null!=e&&!1!==e&&"false"!="".concat(e),this._onChange&&this._onChange()}},{key:"validate",value:function(e){return this.required?function(e){return null==(t=e.value)||0===t.length?{required:!0}:null;var t}(e):null}},{key:"registerOnValidatorChange",value:function(e){this._onChange=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=a.lG2({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,t){2&e&&a.uIk("required",t.required?"":null)},inputs:{required:"required"},features:[a._Bn([vS])]}),e}(),mS=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[pS]]}),e}(),yS=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[mS]}),e}(),kS=["contentTextArea"];function bS(e,t){if(1&e&&(a.TgZ(0,"span",74),a._uU(1),a.qZA()),2&e){var n=t.$implicit;a.xp6(1),a.Oqu(n)}}function wS(e,t){if(1&e&&(a.TgZ(0,"a",76),a._UZ(1,"img",11),a.qZA()),2&e){var n=a.oxw().$implicit,r=a.oxw();a.MGl("href","https://shonenjunk.xyz/unit-00/gallery/",n,"",a.LSH),a.xp6(1),a.Q6J("src",r.getJunkieAvatar(n),a.LSH)}}function _S(e,t){if(1&e&&(a.ynx(0),a.YNc(1,wS,2,2,"a",75),a.BQk()),2&e){var n=t.index;a.xp6(1),a.Q6J("ngIf",n<3)}}function xS(e,t){1&e&&a._UZ(0,"a",78)}function TS(e,t){1&e&&a._UZ(0,"a",78)}function SS(e,t){if(1&e&&(a.ynx(0),a.YNc(1,xS,1,0,"a",77),a.YNc(2,TS,1,0,"a",77),a.BQk()),2&e){var n=a.oxw();a.xp6(1),a.Q6J("ngIf",n.story.casts.length<3),a.xp6(1),a.Q6J("ngIf",n.story.casts.length<2)}}function IS(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"button",79),a.NdJ("click",function(){return a.CHM(n),a.oxw().showPublishModal=!0}),a._uU(1," Send for Review "),a.qZA()}}function ES(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"button",79),a.NdJ("click",function(){return a.CHM(n),a.oxw().publish()}),a._uU(1," Publish "),a.qZA()}}function CS(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"button",80),a.NdJ("click",function(){return a.CHM(n),a.oxw().delete()}),a._uU(1,"Delete"),a.qZA()}}function RS(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"button",43),a.NdJ("click",function(){return a.CHM(n),a.oxw().export()}),a._uU(1,"Export"),a.qZA()}}var AS=function(e){return["/storyboard",e]},OS=function(){var e=function(){function e(t,n,r){var i=this;v(this,e),this.clipboard=t,this.storyboardService=n,this.accountService=r,this.playStory=new a.vpe,this.mailBody="",this.isProcessing=!1,this.isSavingSuccess=!1,this.isExportSuccess=!1,this.junkies=[],this.user=new oT,this.showPublishModal=!1,this._story=new IT,this._storyUnsaved="",this.accountService.user$.subscribe(function(e){i.user=e}),this.storyboardService.getJunkies().subscribe(function(e){i.junkies=JSON.parse(JSON.stringify(e))})}return p(e,[{key:"story",get:function(){return this._story},set:function(e){null!==e&&(this._story=new IT,this._story.id=e.id,this._story.authorId=e.authorId,this._story.author=e.author,this._story.title=e.title,this._story.subtitle=e.subtitle,this._story.seriesId=e.seriesId,this._story.seriesName=e.seriesName,this._story.cover=e.cover,this._story.casts=e.casts,this._story.tags=e.tags,this._story.content=e.content,this._story.state=e.state,this._story.likes=e.likes,this._story.modifiedOn=e.modifiedOn,this._story.createdOn=e.createdOn,this.backupStory(this._story),this.isSavingSuccess=!1)}},{key:"editable",get:function(){return"draft"===this.story.state||("reviewing"===this.story.state||"published"===this.story.state)&&this.user.role>2}},{key:"deletable",get:function(){return"draft"===this.story.state&&""!==this.story.id||("reviewing"===this.story.state||"published"===this.story.state)&&this.user.role>2}},{key:"reviewable",get:function(){return!this.isDirty()&&"draft"===this.story.state&&this.user.role>1}},{key:"publishable",get:function(){return!this.isDirty()&&"reviewing"===this.story.state&&this.user.role>2}},{key:"save",value:function(){this.storyboardService.saveStory(this.story,this.user),this.isSavingSuccess=!0,this.backupStory(this.story)}},{key:"publish",value:function(){this.user.role<3||window.confirm("Do you really want to publish this story?")&&(this.storyboardService.publishStory(this.story.id),this.isSavingSuccess=!0)}},{key:"submitForReview",value:function(){var e=this;this.isProcessing=!0;var t=JSON.parse(JSON.stringify(this.story));t.content="",t.authorId=this.accountService.activeAccount,t.state="reviewing",t.id=ET.i.create().toString(),this.storyboardService.submitForReview(t,this.story.content).then(function(){alert("Success: Story submitted for review and publishing."),e.isProcessing=!1,e.storyboardService.getStoriesFromStorage()}).catch(function(t){console.log("Error",t),alert("Failed: Please try again."),e.isProcessing=!1})}},{key:"play",value:function(){}},{key:"cancel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!e&&this.isDirty()&&window.confirm("You have unsaved changes. Discard changes and start a new story?")&&window.location.reload(),window.location.reload()}},{key:"delete",value:function(){var e=this;return(0,qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=window.confirm("Do you really want to delete this story?"),!t.t0){t.next=14;break}if(e.isProcessing=!0,!e.story.id.includes(":")){t.next=7;break}e.storyboardService.deleteStoryDraft(e.story),t.next=11;break;case 7:if(t.t1=e.user.role>2,!t.t1){t.next=11;break}return t.next=11,e.storyboardService.deleteStoryFromStorage(e.story);case 11:e.isProcessing=!1,e.story=new IT,e.cancel(!0);case 14:case"end":return t.stop()}},t)}))()}},{key:"getCasts",value:function(){return this.story.casts.join(" ")}},{key:"onUpdateCasts",value:function(e){this.story.casts=e.target.value.split(" ")}},{key:"getTags",value:function(){return this.story.tags.join(" ")}},{key:"onUpdateTags",value:function(e){this.story.tags=e.target.value.split(" ")}},{key:"export",value:function(){var e=JSON.parse(JSON.stringify(this.story));this.clipboard.copy(JSON.stringify(e)),this.isExportSuccess=!0}},{key:"import",value:function(){var e,t=null!==(e=prompt("Enter data",""))&&void 0!==e?e:"";if(""!==t)try{var n=JSON.parse(t);this.story.id="",this.story.title=n.title,this.story.subtitle=n.subtitle,this.story.authorId=n.authorId,this.story.author=n.author,this.story.seriesId=n.seriesId,this.story.seriesName=n.seriesName,this.story.cover=n.cover,this.story.casts=n.casts,this.story.tags=n.tags,this.story.content=n.content,this.story.likes=0,this.story.views=0,this.story.state="draft",alert("Success: Story importing complete.")}catch(r){alert("Failed: Invalid data format.")}}},{key:"exportable",value:function(){return""!==this.story.id&&this.story.casts!==[]&&this.story.tags!==[]&&""!==this.story.cover}},{key:"isDirty",value:function(){return JSON.stringify(this.story)!==this._storyUnsaved}},{key:"isValid",value:function(){return""!==this.story.title&&""!==this.story.author&&""!==this.story.content}},{key:"getJunkieAvatar",value:function(e){return"https://static.shinji.xyz/unit-00/nft-images/".concat(this.junkies[parseInt(e)].hash,".png")}},{key:"backupStory",value:function(e){this._storyUnsaved=JSON.stringify(e)}},{key:"insert",value:function(e){var t=0,n=0,r="";switch(e){case"char":r="[John]: 9000",t=1,n=4;break;case"file":r="[file_name]: <url>",t=1,n=9;break;case"narrate":r="> N: Hello.",t=5,n=6;break;case"cc":r="> CC: Hello.",t=6,n=6;break;case"speak":r="> R|John: Hello.",t=4,n=4;break;case"soundtext":r="> E|5: Krakoom!",t=7,n=8;break;case"weathereffects":r="> W|rain",t=4,n=5;break;case"title":r="# Title (Episode 1)",t=2,n=5;break;case"scene-title":r="### Scene-01 - The Village",t=4,n=22;break;case"cover":r="`cover`: [file_name]",t=10,n=9;break;case"bg":r="`bg`: [file_name]",t=7,n=9;break;case"bgm":r="`bgm`: [file_name]",t=8,n=9;break;case"soundclip":r="`soundclip`: [file_name]",t=14,n=9;break;case"imgpop":r="`imgpop`: [file_name]",t=11,n=9;break;case"template":this.story.title="Sample Screenplay",this.story.subtitle="A Demo Screeplay",this.story.author="Unknown",this.story.cover="https://hdwallpaperim.com/wp-content/uploads/2017/08/24/110153-Silent_Hill_HD_Collection.jpg",this.story.casts=["7104","5426"],this.story.tags=["comedy","horror"],r="[bg_cover]: <https://hdwallpaperim.com/wp-content/uploads/2017/08/24/110153-Silent_Hill_HD_Collection.jpg>\n[bg_road]: <https://wallpapercave.com/wp/R3CF5u0.jpg>\n\n[bgm_haunting]: <https://freesound.org/data/previews/133/133716_1173265-lq.mp3>\n[se_steps]: <https://freesound.org/data/previews/165/165181_3000652-lq.mp3>\n\n[silhouette]: <http://getdrawings.com/img/male-silhouette-png-31.png>\n[Harry]: 7104\n[Freddy]: 5426\n\n`cover`: [bg_cover]\n# Silent Hill (A Demo Screeplay)\n`soundclip`: [se_steps]\n`bg`: #000\n`bgm`: [bgm_haunting]\n> W|rain\n> N: After waking up from the accident Harry found himself in an unknown town. \n### The Town\n`bg`: [bg_road]\n> R|Harry: Where am I? Is this the real life? Or is this just fantasy? Caught in the landslide. No escape from reality.\n\n> CC: walking slowly towards the town\n> E|9: EEEEE-OH!\n> E|8: E-OH!\n> E|7: EEE-EEE-OH!\n`imgpop`: [silhouette]\n> CC: a creepy man appeared from the dark\n> L???|Freddy: $creepy$Mama. $creepy$Just killed a man. \n> L?|Freddy: $creepy$Put a gun against his head. $creepy$Pulled my trigger now dead!\n> R|Harry: Who are you?\n> L|Freddy: $creepy$Mercury.\n> CC: the creepy man moonwalks back into the dark\n> L??|Freddy: $creepy$ Freddy Mercury.\n> N: To be continued...\n        ",this.contentTextArea.nativeElement.value="",this.story.content=r}var i=this.contentTextArea.nativeElement,a=i.selectionStart,o=i.selectionEnd;i.value=i.value.substring(0,a)+r+i.value.substring(o,i.value.length),i.focus();var u=a+t;i.setSelectionRange(u,u+n)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(RT),a.Y36(aT),a.Y36(uT))},e.\u0275cmp=a.Xpm({type:e,selectors:[["story-editor-widget"]],viewQuery:function(e,t){var n;(1&e&&a.Gf(kS,5),2&e)&&(a.iGM(n=a.CRH())&&(t.contentTextArea=n.first))},inputs:{story:"story"},outputs:{playStory:"playStory"},decls:161,vars:58,consts:[[1,"modal"],[1,"modal-background",3,"click"],[1,"modal-card",2,"max-width","25vw","min-width","350px"],[1,"modal-card-head"],[1,"modal-card-title"],["aria-label","close",1,"delete",3,"click"],[1,"modal-card-body"],[1,"card"],["target","_blank",3,"routerLink"],[1,"card-image"],[1,"image","is-3by2"],[3,"src"],[1,"card-content"],[1,"media"],[1,"media-content"],[1,"title","is-6","mb-1",3,"title"],[1,"heading",3,"title"],[1,"subtitle","is-6"],[1,"tag","is-info","is-normal"],[1,""],[1,"tags","are-medium"],["class","tag is-normal",4,"ngFor","ngForOf"],[1,"card-footer"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"message","is-warning",2,"font-family","BlinkMacSystemFont, Roboto","font-size","11px","letter-spacing","1px"],[1,"message-body"],[1,"modal-card-foot"],["type","submit",1,"button","is-success",3,"disabled","click"],[1,"modal-background"],[1,"modal-content"],[1,"notification","is-info","is-dark"],["max","100",1,"progress","is-success","mt-3"],[1,"notification","is-success","is-dark"],[1,"delete",3,"click"],[1,"field","is-grouped","main-controls","is-flex",2,"font-family","Bangers"],[1,"control"],["target","_blank",1,"button","is-small","is-success","pl-4",3,"routerLink"],["type","submit","class","button is-info is-small ml-3",3,"click",4,"ngIf"],["type","submit",1,"button","is-info","is-small","ml-3",3,"disabled","click"],[1,"control",2,"margin-left","auto"],["type","submit","class","button  is-small is-danger",3,"click",4,"ngIf"],["class","button is-link is-small is-light",3,"click",4,"ngIf"],[1,"button","is-link","is-small","is-light",3,"click"],[1,"box"],[1,"field-body"],[1,"field"],[1,"label"],["required","","type","text","placeholder","An awesome title for your story or series",1,"input",3,"ngModel","ngModelChange"],["required","","type","text","placeholder","Your writer name",1,"input",3,"ngModel","ngModelChange"],[1,"field-body","mt-2"],["required","","type","text","placeholder","A subtitle or an episode title",1,"input",3,"ngModel","ngModelChange"],["required","","type","text","placeholder","Image must be 3 x 2 in in size",1,"input",3,"ngModel","ngModelChange"],["required","","type","text","placeholder","e.g. 5123 2213 12 424 2314",1,"input",3,"value","keyup"],["required","","type","text","placeholder","e.g. comedy action mystery",1,"input",3,"value","keyup"],[1,"title","has-text-info"],[1,"field","mt-2"],[1,"field","is-grouped","screenplay-controls"],[1,"button","is-dark","is-small",3,"click"],[1,"button","is-info","is-small",3,"click"],["title","Make character talk",1,"button","is-light","is-small",3,"click"],["title","Show a closed caption",1,"button","is-light","is-small",3,"click"],["title","Show narration",1,"button","is-light","is-small",3,"click"],["title","Show comic sound effects (BOOM!)",1,"button","is-light","is-small",3,"click"],["title","Show weather effects",1,"button","is-light","is-small",3,"click"],["title","Show main title componen",1,"button","is-light","is-small",3,"click"],["title","Show scene title",1,"button","is-light","is-small",3,"click"],["title","Show story cover image",1,"button","is-primary","is-small",3,"click"],["title","Change background image",1,"button","is-primary","is-small",3,"click"],["title","Show image popup(works on gif too!)",1,"button","is-primary","is-small",3,"click"],["title","Play/Remove a looping sound",1,"button","is-primary","is-small",3,"click"],["title","Play sound file once",1,"button","is-primary","is-small",3,"click"],["required","","placeholder","Now the hard part... write a cool story!","rows","14",1,"textarea",2,"font-size","16px","font-family","Inconsolata",3,"ngModel","ngModelChange"],["contentTextArea",""],[1,"tag","is-normal"],["target","_blank","class","card-footer-item",3,"href",4,"ngIf"],["target","_blank",1,"card-footer-item",3,"href"],["href","#","class","card-footer-item",4,"ngIf"],["href","#",1,"card-footer-item"],["type","submit",1,"button","is-info","is-small","ml-3",3,"click"],["type","submit",1,"button","is-small","is-danger",3,"click"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.NdJ("click",function(){return t.showPublishModal=!1}),a.qZA(),a.TgZ(2,"div",2),a.TgZ(3,"header",3),a.TgZ(4,"p",4),a._uU(5,"Send for Review"),a.qZA(),a.TgZ(6,"button",5),a.NdJ("click",function(){return t.showPublishModal=!1}),a.qZA(),a.qZA(),a.TgZ(7,"section",6),a.TgZ(8,"div",7),a.TgZ(9,"a",8),a.TgZ(10,"div",9),a.TgZ(11,"figure",10),a._UZ(12,"img",11),a.qZA(),a.qZA(),a.qZA(),a.TgZ(13,"div",12),a.TgZ(14,"div",13),a.TgZ(15,"div",14),a.TgZ(16,"p",15),a._uU(17),a.qZA(),a.TgZ(18,"span",16),a._uU(19),a.qZA(),a.TgZ(20,"p",17),a._uU(21,"by "),a.TgZ(22,"span",18),a._uU(23),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(24,"div",19),a.TgZ(25,"div",20),a.YNc(26,bS,2,1,"span",21),a.qZA(),a.qZA(),a.qZA(),a.TgZ(27,"footer",22),a.YNc(28,_S,2,1,"ng-container",23),a.YNc(29,SS,3,2,"ng-container",24),a.qZA(),a.qZA(),a.TgZ(30,"article",25),a.TgZ(31,"div",26),a._uU(32," Please allow at least 24 hours for the review process to complete. Keep an eye on your email for updates. "),a.qZA(),a.qZA(),a.qZA(),a.TgZ(33,"footer",27),a.TgZ(34,"button",28),a.NdJ("click",function(){return t.submitForReview()}),a._uU(35," Submit "),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(36,"div",0),a._UZ(37,"div",29),a.TgZ(38,"div",30),a.TgZ(39,"div",31),a._uU(40," Please wait while we process your request. "),a.TgZ(41,"progress",32),a._uU(42,"45%"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(43,"div",33),a.TgZ(44,"button",34),a.NdJ("click",function(){return t.isSavingSuccess=!1}),a.qZA(),a._uU(45),a.qZA(),a.TgZ(46,"div",31),a.TgZ(47,"button",34),a.NdJ("click",function(){return t.isExportSuccess=!1}),a.qZA(),a._uU(48),a.qZA(),a.TgZ(49,"div",35),a.TgZ(50,"div",36),a.TgZ(51,"a",37),a._uU(52," \u25ba "),a.qZA(),a.YNc(53,IS,2,0,"button",38),a.TgZ(54,"button",39),a.NdJ("click",function(){return t.save()}),a._uU(55),a.qZA(),a.YNc(56,ES,2,0,"button",38),a.qZA(),a.TgZ(57,"div",40),a.YNc(58,CS,2,0,"button",41),a.qZA(),a.TgZ(59,"div",36),a.YNc(60,RS,2,0,"button",42),a.qZA(),a.TgZ(61,"div",36),a.TgZ(62,"button",43),a.NdJ("click",function(){return t.import()}),a._uU(63,"Import"),a.qZA(),a.qZA(),a.TgZ(64,"div",36),a.TgZ(65,"button",43),a.NdJ("click",function(){return t.cancel()}),a._uU(66,"New"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(67,"div",44),a.TgZ(68,"div",45),a.TgZ(69,"div",46),a.TgZ(70,"label",47),a._uU(71,"Title*"),a.qZA(),a.TgZ(72,"div",36),a.TgZ(73,"input",48),a.NdJ("ngModelChange",function(e){return t.story.title=e}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(74,"div",46),a.TgZ(75,"label",47),a._uU(76,"Author*"),a.qZA(),a.TgZ(77,"div",36),a.TgZ(78,"input",49),a.NdJ("ngModelChange",function(e){return t.story.author=e}),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(79,"div",50),a.TgZ(80,"div",46),a.TgZ(81,"label",47),a._uU(82,"Subtitle"),a.qZA(),a.TgZ(83,"div",36),a.TgZ(84,"input",51),a.NdJ("ngModelChange",function(e){return t.story.subtitle=e}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(85,"div",46),a.TgZ(86,"label",47),a._uU(87,"Cover URL"),a.qZA(),a.TgZ(88,"div",36),a.TgZ(89,"input",52),a.NdJ("ngModelChange",function(e){return t.story.cover=e}),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(90,"div",50),a.TgZ(91,"div",46),a.TgZ(92,"label",47),a._uU(93,"Casts"),a.qZA(),a.TgZ(94,"div",36),a.TgZ(95,"input",53),a.NdJ("keyup",function(e){return t.onUpdateCasts(e)}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(96,"div",46),a.TgZ(97,"label",47),a._uU(98,"Tags"),a.qZA(),a.TgZ(99,"div",36),a.TgZ(100,"input",54),a.NdJ("keyup",function(e){return t.onUpdateTags(e)}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(101,"div",46),a.TgZ(102,"label",47),a._uU(103,"Status"),a.qZA(),a.TgZ(104,"div",36),a.TgZ(105,"label",55),a._uU(106),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(107,"div",56),a.TgZ(108,"label",47),a._uU(109,"Screenplay"),a.qZA(),a.TgZ(110,"div",57),a.TgZ(111,"div",36),a.TgZ(112,"button",58),a.NdJ("click",function(){return t.insert("template")}),a._uU(113,"Load Sample Screenplay"),a.qZA(),a.qZA(),a._UZ(114,"br"),a.TgZ(115,"div",36),a.TgZ(116,"button",59),a.NdJ("click",function(){return t.insert("char")}),a._uU(117,"+Junky"),a.qZA(),a.qZA(),a.TgZ(118,"div",36),a.TgZ(119,"button",60),a.NdJ("click",function(){return t.insert("speak")}),a._uU(120,"Speak"),a.qZA(),a.qZA(),a.TgZ(121,"div",36),a.TgZ(122,"button",61),a.NdJ("click",function(){return t.insert("cc")}),a._uU(123,"CC"),a.qZA(),a.qZA(),a.TgZ(124,"div",36),a.TgZ(125,"button",62),a.NdJ("click",function(){return t.insert("narrate")}),a._uU(126,"Narrate"),a.qZA(),a.qZA(),a.TgZ(127,"div",36),a.TgZ(128,"button",63),a.NdJ("click",function(){return t.insert("soundtext")}),a._uU(129,"Text Effect"),a.qZA(),a.qZA(),a.TgZ(130,"div",36),a.TgZ(131,"button",64),a.NdJ("click",function(){return t.insert("weathereffects")}),a._uU(132,"Weather Effect"),a.qZA(),a.qZA(),a.TgZ(133,"div",36),a.TgZ(134,"button",65),a.NdJ("click",function(){return t.insert("title")}),a._uU(135,"Title"),a.qZA(),a.qZA(),a.TgZ(136,"div",36),a.TgZ(137,"button",66),a.NdJ("click",function(){return t.insert("scene-title")}),a._uU(138,"Scene Title"),a.qZA(),a.qZA(),a._UZ(139,"br"),a.TgZ(140,"div",36),a.TgZ(141,"button",59),a.NdJ("click",function(){return t.insert("file")}),a._uU(142,"+File"),a.qZA(),a.qZA(),a.TgZ(143,"div",36),a.TgZ(144,"button",67),a.NdJ("click",function(){return t.insert("cover")}),a._uU(145,"Cover"),a.qZA(),a.qZA(),a.TgZ(146,"div",36),a.TgZ(147,"button",68),a.NdJ("click",function(){return t.insert("bg")}),a._uU(148,"Backdrop"),a.qZA(),a.qZA(),a.TgZ(149,"div",36),a.TgZ(150,"button",69),a.NdJ("click",function(){return t.insert("imgpop")}),a._uU(151,"Popup"),a.qZA(),a.qZA(),a.TgZ(152,"div",36),a.TgZ(153,"button",70),a.NdJ("click",function(){return t.insert("bgm")}),a._uU(154,"BGM"),a.qZA(),a.qZA(),a.TgZ(155,"div",36),a.TgZ(156,"button",71),a.NdJ("click",function(){return t.insert("soundclip")}),a._uU(157,"Soundclip"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(158,"div",36),a.TgZ(159,"textarea",72,73),a.NdJ("ngModelChange",function(e){return t.story.content=e}),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.ekj("is-active",t.showPublishModal),a.xp6(9),a.Q6J("routerLink",a.VKq(54,AS,t.story.id)),a.xp6(3),a.Q6J("src",t.story.cover,a.LSH),a.xp6(4),a.Q6J("title",t.story.title),a.xp6(1),a.Oqu(t.story.title),a.xp6(1),a.Q6J("title",t.story.subtitle),a.xp6(1),a.Oqu(t.story.subtitle),a.xp6(4),a.Oqu(t.story.author),a.xp6(3),a.Q6J("ngForOf",t.story.tags),a.xp6(2),a.Q6J("ngForOf",t.story.casts),a.xp6(1),a.Q6J("ngIf",t.story.casts.length>0),a.xp6(5),a.Q6J("disabled",t.isProcessing),a.xp6(2),a.ekj("is-active",t.isProcessing),a.xp6(7),a.ekj("hidden",!t.isSavingSuccess),a.xp6(2),a.hij(" ",t.story.title," successfully saved.\n"),a.xp6(1),a.ekj("hidden",!t.isExportSuccess),a.xp6(2),a.hij(" ",t.story.title," copied to clipboard.\n"),a.xp6(3),a.ekj("hidden",t.isDirty()),a.Q6J("routerLink",a.VKq(56,AS,t.story.id)),a.xp6(2),a.Q6J("ngIf",t.reviewable),a.xp6(1),a.ekj("hidden",!t.isDirty()),a.Q6J("disabled",!t.isValid()),a.xp6(1),a.hij(" ",t.story.id?"Update":"Save"," "),a.xp6(1),a.Q6J("ngIf",t.publishable),a.xp6(2),a.Q6J("ngIf",t.deletable),a.xp6(2),a.Q6J("ngIf",t.exportable()),a.xp6(13),a.ekj("is-success",t.story.title),a.Q6J("ngModel",t.story.title),a.xp6(5),a.ekj("is-success",t.story.author),a.Q6J("ngModel",t.story.author),a.xp6(6),a.ekj("is-success",t.story.subtitle),a.Q6J("ngModel",t.story.subtitle),a.xp6(5),a.ekj("is-success",t.story.cover),a.Q6J("ngModel",t.story.cover),a.xp6(6),a.ekj("is-success",t.story.casts.length>0),a.Q6J("value",t.getCasts()),a.xp6(5),a.ekj("is-success",t.story.tags.length>0),a.Q6J("value",t.getTags()),a.xp6(6),a.Oqu(t.story.state),a.xp6(53),a.ekj("is-success",t.story.content),a.Q6J("ngModel",t.story.content))},directives:[dx,B,H,FT,gS,$T,dS],styles:["button[_ngcontent-%COMP%]{font-family:Bangers;letter-spacing:4px}","input[_ngcontent-%COMP%]{font-size:16px;font-family:Inconsolata}",".hidden[_ngcontent-%COMP%]{display:none}",".screenplay-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:Verdana;letter-spacing:1px}",".screenplay-controls[_ngcontent-%COMP%]{display:inline-block}",".screenplay-controls[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{display:inline-block;margin-bottom:5px}","a.hidden[_ngcontent-%COMP%]{display:none}"]}),e}(),NS=function(){var e=function(){function e(t,n){v(this,e),this.storage=t,this.storyboardService=n,this.isProcessing=!1,this.hasError=!1,this.selectedStory$=new qk.xQ}return p(e,[{key:"storySelected",value:function(e){var t=this;e.id.includes(":")?this.selectedStory$.next(e):(this.isProcessing=!0,this.hasError=!1,this.storage.ref("stories/".concat(e.id,".md")).getDownloadURL().pipe(yb(function(e){return t.isProcessing=!1,t.hasError=!0,(0,Lx._)(e)})).subscribe(function(n){t.storyboardService.getStoryContent(n).pipe(yb(function(e){return t.isProcessing=!1,t.hasError=!0,(0,Fe.of)(void 0)})).subscribe(function(n){e.content=null!=n?n:"",t.selectedStory$.next(e),t.isProcessing=!1})}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(nT),a.Y36(aT))},e.\u0275cmp=a.Xpm({type:e,selectors:[["story-editor"]],decls:22,vars:5,consts:[[1,"modal"],[1,"modal-background"],[1,"modal-content"],[1,"notification","is-info","is-dark"],["max","100",1,"progress","is-success","mt-3"],[1,"container","m-5"],[1,"columns"],[1,"column"],[1,"title","is-4"],[1,"container"],[3,"storySelected"],[1,"column","is-two-thirds-tablet"],[3,"story"]],template:function(e,t){1&e&&(a._UZ(0,"navigation-widget"),a.TgZ(1,"div",0),a._UZ(2,"div",1),a.TgZ(3,"div",2),a.TgZ(4,"div",3),a._uU(5," Please wait while we retrieve your "),a.TgZ(6,"strong"),a._uU(7,"story"),a.qZA(),a._uU(8,". "),a.TgZ(9,"progress",4),a._uU(10,"45%"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"div",5),a.TgZ(12,"div",6),a.TgZ(13,"div",7),a.TgZ(14,"h1",8),a._uU(15,"Story Builder"),a.qZA(),a.TgZ(16,"div",9),a.TgZ(17,"my-stories-listing-widget",10),a.NdJ("storySelected",function(e){return t.storySelected(e)}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(18,"div",11),a.TgZ(19,"div",9),a._UZ(20,"story-editor-widget",12),a.ALo(21,"async"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(1),a.ekj("is-active",t.isProcessing),a.xp6(19),a.Q6J("story",a.lcZ(21,3,t.selectedStory$)))},directives:[dT,ST,OS],pipes:[$],encapsulation:2}),e}(),PS=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Xpm({type:e,selectors:[["not-found"]],decls:1,vars:0,template:function(e,t){1&e&&a._uU(0,"You're lost... go back...")},encapsulation:2}),e}(),DS=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0;v(this,e),this.capacity=t,this.storage=[]}return p(e,[{key:"enqueue",value:function(e){if(this.size()===this.capacity)throw Error("Queue has reached max capacity, you cannot add more items");this.storage.push(e)}},{key:"dequeue",value:function(){return this.storage.shift()}},{key:"size",value:function(){return this.storage.length}}]),e}(),LS=(function(e){e[e.None=0]="None",e[e.Wait=1]="Wait",e[e.AddVariable=2]="AddVariable",e[e.SplashShow=3]="SplashShow",e[e.TitleShow=4]="TitleShow",e[e.TitleHide=5]="TitleHide",e[e.ClosedCaptionShow=6]="ClosedCaptionShow",e[e.ClosedCaptionHide=7]="ClosedCaptionHide",e[e.NewScene=8]="NewScene",e[e.SceneTitleHide=9]="SceneTitleHide",e[e.BgImageShow=10]="BgImageShow",e[e.BgImageHide=11]="BgImageHide",e[e.BgEffectsPlay=12]="BgEffectsPlay",e[e.BgEffectsStop=13]="BgEffectsStop",e[e.BgMusicPlay=14]="BgMusicPlay",e[e.BgMusicPause=15]="BgMusicPause",e[e.BgMusicStop=16]="BgMusicStop",e[e.SoundEffectsShow=17]="SoundEffectsShow",e[e.SoundEffectsHide=18]="SoundEffectsHide",e[e.SoundEffectsPlay=19]="SoundEffectsPlay",e[e.SoundEffectsPause=20]="SoundEffectsPause",e[e.SoundEffectsStop=21]="SoundEffectsStop",e[e.CharAdd=22]="CharAdd",e[e.CharRemove=23]="CharRemove",e[e.CharSpeak=24]="CharSpeak",e[e.CharShutup=25]="CharShutup",e[e.CharEffectsPlay=26]="CharEffectsPlay",e[e.CharEffectsStop=27]="CharEffectsStop",e[e.NarratorSpeak=28]="NarratorSpeak",e[e.ImageSnippetShow=29]="ImageSnippetShow",e[e.ImageSnippetHide=30]="ImageSnippetHide",e[e.TextEffectShow=31]="TextEffectShow",e[e.WeatherEffectStart=32]="WeatherEffectStart",e[e.TextEffectHide=33]="TextEffectHide",e[e.DubbingPlay=34]="DubbingPlay"}(LS||(LS={})),LS),MS=p(function e(t,n,r){v(this,e),this.commandType=LS.None,this.waitAfterInMs=1e3,this.commandType=t,this.settings=r,this.waitAfterInMs=n}),US=(function(e){e[e.None=0]="None",e[e.Left=1]="Left",e[e.Right=2]="Right"}(US||(US={})),US),FS=["serious","angry","scared","whisper","creepy","redacted"],VS=p(function e(t){v(this,e),this.id="",this.name="",this.tokenId=0,this.imageUrl="",this.position=US.None,this.dialogue="",this.dialogueType="normal",this.anonLevel=0,this.id=t.id,this.name=t.name,this.tokenId=t.tokenId,this.imageUrl=t.imageUrl,this.position=t.position,this.dialogue=t.dialogue,this.anonLevel=t.anonLevel}),ZS=p(function e(){v(this,e),this.hash=0,this.commandIndex=0,this.variables=new Map}),qS=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){try{var t=e.indexOf(":"),n=e.substr(1,t-2),r=e.substr(t+1,e.length).replace("<","").replace(">","");return[new MS(LS.AddVariable,0,{name:n,value:r})]}catch(Wg){return[]}}}]),e}(),jS=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){try{var t={value:e.split(":")[1].replace("[","").replace("]","").trim()};return[new MS(LS.BgImageHide,0,{}),new MS(LS.BgImageShow,0,t)]}catch(Wg){return[]}}}]),e}(),BS=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){try{var t=e.split(":")[1].replace("[","").replace("]","").trim(),n={value:t,loop:e.split(":")[0].trim().includes("bgm")},r=[];return r.push(new MS(t?LS.BgMusicPlay:LS.BgMusicStop,0,n)),r}catch(Wg){return[]}}}]),e}(),zS=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){try{var t=e.indexOf("(")>1&&e.indexOf(")")>e.indexOf("("),n={title:e.substr(2,t?e.indexOf("(")-2:e.length-2).trim(),subtitle:t?e.substring(e.indexOf("(")+1,e.indexOf(")")).trim():""};return[new MS(LS.TitleShow,4e3,n),new MS(LS.TitleHide,0,{})]}catch(Wg){return[]}}}]),e}(),HS=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){try{var t=e.substr(4,e.length).trim();return[new MS(LS.NewScene,3e3,{title:t}),new MS(LS.SceneTitleHide,0,{})]}catch(Wg){return[]}}}]),e}(),GS=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){var t;try{var n=e.split(":"),r=n[0].split("|")[0],i=r.toUpperCase().includes("R")?US.Right:US.Left,a=r.split("?").length,o=n[0].split("|")[1],u=null===(t=n[1])||void 0===t?void 0:t.match(/[^\.!\?]+[\.!\?]+/g),s=[new MS(LS.CharAdd,0,{name:4===a||2===a?"?????:":"".concat(o,":"),position:i,anonLevel:a,id:o,dialogue:""})];return null==u||u.forEach(function(e){e=e.trim();var t="normal";FS.forEach(function(n){e.includes("$".concat(n,"$"))&&(t=n,e=e.replace("$".concat(n,"$"),"").trim())});var n={name:4===a||2===a?"?????:":"".concat(o,":"),position:i,anonLevel:a,id:o,dialogueType:t,dialogue:e.trim()};e.trim()&&s.push(new MS(LS.CharSpeak,1e3,n))}),s}catch(c){return[]}}}]),e}(),KS=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){var t;try{var n=null===(t=e.split(":")[1])||void 0===t?void 0:t.match(/[^\.!\?]+[\.!\?]+/g),r=[];return null==n||n.forEach(function(e){var t={dialogue:e.trim()};e.trim()&&r.push(new MS(LS.NarratorSpeak,1e3,t))}),r.push(new MS(LS.NarratorSpeak,0,{dialogue:""})),r}catch(i){return[]}}}]),e}(),WS=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){try{var t=e.split(":")[1].replace("[","").replace("]","").trim();return[new MS(LS.BgImageShow,5e3,{value:t})]}catch(Wg){return[]}}}]),e}(),JS=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){try{var t=e.split("|")[1];return[new MS(LS.CharRemove,0,{name:t,id:t})]}catch(Wg){return[]}}}]),e}(),YS=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){try{var t=e.split(":")[1].replace("[","").replace("]","").trim(),n={value:t};return t?[new MS(LS.ImageSnippetShow,1e3,n)]:[new MS(LS.ImageSnippetHide,0,n)]}catch(Wg){return[]}}}]),e}(),QS=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){var t;try{var n=e.split(":"),r=null===(t=n[0].split("|"))||void 0===t?void 0:t[1],i=n[1],a=[],o={value:i,position:"pos-"+r};return i?(a.push(new MS(LS.TextEffectShow,1e3,o)),a.push(new MS(LS.TextEffectHide,0,o))):a.push(new MS(LS.TextEffectHide,0,o)),a}catch(u){return[]}}}]),e}(),$S=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){try{var t=e.substr(6,e.length).trim().match(/[^\.!\?]+[\.!\?]+/g),n=[];return null==t||t.forEach(function(e){var t={cc:e.trim()};e.trim()&&n.push(new MS(LS.ClosedCaptionShow,1e3,t))}),n.push(new MS(LS.ClosedCaptionShow,0,{cc:""})),n}catch(Wg){return[]}}}]),e}(),XS=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){try{var t=e.split("|"),n=t.length>1?t[1].toLowerCase():"none",r=[];return r.push(new MS(LS.WeatherEffectStart,0,{value:n})),r}catch(Wg){return[]}}}]),e}(),eI=function(){var e=function(){function e(){v(this,e),this.eventHandlerMap=new Map([[LS.AddVariable,new qS],[LS.BgImageShow,new jS],[LS.BgMusicPlay,new BS],[LS.ImageSnippetShow,new YS],[LS.TitleShow,new zS],[LS.NewScene,new HS],[LS.CharAdd,new GS],[LS.CharRemove,new JS],[LS.NarratorSpeak,new KS],[LS.SplashShow,new WS],[LS.TextEffectShow,new QS],[LS.ClosedCaptionShow,new $S],[LS.WeatherEffectStart,new XS]])}return p(e,[{key:"getStoryEventCommand",value:function(e){var t,n=this.getCommandType(e);return(null===(t=this.eventHandlerMap.get(n))||void 0===t?void 0:t.composeEvent(e))||[]}},{key:"getCommandType",value:function(e){return 0===e.indexOf("> N")&&e.length>4?LS.NarratorSpeak:0===e.indexOf("> CC")&&e.length>5?LS.ClosedCaptionShow:0===e.indexOf("> E")&&e.length>4?LS.TextEffectShow:0===e.indexOf("> W")&&e.length>4?LS.WeatherEffectStart:(0===e.indexOf("> L")||0===e.indexOf("> R"))&&e.length>4?LS.CharAdd:0===e.indexOf("> X")&&e.length>4?LS.CharRemove:0===e.indexOf("`bg`:")?LS.BgImageShow:0===e.indexOf("`bgm`:")||0===e.indexOf("`soundclip`:")?LS.BgMusicPlay:0===e.indexOf("`imgpop`:")?LS.ImageSnippetShow:0===e.indexOf("`cover`:")?LS.SplashShow:0===e.indexOf("[")&&e.indexOf("]:")>1?LS.AddVariable:0===e.indexOf("# ")?LS.TitleShow:0===e.indexOf("### ")?LS.NewScene:LS.None}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),tI=["bgmPlayer"],nI=["audioPlayer"];function rI(e,t){if(1&e&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&e){var n=a.oxw();a.Gre("text-effect ",n.txtEffectPos,""),a.xp6(1),a.Oqu(n.txtEffect)}}function iI(e,t){if(1&e&&(a.TgZ(0,"div",26),a._UZ(1,"img",3),a.qZA()),2&e){var n=a.oxw();a.xp6(1),a.s9C("src",n.imgSnippet,a.LSH)}}function aI(e,t){if(1&e&&(a.TgZ(0,"div",31),a.TgZ(1,"span",32),a._uU(2),a.qZA(),a.qZA()),2&e){var n=a.oxw(2);a.xp6(1),a.ekj("unknown","?????:"===n.lCharCache[0].name),a.xp6(1),a.hij(" ",n.lCharCache[0].name," ")}}function oI(e,t){if(1&e&&(a.TgZ(0,"div",33),a.TgZ(1,"span"),a._uU(2),a.qZA(),a.qZA()),2&e){var n=a.oxw(2);a.xp6(1),a.Gre("dialogue ",n.lCharCache[0].dialogueType,""),a.xp6(1),a.hij(" ",n.lCharCache[0].dialogue," ")}}function uI(e,t){if(1&e&&a._UZ(0,"img",36),2&e){var n=t.$implicit;a.ekj("main",0===t.index),a.Q6J("src",n.imageUrl,a.LSH)}}function sI(e,t){if(1&e&&(a.TgZ(0,"div",34),a.YNc(1,uI,1,3,"img",35),a.qZA()),2&e){var n=a.oxw(2);a.xp6(1),a.Q6J("ngForOf",n.lCharCache)}}function cI(e,t){if(1&e&&(a.TgZ(0,"div",27),a.YNc(1,aI,3,3,"div",28),a.YNc(2,oI,3,4,"div",29),a.YNc(3,sI,2,1,"div",30),a.qZA()),2&e){var n=a.oxw();a.xp6(1),a.Q6J("ngIf",n.lCharCache[0].name),a.xp6(1),a.Q6J("ngIf",n.lCharCache[0].dialogue),a.xp6(1),a.Q6J("ngIf",n.lCharCache[0])}}function lI(e,t){if(1&e&&(a.TgZ(0,"div",40),a.TgZ(1,"span",32),a._uU(2),a.qZA(),a.qZA()),2&e){var n=a.oxw(2);a.xp6(1),a.ekj("unknown","?????:"===n.rCharCache[0].name),a.xp6(1),a.hij(" ",n.rCharCache[0].name," ")}}function hI(e,t){if(1&e&&(a.TgZ(0,"div",41),a.TgZ(1,"span"),a._uU(2),a.qZA(),a.qZA()),2&e){var n=a.oxw(2);a.xp6(1),a.Gre("dialogue ",n.rCharCache[0].dialogueType,""),a.xp6(1),a.hij(" ",n.rCharCache[0].dialogue," ")}}function fI(e,t){if(1&e&&a._UZ(0,"img",36),2&e){var n=a.oxw(),r=n.index,i=n.count,o=a.oxw(3);a.ekj("main",r===i-1),a.Q6J("src",o.rCharCache[i-1-r].imageUrl,a.LSH)}}function dI(e,t){if(1&e&&(a.ynx(0),a.YNc(1,fI,1,3,"img",43),a.BQk()),2&e){var n=t.index;a.xp6(1),a.Q6J("ngIf",n<8)}}function pI(e,t){if(1&e&&(a.TgZ(0,"div",34),a.YNc(1,dI,2,1,"ng-container",42),a.qZA()),2&e){var n=a.oxw(2);a.xp6(1),a.Q6J("ngForOf",n.rCharCache)}}function vI(e,t){if(1&e&&(a.TgZ(0,"div",37),a.YNc(1,lI,3,3,"div",38),a.YNc(2,hI,3,4,"div",39),a.YNc(3,pI,2,1,"div",30),a.qZA()),2&e){var n=a.oxw();a.xp6(1),a.Q6J("ngIf",n.rCharCache[0].name),a.xp6(1),a.Q6J("ngIf",n.rCharCache[0].dialogue),a.xp6(1),a.Q6J("ngIf",n.rCharCache)}}var gI=function(){var e=function(){function e(t){v(this,e),this.storyEventService=t,this.storyEnded=new a.vpe,this._rawStory="",this._junkies=[],this.storyboardEvents=new DS,this.title="",this.subtitle="",this.showTitlePanel=!1,this.scenetitle="",this.showScenePanel=!1,this.closedcaption="",this.weatherEffect="",this.imgSnippet="",this.bgm="",this.audio="",this.txtEffect="",this.txtEffectPos="",this.narration="",this.leftName="",this.leftDialogue="",this.rightName="",this.rightDialogue="",this.customBackgroundStyle="",this.charCache=[],this.lCharCache=[],this.rCharCache=[],this.bgImage="",this.state=new ZS,this.processing=!1}return p(e,[{key:"handleKeyboardEvent",value:function(e){this.processing||"Enter"!==e.key?this.processing||this.processNextEvent():this.storyEnded.emit()}},{key:"rawStory",get:function(){return this._rawStory},set:function(e){null!==e&&(this._rawStory=e,this.state.hash=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=3735928559^n,i=1103547991^n,a=0;a<e.length;a++)t=e.charCodeAt(a),r=Math.imul(r^t,2654435761),i=Math.imul(i^t,1597334677);return r=Math.imul(r^r>>>16,2246822507)^Math.imul(i^i>>>13,3266489909),4294967296*(2097151&(i=Math.imul(i^i>>>16,2246822507)^Math.imul(r^r>>>13,3266489909)))+(r>>>0)}(e),this.storyboardEvents=this.getEvents(e),this.reset(),this.processNextEvent())}},{key:"junkies",get:function(){return this._junkies},set:function(e){null!==e&&(this._junkies=e)}},{key:"getEvents",value:function(e){var t=this,n=new DS;return e.split(/[\r\n]+/).forEach(function(e){t.storyEventService.getStoryEventCommand(e).forEach(function(e){n.enqueue(e)})}),n.enqueue(new MS(LS.Wait,1e3,{})),n.enqueue(new MS(LS.Wait,1e3,{})),n}},{key:"processNextEvent",value:function(){if(!this.processing){for(;this.storyboardEvents.size()>0;){this.processing=!0;var e=this.storyboardEvents.dequeue();if(e&&(this.processEvent(e),e.waitAfterInMs>0)){this.processing=!1;break}}0===this.storyboardEvents.size()&&this.storyEnded.emit()}}},{key:"processEvent",value:function(e){switch(console.log("Processing ".concat(LS[e.commandType])),null==e?void 0:e.commandType){case LS.AddVariable:this.addVariable(e);break;case LS.BgImageShow:this.showBgImage(e);break;case LS.ImageSnippetShow:this.imageSnippetShow(e);break;case LS.ImageSnippetHide:this.imageSnippetHide();break;case LS.TextEffectShow:this.textEffectShow(e);break;case LS.TextEffectHide:this.textEffectHide();break;case LS.BgMusicPlay:this.bgMusicPlay(e);break;case LS.BgMusicStop:this.bgMusicStop();break;case LS.TitleShow:this.showTitle(e);break;case LS.TitleHide:this.hideTitle();break;case LS.ClosedCaptionShow:this.showClosedCaption(e);break;case LS.ClosedCaptionHide:this.hideClosedCaption();break;case LS.NewScene:this.newScene(e);break;case LS.SceneTitleHide:this.hideSceneTitle();break;case LS.NarratorSpeak:this.narratorSpeak(e);break;case LS.ClosedCaptionShow:this.showClosedCaption(e);break;case LS.CharAdd:this.characterAdd(e);break;case LS.CharRemove:this.characterRemove(e);break;case LS.CharSpeak:this.characterSpeak(e);break;case LS.WeatherEffectStart:this.changeWeather(e)}}},{key:"addVariable",value:function(e){this.state.variables.set(e.settings.name,e.settings.value.trim())}},{key:"showBgImage",value:function(e){var t=this.state.variables.get(e.settings.value);this.customBackgroundStyle=/^#([0-9A-F]{3}){1,2}$/i.test(e.settings.value)?"background-color: ".concat(e.settings.value):void 0!==t?"background-image: url(".concat(t,")"):"background-color: #333333"}},{key:"imageSnippetShow",value:function(e){var t=this.state.variables.get(e.settings.value);this.imgSnippet=t}},{key:"imageSnippetHide",value:function(){this.imgSnippet=""}},{key:"textEffectShow",value:function(e){this.txtEffect=e.settings.value,this.txtEffectPos=e.settings.position}},{key:"textEffectHide",value:function(){this.txtEffect=""}},{key:"bgMusicPlay",value:function(e){var t=this.state.variables.get(e.settings.value);e.settings.loop?(this.bgm=t,this.bgmPlayer.nativeElement.load(),this.bgmPlayer.nativeElement.loop=!0,this.bgmPlayer.nativeElement.play()):(this.audio=t,this.audioPlayer.nativeElement.load(),this.audioPlayer.nativeElement.loop=!1,this.audioPlayer.nativeElement.play())}},{key:"bgMusicStop",value:function(){this.bgm="",this.bgmPlayer.nativeElement.pause()}},{key:"showTitle",value:function(e){this.title=e.settings.title,this.subtitle=e.settings.subtitle,this.showTitlePanel=!0}},{key:"hideTitle",value:function(){this.showTitlePanel=!1}},{key:"showClosedCaption",value:function(e){this.closedcaption=e.settings.cc}},{key:"hideClosedCaption",value:function(){this.closedcaption=""}},{key:"newScene",value:function(e){this.charCache=[],this.scenetitle=e.settings.title,this.showScenePanel=!0}},{key:"hideSceneTitle",value:function(){this.scenetitle="",this.showScenePanel=!1}},{key:"changeWeather",value:function(e){this.weatherEffect=e.settings.value}},{key:"narratorSpeak",value:function(e){this.narration=e.settings.dialogue}},{key:"clearDialogue",value:function(){this.charCache.forEach(function(e){e.dialogue=""})}},{key:"characterAdd",value:function(e){var t=e.settings.id;if(void 0!==this.state.variables.get(e.settings.id)){var n=Number.parseInt(this.state.variables.get(e.settings.id)),r=e.settings.anonLevel;this.charCache.find(function(e){return e.id===t})||(this.clearDialogue(),this.charCache.push(new VS({id:t,name:"",tokenId:n,imageUrl:r<=2?"https://static.shinji.xyz/unit-00/nft-images/".concat(this.junkies[n].hash,".png"):"assets/images/silhouette-20.png",position:e.settings.position,anonLevel:r,dialogue:e.settings.dialogue,dialogueType:e.settings.dialogueType})),this.updateStage())}else alert("You forgot to define: ".concat(e.settings.id))}},{key:"characterRemove",value:function(e){if(e.settings.id){var t=this.charCache.findIndex(function(t){return t.id===e.settings.id});this.charCache.splice(t,1)}else this.charCache=[];this.updateStage()}},{key:"characterSpeak",value:function(e){var t=e.settings.id,n=e.settings.anonLevel,r=this.charCache.findIndex(function(e){return e.id===t});if(this.clearDialogue(),r>=0){var i,a=this.charCache[r];a.name=e.settings.name,a.imageUrl=n<3?"https://static.shinji.xyz/unit-00/nft-images/".concat(this.junkies[a.tokenId].hash,".png"):"assets/images/silhouette-20.png",a.dialogue=e.settings.dialogue,a.dialogueType=e.settings.dialogueType;var o=this.charCache.findIndex(a.position===US.Left?function(e){return e.position===US.Left}:function(e){return e.position===US.Right});i=[this.charCache[r],this.charCache[o]],this.charCache[o]=i[0],this.charCache[r]=i[1],this.updateStage()}}},{key:"updateStage",value:function(){this.lCharCache=this.charCache.filter(function(e){return e.position===US.Left}),this.rCharCache=this.charCache.filter(function(e){return e.position===US.Right})}},{key:"reset",value:function(){this.charCache=[],this.hideTitle(),this.hideSceneTitle(),this.textEffectHide(),this.imageSnippetHide(),this.updateStage()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(eI))},e.\u0275cmp=a.Xpm({type:e,selectors:[["storyboard-widget"]],viewQuery:function(e,t){var n;(1&e&&(a.Gf(tI,5),a.Gf(nI,5)),2&e)&&(a.iGM(n=a.CRH())&&(t.bgmPlayer=n.first),a.iGM(n=a.CRH())&&(t.audioPlayer=n.first))},hostBindings:function(e,t){1&e&&a.NdJ("keypress",function(e){return t.handleKeyboardEvent(e)},!1,a.evT)},inputs:{rawStory:"rawStory",junkies:"junkies"},outputs:{storyEnded:"storyEnded"},decls:44,vars:25,consts:[["id","storyboard-wrapper",3,"click"],["autoplay",""],["bgmPlayer",""],[3,"src"],["audioPlayer",""],[1,"hero","is-small","is-dark","slider","title-slider"],["titlePanel",""],[1,"hero-body","brand"],["src","assets/images/shonen_junk_logo.svg"],[1,"title"],[1,"subtitle"],[1,"instruction"],[1,"hero","slider","scene-slider"],["scenePanel",""],[1,"hero-body"],[1,"hero","slider","cc-slider"],[1,"modal","narration"],[1,"modal-background"],[1,"modal-content"],[1,"dialogue","narration"],[1,"stage"],["stagePanel",""],[3,"class",4,"ngIf"],["class","image-snippet",4,"ngIf"],["class","avatar left",4,"ngIf"],["class","avatar right",4,"ngIf"],[1,"image-snippet"],[1,"avatar","left"],["class","name speech-bubble left",4,"ngIf"],["class","speech-bubble left",4,"ngIf"],["class","characters",4,"ngIf"],[1,"name","speech-bubble","left"],[1,"dialogue"],[1,"speech-bubble","left"],[1,"characters"],["class","char",3,"main","src",4,"ngFor","ngForOf"],[1,"char",3,"src"],[1,"avatar","right"],["class","name speech-bubble right",4,"ngIf"],["class","speech-bubble right",4,"ngIf"],[1,"name","speech-bubble","right"],[1,"speech-bubble","right"],[4,"ngFor","ngForOf"],["class","char",3,"main","src",4,"ngIf"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.NdJ("click",function(){return t.processNextEvent()}),a.TgZ(1,"audio",1,2),a._UZ(3,"source",3),a.qZA(),a.TgZ(4,"audio",1,4),a._UZ(6,"source",3),a.qZA(),a.TgZ(7,"div"),a.TgZ(8,"section",5,6),a.TgZ(10,"div",7),a.TgZ(11,"div"),a._UZ(12,"img",8),a.TgZ(13,"p"),a._uU(14,"JUNKYARD STORIES "),a.TgZ(15,"span"),a._uU(16,"presents"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(17,"p",9),a._uU(18),a.qZA(),a.TgZ(19,"p",10),a._uU(20),a.qZA(),a.TgZ(21,"p",11),a._uU(22,"[press space key or touch screen]"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(23,"section",12,13),a.TgZ(25,"div",14),a.TgZ(26,"p",10),a._uU(27),a.qZA(),a.qZA(),a.qZA(),a.TgZ(28,"section",15,13),a.TgZ(30,"div",14),a.TgZ(31,"p",10),a._uU(32),a.qZA(),a.qZA(),a.qZA(),a.TgZ(33,"div",16),a._UZ(34,"div",17),a.TgZ(35,"div",18),a.TgZ(36,"span",19),a._uU(37),a.qZA(),a.qZA(),a.qZA(),a.TgZ(38,"div",20,21),a.YNc(40,rI,2,4,"span",22),a.YNc(41,iI,2,1,"div",23),a.YNc(42,cI,4,3,"div",24),a.YNc(43,vI,4,3,"div",25),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(3),a.s9C("src",t.bgm,a.LSH),a.xp6(3),a.s9C("src",t.audio,a.LSH),a.xp6(1),a.Akn(t.customBackgroundStyle),a.Gre("background weather ",t.weatherEffect,""),a.xp6(1),a.ekj("hidden",!t.showTitlePanel),a.xp6(10),a.hij(" ",t.title," "),a.xp6(2),a.hij(" ",t.subtitle," "),a.xp6(3),a.ekj("hidden",!t.showScenePanel),a.xp6(4),a.hij(" ",t.scenetitle," "),a.xp6(1),a.ekj("hidden",!t.closedcaption),a.xp6(4),a.hij(" [",t.closedcaption,"] "),a.xp6(1),a.ekj("is-active",t.narration),a.xp6(4),a.Oqu(t.narration),a.xp6(3),a.Q6J("ngIf",t.txtEffect),a.xp6(1),a.Q6J("ngIf",t.imgSnippet),a.xp6(1),a.Q6J("ngIf",t.lCharCache[0]),a.xp6(1),a.Q6J("ngIf",t.rCharCache[0]))},directives:[H,B],styles:["html{overflow:hidden}#storyboard-wrapper{height:100vh;background-color:#1e2029}#storyboard-wrapper .hidden{display:none}#storyboard-wrapper .instruction{padding:20px!important;color:#fff!important;font-size:2vh!important;font-family:Press Start\\ 2P,Courier,monospace!important}#storyboard-wrapper .background{display:flex;background-color:#1e2029;background-size:cover;height:100%;width:100%;align-items:center;-webkit-animation:fadeIn 4s;animation:fadeIn 4s}#storyboard-wrapper .background .brand img{width:25vw}#storyboard-wrapper .background .brand p{font-family:Bangers;font-size:4vh;color:#ff0;margin-bottom:20px}#storyboard-wrapper .background .brand p span{color:#fff}#storyboard-wrapper .background .brand .subtitle,#storyboard-wrapper .background .brand .title{text-transform:uppercase;font-size:6vh;font-family:Lalezar}#storyboard-wrapper .background .brand .subtitle{font-size:3vh}#storyboard-wrapper .background .dialogue{font-size:3.5vh;line-height:5vh;padding:.6vw 1vw;color:#fff}#storyboard-wrapper .background .narration{z-index:7;margin:25vh 0;padding:3vw}#storyboard-wrapper .background .narration .modal-content{text-align:center;overflow:hidden;width:80vw}#storyboard-wrapper .background .narration .dialogue{padding:0;margin:0;font-size:4.5vh;line-height:9vh}#storyboard-wrapper .background .stage .image-snippet{width:100vw;text-align:center}#storyboard-wrapper .background .stage .image-snippet img{max-width:70vw;max-height:80vh}#storyboard-wrapper .background .stage .text-effect{z-index:8;font-family:Bangers;font-size:25vh;color:red;text-shadow:-3px 0 #000,0 3px #000,3px 0 #000,0 -3px #000;position:absolute;margin:0 auto}#storyboard-wrapper .background .stage .text-effect.pos-7{top:5vh;left:7vh}#storyboard-wrapper .background .stage .text-effect.pos-8{top:5vh;left:30vw}#storyboard-wrapper .background .stage .text-effect.pos-9{top:5vh;right:7vh}#storyboard-wrapper .background .stage .text-effect.pos-4{top:32vh;left:7vh}#storyboard-wrapper .background .stage .text-effect.pos-5{top:32vh;left:30vw}#storyboard-wrapper .background .stage .text-effect.pos-6{top:32vh;right:7vh}#storyboard-wrapper .background .stage .text-effect.pos-1{bottom:5vh;left:7vh}#storyboard-wrapper .background .stage .text-effect.pos-2{bottom:5vh;left:30vw}#storyboard-wrapper .background .stage .text-effect.pos-3{bottom:5vh;right:7vh}#storyboard-wrapper .background .stage .avatar{position:absolute}#storyboard-wrapper .background .stage .avatar.left{top:5vh;left:0}#storyboard-wrapper .background .stage .avatar.right{bottom:5vh;right:0}#storyboard-wrapper .background .stage .avatar .char{max-width:10vw;min-width:10vw}#storyboard-wrapper .background .stage .avatar .char.main{max-width:20vw;min-width:20vw}#storyboard-wrapper .background .stage .avatar .speech-bubble{font-family:Overpass Mono,Courier,monospace;position:absolute;top:5vh;width:65vw}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue{background-color:#000}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.serious{font-family:Akronim,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.creepy{font-family:Creepster,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.angry{font-size:3vh;line-height:7vh;color:red;font-family:Gloria Hallelujah,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.scared{font-family:Rubik Puddles,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.whisper{font-family:Whisper,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.redacted{font-family:Redacted Script,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.monster{font-family:Eater,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble.right{right:20vw;text-align:right}#storyboard-wrapper .background .stage .avatar .speech-bubble.left{left:20vw}#storyboard-wrapper .background .stage .avatar .speech-bubble.name{top:-2vh}#storyboard-wrapper .background .stage .avatar .speech-bubble.name.left .dialogue{background:#0065ff}#storyboard-wrapper .background .stage .avatar .speech-bubble.name.right .dialogue{background:#f26522}#storyboard-wrapper .background .stage .avatar .speech-bubble.name.left .dialogue.unknown,#storyboard-wrapper .background .stage .avatar .speech-bubble.name.right .dialogue.unknown{background:#333}.slider{background-color:#0065ff;width:100%;position:fixed}.title-slider{text-align:center;z-index:10;-webkit-animation:slideDown 4s 1;animation:slideDown 4s 1}.cc-slider{background-color:hsla(0,0%,4%,.86);font-family:Overpass Mono;z-index:9;text-align:left;position:fixed}.cc-slider .subtitle{color:#fff}.cc-slider .hero-body{text-align:center;padding:2vh 3vw}.scene-slider{background-color:#0065ff;z-index:9;position:relative;top:10vh;transform:translateX(100%);text-align:left;position:fixed;-webkit-animation:peek 3.5s 1;animation:peek 3.5s 1}.scene-slider .subtitle{color:#fff}.scene-slider .hero-body{padding:4vh 6vh}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@-webkit-keyframes slideDown{0%{transform:translateY(-300%)}to{transform:translateY(0)}}@keyframes slideDown{0%{transform:translateY(-300%)}to{transform:translateY(0)}}@-webkit-keyframes peek{0%{transform:translateX(100%)}40%{transform:translateX(20%)}80%{transform:translateX(20%)}to{transform:translateX(100%)}}@keyframes peek{0%{transform:translateX(100%)}40%{transform:translateX(20%)}80%{transform:translateX(20%)}to{transform:translateX(100%)}}@-webkit-keyframes typing{0%{width:0}to{width:100%}}@keyframes typing{0%{width:0}to{width:100%}}@-webkit-keyframes blink{0%,to{border-color:transparent}50%{border-color:orange}}@keyframes blink{0%,to{border-color:transparent}50%{border-color:orange}}"],encapsulation:2}),e}(),mI=function(){var e=function(){function e(t,n,r,i,a){v(this,e),this.storage=t,this.meta=n,this.router=r,this.route=i,this.storyboardService=a,this.isProcessing=!1,this.hasError=!1,this.storyId="",this.rawStory$=new qk.xQ,this.junkies$=new qk.xQ,this.isLocalData=!1}return p(e,[{key:"ngAfterViewInit",value:function(){var e=this;setTimeout(function(){e.ngOnInit()})}},{key:"ngOnInit",value:function(){var e=this;this.storyboardService.getStories().subscribe(function(t){var n,r,i,a=JSON.parse(JSON.stringify(t)).find(function(t){return t.id===e.storyId});e.meta.addTags([{name:"twitter:title",content:null!==(n=null==a?void 0:a.title)&&void 0!==n?n:"Junkyard Story"},{name:"twitter:description",content:null!==(r=null==a?void 0:a.cover)&&void 0!==r?r:"Share Stories"},{name:"twitter:url",content:"https://junkyard-stories.github.io/#/storyboard/".concat(null==a?void 0:a.id)},{name:"twitter:image",content:null!==(i=null==a?void 0:a.cover)&&void 0!==i?i:""},{name:"twitter:card",content:"summary_large_image"}])}),this.storyboardService.getJunkies().subscribe(function(t){e.junkies$.next(JSON.parse(JSON.stringify(t)))}),this.route.params.subscribe(function(t){e.storyId=t.id,e.loadStory(e.storyId)})}},{key:"loadStory",value:function(e){var t=this;if(this.isLocalData=e.includes(":"),this.isLocalData){var n=localStorage.getItem("junkyardStories.local.".concat(e))||"";this.rawStory$.next(null!=n?n:"")}else this.storage.ref("stories/".concat(e,".md")).getDownloadURL().pipe(yb(function(e){return t.isProcessing=!1,(0,Lx._)(e)})).subscribe(function(e){t.storyboardService.getStoryContent(e).pipe(yb(function(e){return t.isProcessing=!1,(0,Lx._)(e)})).subscribe(function(e){t.rawStory$.next(null!=e?e:""),t.isProcessing=!1})})}},{key:"storyEnded",value:function(){this.isLocalData?window.close():this.router.navigateByUrl("/")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(nT),a.Y36(Me),a.Y36(hx),a.Y36(zw),a.Y36(aT))},e.\u0275cmp=a.Xpm({type:e,selectors:[["storyboard"]],decls:3,vars:6,consts:[[3,"rawStory","junkies","storyEnded"]],template:function(e,t){1&e&&(a.TgZ(0,"storyboard-widget",0),a.NdJ("storyEnded",function(){return t.storyEnded()}),a.ALo(1,"async"),a.ALo(2,"async"),a.qZA()),2&e&&a.Q6J("rawStory",a.lcZ(1,2,t.rawStory$))("junkies",a.lcZ(2,4,t.junkies$))},directives:[gI],pipes:[$],styles:["html{overflow:hidden}"],encapsulation:2}),e}();function yI(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"button",23),a.NdJ("click",function(){a.CHM(n);var e=a.oxw().$implicit;return a.oxw().export(e.id)}),a._uU(1," EXPORT "),a.qZA()}}function kI(e,t){if(1&e&&(a.TgZ(0,"span",24),a._uU(1),a.qZA()),2&e){var n=t.$implicit;a.xp6(1),a.Oqu(n)}}function bI(e,t){if(1&e&&(a.TgZ(0,"a",26),a._UZ(1,"img",8),a.qZA()),2&e){var n=a.oxw().$implicit,r=a.oxw(2);a.MGl("href","https://shonenjunk.xyz/unit-00/gallery/",n,"",a.LSH),a.xp6(1),a.Q6J("src",r.getJunkieAvatar(n),a.LSH)}}function wI(e,t){if(1&e&&(a.ynx(0),a.YNc(1,bI,2,2,"a",25),a.BQk()),2&e){var n=t.index;a.xp6(1),a.Q6J("ngIf",n<3)}}function _I(e,t){1&e&&a._UZ(0,"a",28)}function xI(e,t){1&e&&a._UZ(0,"a",28)}function TI(e,t){if(1&e&&(a.ynx(0),a.YNc(1,_I,1,0,"a",27),a.YNc(2,xI,1,0,"a",27),a.BQk()),2&e){var n=a.oxw().$implicit;a.xp6(1),a.Q6J("ngIf",n.casts.length<3),a.xp6(1),a.Q6J("ngIf",n.casts.length<2)}}var SI=function(e){return["/storyboard",e]};function II(e,t){if(1&e&&(a.TgZ(0,"div",3),a.TgZ(1,"div",4),a.TgZ(2,"div",5),a.TgZ(3,"figure",6),a.TgZ(4,"a",7),a._UZ(5,"img",8),a.qZA(),a.YNc(6,yI,2,0,"button",9),a.qZA(),a.qZA(),a.TgZ(7,"div",10),a.TgZ(8,"div",11),a.TgZ(9,"a",7),a.TgZ(10,"div",12),a.TgZ(11,"p",13),a._uU(12),a.qZA(),a.TgZ(13,"span",14),a._uU(14),a.qZA(),a.TgZ(15,"p",15),a._uU(16,"by "),a.TgZ(17,"span",16),a._uU(18),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(19,"div",17),a.TgZ(20,"div",18),a.YNc(21,kI,2,1,"span",19),a.qZA(),a.qZA(),a.qZA(),a.TgZ(22,"footer",20),a.YNc(23,wI,2,1,"ng-container",21),a.YNc(24,TI,3,2,"ng-container",22),a.qZA(),a.qZA(),a.qZA()),2&e){var n=t.$implicit,r=a.oxw();a.xp6(4),a.Q6J("routerLink",a.VKq(12,SI,n.id)),a.xp6(1),a.Q6J("src",n.cover,a.LSH),a.xp6(1),a.Q6J("ngIf",r.isLoggedIn),a.xp6(3),a.Q6J("routerLink",a.VKq(14,SI,n.id)),a.xp6(2),a.Q6J("title",n.title),a.xp6(1),a.Oqu(n.title),a.xp6(1),a.Q6J("title",n.subtitle),a.xp6(1),a.Oqu(n.subtitle),a.xp6(4),a.Oqu(n.author),a.xp6(3),a.Q6J("ngForOf",n.tags),a.xp6(2),a.Q6J("ngForOf",n.casts),a.xp6(1),a.Q6J("ngIf",n.casts.length>0)}}var EI=function(){var e=function(){function e(t,n,r,i){var a=this;v(this,e),this.storage=t,this.storyboardService=n,this.accountService=r,this.clipboard=i,this.publishedStories=[],this.junkies=[],this.isProcessing=!1,this.storyboardService.getJunkies().subscribe(function(e){a.junkies=JSON.parse(JSON.stringify(e))})}return p(e,[{key:"isLoggedIn",get:function(){return""!==this.accountService.activeAccount}},{key:"ngOnInit",value:function(){var e=this;this.storyboardService.liveStories$.subscribe(function(t){e.publishedStories=JSON.parse(JSON.stringify(t)).filter(function(e){return"published"===e.state})}),this.storyboardService.getStoriesFromStorage()}},{key:"getJunkieAvatar",value:function(e){return"https://static.shinji.xyz/unit-00/nft-images/".concat(this.junkies[parseInt(e)].hash,".png")}},{key:"export",value:function(e){var t=this;this.isProcessing||(this.isProcessing=!0,this.storage.ref("stories/".concat(e,".md")).getDownloadURL().pipe(yb(function(e){return t.isProcessing=!1,(0,Lx._)(e)})).subscribe(function(n){t.storyboardService.getStoryContent(n).pipe(yb(function(e){return t.isProcessing=!1,(0,Lx._)(e)})).subscribe(function(n){var r,i=null!==(r=t.publishedStories.find(function(t){return t.id===e}))&&void 0!==r?r:new IT;i.content=n,t.clipboard.copy(JSON.stringify(i)),alert("Screenplay copied to clipboard."),t.isProcessing=!1})}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(nT),a.Y36(aT),a.Y36(uT),a.Y36(RT))},e.\u0275cmp=a.Xpm({type:e,selectors:[["junkyard"]],decls:4,vars:1,consts:[[1,"junkyard","p-5"],[1,"columns","is-multiline","is-tablet"],["class","column is-one-quarter-desktop is-one-third-tablet",4,"ngFor","ngForOf"],[1,"column","is-one-quarter-desktop","is-one-third-tablet"],[1,"card"],[1,"card-image"],[1,"image","is-3by2"],["target","_blank",3,"routerLink"],[3,"src"],["class","button is-small is-info is-responsive","style","position: absolute; top: 0; right: 0;",3,"click",4,"ngIf"],[1,"card-content"],[1,"media"],[1,"media-content"],[1,"title","is-6","mb-1",3,"title"],[1,"heading",3,"title"],[1,"subtitle","is-6"],[1,"tag","is-info","is-normal"],[1,""],[1,"tags","are-medium"],["class","tag is-normal",4,"ngFor","ngForOf"],[1,"card-footer"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"button","is-small","is-info","is-responsive",2,"position","absolute","top","0","right","0",3,"click"],[1,"tag","is-normal"],["target","_blank","class","card-footer-item",3,"href",4,"ngIf"],["target","_blank",1,"card-footer-item",3,"href"],["href","#","class","card-footer-item",4,"ngIf"],["href","#",1,"card-footer-item"]],template:function(e,t){1&e&&(a._UZ(0,"navigation-widget"),a.TgZ(1,"div",0),a.TgZ(2,"div",1),a.YNc(3,II,25,16,"div",2),a.qZA(),a.qZA()),2&e&&(a.xp6(3),a.Q6J("ngForOf",t.publishedStories))},directives:[dT,B,dx,H],styles:["html{overflow:auto}.navbar{background-color:#333}.navbar a{color:#fff}.navbar .brand{font-family:Bangers}.navbar .brand img{height:30px}.navbar .brand h1{color:#ff0;margin-bottom:0}.media-content p,.media-content span{overflow:hidden;text-overflow:ellipsis}.card-footer-item{padding:.25em}"],encapsulation:2}),e}(),CI=[{path:"",component:EI},{path:"junkyard",component:EI},{path:"storyboard/:id",component:mI},{path:"story-editor",component:NS},{path:"not-found",component:PS},{path:"**",redirectTo:"not-found"}],RI=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[Ix.forRoot(CI,{useHash:!0})],Ix]}),e}(),AI=function(){var e=p(function e(){v(this,e),this.title="junkyard-stories"});return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&a._UZ(0,"router-outlet")},directives:[gx],styles:[""]}),e}(),OI=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[eI],imports:[[X,Ix,yS]]}),e}(),NI=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[],imports:[[X,OI,AT,Ix]]}),e}(),PI=function(){function e(t,n){v(this,e),this.notifier=t,this.source=n}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new DI(e,this.notifier,this.source))}}]),e}(),DI=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e)).notifier=r,a.source=i,a}return p(n,[{key:"error",value:function(e){if(!this.isStopped){var t=this.errors,r=this.retries,i=this.retriesSubscription;if(r)this.errors=void 0,this.retriesSubscription=void 0;else{t=new qk.xQ;try{r=(0,this.notifier)(t)}catch(a){return o(T(n.prototype),"error",this).call(this,a)}i=(0,ob.ft)(r,new ob.IY(this))}this._unsubscribeAndRecycle(),this.errors=t,this.retries=r,this.retriesSubscription=i,t.next(e)}}},{key:"_unsubscribe",value:function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}},{key:"notifyNext",value:function(){var e=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)}}]),n}(ob.Ds),LI=i(3098),MI=function(){function e(t,n){v(this,e),this.delay=t,this.scheduler=n}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new UI(e,this.delay,this.scheduler))}}]),e}(),UI=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e)).delay=r,a.scheduler=i,a.queue=[],a.active=!1,a.errored=!1,a}return p(n,[{key:"_schedule",value:function(e){this.active=!0,this.destination.add(e.schedule(n.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}},{key:"scheduleNotification",value:function(e){if(!0!==this.errored){var t=this.scheduler,n=new FI(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}}},{key:"_next",value:function(e){this.scheduleNotification(LI.P.createNext(e))}},{key:"_error",value:function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleNotification(LI.P.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(e){for(var t=e.source,n=t.queue,r=e.scheduler,i=e.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var a=Math.max(0,n[0].time-r.now());this.schedule(e,a)}else this.unsubscribe(),t.active=!1}}]),n}(je.L),FI=p(function e(t,n){v(this,e),this.time=t,this.notification=n}),VI=function(){var e=function(){function e(){v(this,e)}return p(e,[{key:"intercept",value:function(e,t){return t.handle(e).pipe((n=function(e){return e.pipe(qe(function(e,t){return t<=5&&500==e.status?(0,Fe.of)(e):(0,Lx._)(e)}),function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mx.P,r=(t=e)instanceof Date&&!isNaN(+t)?+e-n.now():Math.abs(e);return function(e){return e.lift(new MI(r,n))}}(1e3))},function(e){return e.lift(new PI(n,e))}));var n}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}();function ZI(){return function(e){return e.lift(new qI)}}var qI=function(){function e(){v(this,e)}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new jI(e))}}]),e}(),jI=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).hasPrev=!1,r}return p(n,[{key:"_next",value:function(e){var t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}]),n}(je.L),BI=function(){function e(t,n){v(this,e),this.compare=t,this.keySelector=n}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new zI(e,this.compare,this.keySelector))}}]),e}(),zI=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e)).keySelector=i,a.hasKey=!1,"function"==typeof r&&(a.compare=r),a}return p(n,[{key:"compare",value:function(e,t){return e===t}},{key:"_next",value:function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(i){return this.destination.error(i)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,t)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}]),n}(je.L);function HI(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new ls("invalid-argument","Invalid options passed to function ".concat(e,'(): You cannot specify both "merge" and "mergeFields".'));return t}function GI(){if("undefined"==typeof Uint8Array)throw new ls("unimplemented","Uint8Arrays are not available in this environment.")}function KI(){if("undefined"==typeof atob)throw new ls("unimplemented","Blobs are unavailable in Firestore in this environment.")}i(4828);var WI=function(){function e(t){v(this,e),this._delegate=t}return p(e,[{key:"toBase64",value:function(){return KI(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return GI(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return KI(),new e(py.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return GI(),new e(py.fromUint8Array(t))}}]),e}();function JI(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var a=i[r];if(a in n&&"function"==typeof n[a])return!0}return!1}(e)}var YI=function(){function e(){v(this,e)}return p(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){fy(e=Wm(e,sy));var n=cy(e),r=e._freezeSettings(),i=new km;return hy(n,i,new mm(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){fy(e=Wm(e,sy));var t=cy(e),n=e._freezeSettings(),r=new km;return hy(t,r,new ym(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new ls(cs.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new hs;return e._queue.enqueueAndForgetEvenWhileRestricted((0,qt.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(r=(0,qt.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Af.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Af.delete(n);case 5:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})(up(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}},n,null,[[0,6]])}))),t.promise}(e._delegate)}}]),e}(),QI=function(){function e(t,n,r){var i=this;v(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Hs||(this._appCompat=t)}return p(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||is("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Wm(e,Qm))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&is("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=$u.MOCK_USER;else{o=(0,Mt.Sg)(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new ls(cs.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new $u(s)}e._authCredentials=new ps(new fs(o,u))}}(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return function(e){return function(e){return e.asyncQueue.enqueue((0,qt.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Dm(e);case 2:return n=t.sent,t.next=5,Mm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=ss(e);return t.wu.delete(0),fv(t)}(r)));case 7:case"end":return t.stop()}},t)})))}(cy(e=Wm(e,sy)))}(this._delegate)}},{key:"disableNetwork",value:function(){return function(e){return function(e){return e.asyncQueue.enqueue((0,qt.Z)(regeneratorRuntime.mark(function t(){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Dm(e);case 2:return n=t.sent,t.next=5,Mm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),(i=(0,qt.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=ss(t)).wu.add(0),e.next=4,pv(n);case 4:n.yu.set("Offline");case 5:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})(r)));case 7:case"end":return t.stop()}},t)})))}(cy(e=Wm(e,sy)))}(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&zm("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new hs;return e.asyncQueue.enqueueAndForget((0,qt.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){return Zg.apply(this,arguments)},n.next=3,Um(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}},n)}))),t.promise}(cy(e=Wm(e,sy)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return function(e,t){return function(e,t){var n=new wm(t);return e.asyncQueue.enqueueAndForget((0,qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){ss(e).bu.add(t),t.next()},t.next=3,Fm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)}))),function(){n.Aa(),e.asyncQueue.enqueueAndForget((0,qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){ss(e).bu.delete(t)},t.next=3,Fm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)})))}}(cy(e=Wm(e,sy)),oy(t)?t:{next:t})}(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new ls("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new hE(this,ty(this._delegate,e))}catch(t){throw rE(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new nE(this,ny(this._delegate,e))}catch(t){throw rE(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new sE(this,function(e,t){if(e=Wm(e,Qm),Bm("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new ls(cs.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Xm(e,null,function(e){return new rl(Ns.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw rE(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(n,r,i){n=Wm(n,sy);var a=Object.assign(Object.assign({},lk),void 0);return function(e){if(e.maxAttempts<1)throw new ls(cs.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(e,t,n){var r=new hs;return e.asyncQueue.enqueueAndForget((0,qt.Z)(regeneratorRuntime.mark(function i(){var a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return Nm(e).then(function(e){return e.datastore})}(e);case 2:a=i.sent,new Tm(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}},i)}))),r.promise}(cy(n),function(r){return i=new Tk(n,r),e(new XI(t,i));var i},a)}(this._delegate)}},{key:"batch",value:function(){var e=this;return cy(this._delegate),new eE(new pk(this._delegate,function(t){return _k(e._delegate,t)}))}},{key:"loadBundle",value:function(e){return function(e,t){var n=cy(e=Wm(e,sy)),r=new uy;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new _m(e,t)}(function(e,t){if(e instanceof Uint8Array)return bm(e,t);if(e instanceof ArrayBuffer)return bm(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,iv(t));e.asyncQueue.enqueueAndForget((0,qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t,n){var r,i=ss(e);(r=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=ss(e),r=Ch(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",function(e){return n._s.getBundleMetadata(e,t.id)}).then(function(e){return!!e&&e.createTime.compareTo(r)>=0})}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(mg(i)),a=new gg(i,t.localStore,n.M),e.next=15,n.ma();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.ma();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Wg(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=ss(e);return n.persistence.runTransaction("Save bundle","readwrite",function(e){return n._s.saveBundleMetadata(e,t)})}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(is("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}},e,null,[[0,37]])})),function(e,t,n){return r.apply(this,arguments)})(i,t,n).then(function(e){i.sharedClientState.notifyBundleLoaded(e)})},t.next=3,Um(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}},t)})))}(n,e._databaseId,t,r),r}(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return function(e,t){return function(e,t){return e.asyncQueue.enqueue((0,qt.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=ss(e);return n.persistence.runTransaction("Get named query","readonly",function(e){return n._s.getNamedQuery(e,t)})},n.next=3,Lm(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}},n)})))}(cy(e=Wm(e,sy)),t).then(function(t){return t?new Xm(e,null,t.query):null})}(this._delegate,e).then(function(e){return e?new sE(t,e):null})}}]),e}(),$I=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new WI(new py(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return nE.forKey(t,this.firestore,null)}}]),n}(hk),XI=function(){function e(t,n){v(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new $I(t)}return p(e,[{key:"get",value:function(e){var t=this,n=fE(e);return this._delegate.get(n).then(function(e){return new oE(t._firestore,new Ky(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))})}},{key:"set",value:function(e,t,n){var r=fE(e);return n?(HI("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r,i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];var u=fE(e);return 2===arguments.length?this._delegate.update(u,t):(r=this._delegate).update.apply(r,[u,t,n].concat(a)),this}},{key:"delete",value:function(e){var t=fE(e);return this._delegate.delete(t),this}}]),e}(),eE=function(){function e(t){v(this,e),this._delegate=t}return p(e,[{key:"set",value:function(e,t,n){var r=fE(e);return n?(HI("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r,i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];var u=fE(e);return 2===arguments.length?this._delegate.update(u,t):(r=this._delegate).update.apply(r,[u,t,n].concat(a)),this}},{key:"delete",value:function(e){var t=fE(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),tE=function(){function e(t,n,r){v(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return p(e,[{key:"fromFirestore",value:function(e,t){var n=new Wy(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new uE(this._firestore,n),null!=t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new $I(t),n),i.set(n,a)),a}}]),e}();tE.INSTANCES=new WeakMap;var nE=function(){function e(t,n){v(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new $I(t)}return p(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new hE(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new hE(this.firestore,ty(this._delegate,e))}catch(t){throw rE(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=(0,Mt.m9)(e))instanceof $m&&ry(this._delegate,e)}},{key:"set",value:function(e,t){t=HI("DocumentReference.set",t);try{return t?yk(this._delegate,e,t):yk(this._delegate,e)}catch(n){throw rE(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?kk(this._delegate,e):kk.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw rE(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return bk(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=iE(n),a=aE(n,function(t){return new oE(e.firestore,new Ky(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))});return wk(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=Wm(e,$m);var t=Wm(e.firestore,sy),n=cy(t),r=new gk(t);return function(e,t){var n=new hs;return e.asyncQueue.enqueueAndForget((0,qt.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=(i=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=ss(e);return n.persistence.runTransaction("read document","readonly",function(e){return n.fi.Ls(e,t)})}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new ls(cs.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=eg(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t,n){return i.apply(this,arguments)}),r.next=3,Lm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(n,e._key).then(function(n){return new Ky(t,r,e._key,n,new Gy(null!==n&&n.hasLocalMutations,!0),e.converter)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Wm(e,$m);var t=Wm(e.firestore,sy);return Zm(cy(t),e._key,{source:"server"}).then(function(n){return xk(t,e,n)})}(this._delegate):function(e){e=Wm(e,$m);var t=Wm(e.firestore,sy);return Zm(cy(t),e._key).then(function(n){return xk(t,e,n)})}(this._delegate)).then(function(e){return new oE(t.firestore,new Ky(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))})}},{key:"withConverter",value:function(t){return new e(this.firestore,this._delegate.withConverter(t?tE.getInstance(this.firestore,t):null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!=0)throw new ls("invalid-argument","Invalid document reference. Document references must have an even number of segments, but ".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new $m(n._delegate,r,new Js(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new $m(n._delegate,r,t))}}]),e}();function rE(e,t,n){return e.message=e.message.replace(t,n),e}function iE(e){var t,n=l(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"==typeof r&&!JI(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function aE(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=JI(e[0])?e[0]:JI(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var oE=function(){function e(t,n){v(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"ref",get:function(){return new nE(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Qy(this._delegate,e._delegate)}}]),e}(),uE=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||os()}(void 0!==t),t}}]),n}(oE),sE=function(){function e(t,n){v(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new $I(t)}return p(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,ek(this._delegate,function(e,t,n){var r=t,i=Hy("where",e);return new tk(i,r,n)}(t,n,r)))}catch(i){throw rE(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,ek(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=Hy("orderBy",e);return new nk(r,n)}(t,n)))}catch(r){throw rE(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,ek(this._delegate,function(e){return Jm("limit",e),new rk("limit",e,"F")}(t)))}catch(n){throw rE(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,ek(this._delegate,function(e){return Jm("limitToLast",e),new rk("limitToLast",e,"L")}(t)))}catch(n){throw rE(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,ek(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ik("startAt",t,!0)}).apply(void 0,arguments)))}catch(t){throw rE(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,ek(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ik("startAfter",t,!1)}).apply(void 0,arguments)))}catch(t){throw rE(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,ek(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ak("endBefore",t,!1)}).apply(void 0,arguments)))}catch(t){throw rE(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,ek(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ak("endAt",t,!0)}).apply(void 0,arguments)))}catch(t){throw rE(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return iy(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=Wm(e,Xm);var t=Wm(e.firestore,sy),n=cy(t),r=new gk(t);return function(e,t){var n=new hs;return e.asyncQueue.enqueueAndForget((0,qt.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=(i=(0,qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xp(t,n,!0);case 3:i=e.sent,a=new bg(n,i._i),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=eg(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}},e,null,[[0,10]])})),function(e,t,n){return i.apply(this,arguments)}),r.next=3,Lm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(n,e._query).then(function(n){return new Jy(t,r,e,n)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Wm(e,Xm);var t=Wm(e.firestore,sy),n=cy(t),r=new gk(t);return qm(n,e._query,{source:"server"}).then(function(n){return new Jy(t,r,e,n)})}(this._delegate):mk(this._delegate)).then(function(e){return new lE(t.firestore,new Jy(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))})}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=iE(n),a=aE(n,function(t){return new lE(e.firestore,new Jy(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))});return wk(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,this._delegate.withConverter(t?tE.getInstance(this.firestore,t):null))}}]),e}(),cE=function(){function e(t,n){v(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new uE(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),lE=function(){function e(t,n){v(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"query",get:function(){return new sE(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map(function(t){return new uE(e._firestore,t)})}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map(function(e){return new cE(t._firestore,e)})}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach(function(r){e.call(t,new uE(n._firestore,r))})}},{key:"isEqual",value:function(e){return Qy(this._delegate,e._delegate)}}]),e}(),hE=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return p(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new nE(this.firestore,e):null}},{key:"doc",value:function(e){try{return new nE(this.firestore,void 0===e?ny(this._delegate):ny(this._delegate,e))}catch(t){throw rE(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Wm(e.firestore,sy),r=ny(e),i=fk(e.converter,t);return _k(n,[Ty(xy(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ml.exists(!1))]).then(function(){return r})}(this._delegate,e).then(function(e){return new nE(t.firestore,e)})}},{key:"isEqual",value:function(e){return ry(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,this._delegate.withConverter(e?tE.getInstance(this.firestore,e):null))}}]),n}(sE);function fE(e){return Wm(e,$m)}var dE,pE={Firestore:QI,GeoPoint:gy,Timestamp:Is,Blob:WI,Transaction:XI,WriteBatch:eE,DocumentReference:nE,DocumentSnapshot:oE,Query:sE,QueryDocumentSnapshot:uE,QuerySnapshot:lE,CollectionReference:hE,FieldPath:function(){function e(){v(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=w(dy,n)}return p(e,[{key:"isEqual",value:function(e){return(e=(0,Mt.m9)(e))instanceof dy&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Ds.keyField().canonicalString())}}]),e}(),FieldValue:function(){function e(t){v(this,e),this._delegate=t}return p(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Ey("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Sy("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Cy("arrayUnion",t)}).apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ry("arrayRemove",t)}).apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Ay("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),setLogLevel:function(e){!function(e){es.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(dE=qx.Z).INTERNAL.registerComponent(new Vt.wA("firestore-compat",function(e){return t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("firestore").getImmediate(),new QI(t,n,new YI);var t,n},"PUBLIC").setServiceProps(Object.assign({},pE))),dE.registerVersion("@firebase/firestore-compat","0.1.18");var vE=i(6682),gE=i(9746),mE=i(7771),yE=i(8858),kE=function(e){g(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,a=arguments.length>2?arguments[2]:void 0;return v(this,n),(e=t.call(this)).scheduler=a,e._events=[],e._infiniteTimeWindow=!1,e._bufferSize=r<1?1:r,e._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(e._infiniteTimeWindow=!0,e.next=e.nextInfiniteTimeWindow):e.next=e.nextTimeWindow,e}return p(n,[{key:"nextInfiniteTimeWindow",value:function(e){if(!this.isStopped){var t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}o(T(n.prototype),"next",this).call(this,e)}},{key:"nextTimeWindow",value:function(e){this.isStopped||(this._events.push(new bE(this._getNow(),e)),this._trimBufferThenGetEvents()),o(T(n.prototype),"next",this).call(this,e)}},{key:"_subscribe",value:function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,a=r.length;if(this.closed)throw new jk.N;if(this.isStopped||this.hasError?t=Lb.w.EMPTY:(this.observers.push(e),t=new yE.W(this,e)),i&&e.add(e=new gE.ht(e,i)),n)for(var o=0;o<a&&!e.closed;o++)e.next(r[o]);else for(var u=0;u<a&&!e.closed;u++)e.next(r[u].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t}},{key:"_getNow",value:function(){return(this.scheduler||mE.c).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,a=0;a<i&&!(e-r[a].time<n);)a++;return i>t&&(a=Math.max(a,i-t)),a>0&&r.splice(0,a),r}}]),n}(qk.xQ),bE=p(function e(t,n){v(this,e),this.time=t,this.value=n});function wE(e,t,n){var r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},function(e){return e.lift(function(e){var t,n,r=e.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,a=e.windowTime,o=void 0===a?Number.POSITIVE_INFINITY:a,u=e.refCount,s=e.scheduler,c=0,l=!1,h=!1;return function(e){var r;c++,!t||l?(l=!1,t=new kE(i,o,s),r=t.subscribe(this),n=e.subscribe({next:function(e){t.next(e)},error:function(e){l=!0,t.error(e)},complete:function(){h=!0,n=void 0,t.complete()}}),h&&(n=void 0)):r=t.subscribe(this),this.add(function(){c--,r.unsubscribe(),r=void 0,n&&!h&&u&&0===c&&(n.unsubscribe(),n=void 0,t=void 0)})}}(r))}}function _E(e,t){return t?ub(function(){return e},t):ub(function(){return e})}var xE=i(3101),TE=new a.OlP("angularfire2.auth.use-emulator"),SE=new a.OlP("angularfire2.auth.settings"),IE=new a.OlP("angularfire2.auth.tenant-id"),EE=new a.OlP("angularfire2.auth.langugage-code"),CE=new a.OlP("angularfire2.auth.use-device-language"),RE=new a.OlP("angularfire.auth.persistence"),AE=function(e,t,n,i,a,o,u,c){return(0,Zx.cc)("".concat(e.name,".auth"),"AngularFireAuth",e.name,function(){var l=t.runOutsideAngular(function(){return e.auth()});if(n&&l.useEmulator.apply(l,s(n)),i&&(l.tenantId=i),l.languageCode=a,o&&l.useDeviceLanguage(),u)for(var h=0,f=Object.entries(u);h<f.length;h++){var d=r(f[h],2),p=d[0],v=d[1];l.settings[p]=v}return c&&l.setPersistence(c),l},[n,i,a,o,u,c])},OE=function(){var e=p(function e(t,n,r,a,o,u,s,c,l,h,f,d){v(this,e);var p=new qk.xQ,g=(0,Fe.of)(void 0).pipe((0,gE.QV)(o.outsideAngular),ub(function(){return a.runOutsideAngular(function(){return Promise.resolve().then(i.bind(i,4828))})}),(0,Ge.U)(function(){return(0,Zx.on)(t,a,n)}),(0,Ge.U)(function(e){return AE(e,a,u,c,l,h,s,f)}),wE({bufferSize:1,refCount:!1}));if(ee(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Fe.of)(null);else{g.pipe(Nb()).subscribe();var m=g.pipe(ub(function(e){return e.getRedirectResult().then(function(e){return e},function(){return null})}),It.iC,wE({bufferSize:1,refCount:!1})),y=g.pipe(ub(function(e){return new Ve.y(function(t){return{unsubscribe:a.runOutsideAngular(function(){return e.onAuthStateChanged(function(e){return t.next(e)},function(e){return t.error(e)},function(){return t.complete()})})}})})),k=g.pipe(ub(function(e){return new Ve.y(function(t){return{unsubscribe:a.runOutsideAngular(function(){return e.onIdTokenChanged(function(e){return t.next(e)},function(e){return t.error(e)},function(){return t.complete()})})}})}));this.authState=m.pipe(_E(y),(0,xE.R)(o.outsideAngular),(0,gE.QV)(o.insideAngular)),this.user=m.pipe(_E(k),(0,xE.R)(o.outsideAngular),(0,gE.QV)(o.insideAngular)),this.idToken=this.user.pipe(ub(function(e){return e?(0,Zk.D)(e.getIdToken()):(0,Fe.of)(null)})),this.idTokenResult=this.user.pipe(ub(function(e){return e?(0,Zk.D)(e.getIdTokenResult()):(0,Fe.of)(null)})),this.credential=(0,vE.T)(m,p,this.authState.pipe(Be(function(e){return!e}))).pipe((0,Ge.U)(function(e){return(null==e?void 0:e.user)?e:null}),(0,xE.R)(o.outsideAngular),(0,gE.QV)(o.insideAngular))}return(0,Zx.pX)(this,g,a,{spy:{apply:function(e,t,n){(e.startsWith("signIn")||e.startsWith("createUser"))&&n.then(function(e){return p.next(e)})}}})});return e.\u0275fac=function(t){return new(t||e)(a.LFG(Zx.Dh),a.LFG(Zx.xv,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(It.HU),a.LFG(TE,8),a.LFG(SE,8),a.LFG(IE,8),a.LFG(EE,8),a.LFG(CE,8),a.LFG(RE,8),a.LFG(kn,8))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e}();function NE(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mx.z;return new Ve.y(function(n){var r;return null!=t?t.schedule(function(){r=e.onSnapshot({includeMetadataChanges:!0},n)}):r=e.onSnapshot({includeMetadataChanges:!0},n),function(){null!=r&&r()}})}(e,t)}function PE(e,t){return NE(e,t).pipe((0,Ge.U)(function(e){return{payload:e,type:"query"}}))}function DE(e,t){return PE(e,t).pipe(pb(void 0),ZI(),(0,Ge.U)(function(e){var t=r(e,2),n=t[0],i=t[1],a=i.payload.docChanges(),o=a.map(function(e){return{type:e.type,payload:e}});return n&&JSON.stringify(n.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach(function(e,t){var r=a.find(function(t){return t.doc.ref.isEqual(e.ref)}),i=null==n?void 0:n.payload.docs.find(function(t){return t.ref.isEqual(e.ref)});r&&JSON.stringify(r.doc.metadata)===JSON.stringify(e.metadata)||!r&&i&&JSON.stringify(i.metadata)===JSON.stringify(e.metadata)||o.push({type:"modified",payload:{oldIndex:t,newIndex:t,type:"modified",doc:e}})}),o}))}function LE(e,t,n){return DE(e,n).pipe(vb(function(e,n){return function(e,t,n){return t.forEach(function(t){n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":if(!e[t.newIndex]||!e[t.newIndex].doc.ref.isEqual(t.doc.ref))return ME(e,t.newIndex,0,t);break;case"modified":if(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){var n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}return ME(e,t.newIndex,1,t)}break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return ME(e,t.oldIndex,1)}return e}(e,t))}),e}(e,n.map(function(e){return e.payload}),t)},[]),function(e){return e.lift(new BI(void 0,void 0))},(0,Ge.U)(function(e){return e.map(function(e){return{type:e.type,payload:e}})}))}function ME(e,t,n){for(var r=e.slice(),i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];return r.splice.apply(r,[t,n].concat(a)),r}function UE(e){return e&&0!==e.length||(e=["added","removed","modified"]),e}var FE=function(){function e(t,n,r){v(this,e),this.ref=t,this.query=n,this.afs=r}return p(e,[{key:"stateChanges",value:function(e){var t=DE(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ge.U)(function(t){return t.filter(function(t){return e.indexOf(t.type)>-1})}))),t.pipe(pb(void 0),ZI(),Be(function(e){var t=r(e,2),n=t[0];return t[1].length>0||!n}),(0,Ge.U)(function(e){var t=r(e,2);t[0];return t[1]}),It.iC)}},{key:"auditTrail",value:function(e){return this.stateChanges(e).pipe(vb(function(e,t){return[].concat(s(e),s(t))},[]))}},{key:"snapshotChanges",value:function(e){var t=UE(e);return LE(this.query,t,this.afs.schedulers.outsideAngular).pipe(It.iC)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return PE(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ge.U)(function(t){return t.payload.docs.map(function(t){return e.idField?Object.assign(Object.assign({},t.data()),n({},e.idField,t.id)):t.data()})}),It.iC)}},{key:"get",value:function(e){return(0,Zk.D)(this.query.get(e)).pipe(It.iC)}},{key:"add",value:function(e){return this.ref.add(e)}},{key:"doc",value:function(e){return new VE(this.ref.doc(e),this.afs)}}]),e}(),VE=function(){function e(t,n){v(this,e),this.ref=t,this.afs=n}return p(e,[{key:"set",value:function(e,t){return this.ref.set(e,t)}},{key:"update",value:function(e){return this.ref.update(e)}},{key:"delete",value:function(){return this.ref.delete()}},{key:"collection",value:function(e,t){var n=HE(this.ref.collection(e),t),r=n.ref,i=n.query;return new FE(r,i,this.afs)}},{key:"snapshotChanges",value:function(){return(e=this.ref,t=this.afs.schedulers.outsideAngular,NE(e,t).pipe(pb(void 0),ZI(),(0,Ge.U)(function(e){var t=r(e,2),n=t[0],i=t[1];return i.exists?(null==n?void 0:n.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))).pipe(It.iC);var e,t}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.snapshotChanges().pipe((0,Ge.U)(function(t){var r=t.payload;return e.idField?Object.assign(Object.assign({},r.data()),n({},e.idField,r.id)):r.data()}))}},{key:"get",value:function(e){return(0,Zk.D)(this.ref.get(e)).pipe(It.iC)}}]),e}(),ZE=function(){function e(t,n){v(this,e),this.query=t,this.afs=n}return p(e,[{key:"stateChanges",value:function(e){return e&&0!==e.length?DE(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ge.U)(function(t){return t.filter(function(t){return e.indexOf(t.type)>-1})}),Be(function(e){return e.length>0}),It.iC):DE(this.query,this.afs.schedulers.outsideAngular).pipe(It.iC)}},{key:"auditTrail",value:function(e){return this.stateChanges(e).pipe(vb(function(e,t){return[].concat(s(e),s(t))},[]))}},{key:"snapshotChanges",value:function(e){var t=UE(e);return LE(this.query,t,this.afs.schedulers.outsideAngular).pipe(It.iC)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return PE(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ge.U)(function(t){return t.payload.docs.map(function(t){return e.idField?Object.assign(n({},e.idField,t.id),t.data()):t.data()})}),It.iC)}},{key:"get",value:function(e){return(0,Zk.D)(this.query.get(e)).pipe(It.iC)}}]),e}(),qE=new a.OlP("angularfire2.enableFirestorePersistence"),jE=new a.OlP("angularfire2.firestore.persistenceSettings"),BE=new a.OlP("angularfire2.firestore.settings"),zE=new a.OlP("angularfire2.firestore.use-emulator");function HE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return{query:t(e),ref:e}}var GE=function(){var e=function(){function e(t,n,i,a,o,u,c,l,h,f,d,p,g,m,y,k,b){var w;v(this,e),this.schedulers=c;var _=(0,Zx.on)(t,u,n),x=h;f&&AE(_,u,d,g,m,y,p,k),w=r((0,Zx.cc)("".concat(_.name,".firestore"),"AngularFirestore",_.name,function(){var e=u.runOutsideAngular(function(){return _.firestore()});if(a&&e.settings(a),x&&e.useEmulator.apply(e,s(x)),i&&!ee(o)){return[e,u.runOutsideAngular(function(){try{return(0,Zk.D)(e.enablePersistence(l||void 0).then(function(){return!0},function(){return!1}))}catch(t){return"undefined"!=typeof console&&console.warn(t),(0,Fe.of)(!1)}})]}return[e,(0,Fe.of)(!1)]},[a,x,i]),2),this.firestore=w[0],this.persistenceEnabled$=w[1]}return p(e,[{key:"collection",value:function(e,t){var n=HE("string"==typeof e?this.firestore.collection(e):e,t),r=n.ref,i=n.query,a=this.schedulers.ngZone.run(function(){return r});return new FE(a,i,this)}},{key:"collectionGroup",value:function(e,t){var n=t||function(e){return e},r=this.firestore.collectionGroup(e);return new ZE(n(r),this)}},{key:"doc",value:function(e){var t;t="string"==typeof e?this.firestore.doc(e):e;var n=this.schedulers.ngZone.run(function(){return t});return new VE(n,this)}},{key:"createId",value:function(){return this.firestore.collection("_").doc().id}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(Zx.Dh),a.LFG(Zx.xv,8),a.LFG(qE,8),a.LFG(BE,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(It.HU),a.LFG(jE,8),a.LFG(zE,8),a.LFG(OE,8),a.LFG(TE,8),a.LFG(SE,8),a.LFG(IE,8),a.LFG(EE,8),a.LFG(CE,8),a.LFG(RE,8),a.LFG(kn,8))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e}(),KE={apiKey:"AIzaSyCXiM3pRTf1d6CCChySrNyXq-v7I7RacbE",authDomain:"junkyard-stories.firebaseapp.com",projectId:"junkyard-stories",storageBucket:"junkyard-stories.appspot.com",messagingSenderId:"800786856702",appId:"1:800786856702:web:47b317703177830d09c3af"},WE=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e,bootstrap:[AI]}),e.\u0275inj=a.cJS({providers:[aT,uT,GE,{provide:R,useClass:P},{provide:dt,useClass:VI,multi:!0}],imports:[[De,Ix.forRoot([]),Dt(function(){return Lt(KE)}),Vr(function(){return jr()}),Ok(function(){return Mk()}),Zx.hO.initializeApp(KE),iT,Tt,RI,yS,NI]]}),e}();(0,a.G48)(),Ne().bootstrapModule(WE).catch(function(e){return console.error(e)})},6304:function(e,t,n){"use strict";function r(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var o=e.apply(t,n);function u(e){r(o,i,a,u,s,"next",e)}function s(e){r(o,i,a,u,s,"throw",e)}u(void 0)})}}n.d(t,{Z:function(){return i}})}},function(e){"use strict";e(e.s=3205)}])}();