(self.webpackChunkjunkyard_stories=self.webpackChunkjunkyard_stories||[]).push([[179],{8255:function(e){function t(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=function(){return[]},t.resolve=t,t.id=8255,e.exports=t},3018:function(e,t,n){"use strict";n.d(t,{deG:function(){return Qt},tb:function(){return bu},AFp:function(){return pu},ip1:function(){return du},CZH:function(){return fu},hGG:function(){return dc},z2F:function(){return nc},sBO:function(){return pa},Sil:function(){return Nu},_Vd:function(){return Fo},EJc:function(){return Tu},SBq:function(){return jo},qLn:function(){return hr},vpe:function(){return Ga},gxx:function(){return Hi},tBr:function(){return yn},XFs:function(){return O},OlP:function(){return Yt},zs3:function(){return as},ZZ4:function(){return aa},aQg:function(){return ca},soG:function(){return _u},YKP:function(){return Ia},v3s:function(){return ic},h0i:function(){return Sa},PXZ:function(){return Yu},R0b:function(){return Pu},FiY:function(){return vn},Lbi:function(){return vu},g9A:function(){return yu},Qsj:function(){return zo},FYo:function(){return $o},JOm:function(){return gr},Tiy:function(){return Go},q3G:function(){return sr},tp0:function(){return bn},EAV:function(){return ac},Rgc:function(){return ba},dDg:function(){return Zu},DyG:function(){return Xt},q4F:function(){return Wo},GfV:function(){return Ko},s_b:function(){return ka},ifc:function(){return U},eFA:function(){return Qu},G48:function(){return Wu},Gpc:function(){return g},X6Q:function(){return Ku},_c5:function(){return lc},VLi:function(){return Bu},c2e:function(){return wu},zSh:function(){return Ki},wAp:function(){return Eo},vHH:function(){return v},EiD:function(){return rr},mCW:function(){return Zn},qzn:function(){return xn},JVY:function(){return On},pB0:function(){return Ln},eBb:function(){return Pn},L6k:function(){return Rn},LAX:function(){return Dn},cg1:function(){return To},Tjo:function(){return cc},kL8:function(){return So},yhl:function(){return Nn},dqk:function(){return j},sIi:function(){return ys},CqO:function(){return Ls},QGY:function(){return Ps},F4k:function(){return Ds},RDi:function(){return Ie},AaK:function(){return d},z3N:function(){return An},qOj:function(){return cs},TTD:function(){return ve},_Bn:function(){return Lo},xp6:function(){return Yr},uIk:function(){return _s},Gre:function(){return yo},ekj:function(){return Xs},Suo:function(){return au},Xpm:function(){return X},lG2:function(){return oe},Yz7:function(){return T},cJS:function(){return S},oAB:function(){return re},Yjl:function(){return ae},Y36:function(){return Is},_UZ:function(){return xs},BQk:function(){return Os},ynx:function(){return Ns},qZA:function(){return As},TgZ:function(){return Cs},EpF:function(){return Rs},n5z:function(){return Gt},Ikx:function(){return vo},LFG:function(){return pn},$8M:function(){return Wt},NdJ:function(){return Ms},CRH:function(){return uu},oxw:function(){return Vs},ALo:function(){return $a},lcZ:function(){return za},Q6J:function(){return Es},s9C:function(){return Zs},MGl:function(){return qs},DdM:function(){return qa},VKq:function(){return ja},iGM:function(){return su},evT:function(){return fr},CHM:function(){return qe},LSH:function(){return or},kYT:function(){return ie},Akn:function(){return eo},YNc:function(){return Ss},_uU:function(){return po},Oqu:function(){return go},hij:function(){return mo},Gf:function(){return ou}});var r=n(9765),i=n(5319),s=n(7574),o=n(6682),a=n(2441),u=n(1307);function c(){return new r.xQ}function l(e){for(let t in e)if(e[t]===l)return t;throw Error("Could not find renamed property on target object.")}function h(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function d(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(d).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function f(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const p=l({__forward_ref__:l});function g(e){return e.__forward_ref__=g,e.toString=function(){return d(this())},e}function m(e){return y(e)?e():e}function y(e){return"function"==typeof e&&e.hasOwnProperty(p)&&e.__forward_ref__===g}class v extends Error{constructor(e,t){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(e,t)),this.code=e}}function b(e){return"string"==typeof e?e:null==e?"":String(e)}function w(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():b(e)}function _(e,t){const n=t?` in ${t}`:"";throw new v("201",`No provider for ${w(e)} found${n}`)}function T(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function S(e){return{providers:e.providers||[],imports:e.imports||[]}}function I(e){return E(e,C)||E(e,x)}function E(e,t){return e.hasOwnProperty(t)?e[t]:null}function k(e){return e&&(e.hasOwnProperty(A)||e.hasOwnProperty(N))?e[A]:null}const C=l({"\u0275prov":l}),A=l({"\u0275inj":l}),x=l({ngInjectableDef:l}),N=l({ngInjectorDef:l});var O=(()=>((O=O||{})[O.Default=0]="Default",O[O.Host=1]="Host",O[O.Self=2]="Self",O[O.SkipSelf=4]="SkipSelf",O[O.Optional=8]="Optional",O))();let R;function P(e){const t=R;return R=e,t}function D(e,t,n){const r=I(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&O.Optional?null:void 0!==t?t:void _(d(e),"Injector")}function L(e){return{toString:e}.toString()}var M=(()=>((M=M||{})[M.OnPush=0]="OnPush",M[M.Default=1]="Default",M))(),U=(()=>((U=U||{})[U.Emulated=0]="Emulated",U[U.None=2]="None",U[U.ShadowDom=3]="ShadowDom",U))();const F="undefined"!=typeof globalThis&&globalThis,V="undefined"!=typeof window&&window,Z="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,j=F||q||V||Z,B={},$=[],z=l({"\u0275cmp":l}),H=l({"\u0275dir":l}),G=l({"\u0275pipe":l}),K=l({"\u0275mod":l}),W=l({"\u0275loc":l}),J=l({"\u0275fac":l}),Y=l({__NG_ELEMENT_ID__:l});let Q=0;function X(e){return L(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===M.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||$,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||U.Emulated,id:"c",styles:e.styles||$,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,s=e.pipes;return n.id+=Q++,n.inputs=se(e.inputs,t),n.outputs=se(e.outputs),i&&i.forEach(e=>e(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(ee):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(te):null,n})}function ee(e){return ue(e)||function(e){return e[H]||null}(e)}function te(e){return function(e){return e[G]||null}(e)}const ne={};function re(e){return L(()=>{const t={type:e.type,bootstrap:e.bootstrap||$,declarations:e.declarations||$,imports:e.imports||$,exports:e.exports||$,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(ne[e.id]=e.type),t})}function ie(e,t){return L(()=>{const n=ce(e,!0);n.declarations=t.declarations||$,n.imports=t.imports||$,n.exports=t.exports||$})}function se(e,t){if(null==e)return B;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}const oe=X;function ae(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function ue(e){return e[z]||null}function ce(e,t){const n=e[K]||null;if(!n&&!0===t)throw new Error(`Type ${d(e)} does not have '\u0275mod' property.`);return n}function le(e){return Array.isArray(e)&&"object"==typeof e[1]}function he(e){return Array.isArray(e)&&!0===e[1]}function de(e){return 0!=(8&e.flags)}function fe(e){return 2==(2&e.flags)}function pe(e){return 1==(1&e.flags)}function ge(e){return null!==e.template}function me(e,t){return e.hasOwnProperty(J)?e[J]:null}class ye{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function ve(){return be}function be(e){return e.type.prototype.ngOnChanges&&(e.setInput=_e),we}function we(){const e=Te(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===B)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function _e(e,t,n,r){const i=Te(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:B,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new ye(u&&u.currentValue,t,o===B),e[r]=t}function Te(e){return e.__ngSimpleChanges__||null}let Se;function Ie(e){Se=e}function Ee(e){return!!e.listen}ve.ngInherit=!0;const ke={createRenderer:(e,t)=>void 0!==Se?Se:"undefined"!=typeof document?document:void 0};function Ce(e){for(;Array.isArray(e);)e=e[0];return e}function Ae(e,t){return Ce(t[e])}function xe(e,t){return Ce(t[e.index])}function Ne(e,t){return e.data[t]}function Oe(e,t){const n=t[e];return le(n)?n:n[0]}function Re(e){return 4==(4&e[2])}function Pe(e){return 128==(128&e[2])}function De(e,t){return null==t?null:e[t]}function Le(e){e[18]=0}function Me(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const Ue={lFrame:ot(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Fe(){return Ue.bindingsEnabled}function Ve(){return Ue.lFrame.lView}function Ze(){return Ue.lFrame.tView}function qe(e){return Ue.lFrame.contextLView=e,e[8]}function je(){let e=Be();for(;null!==e&&64===e.type;)e=e.parent;return e}function Be(){return Ue.lFrame.currentTNode}function $e(e,t){const n=Ue.lFrame;n.currentTNode=e,n.isParent=t}function ze(){return Ue.lFrame.isParent}function He(){Ue.lFrame.isParent=!1}function Ge(){return Ue.isInCheckNoChangesMode}function Ke(e){Ue.isInCheckNoChangesMode=e}function We(){const e=Ue.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Je(){return Ue.lFrame.bindingIndex++}function Ye(e){const t=Ue.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Qe(e,t){const n=Ue.lFrame;n.bindingIndex=n.bindingRootIndex=e,Xe(t)}function Xe(e){Ue.lFrame.currentDirectiveIndex=e}function et(){return Ue.lFrame.currentQueryIndex}function tt(e){Ue.lFrame.currentQueryIndex=e}function nt(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function rt(e,t,n){if(n&O.SkipSelf){let r=t,i=e;for(;r=r.parent,!(null!==r||n&O.Host||(r=nt(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;t=r,e=i}const r=Ue.lFrame=st();return r.currentTNode=t,r.lView=e,!0}function it(e){const t=st(),n=e[1];Ue.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function st(){const e=Ue.lFrame,t=null===e?null:e.child;return null===t?ot(e):t}function ot(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function at(){const e=Ue.lFrame;return Ue.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const ut=at;function ct(){const e=at();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function lt(){return Ue.lFrame.selectedIndex}function ht(e){Ue.lFrame.selectedIndex=e}function dt(){const e=Ue.lFrame;return Ne(e.tView,e.selectedIndex)}function ft(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=t;r&&(e.contentHooks||(e.contentHooks=[])).push(-n,r),i&&((e.contentHooks||(e.contentHooks=[])).push(n,i),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),o&&((e.viewHooks||(e.viewHooks=[])).push(n,o),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,o)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function pt(e,t,n){yt(e,t,3,n)}function gt(e,t,n,r){(3&e[2])===n&&yt(e,t,n,r)}function mt(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function yt(e,t,n,r){const i=null!=r?r:-1,s=t.length-1;let o=0;for(let a=void 0!==r?65535&e[18]:0;a<s;a++)if("number"==typeof t[a+1]){if(o=t[a],null!=r&&o>=r)break}else t[a]<0&&(e[18]+=65536),(o<i||-1==i)&&(vt(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function vt(e,t,n,r){const i=n[r]<0,s=n[r+1],o=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}class bt{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function wt(e,t,n){const r=Ee(e);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],u=n[i++];r?e.setAttribute(t,a,u,o):t.setAttributeNS(o,a,u)}else{const o=s,a=n[++i];Tt(o)?r&&e.setProperty(t,o,a):r?e.setAttribute(t,o,a):t.setAttribute(o,a),i++}}return i}function _t(e){return 3===e||4===e||6===e}function Tt(e){return 64===e.charCodeAt(0)}function St(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||It(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function It(e,t,n,r,i){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const n=e[s++];if("number"==typeof n){if(n===t){o=-1;break}if(n>t){o=s-1;break}}}for(;s<e.length;){const t=e[s];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function Et(e){return-1!==e}function kt(e){return 32767&e}function Ct(e,t){let n=e>>16,r=t;for(;n>0;)r=r[15],n--;return r}let At=!0;function xt(e){const t=At;return At=e,t}let Nt=0;function Ot(e,t){const n=Pt(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Rt(r.data,e),Rt(t,null),Rt(r.blueprint,null));const i=Dt(e,t),s=e.injectorIndex;if(Et(i)){const e=kt(i),n=Ct(i,t),r=n[1].data;for(let i=0;i<8;i++)t[s+i]=n[e+i]|r[e+i]}return t[s+8]=i,s}function Rt(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Pt(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Dt(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){const e=i[1],t=e.type;if(r=2===t?e.declTNode:1===t?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Lt(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Y)&&(r=n[Y]),null==r&&(r=n[Y]=Nt++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function Mt(e,t,n){if(n&O.Optional)return e;_(t,"NodeInjector")}function Ut(e,t,n,r){if(n&O.Optional&&void 0===r&&(r=null),0==(n&(O.Self|O.Host))){const i=e[9],s=P(void 0);try{return i?i.get(t,r,n&O.Optional):D(t,r,n&O.Optional)}finally{P(s)}}return Mt(r,t,n)}function Ft(e,t,n,r=O.Default,i){if(null!==e){const s=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Y)?e[Y]:void 0;return"number"==typeof t?t>=0?255&t:Zt:t}(n);if("function"==typeof s){if(!rt(t,e,r))return r&O.Host?Mt(i,n,r):Ut(t,n,r,i);try{const e=s(r);if(null!=e||r&O.Optional)return e;_(n)}finally{ut()}}else if("number"==typeof s){let i=null,o=Pt(e,t),a=-1,u=r&O.Host?t[16][6]:null;for((-1===o||r&O.SkipSelf)&&(a=-1===o?Dt(e,t):t[o+8],-1!==a&&zt(r,!1)?(i=t[1],o=kt(a),t=Ct(a,t)):o=-1);-1!==o;){const e=t[1];if($t(s,o,e.data)){const e=qt(o,t,n,i,r,u);if(e!==Vt)return e}a=t[o+8],-1!==a&&zt(r,t[1].data[o+8]===u)&&$t(s,o,t)?(i=e,o=kt(a),t=Ct(a,t)):o=-1}}}return Ut(t,n,r,i)}const Vt={};function Zt(){return new Ht(je(),Ve())}function qt(e,t,n,r,i,s){const o=t[1],a=o.data[e+8],u=jt(a,o,n,null==r?fe(a)&&At:r!=o&&0!=(3&a.type),i&O.Host&&s===a);return null!==u?Bt(t,o,u,a):Vt}function jt(e,t,n,r,i){const s=e.providerIndexes,o=t.data,a=1048575&s,u=e.directiveStart,c=s>>20,l=i?a+c:e.directiveEnd;for(let h=r?a:a+c;h<l;h++){const e=o[h];if(h<u&&n===e||h>=u&&e.type===n)return h}if(i){const e=o[u];if(e&&ge(e)&&e.type===n)return u}return null}function Bt(e,t,n,r){let i=e[n];const s=t.data;if(i instanceof bt){const o=i;o.resolving&&function(e,t){throw new v("200",`Circular dependency in DI detected for ${e}`)}(w(s[n]));const a=xt(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?P(o.injectImpl):null;rt(e,r,O.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const r=be(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==u&&P(u),xt(a),o.resolving=!1,ut()}}return i}function $t(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function zt(e,t){return!(e&O.Self||e&O.Host&&t)}class Ht{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return Ft(this._tNode,this._lView,e,void 0,t)}}function Gt(e){return L(()=>{const t=e.prototype.constructor,n=t[J]||Kt(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const e=i[J]||Kt(i);if(e&&e!==n)return e;i=Object.getPrototypeOf(i)}return e=>new e})}function Kt(e){return y(e)?()=>{const t=Kt(m(e));return t&&t()}:me(e)}function Wt(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const e=n.length;let r=0;for(;r<e;){const i=n[r];if(_t(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<e&&"string"==typeof n[r];)r++;else{if(i===t)return n[r+1];r+=2}}}return null}(je(),e)}function Jt(e,t,n){return L(()=>{const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class Yt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=T({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Qt=new Yt("AnalyzeForEntryComponents"),Xt=Function;function en(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),en(r,t)):t!==e&&t.push(r)}return t}function tn(e,t){e.forEach(e=>Array.isArray(e)?tn(e,t):t(e))}function nn(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function rn(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function sn(e,t,n){let r=an(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function on(e,t){const n=an(e,t);if(n>=0)return e[1|n]}function an(e,t){return function(e,t,n){let r=0,i=e.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=e[n<<1];if(t===s)return n<<1;s>t?i=n:r=n+1}return~(i<<1)}(e,t)}const un={},cn=/\n/gm,ln=l({provide:String,useValue:l});let hn;function dn(e){const t=hn;return hn=e,t}function fn(e,t=O.Default){if(void 0===hn)throw new Error("inject() must be called from an injection context");return null===hn?D(e,void 0,t):hn.get(e,t&O.Optional?null:void 0,t)}function pn(e,t=O.Default){return(R||fn)(m(e),t)}function gn(e){const t=[];for(let n=0;n<e.length;n++){const r=m(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e,n=O.Default;for(let t=0;t<r.length;t++){const i=r[t],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?e=i.token:n|=s:e=i}t.push(pn(e,n))}else t.push(pn(r))}return t}function mn(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}const yn=mn(Jt("Inject",e=>({token:e})),-1),vn=mn(Jt("Optional"),8),bn=mn(Jt("SkipSelf"),4);let wn;function _n(e){var t;return(null===(t=function(){if(void 0===wn&&(wn=null,j.trustedTypes))try{wn=j.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(t){}return wn}())||void 0===t?void 0:t.createHTML(e))||e}class Tn{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Sn extends Tn{getTypeName(){return"HTML"}}class In extends Tn{getTypeName(){return"Style"}}class En extends Tn{getTypeName(){return"Script"}}class kn extends Tn{getTypeName(){return"URL"}}class Cn extends Tn{getTypeName(){return"ResourceURL"}}function An(e){return e instanceof Tn?e.changingThisBreaksApplicationSecurity:e}function xn(e,t){const n=Nn(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}function Nn(e){return e instanceof Tn&&e.getTypeName()||null}function On(e){return new Sn(e)}function Rn(e){return new In(e)}function Pn(e){return new En(e)}function Dn(e){return new kn(e)}function Ln(e){return new Cn(e)}class Mn{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(_n(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class Un{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const t=this.inertDocument.createElement("body");e.appendChild(t)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=_n(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=_n(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const n=t.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Fn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Vn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Zn(e){return(e=String(e)).match(Fn)||e.match(Vn)?e:"unsafe:"+e}function qn(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function jn(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const Bn=qn("area,br,col,hr,img,wbr"),$n=qn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zn=qn("rp,rt"),Hn=jn(zn,$n),Gn=jn(Bn,jn($n,qn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),jn(zn,qn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Hn),Kn=qn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Wn=qn("srcset"),Jn=jn(Kn,Wn,qn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),qn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Yn=qn("script,style,template");class Qn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Gn.hasOwnProperty(t))return this.sanitizedSomething=!0,!Yn.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let i=0;i<n.length;i++){const e=n.item(i),t=e.name,s=t.toLowerCase();if(!Jn.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=e.value;Kn[s]&&(o=Zn(o)),Wn[s]&&(r=o,o=(r=String(r)).split(",").map(e=>Zn(e.trim())).join(", ")),this.buf.push(" ",t,'="',tr(o),'"')}var r;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Gn.hasOwnProperty(t)&&!Bn.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(tr(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const Xn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,er=/([^\#-~ |!])/g;function tr(e){return e.replace(/&/g,"&amp;").replace(Xn,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(er,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let nr;function rr(e,t){let n=null;try{nr=nr||function(e){const t=new Un(e);return function(){try{return!!(new window.DOMParser).parseFromString(_n(""),"text/html")}catch(e){return!1}}()?new Mn(t):t}(e);let r=t?String(t):"";n=nr.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=nr.getInertBodyElement(r)}while(r!==s);return _n((new Qn).sanitizeChildren(ir(n)||n))}finally{if(n){const e=ir(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}function ir(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var sr=(()=>((sr=sr||{})[sr.NONE=0]="NONE",sr[sr.HTML=1]="HTML",sr[sr.STYLE=2]="STYLE",sr[sr.SCRIPT=3]="SCRIPT",sr[sr.URL=4]="URL",sr[sr.RESOURCE_URL=5]="RESOURCE_URL",sr))();function or(e){const t=function(){const e=Ve();return e&&e[12]}();return t?t.sanitize(sr.URL,e)||"":xn(e,"URL")?An(e):Zn(b(e))}function ar(e,t){e.__ngContext__=t}function ur(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function cr(e){return e.ngOriginalError}function lr(e,...t){e.error(...t)}class hr{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e&&e.ngErrorLogger||lr}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?function(e){return e.ngDebugContext}(e)||this._findContext(cr(e)):null}_findOriginalError(e){let t=e&&cr(e);for(;t&&cr(t);)t=cr(t);return t||null}}const dr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(j))();function fr(e){return e.ownerDocument}function pr(e){return e instanceof Function?e():e}var gr=(()=>((gr=gr||{})[gr.Important=1]="Important",gr[gr.DashCase=2]="DashCase",gr))();function mr(e,t){return(void 0)(e,t)}function yr(e){const t=e[3];return he(t)?t[3]:t}function vr(e){return wr(e[13])}function br(e){return wr(e[4])}function wr(e){for(;null!==e&&!he(e);)e=e[4];return e}function _r(e,t,n,r,i){if(null!=r){let s,o=!1;he(r)?s=r:le(r)&&(o=!0,r=r[0]);const a=Ce(r);0===e&&null!==n?null==i?Ar(t,n,a):Cr(t,n,a,i||null,!0):1===e&&null!==n?Cr(t,n,a,i||null,!0):2===e?function(e,t,n){const r=Nr(e,t);r&&function(e,t,n,r){Ee(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function(e,t,n,r,i){const s=n[7];s!==Ce(n)&&_r(t,e,r,s,i);for(let o=10;o<n.length;o++){const i=n[o];Mr(i[1],i,e,t,r,s)}}(t,e,s,n,i)}}function Tr(e,t,n){return Ee(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Sr(e,t){const n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,Me(i,-1)),n.splice(r,1)}function Ir(e,t){if(e.length<=10)return;const n=10+t,r=e[n];if(r){const s=r[17];null!==s&&s!==e&&Sr(s,r),t>0&&(e[n-1][4]=r[4]);const o=rn(e,10+t);Mr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Er(e,t){if(!(256&t[2])){const n=t[11];Ee(n)&&n.destroyNode&&Mr(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return kr(e[1],e);for(;t;){let n=null;if(le(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)le(t)&&kr(t[1],t),t=t[3];null===t&&(t=e),le(t)&&kr(t[1],t),n=t&&t[4]}t=n}}(t)}}function kr(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof bt)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2){const r=e[t[n]],i=t[n+1];try{i.call(r)}finally{}}else try{t.call(e)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const e=n[s+1],o="function"==typeof e?e(t):Ce(t[e]),a=r[i=n[s+2]],u=n[s+3];"boolean"==typeof u?o.removeEventListener(n[s],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const e=r[i=n[s+1]];n[s].call(e)}if(null!==r){for(let e=i+1;e<r.length;e++)(0,r[e])();t[7]=null}}(e,t),1===t[1].type&&Ee(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&he(t[3])){n!==t[3]&&Sr(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function Cr(e,t,n,r,i){Ee(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function Ar(e,t,n){Ee(e)?e.appendChild(t,n):t.appendChild(n)}function xr(e,t,n,r,i){null!==r?Cr(e,t,n,r,i):Ar(e,t,n)}function Nr(e,t){return Ee(e)?e.parentNode(t):t.parentNode}function Or(e,t,n,r){const i=function(e,t,n){return function(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const t=e.data[r.directiveStart].encapsulation;if(t===U.None||t===U.Emulated)return null}return xe(r,n)}(e,t.parent,n)}(e,r,t),s=t[11],o=function(e,t,n){return function(e,t,n){return 40&e.type?xe(e,n):null}(e,0,n)}(r.parent||t[6],0,t);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)xr(s,i,n[a],o,!1);else xr(s,i,n,o,!1)}function Rr(e,t){if(null!==t){const n=t.type;if(3&n)return xe(t,e);if(4&n)return Dr(-1,e[t.index]);if(8&n){const n=t.child;if(null!==n)return Rr(e,n);{const n=e[t.index];return he(n)?Dr(-1,n):Ce(n)}}if(32&n)return mr(t,e)()||Ce(e[t.index]);{const n=Pr(e,t);return null!==n?Array.isArray(n)?n[0]:Rr(yr(e[16]),n):Rr(e,t.next)}}return null}function Pr(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Dr(e,t){const n=10+e+1;if(n<t.length){const e=t[n],r=e[1].firstChild;if(null!==r)return Rr(e,r)}return t[7]}function Lr(e,t,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===t&&(a&&ar(Ce(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Lr(e,t,n.child,r,i,s,!1),_r(t,e,i,a,s);else if(32&u){const o=mr(n,r);let u;for(;u=o();)_r(t,e,i,u,s);_r(t,e,i,a,s)}else 16&u?Ur(e,t,r,n,i,s):_r(t,e,i,a,s);n=o?n.projectionNext:n.next}}function Mr(e,t,n,r,i,s){Lr(n,r,e.firstChild,t,i,s,!1)}function Ur(e,t,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)_r(t,e,i,a[u],s);else Lr(e,t,a,o[3],i,s,!0)}function Fr(e,t,n){Ee(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function Vr(e,t,n){Ee(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function Zr(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const n=t.length;if(i+n===r||e.charCodeAt(i+n)<=32)return i}n=i+1}}function qr(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==Zr(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function jr(e){return 4===e.type&&"ng-template"!==e.value}function Br(e,t,n){return t===(4!==e.type||n?e.value:"ng-template")}function $r(e,t,n){let r=4;const i=e.attrs||[],s=function(e){for(let t=0;t<e.length;t++)if(_t(e[t]))return t;return e.length}(i);let o=!1;for(let a=0;a<t.length;a++){const u=t[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Br(e,u,n)||""===u&&1===t.length){if(zr(r))return!1;o=!0}}else{const c=8&r?u:t[++a];if(8&r&&null!==e.attrs){if(!qr(e.attrs,c,n)){if(zr(r))return!1;o=!0}continue}const l=Hr(8&r?"class":u,i,jr(e),n);if(-1===l){if(zr(r))return!1;o=!0;continue}if(""!==c){let e;e=l>s?"":i[l+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==Zr(t,c,0)||2&r&&c!==e){if(zr(r))return!1;o=!0}}}}else{if(!o&&!zr(r)&&!zr(u))return!1;if(o&&zr(u))continue;o=!1,r=u|1&r}}return zr(r)||o}function zr(e){return 0==(1&e)}function Hr(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let n=!1;for(;i<t.length;){const r=t[i];if(r===e)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++i];for(;"string"==typeof e;)e=t[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Gr(e,t,n=!1){for(let r=0;r<t.length;r++)if($r(e,t[r],n))return!0;return!1}function Kr(e,t){return e?":not("+t.trim()+")":t}function Wr(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const t=e[++n];i+="["+o+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||zr(o)||(t+=Kr(s,i),i=""),r=o,s=s||!zr(r);n++}return""!==i&&(t+=Kr(s,i)),t}const Jr={};function Yr(e){Qr(Ze(),Ve(),lt()+e,Ge())}function Qr(e,t,n,r){if(!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&pt(t,r,n)}else{const r=e.preOrderHooks;null!==r&&gt(t,r,0,n)}ht(n)}function Xr(e,t){return e<<17|t<<2}function ei(e){return e>>17&32767}function ti(e){return 2|e}function ni(e){return(131068&e)>>2}function ri(e,t){return-131069&e|t<<2}function ii(e){return 1|e}function si(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=e.data[s];tt(i),n.contentQueries(2,t[s],s)}}}function oi(e,t,n,r,i,s,o,a,u,c){const l=t.blueprint.slice();return l[0]=i,l[2]=140|r,Le(l),l[3]=l[15]=e,l[8]=n,l[10]=o||e&&e[10],l[11]=a||e&&e[11],l[12]=u||e&&e[12]||null,l[9]=c||e&&e[9]||null,l[6]=s,l[16]=2==t.type?e[16]:l,l}function ai(e,t,n,r,i){let s=e.data[t];if(null===s)s=function(e,t,n,r,i){const s=Be(),o=ze(),a=e.data[t]=function(e,t,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(e,t,n,r,i),Ue.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const e=function(){const e=Ue.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===e?-1:e.injectorIndex}return $e(s,!0),s}function ui(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function ci(e,t,n){it(t);try{const r=e.viewQuery;null!==r&&Vi(1,r,n);const i=e.template;null!==i&&di(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&si(e,t),e.staticViewQueries&&Vi(2,e.viewQuery,n);const s=e.components;null!==s&&function(e,t){for(let n=0;n<t.length;n++)Di(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),r}finally{t[2]&=-5,ct()}}function li(e,t,n,r){const i=t[2];if(256==(256&i))return;it(t);const s=Ge();try{Le(t),Ue.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&di(e,t,n,2,r);const o=3==(3&i);if(!s)if(o){const n=e.preOrderCheckHooks;null!==n&&pt(t,n,null)}else{const n=e.preOrderHooks;null!==n&&gt(t,n,0,null),mt(t,0)}if(function(e){for(let t=vr(e);null!==t;t=br(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&Me(r,1),n[2]|=1024}}}(t),function(e){for(let t=vr(e);null!==t;t=br(t))for(let e=10;e<t.length;e++){const n=t[e],r=n[1];Pe(n)&&li(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&si(e,t),!s)if(o){const n=e.contentCheckHooks;null!==n&&pt(t,n)}else{const n=e.contentHooks;null!==n&&gt(t,n,1),mt(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const r=n[e];if(r<0)ht(~r);else{const i=r,s=n[++e],o=n[++e];Qe(s,i),o(2,t[i])}}}finally{ht(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)Ri(e,t[n])}(t,a);const u=e.viewQuery;if(null!==u&&Vi(2,u,r),!s)if(o){const n=e.viewCheckHooks;null!==n&&pt(t,n)}else{const n=e.viewHooks;null!==n&&gt(t,n,2),mt(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Me(t[3],-1))}finally{ct()}}function hi(e,t,n,r){const i=t[10],s=!Ge(),o=Re(t);try{s&&!o&&i.begin&&i.begin(),o&&ci(e,t,r),li(e,t,n,r)}finally{s&&!o&&i.end&&i.end()}}function di(e,t,n,r,i){const s=lt(),o=2&r;try{ht(-1),o&&t.length>20&&Qr(e,t,20,Ge()),n(r,i)}finally{ht(s)}}function fi(e,t,n){if(de(t)){const r=t.directiveEnd;for(let i=t.directiveStart;i<r;i++){const t=e.data[i];t.contentQueries&&t.contentQueries(1,n[i],i)}}}function pi(e,t,n){Fe()&&(function(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||Ot(n,t),ar(r,t);const o=n.initialInputs;for(let a=i;a<s;a++){const r=e.data[a],s=ge(r);s&&Ai(t,n,r);const u=Bt(t,e,a,n);ar(u,t),null!==o&&xi(0,a-i,u,r,0,o),s&&(Oe(n.index,t)[8]=u)}}(e,t,n,xe(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=Ue.lFrame.currentDirectiveIndex;try{ht(s);for(let n=r;n<i;n++){const r=e.data[n],i=t[n];Xe(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Si(r,i)}}finally{ht(-1),Xe(o)}}(e,t,n))}function gi(e,t,n=xe){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(t,e):e[o];e[i++]=a}}}function mi(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=yi(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function yi(e,t,n,r,i,s,o,a,u,c){const l=20+r,h=l+i,d=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Jr);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:e,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function vi(e,t,n,r){const i=qi(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&ji(e).push(r,i.length-1))}function bi(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function wi(e,t,n,r,i,s,o,a){const u=xe(t,n);let c,l=t.inputs;var h;!a&&null!=l&&(c=l[r])?($i(e,n,c,r,i),fe(t)&&function(e,t){const n=Oe(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,t.value||"",r):i,Ee(s)?s.setProperty(u,r,i):Tt(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function _i(e,t,n,r){let i=!1;if(Fe()){const s=function(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];Gr(n,o.selectors,!1)&&(i||(i=[]),Lt(Ot(n,t),e,o.type),ge(o)?(Ii(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==s){i=!0,ki(n,e.data.length,s.length);for(let e=0;e<s.length;e++){const t=s[e];t.providersResolver&&t.providersResolver(t)}let r=!1,a=!1,u=ui(e,t,s.length,null);for(let i=0;i<s.length;i++){const c=s[i];n.mergedAttrs=St(n.mergedAttrs,c.hostAttrs),Ci(e,n,t,u,c),Ei(u,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(e,t){const n=t.directiveEnd,r=e.data,i=t.attrs,s=[];let o=null,a=null;for(let u=t.directiveStart;u<n;u++){const e=r[u],n=e.inputs,c=null===i||jr(t)?null:Ni(n,i);s.push(c),o=bi(n,u,o),a=bi(e.outputs,u,a)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=o,t.outputs=a}(e,n)}o&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const i=n[t[e+1]];if(null==i)throw new v("301",`Export of name '${t[e+1]}' not found!`);r.push(t[e],i)}}}(n,r,o)}return n.mergedAttrs=St(n.mergedAttrs,n.attrs),i}function Ti(e,t,n,r,i,s){const o=s.hostBindings;if(o){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const s=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function Si(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Ii(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Ei(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;ge(t)&&(n[""]=e)}}function ki(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Ci(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=me(i.type)),o=new bt(s,ge(i),null);e.blueprint[r]=o,n[r]=o,Ti(e,t,0,r,ui(e,n,i.hostVars,Jr),i)}function Ai(e,t,n){const r=xe(t,e),i=mi(n),s=e[10],o=Li(e,oi(e,i,null,n.onPush?64:16,r,t,s,s.createRenderer(r,n),null,null));e[t.index]=o}function xi(e,t,n,r,i,s){const o=s[t];if(null!==o){const e=r.setInput;for(let t=0;t<o.length;){const i=o[t++],s=o[t++],a=o[t++];null!==e?r.setInput(n,a,i,s):n[s]=a}}}function Ni(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Oi(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function Ri(e,t){const n=Oe(t,e);if(Pe(n)){const e=n[1];80&n[2]?li(e,n,e.template,n[8]):n[5]>0&&Pi(n)}}function Pi(e){for(let n=vr(e);null!==n;n=br(n))for(let e=10;e<n.length;e++){const t=n[e];if(1024&t[2]){const e=t[1];li(e,t,e.template,t[8])}else t[5]>0&&Pi(t)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=Oe(t[n],e);Pe(r)&&r[5]>0&&Pi(r)}}function Di(e,t){const n=Oe(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),ci(r,n,n[8])}function Li(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Mi(e){for(;e;){e[2]|=64;const t=yr(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function Ui(e,t,n){const r=t[10];r.begin&&r.begin();try{li(e,t,e.template,n)}catch(i){throw Bi(t,i),i}finally{r.end&&r.end()}}function Fi(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=ur(n),i=r[1];hi(i,r,i.template,n)}}(e[8])}function Vi(e,t,n){tt(0),t(e,n)}const Zi=(()=>Promise.resolve(null))();function qi(e){return e[7]||(e[7]=[])}function ji(e){return e.cleanup||(e.cleanup=[])}function Bi(e,t){const n=e[9],r=n?n.get(hr,null):null;r&&r.handleError(t)}function $i(e,t,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=t[o],c=e.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function zi(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const e=t[o];"number"==typeof e?s=e:1==s?i=f(i,e):2==s&&(r=f(r,e+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}const Hi=new Yt("INJECTOR",-1);class Gi{get(e,t=un){if(t===un){const t=new Error(`NullInjectorError: No provider for ${d(e)}!`);throw t.name="NullInjectorError",t}return t}}const Ki=new Yt("Set Injector scope."),Wi={},Ji={};let Yi;function Qi(){return void 0===Yi&&(Yi=new Gi),Yi}function Xi(e,t=null,n=null,r){return new es(e,n,t||Qi(),r)}class es{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];t&&tn(t,n=>this.processProvider(n,e,t)),tn([e],e=>this.processInjectorType(e,[],i)),this.records.set(Hi,rs(void 0,this));const s=this.records.get(Ki);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof e?null:d(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=un,n=O.Default){this.assertNotDestroyed();const r=dn(this),i=P(void 0);try{if(!(n&O.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(s=e)||"object"==typeof s&&s instanceof Yt)&&I(e);t=n&&this.injectableDefInScope(n)?rs(ts(e),Wi):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&O.Self?Qi():this.parent).get(e,t=n&O.Optional&&t===un?null:t)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(d(e)),r)throw o;return function(e,t,n,r){const i=e.ngTempTokenPath;throw t.__source&&i.unshift(t.__source),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=d(t);if(Array.isArray(t))i=t.map(d).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):d(r)))}i=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(cn,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(o,e,"R3InjectorError",this.source)}throw o}finally{P(i),dn(r)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(d(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=m(e)))return!1;let r=k(e);const i=null==r&&e.ngModule||void 0,s=void 0===i?e:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=k(i)),null==r)return!1;if(null!=r.imports&&!o){let e;n.push(s);try{tn(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];tn(r,e=>this.processProvider(e,n,r||$))}}this.injectorDefTypes.add(s);const a=me(s)||(()=>new s);this.records.set(s,rs(a,Wi));const u=r.providers;if(null!=u&&!o){const t=e;tn(u,e=>this.processProvider(e,t,u))}return void 0!==i&&void 0!==e.providers}processProvider(e,t,n){let r=ss(e=m(e))?e:m(e&&e.provide);const i=function(e,t,n){return is(e)?rs(void 0,e.useValue):rs(ns(e),Wi)}(e);if(ss(e)||!0!==e.multi)this.records.get(r);else{let t=this.records.get(r);t||(t=rs(void 0,Wi,!0),t.factory=()=>gn(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,i)}hydrate(e,t){var n;return t.value===Wi&&(t.value=Ji,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=m(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function ts(e){const t=I(e),n=null!==t?t.factory:me(e);if(null!==n)return n;if(e instanceof Yt)throw new Error(`Token ${d(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=function(e,t){const n=[];for(let r=0;r<e;r++)n.push("?");return n}(t);throw new Error(`Can't resolve all parameters for ${d(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[C]||e[x]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function ns(e,t,n){let r;if(ss(e)){const t=m(e);return me(t)||ts(t)}if(is(e))r=()=>m(e.useValue);else if((i=e)&&i.useFactory)r=()=>e.useFactory(...gn(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>pn(m(e.useExisting));else{const t=m(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return me(t)||ts(t);r=()=>new t(...gn(e.deps))}var i;return r}function rs(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function is(e){return null!==e&&"object"==typeof e&&ln in e}function ss(e){return"function"==typeof e}const os=function(e,t,n){return function(e,t=null,n=null,r){const i=Xi(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)};class as{static create(e,t){return Array.isArray(e)?os(e,t,""):os(e.providers,e.parent,e.name||"")}}function us(e,t){ft(ur(e)[1],je())}function cs(e){let t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0;const r=[e];for(;t;){let i;if(ge(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);const t=e;t.inputs=ls(e.inputs),t.declaredInputs=ls(e.declaredInputs),t.outputs=ls(e.outputs);const n=i.hostBindings;n&&fs(e,n);const s=i.viewQuery,o=i.contentQueries;if(s&&hs(e,s),o&&ds(e,o),h(e.inputs,i.inputs),h(e.declaredInputs,i.declaredInputs),h(e.outputs,i.outputs),ge(i)&&i.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(i.data.animation)}}const t=i.features;if(t)for(let r=0;r<t.length;r++){const i=t[r];i&&i.ngInherit&&i(e),i===cs&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=St(i.hostAttrs,n=St(n,i.hostAttrs))}}(r)}function ls(e){return e===B?{}:e===$?[]:e}function hs(e,t){const n=e.viewQuery;e.viewQuery=n?(e,r)=>{t(e,r),n(e,r)}:t}function ds(e,t){const n=e.contentQueries;e.contentQueries=n?(e,r,i)=>{t(e,r,i),n(e,r,i)}:t}function fs(e,t){const n=e.hostBindings;e.hostBindings=n?(e,r)=>{t(e,r),n(e,r)}:t}as.THROW_IF_NOT_FOUND=un,as.NULL=new Gi,as.\u0275prov=T({token:as,providedIn:"any",factory:()=>pn(Hi)}),as.__NG_ELEMENT_ID__=-1;let ps=null;function gs(){if(!ps){const e=j.Symbol;if(e&&e.iterator)ps=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(ps=n)}}}return ps}class ms{constructor(e){this.wrapped=e}static wrap(e){return new ms(e)}static unwrap(e){return ms.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof ms}}function ys(e){return!!vs(e)&&(Array.isArray(e)||!(e instanceof Map)&&gs()in e)}function vs(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function bs(e,t,n){return e[t]=n}function ws(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function _s(e,t,n,r){const i=Ve();return ws(i,Je(),t)&&(Ze(),function(e,t,n,r,i,s){const o=xe(e,t);!function(e,t,n,r,i,s,o){if(null==s)Ee(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{const a=null==o?b(s):o(s,r||"",i);Ee(e)?e.setAttribute(t,i,a,n):n?t.setAttributeNS(n,i,a):t.setAttribute(i,a)}}(t[11],o,s,e.value,n,r,i)}(dt(),i,e,t,n,r)),_s}function Ts(e,t,n,r){return ws(e,Je(),n)?t+b(n)+r:Jr}function Ss(e,t,n,r,i,s,o,a){const u=Ve(),c=Ze(),l=e+20,h=c.firstCreatePass?function(e,t,n,r,i,s,o,a,u){const c=t.consts,l=ai(t,e,4,o||null,De(c,a));_i(t,n,l,De(c,u)),ft(t,l);const h=l.tViews=yi(2,l,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,l),h.queries=t.queries.embeddedTView(l)),l}(l,c,u,t,n,r,i,s,o):c.data[l];$e(h,!1);const d=u[11].createComment("");Or(c,u,d,h),ar(d,u),Li(u,u[l]=Oi(d,u,d,h)),pe(h)&&pi(c,u,h),null!=o&&gi(u,h,a)}function Is(e,t=O.Default){const n=Ve();return null===n?pn(e,t):Ft(je(),n,m(e),t)}function Es(e,t,n){const r=Ve();return ws(r,Je(),t)&&wi(Ze(),dt(),r,e,t,r[11],n,!1),Es}function ks(e,t,n,r,i){const s=i?"class":"style";$i(e,n,t.inputs[s],s,r)}function Cs(e,t,n,r){const i=Ve(),s=Ze(),o=20+e,a=i[11],u=i[o]=Tr(a,t,Ue.lFrame.currentNamespace),c=s.firstCreatePass?function(e,t,n,r,i,s,o){const a=t.consts,u=ai(t,e,2,i,De(a,s));return _i(t,n,u,De(a,o)),null!==u.attrs&&zi(u,u.attrs,!1),null!==u.mergedAttrs&&zi(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(o,s,i,0,t,n,r):s.data[o];$e(c,!0);const l=c.mergedAttrs;null!==l&&wt(a,u,l);const h=c.classes;null!==h&&Vr(a,u,h);const d=c.styles;null!==d&&Fr(a,u,d),64!=(64&c.flags)&&Or(s,i,u,c),0===Ue.lFrame.elementDepthCount&&ar(u,i),Ue.lFrame.elementDepthCount++,pe(c)&&(pi(s,i,c),fi(s,c,i)),null!==r&&gi(i,c)}function As(){let e=je();ze()?He():(e=e.parent,$e(e,!1));const t=e;Ue.lFrame.elementDepthCount--;const n=Ze();n.firstCreatePass&&(ft(n,e),de(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&ks(n,t,Ve(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&ks(n,t,Ve(),t.stylesWithoutHost,!1)}function xs(e,t,n,r){Cs(e,t,n,r),As()}function Ns(e,t,n){const r=Ve(),i=Ze(),s=e+20,o=i.firstCreatePass?function(e,t,n,r,i){const s=t.consts,o=De(s,r),a=ai(t,e,8,"ng-container",o);return null!==o&&zi(a,o,!0),_i(t,n,a,De(s,i)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,i,r,t,n):i.data[s];$e(o,!0);const a=r[s]=r[11].createComment("");Or(i,r,a,o),ar(a,r),pe(o)&&(pi(i,r,o),fi(i,o,r)),null!=n&&gi(r,o)}function Os(){let e=je();const t=Ze();ze()?He():(e=e.parent,$e(e,!1)),t.firstCreatePass&&(ft(t,e),de(e)&&t.queries.elementEnd(e))}function Rs(){return Ve()}function Ps(e){return!!e&&"function"==typeof e.then}function Ds(e){return!!e&&"function"==typeof e.subscribe}const Ls=Ds;function Ms(e,t,n,r){const i=Ve(),s=Ze(),o=je();return function(e,t,n,r,i,s,o,a){const u=pe(r),c=e.firstCreatePass&&ji(e),l=qi(t);let h=!0;if(3&r.type||a){const d=xe(r,t),f=a?a(d):d,p=l.length,g=a?e=>a(Ce(e[r.index])):r.index;if(Ee(n)){let o=null;if(!a&&u&&(o=function(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const e=i[s];if(e===n&&i[s+1]===r){const e=t[7],n=i[s+2];return e.length>n?e[n]:null}"string"==typeof e&&(s+=2)}return null}(e,t,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=Fs(r,t,0,s,!1);const e=n.listen(f,i,s);l.push(s,e),c&&c.push(i,g,p,p+1)}}else s=Fs(r,t,0,s,!0),f.addEventListener(i,s,o),l.push(s),c&&c.push(i,g,p,o)}else s=Fs(r,t,0,s,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const e=f.length;if(e)for(let n=0;n<e;n+=2){const e=t[f[n]][f[n+1]].subscribe(s),o=l.length;l.push(s,e),c&&c.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,e,t,!!n,r),Ms}function Us(e,t,n,r){try{return!1!==n(r)}catch(i){return Bi(e,i),!1}}function Fs(e,t,n,r,i){return function n(s){if(s===Function)return r;const o=2&e.flags?Oe(e.index,t):t;0==(32&t[2])&&Mi(o);let a=Us(t,0,r,s),u=n.__ngNextListenerFn__;for(;u;)a=Us(t,0,u,s)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Vs(e=1){return function(e){return(Ue.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,Ue.lFrame.contextLView))[8]}(e)}function Zs(e,t,n){return qs(e,"",t,"",n),Zs}function qs(e,t,n,r,i){const s=Ve(),o=Ts(s,t,n,r);return o!==Jr&&wi(Ze(),dt(),s,e,o,s[11],i,!1),qs}function js(e,t,n,r,i){const s=e[n+1],o=null===t;let a=r?ei(s):ni(s),u=!1;for(;0!==a&&(!1===u||o);){const n=e[a+1];Bs(e[a],t)&&(u=!0,e[a+1]=r?ii(n):ti(n)),a=r?ei(n):ni(n)}u&&(e[n+1]=r?ti(s):ii(s))}function Bs(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&an(e,t)>=0}const $s={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function zs(e){return e.substring($s.key,$s.keyEnd)}function Hs(e){return e.substring($s.value,$s.valueEnd)}function Gs(e,t){const n=$s.textEnd;return n===t?-1:(t=$s.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,$s.key=t,n),Js(e,t,n))}function Ks(e,t){const n=$s.textEnd;let r=$s.key=Js(e,t,n);return n===r?-1:(r=$s.keyEnd=function(e,t,n){let r;for(;t<n&&(45===(r=e.charCodeAt(t))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)t++;return t}(e,r,n),r=Ys(e,r,n),r=$s.value=Js(e,r,n),r=$s.valueEnd=function(e,t,n){let r=-1,i=-1,s=-1,o=t,a=o;for(;o<n;){const u=e.charCodeAt(o++);if(59===u)return a;34===u||39===u?a=o=Qs(e,u,o,n):t===o-4&&85===s&&82===i&&76===r&&40===u?a=o=Qs(e,41,o,n):u>32&&(a=o),s=i,i=r,r=-33&u}return a}(e,r,n),Ys(e,r,n))}function Ws(e){$s.key=0,$s.keyEnd=0,$s.value=0,$s.valueEnd=0,$s.textEnd=e.length}function Js(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function Ys(e,t,n,r){return(t=Js(e,t,n))<n&&t++,t}function Qs(e,t,n,r){let i=-1,s=n;for(;s<r;){const n=e.charCodeAt(s++);if(n==t&&92!==i)return s;i=92==n&&92===i?0:n}throw new Error}function Xs(e,t){return function(e,t,n,r){const i=Ve(),s=Ze(),o=Ye(2);s.firstUpdatePass&&so(s,e,o,true),t!==Jr&&ws(i,o,t)&&co(s,s.data[lt()],i,i[11],e,i[o+1]=function(e,t){return null==e||"object"==typeof e&&(e=d(An(e))),e}(t),true,o)}(e,t),Xs}function eo(e){ro(uo,to,e,!1)}function to(e,t){for(let n=function(e){return Ws(e),Ks(e,Js(e,0,$s.textEnd))}(t);n>=0;n=Ks(t,n))uo(e,zs(t),Hs(t))}function no(e,t){for(let n=function(e){return Ws(e),Gs(e,Js(e,0,$s.textEnd))}(t);n>=0;n=Gs(t,n))sn(e,zs(t),!0)}function ro(e,t,n,r){const i=Ze(),s=Ye(2);i.firstUpdatePass&&so(i,null,s,r);const o=Ve();if(n!==Jr&&ws(o,s,n)){const a=i.data[lt()];if(fo(a,r)&&!io(i,s)){let e=r?a.classesWithoutHost:a.stylesWithoutHost;null!==e&&(n=f(e,n||"")),ks(i,a,o,n,r)}else!function(e,t,n,r,i,s,o,a){i===Jr&&(i=$);let u=0,c=0,l=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==l||null!==h;){const d=u<i.length?i[u+1]:void 0,f=c<s.length?s[c+1]:void 0;let p,g=null;l===h?(u+=2,c+=2,d!==f&&(g=h,p=f)):null===h||null!==l&&l<h?(u+=2,g=l):(c+=2,g=h,p=f),null!==g&&co(e,t,n,r,g,p,o,a),l=u<i.length?i[u]:null,h=c<s.length?s[c]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function(e,t,n){if(null==n||""===n)return $;const r=[],i=An(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)e(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&e(r,s,i[s]);else"string"==typeof i&&t(r,i);return r}(e,t,n),r,s)}}function io(e,t){return t>=e.expandoStartIndex}function so(e,t,n,r){const i=e.data;if(null===i[n+1]){const s=i[lt()],o=io(e,n);fo(s,r)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){const i=function(e){const t=Ue.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let s=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=ao(n=oo(null,e,t,n,r),t.attrs,r),s=null);else{const o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=oo(i,e,t,n,r),null===s){let n=function(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==ni(r))return e[ei(r)]}(e,t,r);void 0!==n&&Array.isArray(n)&&(n=oo(null,e,t,n[1],r),n=ao(n,t.attrs,r),function(e,t,n,r){e[ei(n?t.classBindings:t.styleBindings)]=r}(e,t,r,n))}else s=function(e,t,n){let r;const i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++)r=ao(r,e[s].hostAttrs,n);return ao(r,t.attrs,n)}(e,t,r)}return void 0!==s&&(r?t.residualClasses=s:t.residualStyles=s),n}(i,s,t,r),function(e,t,n,r,i,s){let o=s?t.classBindings:t.styleBindings,a=ei(o),u=ni(o);e[r]=n;let c,l=!1;if(Array.isArray(n)){const e=n;c=e[1],(null===c||an(e,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const t=ei(e[a+1]);e[r+1]=Xr(t,a),0!==t&&(e[t+1]=ri(e[t+1],r)),e[a+1]=131071&e[a+1]|r<<17}else e[r+1]=Xr(a,0),0!==a&&(e[a+1]=ri(e[a+1],r)),a=r;else e[r+1]=Xr(u,0),0===a?a=r:e[u+1]=ri(e[u+1],r),u=r;l&&(e[r+1]=ti(e[r+1])),js(e,c,r,!0),js(e,c,r,!1),function(e,t,n,r,i){const s=i?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof t&&an(s,t)>=0&&(n[r+1]=ii(n[r+1]))}(t,c,e,r,s),o=Xr(a,u),s?t.classBindings=o:t.styleBindings=o}(i,s,t,n,o,r)}}function oo(e,t,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=t[a],r=ao(r,s.hostAttrs,i),s!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function ao(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),sn(e,o,!!n||t[++s]))}return void 0===e?null:e}function uo(e,t,n){sn(e,t,An(n))}function co(e,t,n,r,i,s,o,a){if(!(3&t.type))return;const u=e.data,c=u[a+1];ho(1==(1&c)?lo(u,t,n,i,ni(c),o):void 0)||(ho(s)||2==(2&c)&&(s=lo(u,null,n,i,a,o)),function(e,t,n,r,i){const s=Ee(e);if(t)i?s?e.addClass(n,r):n.classList.add(r):s?e.removeClass(n,r):n.classList.remove(r);else{let t=-1===r.indexOf("-")?void 0:gr.DashCase;if(null==i)s?e.removeStyle(n,r,t):n.style.removeProperty(r);else{const o="string"==typeof i&&i.endsWith("!important");o&&(i=i.slice(0,-10),t|=gr.Important),s?e.setStyle(n,r,i,t):n.style.setProperty(r,i,o?"important":"")}}}(r,o,Ae(lt(),n),i,s))}function lo(e,t,n,r,i,s){const o=null===t;let a;for(;i>0;){const t=e[i],s=Array.isArray(t),u=s?t[1]:t,c=null===u;let l=n[i+1];l===Jr&&(l=c?$:void 0);let h=c?on(l,r):u===r?l:void 0;if(s&&!ho(h)&&(h=on(t,r)),ho(h)&&(a=h,o))return a;const d=e[i+1];i=o?ei(d):ni(d)}if(null!==t){let e=s?t.residualClasses:t.residualStyles;null!=e&&(a=on(e,r))}return a}function ho(e){return void 0!==e}function fo(e,t){return 0!=(e.flags&(t?16:32))}function po(e,t=""){const n=Ve(),r=Ze(),i=e+20,s=r.firstCreatePass?ai(r,i,1,t,null):r.data[i],o=n[i]=function(e,t){return Ee(e)?e.createText(t):e.createTextNode(t)}(n[11],t);Or(r,n,o,s),$e(s,!1)}function go(e){return mo("",e,""),go}function mo(e,t,n){const r=Ve(),i=Ts(r,e,t,n);return i!==Jr&&function(e,t,n){const r=Ae(t,e);!function(e,t,n){Ee(e)?e.setValue(t,n):t.textContent=n}(e[11],r,n)}(r,lt(),i),mo}function yo(e,t,n){ro(sn,no,Ts(Ve(),e,t,n),!0)}function vo(e,t,n){const r=Ve();return ws(r,Je(),t)&&wi(Ze(),dt(),r,e,t,r[11],n,!0),vo}const bo=void 0;var wo=["en",[["a","p"],["AM","PM"],bo],[["AM","PM"],bo,bo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bo,"{1} 'at' {0}",bo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let _o={};function To(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=Io(t);if(n)return n;const r=t.split("-")[0];if(n=Io(r),n)return n;if("en"===r)return wo;throw new Error(`Missing locale data for the locale "${e}".`)}function So(e){return To(e)[Eo.PluralCase]}function Io(e){return e in _o||(_o[e]=j.ng&&j.ng.common&&j.ng.common.locales&&j.ng.common.locales[e]),_o[e]}var Eo=(()=>((Eo=Eo||{})[Eo.LocaleId=0]="LocaleId",Eo[Eo.DayPeriodsFormat=1]="DayPeriodsFormat",Eo[Eo.DayPeriodsStandalone=2]="DayPeriodsStandalone",Eo[Eo.DaysFormat=3]="DaysFormat",Eo[Eo.DaysStandalone=4]="DaysStandalone",Eo[Eo.MonthsFormat=5]="MonthsFormat",Eo[Eo.MonthsStandalone=6]="MonthsStandalone",Eo[Eo.Eras=7]="Eras",Eo[Eo.FirstDayOfWeek=8]="FirstDayOfWeek",Eo[Eo.WeekendRange=9]="WeekendRange",Eo[Eo.DateFormat=10]="DateFormat",Eo[Eo.TimeFormat=11]="TimeFormat",Eo[Eo.DateTimeFormat=12]="DateTimeFormat",Eo[Eo.NumberSymbols=13]="NumberSymbols",Eo[Eo.NumberFormats=14]="NumberFormats",Eo[Eo.CurrencyCode=15]="CurrencyCode",Eo[Eo.CurrencySymbol=16]="CurrencySymbol",Eo[Eo.CurrencyName=17]="CurrencyName",Eo[Eo.Currencies=18]="Currencies",Eo[Eo.Directionality=19]="Directionality",Eo[Eo.PluralCase=20]="PluralCase",Eo[Eo.ExtraData=21]="ExtraData",Eo))();let ko="en-US";function Co(e){var t,n;n="Expected localeId to be defined",null==(t=e)&&function(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e} [Expected=> null != ${t} <=Actual]`)}(n,t),"string"==typeof e&&(ko=e.toLowerCase().replace(/_/g,"-"))}function Ao(e,t,n,r,i){if(e=m(e),Array.isArray(e))for(let s=0;s<e.length;s++)Ao(e[s],t,n,r,i);else{const s=Ze(),o=Ve();let a=ss(e)?e:m(e.provide),u=ns(e);const c=je(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(ss(e)||!e.multi){const r=new bt(u,i,Is),f=Oo(a,t,i?l:l+d,h);-1===f?(Lt(Ot(c,o),s,a),xo(s,e,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),o.push(r)):(n[f]=r,o[f]=r)}else{const f=Oo(a,t,l+d,h),p=Oo(a,t,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){Lt(Ot(c,o),s,a);const l=function(e,t,n,r,i){const s=new bt(e,n,Is);return s.multi=[],s.index=t,s.componentProviders=0,No(s,i,r&&!n),s}(i?Po:Ro,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),xo(s,e,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),o.push(l)}else xo(s,e,f>-1?f:p,No(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function xo(e,t,n,r){const i=ss(t);if(i||t.useClass){const s=(t.useClass||t).prototype.ngOnDestroy;if(s){const o=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const e=o.indexOf(n);-1===e?o.push(n,[r,s]):o[e+1].push(r,s)}else o.push(n,s)}}}function No(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Oo(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function Ro(e,t,n,r){return Do(this.multi,[])}function Po(e,t,n,r){const i=this.multi;let s;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=Bt(n,n[1],this.providerFactory.index,r);s=t.slice(0,e),Do(i,s);for(let n=e;n<t.length;n++)s.push(t[n])}else s=[],Do(i,s);return s}function Do(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function Lo(e,t=[]){return n=>{n.providersResolver=(n,r)=>function(e,t,n){const r=Ze();if(r.firstCreatePass){const i=ge(e);Ao(n,r.data,r.blueprint,i,!0),Ao(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}class Mo{}class Uo{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${d(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}class Fo{}function Vo(...e){}function Zo(e,t){return new jo(xe(e,t))}Fo.NULL=new Uo;const qo=function(){return Zo(je(),Ve())};let jo=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=qo,e})();function Bo(e){return e instanceof jo?e.nativeElement:e}class $o{}let zo=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Ho(),e})();const Ho=function(){const e=Ve(),t=Oe(je().index,e);return function(e){return e[11]}(le(t)?t:e)};let Go=(()=>{class e{}return e.\u0275prov=T({token:e,providedIn:"root",factory:()=>null}),e})();class Ko{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Wo=new Ko("12.1.5");class Jo{constructor(){}supports(e){return ys(e)}create(e){return new Qo(e)}}const Yo=(e,t)=>t;class Qo{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Yo}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const s=!n||t&&t.currentIndex<na(n,r,i)?t:n,o=na(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{i||(i=[]);const e=o-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;t<=s&&s<e&&(i[n]=r+1)}i[s.previousIndex]=t-e}}o!==a&&e(s,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!ys(e))throw new Error(`Error trying to diff '${d(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,t)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),s=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[gs()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,e,r,t)),Object.is(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),s=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new Xo(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new ta),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ta),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Xo{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ea{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class ta{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new ea,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function na(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class ra{constructor(){}supports(e){return e instanceof Map||vs(e)}create(){return new ia}}class ia{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||vs(e)))throw new Error(`Error trying to diff '${d(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new sa(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class sa{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function oa(){return new aa([new Jo])}let aa=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||oa()),deps:[[e,new bn,new vn]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=T({token:e,providedIn:"root",factory:oa}),e})();function ua(){return new ca([new ra])}let ca=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||ua()),deps:[[e,new bn,new vn]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=T({token:e,providedIn:"root",factory:ua}),e})();function la(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&r.push(Ce(s)),he(s))for(let e=10;e<s.length;e++){const t=s[e],n=t[1].firstChild;null!==n&&la(t[1],t,n,r)}const o=n.type;if(8&o)la(e,t,n.child,r);else if(32&o){const e=mr(n,t);let i;for(;i=e();)r.push(i)}else if(16&o){const e=Pr(t,n);if(Array.isArray(e))r.push(...e);else{const n=yr(t[16]);la(n[1],n,e,r,!0)}}n=i?n.projectionNext:n.next}return r}class ha{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return la(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(he(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(Ir(e,n),rn(t,n))}this._attachedToViewContainer=!1}Er(this._lView[1],this._lView)}onDestroy(e){vi(this._lView[1],this._lView,null,e)}markForCheck(){Mi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ui(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){Ke(!0);try{Ui(e,t,n)}finally{Ke(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,Mr(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class da extends ha{constructor(e){super(e),this._view=e}detectChanges(){Fi(this._view)}checkNoChanges(){!function(e){Ke(!0);try{Fi(e)}finally{Ke(!1)}}(this._view)}get context(){return null}}const fa=function(e){return function(e,t,n){if(fe(e)&&!n){const n=Oe(e.index,t);return new ha(n,n)}return 47&e.type?new ha(t[16],t):null}(je(),Ve(),16==(16&e))};let pa=(()=>{class e{}return e.__NG_ELEMENT_ID__=fa,e})();const ga=[new ra],ma=new aa([new Jo]),ya=new ca(ga),va=function(){return Ta(je(),Ve())};let ba=(()=>{class e{}return e.__NG_ELEMENT_ID__=va,e})();const wa=ba,_a=class extends wa{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=oi(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),ci(t,n,e),new ha(n)}};function Ta(e,t){return 4&e.type?new _a(t,e,Zo(e,t)):null}class Sa{}class Ia{}const Ea=function(){return Oa(je(),Ve())};let ka=(()=>{class e{}return e.__NG_ELEMENT_ID__=Ea,e})();const Ca=ka,Aa=class extends Ca{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return Zo(this._hostTNode,this._hostLView)}get injector(){return new Ht(this._hostTNode,this._hostLView)}get parentInjector(){const e=Dt(this._hostTNode,this._hostLView);if(Et(e)){const t=Ct(e,this._hostLView),n=kt(e);return new Ht(t[1].data[n+8],t)}return new Ht(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=xa(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,i){const s=n||this.parentInjector;if(!i&&null==e.ngModule&&s){const e=s.get(Sa,null);e&&(i=e)}const o=e.create(s,r,void 0,i);return this.insert(o.hostView,t),o}insert(e,t){const n=e._lView,r=n[1];if(he(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],r=new Aa(t,t[6],t[3]);r.detach(r.indexOf(e))}}const i=this._adjustIndex(t),s=this._lContainer;!function(e,t,n,r){const i=10+r,s=n.length;r>0&&(n[i-1][4]=t),r<s-10?(t[4]=n[i],nn(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;const o=t[17];null!==o&&n!==o&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,n,s,i);const o=Dr(i,s),a=n[11],u=Nr(a,s[7]);return null!==u&&function(e,t,n,r,i,s){r[0]=i,r[6]=t,Mr(e,r,n,1,i,s)}(r,s[6],a,n,u,o),e.attachToViewContainerRef(),nn(Na(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=xa(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=Ir(this._lContainer,t);n&&(rn(Na(this._lContainer),t),Er(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=Ir(this._lContainer,t);return n&&null!=rn(Na(this._lContainer),t)?new ha(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function xa(e){return e[8]}function Na(e){return e[8]||(e[8]=[])}function Oa(e,t){let n;const r=t[e.index];if(he(r))n=r;else{let i;if(8&e.type)i=Ce(r);else{const n=t[11];i=n.createComment("");const r=xe(e,t);Cr(n,Nr(n,r),i,function(e,t){return Ee(e)?e.nextSibling(t):t.nextSibling}(n,r),!1)}t[e.index]=n=Oi(r,t,i,e),Li(t,n)}return new Aa(n,e,t)}const Ra={};class Pa extends Fo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=ue(e);return new Ma(t,this.ngModule)}}function Da(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const La=new Yt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>dr});class Ma extends Mo{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(Wr).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Da(this.componentDef.inputs)}get outputs(){return Da(this.componentDef.outputs)}create(e,t,n,r){const i=(r=r||this.ngModule)?function(e,t){return{get:(n,r,i)=>{const s=e.get(n,Ra,i);return s!==Ra||r===Ra?s:t.get(n,r,i)}}}(e,r.injector):e,s=i.get($o,ke),o=i.get(Go,null),a=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(e,t,n){if(Ee(e))return e.selectRootElement(t,n===U.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Tr(s.createRenderer(null,this.componentDef),u,function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:dr,clean:Zi,playerHandler:null,flags:0},d=yi(0,null,null,1,0,null,null,null,null,null),f=oi(null,d,h,l,null,null,s,a,o,i);let p,g;it(f);try{const e=function(e,t,n,r,i,s){const o=n[1];n[20]=e;const a=ai(o,20,2,"#host",null),u=a.mergedAttrs=t.hostAttrs;null!==u&&(zi(a,u,!0),null!==e&&(wt(i,e,u),null!==a.classes&&Vr(i,e,a.classes),null!==a.styles&&Fr(i,e,a.styles)));const c=r.createRenderer(e,t),l=oi(n,mi(t),null,t.onPush?64:16,n[20],a,r,c,null,null);return o.firstCreatePass&&(Lt(Ot(a,n),o,t.type),Ii(o,a),ki(a,n.length,1)),Li(n,l),n[20]=l}(c,this.componentDef,f,s,a);if(c)if(n)wt(a,c,["ng-version",Wo.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!zr(i))break;i=s}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&wt(a,c,e),t&&t.length>0&&Vr(a,c,t.join(" "))}if(g=Ne(d,20),void 0!==t){const e=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}p=function(e,t,n,r,i){const s=n[1],o=function(e,t,n){const r=je();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ci(e,r,t,ui(e,t,1,null),n));const i=Bt(t,e,r.directiveStart,r);ar(i,t);const s=xe(r,t);return s&&ar(s,t),i}(s,n,t);if(r.components.push(o),e[8]=o,i&&i.forEach(e=>e(o,t)),t.contentQueries){const e=je();t.contentQueries(1,o,e.directiveStart)}const a=je();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(ht(a.index),Ti(n[1],a,0,a.directiveStart,a.directiveEnd,t),Si(t,o)),o}(e,this.componentDef,f,h,[us]),ci(d,f,null)}finally{ct()}return new Ua(this.componentType,p,Zo(g,f),f,g)}}class Ua extends class{}{constructor(e,t,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=t,this.hostView=this.changeDetectorRef=new da(r),this.componentType=e}get injector(){return new Ht(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const Fa=new Map;class Va extends Sa{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Pa(this);const n=ce(e),r=e[W]||null;r&&Co(r),this._bootstrapComponents=pr(n.bootstrap),this._r3Injector=Xi(e,t,[{provide:Sa,useValue:this},{provide:Fo,useValue:this.componentFactoryResolver}],d(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=as.THROW_IF_NOT_FOUND,n=O.Default){return e===as||e===Sa||e===Hi?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Za extends Ia{constructor(e){super(),this.moduleType=e,null!==ce(e)&&function(e){const t=new Set;!function e(n){const r=ce(n,!0),i=r.id;null!==i&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${d(t)} vs ${d(t.name)}`)}(i,Fa.get(i),n),Fa.set(i,n));const s=pr(r.imports);for(const o of s)t.has(o)||(t.add(o),e(o))}(e)}(e)}create(e){return new Va(this.moduleType,e)}}function qa(e,t,n){const r=We()+e,i=Ve();return i[r]===Jr?bs(i,r,n?t.call(n):t()):function(e,t){return e[t]}(i,r)}function ja(e,t,n,r){return Ba(Ve(),We(),e,t,n,r)}function Ba(e,t,n,r,i,s){const o=t+n;return ws(e,o,i)?bs(e,o+1,s?r.call(s,i):r(i)):function(e,t){const n=e[t];return n===Jr?void 0:n}(e,o+1)}function $a(e,t){const n=Ze();let r;const i=e+20;n.firstCreatePass?(r=function(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}throw new v("302",`The pipe '${e}' could not be found!`)}(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=me(r.type)),o=P(Is);try{const e=xt(!1),t=s();return xt(e),function(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(n,Ve(),i,t),t}finally{P(o)}}function za(e,t,n){const r=e+20,i=Ve(),s=function(e,t){return e[t]}(i,r);return function(e,t){return ms.isWrapped(t)&&(t=ms.unwrap(t),e[Ue.lFrame.bindingIndex]=Jr),t}(i,function(e,t){return e[1].data[t].pure}(i,r)?Ba(i,We(),t,s.transform,n,s):s.transform(n))}function Ha(e){return t=>{setTimeout(e,void 0,t)}}const Ga=class extends r.xQ{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){var r,s,o;let a=e,u=t||(()=>null),c=n;if(e&&"object"==typeof e){const t=e;a=null===(r=t.next)||void 0===r?void 0:r.bind(t),u=null===(s=t.error)||void 0===s?void 0:s.bind(t),c=null===(o=t.complete)||void 0===o?void 0:o.bind(t)}this.__isAsync&&(u=Ha(u),a&&(a=Ha(a)),c&&(c=Ha(c)));const l=super.subscribe({next:a,error:u,complete:c});return e instanceof i.w&&e.add(l),l}};function Ka(){return this._results[gs()]()}class Wa{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=gs(),n=Wa.prototype;n[t]||(n[t]=Ka)}get changes(){return this._changes||(this._changes=new Ga)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const n=en(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(this._results,n,t))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Ja{constructor(e){this.queryList=e,this.matches=null}clone(){return new Ja(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ya{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let e=0;e<n;e++){const n=t.getByIndex(e);r.push(this.queries[n.indexInDeclarationView].clone())}return new Ya(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==hu(e,t).matches&&this.queries[t].setDirty()}}class Qa{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class Xa{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,i=this.getByIndex(n).embeddedTView(e,r);i&&(i.indexInDeclarationView=n,null!==t?t.push(i):t=[i])}return null!==t?new Xa(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class eu{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new eu(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(e,t,tu(t,i)),this.matchTNodeWithReadOption(e,t,jt(t,e,i,!1,!1))}else n===ba?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,jt(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===jo||r===ka||r===ba&&4&t.type)this.addMatch(t.index,-2);else{const n=jt(t,e,r,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function tu(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function nu(e,t,n,r){return-1===n?function(e,t){return 11&e.type?Zo(e,t):4&e.type?Ta(e,t):null}(t,e):-2===n?function(e,t,n){return n===jo?Zo(t,e):n===ba?Ta(t,e):n===ka?Oa(t,e):void 0}(e,t,r):Bt(e,e[1],n,t)}function ru(e,t,n,r){const i=t[19].queries[r];if(null===i.matches){const r=e.data,s=n.matches,o=[];for(let e=0;e<s.length;e+=2){const i=s[e];o.push(i<0?null:nu(t,r[i],s[e+1],n.metadata.read))}i.matches=o}return i.matches}function iu(e,t,n,r){const i=e.queries.getByIndex(n),s=i.matches;if(null!==s){const o=ru(e,t,i,n);for(let e=0;e<s.length;e+=2){const n=s[e];if(n>0)r.push(o[e/2]);else{const i=s[e+1],o=t[-n];for(let e=10;e<o.length;e++){const t=o[e];t[17]===t[3]&&iu(t[1],t,i,r)}if(null!==o[9]){const e=o[9];for(let t=0;t<e.length;t++){const n=e[t];iu(n[1],n,i,r)}}}}}return r}function su(e){const t=Ve(),n=Ze(),r=et();tt(r+1);const i=hu(n,r);if(e.dirty&&Re(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const s=i.crossesNgTemplate?iu(n,t,r,[]):ru(n,t,i,r);e.reset(s,Bo),e.notifyOnChanges()}return!0}return!1}function ou(e,t,n){const r=Ze();r.firstCreatePass&&(lu(r,new Qa(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),cu(r,Ve(),t)}function au(e,t,n,r){const i=Ze();if(i.firstCreatePass){const s=je();lu(i,new Qa(t,n,r),s.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}cu(i,Ve(),n)}function uu(){return e=Ve(),t=et(),e[19].queries[t].queryList;var e,t}function cu(e,t,n){const r=new Wa(4==(4&n));vi(e,t,r,r.destroy),null===t[19]&&(t[19]=new Ya),t[19].queries.push(new Ja(r))}function lu(e,t,n){null===e.queries&&(e.queries=new Xa),e.queries.track(new eu(t,n))}function hu(e,t){return e.queries.getByIndex(t)}const du=new Yt("Application Initializer");let fu=(()=>{class e{constructor(e){this.appInits=e,this.resolve=Vo,this.reject=Vo,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();if(Ps(t))e.push(t);else if(Ls(t)){const n=new Promise((e,n)=>{t.subscribe({complete:e,error:n})});e.push(n)}}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(pn(du,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();const pu=new Yt("AppId"),gu={provide:pu,useFactory:function(){return`${mu()}${mu()}${mu()}`},deps:[]};function mu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const yu=new Yt("Platform Initializer"),vu=new Yt("Platform ID"),bu=new Yt("appBootstrapListener");let wu=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();const _u=new Yt("LocaleId"),Tu=new Yt("DefaultCurrencyCode");class Su{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const Iu=function(e){return new Za(e)},Eu=Iu,ku=function(e){return Promise.resolve(Iu(e))},Cu=function(e){const t=Iu(e),n=pr(ce(e).declarations).reduce((e,t)=>{const n=ue(t);return n&&e.push(new Ma(n)),e},[]);return new Su(t,n)},Au=Cu,xu=function(e){return Promise.resolve(Cu(e))};let Nu=(()=>{class e{constructor(){this.compileModuleSync=Eu,this.compileModuleAsync=ku,this.compileModuleAndAllComponentsSync=Au,this.compileModuleAndAllComponentsAsync=xu}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();const Ou=(()=>Promise.resolve(0))();function Ru(e){"undefined"==typeof Zone?Ou.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Pu{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ga(!1),this.onMicrotaskEmpty=new Ga(!1),this.onStable=new Ga(!1),this.onError=new Ga(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=!n&&t,this.shouldCoalesceRunChangeDetection=n,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let e=j.requestAnimationFrame,t=j.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(j,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Mu(e),e.isCheckStableRunning=!0,Lu(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Mu(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return Uu(e),n.invokeTask(i,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),Fu(e)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return Uu(e),n.invoke(i,s,o,a,u)}finally{e.shouldCoalesceRunChangeDetection&&t(),Fu(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,Mu(e),Lu(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Pu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Pu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,e,Du,Vo,Vo);try{return i.runTask(s,t,n)}finally{i.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const Du={};function Lu(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Mu(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Uu(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Fu(e){e._nesting--,Lu(e)}class Vu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ga,this.onMicrotaskEmpty=new Ga,this.onStable=new Ga,this.onError=new Ga}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let Zu=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Pu.assertNotInAngularZone(),Ru(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ru(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(pn(Pu))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})(),qu=(()=>{class e{constructor(){this._applications=new Map,zu.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return zu.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();class ju{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}function Bu(e){zu=e}let $u,zu=new ju,Hu=!0,Gu=!1;function Ku(){return Gu=!0,Hu}function Wu(){if(Gu)throw new Error("Cannot enable prod mode after platform setup.");Hu=!1}const Ju=new Yt("AllowMultipleToken");class Yu{constructor(e,t){this.name=e,this.token=t}}function Qu(e,t,n=[]){const r=`Platform: ${t}`,i=new Yt(r);return(t=[])=>{let s=Xu();if(!s||s.injector.get(Ju,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0},{provide:Ki,useValue:"platform"});!function(e){if($u&&!$u.destroyed&&!$u.injector.get(Ju,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");$u=e.get(ec);const t=e.get(yu,null);t&&t.forEach(e=>e())}(as.create({providers:e,name:r}))}return function(e){const t=Xu();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function Xu(){return $u&&!$u.destroyed?$u:null}let ec=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new Vu:("zone.js"===e?void 0:e)||new Pu({enableLongStackTrace:Ku(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),r=[{provide:Pu,useValue:n}];return n.run(()=>{const t=as.create({providers:r,parent:this.injector,name:e.moduleType.name}),i=e.create(t),s=i.injector.get(hr,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const e=n.onError.subscribe({next:e=>{s.handleError(e)}});i.onDestroy(()=>{rc(this._modules,i),e.unsubscribe()})}),function(e,t,n){try{const r=n();return Ps(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,n,()=>{const e=i.injector.get(fu);return e.runInitializers(),e.donePromise.then(()=>(Co(i.injector.get(_u,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,t=[]){const n=tc({},t);return function(e,t,n){const r=new Za(n);return Promise.resolve(r)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(nc);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${d(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(pn(as))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();function tc(e,t){return Array.isArray(t)?t.reduce(tc,e):Object.assign(Object.assign({},e),t)}let nc=(()=>{class e{constructor(e,t,n,r,i){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new s.y(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),h=new s.y(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{Pu.assertNotInAngularZone(),Ru(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Pu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(l,h.pipe(e=>{return(0,u.x)()((t=c,function(e){let n;n="function"==typeof t?t:function(){return t};const r=Object.create(e,a.N);return r.source=e,r.subjectFactory=n,r})(e));var t}))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof Mo?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Sa),i=n.create(as.NULL,[],t||n.selector,r),s=i.location.nativeElement,o=i.injector.get(Zu,null),a=o&&i.injector.get(qu);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),rc(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;rc(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(bu,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(pn(Pu),pn(as),pn(hr),pn(Fo),pn(fu))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();function rc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class ic{}class sc{}const oc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let ac=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||oc}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split("#");return void 0===r&&(r="default"),n(8255)(t).then(e=>e[r]).then(e=>uc(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+i]).then(e=>uc(e,t,r))}}return e.\u0275fac=function(t){return new(t||e)(pn(Nu),pn(sc,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();function uc(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const cc=function(e){return null},lc=Qu(null,"core",[{provide:vu,useValue:"unknown"},{provide:ec,deps:[as]},{provide:qu,deps:[]},{provide:wu,deps:[]}]),hc=[{provide:nc,useClass:nc,deps:[Pu,as,hr,Fo,fu]},{provide:La,deps:[Pu],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:fu,useClass:fu,deps:[[new vn,du]]},{provide:Nu,useClass:Nu,deps:[]},gu,{provide:aa,useFactory:function(){return ma},deps:[]},{provide:ca,useFactory:function(){return ya},deps:[]},{provide:_u,useFactory:function(e){return Co(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new yn(_u),new vn,new bn]]},{provide:Tu,useValue:"USD"}];let dc=(()=>{class e{constructor(e){}}return e.\u0275fac=function(t){return new(t||e)(pn(nc))},e.\u0275mod=re({type:e}),e.\u0275inj=S({providers:hc}),e})()},8939:function(e,t,n){"use strict";n.d(t,{hO:function(){return g},xv:function(){return h},Dh:function(){return l},GT:function(){return u},cc:function(){return m},on:function(){return d},pX:function(){return a}});var r=n(3018),i=n(7841),s=n(4459);e=n.hmd(e);const o=["ngOnDestroy"],a=(e,t,n,r={})=>new Proxy(e,{get:(i,s)=>n.runOutsideAngular(()=>{var i;if(e[s])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(s,e[s]),e[s];if(o.indexOf(s)>-1)return()=>{};const a=t.toPromise().then(e=>{const t=e&&e[s];return"function"==typeof t?t.bind(e):t&&t.then?t.then(e=>n.run(()=>e)):n.run(()=>t)});return new Proxy(()=>{},{get:(e,t)=>a[t],apply:(e,t,n)=>a.then(e=>{var t;const i=e&&e(...n);return(null===(t=null==r?void 0:r.spy)||void 0===t?void 0:t.apply)&&r.spy.apply(s,n,i),i})})})}),u=(e,t)=>{t.forEach(t=>{Object.getOwnPropertyNames(t.prototype||t).forEach(n=>{Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype||t,n))})})};class c{constructor(e){return e}}const l=new r.OlP("angularfire2.app.options"),h=new r.OlP("angularfire2.app.name");function d(t,n,r){const s="object"==typeof r&&r||{};s.name=s.name||"string"==typeof r&&r||"[DEFAULT]";const o=i.Z.apps.filter(e=>e&&e.name===s.name)[0]||n.runOutsideAngular(()=>i.Z.initializeApp(t,s));try{JSON.stringify(t)!==JSON.stringify(o.options)&&f("error",`${o.name} Firebase App already initialized with different options${e.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(a){}return new c(o)}const f=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)},p={provide:c,useFactory:d,deps:[l,r.R0b,[new r.FiY,h]]};let g=(()=>{class e{constructor(e){i.Z.registerVersion("angularfire",s.q4.full,"core"),i.Z.registerVersion("angularfire",s.q4.full,"app-compat"),i.Z.registerVersion("angular",r.q4F.full,e.toString())}static initializeApp(t,n){return{ngModule:e,providers:[{provide:l,useValue:t},{provide:h,useValue:n}]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.Lbi))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[p]}),e})();function m(e,t,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(t=>t[0]===e)||[];if(s)return function(e,t){try{return e.toString()===t.toString()}catch(n){return e===t}}(i,o)||(v("error",`${t} was already initialized on the ${n} Firebase App with different settings.${y?" You may need to reload as Firebase is not HMR aware.":""}`),v("warn",{is:i,was:o})),s;{const t=r();return globalThis.\u0275AngularfireInstanceCache.push([e,t,i]),t}}const y=!!e.hot,v=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4459:function(e,t,n){"use strict";n.d(t,{q4:function(){return gn},iC:function(){return kn},fc:function(){return En},HU:function(){return _n},vb:function(){return yn},JM:function(){return mn},u3:function(){return An}});var r=n(3018),i=n(2329),s=n(6304),o=n(279),a=n(3854),u=n(8604),c=n(9306),l=n(6508);const h=new a.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function d(e){return e instanceof a.ZR&&e.code.includes("request-failed")}function f({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function p(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function g(e,t){return m.apply(this,arguments)}function m(){return(m=(0,s.Z)(function*(e,t){const n=(yield t.json()).error;return h.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})})).apply(this,arguments)}function y({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function v(e,{refreshToken:t}){const n=y(e);return n.append("Authorization",function(e){return`FIS_v2 ${e}`}(t)),n}function b(e){return w.apply(this,arguments)}function w(){return(w=(0,s.Z)(function*(e){const t=yield e();return t.status>=500&&t.status<600?e():t})).apply(this,arguments)}function _(e,t){return T.apply(this,arguments)}function T(){return(T=(0,s.Z)(function*({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=f(e),i=y(e),s=t.getImmediate({optional:!0});if(s){const e=yield s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:"FIS_v2",appId:e.appId,sdkVersion:"w:0.5.9"})},a=yield b(()=>fetch(r,o));if(a.ok){const e=yield a.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:p(e.authToken)}}throw yield g("Create Installation",a)})).apply(this,arguments)}function S(e){return new Promise(t=>{setTimeout(t,e)})}const I=/^[cdef][\w-]{21}$/;function E(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return I.test(t)?t:""}catch(e){return""}}function k(e){return`${e.appName}!${e.appId}`}const C=new Map;function A(e,t){const n=k(e);x(n,t),function(e,t){const n=(!N&&"BroadcastChannel"in self&&(N=new BroadcastChannel("[Firebase] FID Change"),N.onmessage=e=>{x(e.data.key,e.data.fid)}),N);n&&n.postMessage({key:e,fid:t}),0===C.size&&N&&(N.close(),N=null)}(n,t)}function x(e,t){const n=C.get(e);if(n)for(const r of n)r(t)}let N=null;const O="firebase-installations-store";let R=null;function P(){return R||(R=(0,l.X3)("firebase-installations-database",1,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(O)}}})),R}function D(e,t){return L.apply(this,arguments)}function L(){return(L=(0,s.Z)(function*(e,t){const n=k(e),r=(yield P()).transaction(O,"readwrite"),i=r.objectStore(O),s=yield i.get(n);return yield i.put(t,n),yield r.done,s&&s.fid===t.fid||A(e,t.fid),t})).apply(this,arguments)}function M(e){return U.apply(this,arguments)}function U(){return(U=(0,s.Z)(function*(e){const t=k(e),n=(yield P()).transaction(O,"readwrite");yield n.objectStore(O).delete(t),yield n.done})).apply(this,arguments)}function F(e,t){return V.apply(this,arguments)}function V(){return(V=(0,s.Z)(function*(e,t){const n=k(e),r=(yield P()).transaction(O,"readwrite"),i=r.objectStore(O),s=yield i.get(n),o=t(s);return void 0===o?yield i.delete(n):yield i.put(o,n),yield r.done,!o||s&&s.fid===o.fid||A(e,o.fid),o})).apply(this,arguments)}function Z(e){return q.apply(this,arguments)}function q(){return(q=(0,s.Z)(function*(e){let t;const n=yield F(e.appConfig,n=>{const r=j(n),i=B(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}})).apply(this,arguments)}function j(e){return K(e||{fid:E(),registrationStatus:0})}function B(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(h.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return $.apply(this,arguments)}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:z(e)}:{installationEntry:t}}function $(){return($=(0,s.Z)(function*(e,t){try{const n=yield _(e,t);return D(e.appConfig,n)}catch(n){throw d(n)&&409===n.customData.serverCode?yield M(e.appConfig):yield D(e.appConfig,{fid:t.fid,registrationStatus:0}),n}})).apply(this,arguments)}function z(e){return H.apply(this,arguments)}function H(){return(H=(0,s.Z)(function*(e){let t=yield G(e.appConfig);for(;1===t.registrationStatus;)yield S(100),t=yield G(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=yield Z(e);return n||t}return t})).apply(this,arguments)}function G(e){return F(e,e=>{if(!e)throw h.create("installation-not-found");return K(e)})}function K(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function W(e,t){return J.apply(this,arguments)}function J(){return(J=(0,s.Z)(function*({appConfig:e,heartbeatServiceProvider:t},n){const r=Y(e,n),i=v(e,n),s=t.getImmediate({optional:!0});if(s){const e=yield s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:"w:0.5.9",appId:e.appId}})},a=yield b(()=>fetch(r,o));if(a.ok)return p(yield a.json());throw yield g("Generate Auth Token",a)})).apply(this,arguments)}function Y(e,{fid:t}){return`${f(e)}/${t}/authTokens:generate`}function Q(e){return X.apply(this,arguments)}function X(){return(X=(0,s.Z)(function*(e,t=!1){let n;const r=yield F(e.appConfig,r=>{if(!se(r))throw h.create("not-registered");const i=r.authToken;if(!t&&oe(i))return r;if(1===i.requestStatus)return n=ee(e,t),r;{if(!navigator.onLine)throw h.create("app-offline");const t=ae(r);return n=re(e,t),t}});return n?yield n:r.authToken})).apply(this,arguments)}function ee(e,t){return te.apply(this,arguments)}function te(){return(te=(0,s.Z)(function*(e,t){let n=yield ne(e.appConfig);for(;1===n.authToken.requestStatus;)yield S(100),n=yield ne(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Q(e,t):r})).apply(this,arguments)}function ne(e){return F(e,e=>{if(!se(e))throw h.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t})}function re(e,t){return ie.apply(this,arguments)}function ie(){return(ie=(0,s.Z)(function*(e,t){try{const n=yield W(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return yield D(e.appConfig,r),n}catch(n){if(!d(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});yield D(e.appConfig,n)}else yield M(e.appConfig);throw n}})).apply(this,arguments)}function se(e){return void 0!==e&&2===e.registrationStatus}function oe(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(e)}function ae(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function ue(){return(ue=(0,s.Z)(function*(e){const t=e,{installationEntry:n,registrationPromise:r}=yield Z(t);return r?r.catch(console.error):Q(t).catch(console.error),n.fid})).apply(this,arguments)}function ce(){return(ce=(0,s.Z)(function*(e,t=!1){const n=e;return yield le(n),(yield Q(n,t)).token})).apply(this,arguments)}function le(e){return he.apply(this,arguments)}function he(){return(he=(0,s.Z)(function*(e){const{registrationPromise:t}=yield Z(e);t&&(yield t)})).apply(this,arguments)}function de(e){return h.create("missing-app-config-values",{valueName:e})}(0,o._registerComponent)(new u.wA("installations",e=>{const t=e.getProvider("app").getImmediate();return{app:t,appConfig:function(e){if(!e||!e.options)throw de("App Configuration");if(!e.name)throw de("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw de(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),heartbeatServiceProvider:(0,o._getProvider)(t,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,o._registerComponent)(new u.wA("installations-internal",e=>{const t=e.getProvider("app").getImmediate(),n=(0,o._getProvider)(t,"installations").getImmediate();return{getId:()=>function(e){return ue.apply(this,arguments)}(n),getToken:e=>function(e){return ce.apply(this,arguments)}(n,e)}},"PRIVATE")),(0,o.registerVersion)("@firebase/installations","0.5.9"),(0,o.registerVersion)("@firebase/installations","0.5.9","esm2017");const fe=new a.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class pe{constructor(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const n=Date.now()-t,r=n<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${n}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}fetch(e){var t=this;return(0,s.Z)(function*(){const[n,r]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(r&&t.isCachedDataFresh(e.cacheMaxAgeMillis,n))return r;e.eTag=r&&r.eTag;const i=yield t.client.fetch(e),s=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===i.status&&s.push(t.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(s),i})()}}function ge(e=navigator){return e.languages&&e.languages[0]||e.language}class me{constructor(e,t,n,r,i,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=s}fetch(e){var t=this;return(0,s.Z)(function*(){const[n,r]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),i=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},o={sdk_version:t.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:t.appId,language_code:ge()},a={method:"POST",headers:s,body:JSON.stringify(o)},u=fetch(i,a),c=new Promise((t,n)=>{e.signal.addEventListener(()=>{const e=new Error("The operation was aborted.");e.name="AbortError",n(e)})});let l;try{yield Promise.race([u,c]),l=yield u}catch(g){let e="fetch-client-network";throw"AbortError"===g.name&&(e="fetch-timeout"),fe.create(e,{originalErrorMessage:g.message})}let h=l.status;const d=l.headers.get("ETag")||void 0;let f,p;if(200===l.status){let e;try{e=yield l.json()}catch(g){throw fe.create("fetch-client-parse",{originalErrorMessage:g.message})}f=e.entries,p=e.state}if("INSTANCE_STATE_UNSPECIFIED"===p?h=500:"NO_CHANGE"===p?h=304:"NO_TEMPLATE"!==p&&"EMPTY_CONFIG"!==p||(f={}),304!==h&&200!==h)throw fe.create("fetch-status",{httpStatus:h});return{status:h,eTag:d,config:f}})()}}class ye{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,s.Z)(function*(){const n=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,n)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:n}){var r=this;return(0,s.Z)(function*(){yield function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(fe.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(e.signal,t);try{const t=yield r.client.fetch(e);return yield r.storage.deleteThrottleMetadata(),t}catch(i){if(!function(e){if(!(e instanceof a.ZR&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(i))throw i;const t={throttleEndTimeMillis:Date.now()+(0,a.$s)(n),backoffCount:n+1};return yield r.storage.setThrottleMetadata(t),r.attemptFetch(e,t)}})()}}class ve{constructor(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function be(e,t){const n=e.target.error||void 0;return fe.create(t,{originalErrorMessage:n&&n.message})}class we{constructor(e,t,n,r=function(){return new Promise((e,t)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=e=>{t(be(e,"storage-open"))},n.onsuccess=t=>{e(t.target.result)},n.onupgradeneeded=e=>{const t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore("app_namespace_store",{keyPath:"compositeKey"})}}}catch(n){t(fe.create("storage-open",{originalErrorMessage:n}))}})}()){this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,s.Z)(function*(){const n=yield t.openDbPromise;return new Promise((r,i)=>{const s=n.transaction(["app_namespace_store"],"readonly").objectStore("app_namespace_store"),o=t.createCompositeKey(e);try{const e=s.get(o);e.onerror=e=>{i(be(e,"storage-get"))},e.onsuccess=e=>{const t=e.target.result;r(t?t.value:void 0)}}catch(a){i(fe.create("storage-get",{originalErrorMessage:a&&a.message}))}})})()}set(e,t){var n=this;return(0,s.Z)(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const o=r.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),a=n.createCompositeKey(e);try{const e=o.put({compositeKey:a,value:t});e.onerror=e=>{s(be(e,"storage-set"))},e.onsuccess=()=>{i()}}catch(u){s(fe.create("storage-set",{originalErrorMessage:u&&u.message}))}})})()}delete(e){var t=this;return(0,s.Z)(function*(){const n=yield t.openDbPromise;return new Promise((r,i)=>{const s=n.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),o=t.createCompositeKey(e);try{const e=s.delete(o);e.onerror=e=>{i(be(e,"storage-delete"))},e.onsuccess=()=>{r()}}catch(a){i(fe.create("storage-delete",{originalErrorMessage:a&&a.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class _e{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,s.Z)(function*(){const t=e.storage.getLastFetchStatus(),n=e.storage.getLastSuccessfulFetchTimestampMillis(),r=e.storage.getActiveConfig(),i=yield t;i&&(e.lastFetchStatus=i);const s=yield n;s&&(e.lastSuccessfulFetchTimestampMillis=s);const o=yield r;o&&(e.activeConfig=o)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Te(){return Se.apply(this,arguments)}function Se(){return(Se=(0,s.Z)(function*(){if(!(0,a.hl)())return!1;try{return yield(0,a.eu)()}catch(e){return!1}})).apply(this,arguments)}(0,o._registerComponent)(new u.wA("remote-config",function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw fe.create("registration-window");if(!(0,a.hl)())throw fe.create("indexed-db-unavailable");const{projectId:i,apiKey:s,appId:u}=n.options;if(!i)throw fe.create("registration-project-id");if(!s)throw fe.create("registration-api-key");if(!u)throw fe.create("registration-app-id");const l=new we(u,n.name,t=t||"firebase"),h=new _e(l),d=new c.Yd("@firebase/remote-config");d.logLevel=c.in.ERROR;const f=new me(r,o.SDK_VERSION,t,i,s,u),p=new ye(f,l),g=new pe(p,l,h,d),m=new ve(n,g,h,l,d);return function(e){const t=(0,a.m9)(e);t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0}))}(m),m},"PUBLIC").setMultipleInstances(!0)),(0,o.registerVersion)("@firebase/remote-config","0.3.8"),(0,o.registerVersion)("@firebase/remote-config","0.3.8","esm2017");const Ie="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";var Ee=(()=>(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(Ee||(Ee={})),Ee))();function ke(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ce(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}const Ae="fcm_token_details_db";function xe(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,s.Z)(function*(e){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(e=>e.name).includes(Ae))return null;let t=null;var n;return(yield(0,l.X3)(Ae,5,{upgrade:(n=(0,s.Z)(function*(n,r,i,s){var o;if(r<2)return;if(!n.objectStoreNames.contains("fcm_token_object_Store"))return;const a=s.objectStore("fcm_token_object_Store"),u=yield a.index("fcmSenderId").get(e);if(yield a.clear(),u)if(2===r){const e=u;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(o=e.createTime)&&void 0!==o?o:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"==typeof e.vapidKey?e.vapidKey:ke(e.vapidKey)}}}else if(3===r){const e=u;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:ke(e.auth),p256dh:ke(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:ke(e.vapidKey)}}}else if(4===r){const e=u;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:ke(e.auth),p256dh:ke(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:ke(e.vapidKey)}}}}),function(e,t,r,i){return n.apply(this,arguments)})})).close(),yield(0,l.Lj)(Ae),yield(0,l.Lj)("fcm_vapid_details_db"),yield(0,l.Lj)("undefined"),Oe(t)?t:null})).apply(this,arguments)}function Oe(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}let Re=null;function Pe(){return Re||(Re=(0,l.X3)("firebase-messaging-database",1,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore("firebase-messaging-store")}}})),Re}function De(e){return Le.apply(this,arguments)}function Le(){return(Le=(0,s.Z)(function*(e){const t=Ze(e),n=yield Pe(),r=yield n.transaction("firebase-messaging-store").objectStore("firebase-messaging-store").get(t);if(r)return r;{const t=yield xe(e.appConfig.senderId);if(t)return yield Me(e,t),t}})).apply(this,arguments)}function Me(e,t){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,s.Z)(function*(e,t){const n=Ze(e),r=(yield Pe()).transaction("firebase-messaging-store","readwrite");return yield r.objectStore("firebase-messaging-store").put(t,n),yield r.done,t})).apply(this,arguments)}function Fe(e){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,s.Z)(function*(e){const t=Ze(e),n=(yield Pe()).transaction("firebase-messaging-store","readwrite");yield n.objectStore("firebase-messaging-store").delete(t),yield n.done})).apply(this,arguments)}function Ze({appConfig:e}){return e.appId}const qe=new a.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function je(e,t){return Be.apply(this,arguments)}function Be(){return(Be=(0,s.Z)(function*(e,t){const n=yield We(e),r=Ye(t),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{const t=yield fetch(Ke(e.appConfig),i);s=yield t.json()}catch(o){throw qe.create("token-subscribe-failed",{errorInfo:o})}if(s.error)throw qe.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw qe.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function $e(e,t){return ze.apply(this,arguments)}function ze(){return(ze=(0,s.Z)(function*(e,t){const n=yield We(e),r=Ye(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{const n=yield fetch(`${Ke(e.appConfig)}/${t.token}`,i);s=yield n.json()}catch(o){throw qe.create("token-update-failed",{errorInfo:o})}if(s.error)throw qe.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw qe.create("token-update-no-token");return s.token})).apply(this,arguments)}function He(e,t){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,s.Z)(function*(e,t){const n={method:"DELETE",headers:yield We(e)};try{const r=yield fetch(`${Ke(e.appConfig)}/${t}`,n),i=yield r.json();if(i.error)throw qe.create("token-unsubscribe-failed",{errorInfo:i.error.message})}catch(r){throw qe.create("token-unsubscribe-failed",{errorInfo:r})}})).apply(this,arguments)}function Ke({projectId:e}){return`https://fcmregistrations.googleapis.com/v1/projects/${e}/registrations`}function We(e){return Je.apply(this,arguments)}function Je(){return(Je=(0,s.Z)(function*({appConfig:e,installations:t}){const n=yield t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function Ye({p256dh:e,auth:t,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:t,p256dh:e}};return r!==Ie&&(i.web.applicationPubKey=r),i}function Qe(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,s.Z)(function*(e){const t=yield ot(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:ke(t.getKey("auth")),p256dh:ke(t.getKey("p256dh"))},r=yield De(e.firebaseDependencies);if(r){if(ut(r.subscriptionOptions,n))return Date.now()>=r.createTime+6048e5?nt(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield He(e.firebaseDependencies,r.token)}catch(i){console.warn(i)}return it(e.firebaseDependencies,n)}return it(e.firebaseDependencies,n)})).apply(this,arguments)}function et(e){return tt.apply(this,arguments)}function tt(){return(tt=(0,s.Z)(function*(e){const t=yield De(e.firebaseDependencies);t&&(yield He(e.firebaseDependencies,t.token),yield Fe(e.firebaseDependencies));const n=yield e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()})).apply(this,arguments)}function nt(e,t){return rt.apply(this,arguments)}function rt(){return(rt=(0,s.Z)(function*(e,t){try{const n=yield $e(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return yield Me(e.firebaseDependencies,r),n}catch(n){throw yield et(e),n}})).apply(this,arguments)}function it(e,t){return st.apply(this,arguments)}function st(){return(st=(0,s.Z)(function*(e,t){const n={token:yield je(e,t),createTime:Date.now(),subscriptionOptions:t};return yield Me(e,n),n.token})).apply(this,arguments)}function ot(e,t){return at.apply(this,arguments)}function at(){return(at=(0,s.Z)(function*(e,t){return(yield e.pushManager.getSubscription())||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ce(t)})})).apply(this,arguments)}function ut(e,t){return t.vapidKey===e.vapidKey&&t.endpoint===e.endpoint&&t.auth===e.auth&&t.p256dh===e.p256dh}function ct(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const i=t.notification.image;i&&(e.notification.image=i)}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){if(!t.fcmOptions)return;e.fcmOptions={};const n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);const r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}(t,e),t}function lt(e){return"object"==typeof e&&!!e&&"google.c.a.c_id"in e}function ht(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function dt(e){return qe.create("missing-app-config-values",{valueName:e})}ht("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ht("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ft{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(e){if(!e||!e.options)throw dt("App Configuration Object");if(!e.name)throw dt("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw dt(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}function pt(e){return gt.apply(this,arguments)}function gt(){return(gt=(0,s.Z)(function*(e){try{e.swRegistration=yield navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),e.swRegistration.update().catch(()=>{})}catch(t){throw qe.create("failed-service-worker-registration",{browserErrorMessage:t.message})}})).apply(this,arguments)}function mt(e,t){return yt.apply(this,arguments)}function yt(){return(yt=(0,s.Z)(function*(e,t){if(t||e.swRegistration||(yield pt(e)),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw qe.create("invalid-sw-registration");e.swRegistration=t}})).apply(this,arguments)}function vt(e,t){return bt.apply(this,arguments)}function bt(){return(bt=(0,s.Z)(function*(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=Ie)})).apply(this,arguments)}function wt(){return(wt=(0,s.Z)(function*(e,t){if(!navigator)throw qe.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw qe.create("permission-blocked");return yield vt(e,null==t?void 0:t.vapidKey),yield mt(e,null==t?void 0:t.serviceWorkerRegistration),Qe(e)})).apply(this,arguments)}function _t(e,t,n){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,s.Z)(function*(e,t,n){const r=St(t);(yield e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n["google.c.a.c_id"],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function St(e){switch(e){case Ee.NOTIFICATION_CLICKED:return"notification_open";case Ee.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function It(){return(It=(0,s.Z)(function*(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===Ee.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(ct(n)):e.onMessageHandler.next(ct(n)));const r=n.data;lt(r)&&"1"===r["google.c.a.e"]&&(yield _t(e,n.messageType,r))})).apply(this,arguments)}function Et(){return kt.apply(this,arguments)}function kt(){return(kt=(0,s.Z)(function*(){try{yield(0,a.eu)()}catch(e){return!1}return"undefined"!=typeof window&&(0,a.hl)()&&(0,a.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,o._registerComponent)(new u.wA("messaging",e=>{const t=new ft(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>function(e,t){return It.apply(this,arguments)}(t,e)),t},"PUBLIC")),(0,o._registerComponent)(new u.wA("messaging-internal",e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>function(e,t){return wt.apply(this,arguments)}(t,e)}},"PRIVATE")),(0,o.registerVersion)("@firebase/messaging","0.9.13"),(0,o.registerVersion)("@firebase/messaging","0.9.13","esm2017");const Ct="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",At="https://www.googletagmanager.com/gtag/js",xt=new c.Yd("@firebase/analytics");function Nt(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function Ot(e,t){const n=document.createElement("script");n.src=`${At}?l=${e}&id=${t}`,n.async=!0,document.head.appendChild(n)}function Rt(e,t,n,r,i,s){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,s.Z)(function*(e,t,n,r,i,s){const o=r[i];try{if(o)yield t[o];else{const e=(yield Nt(n)).find(e=>e.measurementId===i);e&&(yield t[e.appId])}}catch(a){xt.error(a)}e("config",i,s)})).apply(this,arguments)}function Dt(e,t,n,r,i){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,s.Z)(function*(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=yield Nt(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),yield Promise.all(s),e("event",r,i||{})}catch(s){xt.error(s)}})).apply(this,arguments)}function Mt(){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(At))return t;return null}const Ut=new a.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ft=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Vt(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function Zt(e){return qt.apply(this,arguments)}function qt(){return(qt=(0,s.Z)(function*(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:Vt(r)},s=Ct.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=yield o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw Ut.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()})).apply(this,arguments)}function jt(e){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,s.Z)(function*(e,t=Ft,n){const{appId:r,apiKey:i,measurementId:o}=e.options;if(!r)throw Ut.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Ut.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new Kt;return setTimeout((0,s.Z)(function*(){u.abort()}),void 0!==n?n:6e4),$t({appId:r,apiKey:i,measurementId:o},a,u,t)})).apply(this,arguments)}function $t(e,t,n){return zt.apply(this,arguments)}function zt(){return(zt=(0,s.Z)(function*(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=Ft){const{appId:s,measurementId:o}=e;try{yield Ht(r,t)}catch(u){if(o)return xt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u.message}]`),{appId:s,measurementId:o};throw u}try{const t=yield Zt(e);return i.deleteThrottleMetadata(s),t}catch(u){if(!Gt(u)){if(i.deleteThrottleMetadata(s),o)return xt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u.message}]`),{appId:s,measurementId:o};throw u}const t=503===Number(u.customData.httpStatus)?(0,a.$s)(n,i.intervalMillis,30):(0,a.$s)(n,i.intervalMillis),c={throttleEndTimeMillis:Date.now()+t,backoffCount:n+1};return i.setThrottleMetadata(s,c),xt.debug(`Calling attemptFetch again in ${t} millis`),$t(e,c,r,i)}})).apply(this,arguments)}function Ht(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(Ut.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function Gt(e){if(!(e instanceof a.ZR&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}class Kt{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}function Wt(){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,s.Z)(function*(){if(!(0,a.hl)())return xt.warn(Ut.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,a.eu)()}catch(e){return xt.warn(Ut.create("indexeddb-unavailable",{errorInfo:e}).message),!1}return!0})).apply(this,arguments)}function Yt(){return(Yt=(0,s.Z)(function*(e,t,n,r,i,s,o){var a;const u=jt(e);u.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&xt.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>xt.error(e)),t.push(u);const c=Wt().then(e=>e?r.getId():void 0),[l,h]=yield Promise.all([u,c]);Mt()||Ot(s,l.measurementId),i("js",new Date);const d=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return d.origin="firebase",d.update=!0,null!=h&&(d.firebase_id=h),i("config",l.measurementId,d),l.measurementId})).apply(this,arguments)}class Qt{constructor(e){this.app=e}_delete(){return delete Xt[this.app.options.appId],Promise.resolve()}}let Xt={},en=[];const tn={};let nn,rn,sn=!1;function on(){return(on=(0,s.Z)(function*(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=yield t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}})).apply(this,arguments)}function an(){return un.apply(this,arguments)}function un(){return(un=(0,s.Z)(function*(){if((0,a.ru)())return!1;if(!(0,a.zI)())return!1;if(!(0,a.hl)())return!1;try{return yield(0,a.eu)()}catch(e){return!1}})).apply(this,arguments)}(0,o._registerComponent)(new u.wA("analytics",(e,{options:t})=>function(e,t,n){!function(){const e=[];if((0,a.ru)()&&e.push("This is a browser extension environment."),(0,a.zI)()||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),n=Ut.create("invalid-analytics-context",{errorInfo:t});xt.warn(n.message)}}();const r=e.options.appId;if(!r)throw Ut.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Ut.create("no-api-key");xt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xt[r])throw Ut.create("already-exists",{id:r});if(!sn){!function(e){let t=[];Array.isArray(window.dataLayer)?t=window.dataLayer:window.dataLayer=t}();const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let o=function(...e){window.dataLayer.push(arguments)};return window.gtag&&"function"==typeof window.gtag&&(o=window.gtag),window.gtag=function(e,t,n,r){function i(){return(i=(0,s.Z)(function*(i,s,o){try{"event"===i?yield Dt(e,t,n,s,o):"config"===i?yield Rt(e,t,n,r,s,o):e("set",s)}catch(a){xt.error(a)}})).apply(this,arguments)}return function(e,t,n){return i.apply(this,arguments)}}(o,e,t,n),{gtagCore:o,wrappedGtag:window.gtag}}(Xt,en,tn);rn=e,nn=t,sn=!0}return Xt[r]=function(e,t,n,r,i,s,o){return Yt.apply(this,arguments)}(e,en,tn,t,nn,"dataLayer",n),new Qt(e)}(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,o._registerComponent)(new u.wA("analytics-internal",function(e){try{const t=e.getProvider("analytics").getImmediate();return{logEvent:(e,n,r)=>function(e,t,n,r){e=(0,a.m9)(e),function(e,t,n,r,i){return on.apply(this,arguments)}(rn,Xt[e.app.options.appId],t,n,r).catch(e=>xt.error(e))}(t,e,n,r)}}catch(t){throw Ut.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,o.registerVersion)("@firebase/analytics","0.7.9"),(0,o.registerVersion)("@firebase/analytics","0.7.9","esm2017");var cn=n(7771),ln=n(3637),hn=n(7574),dn=n(3342),fn=n(9746),pn=n(3101);const gn=new r.GfV("7.3.0");function mn(e,t,n){if(t){if(1===t.length)return t[0];const e=t.filter(e=>e.app===n);if(1===e.length)return e[0]}return n.container.getProvider(e).getImmediate({optional:!0})}globalThis.__angularfire_symbol__analyticsIsSupported||(globalThis.__angularfire_symbol__analyticsIsSupported=an().then(e=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=e).catch(()=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=!1)),globalThis.__angularfire_symbol__messagingIsSupported||(globalThis.__angularfire_symbol__messagingIsSupported=Et().then(e=>globalThis.__angularfire_symbol__messagingIsSupportedValue=e).catch(()=>globalThis.__angularfire_symbol__messagingIsSupportedValue=!1)),globalThis.__angularfire_symbol__remoteConfigIsSupported||(globalThis.__angularfire_symbol__remoteConfigIsSupported=Te().then(e=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=e).catch(()=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=!1));const yn=(e,t)=>{const n=t?[t]:(0,i.C6)(),r=[];return n.forEach(t=>{t.container.getProvider(e).instances.forEach(e=>{r.includes(e)||r.push(e)})}),r};function vn(){}class bn{constructor(e,t=cn.N){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,n){const r=this.zone;return this.delegate.schedule(function(t){r.runGuarded(()=>{e.apply(this,[t])})},t,n)}}class wn{constructor(e){this.zone=e,this.task=null}call(e,t){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vn,{},vn,vn)),t.pipe((0,dn.b)({next:n,complete:n,error:n})).subscribe(e).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let _n=(()=>{class e{constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new bn(Zone.current)),this.insideAngular=e.run(()=>new bn(Zone.current,ln.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Tn(){const e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return e}function Sn(e){return Tn().ngZone.runOutsideAngular(()=>e())}function In(e){return Tn().ngZone.run(()=>e())}function En(e){return e.pipe((0,fn.QV)(Tn().outsideAngular))}function kn(e){return Tn(),(t=Tn(),function(e){return(e=e.lift(new wn(t.ngZone))).pipe((0,pn.R)(t.outsideAngular),(0,fn.QV)(t.insideAngular))})(e);var t}const Cn=(e,t)=>function(){const n=arguments;return t&&setTimeout(()=>{"scheduled"===t.state&&t.invoke()},10),In(()=>e.apply(void 0,n))},An=(e,t)=>function(){let n;const r=arguments;for(let e=0;e<arguments.length;e++)"function"==typeof r[e]&&(t&&(n||(n=In(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vn,{},vn,vn)))),r[e]=Cn(r[e],n));const i=Sn(()=>e.apply(this,r));if(!t){if(i instanceof hn.y){const e=Tn();return i.pipe((0,pn.R)(e.outsideAngular),(0,fn.QV)(e.insideAngular))}return In(()=>i)}return i instanceof hn.y?i.pipe(kn):i instanceof Promise?In(()=>new Promise((e,t)=>i.then(t=>In(()=>e(t)),e=>In(()=>t(e))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:In(()=>i)}},156:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(3854),i=n(8604),s=n(279),o=n(9306);class a{constructor(e,t){this._delegate=e,this.firebase=t,(0,s._addComponent)(e,new i.wA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,s.deleteApp)(this._delegate)))}_getService(e,t=s._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=s._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,s._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,s._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const u=new r.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),c=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(i,o={}){const a=s.initializeApp(i,o);if((0,r.r3)(t,a.name))return t[a.name];const u=new e(a,n);return t[a.name]=u,u},app:i,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:function(t){const o=t.name,a=o.replace("-compat","");if(s._registerComponent(t)&&"PUBLIC"===t.type){const s=(e=i())=>{if("function"!=typeof e[a])throw u.create("invalid-app-argument",{appName:o});return e[a]()};void 0!==t.serviceProps&&(0,r.ZB)(s,t.serviceProps),n[a]=s,e.prototype[a]=function(...e){return this._getService.bind(this,o).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:s}};function i(e){if(!(0,r.r3)(t,e=e||s._DEFAULT_ENTRY_NAME))throw u.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),i.App=e,n}(a);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.ZB)(t,e)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),t}(),l=new o.Yd("@firebase/app-compat");if((0,r.jU)()&&void 0!==self.firebase){l.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&l.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const h=c;(0,s.registerVersion)("@firebase/app-compat","0.1.25",void 0)},279:function(e,t,n){"use strict";n.r(t),n.d(t,{FirebaseError:function(){return o.ZR},SDK_VERSION:function(){return S},_DEFAULT_ENTRY_NAME:function(){return h},_addComponent:function(){return g},_addOrOverwriteComponent:function(){return m},_apps:function(){return f},_clearComponents:function(){return w},_components:function(){return p},_getProvider:function(){return v},_registerComponent:function(){return y},_removeServiceInstance:function(){return b},deleteApp:function(){return C},getApp:function(){return E},getApps:function(){return k},initializeApp:function(){return I},onLog:function(){return N},registerVersion:function(){return x},setLogLevel:function(){return O}});var r=n(6304),i=n(8604),s=n(9306),o=n(3854),a=n(6508);class u{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const c="@firebase/app",l=new s.Yd("@firebase/app"),h="[DEFAULT]",d={[c]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},f=new Map,p=new Map;function g(e,t){try{e.container.addComponent(t)}catch(n){l.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function m(e,t){e.container.addOrOverwriteComponent(t)}function y(e){const t=e.name;if(p.has(t))return l.debug(`There were multiple attempts to register component ${t}.`),!1;p.set(t,e);for(const n of f.values())g(n,e);return!0}function v(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function b(e,t,n=h){v(e,t).clearInstance(n)}function w(){p.clear()}const _=new o.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class T{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _.create("app-deleted",{appName:this._name})}}const S="9.8.1";function I(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:h,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw _.create("bad-app-name",{appName:String(r)});const s=f.get(r);if(s){if((0,o.vZ)(e,s.options)&&(0,o.vZ)(n,s.config))return s;throw _.create("duplicate-app",{appName:r})}const a=new i.H0(r);for(const i of p.values())a.addComponent(i);const u=new T(e,n,a);return f.set(r,u),u}function E(e=h){const t=f.get(e);if(!t)throw _.create("no-app",{appName:e});return t}function k(){return Array.from(f.values())}function C(e){return A.apply(this,arguments)}function A(){return(A=(0,r.Z)(function*(e){const t=e.name;f.has(t)&&(f.delete(t),yield Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)})).apply(this,arguments)}function x(e,t,n){var r;let s=null!==(r=d[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void l.warn(e.join(" "))}y(new i.wA(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}function N(e,t){if(null!==e&&"function"!=typeof e)throw _.create("invalid-log-argument");(0,s.Am)(e,t)}function O(e){(0,s.Ub)(e)}const R="firebase-heartbeat-store";let P=null;function D(){return P||(P=(0,a.X3)("firebase-heartbeat-database",1,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(R)}}}).catch(e=>{throw _.create("storage-open",{originalErrorMessage:e.message})})),P}function L(){return(L=(0,r.Z)(function*(e){try{return(yield D()).transaction(R).objectStore(R).get(F(e))}catch(t){throw _.create("storage-get",{originalErrorMessage:t.message})}})).apply(this,arguments)}function M(e,t){return U.apply(this,arguments)}function U(){return(U=(0,r.Z)(function*(e,t){try{const n=(yield D()).transaction(R,"readwrite"),r=n.objectStore(R);return yield r.put(t,F(e)),n.done}catch(n){throw _.create("storage-set",{originalErrorMessage:n.message})}})).apply(this,arguments)}function F(e){return`${e.name}!${e.options.appId}`}class V{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new q(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}triggerHeartbeat(){var e=this;return(0,r.Z)(function*(){const t=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=Z();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==n&&!e._heartbeatsCache.heartbeats.some(e=>e.date===n))return e._heartbeatsCache.heartbeats.push({date:n,agent:t}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,r.Z)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=Z(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),j(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),j(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),i=(0,o.L)(JSON.stringify({version:2,heartbeats:n}));return e._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(e._heartbeatsCache.heartbeats=r,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),i})()}}function Z(){return(new Date).toISOString().substring(0,10)}class q{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,r.Z)(function*(){return!!(0,o.hl)()&&(0,o.eu)().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,r.Z)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function(e){return L.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return(0,r.Z)(function*(){var n;if(yield t._canUseIndexedDBPromise){const r=yield t.read();return M(t.app,{lastSentHeartbeatDate:null!==(n=e.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,r.Z)(function*(){var n;if(yield t._canUseIndexedDBPromise){const r=yield t.read();return M(t.app,{lastSentHeartbeatDate:null!==(n=e.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}})()}}function j(e){return(0,o.L)(JSON.stringify({version:2,heartbeats:e})).length}y(new i.wA("platform-logger",e=>new u(e),"PRIVATE")),y(new i.wA("heartbeat",e=>new V(e),"PRIVATE")),x(c,"0.7.24",""),x(c,"0.7.24","esm2017"),x("fire-js","")},8882:function(e,t,n){"use strict";n.d(t,{$:function(){return Wt},A:function(){return l},B:function(){return h},G:function(){return Oe},H:function(){return De},J:function(){return rt},L:function(){return de},M:function(){return dt},N:function(){return mt},P:function(){return Mr},Q:function(){return yt},R:function(){return Ir},T:function(){return vt},U:function(){return gt},V:function(){return wt},W:function(){return _t},X:function(){return kt},Y:function(){return qt},Z:function(){return Bt},_:function(){return zt},a:function(){return Yn},a0:function(){return en},a1:function(){return nn},a2:function(){return sn},a3:function(){return an},a4:function(){return cn},a5:function(){return hn},a6:function(){return fn},a7:function(){return pn},a8:function(){return mn},a9:function(){return yn},aA:function(){return bi},aB:function(){return gi},aC:function(){return ii},aD:function(){return ri},aE:function(){return xe},aI:function(){return Xn},aL:function(){return bt},aa:function(){return _n},ab:function(){return Sn},ac:function(){return En},af:function(){return xn},ag:function(){return On},ah:function(){return Rn},ak:function(){return Ot},al:function(){return qn},an:function(){return $n},ao:function(){return Kn},ap:function(){return Ie},aq:function(){return T},ar:function(){return Se},as:function(){return we},at:function(){return g},au:function(){return Vi},av:function(){return Ti},aw:function(){return m},ax:function(){return w},ay:function(){return I},az:function(){return fe},b:function(){return Jn},c:function(){return zr},d:function(){return Wr},e:function(){return Gr},f:function(){return ai},g:function(){return hi},h:function(){return ci},i:function(){return dr},j:function(){return fi},k:function(){return Zi},l:function(){return Ar},m:function(){return ji},o:function(){return c},r:function(){return Nr},s:function(){return kr},u:function(){return Dr}});var r=n(6304),i=n(3854),s=n(279);function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}var a=n(9306),u=n(8604);const c={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},l={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"},h=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},d=new i.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),f=new a.Yd("@firebase/auth");function p(e,...t){f.logLevel<=a.in.ERROR&&f.error(`Auth (${s.SDK_VERSION}): ${e}`,...t)}function g(e,...t){throw b(e,...t)}function m(e,...t){return b(e,...t)}function y(e,t,n){const r=Object.assign(Object.assign({},{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),{[t]:n});return new i.LL("auth","Firebase",r).create(t,{appName:e.name})}function v(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&g(e,"argument-error"),y(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function b(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return d.create(e,...t)}function w(e,t,...n){if(!e)throw b(t,...n)}function _(e){const t="INTERNAL ASSERTION FAILED: "+e;throw p(t),new Error(t)}function T(e,t){e||_(t)}const S=new Map;function I(e){T(e instanceof Function,"Expected a class definition");let t=S.get(e);return t?(T(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,S.set(e,t),t)}function E(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function k(){return"http:"===C()||"https:"===C()}function C(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class A{constructor(e,t){this.shortDelay=e,this.longDelay=t,T(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,i.uI)()||(0,i.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(k()||(0,i.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function x(e,t){T(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class N{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void _("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void _("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void _("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const O={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},R=new A(3e4,6e4);function P(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function D(e,t,n,r){return L.apply(this,arguments)}function L(){return(L=(0,r.Z)(function*(e,t,n,s,o={}){return M(e,o,(0,r.Z)(function*(){let r={},o={};s&&("GET"===t?o=s:r={body:JSON.stringify(s)});const a=(0,i.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),u=yield e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),N.fetch()(Z(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},r))}))})).apply(this,arguments)}function M(e,t,n){return U.apply(this,arguments)}function U(){return(U=(0,r.Z)(function*(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},O),t);try{const t=new q(e),i=yield Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=yield i.json();if("needConfirmation"in s)throw j(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw j(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw j(e,"email-already-in-use",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw y(e,a,o);g(e,a)}}catch(s){if(s instanceof i.ZR)throw s;g(e,"network-request-failed")}})).apply(this,arguments)}function F(e,t,n,r){return V.apply(this,arguments)}function V(){return(V=(0,r.Z)(function*(e,t,n,r,i={}){const s=yield D(e,t,n,r,i);return"mfaPendingCredential"in s&&g(e,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function Z(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?x(e.config,i):`${e.config.apiScheme}://${i}`}class q{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(m(this.auth,"network-request-failed")),R.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function j(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=m(e,t,r);return i.customData._tokenResponse=n,i}function B(){return(B=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:delete",t)})).apply(this,arguments)}function $(e,t){return z.apply(this,arguments)}function z(){return(z=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function H(e,t){return G.apply(this,arguments)}function G(){return(G=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:lookup",t)})).apply(this,arguments)}function K(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function W(){return(W=(0,r.Z)(function*(e,t=!1){const n=(0,i.m9)(e),r=yield n.getIdToken(t),s=Y(r);w(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:K(J(s.auth_time)),issuedAtTime:K(J(s.iat)),expirationTime:K(J(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}})).apply(this,arguments)}function J(e){return 1e3*Number(e)}function Y(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return p("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,i.tV)(n);return e?JSON.parse(e):(p("Failed to decode base64 JWT payload"),null)}catch(s){return p("Caught error parsing JWT payload as JSON",s),null}}function Q(e,t){return X.apply(this,arguments)}function X(){return(X=(0,r.Z)(function*(e,t,n=!1){if(n)return t;try{return yield t}catch(r){throw r instanceof i.ZR&&ee(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})).apply(this,arguments)}function ee({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}class te{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout((0,r.Z)(function*(){yield t.iteration()}),n)}iteration(){var e=this;return(0,r.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&e.schedule(!0))}e.schedule()})()}}class ne{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=K(this.lastLoginAt),this.creationTime=K(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function re(e){return ie.apply(this,arguments)}function ie(){return(ie=(0,r.Z)(function*(e){var t;const n=e.auth,r=yield e.getIdToken(),i=yield Q(e,H(n,{idToken:r}));w(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?ae(s.providerUserInfo):[],a=oe(e.providerData,o),u=!!e.isAnonymous&&!(e.email&&s.passwordHash||(null==a?void 0:a.length)),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ne(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,c)})).apply(this,arguments)}function se(){return(se=(0,r.Z)(function*(e){const t=(0,i.m9)(e);yield re(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})).apply(this,arguments)}function oe(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function ae(e){return e.map(e=>{var{providerId:t}=e,n=o(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function ue(){return(ue=(0,r.Z)(function*(e,t){const n=yield M(e,{},(0,r.Z)(function*(){const n=(0,i.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,o=Z(e,r,"/v1/token",`key=${s}`),a=yield e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",N.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class ce{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){w(e.idToken,"internal-error"),w(void 0!==e.idToken,"internal-error"),w(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Y(e);return w(t,"internal-error"),w(void 0!==t.exp,"internal-error"),w(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var n=this;return(0,r.Z)(function*(){return w(!n.accessToken||n.refreshToken,e,"user-token-expired"),t||!n.accessToken||n.isExpired?n.refreshToken?(yield n.refresh(e,n.refreshToken),n.accessToken):null:n.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var n=this;return(0,r.Z)(function*(){const{accessToken:r,refreshToken:i,expiresIn:s}=yield function(e,t){return ue.apply(this,arguments)}(e,t);n.updateTokensAndExpiration(r,i,Number(s))})()}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new ce;return n&&(w("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(w("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(w("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ce,this.toJSON())}_performRefresh(){return _("not implemented")}}function le(e,t){w("string"==typeof e||void 0===e,"internal-error",{appName:t})}class he{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=o(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new te(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ne(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,r.Z)(function*(){const n=yield Q(t,t.stsTokenManager.getToken(t.auth,e));return w(n,t.auth,"internal-error"),t.accessToken!==n&&(t.accessToken=n,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),n})()}getIdTokenResult(e){return function(e){return W.apply(this,arguments)}(this,e)}reload(){return function(e){return se.apply(this,arguments)}(this)}_assign(e){this!==e&&(w(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new he(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){w(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var n=this;return(0,r.Z)(function*(){let r=!1;e.idToken&&e.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield re(n)),yield n.auth._persistUserIfCurrent(n),r&&n.auth._notifyListenersIfCurrent(n)})()}delete(){var e=this;return(0,r.Z)(function*(){const t=yield e.getIdToken();return yield Q(e,function(e,t){return B.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,u,c;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(u=t.createdAt)&&void 0!==u?u:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:_,providerData:T,stsTokenManager:S}=t;w(v&&S,e,"internal-error");const I=ce.fromJSON(this.name,S);w("string"==typeof v,e,"internal-error"),le(l,e.name),le(h,e.name),w("boolean"==typeof b,e,"internal-error"),w("boolean"==typeof _,e,"internal-error"),le(d,e.name),le(f,e.name),le(p,e.name),le(g,e.name),le(m,e.name),le(y,e.name);const E=new he({uid:v,auth:e,email:h,emailVerified:b,displayName:l,isAnonymous:_,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:m,lastLoginAt:y});return T&&Array.isArray(T)&&(E.providerData=T.map(e=>Object.assign({},e))),g&&(E._redirectEventId=g),E}static _fromIdTokenResponse(e,t,n=!1){return(0,r.Z)(function*(){const r=new ce;r.updateFromServerResponse(t);const i=new he({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return yield re(i),i})()}}const de=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,r.Z)(function*(){return!0})()}_set(e,t){var n=this;return(0,r.Z)(function*(){n.storage[e]=t})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=t.storage[e];return void 0===n?null:n})()}_remove(e){var t=this;return(0,r.Z)(function*(){delete t.storage[e]})()}_addListener(e,t){}_removeListener(e,t){}}return e.type="NONE",e})();function fe(e,t,n){return`firebase:${e}:${t}:${n}`}class pe{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=fe(this.userKey,r.apiKey,i),this.fullPersistenceKey=fe("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,r.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?he._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,r.Z)(function*(){if(t.persistence===e)return;const n=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,n?t.setCurrentUser(n):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,n="authUser"){return(0,r.Z)(function*(){if(!t.length)return new pe(I(de),e,n);const i=(yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(yield e._isAvailable())return e});return function(t){return e.apply(this,arguments)}}()))).filter(e=>e);let s=i[0]||I(de);const o=fe(n,e.config.apiKey,e.name);let a=null;for(const n of t)try{const t=yield n._get(o);if(t){const r=he._fromJSON(e,t);n!==s&&(a=r),s=n;break}}catch(c){}const u=i.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(e!==s)try{yield e._remove(o)}catch(c){}});return function(t){return e.apply(this,arguments)}}())),new pe(s,e,n)):new pe(s,e,n)})()}}function ge(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(be(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(me(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(_e(t))return"Blackberry";if(Te(t))return"Webos";if(ye(t))return"Safari";if((t.includes("chrome/")||ve(t))&&!t.includes("edge/"))return"Chrome";if(we(t))return"Android";{const t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==t?void 0:t.length))return t[1]}return"Other"}function me(e=(0,i.z$)()){return/firefox\//i.test(e)}function ye(e=(0,i.z$)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ve(e=(0,i.z$)()){return/crios\//i.test(e)}function be(e=(0,i.z$)()){return/iemobile/i.test(e)}function we(e=(0,i.z$)()){return/android/i.test(e)}function _e(e=(0,i.z$)()){return/blackberry/i.test(e)}function Te(e=(0,i.z$)()){return/webos/i.test(e)}function Se(e=(0,i.z$)()){return/iphone|ipad|ipod/i.test(e)}function Ie(e=(0,i.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}function Ee(e=(0,i.z$)()){return Se(e)||we(e)||Te(e)||_e(e)||/windows phone/i.test(e)||be(e)}function ke(e,t=[]){let n;switch(e){case"Browser":n=ge((0,i.z$)());break;case"Worker":n=`${ge((0,i.z$)())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${s.SDK_VERSION}/${r}`}class Ce{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,r.Z)(function*(){if(t.auth.currentUser===e)return;const n=[];try{for(const r of t.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const e of n)try{e()}catch(i){}throw t.auth._errorFactory.create("login-blocked",{originalMessage:r.message})}})()}}class Ae{constructor(e,t,n){this.app=e,this.heartbeatServiceProvider=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ne(this),this.idTokenSubscription=new Ne(this),this.beforeStateQueue=new Ce(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){var n=this;return t&&(this._popupRedirectResolver=I(t)),this._initializationPromise=this.queue((0,r.Z)(function*(){var r,i;if(!n._deleted&&(n.persistenceManager=yield pe.create(n,e),!n._deleted)){if(null===(r=n._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{yield n._popupRedirectResolver._initialize(n)}catch(s){}yield n.initializeCurrentUser(t),n.lastNotifiedUid=(null===(i=n.currentUser)||void 0===i?void 0:i.uid)||null,n._deleted||(n._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,r.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();return e.currentUser||t?e.currentUser&&t&&e.currentUser.uid===t.uid?(e._currentUser._assign(t),void(yield e.currentUser.getIdToken())):void(yield e._updateCurrentUser(t,!0)):void 0})()}initializeCurrentUser(e){var t=this;return(0,r.Z)(function*(){var n;const r=yield t.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const r=null===(n=t.redirectUser)||void 0===n?void 0:n._redirectEventId,o=null==i?void 0:i._redirectEventId,a=yield t.tryRedirectSignIn(e);r&&r!==o||!(null==a?void 0:a.user)||(i=a.user,s=!0)}if(!i)return t.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield t.beforeStateQueue.runMiddleware(i)}catch(o){i=r,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(o))}return i?t.reloadAndSetCurrentUserOrClear(i):t.directlySetCurrentUser(null)}return w(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===i._redirectEventId?t.directlySetCurrentUser(i):t.reloadAndSetCurrentUserOrClear(i)})()}tryRedirectSignIn(e){var t=this;return(0,r.Z)(function*(){let n=null;try{n=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(r){yield t._setRedirectUser(null)}return n})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,r.Z)(function*(){try{yield re(e)}catch(n){if("auth/network-request-failed"!==n.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}_delete(){var e=this;return(0,r.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,r.Z)(function*(){const n=e?(0,i.m9)(e):null;return n&&w(n.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(n&&n._clone(t))})()}_updateCurrentUser(e,t=!1){var n=this;return(0,r.Z)(function*(){if(!n._deleted)return e&&w(n.tenantId===e.tenantId,n,"tenant-id-mismatch"),t||(yield n.beforeStateQueue.runMiddleware(e)),n.queue((0,r.Z)(function*(){yield n.directlySetCurrentUser(e),n.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,r.Z)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue((0,r.Z)(function*(){yield t.assertedPersistence.setPersistence(I(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new i.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var n=this;return(0,r.Z)(function*(){const r=yield n.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,r.Z)(function*(){if(!t.redirectPersistenceManager){const n=e&&I(e)||t._popupRedirectResolver;w(n,t,"argument-error"),t.redirectPersistenceManager=yield pe.create(t,[I(n._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,r.Z)(function*(){var n,i;return t._isInitialized&&(yield t.queue((0,r.Z)(function*(){}))),(null===(n=t._currentUser)||void 0===n?void 0:n._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,r.Z)(function*(){if(e===t.currentUser)return t.queue((0,r.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return w(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,r.Z)(function*(){t.currentUser&&t.currentUser!==e&&(t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh()),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return w(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ke(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,r.Z)(function*(){var t;const n={"X-Client-Version":e.clientVersion};e.app.options.appId&&(n["X-Firebase-gmpid"]=e.app.options.appId);const r=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();return r&&(n["X-Firebase-Client"]=r),n})()}}function xe(e){return(0,i.m9)(e)}class Ne{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,i.ne)(e=>this.observer=e)}get next(){return w(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Oe(e,t,n){const r=xe(e);w(r._canInitEmulator,r,"emulator-config-failed"),w(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=Re(t),{host:o,port:a}=function(e){const t=Re(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Pe(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Pe(t)}}}(t);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Re(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Pe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class De{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _("not implemented")}_getIdTokenResponse(e){return _("not implemented")}_linkToIdToken(e,t){return _("not implemented")}_getReauthenticationResolver(e){return _("not implemented")}}function Le(e,t){return Me.apply(this,arguments)}function Me(){return(Me=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:resetPassword",P(e,t))})).apply(this,arguments)}function Ue(e,t){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function Ve(e,t){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:update",P(e,t))})).apply(this,arguments)}function qe(){return(qe=(0,r.Z)(function*(e,t){return F(e,"POST","/v1/accounts:signInWithPassword",P(e,t))})).apply(this,arguments)}function je(e,t){return Be.apply(this,arguments)}function Be(){return(Be=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:sendOobCode",P(e,t))})).apply(this,arguments)}function $e(e,t){return ze.apply(this,arguments)}function ze(){return(ze=(0,r.Z)(function*(e,t){return je(e,t)})).apply(this,arguments)}function He(e,t){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,r.Z)(function*(e,t){return je(e,t)})).apply(this,arguments)}function Ke(e,t){return We.apply(this,arguments)}function We(){return(We=(0,r.Z)(function*(e,t){return je(e,t)})).apply(this,arguments)}function Je(e,t){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,r.Z)(function*(e,t){return je(e,t)})).apply(this,arguments)}function Qe(){return(Qe=(0,r.Z)(function*(e,t){return F(e,"POST","/v1/accounts:signInWithEmailLink",P(e,t))})).apply(this,arguments)}function Xe(){return(Xe=(0,r.Z)(function*(e,t){return F(e,"POST","/v1/accounts:signInWithEmailLink",P(e,t))})).apply(this,arguments)}class et extends De{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new et(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new et(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return(0,r.Z)(function*(){switch(t.signInMethod){case"password":return function(e,t){return qe.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function(e,t){return Qe.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:g(e,"internal-error")}})()}_linkToIdToken(e,t){var n=this;return(0,r.Z)(function*(){switch(n.signInMethod){case"password":return Ue(e,{idToken:t,returnSecureToken:!0,email:n._email,password:n._password});case"emailLink":return function(e,t){return Xe.apply(this,arguments)}(e,{idToken:t,email:n._email,oobCode:n._password});default:g(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function tt(e,t){return nt.apply(this,arguments)}function nt(){return(nt=(0,r.Z)(function*(e,t){return F(e,"POST","/v1/accounts:signInWithIdp",P(e,t))})).apply(this,arguments)}class rt extends De{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new rt(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):g("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=o(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new rt(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return tt(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,tt(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,tt(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,i.xO)(t)}return e}}function it(e,t){return st.apply(this,arguments)}function st(){return(st=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:sendVerificationCode",P(e,t))})).apply(this,arguments)}function ot(){return(ot=(0,r.Z)(function*(e,t){return F(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,t))})).apply(this,arguments)}function at(){return(at=(0,r.Z)(function*(e,t){const n=yield F(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,t));if(n.temporaryProof)throw j(e,"account-exists-with-different-credential",n);return n})).apply(this,arguments)}const ut={USER_NOT_FOUND:"user-not-found"};function ct(){return(ct=(0,r.Z)(function*(e,t){return F(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ut)})).apply(this,arguments)}class lt extends De{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new lt({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new lt({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return function(e,t){return ot.apply(this,arguments)}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return function(e,t){return at.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return function(e,t){return ct.apply(this,arguments)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new lt({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class ht{constructor(e){var t,n,r,s,o,a;const u=(0,i.zd)((0,i.pd)(e)),c=null!==(t=u.apiKey)&&void 0!==t?t:null,l=null!==(n=u.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=u.mode)&&void 0!==r?r:null);w(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(s=u.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=u.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,i.zd)((0,i.pd)(e)).link,n=t?(0,i.zd)((0,i.pd)(t)).deep_link_id:null,r=(0,i.zd)((0,i.pd)(e)).deep_link_id;return(r?(0,i.zd)((0,i.pd)(r)).link:null)||r||n||t||e}(e);try{return new ht(t)}catch(n){return null}}}let dt=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return et._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ht.parseLink(t);return w(n,"argument-error"),et._fromEmailAndCode(e,n.code,n.tenantId)}}return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e})();class ft{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class pt extends ft{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class gt extends pt{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return w("providerId"in t&&"signInMethod"in t,"argument-error"),rt._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return w(e.idToken||e.accessToken,"argument-error"),rt._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return gt.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return gt.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=e;if(!(n||r||t||i))return null;if(!o)return null;try{return new gt(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:i})}catch(a){return null}}}let mt=(()=>{class e extends pt{constructor(){super("facebook.com")}static credential(t){return rt._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.FACEBOOK_SIGN_IN_METHOD="facebook.com",e.PROVIDER_ID="facebook.com",e})(),yt=(()=>{class e extends pt{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return rt._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch(i){return null}}}return e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com",e})(),vt=(()=>{class e extends pt{constructor(){super("github.com")}static credential(t){return rt._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.GITHUB_SIGN_IN_METHOD="github.com",e.PROVIDER_ID="github.com",e})();class bt extends De{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return tt(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,tt(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,tt(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new bt(n,i):null}static _create(e,t){return new bt(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class wt extends ft{constructor(e){w(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return wt.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return wt.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=bt.fromJSON(e);return w(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return bt._create(n,t)}catch(r){return null}}}let _t=(()=>{class e extends pt{constructor(){super("twitter.com")}static credential(t,n){return rt._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch(i){return null}}}return e.TWITTER_SIGN_IN_METHOD="twitter.com",e.PROVIDER_ID="twitter.com",e})();function Tt(e,t){return St.apply(this,arguments)}function St(){return(St=(0,r.Z)(function*(e,t){return F(e,"POST","/v1/accounts:signUp",P(e,t))})).apply(this,arguments)}class It{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,n,i=!1){return(0,r.Z)(function*(){const r=yield he._fromIdTokenResponse(e,n,i),s=Et(n);return new It({user:r,providerId:s,_tokenResponse:n,operationType:t})})()}static _forOperation(e,t,n){return(0,r.Z)(function*(){yield e._updateTokensIfNecessary(n,!0);const r=Et(n);return new It({user:e,providerId:r,_tokenResponse:n,operationType:t})})()}}function Et(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function kt(e){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,r.Z)(function*(e){var t;const n=xe(e);if(yield n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new It({user:n.currentUser,providerId:null,operationType:"signIn"});const r=yield Tt(n,{returnSecureToken:!0}),i=yield It._fromIdTokenResponse(n,"signIn",r,!0);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class At extends i.ZR{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,At.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new At(e,t,n,r)}}function xt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw At._fromErrorAndOperation(e,n,t,r);throw n})}function Nt(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}function Ot(e,t){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,r.Z)(function*(e,t){const n=(0,i.m9)(e);yield Lt(!0,n,t);const{providerUserInfo:r}=yield $(n.auth,{idToken:yield n.getIdToken(),deleteProvider:[t]}),s=Nt(r||[]);return n.providerData=n.providerData.filter(e=>s.has(e.providerId)),s.has("phone")||(n.phoneNumber=null),yield n.auth._persistUserIfCurrent(n),n})).apply(this,arguments)}function Pt(e,t){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,r.Z)(function*(e,t,n=!1){const r=yield Q(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return It._forOperation(e,"link",r)})).apply(this,arguments)}function Lt(e,t,n){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,r.Z)(function*(e,t,n){yield re(t);const r=!1===e?"provider-already-linked":"no-such-provider";w(Nt(t.providerData).has(n)===e,t.auth,r)})).apply(this,arguments)}function Ut(e,t){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,r.Z)(function*(e,t,n=!1){const{auth:r}=e;try{const i=yield Q(e,xt(r,"reauthenticate",t,e),n);w(i.idToken,r,"internal-error");const s=Y(i.idToken);w(s,r,"internal-error");const{sub:o}=s;return w(e.uid===o,r,"user-mismatch"),It._forOperation(e,"reauthenticate",i)}catch(i){throw"auth/user-not-found"===(null==i?void 0:i.code)&&g(r,"user-mismatch"),i}})).apply(this,arguments)}function Vt(e,t){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,r.Z)(function*(e,t,n=!1){const r=yield xt(e,"signIn",t),i=yield It._fromIdTokenResponse(e,"signIn",r);return n||(yield e._updateCurrentUser(i.user)),i})).apply(this,arguments)}function qt(e,t){return jt.apply(this,arguments)}function jt(){return(jt=(0,r.Z)(function*(e,t){return Vt(xe(e),t)})).apply(this,arguments)}function Bt(e,t){return $t.apply(this,arguments)}function $t(){return($t=(0,r.Z)(function*(e,t){const n=(0,i.m9)(e);return yield Lt(!1,n,t.providerId),Pt(n,t)})).apply(this,arguments)}function zt(e,t){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,r.Z)(function*(e,t){return Ut((0,i.m9)(e),t)})).apply(this,arguments)}function Gt(e,t){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,r.Z)(function*(e,t){return F(e,"POST","/v1/accounts:signInWithCustomToken",P(e,t))})).apply(this,arguments)}function Wt(e,t){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,r.Z)(function*(e,t){const n=xe(e),r=yield Gt(n,{token:t,returnSecureToken:!0}),i=yield It._fromIdTokenResponse(n,"signIn",r);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class Yt{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Qt._fromServerResponse(e,t):g(e,"internal-error")}}class Qt extends Yt{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Qt(t)}}function Xt(e,t,n){var r;w((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),w(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(w(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(w(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function en(e,t,n){return tn.apply(this,arguments)}function tn(){return(tn=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s={requestType:"PASSWORD_RESET",email:t};n&&Xt(r,s,n),yield He(r,s)})).apply(this,arguments)}function nn(e,t,n){return rn.apply(this,arguments)}function rn(){return(rn=(0,r.Z)(function*(e,t,n){yield Le((0,i.m9)(e),{oobCode:t,newPassword:n})})).apply(this,arguments)}function sn(e,t){return on.apply(this,arguments)}function on(){return(on=(0,r.Z)(function*(e,t){yield Ve((0,i.m9)(e),{oobCode:t})})).apply(this,arguments)}function an(e,t){return un.apply(this,arguments)}function un(){return(un=(0,r.Z)(function*(e,t){const n=(0,i.m9)(e),r=yield Le(n,{oobCode:t}),s=r.requestType;switch(w(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":w(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":w(r.mfaInfo,n,"internal-error");default:w(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=Yt._fromServerResponse(xe(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:s}})).apply(this,arguments)}function cn(e,t){return ln.apply(this,arguments)}function ln(){return(ln=(0,r.Z)(function*(e,t){const{data:n}=yield an((0,i.m9)(e),t);return n.email})).apply(this,arguments)}function hn(e,t,n){return dn.apply(this,arguments)}function dn(){return(dn=(0,r.Z)(function*(e,t,n){const r=xe(e),i=yield Tt(r,{returnSecureToken:!0,email:t,password:n}),s=yield It._fromIdTokenResponse(r,"signIn",i);return yield r._updateCurrentUser(s.user),s})).apply(this,arguments)}function fn(e,t,n){return qt((0,i.m9)(e),dt.credential(t,n))}function pn(e,t,n){return gn.apply(this,arguments)}function gn(){return(gn=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s={requestType:"EMAIL_SIGNIN",email:t};w(n.handleCodeInApp,r,"argument-error"),n&&Xt(r,s,n),yield Ke(r,s)})).apply(this,arguments)}function mn(e,t){const n=ht.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}function yn(e,t,n){return vn.apply(this,arguments)}function vn(){return(vn=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s=dt.credentialWithLink(t,n||E());return w(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),qt(r,s)})).apply(this,arguments)}function bn(e,t){return wn.apply(this,arguments)}function wn(){return(wn=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:createAuthUri",P(e,t))})).apply(this,arguments)}function _n(e,t){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,r.Z)(function*(e,t){const n={identifier:t,continueUri:k()?E():"http://localhost"},{signinMethods:r}=yield bn((0,i.m9)(e),n);return r||[]})).apply(this,arguments)}function Sn(e,t){return In.apply(this,arguments)}function In(){return(In=(0,r.Z)(function*(e,t){const n=(0,i.m9)(e),r={requestType:"VERIFY_EMAIL",idToken:yield e.getIdToken()};t&&Xt(n.auth,r,t);const{email:s}=yield $e(n.auth,r);s!==e.email&&(yield e.reload())})).apply(this,arguments)}function En(e,t,n){return kn.apply(this,arguments)}function kn(){return(kn=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield e.getIdToken(),newEmail:t};n&&Xt(r.auth,s,n);const{email:o}=yield Je(r.auth,s);o!==e.email&&(yield e.reload())})).apply(this,arguments)}function Cn(e,t){return An.apply(this,arguments)}function An(){return(An=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function xn(e,t){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,r.Z)(function*(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=(0,i.m9)(e),s={idToken:yield r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=yield Q(r,Cn(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),yield r._updateTokensIfNecessary(o)})).apply(this,arguments)}function On(e,t){return Pn((0,i.m9)(e),t,null)}function Rn(e,t){return Pn((0,i.m9)(e),null,t)}function Pn(e,t,n){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,r.Z)(function*(e,t,n){const{auth:r}=e,i={idToken:yield e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=yield Q(e,Ue(r,i));yield e._updateTokensIfNecessary(s,!0)})).apply(this,arguments)}class Ln{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class Mn extends Ln{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Un extends Ln{constructor(e,t){super(e,"facebook.com",t)}}class Fn extends Mn{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class Vn extends Ln{constructor(e,t){super(e,"google.com",t)}}class Zn extends Mn{constructor(e,t,n){super(e,"twitter.com",t,n)}}function qn(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=Y(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Ln(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new Un(s,i);case"github.com":return new Fn(s,i);case"google.com":return new Vn(s,i);case"twitter.com":return new Zn(s,i,e.screenName||null);case"custom":case"anonymous":return new Ln(s,null);default:return new Ln(s,r,i)}}(n)}class jn{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new jn("enroll",e)}static _fromMfaPendingCredential(e){return new jn("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return jn._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return jn._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Bn{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=xe(e),i=t.customData._serverResponse,s=(i.mfaInfo||[]).map(e=>Yt._fromServerResponse(n,e));w(i.mfaPendingCredential,n,"internal-error");const o=jn._fromMfaPendingCredential(i.mfaPendingCredential);return new Bn(o,s,function(){var e=(0,r.Z)(function*(e){const r=yield e._process(n,o);delete i.mfaInfo,delete i.mfaPendingCredential;const s=Object.assign(Object.assign({},i),{idToken:r.idToken,refreshToken:r.refreshToken});switch(t.operationType){case"signIn":const e=yield It._fromIdTokenResponse(n,t.operationType,s);return yield n._updateCurrentUser(e.user),e;case"reauthenticate":return w(t.user,n,"internal-error"),It._forOperation(t.user,t.operationType,s);default:g(n,"internal-error")}});return function(t){return e.apply(this,arguments)}}())}resolveSignIn(e){var t=this;return(0,r.Z)(function*(){return t.signInResolver(e)})()}}function $n(e,t){var n;const r=(0,i.m9)(e),s=t;return w(t.customData.operationType,r,"argument-error"),w(null===(n=s.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Bn._fromError(r,s)}function zn(e,t){return D(e,"POST","/v2/accounts/mfaEnrollment:start",P(e,t))}class Hn{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>Yt._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new Hn(e)}getSession(){var e=this;return(0,r.Z)(function*(){return jn._fromIdtoken(yield e.user.getIdToken())})()}enroll(e,t){var n=this;return(0,r.Z)(function*(){const r=e,i=yield n.getSession(),s=yield Q(n.user,r._process(n.user.auth,i,t));return yield n.user._updateTokensIfNecessary(s),n.user.reload()})()}unenroll(e){var t=this;return(0,r.Z)(function*(){const n="string"==typeof e?e:e.uid,r=yield t.user.getIdToken(),i=yield Q(t.user,(s=t.user.auth,o={idToken:r,mfaEnrollmentId:n},D(s,"POST","/v2/accounts/mfaEnrollment:withdraw",P(s,o))));var s,o;t.enrolledFactors=t.enrolledFactors.filter(({uid:e})=>e!==n),yield t.user._updateTokensIfNecessary(i);try{yield t.user.reload()}catch(a){if("auth/user-token-expired"!==a.code)throw a}})()}}const Gn=new WeakMap;function Kn(e){const t=(0,i.m9)(e);return Gn.has(t)||Gn.set(t,Hn._fromUser(t)),Gn.get(t)}class Wn{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Jn=(()=>{class e extends Wn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,i.z$)();return ye(e)||Se(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Ee(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,i.w1)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(e,t){var n=()=>super._set,i=this;return(0,r.Z)(function*(){yield n().call(i,e,t),i.localCache[e]=JSON.stringify(t)})()}_get(e){var t=()=>super._get,n=this;return(0,r.Z)(function*(){const r=yield t().call(n,e);return n.localCache[e]=JSON.stringify(r),r})()}_remove(e){var t=()=>super._remove,n=this;return(0,r.Z)(function*(){yield t().call(n,e),delete n.localCache[e]})()}}return e.type="LOCAL",e})(),Yn=(()=>{class e extends Wn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}return e.type="SESSION",e})();let Qn=(()=>{class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;const r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){var t=this;return(0,r.Z)(function*(){const n=e,{eventId:i,eventType:s,data:o}=n.data,a=t.handlersMap[s];if(!(null==a?void 0:a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const u=Array.from(a).map(function(){var e=(0,r.Z)(function*(e){return e(n.origin,o)});return function(t){return e.apply(this,arguments)}}()),c=yield function(e){return Promise.all(e.map(function(){var e=(0,r.Z)(function*(e){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}});return function(t){return e.apply(this,arguments)}}()))}(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:c})})()}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return e.receivers=[],e})();function Xn(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}class er{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,n=50){var i=this;return(0,r.Z)(function*(){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const c=Xn("",20);r.port1.start();const l=setTimeout(()=>{u(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(l),clearTimeout(s),u(new Error("invalid_response"))}}},i.handlers.add(o),r.port1.addEventListener("message",o.onMessage),i.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{o&&i.removeMessageHandler(o)})})()}}function tr(){return window}function nr(){return void 0!==tr().WorkerGlobalScope&&"function"==typeof tr().importScripts}function rr(){return(rr=(0,r.Z)(function*(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(e){return null}})).apply(this,arguments)}const ir="firebaseLocalStorageDb";class sr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function or(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly").objectStore("firebaseLocalStorage")}function ar(){const e=indexedDB.open(ir,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(r){n(r)}}),e.addEventListener("success",(0,r.Z)(function*(){const n=e.result;n.objectStoreNames.contains("firebaseLocalStorage")?t(n):(n.close(),yield function(){const e=indexedDB.deleteDatabase(ir);return new sr(e).toPromise()}(),t(yield ar()))}))})}function ur(e,t,n){return cr.apply(this,arguments)}function cr(){return(cr=(0,r.Z)(function*(e,t,n){const r=or(e,!0).put({fbase_key:t,value:n});return new sr(r).toPromise()})).apply(this,arguments)}function lr(){return(lr=(0,r.Z)(function*(e,t){const n=or(e,!1).get(t),r=yield new sr(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function hr(e,t){const n=or(e,!0).delete(t);return new sr(n).toPromise()}const dr=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var e=this;return(0,r.Z)(function*(){return e.db||(e.db=yield ar()),e.db})()}_withRetries(e){var t=this;return(0,r.Z)(function*(){let n=0;for(;;)try{const n=yield t._openDb();return yield e(n)}catch(r){if(n++>3)throw r;t.db&&(t.db.close(),t.db=void 0)}})()}initializeServiceWorkerMessaging(){var e=this;return(0,r.Z)(function*(){return nr()?e.initializeReceiver():e.initializeSender()})()}initializeReceiver(){var e=this;return(0,r.Z)(function*(){e.receiver=Qn._getInstance(nr()?self:null),e.receiver._subscribe("keyChanged",function(){var t=(0,r.Z)(function*(t,n){return{keyProcessed:(yield e._poll()).includes(n.key)}});return function(e,n){return t.apply(this,arguments)}}()),e.receiver._subscribe("ping",function(){var e=(0,r.Z)(function*(e,t){return["keyChanged"]});return function(t,n){return e.apply(this,arguments)}}())})()}initializeSender(){var e=this;return(0,r.Z)(function*(){var t,n;if(e.activeServiceWorker=yield function(){return rr.apply(this,arguments)}(),!e.activeServiceWorker)return;e.sender=new er(e.activeServiceWorker);const r=yield e.sender._send("ping",{},800);r&&(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(e.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(e){var t=this;return(0,r.Z)(function*(){var n;if(t.sender&&t.activeServiceWorker&&((null===(n=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null)===t.activeServiceWorker)try{yield t.sender._send("keyChanged",{key:e},t.serviceWorkerReceiverAvailable?800:50)}catch(n){}})()}_isAvailable(){return(0,r.Z)(function*(){try{if(!indexedDB)return!1;const e=yield ar();return yield ur(e,"__sak","1"),yield hr(e,"__sak"),!0}catch(e){}return!1})()}_withPendingWrite(e){var t=this;return(0,r.Z)(function*(){t.pendingWrites++;try{yield e()}finally{t.pendingWrites--}})()}_set(e,t){var n=this;return(0,r.Z)(function*(){return n._withPendingWrite((0,r.Z)(function*(){return yield n._withRetries(n=>ur(n,e,t)),n.localCache[e]=t,n.notifyServiceWorker(e)}))})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=yield t._withRetries(t=>function(e,t){return lr.apply(this,arguments)}(t,e));return t.localCache[e]=n,n})()}_remove(e){var t=this;return(0,r.Z)(function*(){return t._withPendingWrite((0,r.Z)(function*(){return yield t._withRetries(t=>hr(t,e)),delete t.localCache[e],t.notifyServiceWorker(e)}))})()}_poll(){var e=this;return(0,r.Z)(function*(){const t=yield e._withRetries(e=>{const t=or(e,!1).getAll();return new sr(t).toPromise()});if(!t)return[];if(0!==e.pendingWrites)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(e.localCache[i])!==JSON.stringify(s)&&(e.notifyListeners(i,s),n.push(i));for(const i of Object.keys(e.localCache))e.localCache[i]&&!r.has(i)&&(e.notifyListeners(i,null),n.push(i));return n})()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){var e=this;this.stopPolling(),this.pollTimer=setInterval((0,r.Z)(function*(){return e._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return e.type="LOCAL",e})();function fr(e,t){return D(e,"POST","/v2/accounts/mfaSignIn:start",P(e,t))}function pr(){return(pr=(0,r.Z)(function*(e){return(yield D(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function gr(e){return new Promise((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=m("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)})}function mr(e){return`__${e}${Math.floor(1e6*Math.random())}`}class yr{constructor(e){this.auth=e,this.counter=1e12,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new vr(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||1e12;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;return(null===(t=this._widgets.get(e||1e12))||void 0===t?void 0:t.getResponse())||""}execute(e){var t=this;return(0,r.Z)(function*(){var n;return null===(n=t._widgets.get(e||1e12))||void 0===n||n.execute(),""})()}}class vr{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;w(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<50;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const br=mr("rcb"),wr=new A(3e4,6e4);class _r{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!tr().grecaptcha}load(e,t=""){return w(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(tr().grecaptcha):new Promise((n,r)=>{const s=tr().setTimeout(()=>{r(m(e,"network-request-failed"))},wr.get());tr()[br]=()=>{tr().clearTimeout(s),delete tr()[br];const i=tr().grecaptcha;if(!i)return void r(m(e,"internal-error"));const o=i.render;i.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(i)},gr(`https://www.google.com/recaptcha/api.js??${(0,i.xO)({onload:br,render:"explicit",hl:t})}`).catch(()=>{clearTimeout(s),r(m(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!tr().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Tr{load(e){return(0,r.Z)(function*(){return new yr(e)})()}clearedOneInstance(){}}const Sr={theme:"light",type:"image"};class Ir{constructor(e,t=Object.assign({},Sr),n){this.parameters=t,this.type="recaptcha",this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=xe(n),this.isInvisible="invisible"===this.parameters.size,w("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;w(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Tr:new _r,this.validateStartingState()}verify(){var e=this;return(0,r.Z)(function*(){e.assertNotDestroyed();const t=yield e.render(),n=e.getAssertedRecaptcha();return n.getResponse(t)||new Promise(r=>{const i=t=>{t&&(e.tokenChangeListeners.delete(i),r(t))};e.tokenChangeListeners.add(i),e.isInvisible&&n.execute(t)})})()}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){w(!this.parameters.sitekey,this.auth,"argument-error"),w(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),w("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){const n=tr()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){w(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var e=this;return(0,r.Z)(function*(){if(yield e.init(),!e.widgetId){let t=e.container;if(!e.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}e.widgetId=e.getAssertedRecaptcha().render(t,e.parameters)}return e.widgetId})()}init(){var e=this;return(0,r.Z)(function*(){w(k()&&!nr(),e.auth,"internal-error"),yield function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),e.recaptcha=yield e._recaptchaLoader.load(e.auth,e.auth.languageCode||void 0);const t=yield function(e){return pr.apply(this,arguments)}(e.auth);w(t,e.auth,"internal-error"),e.parameters.sitekey=t})()}getAssertedRecaptcha(){return w(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Er{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=lt._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}function kr(e,t,n){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,r.Z)(function*(e,t,n){const r=xe(e),s=yield Rr(r,t,(0,i.m9)(n));return new Er(s,e=>qt(r,e))})).apply(this,arguments)}function Ar(e,t,n){return xr.apply(this,arguments)}function xr(){return(xr=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);yield Lt(!1,r,"phone");const s=yield Rr(r.auth,t,(0,i.m9)(n));return new Er(s,e=>Bt(r,e))})).apply(this,arguments)}function Nr(e,t,n){return Or.apply(this,arguments)}function Or(){return(Or=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s=yield Rr(r.auth,t,(0,i.m9)(n));return new Er(s,e=>zt(r,e))})).apply(this,arguments)}function Rr(e,t,n){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,r.Z)(function*(e,t,n){var r;const i=yield n.verify();try{let s;if(w("string"==typeof i,e,"argument-error"),w("recaptcha"===n.type,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s)return w("enroll"===t.type,e,"internal-error"),(yield zn(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{w("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;return w(n,e,"missing-multi-factor-info"),(yield fr(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=yield it(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}})).apply(this,arguments)}function Dr(e,t){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,r.Z)(function*(e,t){yield Pt((0,i.m9)(e),t)})).apply(this,arguments)}let Mr=(()=>{class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=xe(t)}verifyPhoneNumber(e,t){return Rr(this.auth,e,(0,i.m9)(t))}static credential(e,t){return lt._fromVerification(e,t)}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?lt._fromTokenResponse(t,n):null}}return e.PROVIDER_ID="phone",e.PHONE_SIGN_IN_METHOD="phone",e})();function Ur(e,t){return t?I(t):(w(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class Fr extends De{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tt(e,this._buildIdpRequest())}_linkToIdToken(e,t){return tt(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return tt(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Vr(e){return Vt(e.auth,new Fr(e),e.bypassAuthState)}function Zr(e){const{auth:t,user:n}=e;return w(n,t,"internal-error"),Ut(n,new Fr(e),e.bypassAuthState)}function qr(e){return jr.apply(this,arguments)}function jr(){return(jr=(0,r.Z)(function*(e){const{auth:t,user:n}=e;return w(n,t,"internal-error"),Pt(n,new Fr(e),e.bypassAuthState)})).apply(this,arguments)}class Br{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,r.Z)(function*(t,n){e.pendingPromise={resolve:t,reject:n};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(r){e.reject(r)}});return function(e,n){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,r.Z)(function*(){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o)return void t.reject(o);const u={auth:t.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(a)(u))}catch(c){t.reject(c)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Vr;case"linkViaPopup":case"linkViaRedirect":return qr;case"reauthViaPopup":case"reauthViaRedirect":return Zr;default:g(this.auth,"internal-error")}}resolve(e){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $r=new A(2e3,1e4);function zr(e,t,n){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,r.Z)(function*(e,t,n){const r=xe(e);v(e,t,ft);const i=Ur(r,n);return new Yr(r,"signInViaPopup",t,i).executeNotNull()})).apply(this,arguments)}function Gr(e,t,n){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);v(r.auth,t,ft);const s=Ur(r.auth,n);return new Yr(r.auth,"reauthViaPopup",t,s,r).executeNotNull()})).apply(this,arguments)}function Wr(e,t,n){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);v(r.auth,t,ft);const s=Ur(r.auth,n);return new Yr(r.auth,"linkViaPopup",t,s,r).executeNotNull()})).apply(this,arguments)}let Yr=(()=>{class e extends Br{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}executeNotNull(){var e=this;return(0,r.Z)(function*(){const t=yield e.execute();return w(t,e.auth,"internal-error"),t})()}onExecution(){var e=this;return(0,r.Z)(function*(){T(1===e.filter.length,"Popup operations only handle one event");const t=Xn();e.authWindow=yield e.resolver._openPopup(e.auth,e.provider,e.filter[0],t),e.authWindow.associatedEvent=t,e.resolver._originValidation(e.auth).catch(t=>{e.reject(t)}),e.resolver._isIframeWebStorageSupported(e.auth,t=>{t||e.reject(m(e.auth,"web-storage-unsupported"))}),e.pollUserCancellation()})()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(m(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;this.pollId=(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(m(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(e,$r.get())};e()}}return e.currentPopupAction=null,e})();const Qr=new Map;class Xr extends Br{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,r.Z)(function*(){let n=Qr.get(t.auth._key());if(!n){try{const r=(yield function(e,t){return ei.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;n=()=>Promise.resolve(r)}catch(r){n=()=>Promise.reject(r)}Qr.set(t.auth._key(),n)}return t.bypassAuthState||Qr.set(t.auth._key(),()=>Promise.resolve(null)),n()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,n=this;return(0,r.Z)(function*(){if("signInViaRedirect"===e.type)return t().call(n,e);if("unknown"!==e.type){if(e.eventId){const r=yield n.auth._redirectUserForId(e.eventId);if(r)return n.user=r,t().call(n,e);n.resolve(null)}}else n.resolve(null)})()}onExecution(){return(0,r.Z)(function*(){})()}cleanUp(){}}function ei(){return(ei=(0,r.Z)(function*(e,t){const n=oi(t),r=si(e);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function ti(e,t){return ni.apply(this,arguments)}function ni(){return(ni=(0,r.Z)(function*(e,t){return si(e)._set(oi(t),"true")})).apply(this,arguments)}function ri(){Qr.clear()}function ii(e,t){Qr.set(e._key(),t)}function si(e){return I(e._redirectPersistence)}function oi(e){return fe("pendingRedirect",e.config.apiKey,e.name)}function ai(e,t,n){return function(e,t,n){return ui.apply(this,arguments)}(e,t,n)}function ui(){return(ui=(0,r.Z)(function*(e,t,n){const r=xe(e);v(e,t,ft);const i=Ur(r,n);return yield ti(i,r),i._openRedirect(r,t,"signInViaRedirect")})).apply(this,arguments)}function ci(e,t,n){return function(e,t,n){return li.apply(this,arguments)}(e,t,n)}function li(){return(li=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);v(r.auth,t,ft);const s=Ur(r.auth,n);yield ti(s,r.auth);const o=yield yi(r);return s._openRedirect(r.auth,t,"reauthViaRedirect",o)})).apply(this,arguments)}function hi(e,t,n){return function(e,t,n){return di.apply(this,arguments)}(e,t,n)}function di(){return(di=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);v(r.auth,t,ft);const s=Ur(r.auth,n);yield Lt(!1,r,t.providerId),yield ti(s,r.auth);const o=yield yi(r);return s._openRedirect(r.auth,t,"linkViaRedirect",o)})).apply(this,arguments)}function fi(e,t){return pi.apply(this,arguments)}function pi(){return(pi=(0,r.Z)(function*(e,t){return yield xe(e)._initializationPromise,gi(e,t,!1)})).apply(this,arguments)}function gi(e,t){return mi.apply(this,arguments)}function mi(){return(mi=(0,r.Z)(function*(e,t,n=!1){const r=xe(e),i=Ur(r,t),s=new Xr(r,i,n),o=yield s.execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,t)),o})).apply(this,arguments)}function yi(e){return vi.apply(this,arguments)}function vi(){return(vi=(0,r.Z)(function*(e){const t=Xn(`${e.uid}:::`);return e._redirectEventId=t,yield e.auth._setRedirectUser(e),yield e.auth._persistUserIfCurrent(e),t})).apply(this,arguments)}class bi{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _i(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!_i(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(m(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(wi(e))}saveEventToCache(e){this.cachedEventUids.add(wi(e)),this.lastProcessedEventTime=Date.now()}}function wi(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function _i({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}function Ti(e){return Si.apply(this,arguments)}function Si(){return(Si=(0,r.Z)(function*(e,t={}){return D(e,"GET","/v1/projects",t)})).apply(this,arguments)}const Ii=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ei=/^https?/;function ki(){return(ki=(0,r.Z)(function*(e){if(e.config.emulator)return;const{authorizedDomains:t}=yield Ti(e);for(const r of t)try{if(Ci(r))return}catch(n){}g(e,"unauthorized-domain")})).apply(this,arguments)}function Ci(e){const t=E(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ei.test(n))return!1;if(Ii.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ai=new A(3e4,6e4);function xi(){const e=tr().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Ni=null;function Oi(e){return Ni=Ni||function(e){return new Promise((t,n)=>{var r,i,s;function o(){xi(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{xi(),n(m(e,"network-request-failed"))},timeout:Ai.get()})}if(null===(i=null===(r=tr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=tr().gapi)||void 0===s?void 0:s.load)){const t=mr("iframefcb");return tr()[t]=()=>{gapi.load?o():n(m(e,"network-request-failed"))},gr(`https://apis.google.com/js/api.js?onload=${t}`).catch(e=>n(e))}o()}}).catch(e=>{throw Ni=null,e})}(e),Ni}const Ri=new A(5e3,15e3),Pi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Di=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Li(e){const t=e.config;w(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?x(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:s.SDK_VERSION},o=Di.get(e.config.apiHost);o&&(r.eid=o);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${(0,i.xO)(r).slice(1)}`}function Mi(){return(Mi=(0,r.Z)(function*(e){const t=yield Oi(e),n=tr().gapi;return w(n,e,"internal-error"),t.open({where:document.body,url:Li(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pi,dontclear:!0},t=>new Promise(function(){var n=(0,r.Z)(function*(n,r){yield t.restyle({setHideOnLeave:!1});const i=m(e,"network-request-failed"),s=tr().setTimeout(()=>{r(i)},Ri.get());function o(){tr().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})});return function(e,t){return n.apply(this,arguments)}}()))})).apply(this,arguments)}const Ui={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Fi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Vi(e,t,n,r,o,a){w(e.config.authDomain,e,"auth-domain-config-required"),w(e.config.apiKey,e,"invalid-api-key");const u={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:s.SDK_VERSION,eventId:o};if(t instanceof ft){t.setDefaultLanguage(e.languageCode),u.providerId=t.providerId||"",(0,i.xb)(t.getCustomParameters())||(u.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))u[e]=t}if(t instanceof pt){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(u.scopes=e.join(","))}e.tenantId&&(u.tid=e.tenantId);const c=u;for(const i of Object.keys(c))void 0===c[i]&&delete c[i];return`${function({config:e}){return e.emulator?x(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,i.xO)(c).slice(1)}`}const Zi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yn,this._completeRedirectFn=gi,this._overrideRedirectResult=ii}_openPopup(e,t,n,s){var o=this;return(0,r.Z)(function*(){var r;T(null===(r=o.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");const a=Vi(e,t,n,E(),s);return function(e,t,n,r=500,s=600){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},Ui),{width:r.toString(),height:s.toString(),top:o,left:a}),l=(0,i.z$)().toLowerCase();n&&(u=ve(l)?"_blank":n),me(l)&&(t=t||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=(0,i.z$)()){var t;return Se(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==u)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new Fi(null);const d=window.open(t||"",u,h);w(d,e,"popup-blocked");try{d.focus()}catch(f){}return new Fi(d)}(e,a,Xn())})()}_openRedirect(e,t,n,i){var s=this;return(0,r.Z)(function*(){var r;return yield s._originValidation(e),r=Vi(e,t,n,E(),i),tr().location.href=r,new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(T(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}initAndGetManager(e){var t=this;return(0,r.Z)(function*(){const n=yield function(e){return Mi.apply(this,arguments)}(e),r=new bi(e);return n.register("authEvent",t=>(w(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:r},t.iframes[e._key()]=n,r})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send("webStorageSupport",{type:"webStorageSupport"},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),g(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return ki.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ee()||ye()||Se()}};class qi extends class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return _("unexpected MultiFactorSessionType")}}}{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new qi(e)}_finalizeEnroll(e,t,n){return function(e,t){return D(e,"POST","/v2/accounts/mfaEnrollment:finalize",P(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return D(e,"POST","/v2/accounts/mfaSignIn:finalize",P(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ji=(()=>{class e{constructor(){}static assertion(e){return qi._fromCredential(e)}}return e.FACTOR_ID="phone",e})();class Bi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,r.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){w(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,s._registerComponent)(new u.wA("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),{apiKey:i,authDomain:s}=n.options;return((e,n)=>{w(i&&!i.includes(":"),"invalid-api-key",{appName:e.name}),w(!(null==s?void 0:s.includes(":")),"argument-error",{appName:e.name});const r={apiKey:i,authDomain:s,clientPlatform:"Browser",apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ke("Browser")},o=new Ae(e,n,r);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(I);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(o,t),o})(n,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,s._registerComponent)(new u.wA("auth-internal",e=>{return t=xe(e.getProvider("auth").getImmediate()),new Bi(t);var t},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,s.registerVersion)("@firebase/auth","0.20.1",void 0),(0,s.registerVersion)("@firebase/auth","0.20.1","esm2017")},8604:function(e,t,n){"use strict";n.d(t,{wA:function(){return s},H0:function(){return a}});var r=n(6304),i=n(3854);class s{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new i.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,r.Z)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(i)&&s.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,"[DEFAULT]"===r?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(i){}var r;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:"[DEFAULT]":e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},9306:function(e,t,n){"use strict";n.d(t,{in:function(){return i},Yd:function(){return c},Ub:function(){return l},Am:function(){return h}});const r=[];var i=(()=>(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={})),i))();const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},u=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=a[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class c{constructor(e){this.name=e,this._logLevel=o,this._logHandler=u,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...e),this._logHandler(this,i.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...e),this._logHandler(this,i.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,i.INFO,...e),this._logHandler(this,i.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,i.WARN,...e),this._logHandler(this,i.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...e),this._logHandler(this,i.ERROR,...e)}}function l(e){r.forEach(t=>{t.setLogLevel(e)})}function h(e,t){for(const n of r){let r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:(t,n,...s)=>{const o=s.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(e=>e).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:i[n].toLowerCase(),message:o,args:s,type:t.name})}}}},3854:function(e,t,n){"use strict";n.d(t,{BH:function(){return u},LL:function(){return I},ZR:function(){return S},zI:function(){return T},US:function(){return i},tV:function(){return o},L:function(){return s},$s:function(){return M},r3:function(){return k},Sg:function(){return c},ne:function(){return P},vZ:function(){return A},ZB:function(){return a},pd:function(){return R},m9:function(){return U},z$:function(){return l},jU:function(){return f},ru:function(){return p},d:function(){return m},xb:function(){return C},w1:function(){return y},hl:function(){return w},uI:function(){return h},UG:function(){return d},b$:function(){return g},G6:function(){return b},Mn:function(){return v},xO:function(){return N},zd:function(){return O},eu:function(){return _}});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,u=a?e[i+2]:0;let c=(15&o)<<2|u>>6,l=63&u;a||(l=64,s||(c=64)),r.push(n[t>>2],n[(3&t)<<4|o>>4],n[c],n[l])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw Error();r.push(t<<2|s>>4),64!==o&&(r.push(s<<4&240|o>>2),64!==a&&r.push(o<<6&192|a))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},s=function(e){return function(e){const t=r(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")},o=function(e){try{return i.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function a(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=a(e[n],t[n]));return e}class u{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function c(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[s(JSON.stringify({alg:"none",type:"JWT"})),s(JSON.stringify(o)),""].join(".")}function l(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function h(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(l())}function d(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function f(){return"object"==typeof self&&self.self===self}function p(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function g(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function m(){return l().indexOf("Electron/")>=0}function y(){const e=l();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function v(){return l().indexOf("MSAppHost/")>=0}function b(){return!d()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function w(){return"object"==typeof indexedDB}function _(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}function T(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class S extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,S.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,I.prototype.create)}}class I{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(E,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error";return new S(r,`${this.serviceName}: ${s} (${r}).`,n)}}const E=/\{\$([^}]+)}/g;function k(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function C(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function A(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(x(n)&&x(s)){if(!A(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function x(e){return null!==e&&"object"==typeof e}function N(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function O(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function R(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function P(e,t){const n=new D(e,t);return n.subscribe.bind(n)}class D{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of["next","error","complete"])if(n in e&&"function"==typeof e[n])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=L),void 0===r.error&&(r.error=L),void 0===r.complete&&(r.complete=L);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function L(){}function M(e,t=1e3,n=2){const r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function U(e){return e&&e._delegate?e._delegate:e}},2329:function(e,t,n){"use strict";n.d(t,{Mq:function(){return r.getApp},C6:function(){return r.getApps},ZF:function(){return r.initializeApp},KN:function(){return r.registerVersion}});var r=n(279);(0,r.registerVersion)("firebase","9.8.1","app")},7841:function(e,t,n){"use strict";n.d(t,{Z:function(){return r.Z}});var r=n(156);r.Z.registerVersion("firebase","9.8.1","app-compat")},4828:function(e,t,n){"use strict";n.r(t);var r=n(6304),i=n(156),s=n(8882),o=n(3854),a=(n(279),n(9306),n(8604));function u(){return window}function c(){return(c=(0,r.Z)(function*(e,t,n){var r;const{BuildInfo:i}=u();(0,s.aq)(t.sessionId,"AuthEvent did not contain a session ID");const o=yield d(t.sessionId),a={};return(0,s.ar)()?a.ibi=i.packageName:(0,s.as)()?a.apn=i.packageName:(0,s.at)(e,"operation-not-supported-in-this-environment"),i.displayName&&(a.appDisplayName=i.displayName),a.sessionId=o,(0,s.au)(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,a)})).apply(this,arguments)}function l(){return(l=(0,r.Z)(function*(e){const{BuildInfo:t}=u(),n={};(0,s.ar)()?n.iosBundleId=t.packageName:(0,s.as)()?n.androidPackageName=t.packageName:(0,s.at)(e,"operation-not-supported-in-this-environment"),yield(0,s.av)(e,n)})).apply(this,arguments)}function h(){return(h=(0,r.Z)(function*(e,t,n){const{cordova:r}=u();let i=()=>{};try{yield new Promise((o,a)=>{let u=null;function c(){var e;o();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function l(){u||(u=window.setTimeout(()=>{a((0,s.aw)(e,"redirect-cancelled-by-user"))},2e3))}function h(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}t.addPassiveListener(c),document.addEventListener("resume",l,!1),(0,s.as)()&&document.addEventListener("visibilitychange",h,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",h,!1),u&&window.clearTimeout(u)}})}finally{i()}})).apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)(function*(e){const t=p(e),n=yield crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function p(e){if((0,s.aq)(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}class g extends s.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}initialized(){var e=this;return(0,r.Z)(function*(){yield e.initPromise})()}}function m(e){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)(function*(e){const t=yield b()._get(w(e));return t&&(yield b()._remove(w(e))),t})).apply(this,arguments)}function v(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function b(){return(0,s.ay)(s.b)}function w(e){return(0,s.az)("authEvent",e.config.apiKey,e.name)}function _(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return(0,o.zd)(n.join("?"))}function T(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,s.aw)("no-auth-event")}}function S(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function I(e=(0,o.z$)()){return!("file:"!==S()&&"ionic:"!==S()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function E(){try{const e=self.localStorage,t=s.aI();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(e=(0,o.z$)()){return(0,o.w1)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=(0,o.z$)()){return/Edge\/\d+/.test(e)}(e)}()||(0,o.hl)()}catch(e){return k()&&(0,o.hl)()}return!1}function k(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function C(){return("http:"===S()||"https:"===S()||(0,o.ru)()||I())&&!((0,o.b$)()||(0,o.UG)())&&E()&&!k()}function A(){return I()&&"undefined"!=typeof document}function x(){return(x=(0,r.Z)(function*(){return!!A()&&new Promise(e=>{const t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})})).apply(this,arguments)}const N={LOCAL:"local",NONE:"none",SESSION:"session"},O=s.ax;function R(e){return P.apply(this,arguments)}function P(){return(P=(0,r.Z)(function*(e){yield e._initializationPromise;const t=D(),n=s.az("persistence",e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())})).apply(this,arguments)}function D(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const L=s.ax;class M{constructor(){this.browserResolver=s.ay(s.k),this.cordovaResolver=s.ay(class{constructor(){this._redirectPersistence=s.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=s.aB,this._overrideRedirectResult=s.aC}_initialize(e){var t=this;return(0,r.Z)(function*(){const n=e._key();let r=t.eventManagers.get(n);return r||(r=new g(e),t.eventManagers.set(n,r),t.attachCallbackListeners(e,r)),r})()}_openPopup(e){(0,s.at)(e,"operation-not-supported-in-this-environment")}_openRedirect(e,t,n,i){var o=this;return(0,r.Z)(function*(){!function(e){var t,n,r,i,o,a,c,l,h,d;const f=u();(0,s.ax)("function"==typeof(null===(t=null==f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,s.ax)(void 0!==(null===(n=null==f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,s.ax)("function"==typeof(null===(o=null===(i=null===(r=null==f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,s.ax)("function"==typeof(null===(l=null===(c=null===(a=null==f?void 0:f.cordova)||void 0===a?void 0:a.plugins)||void 0===c?void 0:c.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,s.ax)("function"==typeof(null===(d=null===(h=null==f?void 0:f.cordova)||void 0===h?void 0:h.InAppBrowser)||void 0===d?void 0:d.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const r=yield o._initialize(e);yield r.initialized(),r.resetRedirect(),(0,s.aD)(),yield o._originValidation(e);const a=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:v(),postBody:null,tenantId:e.tenantId,error:(0,s.aw)(e,"no-auth-event")}}(e,n,i);yield function(e,t){return b()._set(w(e),t)}(e,a);const l=yield function(e,t,n){return c.apply(this,arguments)}(e,a,t),d=yield function(e){const{cordova:t}=u();return new Promise(n=>{t.plugins.browsertab.isAvailable(r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,(0,s.ap)()?"_blank":"_system","location=yes"),n(i)})})}(l);return function(e,t,n){return h.apply(this,arguments)}(e,r,d)})()}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return l.apply(this,arguments)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:i,BuildInfo:o}=u(),a=setTimeout((0,r.Z)(function*(){yield m(e),t.onEvent(T())}),500),c=function(){var n=(0,r.Z)(function*(n){clearTimeout(a);const r=yield m(e);let i=null;r&&(null==n?void 0:n.url)&&(i=function(e,t){var n,r;const i=function(e){const t=_(e),n=t.link?decodeURIComponent(t.link):void 0,r=_(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return _(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=_(i),o=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,a=null===(r=null===(n=null==o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=a?(0,s.aw)(a):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(r,n.url)),t.onEvent(i||T())});return function(e){return n.apply(this,arguments)}}();void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,c);const l=i,h=`${o.packageName.toLowerCase()}://`;u().handleOpenURL=function(){var e=(0,r.Z)(function*(e){if(e.toLowerCase().startsWith(h)&&c({url:e}),"function"==typeof l)try{l(e)}catch(t){console.error(t)}});return function(t){return e.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=s.a,this._completeRedirectFn=s.aB,this._overrideRedirectResult=s.aC}_initialize(e){var t=this;return(0,r.Z)(function*(){return yield t.selectUnderlyingResolver(),t.assertedUnderlyingResolver._initialize(e)})()}_openPopup(e,t,n,i){var s=this;return(0,r.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openPopup(e,t,n,i)})()}_openRedirect(e,t,n,i){var s=this;return(0,r.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openRedirect(e,t,n,i)})()}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return A()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return L(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var e=this;return(0,r.Z)(function*(){if(e.underlyingResolver)return;const t=yield function(){return x.apply(this,arguments)}();e.underlyingResolver=t?e.cordovaResolver:e.browserResolver})()}}function U(e){return e.unwrap()}function F(e){const{_tokenResponse:t}=e instanceof o.ZR?e.customData:e;if(!t)return null;if(!(e instanceof o.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return s.P.credentialFromResult(e);const n=t.providerId;if(!n||n===s.o.PASSWORD)return null;let r;switch(n){case s.o.GOOGLE:r=s.Q;break;case s.o.FACEBOOK:r=s.N;break;case s.o.GITHUB:r=s.T;break;case s.o.TWITTER:r=s.W;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:o,pendingToken:a,nonce:u}=t;return i||o||e||a?a?n.startsWith("saml.")?s.aL._create(n,a):s.J._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:e,accessToken:i}):new s.U(n).credential({idToken:e,accessToken:i,rawNonce:u}):null}return e instanceof o.ZR?r.credentialFromError(e):r.credentialFromResult(e)}function V(e,t){return t.catch(t=>{throw t instanceof o.ZR&&function(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new j(e,s.an(e,t));else if(r){const e=F(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}(e,t),t}).then(e=>{const t=e.user;return{operationType:e.operationType,credential:(n=e,F(n)),additionalUserInfo:s.al(e),user:B.getOrCreate(t)};var n})}function Z(e,t){return q.apply(this,arguments)}function q(){return(q=(0,r.Z)(function*(e,t){const n=yield t;return{verificationId:n.verificationId,confirm:t=>V(e,n.confirm(t))}})).apply(this,arguments)}class j{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return V(U(this.auth),this.resolver.resolveSignIn(e))}}class B{constructor(e){this._delegate=e,this.multiFactor=s.ao(e)}static getOrCreate(e){return B.USER_MAP.has(e)||B.USER_MAP.set(e,new B(e)),B.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}linkWithCredential(e){var t=this;return(0,r.Z)(function*(){return V(t.auth,s.Z(t._delegate,e))})()}linkWithPhoneNumber(e,t){var n=this;return(0,r.Z)(function*(){return Z(n.auth,s.l(n._delegate,e,t))})()}linkWithPopup(e){var t=this;return(0,r.Z)(function*(){return V(t.auth,s.d(t._delegate,e,M))})()}linkWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield R(s.aE(t.auth)),s.g(t._delegate,e,M)})()}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}reauthenticateWithCredential(e){var t=this;return(0,r.Z)(function*(){return V(t.auth,s._(t._delegate,e))})()}reauthenticateWithPhoneNumber(e,t){return Z(this.auth,s.r(this._delegate,e,t))}reauthenticateWithPopup(e){return V(this.auth,s.e(this._delegate,e,M))}reauthenticateWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield R(s.aE(t.auth)),s.h(t._delegate,e,M)})()}sendEmailVerification(e){return s.ab(this._delegate,e)}unlink(e){var t=this;return(0,r.Z)(function*(){return yield s.ak(t._delegate,e),t})()}updateEmail(e){return s.ag(this._delegate,e)}updatePassword(e){return s.ah(this._delegate,e)}updatePhoneNumber(e){return s.u(this._delegate,e)}updateProfile(e){return s.af(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return s.ac(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}B.USER_MAP=new WeakMap;const $=s.ax;let z=(()=>{class e{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;$(n,"invalid-api-key",{appName:e.name}),$(n,"invalid-api-key",{appName:e.name});const r="undefined"!=typeof window?M:void 0;this._delegate=t.initialize({options:{persistence:G(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(s.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?B.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){s.G(this._delegate,e,t)}applyActionCode(e){return s.a2(this._delegate,e)}checkActionCode(e){return s.a3(this._delegate,e)}confirmPasswordReset(e,t){return s.a1(this._delegate,e,t)}createUserWithEmailAndPassword(e,t){var n=this;return(0,r.Z)(function*(){return V(n._delegate,s.a5(n._delegate,e,t))})()}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return s.aa(this._delegate,e)}isSignInWithEmailLink(e){return s.a8(this._delegate,e)}getRedirectResult(){var e=this;return(0,r.Z)(function*(){$(C(),e._delegate,"operation-not-supported-in-this-environment");const t=yield s.j(e._delegate,M);return t?V(e._delegate,Promise.resolve(t)):{credential:null,user:null}})()}addFrameworkForLogging(e){!function(e,t){(0,s.aE)(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=H(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=H(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return s.a7(this._delegate,e,t)}sendPasswordResetEmail(e,t){return s.a0(this._delegate,e,t||void 0)}setPersistence(e){var t=this;return(0,r.Z)(function*(){let n;switch(function(e,t){O(Object.values(N).includes(t),e,"invalid-persistence-type"),(0,o.b$)()?O(t!==N.SESSION,e,"unsupported-persistence-type"):(0,o.UG)()?O(t===N.NONE,e,"unsupported-persistence-type"):k()?O(t===N.NONE||t===N.LOCAL&&(0,o.hl)(),e,"unsupported-persistence-type"):O(t===N.NONE||E(),e,"unsupported-persistence-type")}(t._delegate,e),e){case N.SESSION:n=s.a;break;case N.LOCAL:n=(yield s.ay(s.i)._isAvailable())?s.i:s.b;break;case N.NONE:n=s.L;break;default:return s.at("argument-error",{appName:t._delegate.name})}return t._delegate.setPersistence(n)})()}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return V(this._delegate,s.X(this._delegate))}signInWithCredential(e){return V(this._delegate,s.Y(this._delegate,e))}signInWithCustomToken(e){return V(this._delegate,s.$(this._delegate,e))}signInWithEmailAndPassword(e,t){return V(this._delegate,s.a6(this._delegate,e,t))}signInWithEmailLink(e,t){return V(this._delegate,s.a9(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Z(this._delegate,s.s(this._delegate,e,t))}signInWithPopup(e){var t=this;return(0,r.Z)(function*(){return $(C(),t._delegate,"operation-not-supported-in-this-environment"),V(t._delegate,s.c(t._delegate,e,M))})()}signInWithRedirect(e){var t=this;return(0,r.Z)(function*(){return $(C(),t._delegate,"operation-not-supported-in-this-environment"),yield R(t._delegate),s.f(t._delegate,e,M)})()}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return s.a4(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return e.Persistence=N,e})();function H(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&B.getOrCreate(e)),error:t,complete:n}}function G(e,t){const n=function(e,t){const n=D();if(!n)return[];const r=s.az("persistence",e,t);switch(n.getItem(r)){case N.NONE:return[s.L];case N.LOCAL:return[s.i,s.a];case N.SESSION:return[s.a];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(s.i)||n.push(s.i),"undefined"!=typeof window)for(const r of[s.b,s.a])n.includes(r)||n.push(r);return n.includes(s.L)||n.push(s.L),n}class K{constructor(){this.providerId="phone",this._delegate=new s.P(U(i.Z.auth()))}static credential(e,t){return s.P.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}K.PHONE_SIGN_IN_METHOD=s.P.PHONE_SIGN_IN_METHOD,K.PROVIDER_ID=s.P.PROVIDER_ID;const W=s.ax;var J;(J=i.Z).INTERNAL.registerComponent(new a.wA("auth-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new z(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:s.A.EMAIL_SIGNIN,PASSWORD_RESET:s.A.PASSWORD_RESET,RECOVER_EMAIL:s.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:s.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:s.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:s.A.VERIFY_EMAIL}},EmailAuthProvider:s.M,FacebookAuthProvider:s.N,GithubAuthProvider:s.T,GoogleAuthProvider:s.Q,OAuthProvider:s.U,SAMLAuthProvider:s.V,PhoneAuthProvider:K,PhoneMultiFactorGenerator:s.m,RecaptchaVerifier:class{constructor(e,t,n=i.Z.app()){var r;W(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new s.R(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:s.W,Auth:z,AuthCredential:s.H,Error:o.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),J.registerVersion("@firebase/auth-compat","0.2.14")},250:function(e,t){"use strict";var n=function(){function e(t){if(!t)throw new TypeError("Invalid argument; `value` has no value.");this.value=e.EMPTY,t&&e.isGuid(t)&&(this.value=t)}return e.isGuid=function(t){var n=t.toString();return t&&(t instanceof e||e.validator.test(n))},e.create=function(){return new e([e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-"))},e.createEmpty=function(){return new e("emptyguid")},e.parse=function(t){return new e(t)},e.raw=function(){return[e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-")},e.gen=function(e){for(var t="",n=0;n<e;n++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t},e.prototype.equals=function(t){return e.isGuid(t)&&this.value===t.toString()},e.prototype.isEmpty=function(){return this.value===e.EMPTY},e.prototype.toString=function(){return this.value},e.prototype.toJSON=function(){return{value:this.value}},e.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),e.EMPTY="00000000-0000-0000-0000-000000000000",e}();t.i=n},6508:function(e,t,n){"use strict";n.d(t,{Lj:function(){return g},X3:function(){return p}});var r=n(6304);let i,s;const o=new WeakMap,a=new WeakMap,u=new WeakMap,c=new WeakMap,l=new WeakMap;let h={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return a.get(e);if("objectStoreNames"===t)return e.objectStoreNames||u.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return d(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function d(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(d(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&o.set(t,e)}).catch(()=>{}),l.set(t,e),t}(e);if(c.has(e))return c.get(e);const t=function(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(f(this),e),d(o.get(this))}:function(...e){return d(t.apply(f(this),e))}:function(e,...n){const r=t.call(f(this),e,...n);return u.set(r,e.sort?e.sort():[e]),d(r)}:(e instanceof IDBTransaction&&function(e){if(a.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});a.set(e,t)}(e),n=e,(i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>n instanceof e)?new Proxy(e,h):e);var t,n}(e);return t!==e&&(c.set(e,t),l.set(t,e)),t}const f=e=>l.get(e);function p(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=d(o);return r&&o.addEventListener("upgradeneeded",e=>{r(d(o.result),e.oldVersion,e.newVersion,d(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function g(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",()=>t()),d(n).then(()=>{})}const m=["get","getKey","getAll","getAllKeys","count"],y=["put","add","delete","clear"],v=new Map;function b(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(v.get(t))return v.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=y.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!s&&!m.includes(n))return;const o=function(){var e=(0,r.Z)(function*(e,...t){const r=this.transaction(e,s?"readwrite":"readonly");let o=r.store;return i&&(o=o.index(t.shift())),(yield Promise.all([o[n](...t),s&&r.done]))[0]});return function(t){return e.apply(this,arguments)}}();return v.set(t,o),o}var w;w=h,h={...w,get:(e,t,n)=>b(e,t)||w.get(e,t,n),has:(e,t)=>!!b(e,t)||w.has(e,t)}},3098:function(e,t,n){"use strict";n.d(t,{P:function(){return o}});var r=n(9193),i=n(5917),s=n(205);class o{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return(0,i.of)(this.value);case"E":return(0,s._)(this.error);case"C":return(0,r.c)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new o("N",e):o.undefinedValueNotification}static createError(e){return new o("E",void 0,e)}static createComplete(){return o.completeNotification}}o.completeNotification=new o("C"),o.undefinedValueNotification=new o("N",void 0)},7574:function(e,t,n){"use strict";n.d(t,{y:function(){return c}});var r=n(7393),i=n(9181),s=n(6490),o=n(6554),a=n(4487),u=n(2494);let c=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:o}=this,a=function(e,t,n){if(e){if(e instanceof r.L)return e;if(e[i.b])return e[i.b]()}return e||t||n?new r.L(e,t,n):new r.L(s.c)}(e,t,n);if(a.add(o?o.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(e){try{return this._subscribe(e)}catch(t){u.v.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:i}=e;if(t||i)return!1;e=n&&n instanceof r.L?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=l(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[o.L](){return this}pipe(...e){return 0===e.length?this:(0===(t=e).length?a.y:1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)})(this);var t}toPromise(e){return new(e=l(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function l(e){if(e||(e=u.v.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},6490:function(e,t,n){"use strict";n.d(t,{c:function(){return s}});var r=n(2494),i=n(4449);const s={closed:!0,next(e){},error(e){if(r.v.useDeprecatedSynchronousErrorHandling)throw e;(0,i.z)(e)},complete(){}}},9765:function(e,t,n){"use strict";n.d(t,{Yc:function(){return c},xQ:function(){return l}});var r=n(7574),i=n(7393),s=n(5319),o=n(7971),a=n(8858),u=n(9181);class c extends i.L{constructor(e){super(e),this.destination=e}}let l=(()=>{class e extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(e){const t=new h(this,this);return t.operator=e,t}next(e){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].next(e)}}error(e){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new o.N;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new o.N;return this.hasError?(e.error(this.thrownError),s.w.EMPTY):this.isStopped?(e.complete(),s.w.EMPTY):(this.observers.push(e),new a.W(this,e))}asObservable(){const e=new r.y;return e.source=this,e}}return e.create=(e,t)=>new h(e,t),e})();class h extends l{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):s.w.EMPTY}}},8858:function(e,t,n){"use strict";n.d(t,{W:function(){return i}});var r=n(5319);class i extends r.w{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},7393:function(e,t,n){"use strict";n.d(t,{L:function(){return c}});var r=n(9105),i=n(6490),s=n(5319),o=n(9181),a=n(2494),u=n(4449);class c extends s.w{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!e){this.destination=i.c;break}if("object"==typeof e){e instanceof c?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,e,t,n)}}[o.b](){return this}static create(e,t,n){const r=new c(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class l extends c{constructor(e,t,n,s){let o;super(),this._parentSubscriber=e;let a=this;(0,r.m)(t)?o=t:t&&(o=t.next,n=t.error,s=t.complete,t!==i.c&&(a=Object.create(t),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,u.z)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,u.z)(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(e,t,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}},5319:function(e,t,n){"use strict";n.d(t,{w:function(){return a}});var r=n(9796),i=n(1555),s=n(9105);const o=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();class a{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:n,_unsubscribe:u,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof a)t.remove(this);else if(null!==t)for(let r=0;r<t.length;++r)t[r].remove(this);if((0,s.m)(u)){n&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){e=h instanceof o?c(h.errors):[h]}}if((0,r.k)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if((0,i.K)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof o?e=e.concat(c(h.errors)):e.push(h)}}}if(e)throw new o(e)}add(e){let t=e;if(!e)return a.EMPTY;switch(typeof e){case"function":t=new a(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof a)){const e=t;t=new a,t._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:n}=t;if(null===n)t._parentOrParents=this;else if(n instanceof a){if(n===this)return t;t._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return t;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}var u;function c(e){return e.reduce((e,t)=>e.concat(t instanceof o?t.errors:t),[])}a.EMPTY=((u=new a).closed=!0,u)},2494:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:function(e,t,n){"use strict";n.d(t,{IY:function(){return o},Ds:function(){return a},ft:function(){return u}});var r=n(7393),i=n(7574),s=n(7444);class o extends r.L{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function u(e,t){if(t.closed)return;if(e instanceof i.y)return e.subscribe(t);let n;try{n=(0,s.s)(e)(t)}catch(r){t.error(r)}return n}},2441:function(e,t,n){"use strict";n.d(t,{c:function(){return a},N:function(){return u}});var r=n(9765),i=n(7574),s=n(5319),o=n(1307);class a extends i.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new s.w,e.add(this.source.subscribe(new c(this.getSubject(),this))),e.closed&&(this._connection=null,e=s.w.EMPTY)),e}refCount(){return(0,o.x)()(this)}}const u=(()=>{const e=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class c extends r.Yc{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}},9193:function(e,t,n){"use strict";n.d(t,{E:function(){return i},c:function(){return s}});var r=n(7574);const i=new r.y(e=>e.complete());function s(e){return e?function(e){return new r.y(t=>e.schedule(()=>t.complete()))}(e):i}},4402:function(e,t,n){"use strict";n.d(t,{D:function(){return h}});var r=n(7574),i=n(7444),s=n(5319),o=n(6554),a=n(4087),u=n(377),c=n(4072),l=n(9489);function h(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o.L]}(e))return function(e,t){return new r.y(n=>{const r=new s.w;return r.add(t.schedule(()=>{const i=e[o.L]();r.add(i.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if((0,c.t)(e))return function(e,t){return new r.y(n=>{const r=new s.w;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r})}(e,t);if((0,l.z)(e))return(0,a.r)(e,t);if(function(e){return e&&"function"==typeof e[u.hZ]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new s.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[u.hZ](),r.add(t.schedule(function(){if(n.closed)return;let e,t;try{const n=i.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())}))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof r.y?e:new r.y((0,i.s)(e))}},6693:function(e,t,n){"use strict";n.d(t,{n:function(){return o}});var r=n(7574),i=n(5015),s=n(4087);function o(e,t){return t?(0,s.r)(e,t):new r.y((0,i.V)(e))}},6682:function(e,t,n){"use strict";n.d(t,{T:function(){return a}});var r=n(7574),i=n(4869),s=n(3282),o=n(6693);function a(...e){let t=Number.POSITIVE_INFINITY,n=null,a=e[e.length-1];return(0,i.K)(a)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof a&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof r.y?e[0]:(0,s.J)(t)((0,o.n)(e,n))}},5917:function(e,t,n){"use strict";n.d(t,{of:function(){return o}});var r=n(4869),i=n(6693),s=n(4087);function o(...e){let t=e[e.length-1];return(0,r.K)(t)?(e.pop(),(0,s.r)(e,t)):(0,i.n)(e)}},205:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var r=n(7574);function i(e,t){return new r.y(t?n=>t.schedule(s,0,{error:e,subscriber:n}):t=>t.error(e))}function s({error:e,subscriber:t}){t.error(e)}},8002:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(7393);function i(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(e,t))}}class s{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new o(e,this.project,this.thisArg))}}class o extends r.L{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}},3282:function(e,t,n){"use strict";n.d(t,{J:function(){return s}});var r=n(9773),i=n(4487);function s(e=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,e)}},9773:function(e,t,n){"use strict";n.d(t,{zg:function(){return o}});var r=n(8002),i=n(4402),s=n(5345);function o(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?s=>s.pipe(o((n,s)=>(0,i.D)(e(n,s)).pipe((0,r.U)((e,r)=>t(n,e,s,r))),n)):("number"==typeof t&&(n=t),t=>t.lift(new a(e,n)))}class a{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new u(e,this.project,this.concurrent))}}class u extends s.Ds{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new s.IY(this),n=this.destination;n.add(t);const r=(0,s.ft)(e,t);r!==t&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9746:function(e,t,n){"use strict";n.d(t,{QV:function(){return s},ht:function(){return a}});var r=n(7393),i=n(3098);function s(e,t=0){return function(n){return n.lift(new o(e,t))}}class o{constructor(e,t=0){this.scheduler=e,this.delay=t}call(e,t){return t.subscribe(new a(e,this.scheduler,this.delay))}}class a extends r.L{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new u(e,this.destination)))}_next(e){this.scheduleMessage(i.P.createNext(e))}_error(e){this.scheduleMessage(i.P.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(i.P.createComplete()),this.unsubscribe()}}class u{constructor(e,t){this.notification=e,this.destination=t}}},1307:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});var r=n(7393);function i(){return function(e){return e.lift(new s(e))}}class s{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new o(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class o extends r.L{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},3101:function(e,t,n){"use strict";n.d(t,{R:function(){return p}});var r=n(7574);let i=1;const s=Promise.resolve(),o={};function a(e){return e in o&&(delete o[e],!0)}const u={setImmediate(e){const t=i++;return o[t]=!0,s.then(()=>a(t)&&e()),t},clearImmediate(e){a(e)}};var c=n(6465),l=n(6102);const h=new class extends l.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,i=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<i&&(e=t.shift()));if(this.active=!1,n){for(;++r<i&&(e=t.shift());)e.unsubscribe();throw n}}}(class extends c.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=u.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(u.clearImmediate(t),e.scheduled=void 0)}});var d=n(9796);class f extends r.y{constructor(e,t=0,n=h){var r;super(),this.source=e,this.delayTime=t,this.scheduler=n,((0,d.k)(r=t)||!(r-parseFloat(r)+1>=0)||t<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=h)}static create(e,t=0,n=h){return new f(e,t,n)}static dispatch(e){const{source:t,subscriber:n}=e;return this.add(t.subscribe(n))}_subscribe(e){return this.scheduler.schedule(f.dispatch,this.delayTime,{source:this.source,subscriber:e})}}function p(e,t=0){return function(n){return n.lift(new g(e,t))}}class g{constructor(e,t){this.scheduler=e,this.delay=t}call(e,t){return new f(t,this.delay,this.scheduler).subscribe(e)}}},3342:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(7393);function i(){}var s=n(9105);function o(e,t,n){return function(r){return r.lift(new a(e,t,n))}}class a{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new u(e,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(e,t,n,r){super(e),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,s.m)(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||i,this._tapError=t.error||i,this._tapComplete=t.complete||i)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}},4087:function(e,t,n){"use strict";n.d(t,{r:function(){return s}});var r=n(7574),i=n(5319);function s(e,t){return new r.y(n=>{const r=new i.w;let s=0;return r.add(t.schedule(function(){s!==e.length?(n.next(e[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:function(e,t,n){"use strict";n.d(t,{o:function(){return s}});var r=n(5319);class i extends r.w{constructor(e,t){super()}schedule(e,t=0){return this}}class s extends i{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}},6102:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});let r=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class i extends r{constructor(e,t=r.now){super(e,()=>i.delegate&&i.delegate!==this?i.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}},3637:function(e,t,n){"use strict";n.d(t,{z:function(){return i},P:function(){return s}});var r=n(6465);const i=new(n(6102).v)(r.o),s=i},7771:function(e,t,n){"use strict";n.d(t,{c:function(){return o},N:function(){return s}});var r=n(6465),i=n(6102);const s=new class extends i.v{}(class extends r.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}),o=s},377:function(e,t,n){"use strict";n.d(t,{hZ:function(){return r}});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});const r=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})()},4449:function(e,t,n){"use strict";function r(e){setTimeout(()=>{throw e},0)}n.d(t,{z:function(){return r}})},4487:function(e,t,n){"use strict";function r(e){return e}n.d(t,{y:function(){return r}})},9796:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});const r=Array.isArray||(e=>e&&"number"==typeof e.length)},9489:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});const r=e=>e&&"number"==typeof e.length&&"function"!=typeof e},9105:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,{m:function(){return r}})},1555:function(e,t,n){"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,{K:function(){return r}})},4072:function(e,t,n){"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:function(){return r}})},4869:function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,{K:function(){return r}})},7444:function(e,t,n){"use strict";n.d(t,{s:function(){return l}});var r=n(5015),i=n(4449),s=n(377),o=n(6554),a=n(9489),u=n(4072),c=n(1555);const l=e=>{if(e&&"function"==typeof e[o.L])return l=e,e=>{const t=l[o.L]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if((0,a.z)(e))return(0,r.V)(e);if((0,u.t)(e))return n=e,e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,i.z),e);if(e&&"function"==typeof e[s.hZ])return t=e,e=>{const n=t[s.hZ]();for(;;){let t;try{t=n.next()}catch(r){return e.error(r),e}if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e};{const t=(0,c.K)(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var t,n,l}},5015:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});const r=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}},3205:function(e,t,n){"use strict";var r=n(3018);let i=null;function s(){return i}const o=new r.OlP("DocumentToken");let a=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:u,token:e,providedIn:"platform"}),e})();function u(){return(0,r.LFG)(l)}const c=new r.OlP("Location Initialized");let l=(()=>{class e extends a{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),()=>t.removeEventListener("popstate",e)}onHashChange(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),()=>t.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){h()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){h()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=(0,r.Yz7)({factory:d,token:e,providedIn:"platform"}),e})();function h(){return!!window.history.pushState}function d(){return new l((0,r.LFG)(o))}function f(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function p(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function g(e){return e&&"?"!==e[0]?"?"+e:e}let m=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:y,token:e,providedIn:"root"}),e})();function y(e){const t=(0,r.LFG)(o).location;return new b((0,r.LFG)(a),t&&t.origin||"")}const v=new r.OlP("appBaseHref");let b=(()=>{class e extends m{constructor(e,t){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return f(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(a),r.LFG(v,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),w=(()=>{class e extends m{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=t&&(this._baseHref=t)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=f(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(a),r.LFG(v,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),_=(()=>{class e{constructor(e,t){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=p(S(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+g(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,S(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+g(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+g(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformStrategy).historyGo)||void 0===n||n.call(t,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}))}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(m),r.LFG(a))},e.normalizeQueryParams=g,e.joinWithSlash=f,e.stripTrailingSlash=p,e.\u0275prov=(0,r.Yz7)({factory:T,token:e,providedIn:"root"}),e})();function T(){return new _((0,r.LFG)(m),(0,r.LFG)(a))}function S(e){return e.replace(/\/index.html$/,"")}var I=(()=>((I=I||{})[I.Zero=0]="Zero",I[I.One=1]="One",I[I.Two=2]="Two",I[I.Few=3]="Few",I[I.Many=4]="Many",I[I.Other=5]="Other",I))();const E=r.kL8;class k{}let C=(()=>{class e extends k{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(E(t||this.locale)(e)){case I.Zero:return"zero";case I.One:return"one";case I.Two:return"two";case I.Few:return"few";case I.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.soG))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function A(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,i]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}class x{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let N=(()=>{class e{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(Um){throw new Error(`Cannot find a differ supporting object '${t}' of type '${e=t,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,r)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new x(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new O(e,n);t.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new O(e,i);t.push(s)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=r,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();class O{constructor(e,t){this.record=e,this.view=t}}let R=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new P,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){D("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){D("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class P{constructor(){this.$implicit=null,this.ngIf=null}}function D(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${(0,r.AaK)(t)}'.`)}class L{createSubscription(e,t){return e.subscribe({next:t,error:e=>{throw e}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class M{createSubscription(e,t){return e.then(t,e=>{throw e})}dispose(e){}onDestroy(e){}}const U=new M,F=new L;let V=(()=>{class e{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,t=>this._updateLatestValue(e,t))}_selectStrategy(t){if((0,r.QGY)(t))return U;if((0,r.F4k)(t))return F;throw Error(`InvalidPipeArgument: '${t}' for pipe '${(0,r.AaK)(e)}'`)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.sBO,16))},e.\u0275pipe=r.Yjl({name:"async",type:e,pure:!1}),e})(),Z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[{provide:k,useClass:C}]}),e})();function q(e){return"server"===e}let j=(()=>{class e{}return e.\u0275prov=(0,r.Yz7)({token:e,providedIn:"root",factory:()=>new B((0,r.LFG)(o),window)}),e})();class B{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const n=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const e=r.shadowRoot;if(e){const n=e.getElementById(t)||e.querySelector(`[name="${t}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=$(this.window.history)||$(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(Um){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Um){return!1}}}function $(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class z{}class H extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var e;e=new H,i||(i=e)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(K=K||document.querySelector("base"),K?K.getAttribute("href"):null);return null==t?null:function(e){G=G||document.createElement("a"),G.setAttribute("href",e);const t=G.pathname;return"/"===t.charAt(0)?t:`/${t}`}(t)}resetBaseElement(){K=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return A(document.cookie,e)}}let G,K=null;const W=new r.OlP("TRANSITION_ID"),J=[{provide:r.ip1,useFactory:function(e,t,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[W,o,r.zs3],multi:!0}];class Y{static init(){(0,r.VLi)(new Y)}addToWindow(e){r.dqk.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(e=>{const t=r.dqk.getAllAngularTestabilities();let n=t.length,i=!1;const s=function(t){i=i||t,n--,0==n&&e(i)};t.forEach(function(e){e.whenStable(s)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?s().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Q=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const X=new r.OlP("EventManagerPlugins");let ee=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(X),r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class te{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=s().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let ne=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),re=(()=>{class e extends ne{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,t,n){e.forEach(e=>{const r=this._doc.createElement("style");r.textContent=e,n.push(t.appendChild(r))})}addHost(e){const t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}removeHost(e){const t=this._hostNodes.get(e);t&&t.forEach(ie),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((t,n)=>{this._addStylesToHost(e,n,t)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(ie))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function ie(e){s().remove(e)}const se={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},oe=/%COMP%/g;function ae(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?ae(e,i,n):(i=i.replace(oe,e),n.push(i))}return n}function ue(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let ce=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new le(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new he(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case 1:case r.ifc.ShadowDom:return new de(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=ae(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(ee),r.LFG(re),r.LFG(r.AFp))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class le{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(se[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const i=se[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=se[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,i){i&(r.JOm.DashCase|r.JOm.Important)?e.style.setProperty(t,n,i&r.JOm.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&r.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ue(n)):this.eventManager.addEventListener(e,t,ue(n))}}class he extends le{constructor(e,t,n,r){super(e),this.component=n;const i=ae(r+"-"+n.id,n.styles,[]);t.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(oe,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(oe,r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class de extends le{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=ae(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const e=document.createElement("style");e.textContent=i[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let fe=(()=>{class e extends te{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const pe=["alt","control","meta","shift"],ge={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},me={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ye={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let ve=(()=>{class e extends te{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,r){const i=e.parseEventName(n),o=e.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(t,i.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=e._normalizeKey(n.pop());let s="";if(pe.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),s+=e+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&me.hasOwnProperty(t)&&(t=me[t]))}return ge[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),pe.forEach(r=>{r!=n&&(0,ye[r])(e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return i=>{e.getEventFullKey(i)===t&&r.runGuarded(()=>n(i))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const be=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){H.makeCurrent(),Y.init()},multi:!0},{provide:o,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),we=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:X,useClass:fe,multi:!0,deps:[o,r.R0b,r.Lbi]},{provide:X,useClass:ve,multi:!0,deps:[o]},[],{provide:ce,useClass:ce,deps:[ee,re,r.AFp]},{provide:r.FYo,useExisting:ce},{provide:ne,useExisting:re},{provide:re,useClass:re,deps:[o]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:ee,useClass:ee,deps:[X,r.R0b]},{provide:z,useClass:Q,deps:[]},[]];let _e=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:r.AFp,useValue:t.appId},{provide:W,useExisting:r.AFp},J]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(e,12))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:we,imports:[Z,r.hGG]}),e})();function Te(){return new Se((0,r.LFG)(o))}let Se=(()=>{class e{constructor(e){this._doc=e,this._dom=s()}addTag(e,t=!1){return e?this._getOrCreateElement(e,t):null}addTags(e,t=!1){return e?e.reduce((e,n)=>(n&&e.push(this._getOrCreateElement(n,t)),e),[]):[]}getTag(e){return e&&this._doc.querySelector(`meta[${e}]`)||null}getTags(e){if(!e)return[];const t=this._doc.querySelectorAll(`meta[${e}]`);return t?[].slice.call(t):[]}updateTag(e,t){if(!e)return null;t=t||this._parseSelector(e);const n=this.getTag(t);return n?this._setMetaElementAttributes(e,n):this._getOrCreateElement(e,!0)}removeTag(e){this.removeTagElement(this.getTag(e))}removeTagElement(e){e&&this._dom.remove(e)}_getOrCreateElement(e,t=!1){if(!t){const t=this._parseSelector(e),n=this.getTags(t).filter(t=>this._containsAttributes(e,t))[0];if(void 0!==n)return n}const n=this._dom.createElement("meta");return this._setMetaElementAttributes(e,n),this._doc.getElementsByTagName("head")[0].appendChild(n),n}_setMetaElementAttributes(e,t){return Object.keys(e).forEach(n=>t.setAttribute(this._getMetaKeyMap(n),e[n])),t}_parseSelector(e){const t=e.name?"name":"property";return`${t}="${e[t]}"`}_containsAttributes(e,t){return Object.keys(e).every(n=>t.getAttribute(this._getMetaKeyMap(n))===e[n])}_getMetaKeyMap(e){return Ie[e]||e}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=(0,r.Yz7)({factory:Te,token:e,providedIn:"root"}),e})();const Ie={httpEquiv:"http-equiv"};"undefined"!=typeof window&&window;var Ee=n(5917),ke=n(7574),Ce=n(9773);function Ae(e,t){return(0,Ce.zg)(e,t,1)}var xe=n(7393);function Ne(e,t){return function(n){return n.lift(new Oe(e,t))}}class Oe{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Re(e,this.predicate,this.thisArg))}}class Re extends xe.L{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}var Pe=n(8002);class De{}class Le{}class Me{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(e=>{const t=e.indexOf(":");if(t>0){const n=e.slice(0,t),r=n.toLowerCase(),i=e.slice(t+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const r=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Me?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Me;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Me?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case"d":const i=e.value;if(i){let e=this.headers.get(t);if(!e)return;e=e.filter(e=>-1===i.indexOf(e)),0===e.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,e)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Ue{encodeKey(e){return Fe(e)}encodeValue(e){return Fe(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}function Fe(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function Ve(e){return`${e}`}class Ze{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Ue,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(e=>{const r=e.indexOf("="),[i,s]=-1==r?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,r)),t.decodeValue(e.slice(r+1))],o=n.get(i)||[];o.push(s),n.set(i,o)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t];this.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(n=>{const r=e[n];Array.isArray(r)?r.forEach(e=>{t.push({param:n,value:e,op:"a"})}):t.push({param:n,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(e=>t+"="+this.encoder.encodeValue(e)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ze({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Ve(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let t=this.map.get(e.param)||[];const n=t.indexOf(Ve(e.value));-1!==n&&t.splice(n,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class qe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function je(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function Be(e){return"undefined"!=typeof Blob&&e instanceof Blob}function $e(e){return"undefined"!=typeof FormData&&e instanceof FormData}class ze{constructor(e,t,n,r){let i;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new Me),this.context||(this.context=new qe),this.params){const e=this.params.toString();if(0===e.length)this.urlWithParams=t;else{const n=t.indexOf("?");this.urlWithParams=t+(-1===n?"?":n<t.length-1?"&":"")+e}}else this.params=new Ze,this.urlWithParams=t}serializeBody(){return null===this.body?null:je(this.body)||Be(this.body)||$e(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof Ze?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||$e(this.body)?null:Be(this.body)?this.body.type||null:je(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ze?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let u=e.headers||this.headers,c=e.params||this.params;const l=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((t,n)=>t.set(n,e.setHeaders[n]),u)),e.setParams&&(c=Object.keys(e.setParams).reduce((t,n)=>t.set(n,e.setParams[n]),c)),new ze(n,r,s,{params:c,headers:u,context:l,reportProgress:a,responseType:i,withCredentials:o})}}var He=(()=>((He=He||{})[He.Sent=0]="Sent",He[He.UploadProgress=1]="UploadProgress",He[He.ResponseHeader=2]="ResponseHeader",He[He.DownloadProgress=3]="DownloadProgress",He[He.Response=4]="Response",He[He.User=5]="User",He))();class Ge{constructor(e,t=200,n="OK"){this.headers=e.headers||new Me,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Ke extends Ge{constructor(e={}){super(e),this.type=He.ResponseHeader}clone(e={}){return new Ke({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class We extends Ge{constructor(e={}){super(e),this.type=He.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new We({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Je extends Ge{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Ye(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let Qe=(()=>{class e{constructor(e){this.handler=e}request(e,t,n={}){let r;if(e instanceof ze)r=e;else{let i,s;i=n.headers instanceof Me?n.headers:new Me(n.headers),n.params&&(s=n.params instanceof Ze?n.params:new Ze({fromObject:n.params})),r=new ze(e,t,void 0!==n.body?n.body:null,{headers:i,context:n.context,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=(0,Ee.of)(r).pipe(Ae(e=>this.handler.handle(e)));if(e instanceof ze||"events"===n.observe)return i;const s=i.pipe(Ne(e=>e instanceof We));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return s.pipe((0,Pe.U)(e=>{if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return s.pipe((0,Pe.U)(e=>{if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return s.pipe((0,Pe.U)(e=>{if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return s.pipe((0,Pe.U)(e=>e.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(e,t={}){return this.request("DELETE",e,t)}get(e,t={}){return this.request("GET",e,t)}head(e,t={}){return this.request("HEAD",e,t)}jsonp(e,t){return this.request("JSONP",e,{params:(new Ze).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,t={}){return this.request("OPTIONS",e,t)}patch(e,t,n={}){return this.request("PATCH",e,Ye(n,t))}post(e,t,n={}){return this.request("POST",e,Ye(n,t))}put(e,t,n={}){return this.request("PUT",e,Ye(n,t))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(De))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class Xe{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const et=new r.OlP("HTTP_INTERCEPTORS");let tt=(()=>{class e{intercept(e,t){return t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const nt=/^\)\]\}',?\n/;let rt=(()=>{class e{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ke.y(t=>{const n=this.xhrFactory.build();if(n.open(e.method,e.urlWithParams),e.withCredentials&&(n.withCredentials=!0),e.headers.forEach((e,t)=>n.setRequestHeader(e,t.join(","))),e.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const t=e.detectContentTypeHeader();null!==t&&n.setRequestHeader("Content-Type",t)}if(e.responseType){const t=e.responseType.toLowerCase();n.responseType="json"!==t?t:"text"}const r=e.serializeBody();let i=null;const s=()=>{if(null!==i)return i;const t=1223===n.status?204:n.status,r=n.statusText||"OK",s=new Me(n.getAllResponseHeaders()),o=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(n)||e.url;return i=new Ke({headers:s,status:t,statusText:r,url:o}),i},o=()=>{let{headers:r,status:i,statusText:o,url:a}=s(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===e.responseType&&"string"==typeof u){const e=u;u=u.replace(nt,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=e,c&&(c=!1,u={error:l,text:u})}}c?(t.next(new We({body:u,headers:r,status:i,statusText:o,url:a||void 0})),t.complete()):t.error(new Je({error:u,headers:r,status:i,statusText:o,url:a||void 0}))},a=e=>{const{url:r}=s(),i=new Je({error:e,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});t.error(i)};let u=!1;const c=r=>{u||(t.next(s()),u=!0);let i={type:He.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===e.responseType&&n.responseText&&(i.partialText=n.responseText),t.next(i)},l=e=>{let n={type:He.UploadProgress,loaded:e.loaded};e.lengthComputable&&(n.total=e.total),t.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),e.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),t.next({type:He.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",o),n.removeEventListener("timeout",a),e.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(z))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const it=new r.OlP("XSRF_COOKIE_NAME"),st=new r.OlP("XSRF_HEADER_NAME");class ot{}let at=(()=>{class e{constructor(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=A(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o),r.LFG(r.Lbi),r.LFG(it))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),ut=(()=>{class e{constructor(e,t){this.tokenService=e,this.headerName=t}intercept(e,t){const n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);const r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(ot),r.LFG(st))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),ct=(()=>{class e{constructor(e,t){this.backend=e,this.injector=t,this.chain=null}handle(e){if(null===this.chain){const e=this.injector.get(et,[]);this.chain=e.reduceRight((e,t)=>new Xe(e,t),this.backend)}return this.chain.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Le),r.LFG(r.zs3))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),lt=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:ut,useClass:tt}]}}static withOptions(t={}){return{ngModule:e,providers:[t.cookieName?{provide:it,useValue:t.cookieName}:[],t.headerName?{provide:st,useValue:t.headerName}:[]]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[ut,{provide:et,useExisting:ut,multi:!0},{provide:ot,useClass:at},{provide:it,useValue:"XSRF-TOKEN"},{provide:st,useValue:"X-XSRF-TOKEN"}]}),e})(),ht=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[Qe,{provide:De,useClass:ct},rt,{provide:Le,useExisting:rt}],imports:[[lt.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),e})();var dt=n(2329),ft=n(4459);class pt{constructor(e){return e}}class gt{constructor(){return(0,dt.C6)()}}const mt=new r.OlP("angularfire2._apps"),yt={provide:pt,useFactory:function(e){return e&&1===e.length?e[0]:new pt((0,dt.Mq)())},deps:[[new r.FiY,mt]]},vt={provide:gt,deps:[[new r.FiY,mt]]};function bt(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new pt(r)}}let wt=(()=>{class e{constructor(e){(0,dt.KN)("angularfire",ft.q4.full,"core"),(0,dt.KN)("angularfire",ft.q4.full,"app"),(0,dt.KN)("angular",r.q4F.full,e.toString())}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.Lbi))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[yt,vt]}),e})();function _t(e,...t){return{ngModule:wt,providers:[{provide:mt,useFactory:bt(e),multi:!0,deps:[r.R0b,r.zs3,ft.HU,...t]}]}}const Tt=(0,ft.u3)(dt.ZF,!0);n(8882);var St=n(3854),It=n(279),Et=n(9306),kt=n(8604);class Ct{constructor(){return(0,ft.vb)("auth")}}var At=n(6304);const xt=new Map,Nt={activated:!1,tokenObservers:[]},Ot={initialized:!1,enabled:!1};function Rt(e){return xt.get(e)||Nt}function Pt(e,t){xt.set(e,t)}function Dt(){return Ot}class Lt{constructor(e,t,n,r,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,At.Z)(function*(){t.stop();try{t.pending=new St.BH,yield function(e){return new Promise(t=>{setTimeout(t,e)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new St.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(n){t.retryPolicy(n)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const Mt=new St.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ut(e){if(!Rt(e).activated)throw Mt.create("use-before-activation",{appName:e.name})}function Ft(e,t){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,At.Z)(function*({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const e=yield i.getHeartbeatsHeader();e&&(r["X-Firebase-Client"]=e)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o,a;try{o=yield fetch(e,s)}catch(h){throw Mt.create("fetch-network-error",{originalErrorMessage:h.message})}if(200!==o.status)throw Mt.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(h){throw Mt.create("fetch-parse-error",{originalErrorMessage:h.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Mt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=1e3*Number(u[1]),l=Date.now();return{token:a.token,expireTimeMillis:l+c,issuedAtTimeMillis:l}})).apply(this,arguments)}function Zt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${n}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:t}}}const qt="firebase-app-check-store";let jt=null;function Bt(){return jt||(jt=new Promise((e,t)=>{try{const n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=t=>{e(t.target.result)},n.onerror=e=>{var n;t(Mt.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=e=>{const t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(qt,{keyPath:"compositeKey"})}}}catch(n){t(Mt.create("storage-open",{originalErrorMessage:n.message}))}}),jt)}function $t(){return($t=(0,At.Z)(function*(e,t){const n=(yield Bt()).transaction(qt,"readwrite"),r=n.objectStore(qt).put({compositeKey:e,value:t});return new Promise((e,t)=>{r.onsuccess=t=>{e()},n.onerror=e=>{var n;t(Mt.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}})})).apply(this,arguments)}const zt=new Et.Yd("@firebase/app-check");function Ht(e,t){return(0,St.hl)()?function(e,t){return function(e,t){return $t.apply(this,arguments)}(function(e){return`${e.options.appId}-${e.name}`}(e),t)}(e,t).catch(e=>{zt.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function Gt(){return Dt().enabled}function Kt(){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,At.Z)(function*(){const e=Dt();if(e.enabled&&e.token)return e.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Jt={error:"UNKNOWN_ERROR"};function Yt(e){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,At.Z)(function*(e,t=!1){const n=e.app;Ut(n);const r=Rt(n);let i,s=r.token;if(!s){const e=yield r.cachedTokenPromise;e&&nn(e)&&(s=e)}if(!t&&s&&nn(s))return{token:s.token};let o,a=!1;if(Gt()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Ft(Zt(n,yield Kt()),e.heartbeatServiceProvider).then(e=>(r.exchangeTokenPromise=void 0,e)),a=!0);const t=yield r.exchangeTokenPromise;return yield Ht(n,t),Pt(n,Object.assign(Object.assign({},r),{token:t})),{token:t.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(e=>(r.exchangeTokenPromise=void 0,e)),a=!0),s=yield r.exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code?zt.warn(u.message):zt.error(u),i=u}return s?(o={token:s.token},Pt(n,Object.assign(Object.assign({},r),{token:s})),yield Ht(n,s)):o=rn(i),a&&tn(n,o),o})).apply(this,arguments)}function Xt(e,t){const n=Rt(e),r=n.tokenObservers.filter(e=>e.next!==t);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),Pt(e,Object.assign(Object.assign({},n),{tokenObservers:r}))}function en(e){const{app:t}=e,n=Rt(t);let r=n.tokenRefresher;r||(r=function(e){const{app:t}=e;return new Lt((0,At.Z)(function*(){let n;if(n=Rt(t).token?yield Yt(e,!0):yield Yt(e),n.error)throw n.error}),()=>!0,()=>{const e=Rt(t);if(e.token){let t=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return t=Math.min(t,e.token.expireTimeMillis-3e5),Math.max(0,t-Date.now())}return 0},3e4,96e4)}(e),Pt(t,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function tn(e,t){const n=Rt(e).tokenObservers;for(const i of n)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(r){}}function nn(e){return e.expireTimeMillis-Date.now()>0}function rn(e){return{token:(t=Jt,St.US.encodeString(JSON.stringify(t),!1)),error:e};var t}class sn{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Rt(this.app);for(const t of e)Xt(this.app,t.next);return Promise.resolve()}}(0,It._registerComponent)(new kt.wA("app-check",e=>{return t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat"),new sn(t,n);var t,n},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("app-check-internal").initialize()})),(0,It._registerComponent)(new kt.wA("app-check-internal",e=>{return t=e.getProvider("app-check").getImmediate(),{getToken:e=>Yt(t,e),addTokenListener:e=>function(e,t,n,r){const{app:i}=e,s=Rt(i),o={next:n,error:void 0,type:"INTERNAL"};if(Pt(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&nn(s.token)){const t=s.token;Promise.resolve().then(()=>{n({token:t.token}),en(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>en(e))}(t,0,e),removeTokenListener:e=>Xt(t.app,e)};var t},"PUBLIC").setInstantiationMode("EXPLICIT")),(0,It.registerVersion)("@firebase/app-check","0.5.8");class on{constructor(){return(0,ft.vb)("app-check")}}"undefined"!=typeof window&&window;class an extends St.ZR{constructor(e,t){super(un(e),`Firebase Storage: ${t} (${un(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,an.prototype)}_codeEquals(e){return un(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function un(e){return"storage/"+e}function cn(){return new an("unknown","An unknown error occurred, please check the error payload for server response.")}function ln(){return new an("canceled","User canceled the upload/download.")}function hn(){return new an("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function dn(e){return new an("invalid-argument",e)}function fn(){return new an("app-deleted","The Firebase app was deleted.")}function pn(e){return new an("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gn(e,t){return new an("invalid-format","String does not match format '"+e+"': "+t)}function mn(e){throw new an("internal-error","Internal error: "+e)}class yn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=yn.makeFromUrl(e,t)}catch(r){return new yn(e,"")}if(""===n.path)return n;throw new an("invalid-default-bucket","Invalid default bucket '"+e+"'.")}static makeFromUrl(e,t){let n=null;const r=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),o=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${s}/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp(`^https?://${"firebasestorage.googleapis.com"===t?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/([A-Za-z0-9.\\-_]+)/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:i}];for(let a=0;a<o.length;a++){const t=o[a],r=t.regex.exec(e);if(r){let e=r[t.indices.path];e||(e=""),n=new yn(r[t.indices.bucket],e),t.postModify(n);break}}if(null==n)throw function(e){return new an("invalid-url","Invalid URL '"+e+"'.")}(e);return n}}class vn{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function bn(e){return"string"==typeof e||e instanceof String}function wn(e){return _n()&&e instanceof Blob}function _n(){return"undefined"!=typeof Blob}function Tn(e,t,n,r){if(r<t)throw dn(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw dn(`Invalid value for '${e}'. Expected ${n} or less.`)}function Sn(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function In(e){const t=encodeURIComponent;let n="?";for(const r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n=n.slice(0,-1),n}var En=(()=>(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(En||(En={})),En))();class kn{constructor(e,t,n,r,i,s,o,a,u,c,l){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=l,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(s){r(s)}else if(null!==i){const e=cn();e.serverResponse=i.getErrorText(),r(this.errorCallback_?this.errorCallback_(i,e):e)}else r(t.canceled?this.appDelete_?fn():ln():new an("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?e(0,new Cn(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return 2===a}let c=!1;function l(...e){c||(c=!0,t.apply(null,e))}function h(t){i=setTimeout(()=>{i=null,e(f,u())},t)}function d(){s&&clearTimeout(s)}function f(e,...t){if(c)return void d();if(e)return d(),void l.call(null,e,...t);if(u()||o)return d(),void l.call(null,e,...t);let n;r<64&&(r*=2),1===a?(a=2,n=0):n=1e3*(r+Math.random()),h(n)}let p=!1;function g(e){p||(p=!0,d(),c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}((e,t)=>{if(t)return void e(!1,new Cn(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{null!==this.progressCallback_&&this.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===En.NO_ERROR,i=n.getStatus();if(!t||this.isRetryStatusCode_(i)){const t=n.getErrorCode()===En.ABORT;return void e(!1,new Cn(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new Cn(s,n))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}class Cn{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function An(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function xn(...e){const t=An();if(void 0!==t){const n=new t;for(let t=0;t<e.length;t++)n.append(e[t]);return n.getBlob()}if(_n())return new Blob(e);throw new an("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Nn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class On{constructor(e,t){this.data=e,this.contentType=t||null}}function Rn(e,t){switch(e){case Nn.RAW:return new On(Pn(t));case Nn.BASE64:case Nn.BASE64URL:return new On(Dn(e,t));case Nn.DATA_URL:return new On(function(e){const t=new Ln(e);return t.base64?Dn(Nn.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw gn(Nn.DATA_URL,"Malformed data URL.")}return Pn(t)}(t.rest)}(t),new Ln(t).contentType)}throw cn()}function Pn(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?n<e.length-1&&56320==(64512&e.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Dn(e,t){switch(e){case Nn.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw gn(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break}case Nn.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r)throw gn(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=atob(t)}catch(i){throw gn(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Ln{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw gn(Nn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;var r;null!=n&&(this.base64=(r=n).length>=";base64".length&&";base64"===r.substring(r.length-";base64".length),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)}}class Mn{constructor(e,t){let n=0,r="";wn(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(wn(this.data_)){const s=(r=e,i=t,(n=this.data_).webkitSlice?n.webkitSlice(r,i):n.mozSlice?n.mozSlice(r,i):n.slice?n.slice(r,i):null);return null===s?null:new Mn(s)}var n,r,i;{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Mn(n,!0)}}static getBlob(...e){if(_n()){const t=e.map(e=>e instanceof Mn?e.data_:e);return new Mn(xn.apply(null,t))}{const t=e.map(e=>bn(e)?Rn(Nn.RAW,e).data:e.data_);let n=0;t.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let i=0;return t.forEach(e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]}),new Mn(r,!0)}}uploadData(){return this.data_}}function Un(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"==typeof e&&!Array.isArray(e)}(t)?t:null}function Fn(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Vn(e,t){return t}class Zn{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Vn}}let qn=null;function jn(){if(qn)return qn;const e=[];e.push(new Zn("bucket")),e.push(new Zn("generation")),e.push(new Zn("metageneration")),e.push(new Zn("name","fullPath",!0));const t=new Zn("name");t.xform=function(e,t){return function(e){return!bn(e)||e.length<2?e:Fn(e)}(t)},e.push(t);const n=new Zn("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Zn("timeCreated")),e.push(new Zn("updated")),e.push(new Zn("md5Hash",null,!0)),e.push(new Zn("cacheControl",null,!0)),e.push(new Zn("contentDisposition",null,!0)),e.push(new Zn("contentEncoding",null,!0)),e.push(new Zn("contentLanguage",null,!0)),e.push(new Zn("contentType",null,!0)),e.push(new Zn("metadata","customMetadata",!0)),qn=e,qn}function Bn(e,t,n){const r=Un(t);return null===r?null:function(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=new yn(e.bucket,e.fullPath);return t._makeStorageReference(n)}})}(r,e),r}(e,r,n)}function $n(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class zn{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Hn(e){if(!e)throw cn()}function Gn(e,t){return function(n,r){const i=Bn(e,r,t);return Hn(null!==i),i}}function Kn(e){return function(t,n){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?new an("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new an("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?new an("quota-exceeded","Quota for bucket '"+e.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===t.getStatus()?new an("unauthorized","User does not have permission to access '"+e.path+"'."):n,r.serverResponse=n.serverResponse,r}}function Wn(e){const t=Kn(e);return function(n,r){let i=t(n,r);return 404===n.getStatus()&&(i=new an("object-not-found","Object '"+e.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Jn(e,t,n){const r=Sn(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new zn(r,"GET",Gn(e,n),i);return s.errorHandler=Wn(t),s}function Yn(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}function Qn(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const u=Yn(t,r,i),c=$n(u,n),l=Mn.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw hn();const h={name:u.fullPath},d=Sn(s,e.host,e._protocol),f=e.maxUploadRetryTime,p=new zn(d,"POST",Gn(e,n),f);return p.urlParams=h,p.headers=o,p.body=l.uploadData(),p.errorHandler=Kn(t),p}class Xn{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function er(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){Hn(!1)}return Hn(!!n&&-1!==(t||["active"]).indexOf(n)),n}const tr={STATE_CHANGED:"state_changed"},nr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function rr(e){switch(e){case"running":case"pausing":case"canceling":return nr.RUNNING;case"paused":return nr.PAUSED;case"success":return nr.SUCCESS;case"canceled":return nr.CANCELED;case"error":default:return nr.ERROR}}class ir{constructor(e,t,n){if(function(e){return"function"==typeof e}(e)||null!=t||null!=n)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function sr(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class or extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=En.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=En.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=En.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r){if(this.sent_)throw mn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw mn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw mn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw mn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw mn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function ar(){return new or}class ur{constructor(e,t,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=jn(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{this._request=void 0,this._chunkMultiplier=1,e._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=e,this._transition("error"))},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals("canceled")?this.completeTransitions_():(this._error=e,this._transition("error"))},this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,n])=>{switch(this._state){case"running":e(t,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const n=function(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o=Yn(t,r,i),a={name:o.fullPath},u=Sn(s,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=$n(o,n),h=new zn(u,"POST",function(e){let t;er(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){Hn(!1)}return Hn(bn(t)),t},e.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=Kn(t),h}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,ar,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,n)=>{const r=function(e,t,n,r){const i=new zn(n,"POST",function(e){const t=er(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(s){Hn(!1)}n||Hn(!1);const i=Number(n);return Hn(!isNaN(i)),new Xn(i,r.size(),"final"===t)},e.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=Kn(t),i}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,ar,t,n);this._request=i,i.getPromise().then(e=>{e=e,this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Xn(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((r,i)=>{let s;try{s=function(e,t,n,r,i,s,o,a){const u=new Xn(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new an("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const c=u.total-u.current;let l=c;i>0&&(l=Math.min(l,i));const h=u.current,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":`${u.current}`},f=r.slice(h,h+l);if(null===f)throw hn();const p=new zn(n,"POST",function(e,n){const i=er(e,["active","final"]),o=u.current+l,a=r.size();let c;return c="final"===i?Gn(t,s)(e,n):null,new Xn(o,a,"final"===i,c)},t.maxUploadRetryTime);return p.headers=d,p.body=f.uploadData(),p.progressCallback=a||null,p.errorHandler=Kn(e),p}(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(a){return this._error=a,void this._transition("error")}const o=this._ref.storage._makeRequest(s,ar,r,i);this._request=o,o.getPromise().then(e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const n=Jn(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,ar,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const n=Qn(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,ar,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=ln(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=rr(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new ir(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(rr(this._state)){case nr.SUCCESS:sr(this._resolve.bind(null,this.snapshot))();break;case nr.CANCELED:case nr.ERROR:sr(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(rr(this._state)){case nr.RUNNING:case nr.PAUSED:e.next&&sr(e.next.bind(e,this.snapshot))();break;case nr.SUCCESS:e.complete&&sr(e.complete.bind(e))();break;case nr.CANCELED:case nr.ERROR:e.error&&sr(e.error.bind(e,this._error))();break;default:e.error&&sr(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class cr{constructor(e,t){this._service=e,this._location=t instanceof yn?t:yn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new cr(e,t)}get root(){const e=new yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Fn(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new yn(this._location.bucket,e);return new cr(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw pn(e)}}function lr(e,t,n){return hr.apply(this,arguments)}function hr(){return(hr=(0,At.Z)(function*(e,t,n){const r={pageToken:n},i=yield dr(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&(yield lr(e,t,i.nextPageToken))})).apply(this,arguments)}function dr(e,t){null!=t&&"number"==typeof t.maxResults&&Tn("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=function(e,t,n,r,i){const s={};s.prefix=t.isRoot?"":t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=Sn(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,u=new zn(o,"GET",function(e,t){return function(n,r){const i=function(e,t,n){const r=Un(n);return null===r?null:function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(const i of n.prefixes){const n=i.replace(/\/$/,""),s=e._makeStorageReference(new yn(t,n));r.prefixes.push(s)}if(n.items)for(const i of n.items){const n=e._makeStorageReference(new yn(t,i.name));r.items.push(n)}return r}(e,t,r)}(e,t,r);return Hn(null!==i),i}}(e,t.bucket),a);return u.urlParams=s,u.errorHandler=Kn(t),u}(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,ar)}function fr(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new yn(e._location.bucket,n);return new cr(e.storage,r)}function pr(e,t){if(e instanceof yr){const n=e;if(null==n._bucket)throw new an("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");const r=new cr(n,n._bucket);return null!=t?pr(r,t):r}return void 0!==t?fr(e,t):e}function gr(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof yr)return new cr(e,t);throw dn("To use ref(service, url), the first argument must be a Storage instance.")}return pr(e,t)}function mr(e,t){const n=null==t?void 0:t.storageBucket;return null==n?null:yn.makeFromBucketSpec(n,e)}class yr{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host="firebasestorage.googleapis.com",this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?yn.makeFromBucketSpec(r,this._host):mr(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?yn.makeFromBucketSpec(this._url,e):mr(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Tn("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Tn("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,At.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const e=yield t.getToken();if(null!==e)return e.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,At.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new cr(this,e)}_makeRequest(e,t,n,r){if(this._deleted)return new vn(fn());{const i=function(e,t,n,r,i,s){const o=In(e.urlParams),a=e.url+o,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(u,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new kn(a,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}makeRequestWithTokens(e,t){var n=this;return(0,At.Z)(function*(){const[r,i]=yield Promise.all([n._getAuthToken(),n._getAppCheckToken()]);return n._makeRequest(e,t,r,i).getPromise()})()}}function vr(e,t,n,r){return function(e,t,n=Nn.RAW,r){e._throwIfRoot("uploadString");const i=Rn(n,t),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),function(e,t,n){e._throwIfRoot("uploadBytes");const r=Qn(e.storage,e._location,jn(),new Mn(t,!0),n);return e.storage.makeRequestWithTokens(r,ar).then(t=>({metadata:t,ref:e}))}(e,i.data,s)}(e=(0,St.m9)(e),t,n,r)}function br(e){return function(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=Sn(t.fullServerUrl(),e.host,e._protocol),r=new zn(n,"DELETE",function(e,t){},e.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=Wn(t),r}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,ar)}(e=(0,St.m9)(e))}function wr(e,t){return gr(e=(0,St.m9)(e),t)}function _r(e=(0,It.getApp)(),t){return e=(0,St.m9)(e),(0,It._getProvider)(e,"storage").getImmediate({identifier:t})}(0,It._registerComponent)(new kt.wA("storage",function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new yr(n,r,i,t,It.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,It.registerVersion)("@firebase/storage","0.9.6",""),(0,It.registerVersion)("@firebase/storage","0.9.6","esm2017");class Tr{constructor(e){return e}}const Sr=new r.OlP("angularfire2.storage-instances");function Ir(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new Tr(r)}}const Er={provide:class{constructor(){return(0,ft.vb)("storage")}},deps:[[new r.FiY,Sr]]},kr={provide:Tr,useFactory:function(e,t){const n=(0,ft.JM)("storage",e,t);return n&&new Tr(n)},deps:[[new r.FiY,Sr],pt]};let Cr=(()=>{class e{constructor(){(0,dt.KN)("angularfire",ft.q4.full,"gcs")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[kr,Er]}),e})();function Ar(e,...t){return{ngModule:Cr,providers:[{provide:Sr,useFactory:Ir(e),multi:!0,deps:[r.R0b,r.zs3,ft.HU,gt,[new r.FiY,Ct],[new r.FiY,on],...t]}]}}const xr=(0,ft.u3)(br,!0),Nr=(0,ft.u3)(_r,!0),Or=(0,ft.u3)(wr,!0),Rr=(0,ft.u3)(vr,!0);var Pr,Dr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Lr={},Mr=Mr||{},Ur=Dr||self;function Fr(){}function Vr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Zr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var qr="closure_uid_"+(1e9*Math.random()>>>0),jr=0;function Br(e,t,n){return e.call.apply(e.bind,arguments)}function $r(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function zr(e,t,n){return(zr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Br:$r).apply(null,arguments)}function Hr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Gr(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Kr(){this.s=this.s,this.o=this.o}var Wr={};Kr.prototype.s=!1,Kr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,qr)&&e[qr]||(e[qr]=++jr)}(this);delete Wr[e]}},Kr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Jr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Yr=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const r=e.length,i="string"==typeof e?e.split(""):e;for(let s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function Qr(e){return Array.prototype.concat.apply([],arguments)}function Xr(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function ei(e){return/^[\s\xa0]*$/.test(e)}var ti,ni=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ri(e,t){return-1!=e.indexOf(t)}function ii(e,t){return e<t?-1:e>t?1:0}e:{var si=Ur.navigator;if(si){var oi=si.userAgent;if(oi){ti=oi;break e}}ti=""}function ai(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function ui(e){const t={};for(const n in e)t[n]=e[n];return t}var ci="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function li(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<ci.length;t++)n=ci[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function hi(e){return hi[" "](e),e}hi[" "]=Fr;var di,fi,pi=ri(ti,"Opera"),gi=ri(ti,"Trident")||ri(ti,"MSIE"),mi=ri(ti,"Edge"),yi=mi||gi,vi=ri(ti,"Gecko")&&!(ri(ti.toLowerCase(),"webkit")&&!ri(ti,"Edge"))&&!(ri(ti,"Trident")||ri(ti,"MSIE"))&&!ri(ti,"Edge"),bi=ri(ti.toLowerCase(),"webkit")&&!ri(ti,"Edge");function wi(){var e=Ur.document;return e?e.documentMode:void 0}e:{var _i="",Ti=(fi=ti,vi?/rv:([^\);]+)(\)|;)/.exec(fi):mi?/Edge\/([\d\.]+)/.exec(fi):gi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(fi):bi?/WebKit\/(\S+)/.exec(fi):pi?/(?:Version)[ \/]?(\S+)/.exec(fi):void 0);if(Ti&&(_i=Ti?Ti[1]:""),gi){var Si=wi();if(null!=Si&&Si>parseFloat(_i)){di=String(Si);break e}}di=_i}var Ii={};var Ei=Ur.document&&gi&&(wi()||parseInt(di,10))||void 0,ki=function(){if(!Ur.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ur.addEventListener("test",Fr,t),Ur.removeEventListener("test",Fr,t)}catch(n){}return e}();function Ci(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Ai(e,t){if(Ci.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(vi){e:{try{hi(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:xi[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ai.Z.h.call(this)}}Ci.prototype.h=function(){this.defaultPrevented=!0},Gr(Ai,Ci);var xi={2:"touch",3:"pen",4:"mouse"};Ai.prototype.h=function(){Ai.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ni="closure_listenable_"+(1e6*Math.random()|0),Oi=0;function Ri(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Oi,this.ca=this.fa=!1}function Pi(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Di(e){this.src=e,this.g={},this.h=0}function Li(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Jr(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Pi(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Mi(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}Di.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Mi(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Ri(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var Ui="closure_lm_"+(1e6*Math.random()|0),Fi={};function Vi(e,t,n,r,i){if(r&&r.once)return qi(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Vi(e,t[s],n,r,i);return null}return n=Ki(n),e&&e[Ni]?e.N(t,n,Zr(r)?!!r.capture:!!r,i):Zi(e,t,n,!1,r,i)}function Zi(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Zr(i)?!!i.capture:!!i,a=Hi(e);if(a||(e[Ui]=a=new Di(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){var e=zi;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ki||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent($i(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function qi(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)qi(e,t[s],n,r,i);return null}return n=Ki(n),e&&e[Ni]?e.O(t,n,Zr(r)?!!r.capture:!!r,i):Zi(e,t,n,!0,r,i)}function ji(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)ji(e,t[s],n,r,i);else r=Zr(r)?!!r.capture:!!r,n=Ki(n),e&&e[Ni]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=Mi(s=e.g[t],n,r,i))&&(Pi(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=Hi(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Mi(t,n,r,i)),(n=-1<e?t[e]:null)&&Bi(n))}function Bi(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Ni])Li(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent($i(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Hi(t))?(Li(n,e),0==n.h&&(n.src=null,t[Ui]=null)):Pi(e)}}}function $i(e){return e in Fi?Fi[e]:Fi[e]="on"+e}function zi(e,t){if(e.ca)e=!0;else{t=new Ai(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Bi(e),e=n.call(r,t)}return e}function Hi(e){return(e=e[Ui])instanceof Di?e:null}var Gi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ki(e){return"function"==typeof e?e:(e[Gi]||(e[Gi]=function(t){return e.handleEvent(t)}),e[Gi])}function Wi(){Kr.call(this),this.i=new Di(this),this.P=this,this.I=null}function Ji(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new Ci(t,e);else if(t instanceof Ci)t.target=t.target||e;else{var i=t;li(t=new Ci(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Yi(o,r,!0,t)&&i}if(i=Yi(o=t.g=e,r,!0,t)&&i,i=Yi(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Yi(o=t.g=n[s],r,!1,t)&&i}function Yi(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&Li(e.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Gr(Wi,Kr),Wi.prototype[Ni]=!0,Wi.prototype.removeEventListener=function(e,t,n,r){ji(this,e,t,n,r)},Wi.prototype.M=function(){if(Wi.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Pi(n[r]);delete t.g[e],t.h--}}this.I=null},Wi.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Wi.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Qi=Ur.JSON.stringify;function Xi(){var e=os;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var es,ts=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new ns,e=>e.reset());class ns{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function rs(e){Ur.setTimeout(()=>{throw e},0)}function is(e,t){es||function(){var e=Ur.Promise.resolve(void 0);es=function(){e.then(as)}}(),ss||(es(),ss=!0),os.add(e,t)}var ss=!1,os=new class{constructor(){this.h=this.g=null}add(e,t){const n=ts.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function as(){for(var e;e=Xi();){try{e.h.call(e.g)}catch(n){rs(n)}var t=ts;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ss=!1}function us(e,t){Wi.call(this),this.h=e||1,this.g=t||Ur,this.j=zr(this.kb,this),this.l=Date.now()}function cs(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function ls(e,t,n){if("function"==typeof e)n&&(e=zr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=zr(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ur.setTimeout(e,t||0)}function hs(e){e.g=ls(()=>{e.g=null,e.i&&(e.i=!1,hs(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Gr(us,Wi),(Pr=us.prototype).da=!1,Pr.S=null,Pr.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ji(this,"tick"),this.da&&(cs(this),this.start()))}},Pr.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Pr.M=function(){us.Z.M.call(this),cs(this),delete this.g};class ds extends Kr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:hs(this)}M(){super.M(),this.g&&(Ur.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fs(e){Kr.call(this),this.h=e,this.g={}}Gr(fs,Kr);var ps=[];function gs(e,t,n,r){Array.isArray(n)||(n&&(ps[0]=n.toString()),n=ps);for(var i=0;i<n.length;i++){var s=Vi(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function ms(e){ai(e.g,function(e,t){this.g.hasOwnProperty(t)&&Bi(e)},e),e.g={}}function ys(){this.g=!0}function vs(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Qi(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}fs.prototype.M=function(){fs.Z.M.call(this),ms(this)},fs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ys.prototype.Aa=function(){this.g=!1},ys.prototype.info=function(){};var bs={},ws=null;function _s(){return ws=ws||new Wi}function Ts(e){Ci.call(this,bs.Ma,e)}function Ss(e){const t=_s();Ji(t,new Ts(t,e))}function Is(e,t){Ci.call(this,bs.STAT_EVENT,e),this.stat=t}function Es(e){const t=_s();Ji(t,new Is(t,e))}function ks(e,t){Ci.call(this,bs.Na,e),this.size=t}function Cs(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Ur.setTimeout(function(){e()},t)}bs.Ma="serverreachability",Gr(Ts,Ci),bs.STAT_EVENT="statevent",Gr(Is,Ci),bs.Na="timingevent",Gr(ks,Ci);var As={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},xs={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ns(){}function Os(){}Ns.prototype.h=null;var Rs,Ps={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ds(){Ci.call(this,"d")}function Ls(){Ci.call(this,"c")}function Ms(){}function Us(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new fs(this),this.P=Vs,this.W=new us(e=yi?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Fs}function Fs(){this.i=null,this.g="",this.h=!1}Gr(Ds,Ci),Gr(Ls,Ci),Gr(Ms,Ns),Ms.prototype.g=function(){return new XMLHttpRequest},Ms.prototype.i=function(){return{}},Rs=new Ms;var Vs=45e3,Zs={},qs={};function js(e,t,n){e.K=1,e.v=ho(so(t)),e.s=n,e.U=!0,Bs(e,null)}function Bs(e,t){e.F=Date.now(),Gs(e),e.A=so(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Eo(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Fs,e.g=Ea(e.l,n?t:null,!e.s),0<e.O&&(e.L=new ds(zr(e.Ia,e,e.g),e.O)),gs(e.V,e.g,"readystatechange",e.gb),t=e.H?ui(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ss(1),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.X,e.s)}function $s(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function zs(e,t,n){let r,i=!0;for(;!e.I&&e.C<n.length;){if(r=Hs(e,n),r==qs){4==t&&(e.o=4,Es(14),i=!1),vs(e.j,e.m,null,"[Incomplete Response]");break}if(r==Zs){e.o=4,Es(15),vs(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}vs(e.j,e.m,r,null),Qs(e,r)}$s(e)&&r!=qs&&r!=Zs&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Es(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),ya(t),t.L=!0,Es(11))):(vs(e.j,e.m,n,"[Invalid Chunked Response]"),Ys(e),Js(e))}function Hs(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?qs:(n=Number(t.substring(n,r)),isNaN(n)?Zs:(r+=1)+n>t.length?qs:(t=t.substr(r,n),e.C=r+n,t))}function Gs(e){e.Y=Date.now()+e.P,Ks(e,e.P)}function Ks(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Cs(zr(e.eb,e),t)}function Ws(e){e.B&&(Ur.clearTimeout(e.B),e.B=null)}function Js(e){0==e.l.G||e.I||wa(e.l,e)}function Ys(e){Ws(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,cs(e.W),ms(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Qs(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Oo(n.i,e)))if(n.I=e.N,!e.J&&Oo(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;ba(n),ua(n)}ma(n),Es(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Cs(zr(n.ab,n),6e3));if(1>=No(n.i)&&n.ka){try{n.ka()}catch(c){}n.ka=void 0}}else Ta(n,11)}else if((e.J||n.g==e)&&ba(n),!ei(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.U=c[0],c=c[1],2==n.G)if("c"==c[0]){n.J=c[1],n.la=c[2];const t=c[3];null!=t&&(n.ma=t,n.h.info("VER="+n.ma));const i=c[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const l=c[5];null!=l&&"number"==typeof l&&0<l&&(n.K=r=1.5*l,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;!s.g&&(ri(e,"spdy")||ri(e,"quic")||ri(e,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(Ro(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.sa=e,lo(r.F,r.D,e))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=e;if((r=n).oa=Ia(r,r.H?r.la:null,r.W),o.J){Po(r.i,o);var a=o,u=r.K;u&&a.setTimeout(u),a.B&&(Ws(a),Gs(a)),r.g=o}else ga(r);0<n.l.length&&ha(n)}else"stop"!=c[0]&&"close"!=c[0]||Ta(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Ta(n,7):aa(n):"noop"!=c[0]&&n.j&&n.j.wa(c),n.A=0)}Ss(4)}catch(c){}}function Xs(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Vr(e)||"string"==typeof e)Yr(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Vr(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(Vr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function eo(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof eo)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function to(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];no(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)no(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function no(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Pr=Us.prototype).setTimeout=function(e){this.P=e},Pr.gb=function(e){e=e.target;const t=this.L;t&&3==na(e)?t.l():this.Ia(e)},Pr.Ia=function(e){try{if(e==this.g)e:{const l=na(this.g);var t=this.g.Da();const h=this.g.ba();if(!(3>l)&&(3!=l||yi||this.g&&(this.h.h||this.g.ga()||ra(this.g)))){this.I||4!=l||7==t||Ss(8==t||0>=h?3:2),Ws(this);var n=this.g.ba();this.N=n;t:if($s(this)){var r=ra(this.g);e="";var i=r.length,s=4==na(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ys(this),Js(this);var o="";break t}this.h.i=new Ur.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,l,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ei(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,Es(12),Ys(this),Js(this);break e}vs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Qs(this,n)}this.U?(zs(this,l,o),yi&&this.i&&3==l&&(gs(this.V,this.W,"tick",this.fb),this.W.start())):(vs(this.j,this.m,o,null),Qs(this,o)),4==l&&Ys(this),this.i&&!this.I&&(4==l?wa(this.l,this):(this.i=!1,Gs(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Es(12)):(this.o=0,Es(13)),Ys(this),Js(this)}}}catch(l){}},Pr.fb=function(){if(this.g){var e=na(this.g),t=this.g.ga();this.C<t.length&&(Ws(this),zs(this,e,t),this.i&&4!=e&&Gs(this))}},Pr.cancel=function(){this.I=!0,Ys(this)},Pr.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Ss(3),Es(17)),Ys(this),this.o=2,Js(this)):Ks(this,this.Y-e)},(Pr=eo.prototype).R=function(){to(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Pr.T=function(){return to(this),this.g.concat()},Pr.get=function(e,t){return no(this.h,e)?this.h[e]:t},Pr.set=function(e,t){no(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Pr.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};var ro=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function io(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof io){this.g=void 0!==t?t:e.g,oo(this,e.j),this.s=e.s,ao(this,e.i),uo(this,e.m),this.l=e.l,t=e.h;var n=new _o;n.i=t.i,t.g&&(n.g=new eo(t.g),n.h=t.h),co(this,n),this.o=e.o}else e&&(n=String(e).match(ro))?(this.g=!!t,oo(this,n[1]||"",!0),this.s=fo(n[2]||""),ao(this,n[3]||"",!0),uo(this,n[4]),this.l=fo(n[5]||"",!0),co(this,n[6]||"",!0),this.o=fo(n[7]||"")):(this.g=!!t,this.h=new _o(null,this.g))}function so(e){return new io(e)}function oo(e,t,n){e.j=n?fo(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ao(e,t,n){e.i=n?fo(t,!0):t}function uo(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function co(e,t,n){t instanceof _o?(e.h=t,function(e,t){t&&!e.j&&(To(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(So(this,t),Eo(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=po(t,bo)),e.h=new _o(t,e.g))}function lo(e,t,n){e.h.set(t,n)}function ho(e){return lo(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function fo(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function po(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,go),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function go(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}io.prototype.toString=function(){var e=[],t=this.j;t&&e.push(po(t,mo,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(po(t,mo,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(po(n,"/"==n.charAt(0)?vo:yo,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",po(n,wo)),e.join("")};var mo=/[#\/\?@]/g,yo=/[#\?:]/g,vo=/[#\?]/g,bo=/[#\?@]/g,wo=/#/g;function _o(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function To(e){e.g||(e.g=new eo,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function So(e,t){To(e),t=ko(e,t),no(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,no((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&to(e)))}function Io(e,t){return To(e),t=ko(e,t),no(e.g.h,t)}function Eo(e,t,n){So(e,t),0<n.length&&(e.i=null,e.g.set(ko(e,t),Xr(n)),e.h+=n.length)}function ko(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Co(e){this.l=e||Ao,e=Ur.PerformanceNavigationTiming?0<(e=Ur.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(Ur.g&&Ur.g.Ea&&Ur.g.Ea()&&Ur.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Pr=_o.prototype).add=function(e,t){To(this),this.i=null,e=ko(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Pr.forEach=function(e,t){To(this),this.g.forEach(function(n,r){Yr(n,function(n){e.call(t,n,r,this)},this)},this)},Pr.T=function(){To(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n},Pr.R=function(e){To(this);var t=[];if("string"==typeof e)Io(this,e)&&(t=Qr(t,this.g.get(ko(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Qr(t,e[n])}return t},Pr.set=function(e,t){return To(this),this.i=null,Io(this,e=ko(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Pr.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Pr.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),e.push(o)}}return this.i=e.join("&")};var Ao=10;function xo(e){return!!e.h||!!e.g&&e.g.size>=e.j}function No(e){return e.h?1:e.g?e.g.size:0}function Oo(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ro(e,t){e.g?e.g.add(t):e.h=t}function Po(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Do(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return Xr(e.i)}function Lo(){}function Mo(){this.g=new Lo}function Uo(e,t,n){const r=n||"";try{Xs(e,function(e,n){let i=e;Zr(e)&&(i=Qi(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Fo(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function Vo(e){this.l=e.$b||null,this.j=e.ib||!1}function Zo(e,t){Wi.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=qo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Co.prototype.cancel=function(){if(this.i=Do(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},Lo.prototype.stringify=function(e){return Ur.JSON.stringify(e,void 0)},Lo.prototype.parse=function(e){return Ur.JSON.parse(e,void 0)},Gr(Vo,Ns),Vo.prototype.g=function(){return new Zo(this.l,this.j)},Vo.prototype.i=function(e){return function(){return e}}({}),Gr(Zo,Wi);var qo=0;function jo(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Bo(e){e.readyState=4,e.l=null,e.j=null,e.A=null,$o(e)}function $o(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Pr=Zo.prototype).open=function(e,t){if(this.readyState!=qo)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,$o(this)},Pr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Ur).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Pr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bo(this)),this.readyState=qo},Pr.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,$o(this)),this.g&&(this.readyState=3,$o(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ur.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;jo(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Pr.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Bo(this):$o(this),3==this.readyState&&jo(this)}},Pr.Ua=function(e){this.g&&(this.response=this.responseText=e,Bo(this))},Pr.Ta=function(e){this.g&&(this.response=e,Bo(this))},Pr.ha=function(){this.g&&Bo(this)},Pr.setRequestHeader=function(e,t){this.v.append(e,t)},Pr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Pr.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Zo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var zo=Ur.JSON.parse;function Ho(e){Wi.call(this),this.headers=new eo,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Go,this.K=this.L=!1}Gr(Ho,Wi);var Go="",Ko=/^https?$/i,Wo=["POST","PUT"];function Jo(e){return"content-type"==e.toLowerCase()}function Yo(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Qo(e),ea(e)}function Qo(e){e.D||(e.D=!0,Ji(e,"complete"),Ji(e,"error"))}function Xo(e){if(e.h&&void 0!==Mr&&(!e.C[1]||4!=na(e)||2!=e.ba()))if(e.v&&4==na(e))ls(e.Fa,0,e);else if(Ji(e,"readystatechange"),4==na(e)){e.h=!1;try{const u=e.ba();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===u){var i=String(e.H).match(ro)[1]||null;if(!i&&Ur.self&&Ur.self.location){var s=Ur.self.location.protocol;i=s.substr(0,s.length-1)}r=!Ko.test(i?i.toLowerCase():"")}n=r}if(n)Ji(e,"complete"),Ji(e,"success");else{e.m=6;try{var o=2<na(e)?e.g.statusText:""}catch(a){o=""}e.j=o+" ["+e.ba()+"]",Qo(e)}}finally{ea(e)}}}function ea(e,t){if(e.g){ta(e);const r=e.g,i=e.C[0]?Fr:null;e.g=null,e.C=null,t||Ji(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function ta(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Ur.clearTimeout(e.A),e.A=null)}function na(e){return e.g?e.g.readyState:0}function ra(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Go:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function ia(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){let t="";return ai(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):lo(e,t,n))}function sa(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function oa(e){this.za=0,this.l=[],this.h=new ys,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=sa("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=sa("baseRetryDelayMs",5e3,e),this.$a=sa("retryDelaySeedMs",1e4,e),this.Ya=sa("forwardChannelMaxRetries",2,e),this.ra=sa("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Co(e&&e.concurrentRequestLimit),this.Ca=new Mo,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function aa(e){if(ca(e),3==e.G){var t=e.V++,n=so(e.F);lo(n,"SID",e.J),lo(n,"RID",t),lo(n,"TYPE","terminate"),fa(e,n),(t=new Us(e,e.h,t,void 0)).K=2,t.v=ho(so(n)),n=!1,Ur.navigator&&Ur.navigator.sendBeacon&&(n=Ur.navigator.sendBeacon(t.v.toString(),"")),!n&&Ur.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ea(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Gs(t)}Sa(e)}function ua(e){e.g&&(ya(e),e.g.cancel(),e.g=null)}function ca(e){ua(e),e.u&&(Ur.clearTimeout(e.u),e.u=null),ba(e),e.i.cancel(),e.m&&("number"==typeof e.m&&Ur.clearTimeout(e.m),e.m=null)}function la(e,t){e.l.push(new class{constructor(e,t){this.h=e,this.g=t}}(e.Za++,t)),3==e.G&&ha(e)}function ha(e){xo(e.i)||e.m||(e.m=!0,is(e.Ha,e),e.C=0)}function da(e,t){var n;n=t?t.m:e.V++;const r=so(e.F);lo(r,"SID",e.J),lo(r,"RID",n),lo(r,"AID",e.U),fa(e,r),e.o&&e.s&&ia(r,e.o,e.s),n=new Us(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=pa(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Ro(e.i,n),js(n,r,t)}function fa(e,t){e.j&&Xs({},function(e,n){lo(t,n,e)})}function pa(e,t,n){n=Math.min(e.l.length,n);var r=e.j?zr(e.j.Oa,e.j,e):null;e:{var i=e.l;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=t,0>n)t=Math.max(0,i[o].h-100),s=!1;else try{Uo(a,e,"req"+n+"_")}catch(Qa){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,r}function ga(e){e.g||e.u||(e.Y=1,is(e.Ga,e),e.A=0)}function ma(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=Cs(zr(e.Ga,e),_a(e,e.A)),e.A++,0))}function ya(e){null!=e.B&&(Ur.clearTimeout(e.B),e.B=null)}function va(e){e.g=new Us(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=so(e.oa);lo(t,"RID","rpc"),lo(t,"SID",e.J),lo(t,"CI",e.N?"0":"1"),lo(t,"AID",e.U),fa(e,t),lo(t,"TYPE","xmlhttp"),e.o&&e.s&&ia(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=ho(so(t)),n.s=null,n.U=!0,Bs(n,e)}function ba(e){null!=e.v&&(Ur.clearTimeout(e.v),e.v=null)}function wa(e,t){var n=null;if(e.g==t){ba(e),ya(e),e.g=null;var r=2}else{if(!Oo(e.i,t))return;n=t.D,Po(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Ji(r=_s(),new ks(r,n,t,i)),ha(e)}else ga(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(No(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=Cs(zr(e.Ha,e,t),_a(e,e.C)),e.C++,0)))}(e,t)||2==r&&ma(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ta(e,5);break;case 4:Ta(e,10);break;case 3:Ta(e,6);break;default:Ta(e,2)}}function _a(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Ta(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=zr(e.jb,e);n||(n=new io("//www.google.com/images/cleardot.gif"),Ur.location&&"http"==Ur.location.protocol||oo(n,"https"),ho(n)),function(e,t){const n=new ys;if(Ur.Image){const r=new Image;r.onload=Hr(Fo,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Hr(Fo,n,r,"TestLoadImage: error",!1,t),r.onabort=Hr(Fo,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Hr(Fo,n,r,"TestLoadImage: timeout",!1,t),Ur.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Es(2);e.G=0,e.j&&e.j.va(t),Sa(e),ca(e)}function Sa(e){e.G=0,e.I=-1,e.j&&(0==Do(e.i).length&&0==e.l.length||(e.i.i.length=0,Xr(e.l),e.l.length=0),e.j.ua())}function Ia(e,t,n){let r=function(e){return e instanceof io?so(e):new io(e,void 0)}(n);if(""!=r.i)t&&ao(r,t+"."+r.i),uo(r,r.m);else{const e=Ur.location;r=function(e,t,n,r){var i=new io(null,void 0);return e&&oo(i,e),t&&ao(i,t),n&&uo(i,n),r&&(i.l=r),i}(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,n)}return e.aa&&ai(e.aa,function(e,t){lo(r,t,e)}),n=e.sa,(t=e.D)&&n&&lo(r,t,n),lo(r,"VER",e.ma),fa(e,r),r}function Ea(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Ho(n&&e.Ba&&!e.qa?new Vo({ib:!0}):e.qa)).L=e.H,t}function ka(){}function Ca(){if(gi&&!(10<=Number(Ei)))throw Error("Environmental error: no available transport.")}function Aa(e,t){Wi.call(this),this.g=new oa(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!ei(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ei(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Oa(this)}function xa(e){Ds.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Na(){Ls.call(this),this.status=1}function Oa(e){this.g=e}(Pr=Ho.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Rs.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:Rs),this.g.onreadystatechange=zr(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void Yo(this,s)}e=n||"";const i=new eo(this.headers);r&&Xs(r,function(e,t){i.set(t,e)}),r=function(e){e:{var t=Jo;const n=e.length,r="string"==typeof e?e.split(""):e;for(let i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=Ur.FormData&&e instanceof Ur.FormData,!(0<=Jr(Wo,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ta(this),0<this.B&&((this.K=function(e){return gi&&function(){return e=Ii,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let e=0;const t=ni(String(di)).split("."),n=ni("9").split("."),r=Math.max(t.length,n.length);for(let o=0;0==e&&o<r;o++){var i=t[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;e=ii(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||ii(0==i[2].length,0==s[2].length)||ii(i[2],s[2]),i=i[3],s=s[3]}while(0==e)}return 0<=e}();var e}()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=zr(this.pa,this)):this.A=ls(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Yo(this,s)}},Pr.pa=function(){void 0!==Mr&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ji(this,"timeout"),this.abort(8))},Pr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ji(this,"complete"),Ji(this,"abort"),ea(this))},Pr.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ea(this,!0)),Ho.Z.M.call(this)},Pr.Fa=function(){this.s||(this.F||this.v||this.l?Xo(this):this.cb())},Pr.cb=function(){Xo(this)},Pr.ba=function(){try{return 2<na(this)?this.g.status:-1}catch(fi){return-1}},Pr.ga=function(){try{return this.g?this.g.responseText:""}catch(fi){return""}},Pr.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),zo(t)}},Pr.Da=function(){return this.m},Pr.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Pr=oa.prototype).ma=8,Pr.G=1,Pr.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Pr.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Us(this,this.h,e,void 0);let s=this.s;if(this.P&&(s?(s=ui(s),li(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=pa(this,i,t),lo(n=so(this.F),"RID",e),lo(n,"CVER",22),this.D&&lo(n,"X-HTTP-Session-Id",this.D),fa(this,n),this.o&&s&&ia(n,this.o,s),Ro(this.i,i),this.Ra&&lo(n,"TYPE","init"),this.ja?(lo(n,"$req",t),lo(n,"SID","null"),i.$=!0,js(i,n,null)):js(i,n,t),this.G=2}}else 3==this.G&&(e?da(this,e):0==this.l.length||xo(this.i)||da(this))},Pr.Ga=function(){if(this.u=null,va(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Cs(zr(this.bb,this),e)}},Pr.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Es(10),ua(this),va(this))},Pr.ab=function(){null!=this.v&&(this.v=null,ua(this),ma(this),Es(19))},Pr.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Es(2)):(this.h.info("Failed to ping google.com"),Es(1))},(Pr=ka.prototype).xa=function(){},Pr.wa=function(){},Pr.va=function(){},Pr.ua=function(){},Pr.Oa=function(){},Ca.prototype.g=function(e,t){return new Aa(e,t)},Gr(Aa,Wi),Aa.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),is(zr(e.hb,e,t))),Es(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Ia(e,null,e.W),ha(e)},Aa.prototype.close=function(){aa(this.g)},Aa.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,la(this.g,t)}else this.v?((t={}).__data__=Qi(e),la(this.g,t)):la(this.g,e)},Aa.prototype.M=function(){this.g.j=null,delete this.j,aa(this.g),delete this.g,Aa.Z.M.call(this)},Gr(xa,Ds),Gr(Na,Ls),Gr(Oa,ka),Oa.prototype.xa=function(){Ji(this.g,"a")},Oa.prototype.wa=function(e){Ji(this.g,new xa(e))},Oa.prototype.va=function(e){Ji(this.g,new Na(e))},Oa.prototype.ua=function(){Ji(this.g,"b")},Ca.prototype.createWebChannel=Ca.prototype.g,Aa.prototype.send=Aa.prototype.u,Aa.prototype.open=Aa.prototype.m,Aa.prototype.close=Aa.prototype.close,As.NO_ERROR=0,As.TIMEOUT=8,As.HTTP_ERROR=6,xs.COMPLETE="complete",Os.EventType=Ps,Ps.OPEN="a",Ps.CLOSE="b",Ps.ERROR="c",Ps.MESSAGE="d",Wi.prototype.listen=Wi.prototype.N,Ho.prototype.listenOnce=Ho.prototype.O,Ho.prototype.getLastError=Ho.prototype.La,Ho.prototype.getLastErrorCode=Ho.prototype.Da,Ho.prototype.getStatus=Ho.prototype.ba,Ho.prototype.getResponseJson=Ho.prototype.Qa,Ho.prototype.getResponseText=Ho.prototype.ga,Ho.prototype.send=Ho.prototype.ea;var Ra=Lr.createWebChannelTransport=function(){return new Ca},Pa=Lr.getStatEventTarget=function(){return _s()},Da=Lr.ErrorCode=As,La=Lr.EventType=xs,Ma=Lr.Event=bs,Ua=Lr.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Fa=Lr.FetchXmlHttpFactory=Vo,Va=Lr.WebChannel=Os,Za=Lr.XhrIo=Ho;class qa{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qa.UNAUTHENTICATED=new qa(null),qa.GOOGLE_CREDENTIALS=new qa("google-credentials-uid"),qa.FIRST_PARTY=new qa("first-party-uid"),qa.MOCK_USER=new qa("mock-user");let ja="9.8.0";const Ba=new Et.Yd("@firebase/firestore");function $a(){return Ba.logLevel}function za(e,...t){if(Ba.logLevel<=Et.in.DEBUG){const n=t.map(Ka);Ba.debug(`Firestore (${ja}): ${e}`,...n)}}function Ha(e,...t){if(Ba.logLevel<=Et.in.ERROR){const n=t.map(Ka);Ba.error(`Firestore (${ja}): ${e}`,...n)}}function Ga(e,...t){if(Ba.logLevel<=Et.in.WARN){const n=t.map(Ka);Ba.warn(`Firestore (${ja}): ${e}`,...n)}}function Ka(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Wa(e="Unexpected state"){const t=`FIRESTORE (${ja}) INTERNAL ASSERTION FAILED: `+e;throw Ha(t),new Error(t)}function Ja(e,t){e||Wa()}function Ya(e,t){return e}const Qa={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xa extends St.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class eu{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class tu{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(qa.UNAUTHENTICATED))}shutdown(){}}class ru{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class iu{constructor(e){this.t=e,this.currentUser=qa.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var n=this;let r=this.i;const i=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve();let s=new eu;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new eu,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const t=s;e.enqueueRetryable((0,At.Z)(function*(){yield t.promise,yield i(n.currentUser)}))},a=e=>{za("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(za("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new eu)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(za("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ja("string"==typeof t.accessToken),new tu(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ja(null===e||"string"==typeof e),new qa(e)}}class su{constructor(e,t,n){this.type="FirstParty",this.user=qa.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class ou{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new su(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(qa.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class au{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uu{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const n=e=>{null!=e.error&&za("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.p;return this.p=e.token,za("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{za("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.g.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.g.getImmediate({optional:!0});e?r(e):za("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Ja("string"==typeof e.token),this.p=e.token,new au(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class cu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.I(e),this.T=e=>t.writeSequenceNumber(e))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function lu(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}cu.A=-1;class hu{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=lu(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function du(e,t){return e<t?-1:e>t?1:0}function fu(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function pu(e){return e+"\0"}class gu{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Xa(Qa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Xa(Qa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Xa(Qa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xa(Qa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gu.fromMillis(Date.now())}static fromDate(e){return gu.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new gu(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?du(this.nanoseconds,e.nanoseconds):du(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mu{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mu(e)}static min(){return new mu(new gu(0,0))}static max(){return new mu(new gu(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function yu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function vu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function bu(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class wu{constructor(e,t,n){void 0===t?t=0:t>e.length&&Wa(),void 0===n?n=e.length-t:n>e.length-t&&Wa(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===wu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wu?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class _u extends wu{construct(e,t,n){return new _u(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Xa(Qa.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new _u(t)}static emptyPath(){return new _u([])}}const Tu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Su extends wu{construct(e,t,n){return new Su(e,t,n)}static isValidIdentifier(e){return Tu.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Su.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Su(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Xa(Qa.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Xa(Qa.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Xa(Qa.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Xa(Qa.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Su(t)}static emptyPath(){return new Su([])}}class Iu{constructor(e){this.fields=e,e.sort(Su.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fu(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Eu{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Eu(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Eu(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return du(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Eu.EMPTY_BYTE_STRING=new Eu("");const ku=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cu(e){if(Ja(!!e),"string"==typeof e){let t=0;const n=ku.exec(e);if(Ja(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Au(e.seconds),nanos:Au(e.nanos)}}function Au(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function xu(e){return"string"==typeof e?Eu.fromBase64String(e):Eu.fromUint8Array(e)}function Nu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ou(e){const t=e.mapValue.fields.__previous_value__;return Nu(t)?Ou(t):t}function Ru(e){const t=Cu(e.mapValue.fields.__local_write_time__.timestampValue);return new gu(t.seconds,t.nanos)}class Pu{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class Du{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Du("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Du&&e.projectId===this.projectId&&e.database===this.database}}function Lu(e){return null==e}function Mu(e){return 0===e&&1/e==-1/0}function Uu(e){return"number"==typeof e&&Number.isInteger(e)&&!Mu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class Fu{constructor(e){this.path=e}static fromPath(e){return new Fu(_u.fromString(e))}static fromName(e){return new Fu(_u.fromString(e).popFirst(5))}static empty(){return new Fu(_u.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===_u.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return _u.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fu(new _u(e.slice()))}}const Vu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Zu={nullValue:"NULL_VALUE"};function qu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Nu(e)?4:tc(e)?9007199254740991:10:Wa()}function ju(e,t){if(e===t)return!0;const n=qu(e);if(n!==qu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ru(e).isEqual(Ru(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Cu(e.timestampValue),r=Cu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return xu(e.bytesValue).isEqual(xu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Au(e.geoPointValue.latitude)===Au(t.geoPointValue.latitude)&&Au(e.geoPointValue.longitude)===Au(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Au(e.integerValue)===Au(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Au(e.doubleValue),r=Au(t.doubleValue);return n===r?Mu(n)===Mu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return fu(e.arrayValue.values||[],t.arrayValue.values||[],ju);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(yu(n)!==yu(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ju(n[i],r[i])))return!1;return!0}(e,t);default:return Wa()}}function Bu(e,t){return void 0!==(e.values||[]).find(e=>ju(e,t))}function $u(e,t){if(e===t)return 0;const n=qu(e),r=qu(t);if(n!==r)return du(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return du(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Au(e.integerValue||e.doubleValue),r=Au(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return zu(e.timestampValue,t.timestampValue);case 4:return zu(Ru(e),Ru(t));case 5:return du(e.stringValue,t.stringValue);case 6:return function(e,t){const n=xu(e),r=xu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=du(n[i],r[i]);if(0!==e)return e}return du(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=du(Au(e.latitude),Au(t.latitude));return 0!==n?n:du(Au(e.longitude),Au(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=$u(n[i],r[i]);if(e)return e}return du(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Vu.mapValue&&t===Vu.mapValue)return 0;if(e===Vu.mapValue)return 1;if(t===Vu.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=du(r[o],s[o]);if(0!==e)return e;const t=$u(n[r[o]],i[s[o]]);if(0!==t)return t}return du(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Wa()}}function zu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return du(e,t);const n=Cu(e),r=Cu(t),i=du(n.seconds,r.seconds);return 0!==i?i:du(n.nanos,r.nanos)}function Hu(e){return Gu(e)}function Gu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Cu(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?xu(e.bytesValue).toBase64():"referenceValue"in e?Fu.fromName(e.referenceValue).toString():"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Gu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Gu(e.fields[i])}`;return n+"}"}(e.mapValue):Wa();var t}function Ku(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Wu(e){return!!e&&"integerValue"in e}function Ju(e){return!!e&&"arrayValue"in e}function Yu(e){return!!e&&"nullValue"in e}function Qu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Xu(e){return!!e&&"mapValue"in e}function ec(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return vu(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=ec(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ec(e.arrayValue.values[n]);return t}return Object.assign({},e)}function tc(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function nc(e){return"nullValue"in e?Zu:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ku(Du.empty(),Fu.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Wa()}function rc(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ku(Du.empty(),Fu.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Vu:Wa()}function ic(e,t){const n=$u(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function sc(e,t){const n=$u(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class oc{constructor(e){this.value=e}static empty(){return new oc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Xu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ec(t)}setAll(e){let t=Su.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ec(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Xu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ju(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Xu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){vu(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new oc(ec(this.value))}}function ac(e){const t=[];return vu(e.fields,(e,n)=>{const r=new Su([e]);if(Xu(n)){const e=ac(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Iu(t)}class uc{constructor(e,t,n,r,i,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.data=i,this.documentState=s}static newInvalidDocument(e){return new uc(e,0,mu.min(),mu.min(),oc.empty(),0)}static newFoundDocument(e,t,n){return new uc(e,1,t,mu.min(),n,0)}static newNoDocument(e,t){return new uc(e,2,t,mu.min(),oc.empty(),0)}static newUnknownDocument(e,t){return new uc(e,3,t,mu.min(),oc.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=oc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=oc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof uc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new uc(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class cc{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function lc(e){return e.fields.find(e=>2===e.kind)}function hc(e){return e.fields.filter(e=>2!==e.kind)}cc.UNKNOWN_ID=-1;class dc{constructor(e,t){this.fieldPath=e,this.kind=t}}class fc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new fc(0,mc.min())}}function pc(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=mu.fromTimestamp(1e9===r?new gu(n+1,0):new gu(n,r));return new mc(i,Fu.empty(),t)}function gc(e){return new mc(e.readTime,e.key,-1)}class mc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new mc(mu.min(),Fu.empty(),-1)}static max(){return new mc(mu.max(),Fu.empty(),-1)}}function yc(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Fu.comparator(e.documentKey,t.documentKey),0!==n?n:du(e.largestBatchId,t.largestBatchId))}class vc{constructor(e,t){this.comparator=e,this.root=t||wc.EMPTY}insert(e,t){return new vc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,wc.BLACK,null,null))}remove(e){return new vc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bc(this.root,e,this.comparator,!1)}getReverseIterator(){return new bc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bc(this.root,e,this.comparator,!0)}}class bc{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wc{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:wc.RED,this.left=null!=r?r:wc.EMPTY,this.right=null!=i?i:wc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new wc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return wc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return wc.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Wa();if(this.right.isRed())throw Wa();const e=this.left.check();if(e!==this.right.check())throw Wa();return e+(this.isRed()?0:1)}}wc.EMPTY=null,wc.RED=!0,wc.BLACK=!1,wc.EMPTY=new class{constructor(){this.size=0}get key(){throw Wa()}get value(){throw Wa()}get color(){throw Wa()}get left(){throw Wa()}get right(){throw Wa()}copy(e,t,n,r,i){return this}insert(e,t,n){return new wc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _c{constructor(e){this.comparator=e,this.data=new vc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tc(this.data.getIterator())}getIteratorFrom(e){return new Tc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof _c))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _c(this.comparator);return t.data=e,t}}class Tc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Sc(e){return e.hasNext()?e.getNext():void 0}class Ic{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.P=null}}function Ec(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Ic(e,t,n,r,i,s,o)}function kc(e){const t=Ya(e);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>{return(t=e).field.canonicalString()+t.op.toString()+Hu(t.value);var t}).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Lu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Hu(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Hu(e)).join(",")),t.P=e}return t.P}function Cc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++)if(!Bc(e.orderBy[i],t.orderBy[i]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if((n=e.filters[i]).op!==(r=t.filters[i]).op||!n.field.isEqual(r.field)||!ju(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!zc(e.startAt,t.startAt)&&zc(e.endAt,t.endAt)}function Ac(e){return Fu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function xc(e,t){return e.filters.filter(e=>e instanceof Rc&&e.field.isEqual(t))}function Nc(e,t,n){let r=Zu,i=!0;for(const s of xc(e,t)){let e=Zu,t=!0;switch(s.op){case"<":case"<=":e=nc(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Zu}ic({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];ic({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Oc(e,t,n){let r=Vu,i=!0;for(const s of xc(e,t)){let e=Vu,t=!0;switch(s.op){case">=":case">":e=rc(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Vu}sc({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];sc({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Rc extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,n):new Pc(e,t,n):"array-contains"===t?new Uc(e,n):"in"===t?new Fc(e,n):"not-in"===t?new Vc(e,n):"array-contains-any"===t?new Zc(e,n):new Rc(e,t,n)}static V(e,t,n){return"in"===t?new Dc(e,n):new Lc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v($u(t,this.value)):null!==t&&qu(this.value)===qu(t)&&this.v($u(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Wa()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Pc extends Rc{constructor(e,t,n){super(e,t,n),this.key=Fu.fromName(n.referenceValue)}matches(e){const t=Fu.comparator(e.key,this.key);return this.v(t)}}class Dc extends Rc{constructor(e,t){super(e,"in",t),this.keys=Mc(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Lc extends Rc{constructor(e,t){super(e,"not-in",t),this.keys=Mc(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Mc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Fu.fromName(e.referenceValue))}class Uc extends Rc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ju(t)&&Bu(t.arrayValue,this.value)}}class Fc extends Rc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Bu(this.value.arrayValue,t)}}class Vc extends Rc{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Bu(this.value.arrayValue,t)}}class Zc extends Rc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ju(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Bu(this.value.arrayValue,e))}}class qc{constructor(e,t){this.position=e,this.inclusive=t}}class jc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Bc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function $c(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Fu.comparator(Fu.fromName(o.referenceValue),n.key):$u(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function zc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ju(e.position[n],t.position[n]))return!1;return!0}class Hc{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.D=null,this.C=null}}function Gc(e,t,n,r,i,s,o,a){return new Hc(e,t,n,r,i,s,o,a)}function Kc(e){return new Hc(e)}function Wc(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Jc(e){for(const t of e.filters)if(t.S())return t.field;return null}function Yc(e){return null!==e.collectionGroup}function Qc(e){const t=Ya(e);if(null===t.D){t.D=[];const e=Jc(t),n=Wc(t);if(null!==e&&null===n)e.isKeyField()||t.D.push(new jc(e)),t.D.push(new jc(Su.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.D.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new jc(Su.keyField(),e))}}}return t.D}function Xc(e){const t=Ya(e);if(!t.C)if("F"===t.limitType)t.C=Ec(t.path,t.collectionGroup,Qc(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of Qc(t))e.push(new jc(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new qc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new qc(t.startAt.position,t.startAt.inclusive):null;t.C=Ec(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.C}function el(e,t,n){return new Hc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function tl(e,t){return Cc(Xc(e),Xc(t))&&e.limitType===t.limitType}function nl(e){return`${kc(Xc(e))}|lt:${e.limitType}`}function rl(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>{return`${(t=e).field.canonicalString()} ${t.op} ${Hu(t.value)}`;var t}).join(", ")}]`),Lu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Hu(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Hu(e)).join(",")),`Target(${t})`}(Xc(e))}; limitType=${e.limitType})`}function il(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Fu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=$c(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Qc(e),t)||e.endAt&&!function(e,t,n){const r=$c(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Qc(e),t))}(e,t)}function sl(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ol(e){return(t,n)=>{let r=!1;for(const i of Qc(e)){const e=al(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function al(e,t,n){const r=e.field.isKeyField()?Fu.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?$u(r,i):Wa()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Wa()}}function ul(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mu(t)?"-0":t}}function cl(e){return{integerValue:""+e}}function ll(e,t){return Uu(t)?cl(t):ul(e,t)}class hl{constructor(){this._=void 0}}function dl(e,t,n){return e instanceof gl?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ml?yl(e,t):e instanceof vl?bl(e,t):function(e,t){const n=pl(e,t),r=_l(n)+_l(e.k);return Wu(n)&&Wu(e.k)?cl(r):ul(e.M,r)}(e,t)}function fl(e,t,n){return e instanceof ml?yl(e,t):e instanceof vl?bl(e,t):n}function pl(e,t){return e instanceof wl?Wu(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class gl extends hl{}class ml extends hl{constructor(e){super(),this.elements=e}}function yl(e,t){const n=Tl(t);for(const r of e.elements)n.some(e=>ju(e,r))||n.push(r);return{arrayValue:{values:n}}}class vl extends hl{constructor(e){super(),this.elements=e}}function bl(e,t){let n=Tl(t);for(const r of e.elements)n=n.filter(e=>!ju(e,r));return{arrayValue:{values:n}}}class wl extends hl{constructor(e,t){super(),this.M=e,this.k=t}}function _l(e){return Au(e.integerValue||e.doubleValue)}function Tl(e){return Ju(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Sl{constructor(e,t){this.field=e,this.transform=t}}class Il{constructor(e,t){this.version=e,this.transformResults=t}}class El{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new El}static exists(e){return new El(void 0,e)}static updateTime(e){return new El(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Cl{}function Al(e,t,n){e instanceof Pl?function(e,t,n){const r=e.value.clone(),i=Ml(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Dl?function(e,t,n){if(!kl(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ml(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ll(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function xl(e,t,n){e instanceof Pl?function(e,t,n){if(!kl(e.precondition,t))return;const r=e.value.clone(),i=Ul(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Rl(t),r).setHasLocalMutations()}(e,t,n):e instanceof Dl?function(e,t,n){if(!kl(e.precondition,t))return;const r=Ul(e.fieldTransforms,n,t),i=t.data;i.setAll(Ll(e)),i.setAll(r),t.convertToFoundDocument(Rl(t),i).setHasLocalMutations()}(e,t,n):function(e,t){kl(e.precondition,t)&&t.convertToNoDocument(mu.min())}(e,t)}function Nl(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=pl(r.transform,e||null);null!=i&&(null==n&&(n=oc.empty()),n.set(r.field,i))}return n||null}function Ol(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&fu(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ml&&t instanceof ml||e instanceof vl&&t instanceof vl?fu(e.elements,t.elements,ju):e instanceof wl&&t instanceof wl?ju(e.k,t.k):e instanceof gl&&t instanceof gl}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Rl(e){return e.isFoundDocument()?e.version:mu.min()}class Pl extends Cl{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}}class Dl extends Cl{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function Ll(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Ml(e,t,n){const r=new Map;Ja(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,fl(o,a,n[i]))}return r}function Ul(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,dl(e,s,t))}return r}class Fl extends Cl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Vl extends Cl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Zl{constructor(e){this.count=e}}var ql,jl;function Bl(e){switch(e){default:return Wa();case Qa.CANCELLED:case Qa.UNKNOWN:case Qa.DEADLINE_EXCEEDED:case Qa.RESOURCE_EXHAUSTED:case Qa.INTERNAL:case Qa.UNAVAILABLE:case Qa.UNAUTHENTICATED:return!1;case Qa.INVALID_ARGUMENT:case Qa.NOT_FOUND:case Qa.ALREADY_EXISTS:case Qa.PERMISSION_DENIED:case Qa.FAILED_PRECONDITION:case Qa.ABORTED:case Qa.OUT_OF_RANGE:case Qa.UNIMPLEMENTED:case Qa.DATA_LOSS:return!0}}function $l(e){if(void 0===e)return Ha("GRPC error has no .code"),Qa.UNKNOWN;switch(e){case ql.OK:return Qa.OK;case ql.CANCELLED:return Qa.CANCELLED;case ql.UNKNOWN:return Qa.UNKNOWN;case ql.DEADLINE_EXCEEDED:return Qa.DEADLINE_EXCEEDED;case ql.RESOURCE_EXHAUSTED:return Qa.RESOURCE_EXHAUSTED;case ql.INTERNAL:return Qa.INTERNAL;case ql.UNAVAILABLE:return Qa.UNAVAILABLE;case ql.UNAUTHENTICATED:return Qa.UNAUTHENTICATED;case ql.INVALID_ARGUMENT:return Qa.INVALID_ARGUMENT;case ql.NOT_FOUND:return Qa.NOT_FOUND;case ql.ALREADY_EXISTS:return Qa.ALREADY_EXISTS;case ql.PERMISSION_DENIED:return Qa.PERMISSION_DENIED;case ql.FAILED_PRECONDITION:return Qa.FAILED_PRECONDITION;case ql.ABORTED:return Qa.ABORTED;case ql.OUT_OF_RANGE:return Qa.OUT_OF_RANGE;case ql.UNIMPLEMENTED:return Qa.UNIMPLEMENTED;case ql.DATA_LOSS:return Qa.DATA_LOSS;default:return Wa()}}(jl=ql||(ql={}))[jl.OK=0]="OK",jl[jl.CANCELLED=1]="CANCELLED",jl[jl.UNKNOWN=2]="UNKNOWN",jl[jl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jl[jl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jl[jl.NOT_FOUND=5]="NOT_FOUND",jl[jl.ALREADY_EXISTS=6]="ALREADY_EXISTS",jl[jl.PERMISSION_DENIED=7]="PERMISSION_DENIED",jl[jl.UNAUTHENTICATED=16]="UNAUTHENTICATED",jl[jl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jl[jl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jl[jl.ABORTED=10]="ABORTED",jl[jl.OUT_OF_RANGE=11]="OUT_OF_RANGE",jl[jl.UNIMPLEMENTED=12]="UNIMPLEMENTED",jl[jl.INTERNAL=13]="INTERNAL",jl[jl.UNAVAILABLE=14]="UNAVAILABLE",jl[jl.DATA_LOSS=15]="DATA_LOSS";class zl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){vu(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return bu(this.inner)}size(){return this.innerSize}}const Hl=new vc(Fu.comparator);function Gl(){return Hl}const Kl=new vc(Fu.comparator);function Wl(...e){let t=Kl;for(const n of e)t=t.insert(n.key,n);return t}function Jl(){return new zl(e=>e.toString(),(e,t)=>e.isEqual(t))}const Yl=new vc(Fu.comparator),Ql=new _c(Fu.comparator);function Xl(...e){let t=Ql;for(const n of e)t=t.add(n);return t}const eh=new _c(du);function th(){return eh}class nh{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,rh.createSynthesizedTargetChangeForCurrentChange(e,t)),new nh(mu.min(),n,th(),Gl(),Xl())}}class rh{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t){return new rh(Eu.EMPTY_BYTE_STRING,t,Xl(),Xl(),Xl())}}class ih{constructor(e,t,n,r){this.O=e,this.removedTargetIds=t,this.key=n,this.F=r}}class sh{constructor(e,t){this.targetId=e,this.$=t}}class oh{constructor(e,t,n=Eu.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ah{constructor(){this.B=0,this.L=lh(),this.U=Eu.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Xl(),t=Xl(),n=Xl();return this.L.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Wa()}}),new rh(this.U,this.q,e,t,n)}J(){this.K=!1,this.L=lh()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class uh{constructor(e){this.nt=e,this.st=new Map,this.it=Gl(),this.rt=ch(),this.ot=new _c(du)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const n=this.lt(t);switch(e.state){case 0:this.ft(t)&&n.W(e.resumeToken);break;case 1:n.tt(),n.G||n.J(),n.W(e.resumeToken);break;case 2:n.tt(),n.G||this.removeTarget(t);break;case 3:this.ft(t)&&(n.et(),n.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),n.W(e.resumeToken));break;default:Wa()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((e,n)=>{this.ft(n)&&t(n)})}_t(e){const t=e.targetId,n=e.$.count,r=this.wt(t);if(r){const e=r.target;if(Ac(e))if(0===n){const n=new Fu(e.path);this.ct(t,n,uc.newNoDocument(n,mu.min()))}else Ja(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((n,r)=>{const i=this.wt(r);if(i){if(n.current&&Ac(i.target)){const t=new Fu(i.target.path);null!==this.it.get(t)||this.It(r,t)||this.ct(r,t,uc.newNoDocument(t,e))}n.j&&(t.set(r,n.H()),n.J())}});let n=Xl();this.rt.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.wt(e);return!t||2===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.it.forEach((t,n)=>n.setReadTime(e));const r=new nh(e,t,this.ot,this.it,n);return this.it=Gl(),this.rt=ch(),this.ot=new _c(du),r}at(e,t){if(!this.ft(e))return;const n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,n){if(!this.ft(e))return;const r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new ah,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new _c(du),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||za("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new ah),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function ch(){return new vc(Fu.comparator)}function lh(){return new vc(Fu.comparator)}const hh={asc:"ASCENDING",desc:"DESCENDING"},dh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class fh{constructor(e,t){this.databaseId=e,this.N=t}}function ph(e,t){return e.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function gh(e,t){return e.N?t.toBase64():t.toUint8Array()}function mh(e,t){return ph(e,t.toTimestamp())}function yh(e){return Ja(!!e),mu.fromTimestamp(function(e){const t=Cu(e);return new gu(t.seconds,t.nanos)}(e))}function vh(e,t){return function(e){return new _u(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function bh(e){const t=_u.fromString(e);return Ja(qh(t)),t}function wh(e,t){return vh(e.databaseId,t.path)}function _h(e,t){const n=bh(t);if(n.get(1)!==e.databaseId.projectId)throw new Xa(Qa.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Xa(Qa.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Fu(Eh(n))}function Th(e,t){return vh(e.databaseId,t)}function Sh(e){const t=bh(e);return 4===t.length?_u.emptyPath():Eh(t)}function Ih(e){return new _u(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Eh(e){return Ja(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function kh(e,t,n){return{name:wh(e,t),fields:n.value.mapValue.fields}}function Ch(e,t,n){const r=_h(e,t.name),i=yh(t.updateTime),s=new oc({mapValue:{fields:t.fields}}),o=uc.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Ah(e,t){let n;if(t instanceof Pl)n={update:kh(e,t.key,t.value)};else if(t instanceof Fl)n={delete:wh(e,t.key)};else if(t instanceof Dl)n={update:kh(e,t.key,t.data),updateMask:Zh(t.fieldMask)};else{if(!(t instanceof Vl))return Wa();n={verify:wh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof gl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ml)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof vl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof wl)return{fieldPath:t.field.canonicalString(),increment:n.k};throw Wa()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:mh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Wa()}(e,t.precondition)),n}function xh(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?El.updateTime(yh(e.updateTime)):void 0!==e.exists?El.exists(e.exists):El.none()}(t.currentDocument):El.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;"setToServerValue"in t?(Ja("REQUEST_TIME"===t.setToServerValue),n=new gl):"appendMissingElements"in t?n=new ml(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new vl(t.removeAllFromArray.values||[]):"increment"in t?n=new wl(e,t.increment):Wa();const r=Su.fromServerFormat(t.fieldPath);return new Sl(r,n)}(e,t)):[];if(t.update){const i=_h(e,t.update.name),s=new oc({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){return new Iu((e.fieldPaths||[]).map(e=>Su.fromServerFormat(e)))}(t.updateMask);return new Dl(i,s,e,n,r)}return new Pl(i,s,n,r)}if(t.delete){const r=_h(e,t.delete);return new Fl(r,n)}if(t.verify){const r=_h(e,t.verify);return new Vl(r,n)}return Wa()}function Nh(e,t){return{documents:[Th(e,t.path)]}}function Oh(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Th(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Th(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map(e=>function(e){if("=="===e.op){if(Qu(e.value))return{unaryFilter:{field:Mh(e.field),op:"IS_NAN"}};if(Yu(e.value))return{unaryFilter:{field:Mh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Qu(e.value))return{unaryFilter:{field:Mh(e.field),op:"IS_NOT_NAN"}};if(Yu(e.value))return{unaryFilter:{field:Mh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mh(e.field),op:Lh(e.op),value:e.value}}}(e));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Mh(e.field),direction:Dh(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(e,t){return e.N||Lu(t)?t:{value:t}}(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Rh(e){let t=Sh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ja(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=Ph(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>function(e){return new jc(Uh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Lu(t)?null:t}(n.limit));let u=null;n.startAt&&(u=function(e){return new qc(e.values||[],!!e.before)}(n.startAt));let c=null;return n.endAt&&(c=function(e){return new qc(e.values||[],!e.before)}(n.endAt)),Gc(t,i,o,s,a,"F",u,c)}function Ph(e){return e?void 0!==e.unaryFilter?[Vh(e)]:void 0!==e.fieldFilter?[Fh(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(e=>Ph(e)).reduce((e,t)=>e.concat(t)):Wa():[]}function Dh(e){return hh[e]}function Lh(e){return dh[e]}function Mh(e){return{fieldPath:e.canonicalString()}}function Uh(e){return Su.fromServerFormat(e.fieldPath)}function Fh(e){return Rc.create(Uh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Wa()}}(e.fieldFilter.op),e.fieldFilter.value)}function Vh(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Uh(e.unaryFilter.field);return Rc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Uh(e.unaryFilter.field);return Rc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Uh(e.unaryFilter.field);return Rc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Uh(e.unaryFilter.field);return Rc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Wa()}}function Zh(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function qh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function jh(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=$h(t)),t=Bh(e.get(n),t);return $h(t)}function Bh(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function $h(e){return e+"\x01\x01"}function zh(e){const t=e.length;if(Ja(t>=2),2===t)return Ja("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),_u.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Wa(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Wa()}s=t+2}return new _u(r)}const Hh=["userId","batchId"];function Gh(e,t){return[e,jh(t)]}function Kh(e,t,n){return[e,jh(t),n]}const Wh={},Jh=["prefixPath","collectionGroup","readTime","documentId"],Yh=["prefixPath","collectionGroup","documentId"],Qh=["collectionGroup","readTime","prefixPath","documentId"],Xh=["canonicalId","targetId"],ed=["targetId","path"],td=["path","targetId"],nd=["collectionId","parent"],rd=["indexId","uid"],id=["uid","sequenceNumber"],sd=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],od=["indexId","uid","orderedDocumentKey"],ad=["userId","collectionPath","documentId"],ud=["userId","collectionPath","largestBatchId"],cd=["userId","collectionGroup","largestBatchId"],ld=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],hd=[...ld,"documentOverlays"],dd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fd=[...dd,"indexConfiguration","indexState","indexEntries"],pd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class md{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Wa(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new md((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof md?t:md.resolve(t)}catch(e){return md.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):md.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):md.reject(t)}static resolve(e){return new md((t,n)=>{t(e)})}static reject(e){return new md((t,n)=>{n(e)})}static waitFor(e){return new md((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=md.resolve(!1);for(const n of e)t=t.next(e=>e?md.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}}class yd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new eu,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new wd(e,t.error)):this.At.resolve()},this.transaction.onerror=t=>{const n=Ed(t.target.error);this.At.reject(new wd(e,n))}}static open(e,t,n,r){try{return new yd(t,e.transaction(r,n))}catch(e){throw new wd(t,e)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(za("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Td(t)}}class vd{constructor(e,t,n){this.name=e,this.version=t,this.Pt=n,12.2===vd.Vt((0,St.z$)())&&Ha("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return za("SimpleDb","Removing database:",e),Sd(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,St.hl)())return!1;if(vd.St())return!0;const e=(0,St.z$)(),t=vd.Vt(e),n=0<t&&t<10,r=vd.Dt(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}Nt(e){var t=this;return(0,At.Z)(function*(){return t.db||(za("SimpleDb","Opening database:",t.name),t.db=yield new Promise((n,r)=>{const i=indexedDB.open(t.name,t.version);i.onsuccess=e=>{n(e.target.result)},i.onblocked=()=>{r(new wd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=t=>{const n=t.target.error;r("VersionError"===n.name?new Xa(Qa.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new Xa(Qa.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new wd(e,n))},i.onupgradeneeded=e=>{za("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',e.oldVersion),t.Pt.kt(e.target.result,i.transaction,e.oldVersion,t.version).next(()=>{za("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=e=>t.Mt(e)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,n,r){var i=this;return(0,At.Z)(function*(){const s="readonly"===t;let o=0;for(;;){++o;try{i.db=yield i.Nt(e);const t=yd.open(i.db,e,s?"readonly":"readwrite",n),o=r(t).next(e=>(t.bt(),e)).catch(e=>(t.abort(e),md.reject(e))).toPromise();return o.catch(()=>{}),yield t.Rt,o}catch(e){const n="FirebaseError"!==e.name&&o<3;if(za("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),i.close(),!n)return Promise.reject(e)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class bd{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Sd(this.Ft.delete())}}class wd extends Xa{constructor(e,t){super(Qa.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function _d(e){return"IndexedDbTransactionError"===e.name}class Td{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(za("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(za("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Sd(n)}add(e){return za("SimpleDb","ADD",this.store.name,e,e),Sd(this.store.add(e))}get(e){return Sd(this.store.get(e)).next(t=>(void 0===t&&(t=null),za("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return za("SimpleDb","DELETE",this.store.name,e),Sd(this.store.delete(e))}count(){return za("SimpleDb","COUNT",this.store.name),Sd(this.store.count())}qt(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.Kt(e,(e,n)=>{t.push(n)}).next(()=>t)}{const e=this.store.getAll(n.range);return new md((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}}Gt(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new md((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}Qt(e,t){za("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.jt=!1;const r=this.cursor(n);return this.Kt(r,(e,t,n)=>n.delete())}Wt(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Kt(r,t)}zt(e){const t=this.cursor({});return new md((n,r)=>{t.onerror=e=>{const t=Ed(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}Kt(e,t){const n=[];return new md((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new bd(i),o=t(i.primaryKey,i.value,s);if(o instanceof md){const e=o.catch(e=>(s.done(),md.reject(e)));n.push(e)}s.isDone?r():null===s.Lt?i.continue():i.continue(s.Lt)}}).next(()=>md.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Sd(e){return new md((t,n)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{const t=Ed(e.target.error);n(t)}})}let Id=!1;function Ed(e){const t=vd.Vt((0,St.z$)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Xa("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Id||(Id=!0,setTimeout(()=>{throw e},0)),e}}return e}class kd extends gd{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Cd(e,t){const n=Ya(e);return vd.xt(n.Ht,t)}class Ad{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Al(t,e,n[r])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&xl(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&xl(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const n=e.get(t.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(mu.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Xl())}isEqual(e){return this.batchId===e.batchId&&fu(this.mutations,e.mutations,(e,t)=>Ol(e,t))&&fu(this.baseMutations,e.baseMutations,(e,t)=>Ol(e,t))}}class xd{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ja(e.mutations.length===n.length);let r=Yl;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new xd(e,t,n,r)}}class Nd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Od{constructor(e,t,n,r,i=mu.min(),s=mu.min(),o=Eu.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new Od(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Od(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Od(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Rd{constructor(e){this.Jt=e}}function Pd(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Dd(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:wh(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ph(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ld(t.version)};else{if(!t.isUnknownDocument())return Wa();r.unknownDocument={path:n.path.toArray(),version:Ld(t.version)}}return r}function Dd(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Ld(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Md(e){const t=new gu(e.seconds,e.nanoseconds);return mu.fromTimestamp(t)}function Ud(e,t){const n=(t.baseMutations||[]).map(t=>xh(e.Jt,t));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(e.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const r=t.mutations.map(t=>xh(e.Jt,t)),i=gu.fromMillis(t.localWriteTimeMs);return new Ad(t.batchId,i,n,r)}function Fd(e){const t=Md(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Md(e.lastLimboFreeSnapshotVersion):mu.min();let r;var i;return void 0!==e.query.documents?(Ja(1===(i=e.query).documents.length),r=Xc(Kc(Sh(i.documents[0])))):r=function(e){return Xc(Rh(e))}(e.query),new Od(r,e.targetId,0,e.lastListenSequenceNumber,t,n,Eu.fromBase64String(e.resumeToken))}function Vd(e,t){const n=Ld(t.snapshotVersion),r=Ld(t.lastLimboFreeSnapshotVersion);let i;i=Ac(t.target)?Nh(e.Jt,t.target):Oh(e.Jt,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:kc(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Zd(e){const t=Rh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?el(t,t.limit,"L"):t}function qd(e,t){return new Nd(t.largestBatchId,xh(e.Jt,t.overlayMutation))}function jd(e,t){const n=t.path.lastSegment();return[e,jh(t.path.popLast()),n]}class Bd{getBundleMetadata(e,t){return $d(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:Md(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return $d(e).put({bundleId:(n=t).id,createTime:Ld(yh(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return zd(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:Zd(t.bundledQuery),readTime:Md(t.readTime)};var t})}saveNamedQuery(e,t){return zd(e).put(function(e){return{name:e.name,readTime:Ld(yh(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function $d(e){return Cd(e,"bundles")}function zd(e){return Cd(e,"namedQueries")}class Hd{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Hd(e,t.uid||"")}getOverlay(e,t){return Gd(e).get(jd(this.userId,t)).next(e=>e?qd(this.M,e):null)}saveOverlays(e,t,n){const r=[];return n.forEach((n,i)=>{const s=new Nd(t,i);r.push(this.Xt(e,s))}),md.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(jh(e.getCollectionPath())));const i=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Gd(e).Qt("collectionPathOverlayIndex",r))}),md.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Jl(),i=jh(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Gd(e).qt("collectionPathOverlayIndex",s).next(e=>{for(const t of e){const e=qd(this.M,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const i=Jl();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Gd(e).Wt({index:"collectionGroupOverlayIndex",range:o},(e,t,n)=>{const o=qd(this.M,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()}).next(()=>i)}Xt(e,t){return Gd(e).put(function(e,t,n){const[r,i,s]=jd(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Ah(e.Jt,n.mutation)}}(this.M,this.userId,t))}}function Gd(e){return Cd(e,"documentOverlays")}class Kd{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Au(e.integerValue));else if("doubleValue"in e){const n=Au(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),Mu(n)?t.se(0):t.se(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ne(t,20),"string"==typeof n?t.ie(n):(t.ie(`${n.seconds||""}`),t.se(n.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(xu(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ne(t,45),t.se(n.latitude||0),t.se(n.longitude||0)}else"mapValue"in e?tc(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Wa()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const n=e.fields||{};this.ne(t,55);for(const r of Object.keys(n))this.re(r,t),this.te(n[r],t)}he(e,t){const n=e.values||[];this.ne(t,50);for(const r of n)this.te(r,t)}ae(e,t){this.ne(t,37),Fu.fromName(e).path.forEach(e=>{this.ne(t,60),this.le(e,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Wd(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Jd(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Wd(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Kd.fe=new Kd;class Yd{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this._e(n.value),n=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.ge(n.value),n=t.next();this.ye()}pe(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this._e(e);else if(e<2048)this._e(960|e>>>6),this._e(128|63&e);else if(t<"\ud800"||"\udbff"<t)this._e(480|e>>>12),this._e(128|63&e>>>6),this._e(128|63&e);else{const e=t.codePointAt(0);this._e(240|e>>>18),this._e(128|63&e>>>12),this._e(128|63&e>>>6),this._e(128|63&e)}}this.we()}Ie(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.ge(e);else if(e<2048)this.ge(960|e>>>6),this.ge(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.ge(480|e>>>12),this.ge(128|63&e>>>6),this.ge(128|63&e);else{const e=t.codePointAt(0);this.ge(240|e>>>18),this.ge(128|63&e>>>12),this.ge(128|63&e>>>6),this.ge(128|63&e)}}this.ye()}Te(e){const t=this.Ee(e),n=Jd(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Re(e){const t=this.Ee(e),n=Jd(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Qd{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class Xd{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class ef{constructor(){this.De=new Yd,this.Ce=new Qd(this.De),this.xe=new Xd(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class tf{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new tf(this.indexId,this.documentKey,this.arrayValue,n)}}function nf(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=rf(e.arrayValue,t.arrayValue),0!==n?n:(n=rf(e.directionalValue,t.directionalValue),0!==n?n:Fu.comparator(e.documentKey,t.documentKey)))}function rf(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class sf{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const e=t;e.S()?this.Fe=e:this.Oe.push(e)}}$e(e){const t=lc(e);if(void 0!==t&&!this.Be(t))return!1;const n=hc(e);let r=0,i=0;for(;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){const e=n[r];if(!this.Le(this.Fe,e)||!this.Ue(this.Me[i++],e))return!1;++r}for(;r<n.length;++r){const e=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],e))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class of{constructor(){this.qe=new af}addToCollectionParentIndex(e,t){return this.qe.add(t),md.resolve()}getCollectionParents(e,t){return md.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return md.resolve()}deleteFieldIndex(e,t){return md.resolve()}getDocumentsMatchingTarget(e,t){return md.resolve(null)}getIndexType(e,t){return md.resolve(0)}getFieldIndexes(e,t){return md.resolve([])}getNextCollectionGroupToUpdate(e){return md.resolve(null)}getMinOffset(e,t){return md.resolve(mc.min())}updateCollectionGroup(e,t,n){return md.resolve()}updateIndexEntries(e,t){return md.resolve()}}class af{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new _c(_u.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new _c(_u.comparator)).toArray()}}const uf=new Uint8Array(0);class cf{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new af,this.Ge=new zl(e=>kc(e),(e,t)=>Cc(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const i={collectionId:n,parent:jh(r)};return lf(e).put(i)}return md.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[pu(t),""],!1,!0);return lf(e).qt(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(zh(r.parent))}return n})}addFieldIndex(e,t){const n=df(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);return delete r.indexId,n.add(r).next()}deleteFieldIndex(e,t){const n=df(e),r=ff(e),i=hf(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const n=hf(e);let r=!0;const i=new Map;return md.forEach(this.Qe(t),t=>this.je(e,t).next(e=>{r&&(r=!!e),i.set(t,e)})).next(()=>{if(r){let e=Xl();const r=[];return md.forEach(i,(i,s)=>{var o;za("IndexedDbIndexManager",`Using index ${o=i,`id=${o.indexId}|cg=${o.collectionGroup}|f=${o.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")}`} to execute ${kc(t)}`);const a=function(e,t){const n=lc(t);if(void 0===n)return null;for(const r of xc(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),u=function(e,t){const n=new Map;for(const r of hc(t))for(const t of xc(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of hc(t)){const t=0===i.kind?Nc(e,i.fieldPath,e.startAt):Oc(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new qc(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of hc(t)){const t=0===i.kind?Oc(e,i.fieldPath,e.endAt):Nc(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new qc(n,r)}(s,i),h=this.We(i,s,c),d=this.We(i,s,l),f=this.ze(i,s,u),p=this.He(i.indexId,a,h,c.inclusive,d,l.inclusive,f);return md.forEach(p,i=>n.Gt(i,t.limit).next(t=>{t.forEach(t=>{const n=Fu.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return md.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),u=a/(null!=t?t.length:1),c=[];for(let l=0;l<a;++l){const a=t?this.Je(t[l/u]):uf,h=this.Ye(e,a,n[l%u],r),d=this.Xe(e,a,i[l%u],s),f=o.map(t=>this.Ye(e,a,t,!0));c.push(...this.createRange(h,d,f))}return c}Ye(e,t,n,r){const i=new tf(e,Fu.empty(),t,n);return r?i:i.ke()}Xe(e,t,n,r){const i=new tf(e,Fu.empty(),t,n);return r?i.ke():i}je(e,t){const n=new sf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)n.$e(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2;return md.forEach(this.Qe(t),t=>this.je(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new _c(Su.comparator),n=!1;for(const r of e.filters){const e=r;e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field))}for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>n)}Ze(e,t){const n=new ef;for(const r of hc(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ne(r.kind);Kd.fe.Zt(e,i)}return n.Se()}Je(e){const t=new ef;return Kd.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const n=new ef;return Kd.fe.Zt(Ku(this.databaseId,t),n.Ne(function(e){const t=hc(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}ze(e,t,n){if(null===n)return[];let r=[];r.push(new ef);let i=0;for(const s of hc(e)){const e=n[i++];for(const n of r)if(this.en(t,s.fieldPath)&&Ju(e))r=this.nn(r,s,e);else{const t=n.Ne(s.kind);Kd.fe.Zt(e,t)}}return this.sn(r)}We(e,t,n){return this.ze(e,t,n.position)}sn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Se();return t}nn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new ef;n.seed(e.Se()),Kd.fe.Zt(s,n.Ne(t.kind)),i.push(n)}return i}en(e,t){return!!e.filters.find(e=>e instanceof Rc&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=df(e),r=ff(e);return(t?n.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.qt()).next(e=>{const t=[];return md.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new fc(t.sequenceNumber,new mc(Md(t.readTime),new Fu(zh(t.documentKey)),t.largestBatchId)):fc.empty(),r=e.fields.map(([e,t])=>new dc(Su.fromServerFormat(e),t));return new cc(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:du(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=df(e),i=ff(e);return this.rn(e).next(e=>r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(t=>md.forEach(t,t=>i.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Ld(r.readTime),documentKey:jh(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,this.user,e,n)))))}updateIndexEntries(e,t){const n=new Map;return md.forEach(t,(t,r)=>{const i=n.get(t.collectionGroup);return(i?md.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next(i=>(n.set(t.collectionGroup,i),md.forEach(i,n=>this.on(e,t,n).next(t=>{const i=this.un(r,n);return t.isEqual(i)?md.resolve():this.an(e,r,n,t,i)}))))})}cn(e,t,n,r){return hf(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}hn(e,t,n,r){return hf(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}on(e,t,n){const r=hf(e);let i=new _c(nf);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(e,r)=>{i=i.add(new tf(n.indexId,t,r.arrayValue,r.directionalValue))}).next(()=>i)}un(e,t){let n=new _c(nf);const r=this.Ze(t,e);if(null==r)return n;const i=lc(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Ju(s))for(const i of s.arrayValue.values||[])n=n.add(new tf(t.indexId,e.key,this.Je(i),r))}else n=n.add(new tf(t.indexId,e.key,uf,r));return n}an(e,t,n,r,i){za("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=Sc(s),u=Sc(o);for(;a||u;){let e=!1,t=!1;if(a&&u){const r=n(a,u);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(u),u=Sc(o)):t?(i(a),a=Sc(s)):(a=Sc(s),u=Sc(o))}}(r,i,nf,r=>{s.push(this.cn(e,t,n,r))},r=>{s.push(this.hn(e,t,n,r))}),md.waitFor(s)}rn(e){let t=1;return ff(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>nf(e,t)).filter((e,t,n)=>!t||0!==nf(e,n[t-1]));const r=[];r.push(e);for(const s of n){const n=nf(s,e),i=nf(s,t);if(0===n)r[0]=e.ke();else if(n>0&&i<0)r.push(s),r.push(s.ke());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2)i.push(IDBKeyRange.bound([r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,uf,[]],[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,uf,[]]));return i}getMinOffset(e,t){let n;return md.forEach(this.Qe(t),t=>this.je(e,t).next(e=>{e?(!n||yc(e.indexState.offset,n)<0)&&(n=e.indexState.offset):n=mc.min()})).next(()=>n)}}function lf(e){return Cd(e,"collectionParents")}function hf(e){return Cd(e,"indexEntries")}function df(e){return Cd(e,"indexConfiguration")}function ff(e){return Cd(e,"indexState")}const pf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class gf{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new gf(e,gf.DEFAULT_COLLECTION_PERCENTILE,gf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function mf(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Wt({range:o},(e,t,n)=>(a++,n.delete()));s.push(u.next(()=>{Ja(1===a)}));const c=[];for(const l of n.mutations){const e=Kh(t,l.key.path,n.batchId);s.push(i.delete(e)),c.push(l.key)}return md.waitFor(s).next(()=>c)}function yf(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Wa();t=e.noDocument}return JSON.stringify(t).length}gf.DEFAULT_COLLECTION_PERCENTILE=10,gf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gf.DEFAULT=new gf(41943040,gf.DEFAULT_COLLECTION_PERCENTILE,gf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gf.DISABLED=new gf(-1,0,0);class vf{constructor(e,t,n,r){this.userId=e,this.M=t,this.indexManager=n,this.referenceDelegate=r,this.ln={}}static Yt(e,t,n,r){Ja(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new vf(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return wf(e).Wt({index:"userMutationsIndex",range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const i=_f(e),s=wf(e);return s.add({}).next(o=>{Ja("number"==typeof o);const a=new Ad(o,t,n,r),u=function(e,t,n){const r=n.baseMutations.map(t=>Ah(e.Jt,t)),i=n.mutations.map(t=>Ah(e.Jt,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.M,this.userId,a),c=[];let l=new _c((e,t)=>du(e.canonicalString(),t.canonicalString()));for(const e of r){const t=Kh(this.userId,e.key.path,o);l=l.add(e.key.path.popLast()),c.push(s.put(u)),c.push(i.put(t,Wh))}return l.forEach(t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.ln[o]=a.keys()}),md.waitFor(c).next(()=>a)})}lookupMutationBatch(e,t){return wf(e).get(t).next(e=>e?(Ja(e.userId===this.userId),Ud(this.M,e)):null)}fn(e,t){return this.ln[t]?md.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.ln[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return wf(e).Wt({index:"userMutationsIndex",range:r},(e,t,r)=>{t.userId===this.userId&&(Ja(t.batchId>=n),i=Ud(this.M,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return wf(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return wf(e).qt("userMutationsIndex",t).next(e=>e.map(e=>Ud(this.M,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Gh(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return _f(e).Wt({range:r},(n,r,s)=>{const[o,a,u]=n,c=zh(a);if(o===this.userId&&t.path.isEqual(c))return wf(e).get(u).next(e=>{if(!e)throw Wa();Ja(e.userId===this.userId),i.push(Ud(this.M,e))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new _c(du);const r=[];return t.forEach(t=>{const i=Gh(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=_f(e).Wt({range:s},(e,r,i)=>{const[s,o,a]=e,u=zh(o);s===this.userId&&t.path.isEqual(u)?n=n.add(a):i.done()});r.push(o)}),md.waitFor(r).next(()=>this.dn(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Gh(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new _c(du);return _f(e).Wt({range:s},(e,t,i)=>{const[s,a,u]=e,c=zh(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(u)):i.done()}).next(()=>this.dn(e,o))}dn(e,t){const n=[],r=[];return t.forEach(t=>{r.push(wf(e).get(t).next(e=>{if(null===e)throw Wa();Ja(e.userId===this.userId),n.push(Ud(this.M,e))}))}),md.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return mf(e.Ht,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),md.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return md.resolve();const n=IDBKeyRange.lowerBound([this.userId]),r=[];return _f(e).Wt({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=zh(e[1]);r.push(t)}else n.done()}).next(()=>{Ja(0===r.length)})})}containsKey(e,t){return bf(e,this.userId,t)}wn(e){return Tf(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function bf(e,t,n){const r=Gh(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return _f(e).Wt({range:s,jt:!0},(e,n,r)=>{const[s,a,u]=e;s===t&&a===i&&(o=!0),r.done()}).next(()=>o)}function wf(e){return Cd(e,"mutations")}function _f(e){return Cd(e,"documentMutations")}function Tf(e){return Cd(e,"mutationQueues")}class Sf{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Sf(0)}static yn(){return new Sf(-1)}}class If{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const n=new Sf(t.highestTargetId);return t.highestTargetId=n.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(e=>mu.fromTimestamp(new gu(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.pn(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.In(e,r)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(n=>(n.targetCount+=1,this.En(t,n),this.In(e,n))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ef(e).delete(t.targetId)).next(()=>this.pn(e)).next(t=>(Ja(t.targetCount>0),t.targetCount-=1,this.In(e,t)))}removeTargets(e,t,n){let r=0;const i=[];return Ef(e).Wt((s,o)=>{const a=Fd(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))}).next(()=>md.waitFor(i)).next(()=>r)}forEachTarget(e,t){return Ef(e).Wt((e,n)=>{const r=Fd(n);t(r)})}pn(e){return kf(e).get("targetGlobalKey").next(e=>(Ja(null!==e),e))}In(e,t){return kf(e).put("targetGlobalKey",t)}Tn(e,t){return Ef(e).put(Vd(this.M,t))}En(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.pn(e).next(e=>e.targetCount)}getTargetData(e,t){const n=kc(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Ef(e).Wt({range:r,index:"queryTargetsIndex"},(e,n,r)=>{const s=Fd(n);Cc(t,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){const r=[],i=Cf(e);return t.forEach(t=>{const s=jh(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))}),md.waitFor(r)}removeMatchingKeys(e,t,n){const r=Cf(e);return md.forEach(t,t=>{const i=jh(t.path);return md.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=Cf(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Cf(e);let i=Xl();return r.Wt({range:n,jt:!0},(e,t,n)=>{const r=zh(e[1]),s=new Fu(r);i=i.add(s)}).next(()=>i)}containsKey(e,t){const n=jh(t.path),r=IDBKeyRange.bound([n],[pu(n)],!1,!0);let i=0;return Cf(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},([e,t],n,r)=>{0!==e&&(i++,r.done())}).next(()=>i>0)}Et(e,t){return Ef(e).get(t).next(e=>e?Fd(e):null)}}function Ef(e){return Cd(e,"targets")}function kf(e){return Cd(e,"targetGlobal")}function Cf(e){return Cd(e,"targetDocuments")}function Af(e){return xf.apply(this,arguments)}function xf(){return(xf=(0,At.Z)(function*(e){if(e.code!==Qa.FAILED_PRECONDITION||e.message!==pd)throw e;za("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function Nf([e,t],[n,r]){const i=du(e,n);return 0===i?du(t,r):i}class Of{constructor(e){this.An=e,this.buffer=new _c(Nf),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Nf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Rf{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const n=this.Vn?3e5:6e4;za("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,At.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(e){_d(e)?za("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):yield Af(e)}yield t.Sn(e)}))}}class Pf{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return md.resolve(cu.A);const n=new Of(t);return this.Dn.forEachTarget(e,e=>n.Pn(e.sequenceNumber)).next(()=>this.Dn.xn(e,e=>n.Pn(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Dn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(za("LruGarbageCollector","Garbage collection skipped; disabled"),md.resolve(pf)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(za("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pf):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let n,r,i,s,o,a,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(za("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(u=Date.now(),$a()<=Et.in.DEBUG&&za("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(u-a)+"ms\n"+`Total Duration: ${u-c}ms`),md.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}class Df{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new Pf(e,t)}(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}kn(e){let t=0;return this.xn(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(e,n)=>t(n))}addReference(e,t,n){return Lf(e,n)}removeReference(e,t,n){return Lf(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Lf(e,t)}On(e,t){return function(e,t){let n=!1;return Tf(e).zt(r=>bf(e,r,t).next(e=>(e&&(n=!0),md.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Mn(e,(s,o)=>{if(o<=t){const t=this.On(e,s).next(t=>{if(!t)return i++,n.getEntry(e,s).next(()=>(n.removeEntry(s,mu.min()),Cf(e).delete([0,jh(s.path)])))});r.push(t)}}).next(()=>md.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Lf(e,t)}Mn(e,t){const n=Cf(e);let r,i=cu.A;return n.Wt({index:"documentTargetsIndex"},([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==cu.A&&t(new Fu(zh(r)),i),i=o,r=s):i=cu.A}).next(()=>{i!==cu.A&&t(new Fu(zh(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lf(e,t){return Cf(e).put(function(e,t){return{targetId:0,path:jh(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Mf{constructor(){this.changes=new zl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,uc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?md.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Uf{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Zf(e).put(n)}removeEntry(e,t,n){return Zf(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Dd(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Fn(e,n)))}getEntry(e,t){let n=uc.newInvalidDocument(t);return Zf(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(qf(t))},(e,r)=>{n=this.$n(t,r)}).next(()=>n)}Bn(e,t){let n={size:0,document:uc.newInvalidDocument(t)};return Zf(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(qf(t))},(e,r)=>{n={document:this.$n(t,r),size:yf(r)}}).next(()=>n)}getEntries(e,t){let n=Gl();return this.Ln(e,t,(e,t)=>{const r=this.$n(e,t);n=n.insert(e,r)}).next(()=>n)}Un(e,t){let n=Gl(),r=new vc(Fu.comparator);return this.Ln(e,t,(e,t)=>{const i=this.$n(e,t);n=n.insert(e,i),r=r.insert(e,yf(t))}).next(()=>({documents:n,qn:r}))}Ln(e,t,n){if(t.isEmpty())return md.resolve();let r=new _c(Bf);t.forEach(e=>r=r.add(e));const i=IDBKeyRange.bound(qf(r.first()),qf(r.last())),s=r.getIterator();let o=s.getNext();return Zf(e).Wt({index:"documentKeyIndex",range:i},(e,t,r)=>{const i=Fu.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Bf(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.Ut(qf(o)):r.done()}).next(()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null})}getAllFromCollection(e,t,n){const r=[t.popLast().toArray(),t.lastSegment(),Dd(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],i=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zf(e).qt(IDBKeyRange.bound(r,i,!0)).next(e=>{let t=Gl();for(const n of e){const e=this.$n(Fu.fromSegments(n.prefixPath.concat(n.collectionGroup,n.documentId)),n);t=t.insert(e.key,e)}return t})}getAllFromCollectionGroup(e,t,n,r){let i=Gl();const s=jf(t,n),o=jf(t,mc.max());return Zf(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},(e,t,n)=>{const s=this.$n(Fu.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()}).next(()=>i)}newChangeBuffer(e){return new Ff(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return Vf(e).get("remoteDocumentGlobalKey").next(e=>(Ja(!!e),e))}Fn(e,t){return Vf(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Ch(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Fu.fromSegments(t.noDocument.path),r=Md(t.noDocument.readTime);n=uc.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Wa();{const e=Fu.fromSegments(t.unknownDocument.path),r=Md(t.unknownDocument.version);n=uc.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new gu(e[0],e[1]);return mu.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!e.isNoDocument()||!e.version.isEqual(mu.min()))return e}return uc.newInvalidDocument(e)}}class Ff extends Mf{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new zl(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new _c((e,t)=>du(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{const o=this.Gn.get(i);if(t.push(this.Kn.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Pd(this.Kn.M,s);r=r.add(i.path.popLast());const u=yf(a);n+=u-o.size,t.push(this.Kn.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Pd(this.Kn.M,s.convertToNoDocument(mu.min()));t.push(this.Kn.addEntry(e,i,n))}}),r.forEach(n=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.Kn.updateMetadata(e,n)),md.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(e=>(this.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:e,qn:t})=>(t.forEach((t,n)=>{this.Gn.set(t,{size:n,readTime:e.get(t).readTime})}),e))}}function Vf(e){return Cd(e,"remoteDocumentGlobal")}function Zf(e){return Cd(e,"remoteDocumentsV14")}function qf(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function jf(e,t){const n=t.documentKey.path.toArray();return[e,Dd(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Bf(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=du(n[s],r[s]),i)return i;return i=du(n.length,r.length),i||(i=du(n[n.length-2],r[r.length-2]),i||du(n[n.length-1],r[r.length-1]))}class $f{constructor(e){this.M=e}kt(e,t,n,r){const i=new yd("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hh,{unique:!0}),e.createObjectStore("documentMutations")}(e),zf(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=md.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),zf(e)),s=s.next(()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mu.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i))),n<4&&r>=4&&(0!==n&&(s=s.next(()=>function(e,t){return t.store("mutations").qt().next(n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hh,{unique:!0});const r=t.store("mutations"),i=n.map(e=>r.put(e));return md.waitFor(i)})}(e,i))),s=s.next(()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(s=s.next(()=>this.Qn(i))),n<6&&r>=6&&(s=s.next(()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.jn(i)))),n<7&&r>=7&&(s=s.next(()=>this.Wn(i))),n<8&&r>=8&&(s=s.next(()=>this.zn(e,i))),n<9&&r>=9&&(s=s.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(s=s.next(()=>this.Hn(i))),n<11&&r>=11&&(s=s.next(()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&r>=12&&(s=s.next(()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:ad});t.createIndex("collectionPathOverlayIndex",ud,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",cd,{unique:!1})}(e)})),n<13&&r>=13&&(s=s.next(()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Jh});t.createIndex("documentKeyIndex",Yh),t.createIndex("collectionGroupIndex",Qh)}(e)).next(()=>this.Jn(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&r>=14&&(s=s.next(()=>{!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:rd}).createIndex("sequenceNumberIndex",id,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:sd}).createIndex("documentKeyIndex",od,{unique:!1})}(e)})),s}jn(e){let t=0;return e.store("remoteDocuments").Wt((e,n)=>{t+=yf(n)}).next(()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}Qn(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.qt().next(t=>md.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.qt("userMutationsIndex",r).next(n=>md.forEach(n,n=>{Ja(n.userId===t.userId);const r=Ud(this.M,n);return mf(e,t.userId,r).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(e=>{const r=[];return n.Wt((n,i)=>{const s=new _u(n),o=function(e){return[0,jh(e)]}(s);r.push(t.get(o).next(n=>n?md.resolve():(n=>t.put({targetId:0,path:jh(n),sequenceNumber:e.highestListenSequenceNumber}))(s)))}).next(()=>md.waitFor(r))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:nd});const n=t.store("collectionParents"),r=new af,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:jh(r)})}};return t.store("remoteDocuments").Wt({jt:!0},(e,t)=>{const n=new _u(e);return i(n.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([e,t,n],r)=>{const s=zh(t);return i(s.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((e,n)=>{const r=Fd(n),i=Vd(this.M,r);return t.put(i)})}Jn(e,t){const n=t.store("remoteDocuments"),r=[];return n.Wt((e,n)=>{const i=t.store("remoteDocumentsV14"),s=(o=n,o.document?new Fu(_u.fromString(o.document.name).popFirst(5)):o.noDocument?Fu.fromSegments(o.noDocument.path):o.unknownDocument?Fu.fromSegments(o.unknownDocument.path):Wa()).path.toArray();var o;const a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))}).next(()=>md.waitFor(r))}}function zf(e){e.createObjectStore("targetDocuments",{keyPath:ed}).createIndex("documentTargetsIndex",td,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Xh,{unique:!0}),e.createObjectStore("targetGlobal")}const Hf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Gf{constructor(e,t,n,r,i,s,o,a,u,c,l=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Yn=i,this.window=s,this.document=o,this.Xn=u,this.Zn=c,this.ts=l,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=e=>Promise.resolve(),!Gf.vt())throw new Xa(Qa.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Df(this,r),this.hs=t+"main",this.M=new Rd(a),this.ls=new vd(this.hs,this.ts,new $f(this.M)),this.fs=new If(this.referenceDelegate,this.M),this.ds=function(e){return new Uf(e)}(this.M),this._s=new Bd,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===c&&Ha("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Xa(Qa.FAILED_PRECONDITION,Hf);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new cu(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var n=(0,At.Z)(function*(n){if(t.started)return e(n)});return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,At.Z)(function*(t){null===t.newVersion&&(yield e())});return function(e){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,At.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Wf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(e=>{e||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(_d(e))return za("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return za("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Kf(e).get("owner").next(e=>md.resolve(this.Ps(e)))}Vs(e){return Wf(e).delete(this.clientId)}vs(){var e=this;return(0,At.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const n=Cd(t,"clientMetadata");return n.qt().next(t=>{const r=e.Ds(t,18e5),i=t.filter(e=>-1===r.indexOf(e));return md.forEach(i,e=>n.delete(e.clientId)).next(()=>i)})}).catch(()=>[]);if(e.ws)for(const n of t)e.ws.removeItem(e.Cs(n.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?md.resolve(!0):Kf(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Xa(Qa.FAILED_PRECONDITION,Hf);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wf(e).qt().next(e=>void 0===this.Ds(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(!this.networkEnabled&&e.networkEnabled||t&&n)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&za("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var e=this;return(0,At.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const n=new kd(t,cu.A);return e.Rs(n).next(()=>e.Vs(n))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(e=>this.Ss(e.updateTimeMs,t)&&!this.xs(e.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Wf(e).qt().next(e=>this.Ds(e,18e5).map(e=>e.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return vf.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new cf(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Hd.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,n){za("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=14===(s=this.ts)?fd:13===s?dd:12===s?hd:11===s?ld:void Wa();var s;let o;return this.ls.runTransaction(e,r,i,r=>(o=new kd(r,this.es?this.es.next():cu.A),"readwrite-primary"===t?this.Es(o).next(e=>!!e||this.As(o)).next(t=>{if(!t)throw Ha(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Xa(Qa.FAILED_PRECONDITION,pd);return n(o)}).next(e=>this.bs(o).next(()=>e)):this.$s(o).next(()=>n(o)))).then(e=>(o.raiseOnCommittedEvent(),e))}$s(e){return Kf(e).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)&&!this.Ps(e)&&!(this.Zn||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Xa(Qa.FAILED_PRECONDITION,Hf)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Kf(e).put("owner",t)}static vt(){return vd.vt()}Rs(e){const t=Kf(e);return t.get("owner").next(e=>this.Ps(e)?(za("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):md.resolve())}Ss(e,t){const n=Date.now();return!(e<n-t||e>n&&(Ha(`Detected an update time that is in the future: ${e} > ${n}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,St.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return za("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return Ha("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(Gr){Ha("Failed to set zombie client id.",Gr)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(Gr){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Kf(e){return Cd(e,"owner")}function Wf(e){return Cd(e,"clientMetadata")}function Jf(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Yf{constructor(e,t,n){this.ds=e,this.Bs=t,this.indexManager=n}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(n=>this.Us(e,t,n))}Us(e,t,n){return this.ds.getEntry(e,t).next(e=>{for(const t of n)t.applyToLocalView(e);return e})}qs(e,t){e.forEach((e,n)=>{for(const r of t)r.applyToLocalView(n)})}Ks(e,t){return this.ds.getEntries(e,t).next(t=>this.Gs(e,t).next(()=>t))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>this.qs(t,e))}Qs(e,t,n){return function(e){return Fu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):Yc(t)?this.Ws(e,t,n):this.zs(e,t,n)}js(e,t){return this.Ls(e,new Fu(t)).next(e=>{let t=Wl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}Ws(e,t,n){const r=t.collectionGroup;let i=Wl();return this.indexManager.getCollectionParents(e,r).next(s=>md.forEach(s,s=>{const o=function(e,t){return new Hc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.zs(e,o,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}zs(e,t,n){let r;return this.ds.getAllFromCollection(e,t.path,n).next(n=>(r=n,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(e=>{for(const t of e)for(const e of t.mutations){const n=e.key;let i=r.get(n);null==i&&(i=uc.newInvalidDocument(n),r=r.insert(n,i)),xl(e,i,t.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}).next(()=>(r.forEach((e,n)=>{il(t,n)||(r=r.remove(e))}),r))}}class Qf{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Hs=n,this.Js=r}static Ys(e,t){let n=Xl(),r=Xl();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Qf(e,t.fromCache,n,r)}}class Xf{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,n,r){return this.ti(e,t).next(i=>i||this.ei(e,t,r,n)).next(n=>n||this.ni(e,t))}ti(e,t){return md.resolve(null)}ei(e,t,n,r){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(mu.min())?this.ni(e,t):this.Zs.Ks(e,n).next(i=>{const s=this.si(t,i);return this.ii(t,s,n,r)?this.ni(e,t):($a()<=Et.in.DEBUG&&za("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),rl(t)),this.ri(e,s,t,pc(r,-1)))})}si(e,t){let n=new _c(ol(e));return t.forEach((t,r)=>{il(e,r)&&(n=n.add(r))}),n}ii(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ni(e,t){return $a()<=Et.in.DEBUG&&za("QueryEngine","Using full collection scan to execute query:",rl(t)),this.Zs.Qs(e,t,mc.min())}ri(e,t,n,r){return this.Zs.Qs(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class ep{constructor(e,t,n,r){this.persistence=e,this.oi=t,this.M=r,this.ui=new vc(du),this.ai=new zl(e=>kc(e),Cc),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(n)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new Yf(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function tp(e,t,n,r){return new ep(e,t,n,r)}function np(e,t){return rp.apply(this,arguments)}function rp(){return(rp=(0,At.Z)(function*(e,t){const n=Ya(e);return yield n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.Bs.getAllMutationBatches(e).next(i=>(r=i,n.li(t),n.Bs.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=Xl();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.fi.Ks(e,o).next(e=>({di:e,removedBatchIds:i,addedBatchIds:s}))})})})).apply(this,arguments)}function ip(e,t){const n=Ya(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.hi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=md.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Ja(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.Bs.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.Bs.performConsistencyCheck(e)).next(()=>n.fi.Ks(e,r))})}function sp(e){const t=Ya(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.fs.getLastRemoteSnapshotVersion(e))}function op(e,t){const n=Ya(e),r=t.snapshotVersion;let i=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.hi.newChangeBuffer({trackRemovals:!0});i=n.ui;const o=[];t.targetChanges.forEach((s,a)=>{const u=i.get(a);if(!u)return;o.push(n.fs.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.fs.addMatchingKeys(e,s.addedDocuments,a)));let c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(a)?c=c.withResumeToken(Eu.EMPTY_BYTE_STRING,mu.min()).withLastLimboFreeSnapshotVersion(mu.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(u,c,s)&&o.push(n.fs.updateTargetData(e,c))});let a=Gl();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(ap(e,s,t.documentUpdates).next(e=>{a=e})),!r.isEqual(mu.min())){const t=n.fs.getLastRemoteSnapshotVersion(e).next(t=>n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return md.waitFor(o).next(()=>s.apply(e)).next(()=>n.fi.Gs(e,a)).next(()=>a)}).then(e=>(n.ui=i,e))}function ap(e,t,n){let r=Xl();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Gl();return n.forEach((n,i)=>{const s=e.get(n);i.isNoDocument()&&i.version.isEqual(mu.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!s.isValidDocument()||i.version.compareTo(s.version)>0||0===i.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):za("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",i.version)}),r})}function up(e,t){const n=Ya(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)))}function cp(e,t){const n=Ya(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.fs.getTargetData(e,t).next(i=>i?(r=i,md.resolve(r)):n.fs.allocateTargetId(e).next(i=>(r=new Od(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ui=n.ui.insert(e.targetId,e),n.ai.set(t,e.targetId)),e})}function lp(e,t,n){return hp.apply(this,arguments)}function hp(){return(hp=(0,At.Z)(function*(e,t,n){const r=Ya(e),i=r.ui.get(t),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!_d(e))throw e;za("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.ui=r.ui.remove(t),r.ai.delete(i.target)})).apply(this,arguments)}function dp(e,t,n){const r=Ya(e);let i=mu.min(),s=Xl();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=Ya(e),i=r.ai.get(n);return void 0!==i?md.resolve(r.ui.get(i)):r.fs.getTargetData(t,n)}(r,e,Xc(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.oi.Qs(e,t,n?i:mu.min(),n?s:Xl())).next(e=>(gp(r,sl(t),e),{documents:e,_i:s})))}function fp(e,t){const n=Ya(e),r=Ya(n.fs),i=n.ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",e=>r.Et(e,t).next(e=>e?e.target:null))}function pp(e,t){const n=Ya(e),r=n.ci.get(t)||mu.min();return n.persistence.runTransaction("Get new document changes","readonly",e=>n.hi.getAllFromCollectionGroup(e,t,pc(r,-1),Number.MAX_SAFE_INTEGER)).then(e=>(gp(n,t,e),e))}function gp(e,t,n){let r=mu.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.ci.set(t,r)}function mp(){return(mp=(0,At.Z)(function*(e,t,n,r){const i=Ya(e);let s=Xl(),o=Gl();for(const c of n){const e=t.wi(c.metadata.name);c.document&&(s=s.add(e));const n=t.mi(c);n.setReadTime(t.gi(c.metadata.readTime)),o=o.insert(e,n)}const a=i.hi.newChangeBuffer({trackRemovals:!0}),u=yield cp(i,function(e){return Xc(Kc(_u.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>ap(e,a,o).next(t=>(a.apply(e),t)).next(t=>i.fs.removeMatchingKeysForTargetId(e,u.targetId).next(()=>i.fs.addMatchingKeys(e,s,u.targetId)).next(()=>i.fi.Gs(e,t)).next(()=>t)))})).apply(this,arguments)}function yp(e,t){return vp.apply(this,arguments)}function vp(){return(vp=(0,At.Z)(function*(e,t,n=Xl()){const r=yield cp(e,Xc(Zd(t.bundledQuery))),i=Ya(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{const s=yh(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i._s.saveNamedQuery(e,t);const o=r.withResumeToken(Eu.EMPTY_BYTE_STRING,s);return i.ui=i.ui.insert(o.targetId,o),i.fs.updateTargetData(e,o).next(()=>i.fs.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>i.fs.addMatchingKeys(e,n,r.targetId)).next(()=>i._s.saveNamedQuery(e,t))})})).apply(this,arguments)}class bp{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return md.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var n;return this.yi.set(t.id,{id:(n=t).id,version:n.version,createTime:yh(n.createTime)}),md.resolve()}getNamedQuery(e,t){return md.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,function(e){return{name:e.name,query:Zd(e.bundledQuery),readTime:yh(e.readTime)}}(t)),md.resolve()}}class wp{constructor(){this.overlays=new vc(Fu.comparator),this.Ii=new Map}getOverlay(e,t){return md.resolve(this.overlays.get(t))}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.Xt(e,t,r)}),md.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ii.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ii.delete(n)),md.resolve()}getOverlaysForCollection(e,t,n){const r=Jl(),i=t.length+1,s=new Fu(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return md.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new vc((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Jl(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Jl(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return md.resolve(o)}Xt(e,t,n){if(null===n)return;const r=this.overlays.get(n.key);if(null!==r){const e=this.Ii.get(r.largestBatchId).delete(n.key);this.Ii.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Nd(t,n));let i=this.Ii.get(t);void 0===i&&(i=Xl(),this.Ii.set(t,i)),this.Ii.set(t,i.add(n.key))}}class _p{constructor(){this.Ti=new _c(Tp.Ei),this.Ai=new _c(Tp.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const n=new Tp(e,t);this.Ti=this.Ti.add(n),this.Ai=this.Ai.add(n)}bi(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Pi(new Tp(e,t))}Vi(e,t){e.forEach(e=>this.removeReference(e,t))}vi(e){const t=new Fu(new _u([])),n=new Tp(t,e),r=new Tp(t,e+1),i=[];return this.Ai.forEachInRange([n,r],e=>{this.Pi(e),i.push(e.key)}),i}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Fu(new _u([])),n=new Tp(t,e),r=new Tp(t,e+1);let i=Xl();return this.Ai.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Tp(e,0),n=this.Ti.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Tp{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Fu.comparator(e.key,t.key)||du(e.Ci,t.Ci)}static Ri(e,t){return du(e.Ci,t.Ci)||Fu.comparator(e.key,t.key)}}class Sp{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new _c(Tp.Ei)}checkEmpty(e){return md.resolve(0===this.Bs.length)}addMutationBatch(e,t,n,r){const i=this.xi;this.xi++;const s=new Ad(i,t,n,r);this.Bs.push(s);for(const o of r)this.Ni=this.Ni.add(new Tp(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return md.resolve(s)}lookupMutationBatch(e,t){return md.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const n=this.Mi(t+1),r=n<0?0:n;return md.resolve(this.Bs.length>r?this.Bs[r]:null)}getHighestUnacknowledgedBatchId(){return md.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return md.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Tp(t,0),r=new Tp(t,Number.POSITIVE_INFINITY),i=[];return this.Ni.forEachInRange([n,r],e=>{const t=this.ki(e.Ci);i.push(t)}),md.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new _c(du);return t.forEach(e=>{const t=new Tp(e,0),r=new Tp(e,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([t,r],e=>{n=n.add(e.Ci)})}),md.resolve(this.Oi(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Fu.isDocumentKey(i)||(i=i.child(""));const s=new Tp(new Fu(i),0);let o=new _c(du);return this.Ni.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Ci)),!0)},s),md.resolve(this.Oi(o))}Oi(e){const t=[];return e.forEach(e=>{const n=this.ki(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Ja(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let n=this.Ni;return md.forEach(t.mutations,r=>{const i=new Tp(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Ni=n})}_n(e){}containsKey(e,t){const n=new Tp(t,0),r=this.Ni.firstAfterOrEqual(n);return md.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return md.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class Ip{constructor(e){this.$i=e,this.docs=new vc(Fu.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.$i(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return md.resolve(n?n.document.mutableCopy():uc.newInvalidDocument(t))}getEntries(e,t){let n=Gl();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():uc.newInvalidDocument(e))}),md.resolve(n)}getAllFromCollection(e,t,n){let r=Gl();const i=new Fu(t.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i}}=s.getNext();if(!t.isPrefixOf(e.path))break;e.path.length>t.length+1||yc(gc(i),n)<=0||(r=r.insert(i.key,i.mutableCopy()))}return md.resolve(r)}getAllFromCollectionGroup(e,t,n,r){Wa()}Bi(e,t){return md.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Ep(this)}getSize(e){return md.resolve(this.size)}}class Ep extends Mf{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Kn.addEntry(e,r)):this.Kn.removeEntry(n)}),md.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class kp{constructor(e){this.persistence=e,this.Li=new zl(e=>kc(e),Cc),this.lastRemoteSnapshotVersion=mu.min(),this.highestTargetId=0,this.Ui=0,this.qi=new _p,this.targetCount=0,this.Ki=Sf.gn()}forEachTarget(e,t){return this.Li.forEach((e,n)=>t(n)),md.resolve()}getLastRemoteSnapshotVersion(e){return md.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return md.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),md.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ui&&(this.Ui=t),md.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Sf(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,md.resolve()}updateTargetData(e,t){return this.Tn(t),md.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,md.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Li.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Li.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),md.waitFor(i).next(()=>r)}getTargetCount(e){return md.resolve(this.targetCount)}getTargetData(e,t){const n=this.Li.get(t)||null;return md.resolve(n)}addMatchingKeys(e,t,n){return this.qi.bi(t,n),md.resolve()}removeMatchingKeys(e,t,n){this.qi.Vi(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),md.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),md.resolve()}getMatchingKeysForTargetId(e,t){const n=this.qi.Di(t);return md.resolve(n)}containsKey(e,t){return md.resolve(this.qi.containsKey(t))}}class Cp{constructor(e,t){this.Gi={},this.overlays={},this.es=new cu(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new kp(this),this.indexManager=new of,this.ds=function(e){return new Ip(e)}(e=>this.referenceDelegate.Qi(e)),this.M=new Rd(t),this._s=new bp(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Gi[e.toKey()];return n||(n=new Sp(t,this.referenceDelegate),this.Gi[e.toKey()]=n),n}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,n){za("MemoryPersistence","Starting transaction:",e);const r=new Ap(this.es.next());return this.referenceDelegate.ji(),n(r).next(e=>this.referenceDelegate.Wi(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}zi(e,t){return md.or(Object.values(this.Gi).map(n=>()=>n.containsKey(e,t)))}}class Ap extends gd{constructor(e){super(),this.currentSequenceNumber=e}}class xp{constructor(e){this.persistence=e,this.Hi=new _p,this.Ji=null}static Yi(e){return new xp(e)}get Xi(){if(this.Ji)return this.Ji;throw Wa()}addReference(e,t,n){return this.Hi.addReference(n,t),this.Xi.delete(n.toString()),md.resolve()}removeReference(e,t,n){return this.Hi.removeReference(n,t),this.Xi.add(n.toString()),md.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),md.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(e=>this.Xi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return md.forEach(this.Xi,n=>{const r=Fu.fromPath(n);return this.Zi(e,r).next(e=>{e||t.removeEntry(r,mu.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(e=>{e?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return md.or([()=>md.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function Np(e,t){return`firestore_clients_${e}_${t}`}function Op(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function Rp(e,t){return`firestore_targets_${e}_${t}`}class Pp{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static tr(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Xa(r.error.code,r.error.message))),s?new Pp(e,t,r.state,i):(Ha("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Dp{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static tr(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Xa(n.error.code,n.error.message))),i?new Dp(e,n.state,r):(Ha("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=th();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Uu(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new Lp(e,i):(Ha("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Mp{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Mp(t.clientId,t.onlineState):(Ha("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Up{constructor(){this.activeTargetIds=th()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fp{constructor(e,t,n,r,i){this.window=e,this.Yn=t,this.persistenceKey=n,this.ir=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new vc(du),this.started=!1,this.cr=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.hr=Np(this.persistenceKey,this.ir),this.lr=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.ar=this.ar.insert(this.ir,new Up),this.dr=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.mr=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.gr=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,At.Z)(function*(){const t=yield e.syncEngine.Fs();for(const r of t){if(r===e.ir)continue;const t=e.getItem(Np(e.persistenceKey,r));if(t){const n=Lp.tr(r,t);n&&(e.ar=e.ar.insert(n.clientId,n))}}e.yr();const n=e.storage.getItem(e.mr);if(n){const t=e.pr(n);t&&e.Ir(t)}for(const r of e.cr)e.ur(r);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,n){this.Er(e,t,n),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Rp(this.persistenceKey,e));if(n){const r=Dp.tr(e,n);r&&(t=r.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Rp(this.persistenceKey,e))}updateQueryState(e,t,n){this.br(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.Ar(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return za("SharedClientState","READ",e,t),t}setItem(e,t){za("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){za("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const n=e;if(n.storageArea===this.storage){if(za("SharedClientState","EVENT",n.key,n.newValue),n.key===this.hr)return void Ha("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,At.Z)(function*(){if(t.started){if(null!==n.key)if(t.dr.test(n.key)){if(null==n.newValue){const e=t.vr(n.key);return t.Sr(e,null)}{const e=t.Dr(n.key,n.newValue);if(e)return t.Sr(e.clientId,e)}}else if(t._r.test(n.key)){if(null!==n.newValue){const e=t.Cr(n.key,n.newValue);if(e)return t.Nr(e)}}else if(t.wr.test(n.key)){if(null!==n.newValue){const e=t.kr(n.key,n.newValue);if(e)return t.Mr(e)}}else if(n.key===t.mr){if(null!==n.newValue){const e=t.pr(n.newValue);if(e)return t.Ir(e)}}else if(n.key===t.lr){const e=function(e){let t=cu.A;if(null!=e)try{const n=JSON.parse(e);Ja("number"==typeof n),t=n}catch(e){Ha("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue);e!==cu.A&&t.sequenceNumberHandler(e)}else if(n.key===t.gr){const e=t.Or(n.newValue);yield Promise.all(e.map(e=>t.syncEngine.Fr(e)))}}else t.cr.push(n)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,n){const r=new Pp(this.currentUser,e,t,n),i=Op(this.persistenceKey,this.currentUser,e);this.setItem(i,r.er())}Ar(e){const t=Op(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,n){const r=Rp(this.persistenceKey,e),i=new Dp(e,t,n);this.setItem(r,i.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const n=this.vr(e);return Lp.tr(n,t)}Cr(e,t){const n=this._r.exec(e),r=Number(n[1]);return Pp.tr(new qa(void 0!==n[2]?n[2]:null),r,t)}kr(e,t){const n=this.wr.exec(e),r=Number(n[1]);return Dp.tr(r,t)}pr(e){return Mp.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,At.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);za("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const n=t?this.ar.insert(e,t):this.ar.remove(e),r=this.Tr(this.ar),i=this.Tr(n),s=[],o=[];return i.forEach(e=>{r.has(e)||s.push(e)}),r.forEach(e=>{i.has(e)||o.push(e)}),this.syncEngine.Lr(s,o).then(()=>{this.ar=n})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=th();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class Vp{constructor(){this.Ur=new Up,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,n){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Up,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Zp{Kr(e){}shutdown(){}}class qp{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){za("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){za("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const jp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Bp{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class $p extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,n,r,i){const s=this.ho(e,t);za("RestConnection","Sending: ",s,n);const o={};return this.lo(o,r,i),this.fo(e,s,o,n).then(e=>(za("RestConnection","Received: ",e),e),t=>{throw Ga("RestConnection",`${e} failed with error: `,t,"url: ",s,"request:",n),t})}_o(e,t,n,r,i){return this.co(e,t,n,r,i)}lo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ja,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}ho(e,t){return`${this.uo}/v1/${t}:${jp[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,n,r){return new Promise((i,s)=>{const o=new Za;o.listenOnce(La.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Da.NO_ERROR:const t=o.getResponseJson();za("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Da.TIMEOUT:za("Connection",'RPC "'+e+'" timed out'),s(new Xa(Qa.DEADLINE_EXCEEDED,"Request time out"));break;case Da.HTTP_ERROR:const n=o.getStatus();if(za("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Qa).indexOf(t)>=0?t:Qa.UNKNOWN}(e.status);s(new Xa(t,e.message))}else s(new Xa(Qa.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Xa(Qa.UNAVAILABLE,"Connection failed."));break;default:Wa()}}finally{za("Connection",'RPC "'+e+'" completed.')}});const a=JSON.stringify(r);o.send(t,"POST",a,n,15)})}wo(e,t,n){const r=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Ra(),s=Pa(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Fa({})),this.lo(o.initMessageHeaders,t,n),(0,St.uI)()||(0,St.b$)()||(0,St.d)()||(0,St.w1)()||(0,St.Mn)()||(0,St.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");const a=r.join("");za("Connection","Creating WebChannel: "+a,o);const u=i.createWebChannel(a,o);let c=!1,l=!1;const h=new Bp({Jr:e=>{l?za("Connection","Not sending because WebChannel is closed:",e):(c||(za("Connection","Opening WebChannel transport."),u.open(),c=!0),za("Connection","WebChannel sending:",e),u.send(e))},Yr:()=>u.close()}),d=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return d(u,Va.EventType.OPEN,()=>{l||za("Connection","WebChannel transport opened.")}),d(u,Va.EventType.CLOSE,()=>{l||(l=!0,za("Connection","WebChannel transport closed"),h.ro())}),d(u,Va.EventType.ERROR,e=>{l||(l=!0,Ga("Connection","WebChannel transport errored:",e),h.ro(new Xa(Qa.UNAVAILABLE,"The operation could not be completed")))}),d(u,Va.EventType.MESSAGE,e=>{var t;if(!l){const n=e.data[0];Ja(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){za("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=ql[e];if(void 0!==t)return $l(t)}(e),n=i.message;void 0===t&&(t=Qa.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),l=!0,h.ro(new Xa(t,n)),u.close()}else za("Connection","WebChannel received:",n),h.oo(n)}}),d(s,Ma.STAT_EVENT,e=>{e.stat===Ua.PROXY?za("Connection","Detected buffering proxy"):e.stat===Ua.NOPROXY&&za("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.io()},0),h}}function zp(){return"undefined"!=typeof window?window:null}function Hp(){return"undefined"!=typeof document?document:null}function Gp(e){return new fh(e,!0)}class Kp{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Yn=e,this.timerId=t,this.mo=n,this.yo=r,this.po=i,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),n=Math.max(0,Date.now()-this.Eo),r=Math.max(0,t-n);r>0&&za("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Wp{constructor(e,t,n,r,i,s,o,a){this.Yn=e,this.Vo=n,this.vo=r,this.So=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Kp(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,At.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,At.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var n=this;return(0,At.Z)(function*(){n.Uo(),n.qo(),n.No.cancel(),n.Do++,4!==e?n.No.reset():t&&t.code===Qa.RESOURCE_EXHAUSTED?(Ha(t.toString()),Ha("Using maximum backoff delay to prevent overloading the backend."),n.No.Ao()):t&&t.code===Qa.UNAUTHENTICATED&&3!==n.state&&(n.authCredentialsProvider.invalidateToken(),n.appCheckCredentialsProvider.invalidateToken()),null!==n.stream&&(n.Ko(),n.stream.close(),n.stream=null),n.state=e,yield n.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.Do===t&&this.Qo(e,n)},t=>{e(()=>{const e=new Xa(Qa.UNKNOWN,"Fetching auth token failed: "+t.message);return this.jo(e)})})}Qo(e,t){const n=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{n(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(e=>{n(()=>this.jo(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}Oo(){var e=this;this.state=5,this.No.Ro((0,At.Z)(function*(){e.state=0,e.start()}))}jo(e){return za("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(za("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Jp extends Wp{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.M=i}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function(e,t){let n;if("targetChange"in t){const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Wa()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.N?(Ja(void 0===t||"string"==typeof t),Eu.fromBase64String(t||"")):(Ja(void 0===t||t instanceof Uint8Array),Eu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Qa.UNKNOWN:$l(e.code);return new Xa(t,e.message||"")}(o);n=new oh(r,i,s,a||null)}else if("documentChange"in t){const r=t.documentChange,i=_h(e,r.document.name),s=yh(r.document.updateTime),o=new oc({mapValue:{fields:r.document.fields}}),a=uc.newFoundDocument(i,s,o);n=new ih(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in t){const r=t.documentDelete,i=_h(e,r.document),s=r.readTime?yh(r.readTime):mu.min(),o=uc.newNoDocument(i,s);n=new ih([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){const r=t.documentRemove,i=_h(e,r.document);n=new ih([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return Wa();{const e=t.filter,r=new Zl(e.count||0);n=new sh(e.targetId,r)}}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return mu.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?mu.min():t.readTime?yh(t.readTime):mu.min()}(e);return this.listener.zo(t,n)}Ho(e){const t={};t.database=Ih(this.M),t.addTarget=function(e,t){let n;const r=t.target;return n=Ac(r)?{documents:Nh(e,r)}:{query:Oh(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=gh(e,t.resumeToken):t.snapshotVersion.compareTo(mu.min())>0&&(n.readTime=ph(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Wa()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);n&&(t.labels=n),this.Lo(t)}Jo(e){const t={};t.database=Ih(this.M),t.removeTarget=e,this.Lo(t)}}class Yp extends Wp{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.M=i,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Ja(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function(e,t){return e&&e.length>0?(Ja(void 0!==t),e.map(e=>function(e,t){let n=yh(e.updateTime?e.updateTime:t);return n.isEqual(mu.min())&&(n=yh(t)),new Il(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=yh(e.commitTime);return this.listener.tu(n,t)}return Ja(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Ih(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Ah(this.M,e))};this.Lo(t)}}class Qp extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=n,this.M=r,this.su=!1}iu(){if(this.su)throw new Xa(Qa.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,n){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.So.co(e,t,n,r,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Qa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xa(Qa.UNKNOWN,e.toString())})}_o(e,t,n){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.So._o(e,t,n,r,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Qa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xa(Qa.UNKNOWN,e.toString())})}terminate(){this.su=!0}}class Xp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Ha(t),this.uu=!1):za("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class eg{constructor(e,t,n,r,i){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=i,this.gu.Kr(e=>{n.enqueueAndForget((0,At.Z)(function*(){var e;hg(s)&&(za("RemoteStore","Restarting streams for network reachability change."),yield(e=(0,At.Z)(function*(e){const t=Ya(e);t.wu.add(4),yield rg(t),t.yu.set("Unknown"),t.wu.delete(4),yield tg(t)}),function(t){return e.apply(this,arguments)})(s))}))}),this.yu=new Xp(n,r)}}function tg(e){return ng.apply(this,arguments)}function ng(){return(ng=(0,At.Z)(function*(e){if(hg(e))for(const t of e.mu)yield t(!0)})).apply(this,arguments)}function rg(e){return ig.apply(this,arguments)}function ig(){return(ig=(0,At.Z)(function*(e){for(const t of e.mu)yield t(!1)})).apply(this,arguments)}function sg(e,t){const n=Ya(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),lg(n)?cg(n):Zg(n).Mo()&&ag(n,t))}function og(e,t){const n=Ya(e),r=Zg(n);n._u.delete(t),r.Mo()&&ug(n,t),0===n._u.size&&(r.Mo()?r.$o():hg(n)&&n.yu.set("Unknown"))}function ag(e,t){e.pu.Z(t.targetId),Zg(e).Ho(t)}function ug(e,t){e.pu.Z(t),Zg(e).Jo(t)}function cg(e){e.pu=new uh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e._u.get(t)||null}),Zg(e).start(),e.yu.au()}function lg(e){return hg(e)&&!Zg(e).ko()&&e._u.size>0}function hg(e){return 0===Ya(e).wu.size}function dg(e){e.pu=void 0}function fg(e){return pg.apply(this,arguments)}function pg(){return(pg=(0,At.Z)(function*(e){e._u.forEach((t,n)=>{ag(e,t)})})).apply(this,arguments)}function gg(e,t){return mg.apply(this,arguments)}function mg(){return(mg=(0,At.Z)(function*(e,t){dg(e),lg(e)?(e.yu.lu(t),cg(e)):e.yu.set("Unknown")})).apply(this,arguments)}function yg(e,t,n){return vg.apply(this,arguments)}function vg(){return(vg=(0,At.Z)(function*(e,t,n){if(e.yu.set("Online"),t instanceof oh&&2===t.state&&t.cause)try{yield(r=(0,At.Z)(function*(e,t){const n=t.cause;for(const r of t.targetIds)e._u.has(r)&&(yield e.remoteSyncer.rejectListen(r,n),e._u.delete(r),e.pu.removeTarget(r))}),function(e,t){return r.apply(this,arguments)})(e,t)}catch(n){za("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),yield bg(e,n)}else if(t instanceof ih?e.pu.ut(t):t instanceof sh?e.pu._t(t):e.pu.ht(t),!n.isEqual(mu.min()))try{const t=yield sp(e.localStore);n.compareTo(t)>=0&&(yield function(e,t){const n=e.pu.yt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(t=>{const n=e._u.get(t);if(!n)return;e._u.set(t,n.withResumeToken(Eu.EMPTY_BYTE_STRING,n.snapshotVersion)),ug(e,t);const r=new Od(n.target,t,1,n.sequenceNumber);ag(e,r)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n))}catch(t){za("RemoteStore","Failed to raise snapshot:",t),yield bg(e,t)}var r})).apply(this,arguments)}function bg(e,t,n){return wg.apply(this,arguments)}function wg(){return(wg=(0,At.Z)(function*(e,t,n){if(!_d(t))throw t;e.wu.add(1),yield rg(e),e.yu.set("Offline"),n||(n=()=>sp(e.localStore)),e.asyncQueue.enqueueRetryable((0,At.Z)(function*(){za("RemoteStore","Retrying IndexedDB access"),yield n(),e.wu.delete(1),yield tg(e)}))})).apply(this,arguments)}function _g(e,t){return t().catch(n=>bg(e,n,t))}function Tg(e){return Sg.apply(this,arguments)}function Sg(){return(Sg=(0,At.Z)(function*(e){const t=Ya(e),n=qg(t);let r=t.du.length>0?t.du[t.du.length-1].batchId:-1;for(;Ig(t);)try{const e=yield up(t.localStore,r);if(null===e){0===t.du.length&&n.$o();break}r=e.batchId,Eg(t,e)}catch(e){yield bg(t,e)}kg(t)&&Cg(t)})).apply(this,arguments)}function Ig(e){return hg(e)&&e.du.length<10}function Eg(e,t){e.du.push(t);const n=qg(e);n.Mo()&&n.Xo&&n.Zo(t.mutations)}function kg(e){return hg(e)&&!qg(e).ko()&&e.du.length>0}function Cg(e){qg(e).start()}function Ag(e){return xg.apply(this,arguments)}function xg(){return(xg=(0,At.Z)(function*(e){qg(e).nu()})).apply(this,arguments)}function Ng(e){return Og.apply(this,arguments)}function Og(){return(Og=(0,At.Z)(function*(e){const t=qg(e);for(const n of e.du)t.Zo(n.mutations)})).apply(this,arguments)}function Rg(e,t,n){return Pg.apply(this,arguments)}function Pg(){return(Pg=(0,At.Z)(function*(e,t,n){const r=e.du.shift(),i=xd.from(r,t,n);yield _g(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),yield Tg(e)})).apply(this,arguments)}function Dg(e,t){return Lg.apply(this,arguments)}function Lg(){return(Lg=(0,At.Z)(function*(e,t){var n;t&&qg(e).Xo&&(yield(n=(0,At.Z)(function*(e,t){if(Bl(n=t.code)&&n!==Qa.ABORTED){const n=e.du.shift();qg(e).Fo(),yield _g(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),yield Tg(e)}var n}),function(e,t){return n.apply(this,arguments)})(e,t)),kg(e)&&Cg(e)})).apply(this,arguments)}function Mg(e,t){return Ug.apply(this,arguments)}function Ug(){return(Ug=(0,At.Z)(function*(e,t){const n=Ya(e);n.asyncQueue.verifyOperationInProgress(),za("RemoteStore","RemoteStore received new credentials");const r=hg(n);n.wu.add(3),yield rg(n),r&&n.yu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.wu.delete(3),yield tg(n)})).apply(this,arguments)}function Fg(e,t){return Vg.apply(this,arguments)}function Vg(){return(Vg=(0,At.Z)(function*(e,t){const n=Ya(e);t?(n.wu.delete(2),yield tg(n)):t||(n.wu.add(2),yield rg(n),n.yu.set("Unknown"))})).apply(this,arguments)}function Zg(e){return e.Iu||(e.Iu=function(e,t,n){const r=Ya(e);return r.iu(),new Jp(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:fg.bind(null,e),eo:gg.bind(null,e),zo:yg.bind(null,e)}),e.mu.push(function(){var t=(0,At.Z)(function*(t){t?(e.Iu.Fo(),lg(e)?cg(e):e.yu.set("Unknown")):(yield e.Iu.stop(),dg(e))});return function(e){return t.apply(this,arguments)}}())),e.Iu}function qg(e){return e.Tu||(e.Tu=function(e,t,n){const r=Ya(e);return r.iu(),new Yp(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Ag.bind(null,e),eo:Dg.bind(null,e),eu:Ng.bind(null,e),tu:Rg.bind(null,e)}),e.mu.push(function(){var t=(0,At.Z)(function*(t){t?(e.Tu.Fo(),yield Tg(e)):(yield e.Tu.stop(),e.du.length>0&&(za("RemoteStore",`Stopping write stream with ${e.du.length} pending writes`),e.du=[]))});return function(e){return t.apply(this,arguments)}}())),e.Tu}class jg{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new eu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new jg(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xa(Qa.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bg(e,t){if(Ha("AsyncQueue",`${t}: ${e}`),_d(e))return new Xa(Qa.UNAVAILABLE,`${t}: ${e}`);throw e}class $g{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Fu.comparator(t.key,n.key):(e,t)=>Fu.comparator(e.key,t.key),this.keyedMap=Wl(),this.sortedSet=new vc(this.comparator)}static emptySet(e){return new $g(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $g))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new $g;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class zg{constructor(){this.Eu=new vc(Fu.comparator)}track(e){const t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):Wa():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,n)=>{e.push(n)}),e}}class Hg{constructor(e,t,n,r,i,s,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Hg(e,t,$g.emptySet(t),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Gg{constructor(){this.Ru=void 0,this.listeners=[]}}class Kg{constructor(){this.queries=new zl(e=>nl(e),tl),this.onlineState="Unknown",this.bu=new Set}}function Wg(e,t){return Jg.apply(this,arguments)}function Jg(){return(Jg=(0,At.Z)(function*(e,t){const n=Ya(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Gg),i)try{s.Ru=yield n.onListen(r)}catch(e){const n=Bg(e,`Initialization of query '${rl(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Pu(n.onlineState),s.Ru&&t.Vu(s.Ru)&&tm(n)})).apply(this,arguments)}function Yg(e,t){return Qg.apply(this,arguments)}function Qg(){return(Qg=(0,At.Z)(function*(e,t){const n=Ya(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)})).apply(this,arguments)}function Xg(e,t){const n=Ya(e);let r=!1;for(const i of t){const e=n.queries.get(i.query);if(e){for(const t of e.listeners)t.Vu(i)&&(r=!0);e.Ru=i}}r&&tm(n)}function em(e,t,n){const r=Ya(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function tm(e){e.bu.forEach(e=>{e.next()})}class nm{constructor(e,t,n){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=n||{}}Vu(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Hg(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Hg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class rm{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class im{constructor(e){this.M=e}wi(e){return _h(this.M,e)}mi(e){return e.metadata.exists?Ch(this.M,e.document,!1):uc.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return yh(e)}}class sm{constructor(e,t,n){this.Ou=e,this.localStore=t,this.M=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=om(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const n=_u.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,n=new im(this.M);for(const r of e)if(r.metadata.queries){const e=n.wi(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Xl()).add(e);t.set(n,r)}}return t}complete(){var e=this;return(0,At.Z)(function*(){const t=yield function(e,t,n,r){return mp.apply(this,arguments)}(e.localStore,new im(e.M),e.documents,e.Ou.id),n=e.$u(e.documents);for(const r of e.queries)yield yp(e.localStore,r,n.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function om(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class am{constructor(e){this.key=e}}class um{constructor(e){this.key=e}}class cm{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=Xl(),this.mutatedKeys=Xl(),this.Gu=ol(e),this.Qu=new $g(this.Gu)}get ju(){return this.Uu}Wu(e,t){const n=t?t.zu:new zg,r=t?t.Qu:this.Qu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,u="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),l=il(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;c&&l?c.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.Hu(c,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.Gu(l,a)>0||u&&this.Gu(l,u)<0)&&(o=!0)):!c&&l?(n.track({type:0,doc:l}),f=!0):c&&!l&&(n.track({type:1,doc:c}),f=!0,(a||u)&&(o=!0)),f&&(l?(s=s.add(l),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Qu:s,zu:n,ii:o,mutatedKeys:i}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const i=e.zu.Au();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wa()}};return n(e)-n(t)}(e.type,t.type)||this.Gu(e.doc,t.doc)),this.Ju(n);const s=t?this.Yu():[],o=0===this.Ku.size&&this.current?1:0,a=o!==this.qu;return this.qu=o,0!==i.length||a?{snapshot:new Hg(this.query,e.Qu,r,i,e.mutatedKeys,0===o,a,!1),Xu:s}:{Xu:s}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new zg,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(e=>this.Uu=this.Uu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Uu=this.Uu.delete(e)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Xl(),this.Qu.forEach(e=>{this.Zu(e.key)&&(this.Ku=this.Ku.add(e.key))});const t=[];return e.forEach(e=>{this.Ku.has(e)||t.push(new um(e))}),this.Ku.forEach(n=>{e.has(n)||t.push(new am(n))}),t}ta(e){this.Uu=e._i,this.Ku=Xl();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Hg.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class lm{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class hm{constructor(e){this.key=e,this.na=!1}}class dm{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.sa={},this.ia=new zl(e=>nl(e),tl),this.ra=new Map,this.oa=new Set,this.ua=new vc(Fu.comparator),this.aa=new Map,this.ca=new _p,this.ha={},this.la=new Map,this.fa=Sf.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function fm(e,t){return pm.apply(this,arguments)}function pm(){return(pm=(0,At.Z)(function*(e,t){const n=ry(e);let r,i;const s=n.ia.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.ea();else{const e=yield cp(n.localStore,Xc(t));n.isPrimaryClient&&sg(n.remoteStore,e);const s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=yield gm(n,t,r,"current"===s)}return i})).apply(this,arguments)}function gm(e,t,n,r){return mm.apply(this,arguments)}function mm(){return(mm=(0,At.Z)(function*(e,t,n,r){e._a=(t,n,r)=>{return(i=(0,At.Z)(function*(e,t,n,r){let i=t.view.Wu(n);i.ii&&(i=yield dp(e.localStore,t.query,!1).then(({documents:e})=>t.view.Wu(e,i)));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return Dm(e,t.targetId,o.Xu),o.snapshot}),function(e,t,n,r){return i.apply(this,arguments)})(e,t,n,r);var i};const i=yield dp(e.localStore,t,!0),s=new cm(t,i._i),o=s.Wu(i.documents),a=rh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),u=s.applyChanges(o,e.isPrimaryClient,a);Dm(e,n,u.Xu);const c=new lm(t,n,s);return e.ia.set(t,c),e.ra.has(n)?e.ra.get(n).push(t):e.ra.set(n,[t]),u.snapshot})).apply(this,arguments)}function ym(e,t){return vm.apply(this,arguments)}function vm(){return(vm=(0,At.Z)(function*(e,t){const n=Ya(e),r=n.ia.get(t),i=n.ra.get(r.targetId);if(i.length>1)return n.ra.set(r.targetId,i.filter(e=>!tl(e,t))),void n.ia.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield lp(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),og(n.remoteStore,r.targetId),Rm(n,r.targetId)}).catch(Af))):(Rm(n,r.targetId),yield lp(n.localStore,r.targetId,!0))})).apply(this,arguments)}function bm(){return(bm=(0,At.Z)(function*(e,t,n){const r=iy(e);try{const e=yield function(e,t){const n=Ya(e),r=gu.now(),i=t.reduce((e,t)=>e.add(t.key),Xl());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>n.fi.Ks(e,i).next(i=>{s=i;const o=[];for(const e of t){const t=Nl(e,s.get(e.key));null!=t&&o.push(new Dl(e.key,t,ac(t.value.mapValue),El.exists(!0)))}return n.Bs.addMutationBatch(e,r,o,t)})).then(e=>(e.applyToLocalDocumentSet(s),{batchId:e.batchId,changes:s}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.ha[e.currentUser.toKey()];r||(r=new vc(du)),r=r.insert(t,n),e.ha[e.currentUser.toKey()]=r}(r,e.batchId,n),yield Um(r,e.changes),yield Tg(r.remoteStore)}catch(e){const t=Bg(e,"Failed to persist write");n.reject(t)}})).apply(this,arguments)}function wm(e,t){return _m.apply(this,arguments)}function _m(){return(_m=(0,At.Z)(function*(e,t){const n=Ya(e);try{const e=yield op(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.aa.get(t);r&&(Ja(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.na=!0:e.modifiedDocuments.size>0?Ja(r.na):e.removedDocuments.size>0&&(Ja(r.na),r.na=!1))}),yield Um(n,e,t)}catch(e){yield Af(e)}})).apply(this,arguments)}function Tm(e,t,n){const r=Ya(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ia.forEach((n,r)=>{const i=r.view.Pu(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Ya(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.listeners)i.Pu(t)&&(r=!0)}),r&&tm(n)}(r.eventManager,t),e.length&&r.sa.zo(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Sm(e,t,n){return Im.apply(this,arguments)}function Im(){return(Im=(0,At.Z)(function*(e,t,n){const r=Ya(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.aa.get(t),s=i&&i.key;if(s){let e=new vc(Fu.comparator);e=e.insert(s,uc.newNoDocument(s,mu.min()));const n=Xl().add(s),i=new nh(mu.min(),new Map,new _c(du),e,n);yield wm(r,i),r.ua=r.ua.remove(s),r.aa.delete(t),Mm(r)}else yield lp(r.localStore,t,!1).then(()=>Rm(r,t,n)).catch(Af)})).apply(this,arguments)}function Em(e,t){return km.apply(this,arguments)}function km(){return(km=(0,At.Z)(function*(e,t){const n=Ya(e),r=t.batch.batchId;try{const e=yield ip(n.localStore,t);Om(n,r,null),Nm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Um(n,e)}catch(e){yield Af(e)}})).apply(this,arguments)}function Cm(e,t,n){return Am.apply(this,arguments)}function Am(){return(Am=(0,At.Z)(function*(e,t,n){const r=Ya(e);try{const e=yield function(e,t){const n=Ya(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.Bs.lookupMutationBatch(e,t).next(t=>(Ja(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t))).next(()=>n.Bs.performConsistencyCheck(e)).next(()=>n.fi.Ks(e,r))})}(r.localStore,t);Om(r,t,n),Nm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),yield Um(r,e)}catch(n){yield Af(n)}})).apply(this,arguments)}function xm(){return(xm=(0,At.Z)(function*(e,t){const n=Ya(e);hg(n.remoteStore)||za("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=yield function(e){const t=Ya(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.Bs.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(-1===e)return void t.resolve();const r=n.la.get(e)||[];r.push(t),n.la.set(e,r)}catch(e){const n=Bg(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}})).apply(this,arguments)}function Nm(e,t){(e.la.get(t)||[]).forEach(e=>{e.resolve()}),e.la.delete(t)}function Om(e,t,n){const r=Ya(e);let i=r.ha[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.ha[r.currentUser.toKey()]=i}}function Rm(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.ra.get(t))e.ia.delete(r),n&&e.sa.wa(r,n);e.ra.delete(t),e.isPrimaryClient&&e.ca.vi(t).forEach(t=>{e.ca.containsKey(t)||Pm(e,t)})}function Pm(e,t){e.oa.delete(t.path.canonicalString());const n=e.ua.get(t);null!==n&&(og(e.remoteStore,n),e.ua=e.ua.remove(t),e.aa.delete(n),Mm(e))}function Dm(e,t,n){for(const r of n)r instanceof am?(e.ca.addReference(r.key,t),Lm(e,r)):r instanceof um?(za("SyncEngine","Document no longer in limbo: "+r.key),e.ca.removeReference(r.key,t),e.ca.containsKey(r.key)||Pm(e,r.key)):Wa()}function Lm(e,t){const n=t.key,r=n.path.canonicalString();e.ua.get(n)||e.oa.has(r)||(za("SyncEngine","New document in limbo: "+n),e.oa.add(r),Mm(e))}function Mm(e){for(;e.oa.size>0&&e.ua.size<e.maxConcurrentLimboResolutions;){const t=e.oa.values().next().value;e.oa.delete(t);const n=new Fu(_u.fromString(t)),r=e.fa.next();e.aa.set(r,new hm(n)),e.ua=e.ua.insert(n,r),sg(e.remoteStore,new Od(Xc(Kc(n.path)),r,2,cu.A))}}function Um(e,t,n){return Fm.apply(this,arguments)}function Fm(){return(Fm=(0,At.Z)(function*(e,t,n){const r=Ya(e),i=[],s=[],o=[];var a;r.ia.isEmpty()||(r.ia.forEach((e,a)=>{o.push(r._a(a,t,n).then(e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);const t=Qf.Ys(a.targetId,e);s.push(t)}}))}),yield Promise.all(o),r.sa.zo(i),yield(a=(0,At.Z)(function*(e,t){const n=Ya(e);try{yield n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>md.forEach(t,t=>md.forEach(t.Hs,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>md.forEach(t.Js,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!_d(e))throw e;za("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ui.get(e),r=t.withLastLimboFreeSnapshotVersion(t.snapshotVersion);n.ui=n.ui.insert(e,r)}}}),function(e,t){return a.apply(this,arguments)})(r.localStore,s))})).apply(this,arguments)}function Vm(e,t){return Zm.apply(this,arguments)}function Zm(){return(Zm=(0,At.Z)(function*(e,t){const n=Ya(e);if(!n.currentUser.isEqual(t)){za("SyncEngine","User change. New user:",t.toKey());const e=yield np(n.localStore,t);n.currentUser=t,function(e,t){e.la.forEach(e=>{e.forEach(e=>{e.reject(new Xa(Qa.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.la.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),yield Um(n,e.di)}})).apply(this,arguments)}function qm(e,t){const n=Ya(e),r=n.aa.get(t);if(r&&r.na)return Xl().add(r.key);{let e=Xl();const r=n.ra.get(t);if(!r)return e;for(const t of r){const r=n.ia.get(t);e=e.unionWith(r.view.ju)}return e}}function jm(e,t){return Bm.apply(this,arguments)}function Bm(){return(Bm=(0,At.Z)(function*(e,t){const n=Ya(e),r=yield dp(n.localStore,t.query,!0),i=t.view.ta(r);return n.isPrimaryClient&&Dm(n,t.targetId,i.Xu),i})).apply(this,arguments)}function $m(e,t){return zm.apply(this,arguments)}function zm(){return(zm=(0,At.Z)(function*(e,t){const n=Ya(e);return pp(n.localStore,t).then(e=>Um(n,e))})).apply(this,arguments)}function Hm(e,t,n,r){return Gm.apply(this,arguments)}function Gm(){return(Gm=(0,At.Z)(function*(e,t,n,r){const i=Ya(e),s=yield function(e,t){const n=Ya(e),r=Ya(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.fn(e,t).next(t=>t?n.fi.Ks(e,t):md.resolve(null)))}(i.localStore,t);null!==s?("pending"===n?yield Tg(i.remoteStore):"acknowledged"===n||"rejected"===n?(Om(i,t,r||null),Nm(i,t),function(e,t){Ya(Ya(e).Bs)._n(t)}(i.localStore,t)):Wa(),yield Um(i,s)):za("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function Km(){return(Km=(0,At.Z)(function*(e,t){const n=Ya(e);if(ry(n),iy(n),!0===t&&!0!==n.da){const e=n.sharedClientState.getAllActiveQueryTargets(),t=yield Wm(n,e.toArray());n.da=!0,yield Fg(n.remoteStore,!0);for(const r of t)sg(n.remoteStore,r)}else if(!1===t&&!1!==n.da){const e=[];let t=Promise.resolve();n.ra.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(Rm(n,i),lp(n.localStore,i,!0))),og(n.remoteStore,i)}),yield t,yield Wm(n,e),function(e){const t=Ya(e);t.aa.forEach((e,n)=>{og(t.remoteStore,n)}),t.ca.Si(),t.aa=new Map,t.ua=new vc(Fu.comparator)}(n),n.da=!1,yield Fg(n.remoteStore,!1)}})).apply(this,arguments)}function Wm(e,t,n){return Jm.apply(this,arguments)}function Jm(){return(Jm=(0,At.Z)(function*(e,t,n){const r=Ya(e),i=[],s=[];for(const o of t){let e;const t=r.ra.get(o);if(t&&0!==t.length){e=yield cp(r.localStore,Xc(t[0]));for(const e of t){const t=r.ia.get(e),n=yield jm(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=yield fp(r.localStore,o);e=yield cp(r.localStore,t),yield gm(r,Ym(t),o,!1)}i.push(e)}return r.sa.zo(s),i})).apply(this,arguments)}function Ym(e){return Gc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Qm(e){const t=Ya(e);return Ya(Ya(t.localStore).persistence).Fs()}function Xm(e,t,n,r){return ey.apply(this,arguments)}function ey(){return(ey=(0,At.Z)(function*(e,t,n,r){const i=Ya(e);if(i.da)return void za("SyncEngine","Ignoring unexpected query state notification.");const s=i.ra.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=yield pp(i.localStore,sl(s[0])),r=nh.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);yield Um(i,e,r);break}case"rejected":yield lp(i.localStore,t,!0),Rm(i,t,r);break;default:Wa()}})).apply(this,arguments)}function ty(e,t,n){return ny.apply(this,arguments)}function ny(){return(ny=(0,At.Z)(function*(e,t,n){const r=ry(e);if(r.da){for(const e of t){if(r.ra.has(e)){za("SyncEngine","Adding an already active target "+e);continue}const t=yield fp(r.localStore,e),n=yield cp(r.localStore,t);yield gm(r,Ym(t),n.targetId,!1),sg(r.remoteStore,n)}for(const e of n)r.ra.has(e)&&(yield lp(r.localStore,e,!1).then(()=>{og(r.remoteStore,e),Rm(r,e)}).catch(Af))}})).apply(this,arguments)}function ry(e){const t=Ya(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=wm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=qm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Sm.bind(null,t),t.sa.zo=Xg.bind(null,t.eventManager),t.sa.wa=em.bind(null,t.eventManager),t}function iy(e){const t=Ya(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Em.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Cm.bind(null,t),t}class sy{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,At.Z)(function*(){t.M=Gp(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return tp(this.persistence,new Xf,e.initialUser,this.M)}ya(e){return new Cp(xp.Yi,this.M)}ga(e){return new Vp}terminate(){var e=this;return(0,At.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class oy extends sy{constructor(e,t,n){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,n=this;return(0,At.Z)(function*(){yield t().call(n,e),yield n.Ta.initialize(n,e),yield iy(n.Ta.syncEngine),yield Tg(n.Ta.remoteStore),yield n.persistence.Ts(()=>(n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()))})()}Ia(e){return tp(this.persistence,new Xf,e.initialUser,this.M)}pa(e){return new Rf(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=Jf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?gf.withCacheSize(this.cacheSizeBytes):gf.DEFAULT;return new Gf(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,zp(),Hp(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new Vp}}class ay extends oy{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,n=this;return(0,At.Z)(function*(){yield t().call(n,e);const r=n.Ta.syncEngine;n.sharedClientState instanceof Fp&&(n.sharedClientState.syncEngine={$r:Hm.bind(null,r),Br:Xm.bind(null,r),Lr:ty.bind(null,r),Fs:Qm.bind(null,r),Fr:$m.bind(null,r)},yield n.sharedClientState.start()),yield n.persistence.Ts(function(){var e=(0,At.Z)(function*(e){yield function(e,t){return Km.apply(this,arguments)}(n.Ta.syncEngine,e),n.gcScheduler&&(e&&!n.gcScheduler.started?n.gcScheduler.start(n.localStore):e||n.gcScheduler.stop())});return function(t){return e.apply(this,arguments)}}())})()}ga(e){const t=zp();if(!Fp.vt(t))throw new Xa(Qa.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Jf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Fp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class uy{initialize(e,t){var n=this;return(0,At.Z)(function*(){n.localStore||(n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=e=>Tm(n.syncEngine,e,1),n.remoteStore.remoteSyncer.handleCredentialChange=Vm.bind(null,n.syncEngine),yield Fg(n.remoteStore,n.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Kg}createDatastore(e){const t=Gp(e.databaseInfo.databaseId),n=new $p(e.databaseInfo);return function(e,t,n,r){return new Qp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Tm(this.syncEngine,e,0),s=qp.vt()?new qp:new Zp,new eg(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new dm(e,t,n,r,i,s);return o&&(a.da=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,At.Z)(function*(e){const t=Ya(e);za("RemoteStore","RemoteStore shutting down."),t.wu.add(5),yield rg(t),t.gu.shutdown(),t.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function cy(e,t=10240){let n=0;return{read:()=>(0,At.Z)(function*(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}})(),cancel:()=>(0,At.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ly{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class hy{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new eu,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(e=>{e&&e.Mu()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))},e=>this.metadata.reject(e))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,At.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,At.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,At.Z)(function*(){const t=yield e.Va();if(null===t)return null;const n=e.ba.decode(t),r=Number(n);isNaN(r)&&e.va(`length string (${n}) is not valid number`);const i=yield e.Sa(r);return new rm(JSON.parse(i),t.length+r)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,At.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const n=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),n})()}Sa(e){var t=this;return(0,At.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const n=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),n})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,At.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const n=new Uint8Array(e.buffer.length+t.value.length);n.set(e.buffer),n.set(t.value,e.buffer.length),e.buffer=n}return t.done})()}}class dy{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,At.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Xa(Qa.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=yield(r=(0,At.Z)(function*(e,t){const n=Ya(e),r=Ih(n.M)+"/documents",i={documents:t.map(e=>wh(n.M,e))},s=yield n._o("BatchGetDocuments",r,i),o=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){Ja(!!t.found);const n=_h(e,t.found.name),r=yh(t.found.updateTime),i=new oc({mapValue:{fields:t.found.fields}});return uc.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Ja(!!t.missing),Ja(!!t.readTime);const n=_h(e,t.missing),r=yh(t.readTime);return uc.newNoDocument(n,r)}(e,t):Wa()}(n.M,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());Ja(!!t),a.push(t)}),a}),function(e,t){return r.apply(this,arguments)})(t.datastore,e);var r;return n.forEach(e=>t.recordVersion(e)),n})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,At.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var n;e.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((t,n)=>{const r=Fu.fromPath(n);e.mutations.push(new Vl(r,e.precondition(r)))}),yield(n=(0,At.Z)(function*(e,t){const n=Ya(e),r=Ih(n.M)+"/documents",i={writes:t.map(e=>Ah(n.M,e))};yield n.co("Commit",r,i)}),function(e,t){return n.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Wa();t=mu.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Xa(Qa.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?El.updateTime(t):El.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(mu.min()))throw new Xa(Qa.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return El.updateTime(t)}return El.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class fy{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.xa=n.maxAttempts,this.No=new Kp(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,At.Z)(function*(){const t=new dy(e.datastore),n=e.ka(t);n&&n.then(n=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(n)}).catch(t=>{e.Ma(t)}))}).catch(t=>{e.Ma(t)})}))}ka(e){try{const t=this.updateFunction(e);return!Lu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Bl(t)}return!1}}class py{constructor(e,t,n,r){var i=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=qa.UNAUTHENTICATED,this.clientId=hu.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,function(){var e=(0,At.Z)(function*(e){za("FirestoreClient","Received user=",e.uid),yield i.authCredentialListener(e),i.user=e});return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(n,e=>(za("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}getConfiguration(){var e=this;return(0,At.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Xa(Qa.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new eu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,At.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(n){const e=Bg(n,"Failed to shutdown persistence");t.reject(e)}})),t.promise}}function gy(e,t){return my.apply(this,arguments)}function my(){return(my=(0,At.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress(),za("FirestoreClient","Initializing OfflineComponentProvider");const n=yield e.getConfiguration();yield t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(function(){var e=(0,At.Z)(function*(e){r.isEqual(e)||(yield np(t.localStore,e),r=e)});return function(t){return e.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e.offlineComponents=t})).apply(this,arguments)}function yy(e,t){return vy.apply(this,arguments)}function vy(){return(vy=(0,At.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress();const n=yield by(e);za("FirestoreClient","Initializing OnlineComponentProvider");const r=yield e.getConfiguration();yield t.initialize(n,r),e.setCredentialChangeListener(e=>Mg(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Mg(t.remoteStore,n)),e.onlineComponents=t})).apply(this,arguments)}function by(e){return wy.apply(this,arguments)}function wy(){return(wy=(0,At.Z)(function*(e){return e.offlineComponents||(za("FirestoreClient","Using default OfflineComponentProvider"),yield gy(e,new sy)),e.offlineComponents})).apply(this,arguments)}function _y(e){return Ty.apply(this,arguments)}function Ty(){return(Ty=(0,At.Z)(function*(e){return e.onlineComponents||(za("FirestoreClient","Using default OnlineComponentProvider"),yield yy(e,new uy)),e.onlineComponents})).apply(this,arguments)}function Sy(e){return by(e).then(e=>e.persistence)}function Iy(e){return by(e).then(e=>e.localStore)}function Ey(e){return _y(e).then(e=>e.remoteStore)}function ky(e){return _y(e).then(e=>e.syncEngine)}function Cy(e){return Ay.apply(this,arguments)}function Ay(){return(Ay=(0,At.Z)(function*(e){const t=yield _y(e),n=t.eventManager;return n.onListen=fm.bind(null,t.syncEngine),n.onUnlisten=ym.bind(null,t.syncEngine),n})).apply(this,arguments)}function xy(e,t,n={}){const r=new eu;return e.asyncQueue.enqueueAndForget((0,At.Z)(function*(){return function(e,t,n,r,i){const s=new ly({next:s=>{t.enqueueAndForget(()=>Yg(e,o));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Xa(Qa.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Xa(Qa.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new nm(Kc(n.path),s,{includeMetadataChanges:!0,ku:!0});return Wg(e,o)}(yield Cy(e),e.asyncQueue,t,n,r)})),r.promise}function Ny(e,t,n={}){const r=new eu;return e.asyncQueue.enqueueAndForget((0,At.Z)(function*(){return function(e,t,n,r,i){const s=new ly({next:n=>{t.enqueueAndForget(()=>Yg(e,o)),n.fromCache&&"server"===r.source?i.reject(new Xa(Qa.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new nm(n,s,{includeMetadataChanges:!0,ku:!0});return Wg(e,o)}(yield Cy(e),e.asyncQueue,t,n,r)})),r.promise}const Oy=new Map;function Ry(e,t,n){if(!n)throw new Xa(Qa.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Py(e,t,n,r){if(!0===t&&!0===r)throw new Xa(Qa.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Dy(e){if(!Fu.isDocumentKey(e))throw new Xa(Qa.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Ly(e){if(Fu.isDocumentKey(e))throw new Xa(Qa.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function My(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Wa()}function Uy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xa(Qa.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=My(e);throw new Xa(Qa.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Fy(e,t){if(t<=0)throw new Xa(Qa.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class Vy{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Xa(Qa.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Xa(Qa.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Py("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zy{constructor(e,t,n){this._authCredentials=t,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vy({}),this._settingsFrozen=!1,e instanceof Du?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Xa(Qa.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Du(e.options.projectId)}(e))}get app(){if(!this._app)throw new Xa(Qa.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Xa(Qa.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vy(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new nu;switch(e.type){case"gapi":const t=e.client;return Ja(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new ou(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Xa(Qa.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Oy.get(e);t&&(za("ComponentProvider","Removing Datastore"),Oy.delete(e),t.terminate())}(this),Promise.resolve()}}class qy{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new By(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qy(this.firestore,e,this._key)}}class jy{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new jy(this.firestore,e,this._query)}}class By extends jy{constructor(e,t,n){super(e,t,Kc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qy(this.firestore,null,new Fu(e))}withConverter(e){return new By(this.firestore,e,this._path)}}function $y(e,t,...n){if(e=(0,St.m9)(e),Ry("collection","path",t),e instanceof Zy){const r=_u.fromString(t,...n);return Ly(r),new By(e,null,r)}{if(!(e instanceof qy||e instanceof By))throw new Xa(Qa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(_u.fromString(t,...n));return Ly(r),new By(e.firestore,null,r)}}function zy(e,t,...n){if(e=(0,St.m9)(e),1===arguments.length&&(t=hu.R()),Ry("doc","path",t),e instanceof Zy){const r=_u.fromString(t,...n);return Dy(r),new qy(e,null,new Fu(r))}{if(!(e instanceof qy||e instanceof By))throw new Xa(Qa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(_u.fromString(t,...n));return Dy(r),new qy(e.firestore,e instanceof By?e.converter:null,new Fu(r))}}function Hy(e,t){return e=(0,St.m9)(e),t=(0,St.m9)(t),(e instanceof qy||e instanceof By)&&(t instanceof qy||t instanceof By)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Gy(e,t){return e=(0,St.m9)(e),t=(0,St.m9)(t),e instanceof jy&&t instanceof jy&&e.firestore===t.firestore&&tl(e._query,t._query)&&e.converter===t.converter}class Ky{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Kp(this,"async_queue_retry"),this.Qa=()=>{const e=Hp();e&&za("AsyncQueue","Visibility state changed to "+e.visibilityState),this.No.Po()};const e=Hp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=Hp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new eu;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,At.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(Gr){if(!_d(Gr))throw Gr;za("AsyncQueue","Operation failed with retryable error: "+Gr)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(e=>{throw this.Ua=e,this.qa=!1,Ha("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.qa=!1,e))));return this.Fa=t,t}enqueueAfterDelay(e,t,n){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const r=jg.createAndSchedule(this,e,t,n,e=>this.Ha(e));return this.La.push(r),r}ja(){this.Ua&&Wa()}verifyOperationInProgress(){}Ja(){var e=this;return(0,At.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function Wy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class Jy{constructor(){this._progressObserver={},this._taskCompletionResolver=new eu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Yy extends Zy{constructor(e,t,n){super(e,t,n),this.type="firestore",this._queue=new Ky,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||ev(this),this._firestoreClient.terminate()}}function Qy(e=(0,It.getApp)()){return(0,It._getProvider)(e,"firestore").getImmediate()}function Xy(e){return e._firestoreClient||ev(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ev(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new Pu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new py(e._authCredentials,e._appCheckCredentials,e._queue,r)}function tv(e,t,n){const r=new eu;return e.asyncQueue.enqueue((0,At.Z)(function*(){try{yield gy(e,n),yield yy(e,t),r.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===Qa.FAILED_PRECONDITION||e.code===Qa.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.reject(e)}})).then(()=>r.promise)}function nv(e){if(e._initialized||e._terminated)throw new Xa(Qa.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class rv{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Xa(Qa.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Su(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class iv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new iv(Eu.fromBase64String(e))}catch(e){throw new Xa(Qa.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new iv(Eu.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class sv{constructor(e){this._methodName=e}}class ov{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Xa(Qa.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Xa(Qa.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return du(this._lat,e._lat)||du(this._long,e._long)}}const av=/^__.*__$/;class uv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Dl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pl(e,this.data,t,this.fieldTransforms)}}class cv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Dl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function lv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wa()}}class hv{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.M=n,this.ignoreUndefinedProperties=r,void 0===i&&this.tc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new hv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.rc(e),r}oc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.tc(),r}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return Ov(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(lv(this.ec)&&av.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class dv{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=n||Gp(e)}lc(e,t,n,r=!1){return new hv({ec:e,methodName:t,hc:n,path:Su.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function fv(e){const t=e._freezeSettings(),n=Gp(e._databaseId);return new dv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function pv(e,t,n,r,i,s={}){const o=e.lc(s.merge||s.mergeFields?2:0,t,n,i);Cv("Data must be an object, but it was:",o,r);const a=Ev(r,o);let u,c;if(s.merge)u=new Iu(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Av(t,r,n);if(!o.contains(i))throw new Xa(Qa.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Rv(e,i)||e.push(i)}u=new Iu(e),c=o.fieldTransforms.filter(e=>u.covers(e.field))}else u=null,c=o.fieldTransforms;return new uv(new oc(a),u,c)}class gv extends sv{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gv}}function mv(e,t,n){return new hv({ec:3,hc:t.settings.hc,methodName:e._methodName,ic:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}class yv extends sv{_toFieldTransform(e){return new Sl(e.path,new gl)}isEqual(e){return e instanceof yv}}class vv extends sv{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=mv(this,e,!0),n=this.fc.map(e=>Iv(e,t)),r=new ml(n);return new Sl(e.path,r)}isEqual(e){return this===e}}class bv extends sv{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=mv(this,e,!0),n=this.fc.map(e=>Iv(e,t)),r=new vl(n);return new Sl(e.path,r)}isEqual(e){return this===e}}class wv extends sv{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new wl(e.M,ll(e.M,this.dc));return new Sl(e.path,t)}isEqual(e){return this===e}}function _v(e,t,n,r){const i=e.lc(1,t,n);Cv("Data must be an object, but it was:",i,r);const s=[],o=oc.empty();vu(r,(e,r)=>{const a=Nv(t,e,n);r=(0,St.m9)(r);const u=i.oc(a);if(r instanceof gv)s.push(a);else{const e=Iv(r,u);null!=e&&(s.push(a),o.set(a,e))}});const a=new Iu(s);return new cv(o,a,i.fieldTransforms)}function Tv(e,t,n,r,i,s){const o=e.lc(1,t,n),a=[Av(t,r,n)],u=[i];if(s.length%2!=0)throw new Xa(Qa.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Av(t,s[d])),u.push(s[d+1]);const c=[],l=oc.empty();for(let d=a.length-1;d>=0;--d)if(!Rv(c,a[d])){const e=a[d];let t=u[d];t=(0,St.m9)(t);const n=o.oc(e);if(t instanceof gv)c.push(e);else{const r=Iv(t,n);null!=r&&(c.push(e),l.set(e,r))}}const h=new Iu(c);return new cv(l,h,o.fieldTransforms)}function Sv(e,t,n,r=!1){return Iv(n,e.lc(r?4:3,t))}function Iv(e,t){if(kv(e=(0,St.m9)(e)))return Cv("Unsupported field value:",t,e),Ev(e,t);if(e instanceof sv)return function(e,t){if(!lv(t.ec))throw t.ac(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.ac(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Iv(i,t.uc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,St.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ll(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=gu.fromDate(e);return{timestampValue:ph(t.M,n)}}if(e instanceof gu){const n=new gu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ph(t.M,n)}}if(e instanceof ov)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof iv)return{bytesValue:gh(t.M,e._byteString)};if(e instanceof qy){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.ac(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:vh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ac(`Unsupported field value: ${My(e)}`)}(e,t)}function Ev(e,t){const n={};return bu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):vu(e,(e,r)=>{const i=Iv(r,t.sc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function kv(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof gu||e instanceof ov||e instanceof iv||e instanceof qy||e instanceof sv)}function Cv(e,t,n){if(!kv(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=My(n);throw t.ac("an object"===r?e+" a custom object":e+" "+r)}}function Av(e,t,n){if((t=(0,St.m9)(t))instanceof rv)return t._internalPath;if("string"==typeof t)return Nv(e,t);throw Ov("Field path arguments must be of type string or ",e,!1,void 0,n)}const xv=new RegExp("[~\\*/\\[\\]]");function Nv(e,t,n){if(t.search(xv)>=0)throw Ov(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new rv(...t.split("."))._internalPath}catch(r){throw Ov(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Ov(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Xa(Qa.INVALID_ARGUMENT,a+e+u)}function Rv(e,t){return e.some(e=>e.isEqual(t))}class Pv{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new qy(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Dv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Lv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Dv extends Pv{data(){return super.data()}}function Lv(e,t){return"string"==typeof t?Nv(e,t):t instanceof rv?t._internalPath:t._delegate._internalPath}class Mv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uv extends Pv{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Fv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Lv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Fv extends Uv{data(e={}){return super.data(e)}}class Vv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Mv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Fv(this._firestore,this._userDataWriter,n.key,n,new Mv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Xa(Qa.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>({type:"added",doc:new Fv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Mv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Fv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Mv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Zv(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Zv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wa()}}function qv(e,t){return e instanceof Uv&&t instanceof Uv?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Vv&&t instanceof Vv&&e._firestore===t._firestore&&Gy(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function jv(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Xa(Qa.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bv{}function $v(e,...t){for(const n of t)e=n._apply(e);return e}class zv extends Bv{constructor(e,t,n){super(),this._c=e,this.wc=t,this.mc=n,this.type="where"}_apply(e){const t=fv(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Xa(Qa.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){Qv(o,s);const t=[];for(const n of o)t.push(Yv(r,e,n));a={arrayValue:{values:t}}}else a=Yv(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Qv(o,s),a=Sv(n,"where",o,"in"===s||"not-in"===s);const u=Rc.create(i,s,a);return function(e,t){if(t.S()){const n=Jc(e);if(null!==n&&!n.isEqual(t.field))throw new Xa(Qa.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=Wc(e);null!==r&&Xv(0,t.field,r)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw new Xa(Qa.INVALID_ARGUMENT,n===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,u),u}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new jy(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new Hc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}class Hv extends Bv{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Xa(Qa.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Xa(Qa.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new jc(t,n);return function(e,t){if(null===Wc(e)){const n=Jc(e);null!==n&&Xv(0,n,t.field)}}(e,r),r}(e._query,this._c,this.gc);return new jy(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Hc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Gv extends Bv{constructor(e,t,n){super(),this.type=e,this.yc=t,this.Ic=n}_apply(e){return new jy(e.firestore,e.converter,el(e._query,this.yc,this.Ic))}}class Kv extends Bv{constructor(e,t,n){super(),this.type=e,this.Tc=t,this.Ec=n}_apply(e){const t=Jv(e,this.type,this.Tc,this.Ec);return new jy(e.firestore,e.converter,function(e,t){return new Hc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Wv extends Bv{constructor(e,t,n){super(),this.type=e,this.Tc=t,this.Ec=n}_apply(e){const t=Jv(e,this.type,this.Tc,this.Ec);return new jy(e.firestore,e.converter,function(e,t){return new Hc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Jv(e,t,n,r){if(n[0]=(0,St.m9)(n[0]),n[0]instanceof Pv)return function(e,t,n,r,i){if(!r)throw new Xa(Qa.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of Qc(e))if(o.field.isKeyField())s.push(Ku(t,r.key));else{const e=r.data.field(o.field);if(Nu(e))throw new Xa(Qa.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Xa(Qa.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new qc(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=fv(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Xa(Qa.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let u=0;u<i.length;u++){const s=i[u];if(o[u].field.isKeyField()){if("string"!=typeof s)throw new Xa(Qa.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof s}`);if(!Yc(e)&&-1!==s.indexOf("/"))throw new Xa(Qa.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${s}' contains a slash.`);const n=e.path.child(_u.fromString(s));if(!Fu.isDocumentKey(n))throw new Xa(Qa.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new Fu(n);a.push(Ku(t,i))}else{const e=Sv(n,r,s);a.push(e)}}return new qc(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Yv(e,t,n){if("string"==typeof(n=(0,St.m9)(n))){if(""===n)throw new Xa(Qa.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yc(t)&&-1!==n.indexOf("/"))throw new Xa(Qa.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(_u.fromString(n));if(!Fu.isDocumentKey(r))throw new Xa(Qa.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ku(e,new Fu(r))}if(n instanceof qy)return Ku(e,n._key);throw new Xa(Qa.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${My(n)}.`)}function Qv(e,t){if(!Array.isArray(e)||0===e.length)throw new Xa(Qa.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new Xa(Qa.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function Xv(e,t,n){if(!n.isEqual(t))throw new Xa(Qa.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}const eb={maxAttempts:5};class tb{convertValue(e,t="none"){switch(qu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Au(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Wa()}}convertObject(e,t){const n={};return vu(e.fields,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new ov(Au(e.latitude),Au(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Ou(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ru(e));default:return null}}convertTimestamp(e){const t=Cu(e);return new gu(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=_u.fromString(e);Ja(qh(n));const r=new Du(n.get(1),n.get(3)),i=new Fu(n.popFirst(5));return r.isEqual(t)||Ha(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function nb(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class rb extends tb{constructor(e){super(),this.firestore=e}convertBytes(e){return new iv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qy(this.firestore,null,t)}}class ib{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=fv(e)}set(e,t,n){this._verifyNotCommitted();const r=sb(e,this._firestore),i=nb(r.converter,t,n),s=pv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,El.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=sb(e,this._firestore);let s;return s="string"==typeof(t=(0,St.m9)(t))||t instanceof rv?Tv(this._dataReader,"WriteBatch.update",i._key,t,n,r):_v(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,El.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=sb(e,this._firestore);return this._mutations=this._mutations.concat(new Fl(t._key,El.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xa(Qa.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sb(e,t){if((e=(0,St.m9)(e)).firestore!==t)throw new Xa(Qa.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class ob extends tb{constructor(e){super(),this.firestore=e}convertBytes(e){return new iv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qy(this.firestore,null,t)}}function ab(e){e=Uy(e,jy);const t=Uy(e.firestore,Yy),n=Xy(t),r=new ob(t);return jv(e._query),Ny(n,e._query).then(n=>new Vv(t,r,e,n))}function ub(e,t,n){e=Uy(e,qy);const r=Uy(e.firestore,Yy),i=nb(e.converter,t,n);return db(r,[pv(fv(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,El.none())])}function cb(e,t,n,...r){e=Uy(e,qy);const i=Uy(e.firestore,Yy),s=fv(i);let o;return o="string"==typeof(t=(0,St.m9)(t))||t instanceof rv?Tv(s,"updateDoc",e._key,t,n,r):_v(s,"updateDoc",e._key,t),db(i,[o.toMutation(e._key,El.exists(!0))])}function lb(e){return db(Uy(e.firestore,Yy),[new Fl(e._key,El.none())])}function hb(e,...t){var n,r,i;e=(0,St.m9)(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||Wy(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(Wy(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let u,c,l;if(e instanceof qy)c=Uy(e.firestore,Yy),l=Kc(e._key.path),u={next:n=>{t[o]&&t[o](fb(c,e,n))},error:t[o+1],complete:t[o+2]};else{const n=Uy(e,jy);c=Uy(n.firestore,Yy),l=n._query;const r=new ob(c);u={next:e=>{t[o]&&t[o](new Vv(c,r,n,e))},error:t[o+1],complete:t[o+2]},jv(e._query)}return function(e,t,n,r){const i=new ly(r),s=new nm(t,i,n);return e.asyncQueue.enqueueAndForget((0,At.Z)(function*(){return Wg(yield Cy(e),s)})),()=>{i.Aa(),e.asyncQueue.enqueueAndForget((0,At.Z)(function*(){return Yg(yield Cy(e),s)}))}}(Xy(c),l,a,u)}function db(e,t){return function(e,t){const n=new eu;return e.asyncQueue.enqueueAndForget((0,At.Z)(function*(){return function(e,t,n){return bm.apply(this,arguments)}(yield ky(e),t,n)})),n.promise}(Xy(e),t)}function fb(e,t,n){const r=n.docs.get(t._key),i=new ob(e);return new Uv(e,i,t._key,r,new Mv(n.hasPendingWrites,n.fromCache),t.converter)}class pb extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=fv(e)}get(e){const t=sb(e,this._firestore),n=new rb(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return Wa();const r=e[0];if(r.isFoundDocument())return new Pv(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Pv(this._firestore,n,t._key,null,t.converter);throw Wa()})}set(e,t,n){const r=sb(e,this._firestore),i=nb(r.converter,t,n),s=pv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=sb(e,this._firestore);let s;return s="string"==typeof(t=(0,St.m9)(t))||t instanceof rv?Tv(this._dataReader,"Transaction.update",i._key,t,n,r):_v(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=sb(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=sb(e,this._firestore),n=new ob(this._firestore);return super.get(e).then(e=>new Uv(this._firestore,n,t._key,e._document,new Mv(!1,!1),t.converter))}}!function(e,t=!0){!function(e){ja=e}(It.SDK_VERSION),(0,It._registerComponent)(new kt.wA("firestore",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=new Yy(r,new iu(e.getProvider("auth-internal")),new uu(e.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:t},n),i._setSettings(n),i},"PUBLIC")),(0,It.registerVersion)("@firebase/firestore","3.4.9",e),(0,It.registerVersion)("@firebase/firestore","3.4.9","esm2017")}();class gb{constructor(e){return e}}const mb=new r.OlP("angularfire2.firestore-instances");function yb(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new gb(r)}}const vb={provide:class{constructor(){return(0,ft.vb)("firestore")}},deps:[[new r.FiY,mb]]},bb={provide:gb,useFactory:function(e,t){const n=(0,ft.JM)("firestore",e,t);return n&&new gb(n)},deps:[[new r.FiY,mb],pt]};let wb=(()=>{class e{constructor(){(0,dt.KN)("angularfire",ft.q4.full,"fst")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[bb,vb]}),e})();function _b(e,...t){return{ngModule:wb,providers:[{provide:mb,useFactory:yb(e),multi:!0,deps:[r.R0b,r.zs3,ft.HU,gt,[new r.FiY,Ct],[new r.FiY,on],...t]}]}}const Tb=(0,ft.u3)($y,!0),Sb=(0,ft.u3)(lb,!0),Ib=(0,ft.u3)(zy,!0),Eb=(0,ft.u3)(ab,!0),kb=(0,ft.u3)(Qy,!0),Cb=(0,ft.u3)($v,!0),Ab=(0,ft.u3)(ub,!0),xb=(0,ft.u3)(cb,!0);var Nb=n(4402),Ob=n(9765),Rb=n(7971);class Pb extends Ob.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Rb.N;return this._value}next(e){super.next(this._value=e)}}var Db=n(4869),Lb=n(9796);class Mb extends xe.L{notifyNext(e,t,n,r,i){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Ub extends xe.L{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Fb=n(7444);function Vb(e,t,n,r,i=new Ub(e,n,r)){if(!i.closed)return t instanceof ke.y?t.subscribe(i):(0,Fb.s)(t)(i)}var Zb=n(6693);const qb={};class jb{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Bb(e,this.resultSelector))}}class Bb extends Mb{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(qb),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++)this.add(Vb(this,e[n],void 0,n))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n){const r=this.values,i=this.toRespond?r[n]===qb?--this.toRespond:this.toRespond:0;r[n]=t,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const $b=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})();var zb=n(3282);function Hb(...e){return(0,zb.J)(1)((0,Ee.of)(...e))}var Gb=n(9193);function Kb(e){return new ke.y(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?(0,Nb.D)(n):(0,Gb.c)()).subscribe(t)})}var Wb=n(2441),Jb=n(5345);function Yb(e,t){return"function"==typeof t?n=>n.pipe(Yb((n,r)=>(0,Nb.D)(e(n,r)).pipe((0,Pe.U)((e,i)=>t(n,e,r,i))))):t=>t.lift(new Qb(e))}class Qb{constructor(e){this.project=e}call(e,t){return t.subscribe(new Xb(e,this.project))}}class Xb extends Jb.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const n=new Jb.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,Jb.ft)(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const ew=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();function tw(e){return t=>0===e?(0,Gb.c)():t.lift(new nw(e))}class nw{constructor(e){if(this.total=e,this.total<0)throw new ew}call(e,t){return t.subscribe(new rw(e,this.total))}}class rw extends xe.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function iw(...e){const t=e[e.length-1];return(0,Db.K)(t)?(e.pop(),n=>Hb(e,n,t)):t=>Hb(e,t)}function sw(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new ow(e,t,n))}}class ow{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new aw(e,this.accumulator,this.seed,this.hasSeed))}}class aw extends xe.L{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function uw(e){return function(t){const n=new cw(e),r=t.lift(n);return n.caught=r}}class cw{constructor(e){this.selector=e}call(e,t){return t.subscribe(new lw(e,this.selector,this.caught))}}class lw extends Jb.Ds{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new Jb.IY(this);this.add(r);const i=(0,Jb.ft)(n,r);i!==r&&this.add(i)}}}function hw(e){return function(t){return 0===e?(0,Gb.c)():t.lift(new dw(e))}}class dw{constructor(e){if(this.total=e,this.total<0)throw new ew}call(e,t){return t.subscribe(new fw(e,this.total))}}class fw extends xe.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=t++%n;e.next(r[i])}}e.complete()}}function pw(e=yw){return t=>t.lift(new gw(e))}class gw{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new mw(e,this.errorFactory))}}class mw extends xe.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function yw(){return new $b}function vw(e=null){return t=>t.lift(new bw(e))}class bw{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new ww(e,this.defaultValue))}}class ww extends xe.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var _w=n(4487);function Tw(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Ne((t,n)=>e(t,n,r)):_w.y,tw(1),n?vw(t):pw(()=>new $b))}var Sw=n(3342),Iw=n(1307),Ew=n(5319);class kw{constructor(e){this.callback=e}call(e,t){return t.subscribe(new Cw(e,this.callback))}}class Cw extends xe.L{constructor(e,t){super(e),this.add(new Ew.w(t))}}class Aw{constructor(e,t){this.id=e,this.url=t}}class xw extends Aw{constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Nw extends Aw{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ow extends Aw{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Rw extends Aw{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Pw extends Aw{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dw extends Aw{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lw extends Aw{constructor(e,t,n,r,i){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Mw extends Aw{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Uw extends Aw{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fw{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Vw{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Zw{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qw{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jw{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bw{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $w{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class zw{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Hw(e){return new zw(e)}function Gw(e){const t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function Kw(e,t,n){const r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let s=0;s<r.length;s++){const t=r[s],n=e[s];if(t.startsWith(":"))i[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Ww(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Jw(e[i],t[i]))return!1;return!0}function Jw(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((e,t)=>r[t]===e)}return e===t}function Yw(e){return Array.prototype.concat.apply([],e)}function Qw(e){return e.length>0?e[e.length-1]:null}function Xw(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function e_(e){return(0,r.CqO)(e)?e:(0,r.QGY)(e)?(0,Nb.D)(Promise.resolve(e)):(0,Ee.of)(e)}const t_={exact:function e(t,n,r){if(!l_(t.segments,n.segments))return!1;if(!o_(t.segments,n.segments,r))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!t.children[i])return!1;if(!e(t.children[i],n.children[i],r))return!1}return!0},subset:i_},n_={exact:function(e,t){return Ww(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Jw(e[n],t[n]))},ignored:()=>!0};function r_(e,t,n){return t_[n.paths](e.root,t.root,n.matrixParams)&&n_[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function i_(e,t,n){return s_(e,t,t.segments,n)}function s_(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!!l_(i,n)&&!t.hasChildren()&&!!o_(i,n,r)}if(e.segments.length===n.length){if(!l_(e.segments,n))return!1;if(!o_(e.segments,n,r))return!1;for(const n in t.children){if(!e.children[n])return!1;if(!i_(e.children[n],t.children[n],r))return!1}return!0}{const i=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!!l_(e.segments,i)&&!!o_(e.segments,i,r)&&!!e.children.primary&&s_(e.children.primary,t,s,r)}}function o_(e,t,n){return t.every((t,r)=>n_[n](e[r].parameters,t.parameters))}class a_{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hw(this.queryParams)),this._queryParamMap}toString(){return f_.serialize(this)}}class u_{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Xw(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return p_(this)}}class c_{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Hw(this.parameters)),this._parameterMap}toString(){return __(this)}}function l_(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}class h_{}class d_{parse(e){const t=new k_(e);return new a_(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var t;return`/${g_(e.root,!0)}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${y_(t)}=${y_(e)}`).join("&"):`${y_(t)}=${y_(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${t=e.fragment,encodeURI(t)}`:""}`}}const f_=new d_;function p_(e){return e.segments.map(e=>__(e)).join("/")}function g_(e,t){if(!e.hasChildren())return p_(e);if(t){const t=e.children.primary?g_(e.children.primary,!1):"",n=[];return Xw(e.children,(e,t)=>{"primary"!==t&&n.push(`${t}:${g_(e,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function(e,t){let n=[];return Xw(e.children,(e,r)=>{"primary"===r&&(n=n.concat(t(e,r)))}),Xw(e.children,(e,r)=>{"primary"!==r&&(n=n.concat(t(e,r)))}),n}(e,(t,n)=>"primary"===n?[g_(e.children.primary,!1)]:[`${n}:${g_(t,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${p_(e)}/${t[0]}`:`${p_(e)}/(${t.join("//")})`}}function m_(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function y_(e){return m_(e).replace(/%3B/gi,";")}function v_(e){return m_(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function b_(e){return decodeURIComponent(e)}function w_(e){return b_(e.replace(/\+/g,"%20"))}function __(e){return`${v_(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${v_(e)}=${v_(t[e])}`).join("")}`;var t}const T_=/^[^\/()?;=#]+/;function S_(e){const t=e.match(T_);return t?t[0]:""}const I_=/^[^=?&#]+/,E_=/^[^?&#]+/;class k_{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new u_([],{}):new u_([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new u_(e,t)),n}parseSegment(){const e=S_(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new c_(b_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=S_(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=S_(this.remaining);e&&(n=e,this.capture(n))}e[b_(t)]=b_(n)}parseQueryParam(e){const t=function(e){const t=e.match(I_);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(E_);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const r=w_(t),i=w_(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(t=[t],e[r]=t),t.push(i)}else e[r]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=S_(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i="primary");const s=this.parseChildren();t[i]=1===Object.keys(s).length?s.primary:new u_([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class C_{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=A_(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=A_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=x_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return x_(e,this._root).map(e=>e.value)}}function A_(e,t){if(e===t.value)return t;for(const n of t.children){const t=A_(e,n);if(t)return t}return null}function x_(e,t){if(e===t.value)return[t];for(const n of t.children){const r=x_(e,n);if(r.length)return r.unshift(t),r}return[]}class N_{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function O_(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class R_ extends C_{constructor(e,t){super(e),this.snapshot=t,F_(this,e)}toString(){return this.snapshot.toString()}}function P_(e,t){const n=function(e,t){const n=new M_([],{},{},"",{},"primary",t,null,e.root,-1,{});return new U_("",new N_(n,[]))}(e,t),r=new Pb([new c_("",{})]),i=new Pb({}),s=new Pb({}),o=new Pb({}),a=new Pb(""),u=new D_(r,i,o,a,s,"primary",t,n.root);return u.snapshot=n.root,new R_(new N_(u,[]),n)}class D_{constructor(e,t,n,r,i,s,o,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Pe.U)(e=>Hw(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Pe.U)(e=>Hw(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function L_(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&""===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class M_{constructor(e,t,n,r,i,s,o,a,u,c,l){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Hw(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hw(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class U_ extends C_{constructor(e,t){super(t),this.url=e,F_(this,t)}toString(){return V_(this._root)}}function F_(e,t){t.value._routerState=e,t.children.forEach(t=>F_(e,t))}function V_(e){const t=e.children.length>0?` { ${e.children.map(V_).join(", ")} } `:"";return`${e.value}${t}`}function Z_(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Ww(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Ww(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Ww(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Ww(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function q_(e,t){return Ww(e.params,t.params)&&function(e,t){return l_(e,t)&&e.every((e,n)=>Ww(e.parameters,t[n].parameters))}(e.url,t.url)&&!(!e.parent!=!t.parent)&&(!e.parent||q_(e.parent,t.parent))}function j_(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function(e,t,n){return t.children.map(t=>{for(const r of n.children)if(e.shouldReuseRoute(t.value,r.value.snapshot))return j_(e,t,r);return j_(e,t)})}(e,t,n);return new N_(r,i)}{if(e.shouldAttach(t.value)){const n=e.retrieve(t.value);if(null!==n){const e=n.route;return B_(t,e),e}}const n=new D_(new Pb((r=t.value).url),new Pb(r.params),new Pb(r.queryParams),new Pb(r.fragment),new Pb(r.data),r.outlet,r.component,r),i=t.children.map(t=>j_(e,t));return new N_(n,i)}var r}function B_(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(let n=0;n<e.children.length;++n)B_(e.children[n],t.children[n])}function $_(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function z_(e){return"object"==typeof e&&null!=e&&e.outlets}function H_(e,t,n,r,i){let s={};return r&&Xw(r,(e,t)=>{s[t]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new a_(n.root===e?t:G_(n.root,e,t),s,i)}function G_(e,t,n){const r={};return Xw(e.children,(e,i)=>{r[i]=e===t?n:G_(e,t,n)}),new u_(e.segments,r)}class K_{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&$_(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(z_);if(r&&r!==Qw(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class W_{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function J_(e,t,n){if(e||(e=new u_([],{})),0===e.segments.length&&e.hasChildren())return Y_(e,t,n);const r=function(e,t,n){let r=0,i=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;const t=e.segments[i],o=n[r];if(z_(o))break;const a=`${o}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!tT(a,u,t))return s;r+=2}else{if(!tT(a,{},t))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new u_(e.segments.slice(0,r.pathIndex),{});return t.children.primary=new u_(e.segments.slice(r.pathIndex),e.children),Y_(t,0,i)}return r.match&&0===i.length?new u_(e.segments,{}):r.match&&!e.hasChildren()?Q_(e,t,n):r.match?Y_(e,0,i):Q_(e,t,n)}function Y_(e,t,n){if(0===n.length)return new u_(e.segments,{});{const r=function(e){return z_(e[0])?e[0].outlets:{primary:e}}(n),i={};return Xw(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=J_(e.children[r],t,n))}),Xw(e.children,(e,t)=>{void 0===r[t]&&(i[t]=e)}),new u_(e.segments,i)}}function Q_(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const s=n[i];if(z_(s)){const e=X_(s.outlets);return new u_(r,e)}if(0===i&&$_(n[0])){r.push(new c_(e.segments[t].path,eT(n[0]))),i++;continue}const o=z_(s)?s.outlets.primary:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&$_(a)?(r.push(new c_(o,eT(a))),i+=2):(r.push(new c_(o,{})),i++)}return new u_(r,{})}function X_(e){const t={};return Xw(e,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=Q_(new u_([],{}),0,e))}),t}function eT(e){const t={};return Xw(e,(e,n)=>t[n]=`${e}`),t}function tT(e,t,n){return e==n.path&&Ww(t,n.parameters)}class nT{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Z_(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=O_(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),Xw(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(e,t,i.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,i=O_(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const r=O_(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new Bw(e.value.snapshot))}),e.children.length&&this.forwardEvent(new qw(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(Z_(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,i.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),rT(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=i,t.outlet&&t.outlet.activateWith(r,i),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function rT(e){Z_(e.value),e.children.forEach(rT)}class iT{constructor(e,t){this.routes=e,this.module=t}}function sT(e){return"function"==typeof e}function oT(e){return e instanceof a_}const aT=Symbol("INITIAL_VALUE");function uT(){return Yb(e=>function(...e){let t,n;return(0,Db.K)(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&(0,Lb.k)(e[0])&&(e=e[0]),(0,Zb.n)(e,n).lift(new jb(t))}(e.map(e=>e.pipe(tw(1),iw(aT)))).pipe(sw((e,t)=>{let n=!1;return t.reduce((e,r,i)=>{if(e!==aT)return e;if(r===aT&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||oT(r))return r}return e},e)},aT),Ne(e=>e!==aT),(0,Pe.U)(e=>oT(e)?e:!0===e),tw(1)))}let cT=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&r._UZ(0,"router-outlet")},directives:function(){return[aS]},encapsulation:2}),e})();function lT(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];hT(r,dT(t,r))}}function hT(e,t){e.children&&lT(e.children,t)}function dT(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function fT(e){const t=e.children&&e.children.map(fT),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=cT),n}function pT(e){return e.outlet||"primary"}function gT(e,t){const n=e.filter(e=>pT(e)===t);return n.push(...e.filter(e=>pT(e)!==t)),n}const mT={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function yT(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},mT):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(t.matcher||Kw)(n,e,t);if(!i)return Object.assign({},mT);const s={};Xw(i.posParams,(e,t)=>{s[t]=e.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function vT(e,t,n,r,i="corrected"){if(n.length>0&&function(e,t,n){return n.some(n=>bT(e,t,n)&&"primary"!==pT(n))}(e,n,r)){const i=new u_(t,function(e,t,n,r){const i={};i.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&"primary"!==pT(s)){const n=new u_([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,i[pT(s)]=n}return i}(e,t,r,new u_(n,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>bT(e,t,n))}(e,n,r)){const s=new u_(e.segments,function(e,t,n,r,i,s){const o={};for(const a of r)if(bT(e,n,a)&&!i[pT(a)]){const n=new u_([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===s?e.segments.length:t.length,o[pT(a)]=n}return Object.assign(Object.assign({},i),o)}(e,t,n,r,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const s=new u_(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function bT(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function wT(e,t,n,r){return!!(pT(e)===r||"primary"!==r&&bT(t,n,e))&&("**"===e.path||yT(t,e,n).matched)}function _T(e,t,n){return 0===t.length&&!e.children[n]}class TT{constructor(e){this.segmentGroup=e||null}}class ST{constructor(e){this.urlTree=e}}function IT(e){return new ke.y(t=>t.error(new TT(e)))}function ET(e){return new ke.y(t=>t.error(new ST(e)))}function kT(e){return new ke.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class CT{constructor(e,t,n,i,s){this.configLoader=t,this.urlSerializer=n,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(r.h0i)}apply(){const e=vT(this.urlTree.root,[],[],this.config).segmentGroup,t=new u_(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,"primary").pipe((0,Pe.U)(e=>this.createUrlTree(AT(e),this.urlTree.queryParams,this.urlTree.fragment))).pipe(uw(e=>{if(e instanceof ST)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof TT)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe((0,Pe.U)(t=>this.createUrlTree(AT(t),e.queryParams,e.fragment))).pipe(uw(e=>{if(e instanceof TT)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new u_([],{primary:e}):e;return new a_(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe((0,Pe.U)(e=>new u_([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,Nb.D)(r).pipe(Ae(r=>{const i=n.children[r],s=gT(t,r);return this.expandSegmentGroup(e,s,i,r).pipe((0,Pe.U)(e=>({segment:e,outlet:r})))}),sw((e,t)=>(e[t.outlet]=t.segment,e),{}),function(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Ne((t,n)=>e(t,n,r)):_w.y,hw(1),n?vw(t):pw(()=>new $b))}())}expandSegment(e,t,n,r,i,s){return(0,Nb.D)(n).pipe(Ae(o=>this.expandSegmentAgainstRoute(e,t,n,o,r,i,s).pipe(uw(e=>{if(e instanceof TT)return(0,Ee.of)(null);throw e}))),Tw(e=>!!e),uw((e,n)=>{if(e instanceof $b||"EmptyError"===e.name){if(_T(t,r,i))return(0,Ee.of)(new u_([],{}));throw new TT(t)}throw e}))}expandSegmentAgainstRoute(e,t,n,r,i,s,o){return wT(r,t,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s):IT(t):IT(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?ET(i):this.lineralizeSegments(n,i).pipe((0,Ce.zg)(n=>{const i=new u_(n,{});return this.expandSegment(e,i,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:u,positionalParamSegments:c}=yT(t,r,i);if(!o)return IT(t);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?ET(l):this.lineralizeSegments(r,l).pipe((0,Ce.zg)(r=>this.expandSegment(e,t,n,r.concat(i.slice(u)),s,!1)))}matchSegmentAgainstRoute(e,t,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,Ee.of)(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe((0,Pe.U)(e=>(n._loadedConfig=e,new u_(r,{})))):(0,Ee.of)(new u_(r,{}));const{matched:s,consumedSegments:o,lastChild:a}=yT(t,n,r);if(!s)return IT(t);const u=r.slice(a);return this.getChildConfig(e,n,r).pipe((0,Ce.zg)(e=>{const r=e.module,s=e.routes,{segmentGroup:a,slicedSegments:c}=vT(t,o,u,s),l=new u_(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,s,l).pipe((0,Pe.U)(e=>new u_(o,e)));if(0===s.length&&0===c.length)return(0,Ee.of)(new u_(o,{}));const h=pT(n)===i;return this.expandSegment(r,l,s,c,h?"primary":i,!0).pipe((0,Pe.U)(e=>new u_(o.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?(0,Ee.of)(new iT(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,Ee.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe((0,Ce.zg)(n=>n?this.configLoader.load(e.injector,t).pipe((0,Pe.U)(e=>(t._loadedConfig=e,e))):function(e){return new ke.y(t=>t.error(Gw(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):(0,Ee.of)(new iT([],e))}runCanLoadGuards(e,t,n){const r=t.canLoad;if(!r||0===r.length)return(0,Ee.of)(!0);const i=r.map(r=>{const i=e.get(r);let s;if(function(e){return e&&sT(e.canLoad)}(i))s=i.canLoad(t,n);else{if(!sT(i))throw new Error("Invalid CanLoad guard");s=i(t,n)}return e_(s)});return(0,Ee.of)(i).pipe(uT(),(0,Sw.b)(e=>{if(!oT(e))return;const t=Gw(`Redirecting to "${this.urlSerializer.serialize(e)}"`);throw t.url=e,t}),(0,Pe.U)(e=>!0===e))}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,Ee.of)(n);if(r.numberOfChildren>1||!r.children.primary)return kT(e.redirectTo);r=r.children.primary}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const i=this.createSegmentGroup(e,t.root,n,r);return new a_(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return Xw(e,(e,r)=>{if("string"==typeof e&&e.startsWith(":")){const i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const i=this.createSegments(e,t.segments,n,r);let s={};return Xw(t.children,(t,i)=>{s[i]=this.createSegmentGroup(e,t,n,r)}),new u_(i,s)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function AT(e){const t={};for(const n of Object.keys(e.children)){const r=AT(e.children[n]);(r.segments.length>0||r.hasChildren())&&(t[n]=r)}return function(e){if(1===e.numberOfChildren&&e.children.primary){const t=e.children.primary;return new u_(e.segments.concat(t.segments),t.children)}return e}(new u_(e.segments,t))}class xT{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class NT{constructor(e,t){this.component=e,this.route=t}}function OT(e,t,n){const r=e._root;return PT(r,t?t._root:null,n,[r.value])}function RT(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function PT(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=O_(t);return e.children.forEach(e=>{!function(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!l_(e.url,t.url);case"pathParamsOrQueryParamsChange":return!l_(e.url,t.url)||!Ww(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!q_(e,t)||!Ww(e.queryParams,t.queryParams);case"paramsChange":default:return!q_(e,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new xT(r)):(s.data=o.data,s._resolvedData=o._resolvedData),PT(e,t,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new NT(a.outlet.component,o))}else o&&DT(t,a,i),i.canActivateChecks.push(new xT(r)),PT(e,null,s.component?a?a.children:null:n,r,i)}(e,s[e.value.outlet],n,r.concat([e.value]),i),delete s[e.value.outlet]}),Xw(s,(e,t)=>DT(e,n.getContext(t),i)),i}function DT(e,t,n){const r=O_(e),i=e.value;Xw(r,(e,r)=>{DT(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new NT(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class LT{}function MT(e){return new ke.y(t=>t.error(e))}class UT{constructor(e,t,n,r,i,s){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const e=vT(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,"primary");if(null===t)return null;const n=new M_([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new N_(n,t),i=new U_(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(e){const t=e.value,n=L_(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=[];for(const i of Object.keys(t.children)){const r=t.children[i],s=gT(e,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=VT(n);return r.sort((e,t)=>"primary"===e.value.outlet?-1:"primary"===t.value.outlet?1:e.value.outlet.localeCompare(t.value.outlet)),r}processSegment(e,t,n,r){for(const i of e){const e=this.processSegmentAgainstRoute(i,t,n,r);if(null!==e)return e}return _T(t,n,r)?[]:null}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo||!wT(e,t,n,r))return null;let i,s=[],o=[];if("**"===e.path){const r=n.length>0?Qw(n).parameters:{};i=new M_(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,jT(e),pT(e),e.component,e,ZT(t),qT(t)+n.length,BT(e))}else{const r=yT(t,e,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new M_(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,jT(e),pT(e),e.component,e,ZT(t),qT(t)+s.length,BT(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:u,slicedSegments:c}=vT(t,s,o,a.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const e=this.processChildren(a,u);return null===e?null:[new N_(i,e)]}if(0===a.length&&0===c.length)return[new N_(i,[])];const l=pT(e)===r,h=this.processSegment(a,u,c,l?"primary":r);return null===h?null:[new N_(i,h)]}}function FT(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function VT(e){const t=[],n=new Set;for(const r of e){if(!FT(r)){t.push(r);continue}const e=t.find(e=>r.value.routeConfig===e.value.routeConfig);void 0!==e?(e.children.push(...r.children),n.add(e)):t.push(r)}for(const r of n){const e=VT(r.children);t.push(new N_(r.value,e))}return t.filter(e=>!n.has(e))}function ZT(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function qT(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function jT(e){return e.data||{}}function BT(e){return e.resolve||{}}function $T(e){return Yb(t=>{const n=e(t);return n?(0,Nb.D)(n).pipe((0,Pe.U)(()=>t)):(0,Ee.of)(t)})}class zT extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const HT=new r.OlP("ROUTES");class GT{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const n=this.loadModuleFactory(t.loadChildren).pipe((0,Pe.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const i=n.create(e);return new iT(Yw(i.injector.get(HT,void 0,r.XFs.Self|r.XFs.Optional)).map(fT),i)}),uw(e=>{throw t._loader$=void 0,e}));return t._loader$=new Wb.c(n,()=>new Ob.xQ).pipe((0,Iw.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,Nb.D)(this.loader.load(e)):e_(e()).pipe((0,Ce.zg)(e=>e instanceof r.YKP?(0,Ee.of)(e):(0,Nb.D)(this.compiler.compileModuleAsync(e))))}}class KT{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new WT,this.attachRef=null}}class WT{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new KT,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class JT{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function YT(e){throw e}function QT(e,t,n){return t.parse("/")}function XT(e,t){return(0,Ee.of)(null)}const eS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let nS=(()=>{class e{constructor(e,t,n,i,s,o,a,u){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ob.xQ,this.errorHandler=YT,this.malformedUriErrorHandler=QT,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:XT,afterPreactivation:XT},this.urlHandlingStrategy=new JT,this.routeReuseStrategy=new zT,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(r.h0i),this.console=s.get(r.c2e);const c=s.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new a_(new u_([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new GT(o,a,e=>this.triggerEvent(new Fw(e)),e=>this.triggerEvent(new Vw(e))),this.routerState=P_(this.currentUrlTree,this.rootComponentType),this.transitions=new Pb({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const t=this.events;return e.pipe(Ne(e=>0!==e.id),(0,Pe.U)(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),Yb(e=>{let n=!1,r=!1;return(0,Ee.of)(e).pipe((0,Sw.b)(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Yb(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return(0,Ee.of)(e).pipe(Yb(e=>{const n=this.transitions.getValue();return t.next(new xw(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?Gb.E:Promise.resolve(e)}),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,Yb(e=>function(e,t,n,r,i){return new CT(e,t,n,r,i).apply()}(r,i,s,e.extractedUrl,o).pipe((0,Pe.U)(t=>Object.assign(Object.assign({},e),{urlAfterRedirects:t}))))),(0,Sw.b)(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,n,r,i){return(0,Ce.zg)(s=>function(e,t,n,r,i="emptyOnly",s="legacy"){try{const o=new UT(e,t,n,r,i,s).recognize();return null===o?MT(new LT):(0,Ee.of)(o)}catch(o){return MT(o)}}(e,t,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe((0,Pe.U)(e=>Object.assign(Object.assign({},s),{targetSnapshot:e}))))}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Sw.b)(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,e),this.browserUrlTree=e.urlAfterRedirects);const n=new Pw(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=e,a=new xw(n,this.serializeUrl(r),i,s);t.next(a);const u=P_(r,this.rootComponentType).snapshot;return(0,Ee.of)(Object.assign(Object.assign({},e),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Gb.E}),$T(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,Sw.b)(e=>{const t=new Dw(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(0,Pe.U)(e=>Object.assign(Object.assign({},e),{guards:OT(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return(0,Ce.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,Ee.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return(0,Nb.D)(e).pipe((0,Ce.zg)(e=>function(e,t,n,r,i){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,Ee.of)(!0);const o=s.map(s=>{const o=RT(s,t,i);let a;if(function(e){return e&&sT(e.canDeactivate)}(o))a=e_(o.canDeactivate(e,t,n,r));else{if(!sT(o))throw new Error("Invalid CanDeactivate guard");a=e_(o(e,t,n,r))}return a.pipe(Tw())});return(0,Ee.of)(o).pipe(uT())}(e.component,e.route,n,t,r)),Tw(e=>!0!==e,!0))}(o,r,i,e).pipe((0,Ce.zg)(n=>n&&function(e){return"boolean"==typeof e}(n)?function(e,t,n,r){return(0,Nb.D)(t).pipe(Ae(t=>Hb(function(e,t){return null!==e&&t&&t(new Zw(e)),(0,Ee.of)(!0)}(t.route.parent,r),function(e,t){return null!==e&&t&&t(new jw(e)),(0,Ee.of)(!0)}(t.route,r),function(e,t,n){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>Kb(()=>{const i=t.guards.map(i=>{const s=RT(i,t.node,n);let o;if(function(e){return e&&sT(e.canActivateChild)}(s))o=e_(s.canActivateChild(r,e));else{if(!sT(s))throw new Error("Invalid CanActivateChild guard");o=e_(s(r,e))}return o.pipe(Tw())});return(0,Ee.of)(i).pipe(uT())}));return(0,Ee.of)(i).pipe(uT())}(e,t.path,n),function(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Ee.of)(!0);const i=r.map(r=>Kb(()=>{const i=RT(r,t,n);let s;if(function(e){return e&&sT(e.canActivate)}(i))s=e_(i.canActivate(t,e));else{if(!sT(i))throw new Error("Invalid CanActivate guard");s=e_(i(t,e))}return s.pipe(Tw())}));return(0,Ee.of)(i).pipe(uT())}(e,t.route,n))),Tw(e=>!0!==e,!0))}(r,s,e,t):(0,Ee.of)(n)),(0,Pe.U)(e=>Object.assign(Object.assign({},n),{guardsResult:e})))})}(this.ngModule.injector,e=>this.triggerEvent(e)),(0,Sw.b)(e=>{if(oT(e.guardsResult)){const t=Gw(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}const t=new Lw(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),Ne(e=>!!e.guardsResult||(this.restoreHistory(e),this.cancelNavigationTransition(e,""),!1)),$T(e=>{if(e.guards.canActivateChecks.length)return(0,Ee.of)(e).pipe((0,Sw.b)(e=>{const t=new Mw(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),Yb(e=>{let t=!1;return(0,Ee.of)(e).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,Ce.zg)(e=>{const{targetSnapshot:t,guards:{canActivateChecks:i}}=e;if(!i.length)return(0,Ee.of)(e);let s=0;return(0,Nb.D)(i).pipe(Ae(e=>function(e,t,n,r){return function(e,t,n,r){const i=Object.keys(e);if(0===i.length)return(0,Ee.of)({});const s={};return(0,Nb.D)(i).pipe((0,Ce.zg)(i=>function(e,t,n,r){const i=RT(e,t,r);return e_(i.resolve?i.resolve(t,n):i(t,n))}(e[i],t,n,r).pipe((0,Sw.b)(e=>{s[i]=e}))),hw(1),(0,Ce.zg)(()=>Object.keys(s).length===i.length?(0,Ee.of)(s):Gb.E))}(e._resolve,e,t,r).pipe((0,Pe.U)(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),L_(e,n).resolve),null)))}(e.route,t,n,r)),(0,Sw.b)(()=>s++),hw(1),(0,Ce.zg)(t=>s===i.length?(0,Ee.of)(e):Gb.E))})),(0,Sw.b)({next:()=>t=!0,complete:()=>{t||(this.restoreHistory(e),this.cancelNavigationTransition(e,"At least one route resolver didn't emit any value."))}}));var n,r}),(0,Sw.b)(e=>{const t=new Uw(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),$T(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,Pe.U)(e=>{const t=function(e,t,n){const r=j_(e,t._root,n?n._root:void 0);return new R_(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),(0,Sw.b)(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,e),this.browserUrlTree=e.urlAfterRedirects)}),(s=this.rootContexts,o=this.routeReuseStrategy,a=e=>this.triggerEvent(e),(0,Pe.U)(e=>(new nT(o,e.targetRouterState,e.currentRouterState,a).activate(s),e))),(0,Sw.b)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){const t=`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(e),this.cancelNavigationTransition(e,t)):this.cancelNavigationTransition(e,t)}this.currentNavigation=null},e=>e.lift(new kw(i))),uw(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=oT(n.url);r||(this.navigated=!0,this.restoreHistory(e,!0));const i=new Ow(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(i),r?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(t,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.restoreHistory(e,!0);const r=new Rw(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch(ac){e.reject(ac)}}var i;return Gb.E}));var i,s,o,a}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const t=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,t)&&setTimeout(()=>{const{source:e,state:n,urlTree:r}=t,i={replaceUrl:!0};if(n){const e=Object.assign({},n);delete e.navigationId,delete e.\u0275routerPageId,0!==Object.keys(e).length&&(i.state=e)}this.scheduleNavigation(r,e,n,i)},0),this.lastLocationChangeInfo=t}))}extractLocationChangeInfoFromEvent(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,t){if(!e)return!0;const n=t.urlTree.toString()===e.urlTree.toString();return!(t.transitionId===e.transitionId&&n&&("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){lT(e),this.config=e.map(fT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=t,a=n||this.routerState.root,u=o?this.currentUrlTree.fragment:i;let c=null;switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(e,t,n,r,i){if(0===n.length)return H_(t.root,t.root,t,r,i);const s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new K_(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const t={};return Xw(r.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return"string"!=typeof r?[...e,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[...e,r]},[]);return new K_(n,t,r)}(n);if(s.toRoot())return H_(t.root,new u_([],{}),t,r,i);const o=function(e,t,n){if(e.isAbsolute)return new W_(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const e=n.snapshot._urlSegment;return new W_(e,e===t.root,0)}const r=$_(e.commands[0])?0:1;return function(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new W_(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(s,t,e),a=o.processChildren?Y_(o.segmentGroup,o.index,s.commands):J_(o.segmentGroup,o.index,s.commands);return H_(o.segmentGroup,a,t,r,i)}(a,this.currentUrlTree,e,c,null!=u?u:null)}navigateByUrl(e,t={skipLocationChange:!1}){const n=oT(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){let n;if(n=!0===t?Object.assign({},eS):!1===t?Object.assign({},tS):t,oT(e))return r_(this.currentUrlTree,e,n);const r=this.parseUrl(e);return r_(this.currentUrlTree,r,n)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Nw(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,r,i){var s,o;if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),u="imperative"!==t&&"imperative"===(null==a?void 0:a.source),c=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===e.toString();if(u&&c)return Promise.resolve(!0);let l,h,d;i?(l=i.resolve,h=i.reject,d=i.promise):d=new Promise((e,t)=>{l=e,h=t});const f=++this.navigationId;let p;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),p=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(s=this.browserPageId)&&void 0!==s?s:0:(null!==(o=this.browserPageId)&&void 0!==o?o:0)+1):p=0,this.setTransition({id:f,targetPageId:p,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:l,reject:h,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(e=>Promise.reject(e))}setBrowserUrl(e,t){const n=this.urlSerializer.serialize(e),r=Object.assign(Object.assign({},t.extras.state),this.generateNgRouterState(t.id,t.targetPageId));this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}restoreHistory(e,t=!1){var n,r;if("computed"===this.canceledNavigationResolution){const t=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)||0===t?this.currentUrlTree===(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)&&0===t&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(t)}else"replace"===this.canceledNavigationResolution&&(t&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,t){const n=new Ow(e.id,this.serializeUrl(e.extractedUrl),t);this.triggerEvent(n),e.resolve(!1)}generateNgRouterState(e,t){return"computed"===this.canceledNavigationResolution?{navigationId:e,"\u0275routerPageId":t}:{navigationId:e}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.DyG),r.LFG(h_),r.LFG(WT),r.LFG(_),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),rS=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.route=t,this.commands=[],this.onChanges=new Ob.xQ,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}onClick(){const e={skipLocationChange:sS(this.skipLocationChange),replaceUrl:sS(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:sS(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(nS),r.Y36(D_),r.$8M("tabindex"),r.Y36(r.Qsj),r.Y36(r.SBq))},e.\u0275dir=r.lG2({type:e,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,t){1&e&&r.NdJ("click",function(){return t.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),e})(),iS=(()=>{class e{constructor(e,t,n){this.router=e,this.route=t,this.locationStrategy=n,this.commands=[],this.onChanges=new Ob.xQ,this.subscription=e.events.subscribe(e=>{e instanceof Nw&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,t,n,r,i){if(0!==e||t||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const s={skipLocationChange:sS(this.skipLocationChange),replaceUrl:sS(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,s),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:sS(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(nS),r.Y36(D_),r.Y36(m))},e.\u0275dir=r.lG2({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&r.NdJ("click",function(e){return t.onClick(e.button,e.ctrlKey,e.shiftKey,e.altKey,e.metaKey)}),2&e&&(r.Ikx("href",t.href,r.LSH),r.uIk("target",t.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),e})();function sS(e){return""===e||!!e}let oS=(()=>{class e{constructor(e,t,n,r,i,s){this.router=e,this.element=t,this.renderer=n,this.cdr=r,this.link=i,this.linkWithHref=s,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=e.events.subscribe(e=>{e instanceof Nw&&this.update()})}ngAfterContentInit(){(0,Ee.of)(this.links.changes,this.linksWithHrefs.changes,(0,Ee.of)(null)).pipe((0,zb.J)()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var e;null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(e=>!!e).map(e=>e.onChanges);this.linkInputChangesSubscription=(0,Nb.D)(t).pipe((0,zb.J)()).subscribe(e=>{this.isActive!==this.isLinkActive(this.router)(e)&&this.update()})}set routerLinkActive(e){const t=Array.isArray(e)?e:e.split(" ");this.classes=t.filter(e=>!!e)}ngOnChanges(e){this.update()}ngOnDestroy(){var e;this.routerEventsSubscription.unsubscribe(),null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(t=>{e?this.renderer.addClass(this.element.nativeElement,t):this.renderer.removeClass(this.element.nativeElement,t)}))})}isLinkActive(e){const t="paths"in this.routerLinkActiveOptions?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return n=>e.isActive(n.urlTree,t)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(nS),r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(r.sBO),r.Y36(rS,8),r.Y36(iS,8))},e.\u0275dir=r.lG2({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(e,t,n){if(1&e&&(r.Suo(n,rS,5),r.Suo(n,iS,5)),2&e){let e;r.iGM(e=r.CRH())&&(t.links=e),r.iGM(e=r.CRH())&&(t.linksWithHrefs=e)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[r.TTD]}),e})(),aS=(()=>{class e{constructor(e,t,n,i,s){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||"primary",e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new uS(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(WT),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},e.\u0275dir=r.lG2({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class uS{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===D_?this.route:e===WT?this.childContexts:this.parent.get(e,t)}}class cS{}class lS{preload(e,t){return(0,Ee.of)(null)}}let hS=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=new GT(t,n,t=>e.triggerEvent(new Fw(t)),t=>e.triggerEvent(new Vw(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ne(e=>e instanceof Nw),Ae(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(r.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return(0,Nb.D)(n).pipe((0,zb.J)(),(0,Pe.U)(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>(t._loadedConfig?(0,Ee.of)(t._loadedConfig):this.loader.load(e.injector,t)).pipe((0,Ce.zg)(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(nS),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(cS))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),dS=(()=>{class e{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof xw?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Nw&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof $w&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new $w(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(nS),r.LFG(j),r.LFG(void 0))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const fS=new r.OlP("ROUTER_CONFIGURATION"),pS=new r.OlP("ROUTER_FORROOT_GUARD"),gS=[_,{provide:h_,useClass:d_},{provide:nS,useFactory:function(e,t,n,r,i,s,o,a={},u,c){const l=new nS(null,e,t,n,r,i,s,Yw(o));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(e=>{var t,n;null===(t=console.group)||void 0===t||t.call(console,`Router Event: ${e.constructor.name}`),console.log(e.toString()),console.log(e),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[h_,WT,_,r.zs3,r.v3s,r.Sil,HT,fS,[class{},new r.FiY],[class{},new r.FiY]]},WT,{provide:D_,useFactory:function(e){return e.routerState.root},deps:[nS]},{provide:r.v3s,useClass:r.EAV},hS,lS,class{preload(e,t){return t().pipe(uw(()=>(0,Ee.of)(null)))}},{provide:fS,useValue:{enableTracing:!1}}];function mS(){return new r.PXZ("Router",nS)}let yS=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[gS,_S(t),{provide:pS,useFactory:wS,deps:[[nS,new r.FiY,new r.tp0]]},{provide:fS,useValue:n||{}},{provide:m,useFactory:bS,deps:[a,[new r.tBr(v),new r.FiY],fS]},{provide:dS,useFactory:vS,deps:[nS,j,fS]},{provide:cS,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:lS},{provide:r.PXZ,multi:!0,useFactory:mS},[TS,{provide:r.ip1,multi:!0,useFactory:SS,deps:[TS]},{provide:ES,useFactory:IS,deps:[TS]},{provide:r.tb,multi:!0,useExisting:ES}]]}}static forChild(t){return{ngModule:e,providers:[_S(t)]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(pS,8),r.LFG(nS,8))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();function vS(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new dS(e,t,n)}function bS(e,t,n={}){return n.useHash?new w(e,t):new b(e,t)}function wS(e){return"guarded"}function _S(e){return[{provide:r.deG,multi:!0,useValue:e},{provide:HT,multi:!0,useValue:e}]}let TS=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ob.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let e=null;const t=new Promise(t=>e=t),n=this.injector.get(nS),r=this.injector.get(fS);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),e(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,Ee.of)(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()):e(!0),t})}bootstrapListener(e){const t=this.injector.get(fS),n=this.injector.get(hS),i=this.injector.get(dS),s=this.injector.get(nS),o=this.injector.get(r.z2F);e===o.components[0]&&("enabledNonBlocking"!==t.initialNavigation&&void 0!==t.initialNavigation||s.initialNavigation(),n.setUpPreloading(),i.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.zs3))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function SS(e){return e.appInitializer.bind(e)}function IS(e){return e.bootstrapListener.bind(e)}const ES=new r.OlP("Router Initializer");var kS=n(205),CS=n(3637);class AS{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new xS(e,this.dueTime,this.scheduler))}}class xS extends xe.L{constructor(e,t,n){super(e),this.dueTime=t,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(NS,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function NS(e){e.debouncedNext()}var OS=n(8939),RS=n(156);class PS{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class DS{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new PS(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(t=>{if(e)return e(new PS(t,this,this._ref))},t)}on(e,t,n,r){let i;return t&&(i="function"==typeof t?e=>t(new PS(e,this,this._ref)):{next:t.next?e=>t.next(new PS(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}class LS{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new MS(e,this._service))}get items(){return this._delegate.items.map(e=>new MS(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class MS{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return fr(e,t)}(this._delegate,e);return new MS(t,this.storage)}get root(){return new MS(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new MS(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new DS(function(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new ur(e,new Mn(t),n)}(e=(0,St.m9)(e),t,n)}(this._delegate,e,t),this)}putString(e,t=Nn.RAW,n){this._throwIfRoot("putString");const r=Rn(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new DS(new ur(this._delegate,new Mn(r.data,!0),i),this)}listAll(){return function(e){return function(e){const t={prefixes:[],items:[]};return lr(e,t).then(()=>t)}(e=(0,St.m9)(e))}(this._delegate).then(e=>new LS(e,this.storage))}list(e){return function(e,t){return dr(e=(0,St.m9)(e),t)}(this._delegate,e||void 0).then(e=>new LS(e,this.storage))}getMetadata(){return function(e){return function(e){e._throwIfRoot("getMetadata");const t=Jn(e.storage,e._location,jn());return e.storage.makeRequestWithTokens(t,ar)}(e=(0,St.m9)(e))}(this._delegate)}updateMetadata(e){return function(e,t){return function(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=Sn(t.fullServerUrl(),e.host,e._protocol),s=$n(n,r),o=e.maxOperationRetryTime,a=new zn(i,"PATCH",Gn(e,r),o);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=s,a.errorHandler=Wn(t),a}(e.storage,e._location,t,jn());return e.storage.makeRequestWithTokens(n,ar)}(e=(0,St.m9)(e),t)}(this._delegate,e)}getDownloadURL(){return function(e){return function(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Sn(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new zn(r,"GET",function(e,t){return function(n,r){const i=Bn(e,r,t);return Hn(null!==i),function(e,t,n,r){const i=Un(t);if(null===i)return null;if(!bn(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(t=>{const i=e.fullPath;return Sn("/b/"+o(e.bucket)+"/o/"+o(i),n,r)+In({alt:"media",token:t})})[0]}(i,r,e.host,e._protocol)}}(e,n),i);return s.errorHandler=Wn(t),s}(e.storage,e._location,jn());return e.storage.makeRequestWithTokens(t,ar).then(e=>{if(null===e)throw new an("no-download-url","The given file does not have any download URLs.");return e})}(e=(0,St.m9)(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),br(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw pn(e)}}class US{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(FS(e))throw dn("ref() expected a child path but got a URL, use refFromURL instead.");return new MS(wr(this._delegate,e),this)}refFromURL(e){if(!FS(e))throw dn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{yn.makeFromUrl(e,this._delegate.host)}catch(t){throw dn("refFromUrl() expected a valid full URL but got an invalid one.")}return new MS(wr(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,n={}){!function(e,t,n,r={}){!function(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"==typeof i?i:(0,St.Sg)(i,e.app.options.projectId))}(e,t,n,r)}(this._delegate,e,t,n)}}function FS(e){return/^[A-Za-z]+:\/\//.test(e)}function VS(e,{instanceIdentifier:t}){const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("storage").getImmediate({identifier:t});return new US(n,r)}!function(e){const t={TaskState:nr,TaskEvent:tr,StringFormat:Nn,Storage:US,Reference:MS};e.INTERNAL.registerComponent(new kt.wA("storage-compat",VS,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.14")}(RS.Z);var ZS=n(7841);function qS(e){const t=function(e){return new ke.y(t=>{const n=e=>t.next(e);n(e.snapshot);const r=e.on("state_changed",n);return e.then(e=>{n(e),t.complete()},r=>{n(e.snapshot),(e=>{t.error(e)})(r)}),function(){r()}}).pipe(function(e,t=CS.P){return n=>n.lift(new AS(e,t))}(0))}(e);return{task:e,then:e.then.bind(e),catch:e.catch.bind(e),pause:e.pause.bind(e),cancel:e.cancel.bind(e),resume:e.resume.bind(e),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,Pe.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function jS(e){return{getDownloadURL:()=>(0,Ee.of)(void 0).pipe(ft.fc,Yb(()=>e.getDownloadURL()),ft.iC),getMetadata:()=>(0,Ee.of)(void 0).pipe(ft.fc,Yb(()=>e.getMetadata()),ft.iC),delete:()=>(0,Nb.D)(e.delete()),child:t=>jS(e.child(t)),updateMetadata:t=>(0,Nb.D)(e.updateMetadata(t)),put:(t,n)=>qS(e.put(t,n)),putString:(t,n,r)=>qS(e.putString(t,n,r)),list:t=>(0,Nb.D)(e.list(t)),listAll:()=>(0,Nb.D)(e.listAll())}}const BS=new r.OlP("angularfire2.storageBucket"),$S=new r.OlP("angularfire2.storage.maxUploadRetryTime"),zS=new r.OlP("angularfire2.storage.maxOperationRetryTime"),HS=new r.OlP("angularfire2.storage.use-emulator");let GS=(()=>{class e{constructor(e,t,n,r,i,s,o,a,u,c){const l=(0,OS.on)(e,i,t);this.storage=(0,OS.cc)(`${l.name}.storage.${n}`,"AngularFireStorage",l.name,()=>{const e=i.runOutsideAngular(()=>l.storage(n||void 0)),t=u;return t&&e.useEmulator(...t),o&&e.setMaxUploadRetryTime(o),a&&e.setMaxOperationRetryTime(a),e},[o,a])}ref(e){return jS(this.storage.ref(e))}refFromURL(e){return jS(this.storage.refFromURL(e))}upload(e,t,n){return jS(this.storage.ref(e)).put(t,n)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(OS.Dh),r.LFG(OS.xv,8),r.LFG(BS,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(ft.HU),r.LFG($S,8),r.LFG(zS,8),r.LFG(HS,8),r.LFG(on,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),KS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})(),WS=(()=>{class e{constructor(){ZS.Z.registerVersion("angularfire",ft.q4.full,"gcs-compat")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[GS],imports:[KS]}),e})(),JS=(()=>{class e{constructor(e,t,n){this.http=e,this.firestore=t,this.firebaseStorage=n,this.liveStories=[],this.liveStories$=new Ob.xQ,this.myStories=[],this.myStories$=new Ob.xQ,this.myJunkies=[],this.myJunkies$=new Ob.xQ,this.getMyStories(),this.getStoriesFromStorage()}getMyJunkies(e){this.myJunkies=[],e&&this.http.get(`https://api.etherscan.io/api?module=account&action=tokennfttx&address=${e}&startblock=0&endblock=999999999&sort=asc&apikey=SDHZ9FPMUK55TY5KAU2FBS222DKPIITD65`).subscribe(t=>{t.result.forEach(t=>{if("SJ"===t.tokenSymbol)if(t.to.toLowerCase()===e.toLowerCase())this.myJunkies.push(t.tokenID);else{let e=this.myJunkies.indexOf(t.tokenID);this.myJunkies.splice(e,1)}}),this.myJunkies$.next(this.myJunkies)})}getStories(){return this.http.get("assets/stories.json")}getRawStory(e){return this.http.get(`assets/stories/${e}.md`,{responseType:"text"})}getStoryContent(e){return this.http.get(e,{responseType:"text"})}getJunkies(){return this.http.get("assets/junkies.json")}saveStory(e,t){let n=new Date,r=n.toDateString()+" "+n.toLocaleTimeString(),i=!1;""===e.id?(e.id=n.toJSON(),e.createdOn=r,i=!0):e.modifiedOn=r,e.id.includes(":")?this.saveStoryToLocal(e,i):t.role>2&&this.saveStoryToStorage(e)}saveStoryToLocal(e,t=!1){if(t)this.myStories.push(e),localStorage.setItem(`junkyardStories.local.${e.id}`,e.content);else{let t=this.myStories.findIndex(t=>t.id===e.id);this.myStories[t]=e,this.myStories.find(t=>t.id===e.id),localStorage.setItem(`junkyardStories.local.${e.id}`,e.content)}this.updateMyStories()}publishStory(e){const t=Ib(this.firestore,`stories/${e}`);xb(t,{state:"published"}),this.getStoriesFromStorage()}saveStoryToStorage(e){var t=this;return(0,At.Z)(function*(){let n=JSON.parse(JSON.stringify(e));n.content="";const r=Ib(t.firestore,`stories/${n.id}`);Ab(r,n),yield t.getStoriesFromStorage();let i=Or(t.firebaseStorage,`stories/${n.id}.md`);yield Rr(i,e.content)})()}getMyStories(){var e;let t=null===(e=localStorage.getItem("junkyardStories.local.myStories"))||void 0===e?void 0:e.toString(),n=JSON.parse(t||"[]");n.forEach(e=>{e.content=localStorage.getItem(`junkyardStories.local.${e.id}`)||""}),this.myStories=n}deleteStoryDraft(e){console.log(`junkyardStories.local.${e.id}`),localStorage.removeItem(`junkyardStories.local.${e.id}`);let t=this.myStories.findIndex(t=>t.id===e.id);this.myStories.splice(t,1),this.updateMyStories()}deleteStoryFromStorage(e){var t=this;return(0,At.Z)(function*(){const n=Ib(t.firestore,`stories/${e.id}`);yield Sb(n);let r=Or(t.firebaseStorage,`stories/${e.id}.md`);yield xr(r),yield t.getStoriesFromStorage()})()}submitForReview(e,t){const n=Ib(this.firestore,`stories/${e.id}`);Ab(n,e);let r=Or(this.firebaseStorage,`stories/${e.id}.md`);return Rr(r,t)}getStoriesFromStorage(){var e=this;return(0,At.Z)(function*(){const t=Cb(Tb(e.firestore,"stories")),n=yield Eb(t);e.liveStories=[],n.forEach(t=>{let n=t.data();e.liveStories.push(n)}),e.liveStories$.next(e.liveStories)})()}updateMyStories(){let e=[];this.myStories.forEach(t=>{e.push({id:t.id,seriesId:t.seriesId,seriesName:t.seriesName,title:t.title,subtitle:t.subtitle,cover:t.cover,description:t.description,authorId:t.authorId,author:t.author,content:"",casts:t.casts,tags:t.tags,likes:t.likes,views:t.views,modifiedOn:t.modifiedOn,createdOn:t.createdOn,state:t.state})}),this.myStories$.next(e),localStorage.setItem("junkyardStories.local.myStories",JSON.stringify(e))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Qe),r.LFG(gb),r.LFG(Tr))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class YS{constructor(){this.id="",this.role=0,this.name=""}}let QS=(()=>{class e{constructor(e,t){this.storyboardService=e,this.firestore=t,this.user=new YS,this.user$=new Ob.xQ,this.activeAccount="",this.myJunkies=[],this.hasMetaMask&&(window.ethereum.on("accountsChanged",()=>{window.location.reload()}),window.ethereum.on("chainChanged",()=>{window.location.reload()}),this.requestAccount()),this.storyboardService.myJunkies$.subscribe(e=>{this.myJunkies=e,this.myJunkies.length>0&&this.user.role<2&&(this.user.role=2,this.user$.next(this.user))})}get hasMetaMask(){return Boolean(window.ethereum&&window.ethereum.isMetaMask)}get isGenesisHolder(){return this.myJunkies.length>0}get isCorrectChain(){try{return"0x1"===window.ethereum.chainId}catch(Um){return!1}}switchNetwork(){return(0,At.Z)(function*(){try{yield window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x1"}]})}catch(e){}})()}requestAccount(){var e=this;return(0,At.Z)(function*(){try{yield window.ethereum.request({method:"eth_requestAccounts"}),yield e.getSelectedAccount()}catch(Um){}})()}getSelectedAccount(){var e=this;return(0,At.Z)(function*(){if(e.activeAccount="",e.hasMetaMask){let t=yield window.ethereum.request({method:"eth_accounts"});e.activeAccount=t[0]||"",e.storyboardService.getMyJunkies(e.activeAccount),yield e.getUser(e.activeAccount)}})()}getUser(e){var t=this;return(0,At.Z)(function*(){const n=Cb(Tb(t.firestore,"users")),r=yield Eb(n);t.user.id=e,t.user.name=e,t.user.role=1,r.forEach(n=>{let r=n.data();r.id.trim().toLowerCase()===e.trim().toLowerCase()&&(t.user=r)}),t.user$.next(t.user)})()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(JS),r.LFG(gb))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function XS(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"a",16),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).connect()}),r.TgZ(1,"span",17),r._UZ(2,"img",18),r.qZA(),r.TgZ(3,"strong"),r._uU(4),r.qZA(),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(4),r.Oqu(e.isCorrectNetwork?"Connect Wallet":"Switch Network")}}function eI(e,t){if(1&e&&(r.TgZ(0,"a",19),r.TgZ(1,"strong"),r._uU(2),r.qZA(),r.qZA()),2&e){const e=r.oxw(2);r.xp6(2),r.Oqu(e.shortEthAccount)}}function tI(e,t){if(1&e&&(r.TgZ(0,"div",11),r.TgZ(1,"div",12),r.TgZ(2,"div",13),r.YNc(3,XS,5,1,"a",14),r.YNc(4,eI,3,1,"a",15),r.qZA(),r.qZA(),r.qZA()),2&e){const e=r.oxw();r.xp6(3),r.Q6J("ngIf",!e.ethAccount),r.xp6(1),r.Q6J("ngIf",e.ethAccount)}}const nI=function(){return["/story-editor"]},rI=function(){return["is-active"]};let iI=(()=>{class e{constructor(e){this.accountService=e,this.isProcessing=!1,this.showMenu=!1}get hasMetaMask(){return this.accountService.hasMetaMask}get ethAccount(){return""!==this.accountService.activeAccount}get isCorrectNetwork(){return this.accountService.isCorrectChain}ngOnInit(){var e=this;return(0,At.Z)(function*(){yield e.accountService.getSelectedAccount()})()}get shortEthAccount(){return this.accountService.activeAccount?`${this.accountService.activeAccount.substr(0,6)}...${this.accountService.activeAccount.substr(38,4)}`:""}connect(){var e=this;return(0,At.Z)(function*(){if(!e.isProcessing){e.isProcessing=!0;try{e.accountService.isCorrectChain||(yield e.accountService.switchNetwork()),yield e.accountService.requestAccount(),e.isProcessing=!1}catch(t){e.isProcessing=!1}}})()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(QS))},e.\u0275cmp=r.Xpm({type:e,selectors:[["navigation-widget"]],decls:15,vars:9,consts:[["role","navigation","aria-label","main navigation",1,"navbar"],[1,"navbar-brand"],["href","#",1,"navbar-item","brand"],["src","assets/images/shonen_junk_logo.svg","height","30"],[1,"title","heading","is-4"],["role","button","aria-label","menu","aria-expanded","false","data-target","navbarBasicExample",1,"navbar-burger",3,"click"],["aria-hidden","true"],["id","navbarBasicExample",1,"navbar-menu"],[1,"navbar-start"],[1,"navbar-item",3,"routerLink","routerLinkActive"],["class","navbar-end",4,"ngIf"],[1,"navbar-end"],[1,"navbar-item"],[1,"buttons"],["class","button is-info",3,"click",4,"ngIf"],["class","button is-success",4,"ngIf"],[1,"button","is-info",3,"click"],[1,"icon"],["src","assets/images/metamask.svg"],[1,"button","is-success"]],template:function(e,t){1&e&&(r.TgZ(0,"nav",0),r.TgZ(1,"div",1),r.TgZ(2,"a",2),r._UZ(3,"img",3),r.TgZ(4,"h1",4),r._uU(5,"Junkyard Stories"),r.qZA(),r.qZA(),r.TgZ(6,"a",5),r.NdJ("click",function(){return t.showMenu=!t.showMenu}),r._UZ(7,"span",6),r._UZ(8,"span",6),r._UZ(9,"span",6),r.qZA(),r.qZA(),r.TgZ(10,"div",7),r.TgZ(11,"div",8),r.TgZ(12,"a",9),r._uU(13," My Stories "),r.qZA(),r.qZA(),r.YNc(14,tI,5,2,"div",10),r.qZA(),r.qZA()),2&e&&(r.xp6(6),r.ekj("is-active",t.showMenu),r.xp6(4),r.ekj("is-active",t.showMenu),r.xp6(2),r.Q6J("routerLink",r.DdM(7,nI))("routerLinkActive",r.DdM(8,rI)),r.xp6(2),r.Q6J("ngIf",t.hasMetaMask))},directives:[iS,oS,R],styles:[".navbar[_ngcontent-%COMP%]{background-color:#333}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.navbar[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{font-family:Bangers}.navbar[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:30px}.navbar[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#ff0;margin-bottom:0}.navbar[_ngcontent-%COMP%]   .navbar-item.is-active[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   .navbar-item[_ngcontent-%COMP%]:active, .navbar[_ngcontent-%COMP%]   .navbar-item[_ngcontent-%COMP%]:focus, .navbar[_ngcontent-%COMP%]   .navbar-item[_ngcontent-%COMP%]:hover{background-color:#0065ff}.navbar[_ngcontent-%COMP%]   .navbar-menu[_ngcontent-%COMP%]{background-color:#333}.navbar[_ngcontent-%COMP%]   .navbar-end[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{font-family:Verdana;letter-spacing:1px}"]}),e})();function sI(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"a",3),r.NdJ("click",function(){return r.CHM(e),r.oxw().activate="in-review"}),r._uU(1,"Review"),r.qZA()}if(2&e){const e=r.oxw();r.ekj("is-active","in-review"===e.activate)}}function oI(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"a",3),r.NdJ("click",function(){return r.CHM(e),r.oxw().activate="published"}),r._uU(1,"Published"),r.qZA()}if(2&e){const e=r.oxw();r.ekj("is-active","published"===e.activate)}}const aI=function(e){return["/storyboard",e]};function uI(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"a",19),r.NdJ("click",function(){const t=r.CHM(e).$implicit;return r.oxw().select(t)}),r.TgZ(1,"div",20),r.TgZ(2,"div",21),r.TgZ(3,"span",12),r.TgZ(4,"a",22),r._uU(5," \u25ba "),r.qZA(),r.TgZ(6,"span",23),r._uU(7),r.qZA(),r.TgZ(8,"span",16),r._uU(9),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit;r.xp6(4),r.Q6J("routerLink",r.VKq(5,aI,e.id)),r.xp6(3),r.Oqu(e.title),r.xp6(1),r.ekj("is-hidden",""===e.subtitle),r.xp6(1),r.Oqu(e.subtitle)}}function cI(e,t){1&e&&(r.TgZ(0,"div",24),r._uU(1," You don't have any "),r.TgZ(2,"strong"),r._uU(3,"Draft"),r.qZA(),r._uU(4," stories yet. "),r.qZA())}function lI(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"a",19),r.NdJ("click",function(){const t=r.CHM(e).$implicit;return r.oxw(2).select(t)}),r.TgZ(1,"div",20),r.TgZ(2,"div",21),r.TgZ(3,"span",12),r.TgZ(4,"a",22),r._uU(5," \u25ba "),r.qZA(),r.TgZ(6,"span",25),r._uU(7),r.qZA(),r.TgZ(8,"span",16),r._uU(9),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit;r.xp6(4),r.Q6J("routerLink",r.VKq(5,aI,e.id)),r.xp6(3),r.Oqu(e.title),r.xp6(1),r.ekj("is-hidden",""===e.subtitle),r.xp6(1),r.Oqu(e.subtitle)}}function hI(e,t){1&e&&(r.TgZ(0,"div",24),r._uU(1," You don't have any stories "),r.TgZ(2,"strong"),r._uU(3,"In-Review"),r.qZA(),r._uU(4," yet. "),r.qZA())}function dI(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,lI,10,7,"a",8),r.YNc(2,hI,5,0,"div",9),r.qZA()),2&e){const e=r.oxw();r.ekj("is-hidden","in-review"!==e.activate),r.xp6(1),r.Q6J("ngForOf",e.storiesInReview),r.xp6(1),r.Q6J("ngIf",e.storiesInReview.length<1)}}function fI(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"a",19),r.NdJ("click",function(){const t=r.CHM(e).$implicit;return r.oxw(2).select(t)}),r.TgZ(1,"div",20),r.TgZ(2,"div",21),r.TgZ(3,"span",12),r.TgZ(4,"a",22),r._uU(5," \u25ba "),r.qZA(),r.TgZ(6,"span",26),r._uU(7),r.qZA(),r.TgZ(8,"span",16),r._uU(9),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit;r.xp6(4),r.Q6J("routerLink",r.VKq(5,aI,e.id)),r.xp6(3),r.Oqu(e.title),r.xp6(1),r.ekj("is-hidden",""===e.subtitle),r.xp6(1),r.Oqu(e.subtitle)}}function pI(e,t){1&e&&(r.TgZ(0,"div",24),r._uU(1," You don't have any "),r.TgZ(2,"strong"),r._uU(3,"Published"),r.qZA(),r._uU(4," stories yet. "),r.qZA())}function gI(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,fI,10,7,"a",8),r.YNc(2,pI,5,0,"div",9),r.qZA()),2&e){const e=r.oxw();r.ekj("is-hidden","published"!==e.activate),r.xp6(1),r.Q6J("ngForOf",e.publishedStories),r.xp6(1),r.Q6J("ngIf",e.publishedStories.length<1)}}let mI=(()=>{class e{constructor(e,t){this.accountService=e,this.storyboardService=t,this.storySelected=new r.vpe,this.user=new YS,this.activate="drafts",this.myStories=[],this.storiesInReview=[],this.publishedStories=[],this.myStories=t.myStories,this.storyboardService.myStories$.subscribe(()=>{this.updateStories()}),this.storyboardService.liveStories$.subscribe(()=>{this.updateStories()}),this.accountService.user$.subscribe(e=>{this.user=e,this.updateStories()})}search(e){var t;this.updateStories(null!==(t=e.target.value)&&void 0!==t?t:"")}select(e){this.storySelected.emit(e)}updateStories(e=""){this.myStories=this.storyboardService.myStories.filter(t=>t.title.toLowerCase().includes(e.toLowerCase())||t.subtitle.toLowerCase().includes(e.toLowerCase())),this.accountService.user.role<3?(this.publishedStories=this.storyboardService.liveStories.filter(t=>"published"===t.state&&t.authorId===this.accountService.user.id&&(t.title.toLowerCase().includes(e.toLowerCase())||t.subtitle.toLowerCase().includes(e.toLowerCase()))),this.storiesInReview=this.storyboardService.liveStories.filter(t=>"reviewing"===t.state&&t.authorId===this.accountService.user.id&&(t.title.toLowerCase().includes(e.toLowerCase())||t.subtitle.toLowerCase().includes(e.toLowerCase())))):(this.publishedStories=this.storyboardService.liveStories.filter(t=>"published"===t.state&&(t.title.toLowerCase().includes(e.toLowerCase())||t.subtitle.toLowerCase().includes(e.toLowerCase()))),this.storiesInReview=this.storyboardService.liveStories.filter(t=>"reviewing"===t.state&&(t.title.toLowerCase().includes(e.toLowerCase())||t.subtitle.toLowerCase().includes(e.toLowerCase()))))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(QS),r.Y36(JS))},e.\u0275cmp=r.Xpm({type:e,selectors:[["my-stories-listing-widget"]],outputs:{storySelected:"storySelected"},decls:165,vars:16,consts:[[1,"panel","is-link",2,"background-color","white"],[1,"panel-heading"],[1,"panel-tabs"],[3,"click"],[3,"is-active","click",4,"ngIf"],[1,"panel-block"],[1,"control"],["type","text","placeholder","Search",1,"input","is-link",3,"keyup"],["class","panel-block is-active",3,"click",4,"ngFor","ngForOf"],["class","notification is-light",4,"ngIf"],[3,"is-hidden",4,"ngIf"],[1,"help",2,"max-height","70vh","overflow-y","scroll"],[1,"heading"],[1,"content"],[1,"tag","is-dark"],[1,"tag","is-info"],[1,"tag"],[1,"tag","is-primary"],[1,"tag","is-warning"],[1,"panel-block","is-active",3,"click"],[1,"columns"],[1,"column"],["target","_blank",1,"button","is-success","is-small","pl-4",3,"routerLink"],[1,"tag","is-dark","ml-3"],[1,"notification","is-light"],[1,"tag","is-info","ml-3"],[1,"tag","is-primary","ml-3"]],template:function(e,t){1&e&&(r.TgZ(0,"article",0),r.TgZ(1,"p",1),r._uU(2," My Stories "),r.qZA(),r.TgZ(3,"p",2),r.TgZ(4,"a",3),r.NdJ("click",function(){return t.activate="drafts"}),r._uU(5,"Local"),r.qZA(),r.YNc(6,sI,2,2,"a",4),r.YNc(7,oI,2,2,"a",4),r.TgZ(8,"a",3),r.NdJ("click",function(){return t.activate="help"}),r._uU(9,"Help?"),r.qZA(),r.qZA(),r.TgZ(10,"div",5),r.TgZ(11,"p",6),r.TgZ(12,"input",7),r.NdJ("keyup",function(e){return t.search(e)}),r.qZA(),r.qZA(),r.qZA(),r.TgZ(13,"div"),r.YNc(14,uI,10,7,"a",8),r.YNc(15,cI,5,0,"div",9),r.qZA(),r.YNc(16,dI,3,4,"div",10),r.YNc(17,gI,3,4,"div",10),r.TgZ(18,"div",11),r.TgZ(19,"p",12),r._uU(20,"Getting Started"),r.qZA(),r.TgZ(21,"div",13),r._uU(22," The story board player reads the "),r.TgZ(23,"span",14),r._uU(24,"screenplay"),r.qZA(),r._uU(25," line by line in a sequencial manner. Each line constitute as a command. "),r._UZ(26,"br"),r._UZ(27,"br"),r._uU(28,"Don't use multiple commands in a single line. "),r._UZ(29,"br"),r._UZ(30,"br"),r._uU(31,"Don't worry, unsupported command lines will be ignored by the player. "),r.qZA(),r.TgZ(32,"p",12),r._uU(33,"Creating Assets"),r.qZA(),r.TgZ(34,"div",13),r._uU(35," Before junkies and files(images and audio) can be used in your script, they must first be defined. "),r._UZ(36,"br"),r._UZ(37,"br"),r._uU(38,"Use "),r.TgZ(39,"span",15),r._uU(40,"+Junky"),r.qZA(),r._uU(41," or "),r.TgZ(42,"span",15),r._uU(43,"+File"),r.qZA(),r._uU(44," to define them. "),r._UZ(45,"br"),r._UZ(46,"br"),r._uU(47,"Names must be unique. "),r.qZA(),r.TgZ(48,"p",12),r._uU(49,"Using Assets"),r.qZA(),r.TgZ(50,"div",13),r._uU(51," Use "),r.TgZ(52,"span",16),r._uU(53,"[Text Commands]"),r.qZA(),r._uU(54," to show different presentations of texts. Multiple sentences are automatically broken down by the player. "),r._UZ(55,"br"),r.TgZ(56,"span",16),r._uU(57,"Speak"),r.qZA(),r._uU(58," - makes a character speak along with their avatar "),r._UZ(59,"br"),r.TgZ(60,"span",16),r._uU(61,"CC"),r.qZA(),r._uU(62," - closed caption text "),r._UZ(63,"br"),r.TgZ(64,"span",16),r._uU(65,"Narrate"),r.qZA(),r._uU(66," - narrator text "),r._UZ(67,"br"),r.TgZ(68,"span",16),r._uU(69,"Text Effect"),r.qZA(),r._uU(70," - sound effects in text form "),r._UZ(71,"br"),r.TgZ(72,"span",16),r._uU(73,"Title"),r.qZA(),r._uU(74," - show the title and subtitle "),r._UZ(75,"br"),r.TgZ(76,"span",16),r._uU(77,"Scene Title"),r.qZA(),r._uU(78," - show the scene title "),r._UZ(79,"br"),r._UZ(80,"br"),r._uU(81,"Use "),r.TgZ(82,"span",17),r._uU(83,"[File Commands]"),r.qZA(),r._uU(84," to show/hide/play/stop images and audio. "),r._UZ(85,"br"),r.TgZ(86,"span",17),r._uU(87,"Cover"),r.qZA(),r._uU(88," - changes the background image and waits for reader action "),r._UZ(89,"br"),r.TgZ(90,"span",17),r._uU(91,"Backdrop"),r.qZA(),r._uU(92," - changes the background image and proceeds to the next command "),r._UZ(93,"br"),r.TgZ(94,"span",17),r._uU(95,"Popup"),r.qZA(),r._uU(96," - shows an image/gif in the center of the screen "),r._UZ(97,"br"),r.TgZ(98,"span",17),r._uU(99,"BGM"),r.qZA(),r._uU(100," - plays a looping audio "),r._UZ(101,"br"),r.TgZ(102,"span",17),r._uU(103,"Soundclip"),r.qZA(),r._uU(104," - plays an audio once "),r.qZA(),r.TgZ(105,"p",12),r._uU(106,"Environment"),r.qZA(),r.TgZ(107,"div",13),r.TgZ(108,"span",18),r._uU(109,"[Weather Effects]"),r.qZA(),r._uU(110," changes the weather immediately. "),r._UZ(111,"br"),r._uU(112,"e.g. "),r._UZ(113,"br"),r.TgZ(114,"span",16),r._uU(115,"> W|rain"),r.qZA(),r._uU(116," - Raining "),r._UZ(117,"br"),r.TgZ(118,"span",16),r._uU(119,"> W|snow"),r.qZA(),r._uU(120," - Snowing "),r._UZ(121,"br"),r.TgZ(122,"span",16),r._uU(123,"> W|"),r.qZA(),r._uU(124," - Remove weather effects "),r.qZA(),r.TgZ(125,"p",12),r._uU(126,"Tips"),r.qZA(),r.TgZ(127,"div",13),r.TgZ(128,"span",16),r._uU(129,"Speak"),r.qZA(),r._uU(130," follows a specific format and has 3 parameters (position, anonimity, and name). "),r._UZ(131,"br"),r._uU(132,"Position - (required) can be either L, R, X "),r._UZ(133,"br"),r._uU(134,"Anonimity - (optional) can be either ?, ??, ??? "),r._UZ(135,"br"),r._uU(136,"Name - (required) a pre-defined name of Junkie. "),r._UZ(137,"br"),r._uU(138,"e.g. "),r._UZ(139,"br"),r.TgZ(140,"span",16),r._uU(141,"> L|Boppin: Hello!"),r.qZA(),r._uU(142,' - Boppin will appear in the upper left corner and say "Hello!" '),r._UZ(143,"br"),r.TgZ(144,"span",16),r._uU(145,"> R???|Billz: Hi!"),r.qZA(),r._uU(146,' - Billz will appear in the lower right with anonymous face and name and say "Hi!" '),r._UZ(147,"br"),r.TgZ(148,"span",16),r._uU(149,"> X|Boppin"),r.qZA(),r._uU(150," - Bippin exits the scene "),r._UZ(151,"hr"),r.TgZ(152,"span",17),r._uU(153,"[File Commands]"),r.qZA(),r._uU(154," can be removed from the scene on demand by using a blank value "),r._UZ(155,"br"),r._uU(156,"e.g. "),r._UZ(157,"br"),r.TgZ(158,"span",17),r._uU(159,"`bg`: []"),r.qZA(),r._uU(160," - This will remove the current value of th background "),r._UZ(161,"br"),r.TgZ(162,"span",17),r._uU(163,"`bgm`: []"),r.qZA(),r._uU(164," - This will stop the looping bgm "),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(4),r.ekj("is-active","drafts"===t.activate),r.xp6(2),r.Q6J("ngIf",t.user.role>1),r.xp6(1),r.Q6J("ngIf",t.user.role>1),r.xp6(1),r.ekj("is-active","help"===t.activate),r.xp6(2),r.ekj("is-hidden","help"===t.activate),r.xp6(3),r.ekj("is-hidden","drafts"!==t.activate),r.xp6(1),r.Q6J("ngForOf",t.myStories),r.xp6(1),r.Q6J("ngIf",t.myStories.length<1),r.xp6(1),r.Q6J("ngIf",t.user.role>1),r.xp6(1),r.Q6J("ngIf",t.user.role>1),r.xp6(1),r.ekj("is-hidden","help"!==t.activate))},directives:[R,N,iS],styles:[".heading[_ngcontent-%COMP%]{font-size:16px}",".help[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Press Start\\ 2P;font-size:12px;letter-spacing:1px}",".help[_ngcontent-%COMP%]{padding:20px}",".content[_ngcontent-%COMP%]{padding-left:20px;border-left:1px solid #bbb;font-family:Verdana;letter-spacing:1px;line-height:18px}"]}),e})();class yI{constructor(){this.id="",this.seriesId="",this.seriesName="",this.title="",this.subtitle="",this.description="",this.cover="",this.authorId="",this.author="",this.content="",this.casts=[],this.tags=[],this.likes=0,this.views=0,this.createdOn="",this.modifiedOn="",this.state="draft"}}var vI=n(250);class bI{constructor(e,t){this._document=t;const n=this._textarea=this._document.createElement("textarea"),r=n.style;r.position="fixed",r.top=r.opacity="0",r.left="-999em",n.setAttribute("aria-hidden","true"),n.value=e,this._document.body.appendChild(n)}copy(){const e=this._textarea;let t=!1;try{if(e){const n=this._document.activeElement;e.select(),e.setSelectionRange(0,e.value.length),t=this._document.execCommand("copy"),n&&n.focus()}}catch{}return t}destroy(){const e=this._textarea;e&&(e.remove(),this._textarea=void 0)}}let wI=(()=>{class e{constructor(e){this._document=e}copy(e){const t=this.beginCopy(e),n=t.copy();return t.destroy(),n}beginCopy(e){return new bI(e,this._document)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),_I=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();var TI=n(1555);function SI(e,t){return new ke.y(n=>{const r=e.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const u=(0,Nb.D)(e[a]);let c=!1;n.add(u.subscribe({next:e=>{c||(c=!0,o++),i[a]=e},error:e=>n.error(e),complete:()=>{s++,s!==r&&c||(o===r&&n.next(t?t.reduce((e,t,n)=>(e[t]=i[n],e),{}):i),n.complete())}}))}})}let II=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}setProperty(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.Qsj),r.Y36(r.SBq))},e.\u0275dir=r.lG2({type:e}),e})(),EI=(()=>{class e extends II{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,features:[r.qOj]}),e})();const kI=new r.OlP("NgValueAccessor"),CI={provide:kI,useExisting:(0,r.Gpc)(()=>xI),multi:!0},AI=new r.OlP("CompositionEventMode");let xI=(()=>{class e extends II{constructor(e,t,n){super(e,t),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=s()?s().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(AI,8))},e.\u0275dir=r.lG2({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&r.NdJ("input",function(e){return t._handleInput(e.target.value)})("blur",function(){return t.onTouched()})("compositionstart",function(){return t._compositionStart()})("compositionend",function(e){return t._compositionEnd(e.target.value)})},features:[r._Bn([CI]),r.qOj]}),e})();const NI=new r.OlP("NgValidators"),OI=new r.OlP("NgAsyncValidators");function RI(e){return null!=e}function PI(e){const t=(0,r.QGY)(e)?(0,Nb.D)(e):e;return(0,r.CqO)(t),t}function DI(e){let t={};return e.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function LI(e,t){return t.map(t=>t(e))}function MI(e){return e.map(e=>function(e){return!e.validate}(e)?e:t=>e.validate(t))}function UI(e){return null!=e?function(e){if(!e)return null;const t=e.filter(RI);return 0==t.length?null:function(e){return DI(LI(e,t))}}(MI(e)):null}function FI(e){return null!=e?function(e){if(!e)return null;const t=e.filter(RI);return 0==t.length?null:function(e){return function(...e){if(1===e.length){const t=e[0];if((0,Lb.k)(t))return SI(t,null);if((0,TI.K)(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return SI(e.map(e=>t[e]),e)}}if("function"==typeof e[e.length-1]){const t=e.pop();return SI(e=1===e.length&&(0,Lb.k)(e[0])?e[0]:e,null).pipe((0,Pe.U)(e=>t(...e)))}return SI(e,null)}(LI(e,t).map(PI)).pipe((0,Pe.U)(DI))}}(MI(e)):null}function VI(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}let ZI=(()=>{class e{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=UI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=FI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.lG2({type:e}),e})(),qI=(()=>{class e extends ZI{get formDirective(){return null}get path(){return null}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,features:[r.qOj]}),e})();class jI extends ZI{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let BI=(()=>{class e extends class{constructor(e){this._cd=e}is(e){var t,n,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[e])}}{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(jI,2))},e.\u0275dir=r.lG2({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&r.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[r.qOj]}),e})();function $I(e,t){e.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function zI(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function HI(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function GI(e){return(YI(e)?e.validators:e)||null}function KI(e){return Array.isArray(e)?UI(e):e||null}function WI(e,t){return(YI(t)?t.asyncValidators:e)||null}function JI(e){return Array.isArray(e)?FI(e):e||null}function YI(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class QI{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=KI(this._rawValidators),this._composedAsyncValidatorFn=JI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=KI(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=JI(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(t=>{t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild(t=>{t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status="PENDING",this._hasOwnPendingAsyncValidator=!0;const t=PI(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(t,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;let r=e;return t.forEach(e=>{r=r instanceof eE?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof tE&&r.at(e)||null}),r}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){YI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class XI extends QI{constructor(e=null,t,n){super(GI(t),WI(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){HI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){HI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class eE extends QI{constructor(e,t,n){super(GI(t),WI(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof XI?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const n=this.controls[t];if(this.contains(t)&&e(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,r)=>{n=t(n,e,r)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class tE extends QI{constructor(e,t,n){super(GI(t),WI(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,n={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof XI?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const nE={provide:jI,useExisting:(0,r.Gpc)(()=>iE)},rE=(()=>Promise.resolve(null))();let iE=(()=>{class e extends jI{constructor(e,t,n,i){super(),this.control=new XI,this._registered=!1,this.update=new r.vpe,this._parent=e,this._setValidators(t),this._setAsyncValidators(n),this.valueAccessor=function(e,t){if(!t)return null;let n,r,i;return Array.isArray(t),t.forEach(e=>{e.constructor===xI?n=e:Object.getPrototypeOf(e.constructor)===EI?r=e:i=e}),i||r||n||null}(0,i)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){var e,t;(function(e,t){const n=function(e){return e._rawValidators}(e);null!==t.validator?e.setValidators(VI(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const r=function(e){return e._rawAsyncValidators}(e);null!==t.asyncValidator?e.setAsyncValidators(VI(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();$I(t._rawValidators,i),$I(t._rawAsyncValidators,i)})(e=this.control,t=this),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&zI(e,t)})}(e,t),function(e,t){const n=(e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&zI(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function(e,t){if(t.valueAccessor.setDisabledState){const n=e=>{t.valueAccessor.setDisabledState(e)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){rE.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const t=e.isDisabled.currentValue,n=""===t||t&&"false"!==t;rE.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(qI,9),r.Y36(NI,10),r.Y36(OI,10),r.Y36(kI,10))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r._Bn([nE]),r.qOj,r.TTD]}),e})(),sE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();const oE={provide:NI,useExisting:(0,r.Gpc)(()=>aE),multi:!0};let aE=(()=>{class e{constructor(){this._required=!1}get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!=`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?function(e){return null==(t=e.value)||0===t.length?{required:!0}:null;var t}(e):null}registerOnValidatorChange(e){this._onChange=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.lG2({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,t){2&e&&r.uIk("required",t.required?"":null)},inputs:{required:"required"},features:[r._Bn([oE])]}),e})(),uE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[sE]]}),e})(),cE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[uE]}),e})();const lE=["contentTextArea"];function hE(e,t){if(1&e&&(r.TgZ(0,"span",74),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.xp6(1),r.Oqu(e)}}function dE(e,t){if(1&e&&(r.TgZ(0,"a",76),r._UZ(1,"img",11),r.qZA()),2&e){const e=r.oxw().$implicit,t=r.oxw();r.MGl("href","https://shonenjunk.xyz/unit-00/gallery/",e,"",r.LSH),r.xp6(1),r.Q6J("src",t.getJunkieAvatar(e),r.LSH)}}function fE(e,t){if(1&e&&(r.ynx(0),r.YNc(1,dE,2,2,"a",75),r.BQk()),2&e){const e=t.index;r.xp6(1),r.Q6J("ngIf",e<3)}}function pE(e,t){1&e&&r._UZ(0,"a",78)}function gE(e,t){1&e&&r._UZ(0,"a",78)}function mE(e,t){if(1&e&&(r.ynx(0),r.YNc(1,pE,1,0,"a",77),r.YNc(2,gE,1,0,"a",77),r.BQk()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",e.story.casts.length<3),r.xp6(1),r.Q6J("ngIf",e.story.casts.length<2)}}function yE(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",79),r.NdJ("click",function(){return r.CHM(e),r.oxw().showPublishModal=!0}),r._uU(1," Send for Review "),r.qZA()}}function vE(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",79),r.NdJ("click",function(){return r.CHM(e),r.oxw().publish()}),r._uU(1," Publish "),r.qZA()}}function bE(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",80),r.NdJ("click",function(){return r.CHM(e),r.oxw().delete()}),r._uU(1,"Delete"),r.qZA()}}function wE(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",43),r.NdJ("click",function(){return r.CHM(e),r.oxw().export()}),r._uU(1,"Export"),r.qZA()}}const _E=function(e){return["/storyboard",e]};let TE=(()=>{class e{constructor(e,t,n){this.clipboard=e,this.storyboardService=t,this.accountService=n,this.playStory=new r.vpe,this.mailBody="",this.isProcessing=!1,this.isSavingSuccess=!1,this.isExportSuccess=!1,this.junkies=[],this.user=new YS,this.showPublishModal=!1,this._story=new yI,this._storyUnsaved="",this.accountService.user$.subscribe(e=>{this.user=e}),this.storyboardService.getJunkies().subscribe(e=>{this.junkies=JSON.parse(JSON.stringify(e))})}set story(e){null!==e&&(this._story=new yI,this._story.id=e.id,this._story.authorId=e.authorId,this._story.author=e.author,this._story.title=e.title,this._story.subtitle=e.subtitle,this._story.seriesId=e.seriesId,this._story.seriesName=e.seriesName,this._story.cover=e.cover,this._story.casts=e.casts,this._story.tags=e.tags,this._story.content=e.content,this._story.state=e.state,this._story.likes=e.likes,this._story.modifiedOn=e.modifiedOn,this._story.createdOn=e.createdOn,this.backupStory(this._story),this.isSavingSuccess=!1)}get story(){return this._story}get editable(){return"draft"===this.story.state||("reviewing"===this.story.state||"published"===this.story.state)&&this.user.role>2}get deletable(){return"draft"===this.story.state&&""!==this.story.id||("reviewing"===this.story.state||"published"===this.story.state)&&this.user.role>2}get reviewable(){return!this.isDirty()&&"draft"===this.story.state&&this.user.role>1}get publishable(){return!this.isDirty()&&"reviewing"===this.story.state&&this.user.role>2}save(){this.storyboardService.saveStory(this.story,this.user),this.isSavingSuccess=!0,this.backupStory(this.story)}publish(){this.user.role<3||window.confirm("Do you really want to publish this story?")&&(this.storyboardService.publishStory(this.story.id),this.isSavingSuccess=!0)}submitForReview(){this.isProcessing=!0;let e=JSON.parse(JSON.stringify(this.story));e.content="",e.authorId=this.accountService.activeAccount,e.state="reviewing",e.id=vI.i.create().toString(),this.storyboardService.submitForReview(e,this.story.content).then(()=>{alert("Success: Story submitted for review and publishing."),this.isProcessing=!1,this.storyboardService.getStoriesFromStorage()}).catch(e=>{console.log("Error",e),alert("Failed: Please try again."),this.isProcessing=!1})}play(){}cancel(e=!1){!e&&this.isDirty()&&window.confirm("You have unsaved changes. Discard changes and start a new story?")&&window.location.reload(),window.location.reload()}delete(){var e=this;return(0,At.Z)(function*(){window.confirm("Do you really want to delete this story?")&&(e.isProcessing=!0,e.story.id.includes(":")?e.storyboardService.deleteStoryDraft(e.story):e.user.role>2&&(yield e.storyboardService.deleteStoryFromStorage(e.story)),e.isProcessing=!1,e.story=new yI,e.cancel(!0))})()}getCasts(){return this.story.casts.join(" ")}onUpdateCasts(e){this.story.casts=e.target.value.split(" ")}getTags(){return this.story.tags.join(" ")}onUpdateTags(e){this.story.tags=e.target.value.split(" ")}export(){let e=JSON.parse(JSON.stringify(this.story));this.clipboard.copy(JSON.stringify(e)),this.isExportSuccess=!0}import(){var e;let t=null!==(e=prompt("Enter data",""))&&void 0!==e?e:"";if(""!==t)try{let e=JSON.parse(t);this.story.id="",this.story.title=e.title,this.story.subtitle=e.subtitle,this.story.authorId=e.authorId,this.story.author=e.author,this.story.seriesId=e.seriesId,this.story.seriesName=e.seriesName,this.story.cover=e.cover,this.story.casts=e.casts,this.story.tags=e.tags,this.story.content=e.content,this.story.likes=0,this.story.views=0,this.story.state="draft",alert("Success: Story importing complete.")}catch(n){alert("Failed: Invalid data format.")}}exportable(){return""!==this.story.id&&this.story.casts!==[]&&this.story.tags!==[]&&""!==this.story.cover}isDirty(){return JSON.stringify(this.story)!==this._storyUnsaved}isValid(){return""!==this.story.title&&""!==this.story.author&&""!==this.story.content}getJunkieAvatar(e){return`https://static.shinji.xyz/unit-00/nft-images/${this.junkies[parseInt(e)].hash}.png`}backupStory(e){this._storyUnsaved=JSON.stringify(e)}insert(e){let t=0,n=0,r="";switch(e){case"char":r="[John]: 9000",t=1,n=4;break;case"file":r="[file_name]: <url>",t=1,n=9;break;case"narrate":r="> N: Hello.",t=5,n=6;break;case"cc":r="> CC: Hello.",t=6,n=6;break;case"speak":r="> R|John: Hello.",t=4,n=4;break;case"soundtext":r="> E|5: Krakoom!",t=7,n=8;break;case"weathereffects":r="> W|rain",t=4,n=5;break;case"title":r="# Title (Episode 1)",t=2,n=5;break;case"scene-title":r="### Scene-01 - The Village",t=4,n=22;break;case"cover":r="`cover`: [file_name]",t=10,n=9;break;case"bg":r="`bg`: [file_name]",t=7,n=9;break;case"bgm":r="`bgm`: [file_name]",t=8,n=9;break;case"soundclip":r="`soundclip`: [file_name]",t=14,n=9;break;case"imgpop":r="`imgpop`: [file_name]",t=11,n=9;break;case"template":this.story.title="Sample Screenplay",this.story.subtitle="A Demo Screeplay",this.story.author="Unknown",this.story.cover="https://hdwallpaperim.com/wp-content/uploads/2017/08/24/110153-Silent_Hill_HD_Collection.jpg",this.story.casts=["7104","5426"],this.story.tags=["comedy","horror"],r="[bg_cover]: <https://hdwallpaperim.com/wp-content/uploads/2017/08/24/110153-Silent_Hill_HD_Collection.jpg>\n[bg_road]: <https://wallpapercave.com/wp/R3CF5u0.jpg>\n\n[bgm_haunting]: <https://freesound.org/data/previews/133/133716_1173265-lq.mp3>\n[se_steps]: <https://freesound.org/data/previews/165/165181_3000652-lq.mp3>\n\n[silhouette]: <http://getdrawings.com/img/male-silhouette-png-31.png>\n[Harry]: 7104\n[Freddy]: 5426\n\n`cover`: [bg_cover]\n# Silent Hill (A Demo Screeplay)\n`soundclip`: [se_steps]\n`bg`: #000\n`bgm`: [bgm_haunting]\n> W|rain\n> N: After waking up from the accident Harry found himself in an unknown town. \n### The Town\n`bg`: [bg_road]\n> R|Harry: Where am I? Is this the real life? Or is this just fantasy? Caught in the landslide. No escape from reality.\n\n> CC: walking slowly towards the town\n> E|9: EEEEE-OH!\n> E|8: E-OH!\n> E|7: EEE-EEE-OH!\n`imgpop`: [silhouette]\n> CC: a creepy man appeared from the dark\n> L???|Freddy: $creepy$Mama. $creepy$Just killed a man. \n> L?|Freddy: $creepy$Put a gun against his head. $creepy$Pulled my trigger now dead!\n> R|Harry: Who are you?\n> L|Freddy: $creepy$Mercury.\n> CC: the creepy man moonwalks back into the dark\n> L??|Freddy: $creepy$ Freddy Mercury.\n> N: To be continued...\n        ",this.contentTextArea.nativeElement.value="",this.story.content=r}let i=this.contentTextArea.nativeElement;var s=i.selectionStart,o=i.selectionEnd;i.value=i.value.substring(0,s)+r+i.value.substring(o,i.value.length),i.focus();let a=s+t;i.setSelectionRange(a,a+n)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(wI),r.Y36(JS),r.Y36(QS))},e.\u0275cmp=r.Xpm({type:e,selectors:[["story-editor-widget"]],viewQuery:function(e,t){if(1&e&&r.Gf(lE,5),2&e){let e;r.iGM(e=r.CRH())&&(t.contentTextArea=e.first)}},inputs:{story:"story"},outputs:{playStory:"playStory"},decls:161,vars:58,consts:[[1,"modal"],[1,"modal-background",3,"click"],[1,"modal-card",2,"max-width","25vw","min-width","350px"],[1,"modal-card-head"],[1,"modal-card-title"],["aria-label","close",1,"delete",3,"click"],[1,"modal-card-body"],[1,"card"],["target","_blank",3,"routerLink"],[1,"card-image"],[1,"image","is-3by2"],[3,"src"],[1,"card-content"],[1,"media"],[1,"media-content"],[1,"title","is-6","mb-1",3,"title"],[1,"heading",3,"title"],[1,"subtitle","is-6"],[1,"tag","is-info","is-normal"],[1,""],[1,"tags","are-medium"],["class","tag is-normal",4,"ngFor","ngForOf"],[1,"card-footer"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"message","is-warning",2,"font-family","BlinkMacSystemFont, Roboto","font-size","11px","letter-spacing","1px"],[1,"message-body"],[1,"modal-card-foot"],["type","submit",1,"button","is-success",3,"disabled","click"],[1,"modal-background"],[1,"modal-content"],[1,"notification","is-info","is-dark"],["max","100",1,"progress","is-success","mt-3"],[1,"notification","is-success","is-dark"],[1,"delete",3,"click"],[1,"field","is-grouped","main-controls","is-flex",2,"font-family","Bangers"],[1,"control"],["target","_blank",1,"button","is-small","is-success","pl-4",3,"routerLink"],["type","submit","class","button is-info is-small ml-3",3,"click",4,"ngIf"],["type","submit",1,"button","is-info","is-small","ml-3",3,"disabled","click"],[1,"control",2,"margin-left","auto"],["type","submit","class","button  is-small is-danger",3,"click",4,"ngIf"],["class","button is-link is-small is-light",3,"click",4,"ngIf"],[1,"button","is-link","is-small","is-light",3,"click"],[1,"box"],[1,"field-body"],[1,"field"],[1,"label"],["required","","type","text","placeholder","An awesome title for your story or series",1,"input",3,"ngModel","ngModelChange"],["required","","type","text","placeholder","Your writer name",1,"input",3,"ngModel","ngModelChange"],[1,"field-body","mt-2"],["required","","type","text","placeholder","A subtitle or an episode title",1,"input",3,"ngModel","ngModelChange"],["required","","type","text","placeholder","Image must be 3 x 2 in in size",1,"input",3,"ngModel","ngModelChange"],["required","","type","text","placeholder","e.g. 5123 2213 12 424 2314",1,"input",3,"value","keyup"],["required","","type","text","placeholder","e.g. comedy action mystery",1,"input",3,"value","keyup"],[1,"title","has-text-info"],[1,"field","mt-2"],[1,"field","is-grouped","screenplay-controls"],[1,"button","is-dark","is-small",3,"click"],[1,"button","is-info","is-small",3,"click"],["title","Make character talk",1,"button","is-light","is-small",3,"click"],["title","Show a closed caption",1,"button","is-light","is-small",3,"click"],["title","Show narration",1,"button","is-light","is-small",3,"click"],["title","Show comic sound effects (BOOM!)",1,"button","is-light","is-small",3,"click"],["title","Show weather effects",1,"button","is-light","is-small",3,"click"],["title","Show main title componen",1,"button","is-light","is-small",3,"click"],["title","Show scene title",1,"button","is-light","is-small",3,"click"],["title","Show story cover image",1,"button","is-primary","is-small",3,"click"],["title","Change background image",1,"button","is-primary","is-small",3,"click"],["title","Show image popup(works on gif too!)",1,"button","is-primary","is-small",3,"click"],["title","Play/Remove a looping sound",1,"button","is-primary","is-small",3,"click"],["title","Play sound file once",1,"button","is-primary","is-small",3,"click"],["required","","placeholder","Now the hard part... write a cool story!","rows","14",1,"textarea",2,"font-size","16px","font-family","Inconsolata",3,"ngModel","ngModelChange"],["contentTextArea",""],[1,"tag","is-normal"],["target","_blank","class","card-footer-item",3,"href",4,"ngIf"],["target","_blank",1,"card-footer-item",3,"href"],["href","#","class","card-footer-item",4,"ngIf"],["href","#",1,"card-footer-item"],["type","submit",1,"button","is-info","is-small","ml-3",3,"click"],["type","submit",1,"button","is-small","is-danger",3,"click"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.NdJ("click",function(){return t.showPublishModal=!1}),r.qZA(),r.TgZ(2,"div",2),r.TgZ(3,"header",3),r.TgZ(4,"p",4),r._uU(5,"Send for Review"),r.qZA(),r.TgZ(6,"button",5),r.NdJ("click",function(){return t.showPublishModal=!1}),r.qZA(),r.qZA(),r.TgZ(7,"section",6),r.TgZ(8,"div",7),r.TgZ(9,"a",8),r.TgZ(10,"div",9),r.TgZ(11,"figure",10),r._UZ(12,"img",11),r.qZA(),r.qZA(),r.qZA(),r.TgZ(13,"div",12),r.TgZ(14,"div",13),r.TgZ(15,"div",14),r.TgZ(16,"p",15),r._uU(17),r.qZA(),r.TgZ(18,"span",16),r._uU(19),r.qZA(),r.TgZ(20,"p",17),r._uU(21,"by "),r.TgZ(22,"span",18),r._uU(23),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(24,"div",19),r.TgZ(25,"div",20),r.YNc(26,hE,2,1,"span",21),r.qZA(),r.qZA(),r.qZA(),r.TgZ(27,"footer",22),r.YNc(28,fE,2,1,"ng-container",23),r.YNc(29,mE,3,2,"ng-container",24),r.qZA(),r.qZA(),r.TgZ(30,"article",25),r.TgZ(31,"div",26),r._uU(32," Please allow at least 24 hours while we review your submission. "),r.qZA(),r.qZA(),r.qZA(),r.TgZ(33,"footer",27),r.TgZ(34,"button",28),r.NdJ("click",function(){return t.submitForReview()}),r._uU(35," Submit "),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(36,"div",0),r._UZ(37,"div",29),r.TgZ(38,"div",30),r.TgZ(39,"div",31),r._uU(40," Please wait while we process your request. "),r.TgZ(41,"progress",32),r._uU(42,"45%"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(43,"div",33),r.TgZ(44,"button",34),r.NdJ("click",function(){return t.isSavingSuccess=!1}),r.qZA(),r._uU(45),r.qZA(),r.TgZ(46,"div",31),r.TgZ(47,"button",34),r.NdJ("click",function(){return t.isExportSuccess=!1}),r.qZA(),r._uU(48),r.qZA(),r.TgZ(49,"div",35),r.TgZ(50,"div",36),r.TgZ(51,"a",37),r._uU(52," \u25ba "),r.qZA(),r.YNc(53,yE,2,0,"button",38),r.TgZ(54,"button",39),r.NdJ("click",function(){return t.save()}),r._uU(55),r.qZA(),r.YNc(56,vE,2,0,"button",38),r.qZA(),r.TgZ(57,"div",40),r.YNc(58,bE,2,0,"button",41),r.qZA(),r.TgZ(59,"div",36),r.YNc(60,wE,2,0,"button",42),r.qZA(),r.TgZ(61,"div",36),r.TgZ(62,"button",43),r.NdJ("click",function(){return t.import()}),r._uU(63,"Import"),r.qZA(),r.qZA(),r.TgZ(64,"div",36),r.TgZ(65,"button",43),r.NdJ("click",function(){return t.cancel()}),r._uU(66,"New"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(67,"div",44),r.TgZ(68,"div",45),r.TgZ(69,"div",46),r.TgZ(70,"label",47),r._uU(71,"Title*"),r.qZA(),r.TgZ(72,"div",36),r.TgZ(73,"input",48),r.NdJ("ngModelChange",function(e){return t.story.title=e}),r.qZA(),r.qZA(),r.qZA(),r.TgZ(74,"div",46),r.TgZ(75,"label",47),r._uU(76,"Author*"),r.qZA(),r.TgZ(77,"div",36),r.TgZ(78,"input",49),r.NdJ("ngModelChange",function(e){return t.story.author=e}),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(79,"div",50),r.TgZ(80,"div",46),r.TgZ(81,"label",47),r._uU(82,"Subtitle"),r.qZA(),r.TgZ(83,"div",36),r.TgZ(84,"input",51),r.NdJ("ngModelChange",function(e){return t.story.subtitle=e}),r.qZA(),r.qZA(),r.qZA(),r.TgZ(85,"div",46),r.TgZ(86,"label",47),r._uU(87,"Cover URL"),r.qZA(),r.TgZ(88,"div",36),r.TgZ(89,"input",52),r.NdJ("ngModelChange",function(e){return t.story.cover=e}),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(90,"div",50),r.TgZ(91,"div",46),r.TgZ(92,"label",47),r._uU(93,"Casts"),r.qZA(),r.TgZ(94,"div",36),r.TgZ(95,"input",53),r.NdJ("keyup",function(e){return t.onUpdateCasts(e)}),r.qZA(),r.qZA(),r.qZA(),r.TgZ(96,"div",46),r.TgZ(97,"label",47),r._uU(98,"Tags"),r.qZA(),r.TgZ(99,"div",36),r.TgZ(100,"input",54),r.NdJ("keyup",function(e){return t.onUpdateTags(e)}),r.qZA(),r.qZA(),r.qZA(),r.TgZ(101,"div",46),r.TgZ(102,"label",47),r._uU(103,"Status"),r.qZA(),r.TgZ(104,"div",36),r.TgZ(105,"label",55),r._uU(106),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(107,"div",56),r.TgZ(108,"label",47),r._uU(109,"Screenplay"),r.qZA(),r.TgZ(110,"div",57),r.TgZ(111,"div",36),r.TgZ(112,"button",58),r.NdJ("click",function(){return t.insert("template")}),r._uU(113,"Load Sample Screenplay"),r.qZA(),r.qZA(),r._UZ(114,"br"),r.TgZ(115,"div",36),r.TgZ(116,"button",59),r.NdJ("click",function(){return t.insert("char")}),r._uU(117,"+Junky"),r.qZA(),r.qZA(),r.TgZ(118,"div",36),r.TgZ(119,"button",60),r.NdJ("click",function(){return t.insert("speak")}),r._uU(120,"Speak"),r.qZA(),r.qZA(),r.TgZ(121,"div",36),r.TgZ(122,"button",61),r.NdJ("click",function(){return t.insert("cc")}),r._uU(123,"CC"),r.qZA(),r.qZA(),r.TgZ(124,"div",36),r.TgZ(125,"button",62),r.NdJ("click",function(){return t.insert("narrate")}),r._uU(126,"Narrate"),r.qZA(),r.qZA(),r.TgZ(127,"div",36),r.TgZ(128,"button",63),r.NdJ("click",function(){return t.insert("soundtext")}),r._uU(129,"Text Effect"),r.qZA(),r.qZA(),r.TgZ(130,"div",36),r.TgZ(131,"button",64),r.NdJ("click",function(){return t.insert("weathereffects")}),r._uU(132,"Weather Effect"),r.qZA(),r.qZA(),r.TgZ(133,"div",36),r.TgZ(134,"button",65),r.NdJ("click",function(){return t.insert("title")}),r._uU(135,"Title"),r.qZA(),r.qZA(),r.TgZ(136,"div",36),r.TgZ(137,"button",66),r.NdJ("click",function(){return t.insert("scene-title")}),r._uU(138,"Scene Title"),r.qZA(),r.qZA(),r._UZ(139,"br"),r.TgZ(140,"div",36),r.TgZ(141,"button",59),r.NdJ("click",function(){return t.insert("file")}),r._uU(142,"+File"),r.qZA(),r.qZA(),r.TgZ(143,"div",36),r.TgZ(144,"button",67),r.NdJ("click",function(){return t.insert("cover")}),r._uU(145,"Cover"),r.qZA(),r.qZA(),r.TgZ(146,"div",36),r.TgZ(147,"button",68),r.NdJ("click",function(){return t.insert("bg")}),r._uU(148,"Backdrop"),r.qZA(),r.qZA(),r.TgZ(149,"div",36),r.TgZ(150,"button",69),r.NdJ("click",function(){return t.insert("imgpop")}),r._uU(151,"Popup"),r.qZA(),r.qZA(),r.TgZ(152,"div",36),r.TgZ(153,"button",70),r.NdJ("click",function(){return t.insert("bgm")}),r._uU(154,"BGM"),r.qZA(),r.qZA(),r.TgZ(155,"div",36),r.TgZ(156,"button",71),r.NdJ("click",function(){return t.insert("soundclip")}),r._uU(157,"Soundclip"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(158,"div",36),r.TgZ(159,"textarea",72,73),r.NdJ("ngModelChange",function(e){return t.story.content=e}),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.ekj("is-active",t.showPublishModal),r.xp6(9),r.Q6J("routerLink",r.VKq(54,_E,t.story.id)),r.xp6(3),r.Q6J("src",t.story.cover,r.LSH),r.xp6(4),r.Q6J("title",t.story.title),r.xp6(1),r.Oqu(t.story.title),r.xp6(1),r.Q6J("title",t.story.subtitle),r.xp6(1),r.Oqu(t.story.subtitle),r.xp6(4),r.Oqu(t.story.author),r.xp6(3),r.Q6J("ngForOf",t.story.tags),r.xp6(2),r.Q6J("ngForOf",t.story.casts),r.xp6(1),r.Q6J("ngIf",t.story.casts.length>0),r.xp6(5),r.Q6J("disabled",t.isProcessing),r.xp6(2),r.ekj("is-active",t.isProcessing),r.xp6(7),r.ekj("hidden",!t.isSavingSuccess),r.xp6(2),r.hij(" ",t.story.title," successfully saved.\n"),r.xp6(1),r.ekj("hidden",!t.isExportSuccess),r.xp6(2),r.hij(" ",t.story.title," copied to clipboard.\n"),r.xp6(3),r.ekj("hidden",t.isDirty()),r.Q6J("routerLink",r.VKq(56,_E,t.story.id)),r.xp6(2),r.Q6J("ngIf",t.reviewable),r.xp6(1),r.ekj("hidden",!t.isDirty()),r.Q6J("disabled",!t.isValid()),r.xp6(1),r.hij(" ",t.story.id?"Update":"Save"," "),r.xp6(1),r.Q6J("ngIf",t.publishable),r.xp6(2),r.Q6J("ngIf",t.deletable),r.xp6(2),r.Q6J("ngIf",t.exportable()),r.xp6(13),r.ekj("is-success",t.story.title),r.Q6J("ngModel",t.story.title),r.xp6(5),r.ekj("is-success",t.story.author),r.Q6J("ngModel",t.story.author),r.xp6(6),r.ekj("is-success",t.story.subtitle),r.Q6J("ngModel",t.story.subtitle),r.xp6(5),r.ekj("is-success",t.story.cover),r.Q6J("ngModel",t.story.cover),r.xp6(6),r.ekj("is-success",t.story.casts.length>0),r.Q6J("value",t.getCasts()),r.xp6(5),r.ekj("is-success",t.story.tags.length>0),r.Q6J("value",t.getTags()),r.xp6(6),r.Oqu(t.story.state),r.xp6(53),r.ekj("is-success",t.story.content),r.Q6J("ngModel",t.story.content))},directives:[iS,N,R,xI,aE,BI,iE],styles:["button[_ngcontent-%COMP%]{font-family:Bangers;letter-spacing:4px}","input[_ngcontent-%COMP%]{font-size:16px;font-family:Inconsolata}",".hidden[_ngcontent-%COMP%]{display:none}",".screenplay-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:Verdana;letter-spacing:1px}",".screenplay-controls[_ngcontent-%COMP%]{display:inline-block}",".screenplay-controls[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{display:inline-block;margin-bottom:5px}","a.hidden[_ngcontent-%COMP%]{display:none}"]}),e})(),SE=(()=>{class e{constructor(e,t){this.storage=e,this.storyboardService=t,this.isProcessing=!1,this.hasError=!1,this.selectedStory$=new Ob.xQ}storySelected(e){e.id.includes(":")?this.selectedStory$.next(e):(this.isProcessing=!0,this.hasError=!1,this.storage.ref(`stories/${e.id}.md`).getDownloadURL().pipe(uw(e=>(this.isProcessing=!1,this.hasError=!0,(0,kS._)(e)))).subscribe(t=>{this.storyboardService.getStoryContent(t).pipe(uw(e=>(this.isProcessing=!1,this.hasError=!0,(0,Ee.of)(void 0)))).subscribe(t=>{e.content=null!=t?t:"",this.selectedStory$.next(e),this.isProcessing=!1})}))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(GS),r.Y36(JS))},e.\u0275cmp=r.Xpm({type:e,selectors:[["story-editor"]],decls:22,vars:5,consts:[[1,"modal"],[1,"modal-background"],[1,"modal-content"],[1,"notification","is-info","is-dark"],["max","100",1,"progress","is-success","mt-3"],[1,"container","m-5"],[1,"columns"],[1,"column"],[1,"title","is-4"],[1,"container"],[3,"storySelected"],[1,"column","is-two-thirds-tablet"],[3,"story"]],template:function(e,t){1&e&&(r._UZ(0,"navigation-widget"),r.TgZ(1,"div",0),r._UZ(2,"div",1),r.TgZ(3,"div",2),r.TgZ(4,"div",3),r._uU(5," Please wait while we retrieve your "),r.TgZ(6,"strong"),r._uU(7,"story"),r.qZA(),r._uU(8,". "),r.TgZ(9,"progress",4),r._uU(10,"45%"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(11,"div",5),r.TgZ(12,"div",6),r.TgZ(13,"div",7),r.TgZ(14,"h1",8),r._uU(15,"Story Builder"),r.qZA(),r.TgZ(16,"div",9),r.TgZ(17,"my-stories-listing-widget",10),r.NdJ("storySelected",function(e){return t.storySelected(e)}),r.qZA(),r.qZA(),r.qZA(),r.TgZ(18,"div",11),r.TgZ(19,"div",9),r._UZ(20,"story-editor-widget",12),r.ALo(21,"async"),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(1),r.ekj("is-active",t.isProcessing),r.xp6(19),r.Q6J("story",r.lcZ(21,3,t.selectedStory$)))},directives:[iI,mI,TE],pipes:[V],encapsulation:2}),e})(),IE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["not-found"]],decls:1,vars:0,template:function(e,t){1&e&&r._uU(0,"You're lost... go back...")},encapsulation:2}),e})();class EE{constructor(e=1/0){this.capacity=e,this.storage=[]}enqueue(e){if(this.size()===this.capacity)throw Error("Queue has reached max capacity, you cannot add more items");this.storage.push(e)}dequeue(){return this.storage.shift()}size(){return this.storage.length}}var kE=(()=>(function(e){e[e.None=0]="None",e[e.Wait=1]="Wait",e[e.AddVariable=2]="AddVariable",e[e.SplashShow=3]="SplashShow",e[e.TitleShow=4]="TitleShow",e[e.TitleHide=5]="TitleHide",e[e.ClosedCaptionShow=6]="ClosedCaptionShow",e[e.ClosedCaptionHide=7]="ClosedCaptionHide",e[e.NewScene=8]="NewScene",e[e.SceneTitleHide=9]="SceneTitleHide",e[e.BgImageShow=10]="BgImageShow",e[e.BgImageHide=11]="BgImageHide",e[e.BgEffectsPlay=12]="BgEffectsPlay",e[e.BgEffectsStop=13]="BgEffectsStop",e[e.BgMusicPlay=14]="BgMusicPlay",e[e.BgMusicPause=15]="BgMusicPause",e[e.BgMusicStop=16]="BgMusicStop",e[e.SoundEffectsShow=17]="SoundEffectsShow",e[e.SoundEffectsHide=18]="SoundEffectsHide",e[e.SoundEffectsPlay=19]="SoundEffectsPlay",e[e.SoundEffectsPause=20]="SoundEffectsPause",e[e.SoundEffectsStop=21]="SoundEffectsStop",e[e.CharAdd=22]="CharAdd",e[e.CharRemove=23]="CharRemove",e[e.CharSpeak=24]="CharSpeak",e[e.CharShutup=25]="CharShutup",e[e.CharEffectsPlay=26]="CharEffectsPlay",e[e.CharEffectsStop=27]="CharEffectsStop",e[e.NarratorSpeak=28]="NarratorSpeak",e[e.ImageSnippetShow=29]="ImageSnippetShow",e[e.ImageSnippetHide=30]="ImageSnippetHide",e[e.TextEffectShow=31]="TextEffectShow",e[e.WeatherEffectStart=32]="WeatherEffectStart",e[e.TextEffectHide=33]="TextEffectHide",e[e.DubbingPlay=34]="DubbingPlay"}(kE||(kE={})),kE))();class CE{constructor(e,t,n){this.commandType=kE.None,this.waitAfterInMs=1e3,this.commandType=e,this.settings=n,this.waitAfterInMs=t}}var AE=(()=>(function(e){e[e.None=0]="None",e[e.Left=1]="Left",e[e.Right=2]="Right"}(AE||(AE={})),AE))();const xE=["serious","angry","scared","whisper","creepy","redacted"];class NE{constructor(e){this.id="",this.name="",this.tokenId=0,this.imageUrl="",this.position=AE.None,this.dialogue="",this.dialogueType="normal",this.anonLevel=0,this.id=e.id,this.name=e.name,this.tokenId=e.tokenId,this.imageUrl=e.imageUrl,this.position=e.position,this.dialogue=e.dialogue,this.anonLevel=e.anonLevel}}class OE{constructor(){this.hash=0,this.commandIndex=0,this.variables=new Map}}class RE{composeEvent(e){try{let t=e.indexOf(":"),n=e.substr(1,t-2),r=e.substr(t+1,e.length).replace("<","").replace(">","");return[new CE(kE.AddVariable,0,{name:n,value:r})]}catch(Um){return[]}}}class PE{composeEvent(e){try{let t={value:e.split(":")[1].replace("[","").replace("]","").trim()};return[new CE(kE.BgImageHide,0,{}),new CE(kE.BgImageShow,0,t)]}catch(Um){return[]}}}class DE{composeEvent(e){try{let t=e.split(":")[1].replace("[","").replace("]","").trim(),n={value:t,loop:e.split(":")[0].trim().includes("bgm")},r=[];return r.push(new CE(t?kE.BgMusicPlay:kE.BgMusicStop,0,n)),r}catch(Um){return[]}}}class LE{composeEvent(e){try{let t=e.indexOf("(")>1&&e.indexOf(")")>e.indexOf("("),n={title:e.substr(2,t?e.indexOf("(")-2:e.length-2).trim(),subtitle:t?e.substring(e.indexOf("(")+1,e.indexOf(")")).trim():""};return[new CE(kE.TitleShow,4e3,n),new CE(kE.TitleHide,0,{})]}catch(Um){return[]}}}class ME{composeEvent(e){try{let t=e.substr(4,e.length).trim();return[new CE(kE.NewScene,3e3,{title:t}),new CE(kE.SceneTitleHide,0,{})]}catch(Um){return[]}}}class UE{composeEvent(e){var t;try{let n=e.split(":"),r=n[0].split("|")[0],i=r.toUpperCase().includes("R")?AE.Right:AE.Left,s=r.split("?").length,o=n[0].split("|")[1],a=null===(t=n[1])||void 0===t?void 0:t.match(/[^\.!\?]+[\.!\?]+/g),u=[new CE(kE.CharAdd,0,{name:4===s||2===s?"?????:":`${o}:`,position:i,anonLevel:s,id:o,dialogue:""})];return null==a||a.forEach(e=>{e=e.trim();let t="normal";xE.forEach(n=>{e.includes(`$${n}$`)&&(t=n,e=e.replace(`$${n}$`,"").trim())});let n={name:4===s||2===s?"?????:":`${o}:`,position:i,anonLevel:s,id:o,dialogueType:t,dialogue:e.trim()};e.trim()&&u.push(new CE(kE.CharSpeak,1e3,n))}),u}catch(n){return[]}}}class FE{composeEvent(e){var t;try{let n=null===(t=e.split(":")[1])||void 0===t?void 0:t.match(/[^\.!\?]+[\.!\?]+/g),r=[];return null==n||n.forEach(e=>{let t={dialogue:e.trim()};e.trim()&&r.push(new CE(kE.NarratorSpeak,1e3,t))}),r.push(new CE(kE.NarratorSpeak,0,{dialogue:""})),r}catch(n){return[]}}}class VE{composeEvent(e){try{let t=e.split(":")[1].replace("[","").replace("]","").trim();return[new CE(kE.BgImageShow,5e3,{value:t})]}catch(Um){return[]}}}class ZE{composeEvent(e){try{let t=e.split("|")[1];return[new CE(kE.CharRemove,0,{name:t,id:t})]}catch(Um){return[]}}}class qE{composeEvent(e){try{let t=e.split(":")[1].replace("[","").replace("]","").trim(),n={value:t};return t?[new CE(kE.ImageSnippetShow,1e3,n)]:[new CE(kE.ImageSnippetHide,0,n)]}catch(Um){return[]}}}class jE{composeEvent(e){var t;try{let n=e.split(":"),r=null===(t=n[0].split("|"))||void 0===t?void 0:t[1],i=n[1],s=[],o={value:i,position:"pos-"+r};return i?(s.push(new CE(kE.TextEffectShow,1e3,o)),s.push(new CE(kE.TextEffectHide,0,o))):s.push(new CE(kE.TextEffectHide,0,o)),s}catch(n){return[]}}}class BE{composeEvent(e){try{let t=e.substr(6,e.length).trim().match(/[^\.!\?]+[\.!\?]+/g),n=[];return null==t||t.forEach(e=>{let t={cc:e.trim()};e.trim()&&n.push(new CE(kE.ClosedCaptionShow,1e3,t))}),n.push(new CE(kE.ClosedCaptionShow,0,{cc:""})),n}catch(Um){return[]}}}class $E{composeEvent(e){try{let t=e.split("|"),n=t.length>1?t[1].toLowerCase():"none",r=[];return r.push(new CE(kE.WeatherEffectStart,0,{value:n})),r}catch(Um){return[]}}}let zE=(()=>{class e{constructor(){this.eventHandlerMap=new Map([[kE.AddVariable,new RE],[kE.BgImageShow,new PE],[kE.BgMusicPlay,new DE],[kE.ImageSnippetShow,new qE],[kE.TitleShow,new LE],[kE.NewScene,new ME],[kE.CharAdd,new UE],[kE.CharRemove,new ZE],[kE.NarratorSpeak,new FE],[kE.SplashShow,new VE],[kE.TextEffectShow,new jE],[kE.ClosedCaptionShow,new BE],[kE.WeatherEffectStart,new $E]])}getStoryEventCommand(e){var t;let n=this.getCommandType(e);return(null===(t=this.eventHandlerMap.get(n))||void 0===t?void 0:t.composeEvent(e))||[]}getCommandType(e){return 0===e.indexOf("> N")&&e.length>4?kE.NarratorSpeak:0===e.indexOf("> CC")&&e.length>5?kE.ClosedCaptionShow:0===e.indexOf("> E")&&e.length>4?kE.TextEffectShow:0===e.indexOf("> W")&&e.length>4?kE.WeatherEffectStart:(0===e.indexOf("> L")||0===e.indexOf("> R"))&&e.length>4?kE.CharAdd:0===e.indexOf("> X")&&e.length>4?kE.CharRemove:0===e.indexOf("`bg`:")?kE.BgImageShow:0===e.indexOf("`bgm`:")||0===e.indexOf("`soundclip`:")?kE.BgMusicPlay:0===e.indexOf("`imgpop`:")?kE.ImageSnippetShow:0===e.indexOf("`cover`:")?kE.SplashShow:0===e.indexOf("[")&&e.indexOf("]:")>1?kE.AddVariable:0===e.indexOf("# ")?kE.TitleShow:0===e.indexOf("### ")?kE.NewScene:kE.None}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const HE=["bgmPlayer"],GE=["audioPlayer"];function KE(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Gre("text-effect ",e.txtEffectPos,""),r.xp6(1),r.Oqu(e.txtEffect)}}function WE(e,t){if(1&e&&(r.TgZ(0,"div",26),r._UZ(1,"img",3),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.s9C("src",e.imgSnippet,r.LSH)}}function JE(e,t){if(1&e&&(r.TgZ(0,"div",31),r.TgZ(1,"span",32),r._uU(2),r.qZA(),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.ekj("unknown","?????:"===e.lCharCache[0].name),r.xp6(1),r.hij(" ",e.lCharCache[0].name," ")}}function YE(e,t){if(1&e&&(r.TgZ(0,"div",33),r.TgZ(1,"span"),r._uU(2),r.qZA(),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Gre("dialogue ",e.lCharCache[0].dialogueType,""),r.xp6(1),r.hij(" ",e.lCharCache[0].dialogue," ")}}function QE(e,t){if(1&e&&r._UZ(0,"img",36),2&e){const e=t.$implicit;r.ekj("main",0===t.index),r.Q6J("src",e.imageUrl,r.LSH)}}function XE(e,t){if(1&e&&(r.TgZ(0,"div",34),r.YNc(1,QE,1,3,"img",35),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",e.lCharCache)}}function ek(e,t){if(1&e&&(r.TgZ(0,"div",27),r.YNc(1,JE,3,3,"div",28),r.YNc(2,YE,3,4,"div",29),r.YNc(3,XE,2,1,"div",30),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",e.lCharCache[0].name),r.xp6(1),r.Q6J("ngIf",e.lCharCache[0].dialogue),r.xp6(1),r.Q6J("ngIf",e.lCharCache[0])}}function tk(e,t){if(1&e&&(r.TgZ(0,"div",40),r.TgZ(1,"span",32),r._uU(2),r.qZA(),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.ekj("unknown","?????:"===e.rCharCache[0].name),r.xp6(1),r.hij(" ",e.rCharCache[0].name," ")}}function nk(e,t){if(1&e&&(r.TgZ(0,"div",41),r.TgZ(1,"span"),r._uU(2),r.qZA(),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Gre("dialogue ",e.rCharCache[0].dialogueType,""),r.xp6(1),r.hij(" ",e.rCharCache[0].dialogue," ")}}function rk(e,t){if(1&e&&r._UZ(0,"img",36),2&e){const e=r.oxw(),t=e.index,n=e.count,i=r.oxw(3);r.ekj("main",t===n-1),r.Q6J("src",i.rCharCache[n-1-t].imageUrl,r.LSH)}}function ik(e,t){if(1&e&&(r.ynx(0),r.YNc(1,rk,1,3,"img",43),r.BQk()),2&e){const e=t.index;r.xp6(1),r.Q6J("ngIf",e<8)}}function sk(e,t){if(1&e&&(r.TgZ(0,"div",34),r.YNc(1,ik,2,1,"ng-container",42),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",e.rCharCache)}}function ok(e,t){if(1&e&&(r.TgZ(0,"div",37),r.YNc(1,tk,3,3,"div",38),r.YNc(2,nk,3,4,"div",39),r.YNc(3,sk,2,1,"div",30),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",e.rCharCache[0].name),r.xp6(1),r.Q6J("ngIf",e.rCharCache[0].dialogue),r.xp6(1),r.Q6J("ngIf",e.rCharCache)}}let ak=(()=>{class e{constructor(e){this.storyEventService=e,this.storyEnded=new r.vpe,this._rawStory="",this._junkies=[],this.storyboardEvents=new EE,this.title="",this.subtitle="",this.showTitlePanel=!1,this.scenetitle="",this.showScenePanel=!1,this.closedcaption="",this.weatherEffect="",this.imgSnippet="",this.bgm="",this.audio="",this.txtEffect="",this.txtEffectPos="",this.narration="",this.leftName="",this.leftDialogue="",this.rightName="",this.rightDialogue="",this.customBackgroundStyle="",this.charCache=[],this.lCharCache=[],this.rCharCache=[],this.bgImage="",this.state=new OE,this.processing=!1}handleKeyboardEvent(e){this.processing||"Enter"!==e.key?this.processing||this.processNextEvent():this.storyEnded.emit()}set rawStory(e){null!==e&&(this._rawStory=e,this.state.hash=function(e,t=0){let n=3735928559^t,r=1103547991^t;for(let i,s=0;s<e.length;s++)i=e.charCodeAt(s),n=Math.imul(n^i,2654435761),r=Math.imul(r^i,1597334677);return n=Math.imul(n^n>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),4294967296*(2097151&r)+(n>>>0)}(e),this.storyboardEvents=this.getEvents(e),this.reset(),this.processNextEvent())}get rawStory(){return this._rawStory}set junkies(e){null!==e&&(this._junkies=e)}get junkies(){return this._junkies}getEvents(e){let t=new EE;return e.split(/[\r\n]+/).forEach(e=>{this.storyEventService.getStoryEventCommand(e).forEach(e=>{t.enqueue(e)})}),t.enqueue(new CE(kE.Wait,1e3,{})),t.enqueue(new CE(kE.Wait,1e3,{})),t}processNextEvent(){if(!this.processing){for(;this.storyboardEvents.size()>0;){this.processing=!0;let e=this.storyboardEvents.dequeue();if(e&&(this.processEvent(e),e.waitAfterInMs>0)){this.processing=!1;break}}0===this.storyboardEvents.size()&&this.storyEnded.emit()}}processEvent(e){switch(console.log(`Processing ${kE[e.commandType]}`),null==e?void 0:e.commandType){case kE.AddVariable:this.addVariable(e);break;case kE.BgImageShow:this.showBgImage(e);break;case kE.ImageSnippetShow:this.imageSnippetShow(e);break;case kE.ImageSnippetHide:this.imageSnippetHide();break;case kE.TextEffectShow:this.textEffectShow(e);break;case kE.TextEffectHide:this.textEffectHide();break;case kE.BgMusicPlay:this.bgMusicPlay(e);break;case kE.BgMusicStop:this.bgMusicStop();break;case kE.TitleShow:this.showTitle(e);break;case kE.TitleHide:this.hideTitle();break;case kE.ClosedCaptionShow:this.showClosedCaption(e);break;case kE.ClosedCaptionHide:this.hideClosedCaption();break;case kE.NewScene:this.newScene(e);break;case kE.SceneTitleHide:this.hideSceneTitle();break;case kE.NarratorSpeak:this.narratorSpeak(e);break;case kE.ClosedCaptionShow:this.showClosedCaption(e);break;case kE.CharAdd:this.characterAdd(e);break;case kE.CharRemove:this.characterRemove(e);break;case kE.CharSpeak:this.characterSpeak(e);break;case kE.WeatherEffectStart:this.changeWeather(e)}}addVariable(e){this.state.variables.set(e.settings.name,e.settings.value.trim())}showBgImage(e){let t=this.state.variables.get(e.settings.value);this.customBackgroundStyle=/^#([0-9A-F]{3}){1,2}$/i.test(e.settings.value)?`background-color: ${e.settings.value}`:void 0!==t?`background-image: url(${t})`:"background-color: #333333"}imageSnippetShow(e){let t=this.state.variables.get(e.settings.value);this.imgSnippet=t}imageSnippetHide(){this.imgSnippet=""}textEffectShow(e){this.txtEffect=e.settings.value,this.txtEffectPos=e.settings.position}textEffectHide(){this.txtEffect=""}bgMusicPlay(e){let t=this.state.variables.get(e.settings.value);e.settings.loop?(this.bgm=t,this.bgmPlayer.nativeElement.load(),this.bgmPlayer.nativeElement.loop=!0,this.bgmPlayer.nativeElement.play()):(this.audio=t,this.audioPlayer.nativeElement.load(),this.audioPlayer.nativeElement.loop=!1,this.audioPlayer.nativeElement.play())}bgMusicStop(){this.bgm="",this.bgmPlayer.nativeElement.pause()}showTitle(e){this.title=e.settings.title,this.subtitle=e.settings.subtitle,this.showTitlePanel=!0}hideTitle(){this.showTitlePanel=!1}showClosedCaption(e){this.closedcaption=e.settings.cc}hideClosedCaption(){this.closedcaption=""}newScene(e){this.charCache=[],this.scenetitle=e.settings.title,this.showScenePanel=!0}hideSceneTitle(){this.scenetitle="",this.showScenePanel=!1}changeWeather(e){this.weatherEffect=e.settings.value}narratorSpeak(e){this.narration=e.settings.dialogue}clearDialogue(){this.charCache.forEach(e=>{e.dialogue=""})}characterAdd(e){let t=e.settings.id;if(void 0===this.state.variables.get(e.settings.id))return void alert(`You forgot to define: ${e.settings.id}`);let n=Number.parseInt(this.state.variables.get(e.settings.id)),r=e.settings.anonLevel;this.charCache.find(e=>e.id===t)||(this.clearDialogue(),this.charCache.push(new NE({id:t,name:"",tokenId:n,imageUrl:r<=2?`https://static.shinji.xyz/unit-00/nft-images/${this.junkies[n].hash}.png`:"assets/images/silhouette-20.png",position:e.settings.position,anonLevel:r,dialogue:e.settings.dialogue,dialogueType:e.settings.dialogueType})),this.updateStage())}characterRemove(e){if(e.settings.id){let t=this.charCache.findIndex(t=>t.id===e.settings.id);this.charCache.splice(t,1)}else this.charCache=[];this.updateStage()}characterSpeak(e){let t=e.settings.id,n=e.settings.anonLevel,r=this.charCache.findIndex(e=>e.id===t);if(this.clearDialogue(),r>=0){let t=this.charCache[r];t.name=e.settings.name,t.imageUrl=n<3?`https://static.shinji.xyz/unit-00/nft-images/${this.junkies[t.tokenId].hash}.png`:"assets/images/silhouette-20.png",t.dialogue=e.settings.dialogue,t.dialogueType=e.settings.dialogueType;let i=this.charCache.findIndex(t.position===AE.Left?e=>e.position===AE.Left:e=>e.position===AE.Right);[this.charCache[i],this.charCache[r]]=[this.charCache[r],this.charCache[i]],this.updateStage()}}updateStage(){this.lCharCache=this.charCache.filter(e=>e.position===AE.Left),this.rCharCache=this.charCache.filter(e=>e.position===AE.Right)}reset(){this.charCache=[],this.hideTitle(),this.hideSceneTitle(),this.textEffectHide(),this.imageSnippetHide(),this.updateStage()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(zE))},e.\u0275cmp=r.Xpm({type:e,selectors:[["storyboard-widget"]],viewQuery:function(e,t){if(1&e&&(r.Gf(HE,5),r.Gf(GE,5)),2&e){let e;r.iGM(e=r.CRH())&&(t.bgmPlayer=e.first),r.iGM(e=r.CRH())&&(t.audioPlayer=e.first)}},hostBindings:function(e,t){1&e&&r.NdJ("keypress",function(e){return t.handleKeyboardEvent(e)},!1,r.evT)},inputs:{rawStory:"rawStory",junkies:"junkies"},outputs:{storyEnded:"storyEnded"},decls:44,vars:25,consts:[["id","storyboard-wrapper",3,"click"],["autoplay",""],["bgmPlayer",""],[3,"src"],["audioPlayer",""],[1,"hero","is-small","is-dark","slider","title-slider"],["titlePanel",""],[1,"hero-body","brand"],["src","assets/images/shonen_junk_logo.svg"],[1,"title"],[1,"subtitle"],[1,"instruction"],[1,"hero","slider","scene-slider"],["scenePanel",""],[1,"hero-body"],[1,"hero","slider","cc-slider"],[1,"modal","narration"],[1,"modal-background"],[1,"modal-content"],[1,"dialogue","narration"],[1,"stage"],["stagePanel",""],[3,"class",4,"ngIf"],["class","image-snippet",4,"ngIf"],["class","avatar left",4,"ngIf"],["class","avatar right",4,"ngIf"],[1,"image-snippet"],[1,"avatar","left"],["class","name speech-bubble left",4,"ngIf"],["class","speech-bubble left",4,"ngIf"],["class","characters",4,"ngIf"],[1,"name","speech-bubble","left"],[1,"dialogue"],[1,"speech-bubble","left"],[1,"characters"],["class","char",3,"main","src",4,"ngFor","ngForOf"],[1,"char",3,"src"],[1,"avatar","right"],["class","name speech-bubble right",4,"ngIf"],["class","speech-bubble right",4,"ngIf"],[1,"name","speech-bubble","right"],[1,"speech-bubble","right"],[4,"ngFor","ngForOf"],["class","char",3,"main","src",4,"ngIf"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.NdJ("click",function(){return t.processNextEvent()}),r.TgZ(1,"audio",1,2),r._UZ(3,"source",3),r.qZA(),r.TgZ(4,"audio",1,4),r._UZ(6,"source",3),r.qZA(),r.TgZ(7,"div"),r.TgZ(8,"section",5,6),r.TgZ(10,"div",7),r.TgZ(11,"div"),r._UZ(12,"img",8),r.TgZ(13,"p"),r._uU(14,"JUNKYARD STORIES "),r.TgZ(15,"span"),r._uU(16,"presents"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(17,"p",9),r._uU(18),r.qZA(),r.TgZ(19,"p",10),r._uU(20),r.qZA(),r.TgZ(21,"p",11),r._uU(22,"[press space key or touch screen]"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(23,"section",12,13),r.TgZ(25,"div",14),r.TgZ(26,"p",10),r._uU(27),r.qZA(),r.qZA(),r.qZA(),r.TgZ(28,"section",15,13),r.TgZ(30,"div",14),r.TgZ(31,"p",10),r._uU(32),r.qZA(),r.qZA(),r.qZA(),r.TgZ(33,"div",16),r._UZ(34,"div",17),r.TgZ(35,"div",18),r.TgZ(36,"span",19),r._uU(37),r.qZA(),r.qZA(),r.qZA(),r.TgZ(38,"div",20,21),r.YNc(40,KE,2,4,"span",22),r.YNc(41,WE,2,1,"div",23),r.YNc(42,ek,4,3,"div",24),r.YNc(43,ok,4,3,"div",25),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(3),r.s9C("src",t.bgm,r.LSH),r.xp6(3),r.s9C("src",t.audio,r.LSH),r.xp6(1),r.Akn(t.customBackgroundStyle),r.Gre("background weather ",t.weatherEffect,""),r.xp6(1),r.ekj("hidden",!t.showTitlePanel),r.xp6(10),r.hij(" ",t.title," "),r.xp6(2),r.hij(" ",t.subtitle," "),r.xp6(3),r.ekj("hidden",!t.showScenePanel),r.xp6(4),r.hij(" ",t.scenetitle," "),r.xp6(1),r.ekj("hidden",!t.closedcaption),r.xp6(4),r.hij(" [",t.closedcaption,"] "),r.xp6(1),r.ekj("is-active",t.narration),r.xp6(4),r.Oqu(t.narration),r.xp6(3),r.Q6J("ngIf",t.txtEffect),r.xp6(1),r.Q6J("ngIf",t.imgSnippet),r.xp6(1),r.Q6J("ngIf",t.lCharCache[0]),r.xp6(1),r.Q6J("ngIf",t.rCharCache[0]))},directives:[R,N],styles:["html{overflow:hidden}#storyboard-wrapper{height:100vh;background-color:#1e2029}#storyboard-wrapper .hidden{display:none}#storyboard-wrapper .instruction{padding:20px!important;color:#fff!important;font-size:2vh!important;font-family:Press Start\\ 2P,Courier,monospace!important}#storyboard-wrapper .background{display:flex;background-color:#1e2029;background-size:cover;height:100%;width:100%;align-items:center;-webkit-animation:fadeIn 4s;animation:fadeIn 4s}#storyboard-wrapper .background .brand img{width:25vw}#storyboard-wrapper .background .brand p{font-family:Bangers;font-size:4vh;color:#ff0;margin-bottom:20px}#storyboard-wrapper .background .brand p span{color:#fff}#storyboard-wrapper .background .brand .subtitle,#storyboard-wrapper .background .brand .title{text-transform:uppercase;font-size:6vh;font-family:Lalezar}#storyboard-wrapper .background .brand .subtitle{font-size:3vh}#storyboard-wrapper .background .dialogue{font-size:3.5vh;line-height:5vh;padding:.6vw 1vw;color:#fff}#storyboard-wrapper .background .narration{z-index:7;margin:25vh 0;padding:3vw}#storyboard-wrapper .background .narration .modal-content{text-align:center;overflow:hidden;width:80vw}#storyboard-wrapper .background .narration .dialogue{padding:0;margin:0;font-size:4.5vh;line-height:9vh}#storyboard-wrapper .background .stage .image-snippet{width:100vw;text-align:center}#storyboard-wrapper .background .stage .image-snippet img{max-width:70vw;max-height:80vh}#storyboard-wrapper .background .stage .text-effect{z-index:8;font-family:Bangers;font-size:25vh;color:red;text-shadow:-3px 0 #000,0 3px #000,3px 0 #000,0 -3px #000;position:absolute;margin:0 auto}#storyboard-wrapper .background .stage .text-effect.pos-7{top:5vh;left:7vh}#storyboard-wrapper .background .stage .text-effect.pos-8{top:5vh;left:30vw}#storyboard-wrapper .background .stage .text-effect.pos-9{top:5vh;right:7vh}#storyboard-wrapper .background .stage .text-effect.pos-4{top:32vh;left:7vh}#storyboard-wrapper .background .stage .text-effect.pos-5{top:32vh;left:30vw}#storyboard-wrapper .background .stage .text-effect.pos-6{top:32vh;right:7vh}#storyboard-wrapper .background .stage .text-effect.pos-1{bottom:5vh;left:7vh}#storyboard-wrapper .background .stage .text-effect.pos-2{bottom:5vh;left:30vw}#storyboard-wrapper .background .stage .text-effect.pos-3{bottom:5vh;right:7vh}#storyboard-wrapper .background .stage .avatar{position:absolute}#storyboard-wrapper .background .stage .avatar.left{top:5vh;left:0}#storyboard-wrapper .background .stage .avatar.right{bottom:5vh;right:0}#storyboard-wrapper .background .stage .avatar .char{max-width:10vw;min-width:10vw}#storyboard-wrapper .background .stage .avatar .char.main{max-width:20vw;min-width:20vw}#storyboard-wrapper .background .stage .avatar .speech-bubble{font-family:Overpass Mono,Courier,monospace;position:absolute;top:5vh;width:65vw}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue{background-color:#000}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.serious{font-family:Akronim,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.creepy{font-family:Creepster,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.angry{font-size:3vh;line-height:7vh;color:red;font-family:Gloria Hallelujah,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.scared{font-family:Rubik Puddles,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.whisper{font-family:Whisper,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.redacted{font-family:Redacted Script,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.monster{font-family:Eater,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble.right{right:20vw;text-align:right}#storyboard-wrapper .background .stage .avatar .speech-bubble.left{left:20vw}#storyboard-wrapper .background .stage .avatar .speech-bubble.name{top:-2vh}#storyboard-wrapper .background .stage .avatar .speech-bubble.name.left .dialogue{background:#0065ff}#storyboard-wrapper .background .stage .avatar .speech-bubble.name.right .dialogue{background:#f26522}#storyboard-wrapper .background .stage .avatar .speech-bubble.name.left .dialogue.unknown,#storyboard-wrapper .background .stage .avatar .speech-bubble.name.right .dialogue.unknown{background:#333}.slider{background-color:#0065ff;width:100%;position:fixed}.title-slider{text-align:center;z-index:10;-webkit-animation:slideDown 4s 1;animation:slideDown 4s 1}.cc-slider{background-color:hsla(0,0%,4%,.86);font-family:Overpass Mono;z-index:9;text-align:left;position:fixed}.cc-slider .subtitle{color:#fff}.cc-slider .hero-body{text-align:center;padding:2vh 3vw}.scene-slider{background-color:#0065ff;z-index:9;position:relative;top:10vh;transform:translateX(100%);text-align:left;position:fixed;-webkit-animation:peek 3.5s 1;animation:peek 3.5s 1}.scene-slider .subtitle{color:#fff}.scene-slider .hero-body{padding:4vh 6vh}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@-webkit-keyframes slideDown{0%{transform:translateY(-300%)}to{transform:translateY(0)}}@keyframes slideDown{0%{transform:translateY(-300%)}to{transform:translateY(0)}}@-webkit-keyframes peek{0%{transform:translateX(100%)}40%{transform:translateX(20%)}80%{transform:translateX(20%)}to{transform:translateX(100%)}}@keyframes peek{0%{transform:translateX(100%)}40%{transform:translateX(20%)}80%{transform:translateX(20%)}to{transform:translateX(100%)}}@-webkit-keyframes typing{0%{width:0}to{width:100%}}@keyframes typing{0%{width:0}to{width:100%}}@-webkit-keyframes blink{0%,to{border-color:transparent}50%{border-color:orange}}@keyframes blink{0%,to{border-color:transparent}50%{border-color:orange}}"],encapsulation:2}),e})(),uk=(()=>{class e{constructor(e,t,n,r,i){this.storage=e,this.meta=t,this.router=n,this.route=r,this.storyboardService=i,this.isProcessing=!1,this.hasError=!1,this.storyId="",this.rawStory$=new Ob.xQ,this.junkies$=new Ob.xQ,this.isLocalData=!1}ngAfterViewInit(){setTimeout(()=>{this.ngOnInit()})}ngOnInit(){this.storyboardService.getStories().subscribe(e=>{var t,n,r;let i=JSON.parse(JSON.stringify(e)).find(e=>e.id===this.storyId);this.meta.addTags([{name:"twitter:title",content:null!==(t=null==i?void 0:i.title)&&void 0!==t?t:"Junkyard Story"},{name:"twitter:description",content:null!==(n=null==i?void 0:i.cover)&&void 0!==n?n:"Share Stories"},{name:"twitter:url",content:`https://junkyard-stories.github.io/#/storyboard/${null==i?void 0:i.id}`},{name:"twitter:image",content:null!==(r=null==i?void 0:i.cover)&&void 0!==r?r:""},{name:"twitter:card",content:"summary_large_image"}])}),this.storyboardService.getJunkies().subscribe(e=>{this.junkies$.next(JSON.parse(JSON.stringify(e)))}),this.route.params.subscribe(e=>{this.storyId=e.id,this.loadStory(this.storyId)})}loadStory(e){if(this.isLocalData=e.includes(":"),this.isLocalData){let t=localStorage.getItem(`junkyardStories.local.${e}`)||"";this.rawStory$.next(null!=t?t:"")}else this.storage.ref(`stories/${e}.md`).getDownloadURL().pipe(uw(e=>(this.isProcessing=!1,(0,kS._)(e)))).subscribe(e=>{this.storyboardService.getStoryContent(e).pipe(uw(e=>(this.isProcessing=!1,(0,kS._)(e)))).subscribe(e=>{this.rawStory$.next(null!=e?e:""),this.isProcessing=!1})})}storyEnded(){this.isLocalData?window.close():this.router.navigateByUrl("/")}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(GS),r.Y36(Se),r.Y36(nS),r.Y36(D_),r.Y36(JS))},e.\u0275cmp=r.Xpm({type:e,selectors:[["storyboard"]],decls:3,vars:6,consts:[[3,"rawStory","junkies","storyEnded"]],template:function(e,t){1&e&&(r.TgZ(0,"storyboard-widget",0),r.NdJ("storyEnded",function(){return t.storyEnded()}),r.ALo(1,"async"),r.ALo(2,"async"),r.qZA()),2&e&&r.Q6J("rawStory",r.lcZ(1,2,t.rawStory$))("junkies",r.lcZ(2,4,t.junkies$))},directives:[ak],pipes:[V],styles:["html{overflow:hidden}"],encapsulation:2}),e})();function ck(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",23),r.NdJ("click",function(){r.CHM(e);const t=r.oxw().$implicit;return r.oxw().export(t.id)}),r._uU(1," EXPORT "),r.qZA()}}function lk(e,t){if(1&e&&(r.TgZ(0,"span",24),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.xp6(1),r.Oqu(e)}}function hk(e,t){if(1&e&&(r.TgZ(0,"a",26),r._UZ(1,"img",8),r.qZA()),2&e){const e=r.oxw().$implicit,t=r.oxw(2);r.MGl("href","https://shonenjunk.xyz/unit-00/gallery/",e,"",r.LSH),r.xp6(1),r.Q6J("src",t.getJunkieAvatar(e),r.LSH)}}function dk(e,t){if(1&e&&(r.ynx(0),r.YNc(1,hk,2,2,"a",25),r.BQk()),2&e){const e=t.index;r.xp6(1),r.Q6J("ngIf",e<3)}}function fk(e,t){1&e&&r._UZ(0,"a",28)}function pk(e,t){1&e&&r._UZ(0,"a",28)}function gk(e,t){if(1&e&&(r.ynx(0),r.YNc(1,fk,1,0,"a",27),r.YNc(2,pk,1,0,"a",27),r.BQk()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.Q6J("ngIf",e.casts.length<3),r.xp6(1),r.Q6J("ngIf",e.casts.length<2)}}const mk=function(e){return["/storyboard",e]};function yk(e,t){if(1&e&&(r.TgZ(0,"div",3),r.TgZ(1,"div",4),r.TgZ(2,"div",5),r.TgZ(3,"figure",6),r.TgZ(4,"a",7),r._UZ(5,"img",8),r.qZA(),r.YNc(6,ck,2,0,"button",9),r.qZA(),r.qZA(),r.TgZ(7,"div",10),r.TgZ(8,"div",11),r.TgZ(9,"a",7),r.TgZ(10,"div",12),r.TgZ(11,"p",13),r._uU(12),r.qZA(),r.TgZ(13,"span",14),r._uU(14),r.qZA(),r.TgZ(15,"p",15),r._uU(16,"by "),r.TgZ(17,"span",16),r._uU(18),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(19,"div",17),r.TgZ(20,"div",18),r.YNc(21,lk,2,1,"span",19),r.qZA(),r.qZA(),r.qZA(),r.TgZ(22,"footer",20),r.YNc(23,dk,2,1,"ng-container",21),r.YNc(24,gk,3,2,"ng-container",22),r.qZA(),r.qZA(),r.qZA()),2&e){const e=t.$implicit,n=r.oxw();r.xp6(4),r.Q6J("routerLink",r.VKq(12,mk,e.id)),r.xp6(1),r.Q6J("src",e.cover,r.LSH),r.xp6(1),r.Q6J("ngIf",n.isLoggedIn),r.xp6(3),r.Q6J("routerLink",r.VKq(14,mk,e.id)),r.xp6(2),r.Q6J("title",e.title),r.xp6(1),r.Oqu(e.title),r.xp6(1),r.Q6J("title",e.subtitle),r.xp6(1),r.Oqu(e.subtitle),r.xp6(4),r.Oqu(e.author),r.xp6(3),r.Q6J("ngForOf",e.tags),r.xp6(2),r.Q6J("ngForOf",e.casts),r.xp6(1),r.Q6J("ngIf",e.casts.length>0)}}let vk=(()=>{class e{constructor(e,t,n,r){this.storage=e,this.storyboardService=t,this.accountService=n,this.clipboard=r,this.publishedStories=[],this.junkies=[],this.isProcessing=!1,this.storyboardService.getJunkies().subscribe(e=>{this.junkies=JSON.parse(JSON.stringify(e))})}get isLoggedIn(){return""!==this.accountService.activeAccount}ngOnInit(){this.storyboardService.liveStories$.subscribe(e=>{this.publishedStories=JSON.parse(JSON.stringify(e)).filter(e=>"published"===e.state)}),this.storyboardService.getStoriesFromStorage()}getJunkieAvatar(e){return`https://static.shinji.xyz/unit-00/nft-images/${this.junkies[parseInt(e)].hash}.png`}export(e){this.isProcessing||(this.isProcessing=!0,this.storage.ref(`stories/${e}.md`).getDownloadURL().pipe(uw(e=>(this.isProcessing=!1,(0,kS._)(e)))).subscribe(t=>{this.storyboardService.getStoryContent(t).pipe(uw(e=>(this.isProcessing=!1,(0,kS._)(e)))).subscribe(t=>{var n;let r=null!==(n=this.publishedStories.find(t=>t.id===e))&&void 0!==n?n:new yI;r.content=t,this.clipboard.copy(JSON.stringify(r)),alert("Screenplay copied to clipboard."),this.isProcessing=!1})}))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(GS),r.Y36(JS),r.Y36(QS),r.Y36(wI))},e.\u0275cmp=r.Xpm({type:e,selectors:[["junkyard"]],decls:4,vars:1,consts:[[1,"junkyard","p-5"],[1,"columns","is-multiline","is-tablet"],["class","column is-one-quarter-desktop is-one-third-tablet",4,"ngFor","ngForOf"],[1,"column","is-one-quarter-desktop","is-one-third-tablet"],[1,"card"],[1,"card-image"],[1,"image","is-3by2"],["target","_blank",3,"routerLink"],[3,"src"],["class","button is-small is-info is-responsive","style","position: absolute; top: 0; right: 0;",3,"click",4,"ngIf"],[1,"card-content"],[1,"media"],[1,"media-content"],[1,"title","is-6","mb-1",3,"title"],[1,"heading",3,"title"],[1,"subtitle","is-6"],[1,"tag","is-info","is-normal"],[1,""],[1,"tags","are-medium"],["class","tag is-normal",4,"ngFor","ngForOf"],[1,"card-footer"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"button","is-small","is-info","is-responsive",2,"position","absolute","top","0","right","0",3,"click"],[1,"tag","is-normal"],["target","_blank","class","card-footer-item",3,"href",4,"ngIf"],["target","_blank",1,"card-footer-item",3,"href"],["href","#","class","card-footer-item",4,"ngIf"],["href","#",1,"card-footer-item"]],template:function(e,t){1&e&&(r._UZ(0,"navigation-widget"),r.TgZ(1,"div",0),r.TgZ(2,"div",1),r.YNc(3,yk,25,16,"div",2),r.qZA(),r.qZA()),2&e&&(r.xp6(3),r.Q6J("ngForOf",t.publishedStories))},directives:[iI,N,iS,R],styles:["html{overflow:auto}.navbar{background-color:#333}.navbar a{color:#fff}.navbar .brand{font-family:Bangers}.navbar .brand img{height:30px}.navbar .brand h1{color:#ff0;margin-bottom:0}.media-content p,.media-content span{overflow:hidden;text-overflow:ellipsis}.card-footer-item{padding:.25em}"],encapsulation:2}),e})();const bk=[{path:"",component:vk},{path:"junkyard",component:vk},{path:"storyboard/:id",component:uk},{path:"story-editor",component:SE},{path:"not-found",component:IE},{path:"**",redirectTo:"not-found"}];let wk=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[yS.forRoot(bk,{useHash:!0})],yS]}),e})(),_k=(()=>{class e{constructor(){this.title="junkyard-stories"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&r._UZ(0,"router-outlet")},directives:[aS],styles:[""]}),e})(),Tk=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[zE],imports:[[Z,yS,cE]]}),e})(),Sk=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[],imports:[[Z,Tk,_I,yS]]}),e})();class Ik{constructor(e,t){this.notifier=e,this.source=t}call(e,t){return t.subscribe(new Ek(e,this.notifier,this.source))}}class Ek extends Jb.Ds{constructor(e,t,n){super(e),this.notifier=t,this.source=n}error(e){if(!this.isStopped){let n=this.errors,r=this.retries,i=this.retriesSubscription;if(r)this.errors=void 0,this.retriesSubscription=void 0;else{n=new Ob.xQ;try{const{notifier:e}=this;r=e(n)}catch(t){return super.error(t)}i=(0,Jb.ft)(r,new Jb.IY(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=i,n.next(e)}}_unsubscribe(){const{errors:e,retriesSubscription:t}=this;e&&(e.unsubscribe(),this.errors=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}notifyNext(){const{_unsubscribe:e}=this;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)}}var kk=n(3098);class Ck{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new Ak(e,this.delay,this.scheduler))}}class Ak extends xe.L{constructor(e,t,n){super(e),this.delay=t,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,n=t.queue,r=e.scheduler,i=e.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const t=Math.max(0,n[0].time-r.now());this.schedule(e,t)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(Ak.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,n=new xk(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(kk.P.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(kk.P.createComplete()),this.unsubscribe()}}class xk{constructor(e,t){this.time=e,this.notification=t}}let Nk=(()=>{class e{constructor(){}intercept(e,t){return t.handle(e).pipe((n=e=>e.pipe(Ae((e,t)=>t<=5&&500==e.status?(0,Ee.of)(e):(0,kS._)(e)),function(e,t=CS.P){var n;const r=(n=e)instanceof Date&&!isNaN(+n)?+e-t.now():Math.abs(e);return e=>e.lift(new Ck(r,t))}(1e3)),e=>e.lift(new Ik(n,e))));var n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function Ok(){return e=>e.lift(new Rk)}class Rk{call(e,t){return t.subscribe(new Pk(e))}}class Pk extends xe.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}class Dk{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new Lk(e,this.compare,this.keySelector))}}class Lk extends xe.L{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}function Mk(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Xa("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function Uk(){if("undefined"==typeof Uint8Array)throw new Xa("unimplemented","Uint8Arrays are not available in this environment.")}function Fk(){if("undefined"==typeof atob)throw new Xa("unimplemented","Blobs are unavailable in Firestore in this environment.")}n(4828);class Vk{constructor(e){this._delegate=e}static fromBase64String(e){return Fk(),new Vk(iv.fromBase64String(e))}static fromUint8Array(e){return Uk(),new Vk(iv.fromUint8Array(e))}toBase64(){return Fk(),this._delegate.toBase64()}toUint8Array(){return Uk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Zk(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class qk{enableIndexedDbPersistence(e,t){return function(e,t){nv(e=Uy(e,Yy));const n=Xy(e),r=e._freezeSettings(),i=new uy;return tv(n,i,new oy(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){nv(e=Uy(e,Yy));const t=Xy(e),n=e._freezeSettings(),r=new uy;return tv(t,r,new ay(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Xa(Qa.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new eu;return e._queue.enqueueAndForgetEvenWhileRestricted((0,At.Z)(function*(){try{yield(n=(0,At.Z)(function*(e){if(!vd.vt())return Promise.resolve();const t=e+"main";yield vd.delete(t)}),function(e){return n.apply(this,arguments)})(Jf(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var n})),t.promise}(e._delegate)}}class jk{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Du||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Ga("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function(e,t,n,r={}){var i;const s=(e=Uy(e,Zy))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Ga("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=qa.MOCK_USER;else{t=(0,St.Sg)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Xa(Qa.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new qa(s)}e._authCredentials=new ru(new tu(t,n))}}(this._delegate,e,t,n)}enableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((0,At.Z)(function*(){const t=yield Sy(e),n=yield Ey(e);return t.setNetworkEnabled(!0),function(e){const t=Ya(e);return t.wu.delete(0),tg(t)}(n)}))}(Xy(e=Uy(e,Yy)))}(this._delegate)}disableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((0,At.Z)(function*(){const t=yield Sy(e),n=yield Ey(e);return t.setNetworkEnabled(!1),(r=(0,At.Z)(function*(e){const t=Ya(e);t.wu.add(0),yield rg(t),t.yu.set("Offline")}),function(e){return r.apply(this,arguments)})(n);var r}))}(Xy(e=Uy(e,Yy)))}(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Py("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(e){return function(e){const t=new eu;return e.asyncQueue.enqueueAndForget((0,At.Z)(function*(){return function(e,t){return xm.apply(this,arguments)}(yield ky(e),t)})),t.promise}(Xy(e=Uy(e,Yy)))}(this._delegate)}onSnapshotsInSync(e){return function(e,t){return function(e,t){const n=new ly(t);return e.asyncQueue.enqueueAndForget((0,At.Z)(function*(){return function(e,t){Ya(e).bu.add(t),t.next()}(yield Cy(e),n)})),()=>{n.Aa(),e.asyncQueue.enqueueAndForget((0,At.Z)(function*(){return function(e,t){Ya(e).bu.delete(t)}(yield Cy(e),n)}))}}(Xy(e=Uy(e,Yy)),Wy(t)?t:{next:t})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Xa("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new nC(this,$y(this._delegate,e))}catch(t){throw Kk(t,"collection()","Firestore.collection()")}}doc(e){try{return new Gk(this,zy(this._delegate,e))}catch(t){throw Kk(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Xk(this,function(e,t){if(e=Uy(e,Zy),Ry("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Xa(Qa.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new jy(e,null,function(e){return new Hc(_u.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Kk(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Uy(e,Yy);const r=Object.assign(Object.assign({},eb),void 0);return function(e){if(e.maxAttempts<1)throw new Xa(Qa.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new eu;return e.asyncQueue.enqueueAndForget((0,At.Z)(function*(){const i=yield function(e){return _y(e).then(e=>e.datastore)}(e);new fy(e.asyncQueue,i,n,t,r).run()})),r.promise}(Xy(e),n=>t(new pb(e,n)),r)}(this._delegate,t=>e(new $k(this,t)))}batch(){return Xy(this._delegate),new zk(new ib(this._delegate,e=>db(this._delegate,e)))}loadBundle(e){return function(e,t){const n=Xy(e=Uy(e,Yy)),r=new Jy;return function(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new hy(e,t)}(function(e,t){if(e instanceof Uint8Array)return cy(e,t);if(e instanceof ArrayBuffer)return cy(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Gp(t));e.asyncQueue.enqueueAndForget((0,At.Z)(function*(){!function(e,t,n){const r=Ya(e);var i;(i=(0,At.Z)(function*(e,t,n){try{const r=yield t.getMetadata();if(yield function(e,t){const n=Ya(e),r=yh(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n._s.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,r))return yield t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(om(r));const i=new sm(r,e.localStore,t.M);let s=yield t.ma();for(;s;){const e=yield i.Fu(s);e&&n._updateProgress(e),s=yield t.ma()}const o=yield i.complete();return yield Um(e,o.Lu,void 0),yield function(e,t){const n=Ya(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n._s.saveBundleMetadata(e,t))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Bu)}catch(e){return Ga("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e),Promise.resolve(new Set)}}),function(e,t,n){return i.apply(this,arguments)})(r,t,n).then(e=>{r.sharedClientState.notifyBundleLoaded(e)})}(yield ky(e),i,r)}))}(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return function(e,t){return function(e,t){return e.asyncQueue.enqueue((0,At.Z)(function*(){return function(e,t){const n=Ya(e);return n.persistence.runTransaction("Get named query","readonly",e=>n._s.getNamedQuery(e,t))}(yield Iy(e),t)}))}(Xy(e=Uy(e,Yy)),t).then(t=>t?new jy(e,null,t.query):null)}(this._delegate,e).then(e=>e?new Xk(this,e):null)}}class Bk extends tb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vk(new iv(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Gk.forKey(t,this.firestore,null)}}class $k{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Bk(e)}get(e){const t=rC(e);return this._delegate.get(t).then(e=>new Yk(this._firestore,new Uv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter)))}set(e,t,n){const r=rC(e);return n?(Mk("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=rC(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=rC(e);return this._delegate.delete(t),this}}class zk{constructor(e){this._delegate=e}set(e,t,n){const r=rC(e);return n?(Mk("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=rC(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=rC(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Hk{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Fv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Qk(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Hk.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Hk(e,new Bk(e),t),r.set(t,i)),i}}Hk.INSTANCES=new WeakMap;class Gk{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bk(e)}static forPath(e,t,n){if(e.length%2!=0)throw new Xa("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Gk(t,new qy(t._delegate,n,new Fu(e)))}static forKey(e,t,n){return new Gk(t,new qy(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new nC(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new nC(this.firestore,$y(this._delegate,e))}catch(t){throw Kk(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,St.m9)(e))instanceof qy&&Hy(this._delegate,e)}set(e,t){t=Mk("DocumentReference.set",t);try{return t?ub(this._delegate,e,t):ub(this._delegate,e)}catch(n){throw Kk(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?cb(this._delegate,e):cb(this._delegate,e,t,...n)}catch(r){throw Kk(r,"updateDoc()","DocumentReference.update()")}}delete(){return lb(this._delegate)}onSnapshot(...e){const t=Wk(e),n=Jk(e,e=>new Yk(this.firestore,new Uv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)));return hb(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=Uy(e,qy);const t=Uy(e.firestore,Yy),n=Xy(t),r=new ob(t);return function(e,t){const n=new eu;return e.asyncQueue.enqueueAndForget((0,At.Z)(function*(){return(r=(0,At.Z)(function*(e,t,n){try{const r=yield function(e,t){const n=Ya(e);return n.persistence.runTransaction("read document","readonly",e=>n.fi.Ls(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Xa(Qa.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Bg(e,`Failed to get document '${t} from cache`);n.reject(r)}}),function(e,t,n){return r.apply(this,arguments)})(yield Iy(e),t,n);var r})),n.promise}(n,e._key).then(n=>new Uv(t,r,e._key,n,new Mv(null!==n&&n.hasLocalMutations,!0),e.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Uy(e,qy);const t=Uy(e.firestore,Yy);return xy(Xy(t),e._key,{source:"server"}).then(n=>fb(t,e,n))}(this._delegate):function(e){e=Uy(e,qy);const t=Uy(e.firestore,Yy);return xy(Xy(t),e._key).then(n=>fb(t,e,n))}(this._delegate),t.then(e=>new Yk(this.firestore,new Uv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)))}withConverter(e){return new Gk(this.firestore,this._delegate.withConverter(e?Hk.getInstance(this.firestore,e):null))}}function Kk(e,t,n){return e.message=e.message.replace(t,n),e}function Wk(e){for(const t of e)if("object"==typeof t&&!Zk(t))return t;return{}}function Jk(e,t){var n,r;let i;return i=Zk(e[0])?e[0]:Zk(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Yk{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Gk(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return qv(this._delegate,e._delegate)}}class Qk extends Yk{data(e){const t=this._delegate.data(e);return function(e,t){e||Wa()}(void 0!==t),t}}class Xk{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bk(e)}where(e,t,n){try{return new Xk(this.firestore,$v(this._delegate,function(e,t,n){const r=t,i=Lv("where",e);return new zv(i,r,n)}(e,t,n)))}catch(r){throw Kk(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Xk(this.firestore,$v(this._delegate,function(e,t="asc"){const n=t,r=Lv("orderBy",e);return new Hv(r,n)}(e,t)))}catch(n){throw Kk(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Xk(this.firestore,$v(this._delegate,function(e){return Fy("limit",e),new Gv("limit",e,"F")}(e)))}catch(t){throw Kk(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Xk(this.firestore,$v(this._delegate,function(e){return Fy("limitToLast",e),new Gv("limitToLast",e,"L")}(e)))}catch(t){throw Kk(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Xk(this.firestore,$v(this._delegate,function(...e){return new Kv("startAt",e,!0)}(...e)))}catch(t){throw Kk(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Xk(this.firestore,$v(this._delegate,function(...e){return new Kv("startAfter",e,!1)}(...e)))}catch(t){throw Kk(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Xk(this.firestore,$v(this._delegate,function(...e){return new Wv("endBefore",e,!1)}(...e)))}catch(t){throw Kk(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Xk(this.firestore,$v(this._delegate,function(...e){return new Wv("endAt",e,!0)}(...e)))}catch(t){throw Kk(t,"endAt()","Query.endAt()")}}isEqual(e){return Gy(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=Uy(e,jy);const t=Uy(e.firestore,Yy),n=Xy(t),r=new ob(t);return function(e,t){const n=new eu;return e.asyncQueue.enqueueAndForget((0,At.Z)(function*(){return(r=(0,At.Z)(function*(e,t,n){try{const r=yield dp(e,t,!0),i=new cm(t,r._i),s=i.Wu(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=Bg(e,`Failed to execute query '${t} against cache`);n.reject(r)}}),function(e,t,n){return r.apply(this,arguments)})(yield Iy(e),t,n);var r})),n.promise}(n,e._query).then(n=>new Vv(t,r,e,n))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Uy(e,jy);const t=Uy(e.firestore,Yy),n=Xy(t),r=new ob(t);return Ny(n,e._query,{source:"server"}).then(n=>new Vv(t,r,e,n))}(this._delegate):ab(this._delegate),t.then(e=>new tC(this.firestore,new Vv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)))}onSnapshot(...e){const t=Wk(e),n=Jk(e,e=>new tC(this.firestore,new Vv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)));return hb(this._delegate,t,n)}withConverter(e){return new Xk(this.firestore,this._delegate.withConverter(e?Hk.getInstance(this.firestore,e):null))}}class eC{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Qk(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tC{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Xk(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Qk(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(e=>new eC(this._firestore,e))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new Qk(this._firestore,n))})}isEqual(e){return qv(this._delegate,e._delegate)}}class nC extends Xk{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Gk(this.firestore,e):null}doc(e){try{return new Gk(this.firestore,void 0===e?zy(this._delegate):zy(this._delegate,e))}catch(t){throw Kk(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Uy(e.firestore,Yy),r=zy(e),i=nb(e.converter,t);return db(n,[pv(fv(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,El.exists(!1))]).then(()=>r)}(this._delegate,e).then(e=>new Gk(this.firestore,e))}isEqual(e){return Hy(this._delegate,e._delegate)}withConverter(e){return new nC(this.firestore,this._delegate.withConverter(e?Hk.getInstance(this.firestore,e):null))}}function rC(e){return Uy(e,qy)}class iC{constructor(...e){this._delegate=new rv(...e)}static documentId(){return new iC(Su.keyField().canonicalString())}isEqual(e){return(e=(0,St.m9)(e))instanceof rv&&this._delegate._internalPath.isEqual(e._internalPath)}}class sC{constructor(e){this._delegate=e}static serverTimestamp(){const e=new yv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new sC(e)}static delete(){const e=new gv("deleteField");return e._methodName="FieldValue.delete",new sC(e)}static arrayUnion(...e){const t=function(...e){return new vv("arrayUnion",e)}(...e);return t._methodName="FieldValue.arrayUnion",new sC(t)}static arrayRemove(...e){const t=function(...e){return new bv("arrayRemove",e)}(...e);return t._methodName="FieldValue.arrayRemove",new sC(t)}static increment(e){const t=function(e){return new wv("increment",e)}(e);return t._methodName="FieldValue.increment",new sC(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const oC={Firestore:jk,GeoPoint:ov,Timestamp:gu,Blob:Vk,Transaction:$k,WriteBatch:zk,DocumentReference:Gk,DocumentSnapshot:Yk,Query:Xk,QueryDocumentSnapshot:Qk,QuerySnapshot:tC,CollectionReference:nC,FieldPath:iC,FieldValue:sC,setLogLevel:function(e){!function(e){Ba.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};var aC;(aC=RS.Z).INTERNAL.registerComponent(new kt.wA("firestore-compat",e=>{return t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("firestore").getImmediate(),new jk(t,n,new qk);var t,n},"PUBLIC").setServiceProps(Object.assign({},oC))),aC.registerVersion("@firebase/firestore-compat","0.1.18");var uC=n(6682),cC=n(9746),lC=n(7771),hC=n(8858);class dC extends Ob.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new fC(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let s;if(this.closed)throw new Rb.N;if(this.isStopped||this.hasError?s=Ew.w.EMPTY:(this.observers.push(e),s=new hC.W(this,e)),r&&e.add(e=new cC.ht(e,r)),t)for(let o=0;o<i&&!e.closed;o++)e.next(n[o]);else for(let o=0;o<i&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),s}_getNow(){return(this.scheduler||lC.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(e-r[s].time<n);)s++;return i>t&&(s=Math.max(s,i-t)),s>0&&r.splice(0,s),r}}class fC{constructor(e,t){this.time=e,this.value=t}}function pC(e,t,n){let r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},e=>e.lift(function({bufferSize:e=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,s,o=0,a=!1,u=!1;return function(c){let l;o++,!i||a?(a=!1,i=new dC(e,t,r),l=i.subscribe(this),s=c.subscribe({next(e){i.next(e)},error(e){a=!0,i.error(e)},complete(){u=!0,s=void 0,i.complete()}}),u&&(s=void 0)):l=i.subscribe(this),this.add(()=>{o--,l.unsubscribe(),l=void 0,s&&!u&&n&&0===o&&(s.unsubscribe(),s=void 0,i=void 0)})}}(r))}function gC(e,t){return t?Yb(()=>e,t):Yb(()=>e)}var mC=n(3101);const yC=new r.OlP("angularfire2.auth.use-emulator"),vC=new r.OlP("angularfire2.auth.settings"),bC=new r.OlP("angularfire2.auth.tenant-id"),wC=new r.OlP("angularfire2.auth.langugage-code"),_C=new r.OlP("angularfire2.auth.use-device-language"),TC=new r.OlP("angularfire.auth.persistence"),SC=(e,t,n,r,i,s,o,a)=>(0,OS.cc)(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{const u=t.runOutsideAngular(()=>e.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[e,t]of Object.entries(o))u.settings[e]=t;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]);let IC=(()=>{class e{constructor(e,t,r,i,s,o,a,u,c,l,h,d){const f=new Ob.xQ,p=(0,Ee.of)(void 0).pipe((0,cC.QV)(s.outsideAngular),Yb(()=>i.runOutsideAngular(()=>Promise.resolve().then(n.bind(n,4828)))),(0,Pe.U)(()=>(0,OS.on)(e,i,t)),(0,Pe.U)(e=>SC(e,i,o,u,c,l,a,h)),pC({bufferSize:1,refCount:!1}));if(q(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Ee.of)(null);else{p.pipe(Tw()).subscribe();const e=p.pipe(Yb(e=>e.getRedirectResult().then(e=>e,()=>null)),ft.iC,pC({bufferSize:1,refCount:!1})),t=p.pipe(Yb(e=>new ke.y(t=>({unsubscribe:i.runOutsideAngular(()=>e.onAuthStateChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))})))),n=p.pipe(Yb(e=>new ke.y(t=>({unsubscribe:i.runOutsideAngular(()=>e.onIdTokenChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))}))));this.authState=e.pipe(gC(t),(0,mC.R)(s.outsideAngular),(0,cC.QV)(s.insideAngular)),this.user=e.pipe(gC(n),(0,mC.R)(s.outsideAngular),(0,cC.QV)(s.insideAngular)),this.idToken=this.user.pipe(Yb(e=>e?(0,Nb.D)(e.getIdToken()):(0,Ee.of)(null))),this.idTokenResult=this.user.pipe(Yb(e=>e?(0,Nb.D)(e.getIdTokenResult()):(0,Ee.of)(null))),this.credential=(0,uC.T)(e,f,this.authState.pipe(Ne(e=>!e))).pipe((0,Pe.U)(e=>(null==e?void 0:e.user)?e:null),(0,mC.R)(s.outsideAngular),(0,cC.QV)(s.insideAngular))}return(0,OS.pX)(this,p,i,{spy:{apply:(e,t,n)=>{(e.startsWith("signIn")||e.startsWith("createUser"))&&n.then(e=>f.next(e))}}})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(OS.Dh),r.LFG(OS.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(ft.HU),r.LFG(yC,8),r.LFG(vC,8),r.LFG(bC,8),r.LFG(wC,8),r.LFG(_C,8),r.LFG(TC,8),r.LFG(on,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})();function EC(e,t){return function(e,t=CS.z){return new ke.y(n=>{let r;return null!=t?t.schedule(()=>{r=e.onSnapshot({includeMetadataChanges:!0},n)}):r=e.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(e,t)}function kC(e,t){return EC(e,t).pipe((0,Pe.U)(e=>({payload:e,type:"query"})))}function CC(e,t){return kC(e,t).pipe(iw(void 0),Ok(),(0,Pe.U)(([e,t])=>{const n=t.payload.docChanges(),r=n.map(e=>({type:e.type,payload:e}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(t.payload.metadata)&&t.payload.docs.forEach((t,i)=>{const s=n.find(e=>e.doc.ref.isEqual(t.ref)),o=null==e?void 0:e.payload.docs.find(e=>e.ref.isEqual(t.ref));s&&JSON.stringify(s.doc.metadata)===JSON.stringify(t.metadata)||!s&&o&&JSON.stringify(o.metadata)===JSON.stringify(t.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:t}})}),r}))}function AC(e,t,n){return CC(e,n).pipe(sw((e,n)=>function(e,t,n){return t.forEach(t=>{n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":if(!e[t.newIndex]||!e[t.newIndex].doc.ref.isEqual(t.doc.ref))return xC(e,t.newIndex,0,t);break;case"modified":if(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}return xC(e,t.newIndex,1,t)}break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return xC(e,t.oldIndex,1)}return e}(e,t))}),e}(e,n.map(e=>e.payload),t),[]),e=>e.lift(new Dk(void 0,void 0)),(0,Pe.U)(e=>e.map(e=>({type:e.type,payload:e}))))}function xC(e,t,n,...r){const i=e.slice();return i.splice(t,n,...r),i}function NC(e){return e&&0!==e.length||(e=["added","removed","modified"]),e}class OC{constructor(e,t,n){this.ref=e,this.query=t,this.afs=n}stateChanges(e){let t=CC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Pe.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)))),t.pipe(iw(void 0),Ok(),Ne(([e,t])=>t.length>0||!e),(0,Pe.U)(([e,t])=>t),ft.iC)}auditTrail(e){return this.stateChanges(e).pipe(sw((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=NC(e);return AC(this.query,t,this.afs.schedulers.outsideAngular).pipe(ft.iC)}valueChanges(e={}){return kC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pe.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data())),ft.iC)}get(e){return(0,Nb.D)(this.query.get(e)).pipe(ft.iC)}add(e){return this.ref.add(e)}doc(e){return new RC(this.ref.doc(e),this.afs)}}class RC{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const n=this.ref.collection(e),{ref:r,query:i}=FC(n,t);return new OC(r,i,this.afs)}snapshotChanges(){return function(e,t){return EC(e,t).pipe(iw(void 0),Ok(),(0,Pe.U)(([e,t])=>t.exists?(null==e?void 0:e.exists)?{payload:t,type:"modified"}:{payload:t,type:"added"}:{payload:t,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ft.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Pe.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Nb.D)(this.ref.get(e)).pipe(ft.iC)}}class PC{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?CC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pe.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)),Ne(e=>e.length>0),ft.iC):CC(this.query,this.afs.schedulers.outsideAngular).pipe(ft.iC)}auditTrail(e){return this.stateChanges(e).pipe(sw((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=NC(e);return AC(this.query,t,this.afs.schedulers.outsideAngular).pipe(ft.iC)}valueChanges(e={}){return kC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pe.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign({[e.idField]:t.id},t.data()):t.data())),ft.iC)}get(e){return(0,Nb.D)(this.query.get(e)).pipe(ft.iC)}}const DC=new r.OlP("angularfire2.enableFirestorePersistence"),LC=new r.OlP("angularfire2.firestore.persistenceSettings"),MC=new r.OlP("angularfire2.firestore.settings"),UC=new r.OlP("angularfire2.firestore.use-emulator");function FC(e,t=(e=>e)){return{query:t(e),ref:e}}let VC=(()=>{class e{constructor(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,g,m){this.schedulers=o;const y=(0,OS.on)(e,s,t),v=u;c&&SC(y,s,l,d,f,p,h,g),[this.firestore,this.persistenceEnabled$]=(0,OS.cc)(`${y.name}.firestore`,"AngularFirestore",y.name,()=>{const e=s.runOutsideAngular(()=>y.firestore());if(r&&e.settings(r),v&&e.useEmulator(...v),n&&!q(i)){const t=()=>{try{return(0,Nb.D)(e.enablePersistence(a||void 0).then(()=>!0,()=>!1))}catch(t){return"undefined"!=typeof console&&console.warn(t),(0,Ee.of)(!1)}};return[e,s.runOutsideAngular(t)]}return[e,(0,Ee.of)(!1)]},[r,v,n])}collection(e,t){let n;n="string"==typeof e?this.firestore.collection(e):e;const{ref:r,query:i}=FC(n,t),s=this.schedulers.ngZone.run(()=>r);return new OC(s,i,this)}collectionGroup(e,t){const n=t||(e=>e),r=this.firestore.collectionGroup(e);return new PC(n(r),this)}doc(e){let t;t="string"==typeof e?this.firestore.doc(e):e;const n=this.schedulers.ngZone.run(()=>t);return new RC(n,this)}createId(){return this.firestore.collection("_").doc().id}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(OS.Dh),r.LFG(OS.xv,8),r.LFG(DC,8),r.LFG(MC,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(ft.HU),r.LFG(LC,8),r.LFG(UC,8),r.LFG(IC,8),r.LFG(yC,8),r.LFG(vC,8),r.LFG(bC,8),r.LFG(wC,8),r.LFG(_C,8),r.LFG(TC,8),r.LFG(on,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})();const ZC={apiKey:"AIzaSyCXiM3pRTf1d6CCChySrNyXq-v7I7RacbE",authDomain:"junkyard-stories.firebaseapp.com",projectId:"junkyard-stories",storageBucket:"junkyard-stories.appspot.com",messagingSenderId:"800786856702",appId:"1:800786856702:web:47b317703177830d09c3af"};let qC=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e,bootstrap:[_k]}),e.\u0275inj=r.cJS({providers:[JS,QS,VC,{provide:m,useClass:w},{provide:et,useClass:Nk,multi:!0}],imports:[[_e,yS.forRoot([]),_t(()=>Tt(ZC)),Ar(()=>Nr()),_b(()=>kb()),OS.hO.initializeApp(ZC),WS,ht,wk,cE,Sk]]}),e})();(0,r.G48)(),be().bootstrapModule(qC).catch(e=>console.error(e))},6304:function(e,t,n){"use strict";function r(e,t,n,r,i,s,o){try{var a=e[s](o),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,s){var o=e.apply(t,n);function a(e){r(o,i,s,a,u,"next",e)}function u(e){r(o,i,s,a,u,"throw",e)}a(void 0)})}}n.d(t,{Z:function(){return i}})}},function(e){"use strict";e(e.s=3205)}]);