!function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?e(Object(i),!0).forEach(function(e){n(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||h(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e){if(Array.isArray(e))return e}function o(){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=s(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}function u(e){return function(e){if(Array.isArray(e))return f(e)}(e)||c(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function h(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}function m(e){var t=_();return function(){var n,r=S(e);if(t){var i=S(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){var t="function"==typeof Map?new Map:void 0;return(b=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return w(e,arguments,S(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),x(r,e)})(e)}function w(e,t,n){return(w=_()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&x(i,n.prototype),i}).apply(null,arguments)}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(self.webpackChunkjunkyard_stories=self.webpackChunkjunkyard_stories||[]).push([[179],{8255:function(e){function t(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=function(){return[]},t.resolve=t,t.id=8255,e.exports=t},3018:function(e,t,n){"use strict";n.d(t,{deG:function(){return hn},tb:function(){return Ou},AFp:function(){return Cu},ip1:function(){return Iu},CZH:function(){return Eu},hGG:function(){return Tc},z2F:function(){return vc},sBO:function(){return Rs},Sil:function(){return Hu},_Vd:function(){return es},EJc:function(){return Mu},SBq:function(){return is},qLn:function(){return Cr},vpe:function(){return su},gxx:function(){return la},tBr:function(){return Pn},XFs:function(){return H},OlP:function(){return ln},zs3:function(){return Sa},ZZ4:function(){return xs},aQg:function(){return Ts},soG:function(){return Lu},YKP:function(){return Fs},v3s:function(){return mc},h0i:function(){return Us},PXZ:function(){return lc},R0b:function(){return Ku},FiY:function(){return On},Lbi:function(){return Pu},g9A:function(){return Du},Qsj:function(){return ss},FYo:function(){return os},JOm:function(){return Pr},Tiy:function(){return cs},q3G:function(){return br},tp0:function(){return Nn},EAV:function(){return bc},Rgc:function(){return Ls},dDg:function(){return ec},DyG:function(){return fn},q4F:function(){return hs},GfV:function(){return ls},s_b:function(){return Vs},ifc:function(){return J},eFA:function(){return hc},G48:function(){return uc},Gpc:function(){return E},f3M:function(){return En},X6Q:function(){return sc},_c5:function(){return xc},VLi:function(){return nc},c2e:function(){return Nu},zSh:function(){return fa},wAp:function(){return jo},vHH:function(){return R},EiD:function(){return yr},mCW:function(){return tr},qzn:function(){return Hn},JVY:function(){return Gn},pB0:function(){return Yn},eBb:function(){return Wn},L6k:function(){return Kn},LAX:function(){return Jn},cg1:function(){return Fo},Tjo:function(){return _c},kL8:function(){return qo},yhl:function(){return zn},dqk:function(){return ee},sIi:function(){return Na},CqO:function(){return $a},QGY:function(){return Ya},F4k:function(){return Qa},RDi:function(){return Me},AaK:function(){return x},z3N:function(){return Bn},qOj:function(){return Ia},TTD:function(){return De},_Bn:function(){return Qo},xp6:function(){return pi},uIk:function(){return Ua},Gre:function(){return No},ekj:function(){return mo},Suo:function(){return wu},Xpm:function(){return he},lG2:function(){return ye},Yz7:function(){return N},cJS:function(){return L},oAB:function(){return ve},Yjl:function(){return ke},Y36:function(){return Va},_UZ:function(){return Ga},BQk:function(){return Wa},ynx:function(){return Ka},qZA:function(){return za},TgZ:function(){return Ha},EpF:function(){return Ja},n5z:function(){return on},Ikx:function(){return Lo},LFG:function(){return In},$8M:function(){return un},NdJ:function(){return Xa},CRH:function(){return _u},oxw:function(){return no},ALo:function(){return iu},lcZ:function(){return au},Q6J:function(){return ja},s9C:function(){return ro},DdM:function(){return tu},VKq:function(){return nu},iGM:function(){return ku},evT:function(){return Rr},CHM:function(){return et},oJD:function(){return wr},LSH:function(){return _r},kYT:function(){return ge},Akn:function(){return yo},YNc:function(){return qa},_uU:function(){return Do},Oqu:function(){return Po},hij:function(){return Oo},Gf:function(){return bu}});var i=n(9765),a=n(5319),s=n(7574),c=n(6682),h=n(2441),f=n(1307);function d(){return new i.xQ}function y(e){for(var t in e)if(e[t]===y)return t;throw Error("Could not find renamed property on target object.")}function _(e,t){for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function x(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(x).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return"".concat(e.overriddenName);if(e.name)return"".concat(e.name);var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function T(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}var I=y({__forward_ref__:y});function E(e){return e.__forward_ref__=E,e.toString=function(){return x(this())},e}function C(e){return A(e)?e():e}function A(e){return"function"==typeof e&&e.hasOwnProperty(I)&&e.__forward_ref__===E}var R=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,function(e,t){return"".concat(e?"NG0".concat(e,": "):"").concat(t)}(e,r))).code=e,i}return p(n)}(b(Error));function D(e){return"string"==typeof e?e:null==e?"":String(e)}function P(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():D(e)}function O(e,t){var n=t?" in ".concat(t):"";throw new R("201","No provider for ".concat(P(e)," found").concat(n))}function N(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function L(e){return{providers:e.providers||[],imports:e.imports||[]}}function M(e){return Z(e,q)||Z(e,j)}function Z(e,t){return e.hasOwnProperty(t)?e[t]:null}function U(e){return e&&(e.hasOwnProperty(V)||e.hasOwnProperty(B))?e[V]:null}var F,q=y({"\u0275prov":y}),V=y({"\u0275inj":y}),j=y({ngInjectableDef:y}),B=y({ngInjectorDef:y}),H=((H=H||{})[H.Default=0]="Default",H[H.Host=1]="Host",H[H.Self=2]="Self",H[H.SkipSelf=4]="SkipSelf",H[H.Optional=8]="Optional",H);function z(e){var t=F;return F=e,t}function G(e,t,n){var r=M(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&H.Optional?null:void 0!==t?t:void O(x(e),"Injector")}function K(e){return{toString:e}.toString()}var W=((W=W||{})[W.OnPush=0]="OnPush",W[W.Default=1]="Default",W),J=((J=J||{})[J.Emulated=0]="Emulated",J[J.None=2]="None",J[J.ShadowDom=3]="ShadowDom",J),Y="undefined"!=typeof globalThis&&globalThis,Q="undefined"!=typeof window&&window,$="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,X="undefined"!=typeof global&&global,ee=Y||X||Q||$,te={},ne=[],re=y({"\u0275cmp":y}),ie=y({"\u0275dir":y}),ae=y({"\u0275pipe":y}),oe=y({"\u0275mod":y}),se=y({"\u0275loc":y}),ue=y({"\u0275fac":y}),ce=y({__NG_ELEMENT_ID__:y}),le=0;function he(e){return K(function(){var t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===W.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||ne,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||J.Emulated,id:"c",styles:e.styles||ne,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,a=e.pipes;return n.id+=le++,n.inputs=me(e.inputs,t),n.outputs=me(e.outputs),i&&i.forEach(function(e){return e(n)}),n.directiveDefs=r?function(){return("function"==typeof r?r():r).map(fe)}:null,n.pipeDefs=a?function(){return("function"==typeof a?a():a).map(de)}:null,n})}function fe(e){return be(e)||function(e){return e[ie]||null}(e)}function de(e){return function(e){return e[ae]||null}(e)}var pe={};function ve(e){return K(function(){var t={type:e.type,bootstrap:e.bootstrap||ne,declarations:e.declarations||ne,imports:e.imports||ne,exports:e.exports||ne,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(pe[e.id]=e.type),t})}function ge(e,t){return K(function(){var n=we(e,!0);n.declarations=t.declarations||ne,n.imports=t.imports||ne,n.exports=t.exports||ne})}function me(e,t){if(null==e)return te;var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],a=i;Array.isArray(i)&&(a=i[1],i=i[0]),n[i]=r,t&&(t[i]=a)}return n}var ye=he;function ke(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function be(e){return e[re]||null}function we(e,t){var n=e[oe]||null;if(!n&&!0===t)throw new Error("Type ".concat(x(e)," does not have '\u0275mod' property."));return n}function _e(e){return Array.isArray(e)&&"object"==typeof e[1]}function xe(e){return Array.isArray(e)&&!0===e[1]}function Se(e){return 0!=(8&e.flags)}function Te(e){return 2==(2&e.flags)}function Ie(e){return 1==(1&e.flags)}function Ee(e){return null!==e.template}function Ce(e,t){return e.hasOwnProperty(ue)?e[ue]:null}var Ae,Re=function(){function e(t,n,r){v(this,e),this.previousValue=t,this.currentValue=n,this.firstChange=r}return p(e,[{key:"isFirstChange",value:function(){return this.firstChange}}]),e}();function De(){return Pe}function Pe(e){return e.type.prototype.ngOnChanges&&(e.setInput=Ne),Oe}function Oe(){var e=Le(this),t=null==e?void 0:e.current;if(t){var n=e.previous;if(n===te)e.previous=t;else for(var r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function Ne(e,t,n,r){var i=Le(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:te,current:null}),a=i.current||(i.current={}),o=i.previous,s=this.declaredInputs[n],u=o[s];a[s]=new Re(u&&u.currentValue,t,o===te),e[r]=t}function Le(e){return e.__ngSimpleChanges__||null}function Me(e){Ae=e}function Ze(){return void 0!==Ae?Ae:"undefined"!=typeof document?document:void 0}function Ue(e){return!!e.listen}De.ngInherit=!0;var Fe={createRenderer:function(e,t){return Ze()}};function qe(e){for(;Array.isArray(e);)e=e[0];return e}function Ve(e,t){return qe(t[e])}function je(e,t){return qe(t[e.index])}function Be(e,t){return e.data[t]}function He(e,t){var n=t[e];return _e(n)?n:n[0]}function ze(e){return 4==(4&e[2])}function Ge(e){return 128==(128&e[2])}function Ke(e,t){return null==t?null:e[t]}function We(e){e[18]=0}function Je(e,t){e[5]+=t;for(var n=e,r=e[3];null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}var Ye={lFrame:yt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Qe(){return Ye.bindingsEnabled}function $e(){return Ye.lFrame.lView}function Xe(){return Ye.lFrame.tView}function et(e){return Ye.lFrame.contextLView=e,e[8]}function tt(){for(var e=nt();null!==e&&64===e.type;)e=e.parent;return e}function nt(){return Ye.lFrame.currentTNode}function rt(e,t){var n=Ye.lFrame;n.currentTNode=e,n.isParent=t}function it(){return Ye.lFrame.isParent}function at(){Ye.lFrame.isParent=!1}function ot(){return Ye.isInCheckNoChangesMode}function st(e){Ye.isInCheckNoChangesMode=e}function ut(){var e=Ye.lFrame,t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function ct(){return Ye.lFrame.bindingIndex++}function lt(e){var t=Ye.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function ht(e){Ye.lFrame.currentDirectiveIndex=e}function ft(){return Ye.lFrame.currentQueryIndex}function dt(e){Ye.lFrame.currentQueryIndex=e}function pt(e){var t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function vt(e,t,n){if(n&H.SkipSelf){for(var r=t,i=e;!(null!==(r=r.parent)||n&H.Host||(r=pt(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;t=r,e=i}var a=Ye.lFrame=mt();return a.currentTNode=t,a.lView=e,!0}function gt(e){var t=mt(),n=e[1];Ye.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function mt(){var e=Ye.lFrame,t=null===e?null:e.child;return null===t?yt(e):t}function yt(e){var t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function kt(){var e=Ye.lFrame;return Ye.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var bt=kt;function wt(){var e=kt();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function _t(){return Ye.lFrame.selectedIndex}function xt(e){Ye.lFrame.selectedIndex=e}function St(){var e=Ye.lFrame;return Be(e.tView,e.selectedIndex)}function Tt(e,t){for(var n=t.directiveStart,r=t.directiveEnd;n<r;n++){var i=e.data[n].type.prototype,a=i.ngAfterContentInit,o=i.ngAfterContentChecked,s=i.ngAfterViewInit,u=i.ngAfterViewChecked,c=i.ngOnDestroy;a&&(e.contentHooks||(e.contentHooks=[])).push(-n,a),o&&((e.contentHooks||(e.contentHooks=[])).push(n,o),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,o)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),u&&((e.viewHooks||(e.viewHooks=[])).push(n,u),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,u)),null!=c&&(e.destroyHooks||(e.destroyHooks=[])).push(n,c)}}function It(e,t,n){At(e,t,3,n)}function Et(e,t,n,r){(3&e[2])===n&&At(e,t,n,r)}function Ct(e,t){var n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function At(e,t,n,r){for(var i=null!=r?r:-1,a=t.length-1,o=0,s=void 0!==r?65535&e[18]:0;s<a;s++)if("number"==typeof t[s+1]){if(o=t[s],null!=r&&o>=r)break}else t[s]<0&&(e[18]+=65536),(o<i||-1==i)&&(Rt(e,n,t,s),e[18]=(4294901760&e[18])+s+2),s++}function Rt(e,t,n,r){var i=n[r]<0,a=n[r+1],o=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{a.call(o)}finally{}}}else try{a.call(o)}finally{}}var Dt=p(function e(t,n,r){v(this,e),this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r});function Pt(e,t,n){for(var r=Ue(e),i=0;i<n.length;){var a=n[i];if("number"==typeof a){if(0!==a)break;i++;var o=n[i++],s=n[i++],u=n[i++];r?e.setAttribute(t,s,u,o):t.setAttributeNS(o,s,u)}else{var c=a,l=n[++i];Nt(c)?r&&e.setProperty(t,c,l):r?e.setAttribute(t,c,l):t.setAttribute(c,l),i++}}return i}function Ot(e){return 3===e||4===e||6===e}function Nt(e){return 64===e.charCodeAt(0)}function Lt(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else for(var n=-1,r=0;r<t.length;r++){var i=t[r];"number"==typeof i?n=i:0===n||Mt(e,n,i,null,-1===n||2===n?t[++r]:null)}return e}function Mt(e,t,n,r,i){var a=0,o=e.length;if(-1===t)o=-1;else for(;a<e.length;){var s=e[a++];if("number"==typeof s){if(s===t){o=-1;break}if(s>t){o=a-1;break}}}for(;a<e.length;){var u=e[a];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==i&&(e[a+1]=i));if(r===e[a+1])return void(e[a+2]=i)}a++,null!==r&&a++,null!==i&&a++}-1!==o&&(e.splice(o,0,t),a=o+1),e.splice(a++,0,n),null!==r&&e.splice(a++,0,r),null!==i&&e.splice(a++,0,i)}function Zt(e){return-1!==e}function Ut(e){return 32767&e}function Ft(e,t){for(var n=e>>16,r=t;n>0;)r=r[15],n--;return r}var qt=!0;function Vt(e){var t=qt;return qt=e,t}var jt=0;function Bt(e,t){var n=zt(e,t);if(-1!==n)return n;var r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Ht(r.data,e),Ht(t,null),Ht(r.blueprint,null));var i=Gt(e,t),a=e.injectorIndex;if(Zt(i))for(var o=Ut(i),s=Ft(i,t),u=s[1].data,c=0;c<8;c++)t[a+c]=s[o+c]|u[o+c];return t[a+8]=i,a}function Ht(e,t){e.push(0,0,0,0,0,0,0,0,t)}function zt(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Gt(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;for(var n=0,r=null,i=t;null!==i;){var a=i[1],o=a.type;if(null===(r=2===o?a.declTNode:1===o?i[6]:null))return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Kt(e,t,n){!function(e,t,n){var r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ce)&&(r=n[ce]),null==r&&(r=n[ce]=jt++);var i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function Wt(e,t,n){if(n&H.Optional)return e;O(t,"NodeInjector")}function Jt(e,t,n,r){if(n&H.Optional&&void 0===r&&(r=null),0==(n&(H.Self|H.Host))){var i=e[9],a=z(void 0);try{return i?i.get(t,r,n&H.Optional):G(t,r,n&H.Optional)}finally{z(a)}}return Wt(r,t,n)}function Yt(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:H.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==e){var a=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;var t=e.hasOwnProperty(ce)?e[ce]:void 0;return"number"==typeof t?t>=0?255&t:$t:t}(n);if("function"==typeof a){if(!vt(t,e,r))return r&H.Host?Wt(i,n,r):Jt(t,n,r,i);try{var o=a(r);if(null!=o||r&H.Optional)return o;O(n)}finally{bt()}}else if("number"==typeof a){var s=null,u=zt(e,t),c=-1,l=r&H.Host?t[16][6]:null;for((-1===u||r&H.SkipSelf)&&(-1!==(c=-1===u?Gt(e,t):t[u+8])&&rn(r,!1)?(s=t[1],u=Ut(c),t=Ft(c,t)):u=-1);-1!==u;){var h=t[1];if(nn(a,u,h.data)){var f=Xt(u,t,n,s,r,l);if(f!==Qt)return f}-1!==(c=t[u+8])&&rn(r,t[1].data[u+8]===l)&&nn(a,u,t)?(s=h,u=Ut(c),t=Ft(c,t)):u=-1}}}return Jt(t,n,r,i)}var Qt={};function $t(){return new an(tt(),$e())}function Xt(e,t,n,r,i,a){var o=t[1],s=o.data[e+8],u=en(s,o,n,null==r?Te(s)&&qt:r!=o&&0!=(3&s.type),i&H.Host&&a===s);return null!==u?tn(t,o,u,s):Qt}function en(e,t,n,r,i){for(var a=e.providerIndexes,o=t.data,s=1048575&a,u=e.directiveStart,c=a>>20,l=i?s+c:e.directiveEnd,h=r?s:s+c;h<l;h++){var f=o[h];if(h<u&&n===f||h>=u&&f.type===n)return h}if(i){var d=o[u];if(d&&Ee(d)&&d.type===n)return u}return null}function tn(e,t,n,r){var i=e[n],a=t.data;if(i instanceof Dt){var o=i;o.resolving&&function(e,t){throw new R("200","Circular dependency in DI detected for ".concat(e))}(P(a[n]));var s=Vt(o.canSeeViewProviders);o.resolving=!0;var u=o.injectImpl?z(o.injectImpl):null;vt(e,r,H.Default);try{i=e[n]=o.factory(void 0,a,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){var r=t.type.prototype,i=r.ngOnChanges,a=r.ngOnInit,o=r.ngDoCheck;if(i){var s=Pe(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s)}a&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,a),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,a[n],t)}finally{null!==u&&z(u),Vt(s),o.resolving=!1,bt()}}return i}function nn(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function rn(e,t){return!(e&H.Self||e&H.Host&&t)}var an=function(){function e(t,n){v(this,e),this._tNode=t,this._lView=n}return p(e,[{key:"get",value:function(e,t){return Yt(this._tNode,this._lView,e,void 0,t)}}]),e}();function on(e){return K(function(){for(var t=e.prototype.constructor,n=t[ue]||sn(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;i&&i!==r;){var a=i[ue]||sn(i);if(a&&a!==n)return a;i=Object.getPrototypeOf(i)}return function(e){return new e}})}function sn(e){return A(e)?function(){var t=sn(C(e));return t&&t()}:Ce(e)}function un(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;var n=e.attrs;if(n)for(var r=n.length,i=0;i<r;){var a=n[i];if(Ot(a))break;if(0===a)i+=2;else if("number"==typeof a)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(a===t)return n[i+1];i+=2}}return null}(tt(),e)}function cn(e,t,n){return K(function(){var r=function(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var n in t)this[n]=t[n]}}}(t);function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof i)return r.apply(this,t),this;var a=w(i,t);return o.annotation=a,o;function o(e,t,n){for(var r=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(a),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var ln=function(){function e(t,n){v(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=N({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return p(e,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),e}(),hn=new ln("AnalyzeForEntryComponents"),fn=Function;function dn(e,t){void 0===t&&(t=e);for(var n=0;n<e.length;n++){var r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),dn(r,t)):t!==e&&t.push(r)}return t}function pn(e,t){e.forEach(function(e){return Array.isArray(e)?pn(e,t):t(e)})}function vn(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function gn(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function mn(e,t,n){var r=kn(e,t);return r>=0?e[1|r]=n:function(e,t,n,r){var i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r=~r,t,n),r}function yn(e,t){var n=kn(e,t);if(n>=0)return e[1|n]}function kn(e,t){return function(e,t,n){for(var r=0,i=e.length>>1;i!==r;){var a=r+(i-r>>1),o=e[a<<1];if(t===o)return a<<1;o>t?i=a:r=a+1}return~(i<<1)}(e,t)}var bn,wn={},_n=/\n/gm,xn=y({provide:String,useValue:y});function Sn(e){var t=bn;return bn=e,t}function Tn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H.Default;if(void 0===bn)throw new Error("inject() must be called from an injection context");return null===bn?G(e,void 0,t):bn.get(e,t&H.Optional?null:void 0,t)}function In(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H.Default;return(F||Tn)(C(e),t)}var En=In;function Cn(e){for(var t=[],n=0;n<e.length;n++){var r=C(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,a=H.Default,o=0;o<r.length;o++){var s=r[o],u=s.__NG_DI_FLAG__;"number"==typeof u?-1===u?i=s.token:a|=u:i=s}t.push(In(i,a))}else t.push(In(r))}return t}function An(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}var Rn,Dn,Pn=An(cn("Inject",function(e){return{token:e}}),-1),On=An(cn("Optional"),8),Nn=An(cn("SkipSelf"),4);function Ln(e){var t;return(null===(t=function(){if(void 0===Rn&&(Rn=null,ee.trustedTypes))try{Rn=ee.trustedTypes.createPolicy("angular",{createHTML:function(e){return e},createScript:function(e){return e},createScriptURL:function(e){return e}})}catch(t){}return Rn}())||void 0===t?void 0:t.createHTML(e))||e}function Mn(e){var t;return(null===(t=function(){if(void 0===Dn&&(Dn=null,ee.trustedTypes))try{Dn=ee.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:function(e){return e},createScript:function(e){return e},createScriptURL:function(e){return e}})}catch(t){}return Dn}())||void 0===t?void 0:t.createHTML(e))||e}var Zn=function(){function e(t){v(this,e),this.changingThisBreaksApplicationSecurity=t}return p(e,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity," (see https://g.co/ng/security#xss)")}}]),e}(),Un=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(Zn),Fn=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(Zn),qn=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(Zn),Vn=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(Zn),jn=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(Zn);function Bn(e){return e instanceof Zn?e.changingThisBreaksApplicationSecurity:e}function Hn(e,t){var n=zn(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error("Required a safe ".concat(t,", got a ").concat(n," (see https://g.co/ng/security#xss)"))}return n===t}function zn(e){return e instanceof Zn&&e.getTypeName()||null}function Gn(e){return new Un(e)}function Kn(e){return new Fn(e)}function Wn(e){return new qn(e)}function Jn(e){return new Vn(e)}function Yn(e){return new jn(e)}var Qn=function(){function e(t){v(this,e),this.inertDocumentHelper=t}return p(e,[{key:"getInertBodyElement",value:function(e){e="<body><remove></remove>"+e;try{var t=(new window.DOMParser).parseFromString(Ln(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(n){return null}}}]),e}(),$n=function(){function e(t){if(v(this,e),this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);var r=this.inertDocument.createElement("body");n.appendChild(r)}}return p(e,[{key:"getInertBodyElement",value:function(e){var t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Ln(e),t;var n=this.inertDocument.createElement("body");return n.innerHTML=Ln(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}},{key:"stripCustomNsAttrs",value:function(e){for(var t=e.attributes,n=t.length-1;0<n;n--){var r=t.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||e.removeAttribute(r)}for(var i=e.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),e}(),Xn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,er=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function tr(e){return(e=String(e)).match(Xn)||e.match(er)?e:"unsafe:"+e}function nr(e){var t,n={},r=l(e.split(","));try{for(r.s();!(t=r.n()).done;){n[t.value]=!0}}catch(i){r.e(i)}finally{r.f()}return n}function rr(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];for(var s in o)o.hasOwnProperty(s)&&(e[s]=!0)}return e}var ir,ar=nr("area,br,col,hr,img,wbr"),or=nr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),sr=nr("rp,rt"),ur=rr(sr,or),cr=rr(ar,rr(or,nr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),rr(sr,nr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ur),lr=nr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),hr=nr("srcset"),fr=rr(lr,hr,nr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),nr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),dr=nr("script,style,template"),pr=function(){function e(){v(this,e),this.sanitizedSomething=!1,this.buf=[]}return p(e,[{key:"sanitizeChildren",value:function(e){for(var t=e.firstChild,n=!0;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);var r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(e){var t=e.nodeName.toLowerCase();if(!cr.hasOwnProperty(t))return this.sanitizedSomething=!0,!dr.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);for(var n,r=e.attributes,i=0;i<r.length;i++){var a=r.item(i),o=a.name,s=o.toLowerCase();if(fr.hasOwnProperty(s)){var u=a.value;lr[s]&&(u=tr(u)),hr[s]&&(n=u,u=(n=String(n)).split(",").map(function(e){return tr(e.trim())}).join(", ")),this.buf.push(" ",o,'="',mr(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(e){var t=e.nodeName.toLowerCase();cr.hasOwnProperty(t)&&!ar.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}},{key:"chars",value:function(e){this.buf.push(mr(e))}},{key:"checkClobberedElement",value:function(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: ".concat(e.outerHTML));return t}}]),e}(),vr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,gr=/([^\#-~ |!])/g;function mr(e){return e.replace(/&/g,"&amp;").replace(vr,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(gr,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function yr(e,t){var n=null;try{ir=ir||function(e){var t=new $n(e);return function(){try{return!!(new window.DOMParser).parseFromString(Ln(""),"text/html")}catch(e){return!1}}()?new Qn(t):t}(e);var r=t?String(t):"";n=ir.getInertBodyElement(r);var i=5,a=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=a,a=n.innerHTML,n=ir.getInertBodyElement(r)}while(r!==a);return Ln((new pr).sanitizeChildren(kr(n)||n))}finally{if(n)for(var o=kr(n)||n;o.firstChild;)o.removeChild(o.firstChild)}}function kr(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var br=((br=br||{})[br.NONE=0]="NONE",br[br.HTML=1]="HTML",br[br.STYLE=2]="STYLE",br[br.SCRIPT=3]="SCRIPT",br[br.URL=4]="URL",br[br.RESOURCE_URL=5]="RESOURCE_URL",br);function wr(e){var t=xr();return t?Mn(t.sanitize(br.HTML,e)||""):Hn(e,"HTML")?Mn(Bn(e)):yr(Ze(),D(e))}function _r(e){var t=xr();return t?t.sanitize(br.URL,e)||"":Hn(e,"URL")?Bn(e):tr(D(e))}function xr(){var e=$e();return e&&e[12]}function Sr(e,t){e.__ngContext__=t}function Tr(e){var t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Ir(e){return e.ngOriginalError}function Er(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.error.apply(e,n)}var Cr=function(){function e(){v(this,e),this._console=console}return p(e,[{key:"handleError",value:function(e){var t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e&&e.ngErrorLogger||Er}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(e){return e?function(e){return e.ngDebugContext}(e)||this._findContext(Ir(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=e&&Ir(e);t&&Ir(t);)t=Ir(t);return t||null}}]),e}(),Ar=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ee);function Rr(e){return e.ownerDocument}function Dr(e){return e instanceof Function?e():e}var Pr=((Pr=Pr||{})[Pr.Important=1]="Important",Pr[Pr.DashCase=2]="DashCase",Pr);function Or(e,t){return(void 0)(e,t)}function Nr(e){var t=e[3];return xe(t)?t[3]:t}function Lr(e){return Zr(e[13])}function Mr(e){return Zr(e[4])}function Zr(e){for(;null!==e&&!xe(e);)e=e[4];return e}function Ur(e,t,n,r,i){if(null!=r){var a,o=!1;xe(r)?a=r:_e(r)&&(o=!0,r=r[0]);var s=qe(r);0===e&&null!==n?null==i?zr(t,n,s):Hr(t,n,s,i||null,!0):1===e&&null!==n?Hr(t,n,s,i||null,!0):2===e?function(e,t,n){var r=Kr(e,t);r&&function(e,t,n,r){Ue(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,s,o):3===e&&t.destroyNode(s),null!=a&&function(e,t,n,r,i){var a=n[7];a!==qe(n)&&Ur(t,e,r,a,i);for(var o=10;o<n.length;o++){var s=n[o];Xr(s[1],s,e,t,r,a)}}(t,e,a,n,i)}}function Fr(e,t,n){return Ue(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function qr(e,t){var n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,Je(i,-1)),n.splice(r,1)}function Vr(e,t){if(!(e.length<=10)){var n,r=10+t,i=e[r];if(i){var a=i[17];null!==a&&a!==e&&qr(a,i),t>0&&(e[r-1][4]=i[4]);var o=gn(e,10+t);Xr(i[1],n=i,n[11],2,null,null),n[0]=null,n[6]=null;var s=o[19];null!==s&&s.detachView(o[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}}function jr(e,t){if(!(256&t[2])){var n=t[11];Ue(n)&&n.destroyNode&&Xr(e,t,n,3,null,null),function(e){var t=e[13];if(!t)return Br(e[1],e);for(;t;){var n=null;if(_e(t))n=t[13];else{var r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)_e(t)&&Br(t[1],t),t=t[3];null===t&&(t=e),_e(t)&&Br(t[1],t),n=t&&t[4]}t=n}}(t)}}function Br(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){var n;if(null!=e&&null!=(n=e.destroyHooks))for(var r=0;r<n.length;r+=2){var i=t[n[r]];if(!(i instanceof Dt)){var a=n[r+1];if(Array.isArray(a))for(var o=0;o<a.length;o+=2){var s=i[a[o]],u=a[o+1];try{u.call(s)}finally{}}else try{a.call(i)}finally{}}}}(e,t),function(e,t){var n=e.cleanup,r=t[7],i=-1;if(null!==n)for(var a=0;a<n.length-1;a+=2)if("string"==typeof n[a]){var o=n[a+1],s="function"==typeof o?o(t):qe(t[o]),u=r[i=n[a+2]],c=n[a+3];"boolean"==typeof c?s.removeEventListener(n[a],u,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),a+=2}else{var l=r[i=n[a+1]];n[a].call(l)}if(null!==r){for(var h=i+1;h<r.length;h++)(0,r[h])();t[7]=null}}(e,t),1===t[1].type&&Ue(t[11])&&t[11].destroy();var n=t[17];if(null!==n&&xe(t[3])){n!==t[3]&&qr(n,t);var r=t[19];null!==r&&r.detachView(e)}}}function Hr(e,t,n,r,i){Ue(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function zr(e,t,n){Ue(e)?e.appendChild(t,n):t.appendChild(n)}function Gr(e,t,n,r,i){null!==r?Hr(e,t,n,r,i):zr(e,t,n)}function Kr(e,t){return Ue(e)?e.parentNode(t):t.parentNode}function Wr(e,t,n,r){var i=function(e,t,n){return function(e,t,n){for(var r=t;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){var i=e.data[r.directiveStart].encapsulation;if(i===J.None||i===J.Emulated)return null}return je(r,n)}(e,t.parent,n)}(e,r,t),a=t[11],o=function(e,t,n){return function(e,t,n){return 40&e.type?je(e,n):null}(e,0,n)}(r.parent||t[6],0,t);if(null!=i)if(Array.isArray(n))for(var s=0;s<n.length;s++)Gr(a,i,n[s],o,!1);else Gr(a,i,n,o,!1)}function Jr(e,t){if(null!==t){var n=t.type;if(3&n)return je(t,e);if(4&n)return Qr(-1,e[t.index]);if(8&n){var r=t.child;if(null!==r)return Jr(e,r);var i=e[t.index];return xe(i)?Qr(-1,i):qe(i)}if(32&n)return Or(t,e)()||qe(e[t.index]);var a=Yr(e,t);return null!==a?Array.isArray(a)?a[0]:Jr(Nr(e[16]),a):Jr(e,t.next)}return null}function Yr(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Qr(e,t){var n=10+e+1;if(n<t.length){var r=t[n],i=r[1].firstChild;if(null!==i)return Jr(r,i)}return t[7]}function $r(e,t,n,r,i,a,o){for(;null!=n;){var s=r[n.index],u=n.type;if(o&&0===t&&(s&&Sr(qe(s),r),n.flags|=4),64!=(64&n.flags))if(8&u)$r(e,t,n.child,r,i,a,!1),Ur(t,e,i,s,a);else if(32&u){for(var c=Or(n,r),l=void 0;l=c();)Ur(t,e,i,l,a);Ur(t,e,i,s,a)}else 16&u?ei(e,t,r,n,i,a):Ur(t,e,i,s,a);n=o?n.projectionNext:n.next}}function Xr(e,t,n,r,i,a){$r(n,r,e.firstChild,t,i,a,!1)}function ei(e,t,n,r,i,a){var o=n[16],s=o[6].projection[r.projection];if(Array.isArray(s))for(var u=0;u<s.length;u++)Ur(t,e,i,s[u],a);else $r(e,t,s,o[3],i,a,!0)}function ti(e,t,n){Ue(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function ni(e,t,n){Ue(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function ri(e,t,n){for(var r=e.length;;){var i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){var a=t.length;if(i+a===r||e.charCodeAt(i+a)<=32)return i}n=i+1}}function ii(e,t,n){for(var r=0;r<e.length;){var i=e[r++];if(n&&"class"===i){if(-1!==ri((i=e[r]).toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function ai(e){return 4===e.type&&"ng-template"!==e.value}function oi(e,t,n){return t===(4!==e.type||n?e.value:"ng-template")}function si(e,t,n){for(var r=4,i=e.attrs||[],a=function(e){for(var t=0;t<e.length;t++)if(Ot(e[t]))return t;return e.length}(i),o=!1,s=0;s<t.length;s++){var u=t[s];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!oi(e,u,n)||""===u&&1===t.length){if(ui(r))return!1;o=!0}}else{var c=8&r?u:t[++s];if(8&r&&null!==e.attrs){if(!ii(e.attrs,c,n)){if(ui(r))return!1;o=!0}continue}var l=ci(8&r?"class":u,i,ai(e),n);if(-1===l){if(ui(r))return!1;o=!0;continue}if(""!==c){var h;h=l>a?"":i[l+1].toLowerCase();var f=8&r?h:null;if(f&&-1!==ri(f,c,0)||2&r&&c!==h){if(ui(r))return!1;o=!0}}}}else{if(!o&&!ui(r)&&!ui(u))return!1;if(o&&ui(u))continue;o=!1,r=u|1&r}}return ui(r)||o}function ui(e){return 0==(1&e)}function ci(e,t,n,r){if(null===t)return-1;var i=0;if(r||!n){for(var a=!1;i<t.length;){var o=t[i];if(o===e)return i;if(3===o||6===o)a=!0;else{if(1===o||2===o){for(var s=t[++i];"string"==typeof s;)s=t[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=a?1:2}return-1}return function(e,t){var n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){var r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function li(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<t.length;r++)if(si(e,t[r],n))return!0;return!1}function hi(e,t){return e?":not("+t.trim()+")":t}function fi(e){for(var t=e[0],n=1,r=2,i="",a=!1;n<e.length;){var o=e[n];if("string"==typeof o)if(2&r){var s=e[++n];i+="["+o+(s.length>0?'="'+s+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||ui(o)||(t+=hi(a,i),i=""),r=o,a=a||!ui(r);n++}return""!==i&&(t+=hi(a,i)),t}var di={};function pi(e){vi(Xe(),$e(),_t()+e,ot())}function vi(e,t,n,r){if(!r)if(3==(3&t[2])){var i=e.preOrderCheckHooks;null!==i&&It(t,i,n)}else{var a=e.preOrderHooks;null!==a&&Et(t,a,0,n)}xt(n)}function gi(e,t){return e<<17|t<<2}function mi(e){return e>>17&32767}function yi(e){return 2|e}function ki(e){return(131068&e)>>2}function bi(e,t){return-131069&e|t<<2}function wi(e){return 1|e}function _i(e,t){var n=e.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1];if(-1!==a){var o=e.data[a];dt(i),o.contentQueries(2,t[a],a)}}}function xi(e,t,n,r,i,a,o,s,u,c){var l=t.blueprint.slice();return l[0]=i,l[2]=140|r,We(l),l[3]=l[15]=e,l[8]=n,l[10]=o||e&&e[10],l[11]=s||e&&e[11],l[12]=u||e&&e[12]||null,l[9]=c||e&&e[9]||null,l[6]=a,l[16]=2==t.type?e[16]:l,l}function Si(e,t,n,r,i){var a,o,s=e.data[t];if(null===s)s=function(e,t,n,r,i){var a=nt(),o=it(),s=e.data[t]=function(e,t,n,r,i,a){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?a:a&&a.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=s),null!==a&&(o?null==a.child&&null!==s.parent&&(a.child=s):null===a.next&&(a.next=s)),s}(e,t,n,r,i),Ye.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;var u=(a=Ye.lFrame,o=a.currentTNode,a.isParent?o:o.parent);s.injectorIndex=null===u?-1:u.injectorIndex}return rt(s,!0),s}function Ti(e,t,n,r){if(0===n)return-1;for(var i=t.length,a=0;a<n;a++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Ii(e,t,n){gt(t);try{var r=e.viewQuery;null!==r&&na(1,r,n);var i=e.template;null!==i&&Ai(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&_i(e,t),e.staticViewQueries&&na(2,e.viewQuery,n);var a=e.components;null!==a&&function(e,t){for(var n=0;n<t.length;n++)Qi(e,t[n])}(t,a)}catch(o){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),o}finally{t[2]&=-5,wt()}}function Ei(e,t,n,r){var i=t[2];if(256!=(256&i)){gt(t);var a=ot();try{We(t),Ye.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&Ai(e,t,n,2,r);var o=3==(3&i);if(!a)if(o){var s=e.preOrderCheckHooks;null!==s&&It(t,s,null)}else{var u=e.preOrderHooks;null!==u&&Et(t,u,0,null),Ct(t,0)}if(function(e){for(var t=Lr(e);null!==t;t=Mr(t))if(t[2])for(var n=t[9],r=0;r<n.length;r++){var i=n[r],a=i[3];0==(1024&i[2])&&Je(a,1),i[2]|=1024}}(t),function(e){for(var t=Lr(e);null!==t;t=Mr(t))for(var n=10;n<t.length;n++){var r=t[n],i=r[1];Ge(r)&&Ei(i,r,i.template,r[8])}}(t),null!==e.contentQueries&&_i(e,t),!a)if(o){var c=e.contentCheckHooks;null!==c&&It(t,c)}else{var l=e.contentHooks;null!==l&&Et(t,l,1),Ct(t,1)}!function(e,t){var n,r,i,a=e.hostBindingOpCodes;if(null!==a)try{for(var o=0;o<a.length;o++){var s=a[o];if(s<0)xt(~s);else{var u=s,c=a[++o],l=a[++o];n=c,r=u,i=void 0,(i=Ye.lFrame).bindingIndex=i.bindingRootIndex=n,ht(r),l(2,t[u])}}}finally{xt(-1)}}(e,t);var h=e.components;null!==h&&function(e,t){for(var n=0;n<t.length;n++)Ji(e,t[n])}(t,h);var f=e.viewQuery;if(null!==f&&na(2,f,r),!a)if(o){var d=e.viewCheckHooks;null!==d&&It(t,d)}else{var p=e.viewHooks;null!==p&&Et(t,p,2),Ct(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),a||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Je(t[3],-1))}finally{wt()}}}function Ci(e,t,n,r){var i=t[10],a=!ot(),o=ze(t);try{a&&!o&&i.begin&&i.begin(),o&&Ii(e,t,r),Ei(e,t,n,r)}finally{a&&!o&&i.end&&i.end()}}function Ai(e,t,n,r,i){var a=_t(),o=2&r;try{xt(-1),o&&t.length>20&&vi(e,t,20,ot()),n(r,i)}finally{xt(a)}}function Ri(e,t,n){if(Se(t))for(var r=t.directiveEnd,i=t.directiveStart;i<r;i++){var a=e.data[i];a.contentQueries&&a.contentQueries(1,n[i],i)}}function Di(e,t,n){Qe()&&(function(e,t,n,r){var i=n.directiveStart,a=n.directiveEnd;e.firstCreatePass||Bt(n,t),Sr(r,t);for(var o=n.initialInputs,s=i;s<a;s++){var u=e.data[s],c=Ee(u);c&&zi(t,n,u);var l=tn(t,e,s,n);Sr(l,t),null!==o&&Gi(0,s-i,l,u,0,o),c&&(He(n.index,t)[8]=l)}}(e,t,n,je(n,t)),128==(128&n.flags)&&function(e,t,n){var r=n.directiveStart,i=n.directiveEnd,a=n.index,o=Ye.lFrame.currentDirectiveIndex;try{xt(a);for(var s=r;s<i;s++){var u=e.data[s],c=t[s];ht(s),null===u.hostBindings&&0===u.hostVars&&null===u.hostAttrs||qi(u,c)}}finally{xt(-1),ht(o)}}(e,t,n))}function Pi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:je,r=t.localNames;if(null!==r)for(var i=t.index+1,a=0;a<r.length;a+=2){var o=r[a+1],s=-1===o?n(t,e):e[o];e[i++]=s}}function Oi(e){var t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Ni(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Ni(e,t,n,r,i,a,o,s,u,c){var l=20+r,h=l+i,f=function(e,t){for(var n=[],r=0;r<t;r++)n.push(r<e?null:di);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:e,blueprint:f,template:n,queries:null,viewQuery:s,declTNode:t,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Li(e,t,n,r){var i=ia(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&aa(e).push(r,i.length-1))}function Mi(e,t,n){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Zi(e,t,n,r,i,a,o,s){var u,c,l=je(t,n),h=t.inputs;!s&&null!=h&&(u=h[r])?(sa(e,n,u,r,i),Te(t)&&function(e,t){var n=He(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r="class"===(c=r)?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c,i=null!=o?o(i,t.value||"",r):i,Ue(a)?a.setProperty(l,r,i):Nt(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function Ui(e,t,n,r){var i=!1;if(Qe()){var a=function(e,t,n){var r=e.directiveRegistry,i=null;if(r)for(var a=0;a<r.length;a++){var o=r[a];li(n,o.selectors,!1)&&(i||(i=[]),Kt(Bt(n,t),e,o.type),Ee(o)?(Vi(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==a){i=!0,Bi(n,e.data.length,a.length);for(var s=0;s<a.length;s++){var u=a[s];u.providersResolver&&u.providersResolver(u)}for(var c=!1,l=!1,h=Ti(e,t,a.length,null),f=0;f<a.length;f++){var d=a[f];n.mergedAttrs=Lt(n.mergedAttrs,d.hostAttrs),Hi(e,n,t,h,d),ji(h,d,o),null!==d.contentQueries&&(n.flags|=8),null===d.hostBindings&&null===d.hostAttrs&&0===d.hostVars||(n.flags|=128);var p=d.type.prototype;!c&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),c=!0),l||!p.ngOnChanges&&!p.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),l=!0),h++}!function(e,t){for(var n=t.directiveEnd,r=e.data,i=t.attrs,a=[],o=null,s=null,u=t.directiveStart;u<n;u++){var c=r[u],l=c.inputs,h=null===i||ai(t)?null:Ki(l,i);a.push(h),o=Mi(l,u,o),s=Mi(c.outputs,u,s)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=a,t.inputs=o,t.outputs=s}(e,n)}o&&function(e,t,n){if(t)for(var r=e.localNames=[],i=0;i<t.length;i+=2){var a=n[t[i+1]];if(null==a)throw new R("301","Export of name '".concat(t[i+1],"' not found!"));r.push(t[i],a)}}(n,r,o)}return n.mergedAttrs=Lt(n.mergedAttrs,n.attrs),i}function Fi(e,t,n,r,i,a){var o=a.hostBindings;if(o){var s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);var u=~t.index;(function(e){for(var t=e.length;t>0;){var n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(s)!=u&&s.push(u),s.push(r,i,o)}}function qi(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Vi(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function ji(e,t,n){if(n){if(t.exportAs)for(var r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Ee(t)&&(n[""]=e)}}function Bi(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Hi(e,t,n,r,i){e.data[r]=i;var a=i.factory||(i.factory=Ce(i.type)),o=new Dt(a,Ee(i),null);e.blueprint[r]=o,n[r]=o,Fi(e,t,0,r,Ti(e,n,i.hostVars,di),i)}function zi(e,t,n){var r=je(t,e),i=Oi(n),a=e[10],o=$i(e,xi(e,i,null,n.onPush?64:16,r,t,a,a.createRenderer(r,n),null,null));e[t.index]=o}function Gi(e,t,n,r,i,a){var o=a[t];if(null!==o)for(var s=r.setInput,u=0;u<o.length;){var c=o[u++],l=o[u++],h=o[u++];null!==s?r.setInput(n,h,c,l):n[l]=h}}function Ki(e,t){for(var n=null,r=0;r<t.length;){var i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Wi(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function Ji(e,t){var n=He(t,e);if(Ge(n)){var r=n[1];80&n[2]?Ei(r,n,r.template,n[8]):n[5]>0&&Yi(n)}}function Yi(e){for(var t=Lr(e);null!==t;t=Mr(t))for(var n=10;n<t.length;n++){var r=t[n];if(1024&r[2]){var i=r[1];Ei(i,r,i.template,r[8])}else r[5]>0&&Yi(r)}var a=e[1].components;if(null!==a)for(var o=0;o<a.length;o++){var s=He(a[o],e);Ge(s)&&s[5]>0&&Yi(s)}}function Qi(e,t){var n=He(t,e),r=n[1];!function(e,t){for(var n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),Ii(r,n,n[8])}function $i(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Xi(e){for(;e;){e[2]|=64;var t=Nr(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function ea(e,t,n){var r=t[10];r.begin&&r.begin();try{Ei(e,t,e.template,n)}catch(i){throw oa(t,i),i}finally{r.end&&r.end()}}function ta(e){!function(e){for(var t=0;t<e.components.length;t++){var n=e.components[t],r=Tr(n),i=r[1];Ci(i,r,i.template,n)}}(e[8])}function na(e,t,n){dt(0),t(e,n)}var ra=Promise.resolve(null);function ia(e){return e[7]||(e[7]=[])}function aa(e){return e.cleanup||(e.cleanup=[])}function oa(e,t){var n=e[9],r=n?n.get(Cr,null):null;r&&r.handleError(t)}function sa(e,t,n,r,i){for(var a=0;a<n.length;){var o=n[a++],s=n[a++],u=t[o],c=e.data[o];null!==c.setInput?c.setInput(u,i,r,s):u[s]=i}}function ua(e,t,n){var r=n?e.styles:null,i=n?e.classes:null,a=0;if(null!==t)for(var o=0;o<t.length;o++){var s=t[o];"number"==typeof s?a=s:1==a?i=T(i,s):2==a&&(r=T(r,s+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var ca,la=new ln("INJECTOR",-1),ha=function(){function e(){v(this,e)}return p(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wn;if(t===wn){var n=new Error("NullInjectorError: No provider for ".concat(x(e),"!"));throw n.name="NullInjectorError",n}return t}}]),e}(),fa=new ln("Set Injector scope."),da={},pa={};function va(){return void 0===ca&&(ca=new ha),ca}function ga(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new ma(e,n,t||va(),r)}var ma=function(){function e(t,n,r){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;v(this,e),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var o=[];n&&pn(n,function(e){return i.processProvider(e,t,n)}),pn([t],function(e){return i.processInjectorType(e,[],o)}),this.records.set(la,ba(void 0,this));var s=this.records.get(fa);this.scope=null!=s?s.value:null,this.source=a||("object"==typeof t?null:x(t))}return p(e,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(function(e){return e.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wn,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H.Default;this.assertNotDestroyed();var r,i=Sn(this),a=z(void 0);try{if(!(n&H.SkipSelf)){var o=this.records.get(e);if(void 0===o){var s=("function"==typeof(r=e)||"object"==typeof r&&r instanceof ln)&&M(e);o=s&&this.injectableDefInScope(s)?ba(ya(e),da):null,this.records.set(e,o)}if(null!=o)return this.hydrate(e,o)}return(n&H.Self?va():this.parent).get(e,t=n&H.Optional&&t===wn?null:t)}catch(u){if("NullInjectorError"===u.name){if((u.ngTempTokenPath=u.ngTempTokenPath||[]).unshift(x(e)),i)throw u;return function(e,t,n,r){var i=e.ngTempTokenPath;throw t.__source&&i.unshift(t.__source),e.message=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;var i=x(t);if(Array.isArray(t))i=t.map(x).join(" -> ");else if("object"==typeof t){var a=[];for(var o in t)if(t.hasOwnProperty(o)){var s=t[o];a.push(o+":"+("string"==typeof s?JSON.stringify(s):x(s)))}i="{".concat(a.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(e.replace(_n,"\n  "))}("\n"+e.message,i,"R3InjectorError",r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(u,e,0,this.source)}throw u}finally{z(a),Sn(i)}}},{key:"_resolveInjectorDefTypes",value:function(){var e=this;this.injectorDefTypes.forEach(function(t){return e.get(t)})}},{key:"toString",value:function(){var e=[];return this.records.forEach(function(t,n){return e.push(x(n))}),"R3Injector[".concat(e.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(e,t,n){var r=this;if(!(e=C(e)))return!1;var i=U(e),a=null==i&&e.ngModule||void 0,o=void 0===a?e:a,s=-1!==n.indexOf(o);if(void 0!==a&&(i=U(a)),null==i)return!1;if(null!=i.imports&&!s){var u;n.push(o);try{pn(i.imports,function(e){r.processInjectorType(e,t,n)&&(void 0===u&&(u=[]),u.push(e))})}finally{}if(void 0!==u)for(var c=function(e){var t=u[e],n=t.ngModule,i=t.providers;pn(i,function(e){return r.processProvider(e,n,i||ne)})},l=0;l<u.length;l++)c(l)}this.injectorDefTypes.add(o);var h=Ce(o)||function(){return new o};this.records.set(o,ba(h,da));var f=i.providers;if(null!=f&&!s){var d=e;pn(f,function(e){return r.processProvider(e,d,f)})}return void 0!==a&&void 0!==e.providers}},{key:"processProvider",value:function(e,t,n){var r=_a(e=C(e))?e:C(e&&e.provide),i=function(e,t,n){return wa(e)?ba(void 0,e.useValue):ba(ka(e),da)}(e);if(_a(e)||!0!==e.multi)this.records.get(r);else{var a=this.records.get(r);a||((a=ba(void 0,da,!0)).factory=function(){return Cn(a.multi)},this.records.set(r,a)),r=e,a.multi.push(e)}this.records.set(r,i)}},{key:"hydrate",value:function(e,t){var n;return t.value===da&&(t.value=pa,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}},{key:"injectableDefInScope",value:function(e){if(!e.providedIn)return!1;var t=C(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}]),e}();function ya(e){var t=M(e),n=null!==t?t.factory:Ce(e);if(null!==n)return n;if(e instanceof ln)throw new Error("Token ".concat(x(e)," is missing a \u0275prov definition."));if(e instanceof Function)return function(e){var t=e.length;if(t>0){var n=function(e,t){for(var n=[],r=0;r<e;r++)n.push("?");return n}(t);throw new Error("Can't resolve all parameters for ".concat(x(e),": (").concat(n.join(", "),")."))}var r=function(e){var t=e&&(e[q]||e[j]);if(t){var n=function(e){if(e.hasOwnProperty("name"))return e.name;var t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "').concat(n,'" class.')),t}return null}(e);return null!==r?function(){return r.factory(e)}:function(){return new e}}(e);throw new Error("unreachable")}function ka(e,t,n){var r,i;if(_a(e)){var a=C(e);return Ce(a)||ya(a)}if(wa(e))r=function(){return C(e.useValue)};else if((i=e)&&i.useFactory)r=function(){return e.useFactory.apply(e,u(Cn(e.deps||[])))};else if(function(e){return!(!e||!e.useExisting)}(e))r=function(){return In(C(e.useExisting))};else{var o=C(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return Ce(o)||ya(o);r=function(){return w(o,u(Cn(e.deps)))}}return r}function ba(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:e,value:t,multi:n?[]:void 0}}function wa(e){return null!==e&&"object"==typeof e&&xn in e}function _a(e){return"function"==typeof e}var xa=function(e,t,n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=ga(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)},Sa=function(){function e(){v(this,e)}return p(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?xa(e,t,""):xa(e.providers,e.parent,e.name||"")}}]),e}();function Ta(e,t){Tt(Tr(e)[1],tt())}function Ia(e){for(var t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0,r=[e];t;){var i=void 0;if(Ee(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);var a=e;a.inputs=Ea(e.inputs),a.declaredInputs=Ea(e.declaredInputs),a.outputs=Ea(e.outputs);var o=i.hostBindings;o&&Ra(e,o);var s=i.viewQuery,u=i.contentQueries;if(s&&Ca(e,s),u&&Aa(e,u),_(e.inputs,i.inputs),_(e.declaredInputs,i.declaredInputs),_(e.outputs,i.outputs),Ee(i)&&i.data.animation){var c=e.data;c.animation=(c.animation||[]).concat(i.data.animation)}}var l=i.features;if(l)for(var h=0;h<l.length;h++){var f=l[h];f&&f.ngInherit&&f(e),f===Ia&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){for(var t=0,n=null,r=e.length-1;r>=0;r--){var i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Lt(i.hostAttrs,n=Lt(n,i.hostAttrs))}}(r)}function Ea(e){return e===te?{}:e===ne?[]:e}function Ca(e,t){var n=e.viewQuery;e.viewQuery=n?function(e,r){t(e,r),n(e,r)}:t}function Aa(e,t){var n=e.contentQueries;e.contentQueries=n?function(e,r,i){t(e,r,i),n(e,r,i)}:t}function Ra(e,t){var n=e.hostBindings;e.hostBindings=n?function(e,r){t(e,r),n(e,r)}:t}Sa.THROW_IF_NOT_FOUND=wn,Sa.NULL=new ha,Sa.\u0275prov=N({token:Sa,providedIn:"any",factory:function(){return In(la)}}),Sa.__NG_ELEMENT_ID__=-1;var Da=null;function Pa(){if(!Da){var e=ee.Symbol;if(e&&e.iterator)Da=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Da=r)}}return Da}var Oa=function(){function e(t){v(this,e),this.wrapped=t}return p(e,null,[{key:"wrap",value:function(t){return new e(t)}},{key:"unwrap",value:function(t){return e.isWrapped(t)?t.wrapped:t}},{key:"isWrapped",value:function(t){return t instanceof e}}]),e}();function Na(e){return!!La(e)&&(Array.isArray(e)||!(e instanceof Map)&&Pa()in e)}function La(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Ma(e,t,n){return e[t]=n}function Za(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Ua(e,t,n,r){var i=$e();return Za(i,ct(),t)&&(Xe(),function(e,t,n,r,i,a){var o=je(e,t);!function(e,t,n,r,i,a,o){if(null==a)Ue(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{var s=null==o?D(a):o(a,r||"",i);Ue(e)?e.setAttribute(t,i,s,n):n?t.setAttributeNS(n,i,s):t.setAttribute(i,s)}}(t[11],o,a,e.value,n,r,i)}(St(),i,e,t,n,r)),Ua}function Fa(e,t,n,r){return Za(e,ct(),n)?t+D(n)+r:di}function qa(e,t,n,r,i,a,o,s){var u=$e(),c=Xe(),l=e+20,h=c.firstCreatePass?function(e,t,n,r,i,a,o,s,u){var c=t.consts,l=Si(t,e,4,o||null,Ke(c,s));Ui(t,n,l,Ke(c,u)),Tt(t,l);var h=l.tViews=Ni(2,l,r,i,a,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,l),h.queries=t.queries.embeddedTView(l)),l}(l,c,u,t,n,r,i,a,o):c.data[l];rt(h,!1);var f=u[11].createComment("");Wr(c,u,f,h),Sr(f,u),$i(u,u[l]=Wi(f,u,f,h)),Ie(h)&&Di(c,u,h),null!=o&&Pi(u,h,s)}function Va(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H.Default,n=$e();return null===n?In(e,t):Yt(tt(),n,C(e),t)}function ja(e,t,n){var r=$e();return Za(r,ct(),t)&&Zi(Xe(),St(),r,e,t,r[11],n,!1),ja}function Ba(e,t,n,r,i){var a=i?"class":"style";sa(e,n,t.inputs[a],a,r)}function Ha(e,t,n,r){var i=$e(),a=Xe(),o=20+e,s=i[11],u=i[o]=Fr(s,t,Ye.lFrame.currentNamespace),c=a.firstCreatePass?function(e,t,n,r,i,a,o){var s=t.consts,u=Si(t,e,2,i,Ke(s,a));return Ui(t,n,u,Ke(s,o)),null!==u.attrs&&ua(u,u.attrs,!1),null!==u.mergedAttrs&&ua(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(o,a,i,0,t,n,r):a.data[o];rt(c,!0);var l=c.mergedAttrs;null!==l&&Pt(s,u,l);var h=c.classes;null!==h&&ni(s,u,h);var f=c.styles;null!==f&&ti(s,u,f),64!=(64&c.flags)&&Wr(a,i,u,c),0===Ye.lFrame.elementDepthCount&&Sr(u,i),Ye.lFrame.elementDepthCount++,Ie(c)&&(Di(a,i,c),Ri(a,c,i)),null!==r&&Pi(i,c)}function za(){var e=tt();it()?at():rt(e=e.parent,!1);var t=e;Ye.lFrame.elementDepthCount--;var n=Xe();n.firstCreatePass&&(Tt(n,e),Se(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Ba(n,t,$e(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Ba(n,t,$e(),t.stylesWithoutHost,!1)}function Ga(e,t,n,r){Ha(e,t,n,r),za()}function Ka(e,t,n){var r=$e(),i=Xe(),a=e+20,o=i.firstCreatePass?function(e,t,n,r,i){var a=t.consts,o=Ke(a,r),s=Si(t,e,8,"ng-container",o);return null!==o&&ua(s,o,!0),Ui(t,n,s,Ke(a,i)),null!==t.queries&&t.queries.elementStart(t,s),s}(a,i,r,t,n):i.data[a];rt(o,!0);var s=r[a]=r[11].createComment("");Wr(i,r,s,o),Sr(s,r),Ie(o)&&(Di(i,r,o),Ri(i,o,r)),null!=n&&Pi(r,o)}function Wa(){var e=tt(),t=Xe();it()?at():rt(e=e.parent,!1),t.firstCreatePass&&(Tt(t,e),Se(e)&&t.queries.elementEnd(e))}function Ja(){return $e()}function Ya(e){return!!e&&"function"==typeof e.then}function Qa(e){return!!e&&"function"==typeof e.subscribe}var $a=Qa;function Xa(e,t,n,r){var i=$e(),a=Xe(),o=tt();return function(e,t,n,r,i,a,o,s){var u=Ie(r),c=e.firstCreatePass&&aa(e),l=ia(t),h=!0;if(3&r.type||s){var f=je(r,t),d=s?s(f):f,p=l.length,v=s?function(e){return s(qe(e[r.index]))}:r.index;if(Ue(n)){var g=null;if(!s&&u&&(g=function(e,t,n,r){var i=e.cleanup;if(null!=i)for(var a=0;a<i.length-1;a+=2){var o=i[a];if(o===n&&i[a+1]===r){var s=t[7],u=i[a+2];return s.length>u?s[u]:null}"string"==typeof o&&(a+=2)}return null}(e,t,i,r.index)),null!==g)(g.__ngLastListenerFn__||g).__ngNextListenerFn__=a,g.__ngLastListenerFn__=a,h=!1;else{a=to(r,t,0,a,!1);var m=n.listen(d,i,a);l.push(a,m),c&&c.push(i,v,p,p+1)}}else a=to(r,t,0,a,!0),d.addEventListener(i,a,o),l.push(a),c&&c.push(i,v,p,o)}else a=to(r,t,0,a,!1);var y,k=r.outputs;if(h&&null!==k&&(y=k[i])){var b=y.length;if(b)for(var w=0;w<b;w+=2){var _=t[y[w]][y[w+1]].subscribe(a),x=l.length;l.push(a,_),c&&c.push(i,r.index,x,-(x+1))}}}(a,i,i[11],o,e,t,!!n,r),Xa}function eo(e,t,n,r){try{return!1!==n(r)}catch(i){return oa(e,i),!1}}function to(e,t,n,r,i){return function n(a){if(a===Function)return r;var o=2&e.flags?He(e.index,t):t;0==(32&t[2])&&Xi(o);for(var s=eo(t,0,r,a),u=n.__ngNextListenerFn__;u;)s=eo(t,0,u,a)&&s,u=u.__ngNextListenerFn__;return i&&!1===s&&(a.preventDefault(),a.returnValue=!1),s}}function no(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(e){return(Ye.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,Ye.lFrame.contextLView))[8]}(e)}function ro(e,t,n){return io(e,"",t,"",n),ro}function io(e,t,n,r,i){var a=$e(),o=Fa(a,t,n,r);return o!==di&&Zi(Xe(),St(),a,e,o,a[11],i,!1),io}function ao(e,t,n,r,i){for(var a=e[n+1],o=null===t,s=r?mi(a):ki(a),u=!1;0!==s&&(!1===u||o);){var c=e[s+1];oo(e[s],t)&&(u=!0,e[s+1]=r?wi(c):yi(c)),s=r?mi(c):ki(c)}u&&(e[n+1]=r?yi(a):wi(a))}function oo(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&kn(e,t)>=0}var so={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function uo(e){return e.substring(so.key,so.keyEnd)}function co(e){return e.substring(so.value,so.valueEnd)}function lo(e,t){var n=so.textEnd;return n===t?-1:(t=so.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,so.key=t,n),po(e,t,n))}function ho(e,t){var n=so.textEnd,r=so.key=po(e,t,n);return n===r?-1:(r=so.keyEnd=function(e,t,n){for(var r;t<n&&(45===(r=e.charCodeAt(t))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)t++;return t}(e,r,n),r=vo(e,r,n),r=so.value=po(e,r,n),r=so.valueEnd=function(e,t,n){for(var r=-1,i=-1,a=-1,o=t,s=o;o<n;){var u=e.charCodeAt(o++);if(59===u)return s;34===u||39===u?s=o=go(e,u,o,n):t===o-4&&85===a&&82===i&&76===r&&40===u?s=o=go(e,41,o,n):u>32&&(s=o),a=i,i=r,r=-33&u}return s}(e,r,n),vo(e,r,n))}function fo(e){so.key=0,so.keyEnd=0,so.value=0,so.valueEnd=0,so.textEnd=e.length}function po(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function vo(e,t,n,r){return(t=po(e,t,n))<n&&t++,t}function go(e,t,n,r){for(var i=-1,a=n;a<r;){var o=e.charCodeAt(a++);if(o==t&&92!==i)return a;i=92==o&&92===i?0:o}throw new Error}function mo(e,t){return function(e,t,n,r){var i=$e(),a=Xe(),o=lt(2);a.firstUpdatePass&&xo(a,e,o,!0),t!==di&&Za(i,o,t)&&Eo(a,a.data[_t()],i,i[11],e,i[o+1]=function(e,t){return null==e||"object"==typeof e&&(e=x(Bn(e))),e}(t),!0,o)}(e,t),mo}function yo(e){wo(Io,ko,e,!1)}function ko(e,t){for(var n=function(e){return fo(e),ho(e,po(e,0,so.textEnd))}(t);n>=0;n=ho(t,n))Io(e,uo(t),co(t))}function bo(e,t){for(var n=function(e){return fo(e),lo(e,po(e,0,so.textEnd))}(t);n>=0;n=lo(t,n))mn(e,uo(t),!0)}function wo(e,t,n,r){var i=Xe(),a=lt(2);i.firstUpdatePass&&xo(i,null,a,r);var o=$e();if(n!==di&&Za(o,a,n)){var s=i.data[_t()];if(Ro(s,r)&&!_o(i,a)){var u=r?s.classesWithoutHost:s.stylesWithoutHost;null!==u&&(n=T(u,n||"")),Ba(i,s,o,n,r)}else!function(e,t,n,r,i,a,o,s){i===di&&(i=ne);for(var u=0,c=0,l=0<i.length?i[0]:null,h=0<a.length?a[0]:null;null!==l||null!==h;){var f=u<i.length?i[u+1]:void 0,d=c<a.length?a[c+1]:void 0,p=void 0,v=null;l===h?(u+=2,c+=2,f!==d&&(v=h,p=d)):null===h||null!==l&&l<h?(u+=2,v=l):(c+=2,v=h,p=d),null!==v&&Eo(e,t,n,r,v,p,o,s),l=u<i.length?i[u]:null,h=c<a.length?a[c]:null}}(i,s,o,o[11],o[a+1],o[a+1]=function(e,t,n){if(null==n||""===n)return ne;var r=[],i=Bn(n);if(Array.isArray(i))for(var a=0;a<i.length;a++)e(r,i[a],!0);else if("object"==typeof i)for(var o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else"string"==typeof i&&t(r,i);return r}(e,t,n),r,a)}}function _o(e,t){return t>=e.expandoStartIndex}function xo(e,t,n,r){var i=e.data;if(null===i[n+1]){var a=i[_t()],o=_o(e,n);Ro(a,r)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){var i=function(e){var t=Ye.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e),a=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=To(n=So(null,e,t,n,r),t.attrs,r),a=null);else{var o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=So(i,e,t,n,r),null===a){var s=function(e,t,n){var r=n?t.classBindings:t.styleBindings;if(0!==ki(r))return e[mi(r)]}(e,t,r);void 0!==s&&Array.isArray(s)&&function(e,t,n,r){e[mi(n?t.classBindings:t.styleBindings)]=r}(e,t,r,s=To(s=So(null,e,t,s[1],r),t.attrs,r))}else a=function(e,t,n){for(var r,i=t.directiveEnd,a=1+t.directiveStylingLast;a<i;a++)r=To(r,e[a].hostAttrs,n);return To(r,t.attrs,n)}(e,t,r)}return void 0!==a&&(r?t.residualClasses=a:t.residualStyles=a),n}(i,a,t,r),function(e,t,n,r,i,a){var o=a?t.classBindings:t.styleBindings,s=mi(o),u=ki(o);e[r]=n;var c,l=!1;if(Array.isArray(n)){var h=n;(null===(c=h[1])||kn(h,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){var f=mi(e[s+1]);e[r+1]=gi(f,s),0!==f&&(e[f+1]=bi(e[f+1],r)),e[s+1]=131071&e[s+1]|r<<17}else e[r+1]=gi(s,0),0!==s&&(e[s+1]=bi(e[s+1],r)),s=r;else e[r+1]=gi(u,0),0===s?s=r:e[u+1]=bi(e[u+1],r),u=r;l&&(e[r+1]=yi(e[r+1])),ao(e,c,r,!0),ao(e,c,r,!1),function(e,t,n,r,i){var a=i?e.residualClasses:e.residualStyles;null!=a&&"string"==typeof t&&kn(a,t)>=0&&(n[r+1]=wi(n[r+1]))}(t,c,e,r,a),o=gi(s,u),a?t.classBindings=o:t.styleBindings=o}(i,a,t,n,o,r)}}function So(e,t,n,r,i){var a=null,o=n.directiveEnd,s=n.directiveStylingLast;for(-1===s?s=n.directiveStart:s++;s<o&&(r=To(r,(a=t[s]).hostAttrs,i),a!==e);)s++;return null!==e&&(n.directiveStylingLast=s),r}function To(e,t,n){var r=n?1:2,i=-1;if(null!==t)for(var a=0;a<t.length;a++){var o=t[a];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),mn(e,o,!!n||t[++a]))}return void 0===e?null:e}function Io(e,t,n){mn(e,t,Bn(n))}function Eo(e,t,n,r,i,a,o,s){if(3&t.type){var u=e.data,c=u[s+1];Ao(1==(1&c)?Co(u,t,n,i,ki(c),o):void 0)||(Ao(a)||2==(2&c)&&(a=Co(u,null,n,i,s,o)),function(e,t,n,r,i){var a=Ue(e);if(t)i?a?e.addClass(n,r):n.classList.add(r):a?e.removeClass(n,r):n.classList.remove(r);else{var o=-1===r.indexOf("-")?void 0:Pr.DashCase;if(null==i)a?e.removeStyle(n,r,o):n.style.removeProperty(r);else{var s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),o|=Pr.Important),a?e.setStyle(n,r,i,o):n.style.setProperty(r,i,s?"important":"")}}}(r,o,Ve(_t(),n),i,a))}}function Co(e,t,n,r,i,a){for(var o,s=null===t;i>0;){var u=e[i],c=Array.isArray(u),l=c?u[1]:u,h=null===l,f=n[i+1];f===di&&(f=h?ne:void 0);var d=h?yn(f,r):l===r?f:void 0;if(c&&!Ao(d)&&(d=yn(u,r)),Ao(d)&&(o=d,s))return o;var p=e[i+1];i=s?mi(p):ki(p)}if(null!==t){var v=a?t.residualClasses:t.residualStyles;null!=v&&(o=yn(v,r))}return o}function Ao(e){return void 0!==e}function Ro(e,t){return 0!=(e.flags&(t?16:32))}function Do(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=$e(),r=Xe(),i=e+20,a=r.firstCreatePass?Si(r,i,1,t,null):r.data[i],o=n[i]=function(e,t){return Ue(e)?e.createText(t):e.createTextNode(t)}(n[11],t);Wr(r,n,o,a),rt(a,!1)}function Po(e){return Oo("",e,""),Po}function Oo(e,t,n){var r=$e(),i=Fa(r,e,t,n);return i!==di&&function(e,t,n){var r=Ve(t,e);!function(e,t,n){Ue(e)?e.setValue(t,n):t.textContent=n}(e[11],r,n)}(r,_t(),i),Oo}function No(e,t,n){wo(mn,bo,Fa($e(),e,t,n),!0)}function Lo(e,t,n){var r=$e();return Za(r,ct(),t)&&Zi(Xe(),St(),r,e,t,r[11],n,!0),Lo}var Mo=void 0,Zo=["en",[["a","p"],["AM","PM"],Mo],[["AM","PM"],Mo,Mo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Mo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Mo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Mo,"{1} 'at' {0}",Mo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],Uo={};function Fo(e){var t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e),n=Vo(t);if(n)return n;var r=t.split("-")[0];if(n=Vo(r))return n;if("en"===r)return Zo;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}function qo(e){return Fo(e)[jo.PluralCase]}function Vo(e){return e in Uo||(Uo[e]=ee.ng&&ee.ng.common&&ee.ng.common.locales&&ee.ng.common.locales[e]),Uo[e]}var jo=((jo=jo||{})[jo.LocaleId=0]="LocaleId",jo[jo.DayPeriodsFormat=1]="DayPeriodsFormat",jo[jo.DayPeriodsStandalone=2]="DayPeriodsStandalone",jo[jo.DaysFormat=3]="DaysFormat",jo[jo.DaysStandalone=4]="DaysStandalone",jo[jo.MonthsFormat=5]="MonthsFormat",jo[jo.MonthsStandalone=6]="MonthsStandalone",jo[jo.Eras=7]="Eras",jo[jo.FirstDayOfWeek=8]="FirstDayOfWeek",jo[jo.WeekendRange=9]="WeekendRange",jo[jo.DateFormat=10]="DateFormat",jo[jo.TimeFormat=11]="TimeFormat",jo[jo.DateTimeFormat=12]="DateTimeFormat",jo[jo.NumberSymbols=13]="NumberSymbols",jo[jo.NumberFormats=14]="NumberFormats",jo[jo.CurrencyCode=15]="CurrencyCode",jo[jo.CurrencySymbol=16]="CurrencySymbol",jo[jo.CurrencyName=17]="CurrencyName",jo[jo.Currencies=18]="Currencies",jo[jo.Directionality=19]="Directionality",jo[jo.PluralCase=20]="PluralCase",jo[jo.ExtraData=21]="ExtraData",jo);function Bo(e){var t;null==(t=e)&&function(e,t,n,r){throw new Error("ASSERTION ERROR: ".concat("Expected localeId to be defined"," [Expected=> null != ").concat(t," <=Actual]"))}(0,t),"string"==typeof e&&e.toLowerCase().replace(/_/g,"-")}function Ho(e,t,n,r,i){if(e=C(e),Array.isArray(e))for(var a=0;a<e.length;a++)Ho(e[a],t,n,r,i);else{var o=Xe(),s=$e(),u=_a(e)?e:C(e.provide),c=ka(e),l=tt(),h=1048575&l.providerIndexes,f=l.directiveStart,d=l.providerIndexes>>20;if(_a(e)||!e.multi){var p=new Dt(c,i,Va),v=Ko(u,t,i?h:h+d,f);-1===v?(Kt(Bt(l,s),o,u),zo(o,e,t.length),t.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(p),s.push(p)):(n[v]=p,s[v]=p)}else{var g=Ko(u,t,h+d,f),m=Ko(u,t,h,h+d),y=g>=0&&n[g],k=m>=0&&n[m];if(i&&!k||!i&&!y){Kt(Bt(l,s),o,u);var b=function(e,t,n,r,i){var a=new Dt(e,n,Va);return a.multi=[],a.index=t,a.componentProviders=0,Go(a,i,r&&!n),a}(i?Jo:Wo,n.length,i,r,c);!i&&k&&(n[m].providerFactory=b),zo(o,e,t.length,0),t.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(b),s.push(b)}else zo(o,e,g>-1?g:m,Go(n[i?m:g],c,!i&&r));!i&&r&&k&&n[m].componentProviders++}}}function zo(e,t,n,r){var i=_a(t);if(i||t.useClass){var a=(t.useClass||t).prototype.ngOnDestroy;if(a){var o=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){var s=o.indexOf(n);-1===s?o.push(n,[r,a]):o[s+1].push(r,a)}else o.push(n,a)}}}function Go(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Ko(e,t,n,r){for(var i=n;i<r;i++)if(t[i]===e)return i;return-1}function Wo(e,t,n,r){return Yo(this.multi,[])}function Jo(e,t,n,r){var i,a=this.multi;if(this.providerFactory){var o=this.providerFactory.componentProviders,s=tn(n,n[1],this.providerFactory.index,r);Yo(a,i=s.slice(0,o));for(var u=o;u<s.length;u++)i.push(s[u])}else Yo(a,i=[]);return i}function Yo(e,t){for(var n=0;n<e.length;n++)t.push((0,e[n])());return t}function Qo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,r){return function(e,t,n){var r=Xe();if(r.firstCreatePass){var i=Ee(e);Ho(n,r.data,r.blueprint,i,!0),Ho(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}}var $o=p(function e(){v(this,e)}),Xo=function(){function e(){v(this,e)}return p(e,[{key:"resolveComponentFactory",value:function(e){throw function(e){var t=Error("No component factory found for ".concat(x(e),". Did you add it to @NgModule.entryComponents?"));return t.ngComponent=e,t}(e)}}]),e}(),es=p(function e(){v(this,e)});function ts(){}function ns(e,t){return new is(je(e,t))}es.NULL=new Xo;var rs=function(){return ns(tt(),$e())},is=function(){var e=p(function e(t){v(this,e),this.nativeElement=t});return e.__NG_ELEMENT_ID__=rs,e}();function as(e){return e instanceof is?e.nativeElement:e}var os=p(function e(){v(this,e)}),ss=function(){var e=p(function e(){v(this,e)});return e.__NG_ELEMENT_ID__=function(){return us()},e}(),us=function(){var e=$e(),t=He(tt().index,e);return function(e){return e[11]}(_e(t)?t:e)},cs=function(){var e=p(function e(){v(this,e)});return e.\u0275prov=N({token:e,providedIn:"root",factory:function(){return null}}),e}(),ls=p(function e(t){v(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}),hs=new ls("12.1.5"),fs=function(){function e(){v(this,e)}return p(e,[{key:"supports",value:function(e){return Na(e)}},{key:"create",value:function(e){return new ps(e)}}]),e}(),ds=function(e,t){return t},ps=function(){function e(t){v(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ds}return p(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,n=this._removalsHead,r=0,i=null;t||n;){var a=!n||t&&t.currentIndex<ys(n,r,i)?t:n,o=ys(a,r,i),s=a.currentIndex;if(a===n)r--,n=n._nextRemoved;else if(t=t._next,null==a.previousIndex)r++;else{i||(i=[]);var u=o-r,c=s-r;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<u&&(i[l]=h+1)}i[a.previousIndex]=c-u}}o!==s&&e(a,o,s)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!Na(e))throw new Error("Error trying to diff '".concat(x(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n,r,i,a=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(var s=0;s<this.length;s++)r=e[s],i=this._trackByFn(s,r),null!==a&&Object.is(a.trackById,i)?(o&&(a=this._verifyReinsertion(a,r,i,s)),Object.is(a.item,r)||this._addIdentityChange(a,r)):(a=this._mismatch(a,r,i,s),o=!0),a=a._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r,i=e[Pa()]();!(r=i.next()).done;)t(r.value)}(e,function(e){i=t._trackByFn(n,e),null!==a&&Object.is(a.trackById,i)?(o&&(a=t._verifyReinsertion(a,e,i,n)),Object.is(a.item,e)||t._addIdentityChange(a,e)):(a=t._mismatch(a,e,i,n),o=!0),a=a._next,n++}),this.length=n;return this._truncate(a),this.collection=e,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,n,r){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new vs(t,n),i,r),e}},{key:"_verifyReinsertion",value:function(e,t,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_moveAfter",value:function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_addAfter",value:function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new ms),this._linkedRecords.put(e),e.currentIndex=n,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ms),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}]),e}(),vs=p(function e(t,n){v(this,e),this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}),gs=function(){function e(){v(this,e),this._head=null,this._tail=null}return p(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}},{key:"remove",value:function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}]),e}(),ms=function(){function e(){v(this,e),this.map=new Map}return p(e,[{key:"put",value:function(e){var t=e.trackById,n=this.map.get(t);n||(n=new gs,this.map.set(t,n)),n.add(e)}},{key:"get",value:function(e,t){var n=this.map.get(e);return n?n.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),e}();function ys(e,t,n){var r=e.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+t+i}var ks=function(){function e(){v(this,e)}return p(e,[{key:"supports",value:function(e){return e instanceof Map||La(e)}},{key:"create",value:function(){return new bs}}]),e}(),bs=function(){function e(){v(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return p(e,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||La(e)))throw new Error("Error trying to diff '".concat(x(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var i=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var a=new ws(e);return this._records.set(e,a),a.currentValue=t,this._addToAdditions(a),a}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(function(n){return t(e[n],n)})}}]),e}(),ws=p(function e(t){v(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null});function _s(){return new xs([new fs])}var xs=function(){var e=function(){function e(t){v(this,e),this.factories=t}return p(e,[{key:"find",value:function(e){var t,n=this.factories.find(function(t){return t.supports(e)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'"))}}],[{key:"create",value:function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){return e.create(t,n||_s())},deps:[[e,new Nn,new On]]}}}]),e}();return e.\u0275prov=N({token:e,providedIn:"root",factory:_s}),e}();function Ss(){return new Ts([new ks])}var Ts=function(){var e=function(){function e(t){v(this,e),this.factories=t}return p(e,[{key:"find",value:function(e){var t=this.factories.find(function(t){return t.supports(e)});if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){return e.create(t,n||Ss())},deps:[[e,new Nn,new On]]}}}]),e}();return e.\u0275prov=N({token:e,providedIn:"root",factory:Ss}),e}();function Is(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==n;){var a=t[n.index];if(null!==a&&r.push(qe(a)),xe(a))for(var o=10;o<a.length;o++){var s=a[o],c=s[1].firstChild;null!==c&&Is(s[1],s,c,r)}var l=n.type;if(8&l)Is(e,t,n.child,r);else if(32&l)for(var h=Or(n,t),f=void 0;f=h();)r.push(f);else if(16&l){var d=Yr(t,n);if(Array.isArray(d))r.push.apply(r,u(d));else{var p=Nr(t[16]);Is(p[1],p,d,r,!0)}}n=i?n.projectionNext:n.next}return r}var Es=function(){function e(t,n){v(this,e),this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}return p(e,[{key:"rootNodes",get:function(){var e=this._lView,t=e[1];return Is(t,e,t.firstChild,[])}},{key:"context",get:function(){return this._lView[8]},set:function(e){this._lView[8]=e}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){var e=this._lView[3];if(xe(e)){var t=e[8],n=t?t.indexOf(this):-1;n>-1&&(Vr(e,n),gn(t,n))}this._attachedToViewContainer=!1}jr(this._lView[1],this._lView)}},{key:"onDestroy",value:function(e){Li(this._lView[1],this._lView,null,e)}},{key:"markForCheck",value:function(){Xi(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){ea(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(e,t,n){st(!0);try{ea(e,t,n)}finally{st(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}},{key:"detachFromAppRef",value:function(){var e;this._appRef=null,Xr(this._lView[1],e=this._lView,e[11],2,null,null)}},{key:"attachToAppRef",value:function(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}]),e}(),Cs=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e))._view=e,r}return p(n,[{key:"detectChanges",value:function(){ta(this._view)}},{key:"checkNoChanges",value:function(){!function(e){st(!0);try{ta(e)}finally{st(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(Es),As=function(e){return function(e,t,n){if(Te(e)&&!n){var r=He(e.index,t);return new Es(r,r)}return 47&e.type?new Es(t[16],t):null}(tt(),$e(),16==(16&e))},Rs=function(){var e=p(function e(){v(this,e)});return e.__NG_ELEMENT_ID__=As,e}(),Ds=[new ks],Ps=new xs([new fs]),Os=new Ts(Ds),Ns=function(){return Zs(tt(),$e())},Ls=function(){var e=p(function e(){v(this,e)});return e.__NG_ELEMENT_ID__=Ns,e}(),Ms=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this))._declarationLView=e,a._declarationTContainer=r,a.elementRef=i,a}return p(n,[{key:"createEmbeddedView",value:function(e){var t=this._declarationTContainer.tViews,n=xi(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];var r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),Ii(t,n,e),new Es(n)}}]),n}(Ls);function Zs(e,t){return 4&e.type?new Ms(t,e,ns(e,t)):null}var Us=p(function e(){v(this,e)}),Fs=p(function e(){v(this,e)}),qs=function(){return zs(tt(),$e())},Vs=function(){var e=p(function e(){v(this,e)});return e.__NG_ELEMENT_ID__=qs,e}(),js=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this))._lContainer=e,a._hostTNode=r,a._hostLView=i,a}return p(n,[{key:"element",get:function(){return ns(this._hostTNode,this._hostLView)}},{key:"injector",get:function(){return new an(this._hostTNode,this._hostLView)}},{key:"parentInjector",get:function(){var e=Gt(this._hostTNode,this._hostLView);if(Zt(e)){var t=Ft(e,this._hostLView),n=Ut(e);return new an(t[1].data[n+8],t)}return new an(null,this._hostLView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(e){var t=Bs(this._lContainer);return null!==t&&t[e]||null}},{key:"length",get:function(){return this._lContainer.length-10}},{key:"createEmbeddedView",value:function(e,t,n){var r=e.createEmbeddedView(t||{});return this.insert(r,n),r}},{key:"createComponent",value:function(e,t,n,r,i){var a=n||this.parentInjector;if(!i&&null==e.ngModule&&a){var o=a.get(Us,null);o&&(i=o)}var s=e.create(a,r,void 0,i);return this.insert(s.hostView,t),s}},{key:"insert",value:function(e,t){var r=e._lView,i=r[1];if(xe(r[3])){var a=this.indexOf(e);if(-1!==a)this.detach(a);else{var o=r[3],s=new n(o,o[6],o[3]);s.detach(s.indexOf(e))}}var u=this._adjustIndex(t),c=this._lContainer;!function(e,t,n,r){var i=10+r,a=n.length;r>0&&(n[i-1][4]=t),r<a-10?(t[4]=n[i],vn(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;var o=t[17];null!==o&&n!==o&&function(e,t){var n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);var s=t[19];null!==s&&s.insertView(e),t[2]|=128}(i,r,c,u);var l=Qr(u,c),h=r[11],f=Kr(h,c[7]);return null!==f&&function(e,t,n,r,i,a){r[0]=i,r[6]=t,Xr(e,r,n,1,i,a)}(i,c[6],h,r,f,l),e.attachToViewContainerRef(),vn(Hs(c),u,e),e}},{key:"move",value:function(e,t){return this.insert(e,t)}},{key:"indexOf",value:function(e){var t=Bs(this._lContainer);return null!==t?t.indexOf(e):-1}},{key:"remove",value:function(e){var t=this._adjustIndex(e,-1),n=Vr(this._lContainer,t);n&&(gn(Hs(this._lContainer),t),jr(n[1],n))}},{key:"detach",value:function(e){var t=this._adjustIndex(e,-1),n=Vr(this._lContainer,t);return n&&null!=gn(Hs(this._lContainer),t)?new Es(n):null}},{key:"_adjustIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e?this.length+t:e}}]),n}(Vs);function Bs(e){return e[8]}function Hs(e){return e[8]||(e[8]=[])}function zs(e,t){var n,r=t[e.index];if(xe(r))n=r;else{var i;if(8&e.type)i=qe(r);else{var a=t[11];i=a.createComment("");var o=je(e,t);Hr(a,Kr(a,o),i,function(e,t){return Ue(e)?e.nextSibling(t):t.nextSibling}(a,o),!1)}t[e.index]=n=Wi(r,t,i,e),$i(t,n)}return new js(n,e,t)}var Gs={},Ks=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this)).ngModule=e,r}return p(n,[{key:"resolveComponentFactory",value:function(e){var t=be(e);return new Ys(t,this.ngModule)}}]),n}(es);function Ws(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}var Js=new ln("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return Ar}}),Ys=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).componentDef=e,i.ngModule=r,i.componentType=e.type,i.selector=e.selectors.map(fi).join(","),i.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],i.isBoundToModule=!!r,i}return p(n,[{key:"inputs",get:function(){return Ws(this.componentDef.inputs)}},{key:"outputs",get:function(){return Ws(this.componentDef.outputs)}},{key:"create",value:function(e,t,n,r){var i,a,o=(r=r||this.ngModule)?function(e,t){return{get:function(n,r,i){var a=e.get(n,Gs,i);return a!==Gs||r===Gs?a:t.get(n,r,i)}}}(e,r.injector):e,s=o.get(os,Fe),u=o.get(cs,null),c=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",h=n?function(e,t,n){if(Ue(e))return e.selectRootElement(t,n===J.ShadowDom);var r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(c,n,this.componentDef.encapsulation):Fr(s.createRenderer(null,this.componentDef),l,function(e){var t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),f=this.componentDef.onPush?576:528,d={components:[],scheduler:Ar,clean:ra,playerHandler:null,flags:0},p=Ni(0,null,null,1,0,null,null,null,null,null),v=xi(null,p,d,f,null,null,s,c,u,o);gt(v);try{var g=function(e,t,n,r,i,a){var o=n[1];n[20]=e;var s=Si(o,20,2,"#host",null),u=s.mergedAttrs=t.hostAttrs;null!==u&&(ua(s,u,!0),null!==e&&(Pt(i,e,u),null!==s.classes&&ni(i,e,s.classes),null!==s.styles&&ti(i,e,s.styles)));var c=r.createRenderer(e,t),l=xi(n,Oi(t),null,t.onPush?64:16,n[20],s,r,c,null,null);return o.firstCreatePass&&(Kt(Bt(s,n),o,t.type),Vi(o,s),Bi(s,n.length,1)),$i(n,l),n[20]=l}(h,this.componentDef,v,s,c);if(h)if(n)Pt(c,h,["ng-version",hs.full]);else{var m=function(e){for(var t=[],n=[],r=1,i=2;r<e.length;){var a=e[r];if("string"==typeof a)2===i?""!==a&&t.push(a,e[++r]):8===i&&n.push(a);else{if(!ui(i))break;i=a}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]),y=m.attrs,k=m.classes;y&&Pt(c,h,y),k&&k.length>0&&ni(c,h,k.join(" "))}if(a=Be(p,20),void 0!==t)for(var b=a.projection=[],w=0;w<this.ngContentSelectors.length;w++){var _=t[w];b.push(null!=_?Array.from(_):null)}i=function(e,t,n,r,i){var a=n[1],o=function(e,t,n){var r=tt();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Hi(e,r,t,Ti(e,t,1,null),n));var i=tn(t,e,r.directiveStart,r);Sr(i,t);var a=je(r,t);return a&&Sr(a,t),i}(a,n,t);if(r.components.push(o),e[8]=o,i&&i.forEach(function(e){return e(o,t)}),t.contentQueries){var s=tt();t.contentQueries(1,o,s.directiveStart)}var u=tt();return!a.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(xt(u.index),Fi(n[1],u,0,u.directiveStart,u.directiveEnd,t),qi(t,o)),o}(g,this.componentDef,v,d,[Ta]),Ii(p,v,null)}finally{wt()}return new Qs(this.componentType,i,ns(a,v),v,a)}}]),n}($o),Qs=function(e){g(n,e);var t=m(n);function n(e,r,i,a,o){var s;return v(this,n),(s=t.call(this)).location=i,s._rootLView=a,s._tNode=o,s.instance=r,s.hostView=s.changeDetectorRef=new Cs(a),s.componentType=e,s}return p(n,[{key:"injector",get:function(){return new an(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.hostView.destroy()}},{key:"onDestroy",value:function(e){this.hostView.onDestroy(e)}}]),n}(function(){return p(function e(){v(this,e)})}()),$s=new Map,Xs=function(e){g(n,e);var t=m(n);function n(e,r){var i;v(this,n),(i=t.call(this))._parent=r,i._bootstrapComponents=[],i.injector=k(i),i.destroyCbs=[],i.componentFactoryResolver=new Ks(k(i));var a=we(e),o=e[se]||null;return o&&Bo(o),i._bootstrapComponents=Dr(a.bootstrap),i._r3Injector=ga(e,r,[{provide:Us,useValue:k(i)},{provide:es,useValue:i.componentFactoryResolver}],x(e)),i._r3Injector._resolveInjectorDefTypes(),i.instance=i.get(e),i}return p(n,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sa.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H.Default;return e===Sa||e===Us||e===la?this:this._r3Injector.get(e,t,n)}},{key:"destroy",value:function(){var e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(function(e){return e()}),this.destroyCbs=null}},{key:"onDestroy",value:function(e){this.destroyCbs.push(e)}}]),n}(Us),eu=function(e){g(n,e);var t=m(n);function n(e){var r,i,a;return v(this,n),(r=t.call(this)).moduleType=e,null!==we(e)&&(i=e,a=new Set,function e(t){var n=we(t,!0),r=n.id;null!==r&&(function(e,t,n){if(t&&t!==n)throw new Error("Duplicate module registered for ".concat(e," - ").concat(x(t)," vs ").concat(x(t.name)))}(r,$s.get(r),t),$s.set(r,t));var i,o=l(Dr(n.imports));try{for(o.s();!(i=o.n()).done;){var s=i.value;a.has(s)||(a.add(s),e(s))}}catch(u){o.e(u)}finally{o.f()}}(i)),r}return p(n,[{key:"create",value:function(e){return new Xs(this.moduleType,e)}}]),n}(Fs);function tu(e,t,n){var r=ut()+e,i=$e();return i[r]===di?Ma(i,r,n?t.call(n):t()):function(e,t){return e[t]}(i,r)}function nu(e,t,n,r){return ru($e(),ut(),e,t,n,r)}function ru(e,t,n,r,i,a){var o=t+n;return Za(e,o,i)?Ma(e,o+1,a?r.call(a,i):r(i)):function(e,t){var n=e[t];return n===di?void 0:n}(e,o+1)}function iu(e,t){var n,r=Xe(),i=e+20;r.firstCreatePass?(n=function(e,t){if(t)for(var n=t.length-1;n>=0;n--){var r=t[n];if(e===r.name)return r}throw new R("302","The pipe '".concat(e,"' could not be found!"))}(t,r.pipeRegistry),r.data[i]=n,n.onDestroy&&(r.destroyHooks||(r.destroyHooks=[])).push(i,n.onDestroy)):n=r.data[i];var a=n.factory||(n.factory=Ce(n.type)),o=z(Va);try{var s=Vt(!1),u=a();return Vt(s),function(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(r,$e(),i,u),u}finally{z(o)}}function au(e,t,n){var r=e+20,i=$e(),a=function(e,t){return e[t]}(i,r);return function(e,t){return Oa.isWrapped(t)&&(t=Oa.unwrap(t),e[Ye.lFrame.bindingIndex]=di),t}(i,function(e,t){return e[1].data[t].pure}(i,r)?ru(i,ut(),t,a.transform,n,a):a.transform(n))}function ou(e){return function(t){setTimeout(e,void 0,t)}}var su=function(e){g(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return v(this,n),(e=t.call(this)).__isAsync=r,e}return p(n,[{key:"emit",value:function(e){o(S(n.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,t,r){var i,s,u,c=e,l=t||function(){return null},h=r;if(e&&"object"==typeof e){var f=e;c=null===(i=f.next)||void 0===i?void 0:i.bind(f),l=null===(s=f.error)||void 0===s?void 0:s.bind(f),h=null===(u=f.complete)||void 0===u?void 0:u.bind(f)}this.__isAsync&&(l=ou(l),c&&(c=ou(c)),h&&(h=ou(h)));var d=o(S(n.prototype),"subscribe",this).call(this,{next:c,error:l,complete:h});return e instanceof a.w&&e.add(d),d}}]),n}(i.xQ);function uu(){return this._results[Pa()]()}var cu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];v(this,e),this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;var n=Pa(),r=e.prototype;r[n]||(r[n]=uu)}return p(e,[{key:"changes",get:function(){return this._changes||(this._changes=new su)}},{key:"get",value:function(e){return this._results[e]}},{key:"map",value:function(e){return this._results.map(e)}},{key:"filter",value:function(e){return this._results.filter(e)}},{key:"find",value:function(e){return this._results.find(e)}},{key:"reduce",value:function(e,t){return this._results.reduce(e,t)}},{key:"forEach",value:function(e){this._results.forEach(e)}},{key:"some",value:function(e){return this._results.some(e)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(e,t){this.dirty=!1;var n=dn(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var i=e[r],a=t[r];if(n&&(i=n(i),a=n(a)),a!==i)return!1}return!0}(this._results,n,t))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}},{key:"notifyOnChanges",value:function(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),e}();Symbol;var lu=function(){function e(t){v(this,e),this.queryList=t,this.matches=null}return p(e,[{key:"clone",value:function(){return new e(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),e}(),hu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];v(this,e),this.queries=t}return p(e,[{key:"createEmbeddedView",value:function(t){var n=t.queries;if(null!==n){for(var r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[],a=0;a<r;a++){var o=n.getByIndex(a);i.push(this.queries[o.indexInDeclarationView].clone())}return new e(i)}return null}},{key:"insertView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"detachView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"dirtyQueriesWithMatches",value:function(e){for(var t=0;t<this.queries.length;t++)null!==Tu(e,t).matches&&this.queries[t].setDirty()}}]),e}(),fu=p(function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;v(this,e),this.predicate=t,this.flags=n,this.read=r}),du=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];v(this,e),this.queries=t}return p(e,[{key:"elementStart",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}},{key:"elementEnd",value:function(e){for(var t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}},{key:"embeddedTView",value:function(t){for(var n=null,r=0;r<this.length;r++){var i=null!==n?n.length:0,a=this.getByIndex(r).embeddedTView(t,i);a&&(a.indexInDeclarationView=r,null!==n?n.push(a):n=[a])}return null!==n?new e(n):null}},{key:"template",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}},{key:"getByIndex",value:function(e){return this.queries[e]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(e){this.queries.push(e)}}]),e}(),pu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;v(this,e),this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return p(e,[{key:"elementStart",value:function(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}},{key:"elementEnd",value:function(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(e,t){this.elementStart(e,t)}},{key:"embeddedTView",value:function(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}},{key:"isApplyingToNode",value:function(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){for(var t=this._declarationNodeIndex,n=e.parent;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(e,t){var n=this.metadata.predicate;if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];this.matchTNodeWithReadOption(e,t,vu(t,i)),this.matchTNodeWithReadOption(e,t,en(t,e,i,!1,!1))}else n===Ls?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,en(t,e,n,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(e,t,n){if(null!==n){var r=this.metadata.read;if(null!==r)if(r===is||r===Vs||r===Ls&&4&t.type)this.addMatch(t.index,-2);else{var i=en(t,e,r,!1,!1);null!==i&&this.addMatch(t.index,i)}else this.addMatch(t.index,n)}}},{key:"addMatch",value:function(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}]),e}();function vu(e,t){var n=e.localNames;if(null!==n)for(var r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function gu(e,t,n,r){return-1===n?function(e,t){return 11&e.type?ns(e,t):4&e.type?Zs(e,t):null}(t,e):-2===n?function(e,t,n){return n===is?ns(t,e):n===Ls?Zs(t,e):n===Vs?zs(t,e):void 0}(e,t,r):tn(e,e[1],n,t)}function mu(e,t,n,r){var i=t[19].queries[r];if(null===i.matches){for(var a=e.data,o=n.matches,s=[],u=0;u<o.length;u+=2){var c=o[u];s.push(c<0?null:gu(t,a[c],o[u+1],n.metadata.read))}i.matches=s}return i.matches}function yu(e,t,n,r){var i=e.queries.getByIndex(n),a=i.matches;if(null!==a)for(var o=mu(e,t,i,n),s=0;s<a.length;s+=2){var u=a[s];if(u>0)r.push(o[s/2]);else{for(var c=a[s+1],l=t[-u],h=10;h<l.length;h++){var f=l[h];f[17]===f[3]&&yu(f[1],f,c,r)}if(null!==l[9])for(var d=l[9],p=0;p<d.length;p++){var v=d[p];yu(v[1],v,c,r)}}}return r}function ku(e){var t=$e(),n=Xe(),r=ft();dt(r+1);var i=Tu(n,r);if(e.dirty&&ze(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{var a=i.crossesNgTemplate?yu(n,t,r,[]):mu(n,t,i,r);e.reset(a,as),e.notifyOnChanges()}return!0}return!1}function bu(e,t,n){var r=Xe();r.firstCreatePass&&(Su(r,new fu(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),xu(r,$e(),t)}function wu(e,t,n,r){var i=Xe();if(i.firstCreatePass){var a=tt();Su(i,new fu(t,n,r),a.index),function(e,t){var n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}xu(i,$e(),n)}function _u(){return e=$e(),t=ft(),e[19].queries[t].queryList;var e,t}function xu(e,t,n){var r=new cu(4==(4&n));Li(e,t,r,r.destroy),null===t[19]&&(t[19]=new hu),t[19].queries.push(new lu(r))}function Su(e,t,n){null===e.queries&&(e.queries=new du),e.queries.track(new pu(t,n))}function Tu(e,t){return e.queries.getByIndex(t)}var Iu=new ln("Application Initializer"),Eu=function(){var e=function(){function e(t){var n=this;v(this,e),this.appInits=t,this.resolve=ts,this.reject=ts,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(e,t){n.resolve=e,n.reject=t})}return p(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=function(n){var r=e.appInits[n]();if(Ya(r))t.push(r);else if($a(r)){var i=new Promise(function(e,t){r.subscribe({complete:e,error:t})});t.push(i)}},i=0;i<this.appInits.length;i++)r(i);Promise.all(t).then(function(){n()}).catch(function(t){e.reject(t)}),0===t.length&&n(),this.initialized=!0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(In(Iu,8))},e.\u0275prov=N({token:e,factory:e.\u0275fac}),e}(),Cu=new ln("AppId"),Au={provide:Cu,useFactory:function(){return"".concat(Ru()).concat(Ru()).concat(Ru())},deps:[]};function Ru(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Du=new ln("Platform Initializer"),Pu=new ln("Platform ID"),Ou=new ln("appBootstrapListener"),Nu=function(){var e=function(){function e(){v(this,e)}return p(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac}),e}(),Lu=new ln("LocaleId"),Mu=new ln("DefaultCurrencyCode"),Zu=p(function e(t,n){v(this,e),this.ngModuleFactory=t,this.componentFactories=n}),Uu=function(e){return new eu(e)},Fu=Uu,qu=function(e){return Promise.resolve(Uu(e))},Vu=function(e){var t=Uu(e),n=Dr(we(e).declarations).reduce(function(e,t){var n=be(t);return n&&e.push(new Ys(n)),e},[]);return new Zu(t,n)},ju=Vu,Bu=function(e){return Promise.resolve(Vu(e))},Hu=function(){var e=function(){function e(){v(this,e),this.compileModuleSync=Fu,this.compileModuleAsync=qu,this.compileModuleAndAllComponentsSync=ju,this.compileModuleAndAllComponentsAsync=Bu}return p(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac}),e}(),zu=Promise.resolve(0);function Gu(e){"undefined"==typeof Zone?zu.then(function(){e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var Ku=function(){function e(t){var n,r,i=t.enableLongStackTrace,a=void 0!==i&&i,o=t.shouldCoalesceEventChangeDetection,s=void 0!==o&&o,u=t.shouldCoalesceRunChangeDetection,c=void 0!==u&&u;if(v(this,e),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new su(!1),this.onMicrotaskEmpty=new su(!1),this.onStable=new su(!1),this.onError=new su(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=!c&&s,this.shouldCoalesceRunChangeDetection=c,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var e=ee.requestAnimationFrame,t=ee.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){var n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);var r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,r=function(){!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(ee,function(){e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",function(){e.lastRequestAnimationFrameId=-1,Yu(e),e.isCheckStableRunning=!0,Ju(e),e.isCheckStableRunning=!1},void 0,function(){},function(){})),e.fakeTopEventTask.invoke()}),Yu(e))}(n)},(n=this)._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(e,t,i,a,o,s){try{return Qu(n),e.invokeTask(i,a,o,s)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||n.shouldCoalesceRunChangeDetection)&&r(),$u(n)}},onInvoke:function(e,t,i,a,o,s,u){try{return Qu(n),e.invoke(i,a,o,s,u)}finally{n.shouldCoalesceRunChangeDetection&&r(),$u(n)}},onHasTask:function(e,t,r,i){e.hasTask(r,i),t===r&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,Yu(n),Ju(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(e,t,r,i){return e.handleError(r,i),n.runOutsideAngular(function(){return n.onError.emit(i)}),!1}})}return p(e,[{key:"run",value:function(e,t,n){return this._inner.run(e,t,n)}},{key:"runTask",value:function(e,t,n,r){var i=this._inner,a=i.scheduleEventTask("NgZoneEvent: "+r,e,Wu,ts,ts);try{return i.runTask(a,t,n)}finally{i.cancelTask(a)}}},{key:"runGuarded",value:function(e,t,n){return this._inner.runGuarded(e,t,n)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}(),Wu={};function Ju(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(function(){return e.onStable.emit(null)})}finally{e.isStable=!0}}}function Yu(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Qu(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function $u(e){e._nesting--,Ju(e)}var Xu=function(){function e(){v(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new su,this.onMicrotaskEmpty=new su,this.onStable=new su,this.onError=new su}return p(e,[{key:"run",value:function(e,t,n){return e.apply(t,n)}},{key:"runGuarded",value:function(e,t,n){return e.apply(t,n)}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e,t,n,r){return e.apply(t,n)}}]),e}(),ec=function(){var e=function(){function e(t){var n=this;v(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return p(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){e._ngZone.onStable.subscribe({next:function(){Ku.assertNotInAngularZone(),Gu(function(){e._isZoneStable=!0,e._runCallbacksIfReady()})}})})}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())Gu(function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1});else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)}),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}}):[]}},{key:"addCallback",value:function(e,t,n){var r=this,i=-1;t&&t>0&&(i=setTimeout(function(){r._callbacks=r._callbacks.filter(function(e){return e.timeoutId!==i}),e(r._didWork,r.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,n){return[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(In(Ku))},e.\u0275prov=N({token:e,factory:e.\u0275fac}),e}(),tc=function(){var e=function(){function e(){v(this,e),this._applications=new Map,ic.addToWindow(this)}return p(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return ic.findTestabilityInTree(this,e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac}),e}();function nc(e){ic=e}var rc,ic=new(function(){function e(){v(this,e)}return p(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,n){return null}}]),e}()),ac=!0,oc=!1;function sc(){return oc=!0,ac}function uc(){if(oc)throw new Error("Cannot enable prod mode after platform setup.");ac=!1}var cc=new ln("AllowMultipleToken"),lc=p(function e(t,n){v(this,e),this.name=t,this.token=n});function hc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(t),i=new ln(r);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=fc();if(!a||a.injector.get(cc,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{var o=n.concat(t).concat({provide:i,useValue:!0},{provide:fa,useValue:"platform"});!function(e){if(rc&&!rc.destroyed&&!rc.injector.get(cc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");rc=e.get(dc);var t=e.get(Du,null);t&&t.forEach(function(e){return e()})}(Sa.create({providers:o,name:r}))}return function(e){var t=fc();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function fc(){return rc&&!rc.destroyed?rc:null}var dc=function(){var e=function(){function e(t){v(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return p(e,[{key:"bootstrapModuleFactory",value:function(e,t){var n,r,i=this,a=(n=t?t.ngZone:void 0,r={ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1},"noop"===n?new Xu:("zone.js"===n?void 0:n)||new Ku({enableLongStackTrace:sc(),shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)})),o=[{provide:Ku,useValue:a}];return a.run(function(){var t=Sa.create({providers:o,parent:i.injector,name:e.moduleType.name}),n=e.create(t),r=n.injector.get(Cr,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return a.runOutsideAngular(function(){var e=a.onError.subscribe({next:function(e){r.handleError(e)}});n.onDestroy(function(){gc(i._modules,n),e.unsubscribe()})}),function(e,t,r){try{var a=((o=n.injector.get(Eu)).runInitializers(),o.donePromise.then(function(){return Bo(n.injector.get(Lu,"en-US")||"en-US"),i._moduleDoBootstrap(n),n}));return Ya(a)?a.catch(function(n){throw t.runOutsideAngular(function(){return e.handleError(n)}),n}):a}catch(s){throw t.runOutsideAngular(function(){return e.handleError(s)}),s}var o}(r,a)})}},{key:"bootstrapModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=pc({},n);return function(e,t,n){var r=new eu(n);return Promise.resolve(r)}(0,0,e).then(function(e){return t.bootstrapModuleFactory(e,r)})}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(vc);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(function(e){return t.bootstrap(e)});else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(x(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(e){return e.destroy()}),this._destroyListeners.forEach(function(e){return e()}),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();return e.\u0275fac=function(t){return new(t||e)(In(Sa))},e.\u0275prov=N({token:e,factory:e.\u0275fac}),e}();function pc(e,t){return Array.isArray(t)?t.reduce(pc,e):Object.assign(Object.assign({},e),t)}var vc=function(){var e=function(){function e(t,n,r,i,a){var o=this;v(this,e),this._zone=t,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:function(){o._zone.run(function(){o.tick()})}});var u=new s.y(function(e){o._stable=o._zone.isStable&&!o._zone.hasPendingMacrotasks&&!o._zone.hasPendingMicrotasks,o._zone.runOutsideAngular(function(){e.next(o._stable),e.complete()})}),l=new s.y(function(e){var t;o._zone.runOutsideAngular(function(){t=o._zone.onStable.subscribe(function(){Ku.assertNotInAngularZone(),Gu(function(){o._stable||o._zone.hasPendingMacrotasks||o._zone.hasPendingMicrotasks||(o._stable=!0,e.next(!0))})})});var n=o._zone.onUnstable.subscribe(function(){Ku.assertInAngularZone(),o._stable&&(o._stable=!1,o._zone.runOutsideAngular(function(){e.next(!1)}))});return function(){t.unsubscribe(),n.unsubscribe()}});this.isStable=(0,c.T)(u,l.pipe(function(e){return(0,f.x)()((t=d,function(e){var n;n="function"==typeof t?t:function(){return t};var r=Object.create(e,h.N);return r.source=e,r.subjectFactory=n,r})(e));var t}))}return p(e,[{key:"bootstrap",value:function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof $o?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var i=n.isBoundToModule?void 0:this._injector.get(Us),a=n.create(Sa.NULL,[],t||n.selector,i),o=a.location.nativeElement,s=a.injector.get(ec,null),u=s&&a.injector.get(tc);return s&&u&&u.registerApplication(o,s),a.onDestroy(function(){r.detachView(a.hostView),gc(r.components,a),u&&u.unregisterApplication(o)}),this._loadComponent(a),a}},{key:"tick",value:function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var t,n=l(this._views);try{for(n.s();!(t=n.n()).done;){t.value.detectChanges()}}catch(r){n.e(r)}finally{n.f()}}catch(i){this._zone.runOutsideAngular(function(){return e._exceptionHandler.handleError(i)})}finally{this._runningTick=!1}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;gc(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Ou,[]).concat(this._bootstrapListeners).forEach(function(t){return t(e)})}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach(function(e){return e.destroy()}),this._onMicrotaskEmptySubscription.unsubscribe()}},{key:"viewCount",get:function(){return this._views.length}}]),e}();return e.\u0275fac=function(t){return new(t||e)(In(Ku),In(Sa),In(Cr),In(es),In(Eu))},e.\u0275prov=N({token:e,factory:e.\u0275fac}),e}();function gc(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var mc=p(function e(){v(this,e)}),yc=p(function e(){v(this,e)}),kc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},bc=function(){var e=function(){function e(t,n){v(this,e),this._compiler=t,this._config=n||kc}return p(e,[{key:"load",value:function(e){return this.loadAndCompile(e)}},{key:"loadAndCompile",value:function(e){var t=this,i=r(e.split("#"),2),a=i[0],o=i[1];return void 0===o&&(o="default"),n(8255)(a).then(function(e){return e[o]}).then(function(e){return wc(e,a,o)}).then(function(e){return t._compiler.compileModuleAsync(e)})}},{key:"loadFactory",value:function(e){var t=r(e.split("#"),2),i=t[0],a=t[1],o="NgFactory";return void 0===a&&(a="default",o=""),n(8255)(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then(function(e){return e[a+o]}).then(function(e){return wc(e,i,a)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(In(Hu),In(yc,8))},e.\u0275prov=N({token:e,factory:e.\u0275fac}),e}();function wc(e,t,n){if(!e)throw new Error("Cannot find '".concat(n,"' in '").concat(t,"'"));return e}var _c=function(e){return null},xc=hc(null,"core",[{provide:Pu,useValue:"unknown"},{provide:dc,deps:[Sa]},{provide:tc,deps:[]},{provide:Nu,deps:[]}]),Sc=[{provide:vc,useClass:vc,deps:[Ku,Sa,Cr,es,Eu]},{provide:Js,deps:[Ku],useFactory:function(e){var t=[];return e.onStable.subscribe(function(){for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Eu,useClass:Eu,deps:[[new On,Iu]]},{provide:Hu,useClass:Hu,deps:[]},Au,{provide:xs,useFactory:function(){return Ps},deps:[]},{provide:Ts,useFactory:function(){return Os},deps:[]},{provide:Lu,useFactory:function(e){return Bo(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new Pn(Lu),new On,new Nn]]},{provide:Mu,useValue:"USD"}],Tc=function(){var e=p(function e(t){v(this,e)});return e.\u0275fac=function(t){return new(t||e)(In(vc))},e.\u0275mod=ve({type:e}),e.\u0275inj=L({providers:Sc}),e}()},8939:function(e,t,n){"use strict";n.d(t,{hO:function(){return k},xv:function(){return d},Dh:function(){return f},GT:function(){return l},cc:function(){return b},on:function(){return g},pX:function(){return c}});var i=n(3018),a=n(7841),o=n(4459);e=n.hmd(e);var s=["ngOnDestroy"],c=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Proxy(e,{get:function(i,a){return n.runOutsideAngular(function(){var i;if(e[a])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(a,e[a]),e[a];if(s.indexOf(a)>-1)return function(){};var o=t.toPromise().then(function(e){var t=e&&e[a];return"function"==typeof t?t.bind(e):t&&t.then?t.then(function(e){return n.run(function(){return e})}):n.run(function(){return t})});return new Proxy(function(){},{get:function(e,t){return o[t]},apply:function(e,t,n){return o.then(function(e){var t,i=e&&e.apply(void 0,u(n));return(null===(t=null==r?void 0:r.spy)||void 0===t?void 0:t.apply)&&r.spy.apply(a,n,i),i})}})})}})},l=function(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype||t).forEach(function(n){Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype||t,n))})})},h=p(function e(t){return v(this,e),t}),f=new i.OlP("angularfire2.app.options"),d=new i.OlP("angularfire2.app.name");function g(t,n,r){var i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";var o=a.Z.apps.filter(function(e){return e&&e.name===i.name})[0]||n.runOutsideAngular(function(){return a.Z.initializeApp(t,i)});try{JSON.stringify(t)!==JSON.stringify(o.options)&&m("error","".concat(o.name," Firebase App already initialized with different options").concat(e.hot?", you may need to reload as Firebase is not HMR aware.":"."))}catch(s){}return new h(o)}var m=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(0,i.X6Q)()&&"undefined"!=typeof console&&(t=console)[e].apply(t,r)},y={provide:h,useFactory:g,deps:[f,i.R0b,[new i.FiY,d]]},k=function(){var e=function(){function e(t){v(this,e),a.Z.registerVersion("angularfire",o.q4.full,"core"),a.Z.registerVersion("angularfire",o.q4.full,"app-compat"),a.Z.registerVersion("angular",i.q4F.full,t.toString())}return p(e,null,[{key:"initializeApp",value:function(t,n){return{ngModule:e,providers:[{provide:f,useValue:t},{provide:d,useValue:n}]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.Lbi))},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[y]}),e}();function b(e,t,n,i,a){var o=r(globalThis.\u0275AngularfireInstanceCache.find(function(t){return t[0]===e})||[],3),s=o[1],u=o[2];if(s)return function(e,t){try{return e.toString()===t.toString()}catch(n){return e===t}}(a,u)||(_("error","".concat(t," was already initialized on the ").concat(n," Firebase App with different settings.").concat(w?" You may need to reload as Firebase is not HMR aware.":"")),_("warn",{is:a,was:u})),s;var c=i();return globalThis.\u0275AngularfireInstanceCache.push([e,c,a]),c}var w=!!e.hot,_=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(0,i.X6Q)()&&"undefined"!=typeof console&&(t=console)[e].apply(t,r)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4459:function(e,t,n){"use strict";n.d(t,{q4:function(){return mn},iC:function(){return Cn},fc:function(){return En},HU:function(){return xn},vb:function(){return kn},JM:function(){return yn},u3:function(){return Rn}});var i=n(3018),a=n(2329),o=n(6304),s=n(279),c=n(3854),h=n(8604),f=n(9306),d=n(6508),g=new c.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function m(e){return e instanceof c.ZR&&e.code.includes("request-failed")}function y(e){var t=e.projectId;return"https://firebaseinstallations.googleapis.com/v1/projects/".concat(t,"/installations")}function k(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function b(e,t){return w.apply(this,arguments)}function w(){return(w=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:return r=e.sent.error,e.abrupt("return",g.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status}));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function x(e,t){var n=t.refreshToken,r=_(e);return r.append("Authorization",function(e){return"FIS_v2 ".concat(e)}(n)),r}function S(e){return T.apply(this,arguments)}function T(){return(T=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return n=e.sent,e.abrupt("return",n.status>=500&&n.status<600?t():n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(e,t){return E.apply(this,arguments)}function E(){return(E=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,u,c,l,h,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=n.fid,o=y(r),s=_(r),!(u=i.getImmediate({optional:!0}))){e.next=8;break}return e.next=6,u.getHeartbeatsHeader();case 6:(c=e.sent)&&s.append("x-firebase-client",c);case 8:return l={method:"POST",headers:s,body:JSON.stringify({fid:a,authVersion:"FIS_v2",appId:r.appId,sdkVersion:"w:0.5.9"})},e.next=11,S(function(){return fetch(o,l)});case 11:if(!(h=e.sent).ok){e.next=17;break}return e.next=15,h.json();case 15:return f=e.sent,e.abrupt("return",{fid:f.fid||a,registrationStatus:2,refreshToken:f.refreshToken,authToken:k(f.authToken)});case 17:return e.next=19,b("Create Installation",h);case 19:throw e.sent;case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(e){return new Promise(function(t){setTimeout(t,e)})}var A=/^[cdef][\w-]{21}$/;function R(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,u(t))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return A.test(t)?t:""}catch(n){return""}}function D(e){return"".concat(e.appName,"!").concat(e.appId)}var P=new Map;function O(e,t){var n=D(e);N(n,t),function(e,t){var n=(!L&&"BroadcastChannel"in self&&((L=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){N(e.data.key,e.data.fid)}),L);n&&n.postMessage({key:e,fid:t}),0===P.size&&L&&(L.close(),L=null)}(n,t)}function N(e,t){var n=P.get(e);if(n){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){(0,r.value)(t)}}catch(a){i.e(a)}finally{i.f()}}}var L=null,M="firebase-installations-store",Z=null;function U(){return Z||(Z=(0,d.X3)("firebase-installations-database",1,{upgrade:function(e,t){switch(t){case 0:e.createObjectStore(M)}}})),Z}function F(e,t){return q.apply(this,arguments)}function q(){return(q=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=D(t),e.next=3,U();case 3:return i=e.sent.transaction(M,"readwrite"),a=i.objectStore(M),e.next=7,a.get(r);case 7:return o=e.sent,e.next=10,a.put(n,r);case 10:return e.next=12,i.done;case 12:return o&&o.fid===n.fid||O(t,n.fid),e.abrupt("return",n);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function V(e){return j.apply(this,arguments)}function j(){return(j=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=D(t),e.next=3,U();case 3:return r=e.sent.transaction(M,"readwrite"),e.next=6,r.objectStore(M).delete(n);case 6:return e.next=8,r.done;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function B(e,t){return H.apply(this,arguments)}function H(){return(H=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=D(t),e.next=3,U();case 3:return i=e.sent.transaction(M,"readwrite"),a=i.objectStore(M),e.next=7,a.get(r);case 7:if(o=e.sent,void 0!==(s=n(o))){e.next=14;break}return e.next=12,a.delete(r);case 12:e.next=16;break;case 14:return e.next=16,a.put(s,r);case 16:return e.next=18,i.done;case 18:return!s||o&&o.fid===s.fid||O(t,s.fid),e.abrupt("return",s);case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function z(e){return G.apply(this,arguments)}function G(){return(G=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t.appConfig,function(e){var r=K(e),i=W(t,r);return n=i.registrationPromise,i.installationEntry});case 2:if(""!==(r=e.sent).fid){e.next=10;break}return e.next=6,n;case 6:e.t1=e.sent,e.t0={installationEntry:e.t1},e.next=11;break;case 10:e.t0={installationEntry:r,registrationPromise:n};case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function K(e){return X(e||{fid:R(),registrationStatus:0})}function W(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(g.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return J.apply(this,arguments)}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Y(e)}:{installationEntry:t}}function J(){return(J=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(t,n);case 3:return r=e.sent,e.abrupt("return",F(t.appConfig,r));case 7:if(e.prev=7,e.t0=e.catch(0),!m(e.t0)||409!==e.t0.customData.serverCode){e.next=14;break}return e.next=12,V(t.appConfig);case 12:e.next=16;break;case 14:return e.next=16,F(t.appConfig,{fid:n.fid,registrationStatus:0});case 16:throw e.t0;case 17:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function Y(e){return Q.apply(this,arguments)}function Q(){return(Q=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(t.appConfig);case 2:n=e.sent;case 3:if(1!==n.registrationStatus){e.next=11;break}return e.next=6,C(100);case 6:return e.next=8,$(t.appConfig);case 8:n=e.sent;case 9:e.next=3;break;case 11:if(0!==n.registrationStatus){e.next=18;break}return e.next=14,z(t);case 14:return r=e.sent,i=r.installationEntry,a=r.registrationPromise,e.abrupt("return",a||i);case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $(e){return B(e,function(e){if(!e)throw g.create("installation-not-found");return X(e)})}function X(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function ee(e,t){return te.apply(this,arguments)}function te(){return(te=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,u,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=ne(r,n),o=x(r,n),!(s=i.getImmediate({optional:!0}))){e.next=7;break}return e.next=5,s.getHeartbeatsHeader();case 5:(u=e.sent)&&o.append("x-firebase-client",u);case 7:return c={method:"POST",headers:o,body:JSON.stringify({installation:{sdkVersion:"w:0.5.9",appId:r.appId}})},e.next=10,S(function(){return fetch(a,c)});case 10:if(!(l=e.sent).ok){e.next=17;break}return e.t0=k,e.next=15,l.json();case 15:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 17:return e.next=19,b("Generate Auth Token",l);case 19:throw e.sent;case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ne(e,t){var n=t.fid;return"".concat(y(e),"/").concat(n,"/authTokens:generate")}function re(e){return ie.apply(this,arguments)}function ie(){return(ie=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],e.next=3,B(t.appConfig,function(e){if(!le(e))throw g.create("not-registered");var i=e.authToken;if(!n&&he(i))return e;if(1===i.requestStatus)return r=ae(t,n),e;if(!navigator.onLine)throw g.create("app-offline");var a=fe(e);return r=ue(t,a),a});case 3:if(i=e.sent,!r){e.next=10;break}return e.next=7,r;case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=i.authToken;case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ae(e,t){return oe.apply(this,arguments)}function oe(){return(oe=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(t.appConfig);case 2:r=e.sent;case 3:if(1!==r.authToken.requestStatus){e.next=11;break}return e.next=6,C(100);case 6:return e.next=8,se(t.appConfig);case 8:r=e.sent;case 9:e.next=3;break;case 11:return i=r.authToken,e.abrupt("return",0===i.requestStatus?re(t,n):i);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function se(e){return B(e,function(e){if(!le(e))throw g.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t})}function ue(e,t){return ce.apply(this,arguments)}function ce(){return(ce=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee(t,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{authToken:r}),e.next=7,F(t.appConfig,i);case 7:return e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(0),m(e.t0)&&(401===e.t0.customData.serverCode||404===e.t0.customData.serverCode)){e.next=18;break}return a=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),e.next=16,F(t.appConfig,a);case 16:e.next=20;break;case 18:return e.next=20,V(t.appConfig);case 20:throw e.t0;case 21:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function le(e){return void 0!==e&&2===e.registrationStatus}function he(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(e)}function fe(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function de(){return(de=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,z(n);case 3:return r=e.sent,i=r.installationEntry,a=r.registrationPromise,e.abrupt("return",(a?a.catch(console.error):re(n).catch(console.error),i.fid));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pe(){return(pe=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r,i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]&&i[1],r=t,e.next=4,ve(r);case 4:return e.next=6,re(r,n);case 6:return e.abrupt("return",e.sent.token);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ve(e){return ge.apply(this,arguments)}function ge(){return(ge=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t);case 2:if(n=e.sent,r=n.registrationPromise,e.t0=r,!e.t0){e.next=8;break}return e.next=8,r;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function me(e){return g.create("missing-app-config-values",{valueName:e})}(0,s._registerComponent)(new h.wA("installations",function(e){var t=e.getProvider("app").getImmediate();return{app:t,appConfig:function(e){if(!e||!e.options)throw me("App Configuration");if(!e.name)throw me("App Name");for(var t=0,n=["projectId","apiKey","appId"];t<n.length;t++){var r=n[t];if(!e.options[r])throw me(r)}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),heartbeatServiceProvider:(0,s._getProvider)(t,"heartbeat"),_delete:function(){return Promise.resolve()}}},"PUBLIC")),(0,s._registerComponent)(new h.wA("installations-internal",function(e){var t=e.getProvider("app").getImmediate(),n=(0,s._getProvider)(t,"installations").getImmediate();return{getId:function(){return function(e){return de.apply(this,arguments)}(n)},getToken:function(e){return function(e){return pe.apply(this,arguments)}(n,e)}}},"PRIVATE")),(0,s.registerVersion)("@firebase/installations","0.5.9"),(0,s.registerVersion)("@firebase/installations","0.5.9","esm2017");var ye=new c.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"}),ke=function(){function e(t,n,r,i){v(this,e),this.client=t,this.storage=n,this.storageCache=r,this.logger=i}return p(e,[{key:"isCachedDataFresh",value:function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: ".concat(n,". Cache max age millis (minimumFetchIntervalMillis setting): ").concat(e,". Is cache hit: ").concat(r,".")),r}},{key:"fetch",value:function(e){var t=this;return(0,o.Z)(regeneratorRuntime.mark(function n(){var i,a,o,s,u,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);case 2:if(i=n.sent,a=r(i,2),o=a[0],!(s=a[1])||!t.isCachedDataFresh(e.cacheMaxAgeMillis,o)){n.next=8;break}return n.abrupt("return",s);case 8:return e.eTag=s&&s.eTag,n.next=11,t.client.fetch(e);case 11:return u=n.sent,c=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===u.status&&c.push(t.storage.setLastSuccessfulFetchResponse(u)),n.next=16,Promise.all(c);case 16:return n.abrupt("return",u);case 17:case"end":return n.stop()}},n)}))()}}]),e}();function be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator;return e.languages&&e.languages[0]||e.language}var we=function(){function e(t,n,r,i,a,o){v(this,e),this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=a,this.appId=o}return p(e,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=this;return(0,o.Z)(regeneratorRuntime.mark(function n(){var i,a,o,s,u,c,l,h,f,d,p,v,g,m,y,k,b;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]);case 2:return i=n.sent,a=r(i,2),o=a[0],s=a[1],u="".concat(window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com","/v1/projects/").concat(t.projectId,"/namespaces/").concat(t.namespace,":fetch?key=").concat(t.apiKey),c={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},l={sdk_version:t.sdkVersion,app_instance_id:o,app_instance_id_token:s,app_id:t.appId,language_code:be()},h={method:"POST",headers:c,body:JSON.stringify(l)},f=fetch(u,h),d=new Promise(function(t,n){e.signal.addEventListener(function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)})}),n.prev=12,n.next=15,Promise.race([f,d]);case 15:return n.next=17,f;case 17:p=n.sent,n.next=24;break;case 20:throw n.prev=20,n.t0=n.catch(12),v="fetch-client-network","AbortError"===n.t0.name&&(v="fetch-timeout"),ye.create(v,{originalErrorMessage:n.t0.message});case 24:if(g=p.status,m=p.headers.get("ETag")||void 0,200!==p.status){n.next=37;break}return n.prev=27,n.next=30,p.json();case 30:b=n.sent,n.next=36;break;case 33:throw n.prev=33,n.t1=n.catch(27),ye.create("fetch-client-parse",{originalErrorMessage:n.t1.message});case 36:y=b.entries,k=b.state;case 37:if("INSTANCE_STATE_UNSPECIFIED"===k?g=500:"NO_CHANGE"===k?g=304:"NO_TEMPLATE"!==k&&"EMPTY_CONFIG"!==k||(y={}),304===g||200===g){n.next=39;break}throw ye.create("fetch-status",{httpStatus:g});case 39:return n.abrupt("return",{status:g,eTag:m,config:y});case 40:case"end":return n.stop()}},n,null,[[12,20],[27,33]])}))()})}]),e}(),_e=function(){function e(t,n){v(this,e),this.client=t,this.storage=n}return p(e,[{key:"fetch",value:function(e){var t=this;return(0,o.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.storage.getThrottleMetadata();case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0={backoffCount:0,throttleEndTimeMillis:Date.now()};case 5:return r=n.t0,n.abrupt("return",t.attemptFetch(e,r));case 7:case"end":return n.stop()}},n)}))()}},{key:"attemptFetch",value:function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount,i=this;return(0,o.Z)(regeneratorRuntime.mark(function t(){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener(function(){clearTimeout(a),r(ye.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(e.signal,n);case 2:return t.prev=2,t.next=5,i.client.fetch(e);case 5:return a=t.sent,t.next=8,i.storage.deleteThrottleMetadata();case 8:return t.abrupt("return",a);case 11:if(t.prev=11,t.t0=t.catch(2),function(e){if(!(e instanceof c.ZR&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t.t0)){t.next=15;break}throw t.t0;case 15:return o={throttleEndTimeMillis:Date.now()+(0,c.$s)(r),backoffCount:r+1},t.next=18,i.storage.setThrottleMetadata(o);case 18:return t.abrupt("return",i.attemptFetch(e,o));case 19:case"end":return t.stop()}},t,null,[[2,11]])}))()}}]),e}(),xe=function(){function e(t,n,r,i,a){v(this,e),this.app=t,this._client=n,this._storageCache=r,this._storage=i,this._logger=a,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return p(e,[{key:"fetchTimeMillis",get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}},{key:"lastFetchStatus",get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}]),e}();function Se(e,t){var n=e.target.error||void 0;return ye.create(t,{originalErrorMessage:n&&n.message})}var Te=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Promise(function(e,t){try{var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(e){t(Se(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore("app_namespace_store",{keyPath:"compositeKey"})}}}catch(r){t(ye.create("storage-open",{originalErrorMessage:r}))}});v(this,e),this.appId=t,this.appName=n,this.namespace=r,this.openDbPromise=i}return p(e,[{key:"getLastFetchStatus",value:function(){return this.get("last_fetch_status")}},{key:"setLastFetchStatus",value:function(e){return this.set("last_fetch_status",e)}},{key:"getLastSuccessfulFetchTimestampMillis",value:function(){return this.get("last_successful_fetch_timestamp_millis")}},{key:"setLastSuccessfulFetchTimestampMillis",value:function(e){return this.set("last_successful_fetch_timestamp_millis",e)}},{key:"getLastSuccessfulFetchResponse",value:function(){return this.get("last_successful_fetch_response")}},{key:"setLastSuccessfulFetchResponse",value:function(e){return this.set("last_successful_fetch_response",e)}},{key:"getActiveConfig",value:function(){return this.get("active_config")}},{key:"setActiveConfig",value:function(e){return this.set("active_config",e)}},{key:"getActiveConfigEtag",value:function(){return this.get("active_config_etag")}},{key:"setActiveConfigEtag",value:function(e){return this.set("active_config_etag",e)}},{key:"getThrottleMetadata",value:function(){return this.get("throttle_metadata")}},{key:"setThrottleMetadata",value:function(e){return this.set("throttle_metadata",e)}},{key:"deleteThrottleMetadata",value:function(){return this.delete("throttle_metadata")}},{key:"get",value:function(e){var t=this;return(0,o.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.openDbPromise;case 2:return r=n.sent,n.abrupt("return",new Promise(function(n,i){var a=r.transaction(["app_namespace_store"],"readonly").objectStore("app_namespace_store"),o=t.createCompositeKey(e);try{var s=a.get(o);s.onerror=function(e){i(Se(e,"storage-get"))},s.onsuccess=function(e){var t=e.target.result;n(t?t.value:void 0)}}catch(u){i(ye.create("storage-get",{originalErrorMessage:u&&u.message}))}}));case 4:case"end":return n.stop()}},n)}))()}},{key:"set",value:function(e,t){var n=this;return(0,o.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.openDbPromise;case 2:return i=r.sent,r.abrupt("return",new Promise(function(r,a){var o=i.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),s=n.createCompositeKey(e);try{var u=o.put({compositeKey:s,value:t});u.onerror=function(e){a(Se(e,"storage-set"))},u.onsuccess=function(){r()}}catch(c){a(ye.create("storage-set",{originalErrorMessage:c&&c.message}))}}));case 4:case"end":return r.stop()}},r)}))()}},{key:"delete",value:function(e){var t=this;return(0,o.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.openDbPromise;case 2:return r=n.sent,n.abrupt("return",new Promise(function(n,i){var a=r.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),o=t.createCompositeKey(e);try{var s=a.delete(o);s.onerror=function(e){i(Se(e,"storage-delete"))},s.onsuccess=function(){n()}}catch(u){i(ye.create("storage-delete",{originalErrorMessage:u&&u.message}))}}));case 4:case"end":return n.stop()}},n)}))()}},{key:"createCompositeKey",value:function(e){return[this.appId,this.appName,this.namespace,e].join()}}]),e}(),Ie=function(){function e(t){v(this,e),this.storage=t}return p(e,[{key:"getLastFetchStatus",value:function(){return this.lastFetchStatus}},{key:"getLastSuccessfulFetchTimestampMillis",value:function(){return this.lastSuccessfulFetchTimestampMillis}},{key:"getActiveConfig",value:function(){return this.activeConfig}},{key:"loadFromStorage",value:function(){var e=this;return(0,o.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),t.next=5,n;case 5:return(a=t.sent)&&(e.lastFetchStatus=a),t.next=9,r;case 9:return(o=t.sent)&&(e.lastSuccessfulFetchTimestampMillis=o),t.next=13,i;case 13:(s=t.sent)&&(e.activeConfig=s);case 15:case"end":return t.stop()}},t)}))()}},{key:"setLastFetchStatus",value:function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}},{key:"setLastSuccessfulFetchTimestampMillis",value:function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}},{key:"setActiveConfig",value:function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}]),e}();function Ee(){return(Ee=(0,o.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,c.hl)()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,(0,c.eu)();case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,null,[[2,8]])}))).apply(this,arguments)}(0,s._registerComponent)(new h.wA("remote-config",function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw ye.create("registration-window");if(!(0,c.hl)())throw ye.create("indexed-db-unavailable");var a=r.options,o=a.projectId,u=a.apiKey,l=a.appId;if(!o)throw ye.create("registration-project-id");if(!u)throw ye.create("registration-api-key");if(!l)throw ye.create("registration-app-id");var h=new Te(l,r.name,n=n||"firebase"),d=new Ie(h),p=new f.Yd("@firebase/remote-config");p.logLevel=f.in.ERROR;var v,g,m=new we(i,s.SDK_VERSION,n,o,u,l),y=new _e(m,h),k=new ke(y,h,d,p),b=new xe(r,k,d,h,p);return v=b,(g=(0,c.m9)(v))._initializePromise||(g._initializePromise=g._storageCache.loadFromStorage().then(function(){g._isInitializationComplete=!0})),b},"PUBLIC").setMultipleInstances(!0)),(0,s.registerVersion)("@firebase/remote-config","0.3.8"),(0,s.registerVersion)("@firebase/remote-config","0.3.8","esm2017");var Ce="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ae=(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(Ae||(Ae={})),Ae);function Re(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,u(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function De(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var Pe="fcm_token_details_db";function Oe(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0="databases"in indexedDB,!e.t0){e.next=5;break}return e.next=4,indexedDB.databases();case 4:e.t0=!e.sent.map(function(e){return e.name}).includes(Pe);case 5:if(!e.t0){e.next=7;break}return e.abrupt("return",null);case 7:return n=null,e.next=10,(0,d.X3)(Pe,5,{upgrade:(r=(0,o.Z)(regeneratorRuntime.mark(function e(r,i,a,o){var s,u,c,l,h,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i<2)){e.next=2;break}return e.abrupt("return");case 2:if(r.objectStoreNames.contains("fcm_token_object_Store")){e.next=4;break}return e.abrupt("return");case 4:return u=o.objectStore("fcm_token_object_Store"),e.next=7,u.index("fcmSenderId").get(t);case 7:return c=e.sent,e.next=10,u.clear();case 10:if(!c){e.next=19;break}if(2!==i){e.next=18;break}if((l=c).auth&&l.p256dh&&l.endpoint){e.next=15;break}return e.abrupt("return");case 15:n={token:l.fcmToken,createTime:null!==(s=l.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:l.auth,p256dh:l.p256dh,endpoint:l.endpoint,swScope:l.swScope,vapidKey:"string"==typeof l.vapidKey?l.vapidKey:Re(l.vapidKey)}},e.next=19;break;case 18:3===i?n={token:(h=c).fcmToken,createTime:h.createTime,subscriptionOptions:{auth:Re(h.auth),p256dh:Re(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:Re(h.vapidKey)}}:4===i&&(n={token:(f=c).fcmToken,createTime:f.createTime,subscriptionOptions:{auth:Re(f.auth),p256dh:Re(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:Re(f.vapidKey)}});case 19:case"end":return e.stop()}},e)})),function(e,t,n,i){return r.apply(this,arguments)})});case 10:return e.sent.close(),e.next=13,(0,d.Lj)(Pe);case 13:return e.next=15,(0,d.Lj)("fcm_vapid_details_db");case 15:return e.next=17,(0,d.Lj)("undefined");case 17:return e.abrupt("return",Le(n)?n:null);case 18:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Le(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}var Me=null;function Ze(){return Me||(Me=(0,d.X3)("firebase-messaging-database",1,{upgrade:function(e,t){switch(t){case 0:e.createObjectStore("firebase-messaging-store")}}})),Me}function Ue(e){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=He(t),e.next=3,Ze();case 3:return r=e.sent,e.next=6,r.transaction("firebase-messaging-store").objectStore("firebase-messaging-store").get(n);case 6:if(!(i=e.sent)){e.next=9;break}return e.abrupt("return",i);case 9:return e.next=11,Oe(t.appConfig.senderId);case 11:if(!(a=e.sent)){e.next=16;break}return e.next=15,qe(t,a);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qe(e,t){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=He(t),e.next=3,Ze();case 3:return i=e.sent.transaction("firebase-messaging-store","readwrite"),e.next=6,i.objectStore("firebase-messaging-store").put(n,r);case 6:return e.next=8,i.done;case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function je(e){return Be.apply(this,arguments)}function Be(){return(Be=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=He(t),e.next=3,Ze();case 3:return r=e.sent.transaction("firebase-messaging-store","readwrite"),e.next=6,r.objectStore("firebase-messaging-store").delete(n);case 6:return e.next=8,r.done;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function He(e){return e.appConfig.appId}var ze=new c.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ge(e,t){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe(t);case 2:return r=e.sent,i=tt(n),a={method:"POST",headers:r,body:JSON.stringify(i)},e.prev=5,e.next=8,fetch($e(t.appConfig),a);case 8:return s=e.sent,e.next=11,s.json();case 11:o=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(5),ze.create("token-subscribe-failed",{errorInfo:e.t0});case 17:if(!o.error){e.next=19;break}throw ze.create("token-subscribe-failed",{errorInfo:o.error.message});case 19:if(o.token){e.next=21;break}throw ze.create("token-subscribe-no-token");case 21:return e.abrupt("return",o.token);case 22:case"end":return e.stop()}},e,null,[[5,14]])}))).apply(this,arguments)}function We(e,t){return Je.apply(this,arguments)}function Je(){return(Je=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe(t);case 2:return r=e.sent,i=tt(n.subscriptionOptions),a={method:"PATCH",headers:r,body:JSON.stringify(i)},e.prev=5,e.next=8,fetch("".concat($e(t.appConfig),"/").concat(n.token),a);case 8:return s=e.sent,e.next=11,s.json();case 11:o=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(5),ze.create("token-update-failed",{errorInfo:e.t0});case 17:if(!o.error){e.next=19;break}throw ze.create("token-update-failed",{errorInfo:o.error.message});case 19:if(o.token){e.next=21;break}throw ze.create("token-update-no-token");case 21:return e.abrupt("return",o.token);case 22:case"end":return e.stop()}},e,null,[[5,14]])}))).apply(this,arguments)}function Ye(e,t){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe(t);case 2:return e.t0=e.sent,r={method:"DELETE",headers:e.t0},e.prev=4,e.next=7,fetch("".concat($e(t.appConfig),"/").concat(n),r);case 7:return i=e.sent,e.next=10,i.json();case 10:if(!(a=e.sent).error){e.next=13;break}throw ze.create("token-unsubscribe-failed",{errorInfo:a.error.message});case 13:e.next=18;break;case 15:throw e.prev=15,e.t1=e.catch(4),ze.create("token-unsubscribe-failed",{errorInfo:e.t1});case 18:case"end":return e.stop()}},e,null,[[4,15]])}))).apply(this,arguments)}function $e(e){var t=e.projectId;return"https://fcmregistrations.googleapis.com/v1/projects/".concat(t,"/registrations")}function Xe(e){return et.apply(this,arguments)}function et(){return(et=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appConfig,r=t.installations,e.next=3,r.getToken();case 3:return i=e.sent,e.abrupt("return",new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(i)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tt(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,a={web:{endpoint:r,auth:n,p256dh:t}};return i!==Ce&&(a.web.applicationPubKey=i),a}function nt(e){return rt.apply(this,arguments)}function rt(){return(rt=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt(t.swRegistration,t.vapidKey);case 2:return n=e.sent,r={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:n.endpoint,auth:Re(n.getKey("auth")),p256dh:Re(n.getKey("p256dh"))},e.next=6,Ue(t.firebaseDependencies);case 6:if(!(i=e.sent)){e.next=19;break}if(!ft(i.subscriptionOptions,r)){e.next=10;break}return e.abrupt("return",Date.now()>=i.createTime+6048e5?ot(t,{token:i.token,createTime:Date.now(),subscriptionOptions:r}):i.token);case 10:return e.prev=10,e.next=13,Ye(t.firebaseDependencies,i.token);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),console.warn(e.t0);case 18:case 19:return e.abrupt("return",ut(t.firebaseDependencies,r));case 20:case"end":return e.stop()}},e,null,[[10,15]])}))).apply(this,arguments)}function it(e){return at.apply(this,arguments)}function at(){return(at=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t.firebaseDependencies);case 2:if(n=e.sent,e.t0=n,!e.t0){e.next=9;break}return e.next=7,Ye(t.firebaseDependencies,n.token);case 7:return e.next=9,je(t.firebaseDependencies);case 9:return e.next=11,t.swRegistration.pushManager.getSubscription();case 11:return r=e.sent,e.abrupt("return",!r||r.unsubscribe());case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ot(e,t){return st.apply(this,arguments)}function st(){return(st=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,We(t.firebaseDependencies,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{token:r,createTime:Date.now()}),e.next=7,qe(t.firebaseDependencies,i);case 7:return e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,it(t);case 14:throw e.t0;case 15:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function ut(e,t){return ct.apply(this,arguments)}function ct(){return(ct=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge(t,n);case 2:return e.t0=e.sent,e.t1=Date.now(),e.t2=n,r={token:e.t0,createTime:e.t1,subscriptionOptions:e.t2},e.next=8,qe(t,r);case 8:return e.abrupt("return",r.token);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function lt(e,t){return ht.apply(this,arguments)}function ht(){return(ht=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pushManager.getSubscription();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:De(n)});case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ft(e,t){return t.vapidKey===e.vapidKey&&t.endpoint===e.endpoint&&t.auth===e.auth&&t.p256dh===e.p256dh}function dt(e){var t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}(t,e),t}function pt(e){return"object"==typeof e&&!!e&&"google.c.a.c_id"in e}function vt(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function gt(e){return ze.create("missing-app-config-values",{valueName:e})}vt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),vt("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");var mt=function(){function e(t,n,r){v(this,e),this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;var i=function(e){if(!e||!e.options)throw gt("App Configuration Object");if(!e.name)throw gt("App Name");for(var t=e.options,n=0,r=["projectId","apiKey","appId","messagingSenderId"];n<r.length;n++){var i=r[n];if(!t[i])throw gt(i)}return{appName:e.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(t);this.firebaseDependencies={app:t,appConfig:i,installations:n,analyticsProvider:r}}return p(e,[{key:"_delete",value:function(){return Promise.resolve()}}]),e}();function yt(e){return kt.apply(this,arguments)}function kt(){return(kt=(0,o.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"});case 3:t.swRegistration=e.sent,t.swRegistration.update().catch(function(){}),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),ze.create("failed-service-worker-registration",{browserErrorMessage:e.t0.message});case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function bt(e,t){return wt.apply(this,arguments)}function wt(){return(wt=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n||t.swRegistration,e.t0){e.next=4;break}return e.next=4,yt(t);case 4:if(!n&&t.swRegistration){e.next=8;break}if(n instanceof ServiceWorkerRegistration){e.next=7;break}throw ze.create("invalid-sw-registration");case 7:t.swRegistration=n;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _t(e,t){return xt.apply(this,arguments)}function xt(){return(xt=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n?t.vapidKey=n:t.vapidKey||(t.vapidKey=Ce);case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function St(){return(St=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator){e.next=2;break}throw ze.create("only-available-in-window");case 2:if(e.t0="default"===Notification.permission,!e.t0){e.next=6;break}return e.next=6,Notification.requestPermission();case 6:if("granted"===Notification.permission){e.next=8;break}throw ze.create("permission-blocked");case 8:return e.next=10,_t(t,null==n?void 0:n.vapidKey);case 10:return e.next=12,bt(t,null==n?void 0:n.serviceWorkerRegistration);case 12:return e.abrupt("return",nt(t));case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Tt(e,t,n){return It.apply(this,arguments)}function It(){return(It=(0,o.Z)(regeneratorRuntime.mark(function e(t,n,r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Et(n),e.next=3,t.firebaseDependencies.analyticsProvider.get();case 3:e.sent.logEvent(i,{message_id:r["google.c.a.c_id"],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Et(e){switch(e){case Ae.NOTIFICATION_CLICKED:return"notification_open";case Ae.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ct(){return(Ct=(0,o.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=n.data).isFirebaseMessaging){e.next=3;break}return e.abrupt("return");case 3:if(t.onMessageHandler&&r.messageType===Ae.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(dt(r)):t.onMessageHandler.next(dt(r))),i=r.data,e.t0=pt(i)&&"1"===i["google.c.a.e"],!e.t0){e.next=9;break}return e.next=9,Tt(t,r.messageType,i);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function At(){return(At=(0,o.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.eu)();case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",!1);case 8:return e.abrupt("return","undefined"!=typeof window&&(0,c.hl)()&&(0,c.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"));case 9:case"end":return e.stop()}},e,null,[[0,5]])}))).apply(this,arguments)}(0,s._registerComponent)(new h.wA("messaging",function(e){var t=new mt(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",function(e){return function(e,t){return Ct.apply(this,arguments)}(t,e)}),t},"PUBLIC")),(0,s._registerComponent)(new h.wA("messaging-internal",function(e){var t=e.getProvider("messaging").getImmediate();return{getToken:function(e){return function(e,t){return St.apply(this,arguments)}(t,e)}}},"PRIVATE")),(0,s.registerVersion)("@firebase/messaging","0.9.13"),(0,s.registerVersion)("@firebase/messaging","0.9.13","esm2017");var Rt="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Dt="https://www.googletagmanager.com/gtag/js",Pt=new f.Yd("@firebase/analytics");function Ot(e){return Promise.all(e.map(function(e){return e.catch(function(e){return e})}))}function Nt(e,t){var n=document.createElement("script");n.src="".concat(Dt,"?l=").concat(e,"&id=").concat(t),n.async=!0,document.head.appendChild(n)}function Lt(e,t,n,r,i,a){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,o.Z)(regeneratorRuntime.mark(function e(t,n,r,i,a,o){var s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=i[a],e.prev=1,!s){e.next=7;break}return e.next=5,n[s];case 5:e.next=14;break;case 7:return e.next=9,Ot(r);case 9:if(u=e.sent.find(function(e){return e.measurementId===a}),e.t0=u,!e.t0){e.next=14;break}return e.next=14,n[u.appId];case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(1),Pt.error(e.t1);case 19:t("config",a,o);case 20:case"end":return e.stop()}},e,null,[[1,16]])}))).apply(this,arguments)}function Zt(e,t,n,r,i){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,o.Z)(regeneratorRuntime.mark(function e(t,n,r,i,a){var o,s,u,c,h,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=[],!a||!a.send_to){e.next=26;break}return s=a.send_to,Array.isArray(s)||(s=[s]),e.next=7,Ot(r);case 7:u=e.sent,c=l(s),e.prev=9,f=function(){var e=h.value,t=u.find(function(t){return t.measurementId===e}),r=t&&n[t.appId];if(!r)return o=[],"break";o.push(r)},c.s();case 12:if((h=c.n()).done){e.next=18;break}if("break"!==f()){e.next=16;break}return e.abrupt("break",18);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),c.e(e.t0);case 23:return e.prev=23,c.f(),e.finish(23);case 26:return 0===o.length&&(o=Object.values(n)),e.next=29,Promise.all(o);case 29:t("event",i,a||{}),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0),Pt.error(e.t1);case 35:case"end":return e.stop()}},e,null,[[0,32],[9,20,23,26]])}))).apply(this,arguments)}function Ft(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(Dt))return r}return null}var qt=new c.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Vt=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;v(this,e),this.throttleMetadata=t,this.intervalMillis=n}return p(e,[{key:"getThrottleMetadata",value:function(e){return this.throttleMetadata[e]}},{key:"setThrottleMetadata",value:function(e,t){this.throttleMetadata[e]=t}},{key:"deleteThrottleMetadata",value:function(e){delete this.throttleMetadata[e]}}]),e}());function jt(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function Bt(e){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appId,i=t.apiKey,a={method:"GET",headers:jt(i)},o=Rt.replace("{app-id}",r),e.next=6,fetch(o,a);case 6:if(200===(s=e.sent).status||304===s.status){e.next=19;break}return u="",e.prev=9,e.next=12,s.json();case 12:c=e.sent,(null===(n=c.error)||void 0===n?void 0:n.message)&&(u=c.error.message),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(9);case 18:throw qt.create("config-fetch-failed",{httpStatus:s.status,responseMessage:u});case 19:return e.abrupt("return",s.json());case 20:case"end":return e.stop()}},e,null,[[9,16]])}))).apply(this,arguments)}function zt(e){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,s,u,c,l,h=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:Vt,r=h.length>2?h[2]:void 0,i=t.options,a=i.appId,s=i.apiKey,u=i.measurementId,a){e.next=5;break}throw qt.create("no-app-id");case 5:if(s){e.next=9;break}if(!u){e.next=8;break}return e.abrupt("return",{measurementId:u,appId:a});case 8:throw qt.create("no-api-key");case 9:return c=n.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Qt,e.abrupt("return",(setTimeout((0,o.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l.abort();case 1:case"end":return e.stop()}},e)})),void 0!==r?r:6e4),Kt({appId:a,apiKey:s,measurementId:u},c,l,n)));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Kt(e,t,n){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,o.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s,u,l,h,f,d=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.throttleEndTimeMillis,a=n.backoffCount,o=d.length>3&&void 0!==d[3]?d[3]:Vt,s=t.appId,u=t.measurementId,e.prev=3,e.next=6,Jt(r,i);case 6:e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(3),!u){e.next=12;break}return e.abrupt("return",(Pt.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ".concat(u,' provided in the "measurementId" field in the local Firebase config. [').concat(e.t0.message,"]")),{appId:s,measurementId:u}));case 12:throw e.t0;case 13:return e.prev=13,e.next=16,Bt(t);case 16:return l=e.sent,e.abrupt("return",(o.deleteThrottleMetadata(s),l));case 20:if(e.prev=20,e.t1=e.catch(13),Yt(e.t1)){e.next=26;break}if(o.deleteThrottleMetadata(s),!u){e.next=25;break}return e.abrupt("return",(Pt.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ".concat(u,' provided in the "measurementId" field in the local Firebase config. [').concat(e.t1.message,"]")),{appId:s,measurementId:u}));case 25:throw e.t1;case 26:return h=503===Number(e.t1.customData.httpStatus)?(0,c.$s)(a,o.intervalMillis,30):(0,c.$s)(a,o.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:a+1},e.abrupt("return",(o.setThrottleMetadata(s,f),Pt.debug("Calling attemptFetch again in ".concat(h," millis")),Kt(t,f,r,o)));case 28:case"end":return e.stop()}},e,null,[[3,8],[13,20]])}))).apply(this,arguments)}function Jt(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener(function(){clearTimeout(a),r(qt.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function Yt(e){if(!(e instanceof c.ZR&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var Qt=function(){function e(){v(this,e),this.listeners=[]}return p(e,[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach(function(e){return e()})}}]),e}();function $t(){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,o.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,c.hl)()){e.next=2;break}return e.abrupt("return",(Pt.warn(qt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1));case 2:return e.prev=2,e.next=5,(0,c.eu)();case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",(Pt.warn(qt.create("indexeddb-unavailable",{errorInfo:e.t0}).message),!1));case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}},e,null,[[2,7]])}))).apply(this,arguments)}function en(){return(en=(0,o.Z)(regeneratorRuntime.mark(function e(t,n,i,a,o,s,u){var c,l,h,f,d,p,v,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(l=zt(t)).then(function(e){i[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Pt.warn("The measurement ID in the local Firebase config (".concat(t.options.measurementId,") does not match the measurement ID fetched from the server (").concat(e.measurementId,"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config."))}).catch(function(e){return Pt.error(e)}),n.push(l),h=$t().then(function(e){return e?a.getId():void 0}),e.next=5,Promise.all([l,h]);case 5:return f=e.sent,d=r(f,2),p=d[0],v=d[1],Ft()||Nt(s,p.measurementId),o("js",new Date),g=null!==(c=null==u?void 0:u.config)&&void 0!==c?c:{},e.abrupt("return",(g.origin="firebase",g.update=!0,null!=v&&(g.firebase_id=v),o("config",p.measurementId,g),p.measurementId));case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}var tn,nn,rn=function(){function e(t){v(this,e),this.app=t}return p(e,[{key:"_delete",value:function(){return delete an[this.app.options.appId],Promise.resolve()}}]),e}(),an={},on=[],sn={},un=!1;function cn(){return(cn=(0,o.Z)(regeneratorRuntime.mark(function e(t,n,r,i,a){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!a.global){e.next=4;break}t("event",r,i),e.next=8;break;case 4:return e.next=6,n;case 6:o=e.sent,t("event",r,Object.assign(Object.assign({},i),{send_to:o}));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ln(){return(ln=(0,o.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,c.ru)()){e.next=2;break}return e.abrupt("return",!1);case 2:if((0,c.zI)()){e.next=4;break}return e.abrupt("return",!1);case 4:if((0,c.hl)()){e.next=6;break}return e.abrupt("return",!1);case 6:return e.prev=6,e.next=9,(0,c.eu)();case 9:return e.abrupt("return",e.sent);case 12:return e.prev=12,e.t0=e.catch(6),e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,null,[[6,12]])}))).apply(this,arguments)}(0,s._registerComponent)(new h.wA("analytics",function(e,t){var n=t.options;return function(e,t,n){!function(){var e=[];if((0,c.ru)()&&e.push("This is a browser extension environment."),(0,c.zI)()||e.push("Cookies are not available."),e.length>0){var t=e.map(function(e,t){return"(".concat(t+1,") ").concat(e)}).join(" "),n=qt.create("invalid-analytics-context",{errorInfo:t});Pt.warn(n.message)}}();var r,i=e.options.appId;if(!i)throw qt.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw qt.create("no-api-key");Pt.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '.concat(e.options.measurementId,' provided in the "measurementId" field in the local Firebase config.'))}if(null!=an[i])throw qt.create("already-exists",{id:i});if(!un){r=[],Array.isArray(window.dataLayer)?r=window.dataLayer:window.dataLayer=r;var a=function(e,t,n,r,i){var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window.dataLayer.push(arguments)};return window.gtag&&"function"==typeof window.gtag&&(a=window.gtag),window.gtag=function(e,t,n,r){function i(){return(i=(0,o.Z)(regeneratorRuntime.mark(function i(a,o,s){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,"event"!==a){i.next=6;break}return i.next=4,Zt(e,t,n,o,s);case 4:i.next=12;break;case 6:if("config"!==a){i.next=11;break}return i.next=9,Lt(e,t,n,r,o,s);case 9:i.next=12;break;case 11:e("set",o);case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(0),Pt.error(i.t0);case 17:case"end":return i.stop()}},i,null,[[0,14]])}))).apply(this,arguments)}return function(e,t,n){return i.apply(this,arguments)}}(a,e,t,n),{gtagCore:a,wrappedGtag:window.gtag}}(an,on,sn),s=a.wrappedGtag,u=a.gtagCore;nn=s,tn=u,un=!0}return an[i]=function(e,t,n,r,i,a,o){return en.apply(this,arguments)}(e,on,sn,t,tn,"dataLayer",n),new rn(e)}(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),(0,s._registerComponent)(new h.wA("analytics-internal",function(e){try{var t=e.getProvider("analytics").getImmediate();return{logEvent:function(e,n,r){return function(e,t,n,r){e=(0,c.m9)(e),function(e,t,n,r,i){return cn.apply(this,arguments)}(nn,an[e.app.options.appId],t,n,r).catch(function(e){return Pt.error(e)})}(t,e,n,r)}}}catch(n){throw qt.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),(0,s.registerVersion)("@firebase/analytics","0.7.9"),(0,s.registerVersion)("@firebase/analytics","0.7.9","esm2017");var hn=n(7771),fn=n(3637),dn=n(7574),pn=n(3342),vn=n(9746),gn=n(9673),mn=new i.GfV("7.3.0");function yn(e,t,n){if(t){if(1===t.length)return t[0];var r=t.filter(function(e){return e.app===n});if(1===r.length)return r[0]}return n.container.getProvider(e).getImmediate({optional:!0})}globalThis.__angularfire_symbol__analyticsIsSupported||(globalThis.__angularfire_symbol__analyticsIsSupported=function(){return ln.apply(this,arguments)}().then(function(e){return globalThis.__angularfire_symbol__analyticsIsSupportedValue=e}).catch(function(){return globalThis.__angularfire_symbol__analyticsIsSupportedValue=!1})),globalThis.__angularfire_symbol__messagingIsSupported||(globalThis.__angularfire_symbol__messagingIsSupported=function(){return At.apply(this,arguments)}().then(function(e){return globalThis.__angularfire_symbol__messagingIsSupportedValue=e}).catch(function(){return globalThis.__angularfire_symbol__messagingIsSupportedValue=!1})),globalThis.__angularfire_symbol__remoteConfigIsSupported||(globalThis.__angularfire_symbol__remoteConfigIsSupported=function(){return Ee.apply(this,arguments)}().then(function(e){return globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=e}).catch(function(){return globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=!1}));var kn=function(e,t){var n=t?[t]:(0,a.C6)(),r=[];return n.forEach(function(t){t.container.getProvider(e).instances.forEach(function(e){r.includes(e)||r.push(e)})}),r};function bn(){}var wn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hn.N;v(this,e),this.zone=t,this.delegate=n}return p(e,[{key:"now",value:function(){return this.delegate.now()}},{key:"schedule",value:function(e,t,n){var r=this.zone;return this.delegate.schedule(function(t){var n=this;r.runGuarded(function(){e.apply(n,[t])})},t,n)}}]),e}(),_n=function(){function e(t){v(this,e),this.zone=t,this.task=null}return p(e,[{key:"call",value:function(e,t){var n=this.unscheduleTask.bind(this);return this.task=this.zone.run(function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",bn,{},bn,bn)}),t.pipe((0,pn.b)({next:n,complete:n,error:n})).subscribe(e).add(n)}},{key:"unscheduleTask",value:function(){var e=this;setTimeout(function(){null!=e.task&&"scheduled"===e.task.state&&(e.task.invoke(),e.task=null)},10)}}]),e}(),xn=function(){var e=p(function e(t){v(this,e),this.ngZone=t,this.outsideAngular=t.runOutsideAngular(function(){return new wn(Zone.current)}),this.insideAngular=t.run(function(){return new wn(Zone.current,fn.z)}),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)});return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.R0b))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function Sn(){var e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return e}function Tn(e){return Sn().ngZone.runOutsideAngular(function(){return e()})}function In(e){return Sn().ngZone.run(function(){return e()})}function En(e){return e.pipe((0,vn.QV)(Sn().outsideAngular))}function Cn(e){return Sn(),(t=Sn(),function(e){return(e=e.lift(new _n(t.ngZone))).pipe((0,gn.R)(t.outsideAngular),(0,vn.QV)(t.insideAngular))})(e);var t}var An=function(e,t){return function(){var n=arguments;return t&&setTimeout(function(){"scheduled"===t.state&&t.invoke()},10),In(function(){return e.apply(void 0,n)})}},Rn=function(e,t){return function(){for(var n,r=this,i=arguments,a=0;a<arguments.length;a++)"function"==typeof i[a]&&(t&&(n||(n=In(function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",bn,{},bn,bn)}))),i[a]=An(i[a],n));var o=Tn(function(){return e.apply(r,i)});if(!t){if(o instanceof dn.y){var s=Sn();return o.pipe((0,gn.R)(s.outsideAngular),(0,vn.QV)(s.insideAngular))}return In(function(){return o})}return o instanceof dn.y?o.pipe(Cn):o instanceof Promise?In(function(){return new Promise(function(e,t){return o.then(function(t){return In(function(){return e(t)})},function(e){return In(function(){return t(e)})})})}):"function"==typeof o&&n?function(){return setTimeout(function(){n&&"scheduled"===n.state&&n.invoke()},10),o.apply(this,arguments)}:In(function(){return o})}}},156:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(3854),i=n(8604),a=n(279),o=n(9306),s=function(){function e(t,n){var r=this;v(this,e),this._delegate=t,this.firebase=n,(0,a._addComponent)(t,new i.wA("app-compat",function(){return r},"PUBLIC")),this.container=t.container}return p(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise(function(t){e._delegate.checkDestroyed(),t()}).then(function(){return e.firebase.INTERNAL.removeApp(e.name),(0,a.deleteApp)(e._delegate)})}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a._DEFAULT_ENTRY_NAME;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a._DEFAULT_ENTRY_NAME;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){(0,a._addComponent)(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){(0,a._addOrOverwriteComponent)(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),u=new r.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),c=function e(){var t=function(e){var t={},n={__esModule:!0,initializeApp:function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=a.initializeApp(i,o);if((0,r.r3)(t,s.name))return t[s.name];var u=new e(s,n);return t[s.name]=u,u},app:i,registerVersion:a.registerVersion,setLogLevel:a.setLogLevel,onLog:a.onLog,apps:null,SDK_VERSION:a.SDK_VERSION,INTERNAL:{registerComponent:function(t){var o=t.name,s=o.replace("-compat","");if(a._registerComponent(t)&&"PUBLIC"===t.type){var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!=typeof e[s])throw u.create("invalid-app-argument",{appName:o});return e[s]()};void 0!==t.serviceProps&&(0,r.ZB)(c,t.serviceProps),n[s]=c,e.prototype[s]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this._getService.bind(this,o).apply(this,t.multipleInstances?n:[])}}return"PUBLIC"===t.type?n[s]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:a}};function i(e){if(!(0,r.r3)(t,e=e||a._DEFAULT_ENTRY_NAME))throw u.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(function(e){return t[e]})}}),i.App=e,n}(s);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.ZB)(t,e)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),t}(),l=new o.Yd("@firebase/app-compat");if((0,r.jU)()&&void 0!==self.firebase){l.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var h=self.firebase.SDK_VERSION;h&&h.indexOf("LITE")>=0&&l.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var f=c;(0,a.registerVersion)("@firebase/app-compat","0.1.25",void 0)},279:function(e,t,r){"use strict";var i;r.r(t),r.d(t,{FirebaseError:function(){return c.ZR},SDK_VERSION:function(){return A},_DEFAULT_ENTRY_NAME:function(){return m},_addComponent:function(){return w},_addOrOverwriteComponent:function(){return _},_apps:function(){return k},_clearComponents:function(){return I},_components:function(){return b},_getProvider:function(){return S},_registerComponent:function(){return x},_removeServiceInstance:function(){return T},deleteApp:function(){return O},getApp:function(){return D},getApps:function(){return P},initializeApp:function(){return R},onLog:function(){return M},registerVersion:function(){return L},setLogLevel:function(){return Z}});var a=r(6304),o=r(8604),s=r(9306),c=r(3854),h=r(6508),f=function(){function e(t){v(this,e),this.container=t}return p(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map(function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(function(e){return e}).join(" ")}}]),e}(),d="@firebase/app",g=new s.Yd("@firebase/app"),m="[DEFAULT]",y=(n(i={},d,"fire-core"),n(i,"@firebase/app-compat","fire-core-compat"),n(i,"@firebase/analytics","fire-analytics"),n(i,"@firebase/analytics-compat","fire-analytics-compat"),n(i,"@firebase/app-check","fire-app-check"),n(i,"@firebase/app-check-compat","fire-app-check-compat"),n(i,"@firebase/auth","fire-auth"),n(i,"@firebase/auth-compat","fire-auth-compat"),n(i,"@firebase/database","fire-rtdb"),n(i,"@firebase/database-compat","fire-rtdb-compat"),n(i,"@firebase/functions","fire-fn"),n(i,"@firebase/functions-compat","fire-fn-compat"),n(i,"@firebase/installations","fire-iid"),n(i,"@firebase/installations-compat","fire-iid-compat"),n(i,"@firebase/messaging","fire-fcm"),n(i,"@firebase/messaging-compat","fire-fcm-compat"),n(i,"@firebase/performance","fire-perf"),n(i,"@firebase/performance-compat","fire-perf-compat"),n(i,"@firebase/remote-config","fire-rc"),n(i,"@firebase/remote-config-compat","fire-rc-compat"),n(i,"@firebase/storage","fire-gcs"),n(i,"@firebase/storage-compat","fire-gcs-compat"),n(i,"@firebase/firestore","fire-fst"),n(i,"@firebase/firestore-compat","fire-fst-compat"),n(i,"fire-js","fire-js"),n(i,"firebase","fire-js-all"),i),k=new Map,b=new Map;function w(e,t){try{e.container.addComponent(t)}catch(n){g.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function _(e,t){e.container.addOrOverwriteComponent(t)}function x(e){var t=e.name;if(b.has(t))return g.debug("There were multiple attempts to register component ".concat(t,".")),!1;b.set(t,e);var n,r=l(k.values());try{for(r.s();!(n=r.n()).done;){w(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function S(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;S(e,t).clearInstance(n)}function I(){b.clear()}var E=new c.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."}),C=function(){function e(t,n,r){var i=this;v(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new o.wA("app",function(){return i},"PUBLIC"))}return p(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw E.create("app-deleted",{appName:this._name})}}]),e}(),A="9.8.1";function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"object"!=typeof t&&(t={name:t});var n=Object.assign({name:m,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw E.create("bad-app-name",{appName:String(r)});var i=k.get(r);if(i){if((0,c.vZ)(e,i.options)&&(0,c.vZ)(n,i.config))return i;throw E.create("duplicate-app",{appName:r})}var a,s=new o.H0(r),u=l(b.values());try{for(u.s();!(a=u.n()).done;){var h=a.value;s.addComponent(h)}}catch(d){u.e(d)}finally{u.f()}var f=new C(e,n,s);return k.set(r,f),f}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=k.get(e);if(!t)throw E.create("no-app",{appName:e});return t}function P(){return Array.from(k.values())}function O(e){return N.apply(this,arguments)}function N(){return(N=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,e.t0=k.has(n),!e.t0){e.next=7;break}return k.delete(n),e.next=6,Promise.all(t.container.getProviders().map(function(e){return e.delete()}));case 6:t.isDeleted=!0;case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function L(e,t,n){var r,i=null!==(r=y[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),s=t.match(/\s|\//);if(a||s){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&s&&u.push("and"),s&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void g.warn(u.join(" "))}x(new o.wA("".concat(i,"-version"),function(){return{library:i,version:t}},"VERSION"))}function M(e,t){if(null!==e&&"function"!=typeof e)throw E.create("invalid-log-argument");(0,s.Am)(e,t)}function Z(e){(0,s.Ub)(e)}var U="firebase-heartbeat-store",F=null;function q(){return F||(F=(0,h.X3)("firebase-heartbeat-database",1,{upgrade:function(e,t){switch(t){case 0:e.createObjectStore(U)}}}).catch(function(e){throw E.create("storage-open",{originalErrorMessage:e.message})})),F}function V(){return(V=(0,a.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q();case 3:return e.abrupt("return",e.sent.transaction(U).objectStore(U).get(H(t)));case 6:throw e.prev=6,e.t0=e.catch(0),E.create("storage-get",{originalErrorMessage:e.t0.message});case 9:case"end":return e.stop()}},e,null,[[0,6]])}))).apply(this,arguments)}function j(e,t){return B.apply(this,arguments)}function B(){return(B=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q();case 3:return r=e.sent.transaction(U,"readwrite"),i=r.objectStore(U),e.next=7,i.put(n,H(t));case 7:return e.abrupt("return",r.done);case 10:throw e.prev=10,e.t0=e.catch(0),E.create("storage-set",{originalErrorMessage:e.t0.message});case 13:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function H(e){return"".concat(e.name,"!").concat(e.options.appId)}var z=function(){function e(t){var n=this;v(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new K(r),this._heartbeatsCachePromise=this._storage.read().then(function(e){return n._heartbeatsCache=e,e})}return p(e,[{key:"triggerHeartbeat",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=G(),t.t0=null===e._heartbeatsCache,!t.t0){t.next=6;break}return t.next=5,e._heartbeatsCachePromise;case 5:e._heartbeatsCache=t.sent;case 6:if(e._heartbeatsCache.lastSentHeartbeatDate===r||e._heartbeatsCache.heartbeats.some(function(e){return e.date===r})){t.next=8;break}return t.abrupt("return",(e._heartbeatsCache.heartbeats.push({date:r,agent:n}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),e._storage.overwrite(e._heartbeatsCache)));case 8:case"end":return t.stop()}},t)}))()}},{key:"getHeartbeatsHeader",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===e._heartbeatsCache,!t.t0){t.next=4;break}return t.next=4,e._heartbeatsCachePromise;case 4:if(null!==e._heartbeatsCache&&0!==e._heartbeatsCache.heartbeats.length){t.next=6;break}return t.abrupt("return","");case 6:if(n=G(),r=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=l(e);try{var o=function(){var e=t.value,a=r.find(function(t){return t.agent===e.agent});if(a){if(a.dates.push(e.date),W(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),W(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}(e._heartbeatsCache.heartbeats),i=r.heartbeatsToSend,a=r.unsentEntries,o=(0,c.L)(JSON.stringify({version:2,heartbeats:i})),e._heartbeatsCache.lastSentHeartbeatDate=n,!(a.length>0)){t.next=14;break}return e._heartbeatsCache.heartbeats=a,t.next=12,e._storage.overwrite(e._heartbeatsCache);case 12:t.next=15;break;case 14:e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache);case 15:return t.abrupt("return",o);case 16:case"end":return t.stop()}},t)}))()}}]),e}();function G(){return(new Date).toISOString().substring(0,10)}var K=function(){function e(t){v(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return p(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){return(0,a.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!!(0,c.hl)()&&(0,c.eu)().then(function(){return!0}).catch(function(){return!1}));case 1:case"end":return e.stop()}},e)}))()}},{key:"read",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._canUseIndexedDBPromise;case 2:if(t.t1=t.sent,!t.t1){t.next=7;break}return t.next=6,function(e){return V.apply(this,arguments)}(e.app);case 6:t.t1=t.sent;case 7:if(t.t0=t.t1,t.t0){t.next=10;break}t.t0={heartbeats:[]};case 10:return t.abrupt("return",t.t0);case 11:case"end":return t.stop()}},t)}))()}},{key:"overwrite",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t._canUseIndexedDBPromise;case 2:if(!n.sent){n.next=7;break}return n.next=5,t.read();case 5:return i=n.sent,n.abrupt("return",j(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats}));case 7:case"end":return n.stop()}},n)}))()}},{key:"add",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t._canUseIndexedDBPromise;case 2:if(!n.sent){n.next=7;break}return n.next=5,t.read();case 5:return i=n.sent,n.abrupt("return",j(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:i.lastSentHeartbeatDate,heartbeats:[].concat(u(i.heartbeats),u(e.heartbeats))}));case 7:case"end":return n.stop()}},n)}))()}}]),e}();function W(e){return(0,c.L)(JSON.stringify({version:2,heartbeats:e})).length}x(new o.wA("platform-logger",function(e){return new f(e)},"PRIVATE")),x(new o.wA("heartbeat",function(e){return new z(e)},"PRIVATE")),L(d,"0.7.24",""),L(d,"0.7.24","esm2017"),L("fire-js","")},8882:function(e,t,i){"use strict";i.d(t,{$:function(){return un},A:function(){return b},B:function(){return w},G:function(){return Be},H:function(){return Ge},J:function(){return vt},L:function(){return Se},M:function(){return St},N:function(){return Ct},P:function(){return Qr},Q:function(){return At},R:function(){return Fr},T:function(){return Rt},U:function(){return Et},V:function(){return Pt},W:function(){return Ot},X:function(){return Ut},Y:function(){return Xt},Z:function(){return tn},_:function(){return rn},a:function(){return hr},a0:function(){return dn},a1:function(){return vn},a2:function(){return mn},a3:function(){return kn},a4:function(){return wn},a5:function(){return xn},a6:function(){return Tn},a7:function(){return In},a8:function(){return Cn},a9:function(){return An},aA:function(){return Ni},aB:function(){return Ri},aC:function(){return ki},aD:function(){return yi},aE:function(){return Ve},aI:function(){return dr},aL:function(){return Dt},aa:function(){return On},ab:function(){return Ln},ac:function(){return Zn},af:function(){return Vn},ag:function(){return Bn},ah:function(){return Hn},ak:function(){return Bt},al:function(){return Xn},an:function(){return nr},ao:function(){return or},ap:function(){return Me},aq:function(){return O},ar:function(){return Le},as:function(){return Pe},at:function(){return I},au:function(){return ea},av:function(){return Zi},aw:function(){return E},ax:function(){return D},ay:function(){return L},az:function(){return Te},b:function(){return lr},c:function(){return oi},d:function(){return li},e:function(){return ui},f:function(){return _i},g:function(){return Ii},h:function(){return Si},i:function(){return Er},j:function(){return Ci},k:function(){return ta},l:function(){return Br},m:function(){return ra},o:function(){return y},r:function(){return zr},s:function(){return Vr},u:function(){return Jr}});var a=i(6304),s=i(3854),c=i(279);function h(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}var f=i(9306),d=i(8604),y={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},b={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"},w=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},_=new s.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),x=new f.Yd("@firebase/auth");function T(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];x.logLevel<=f.in.ERROR&&x.error.apply(x,["Auth (".concat(c.SDK_VERSION,"): ").concat(e)].concat(n))}function I(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw R.apply(void 0,[e].concat(n))}function E(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return R.apply(void 0,[e].concat(n))}function C(e,t,r){var i=Object.assign(Object.assign({},{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),n({},t,r));return new s.LL("auth","Firebase",i).create(t,{appName:e.name})}function A(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&I(e,"argument-error"),C(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.Did you pass a reference from a different Auth SDK?"))}function R(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!=typeof e){var i,a=n[0],o=u(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(u(o)))}return _.create.apply(_,[e].concat(n))}function D(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!e)throw R.apply(void 0,[t].concat(r))}function P(e){var t="INTERNAL ASSERTION FAILED: "+e;throw T(t),new Error(t)}function O(e,t){e||P(t)}var N=new Map;function L(e){O(e instanceof Function,"Expected a class definition");var t=N.get(e);return t?(O(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,N.set(e,t),t)}function M(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Z(){return"http:"===U()||"https:"===U()}function U(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var F=function(){function e(t,n){v(this,e),this.shortDelay=t,this.longDelay=n,O(n>t,"Short delay should be less than long delay!"),this.isMobile=(0,s.uI)()||(0,s.b$)()}return p(e,[{key:"get",value:function(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Z()||(0,s.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function q(e,t){O(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var V=function(){function e(){v(this,e)}return p(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void P("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void P("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void P("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),j={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},B=new F(3e4,6e4);function H(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function z(e,t,n,r){return G.apply(this,arguments)}function G(){return(G=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var o,u=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=u.length>4&&void 0!==u[4]?u[4]:{},e.abrupt("return",K(t,o,(0,a.Z)(regeneratorRuntime.mark(function e(){var a,o,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=(0,s.xO)(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=5,t._getAdditionalHeaders();case 5:return c=e.sent,e.abrupt("return",(c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),V.fetch()(Q(t,t.config.apiHost,r,u),Object.assign({method:n,headers:c,referrerPolicy:"no-referrer"},a))));case 7:case"end":return e.stop()}},e)}))));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function K(e,t,n){return W.apply(this,arguments)}function W(){return(W=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,i){var a,o,u,c,l,h,f,d,p,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,a=Object.assign(Object.assign({},j),n),e.prev=2,o=new $(t),e.next=6,Promise.race([i(),o.promise]);case 6:return u=e.sent,o.clearNetworkTimeout(),e.next=10,u.json();case 10:if(!("needConfirmation"in(c=e.sent))){e.next=13;break}throw X(t,"account-exists-with-different-credential",c);case 13:if(!u.ok||"errorMessage"in c){e.next=15;break}return e.abrupt("return",c);case 15:if(l=u.ok?c.errorMessage:c.error.message,h=l.split(" : "),f=r(h,2),d=f[0],p=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==d){e.next=18;break}throw X(t,"credential-already-in-use",c);case 18:if("EMAIL_EXISTS"!==d){e.next=20;break}throw X(t,"email-already-in-use",c);case 20:if(v=a[d]||d.toLowerCase().replace(/[_\s]+/g,"-"),!p){e.next=23;break}throw C(t,v,p);case 23:I(t,v),e.next=31;break;case 26:if(e.prev=26,e.t0=e.catch(2),!(e.t0 instanceof s.ZR)){e.next=30;break}throw e.t0;case 30:I(t,"network-request-failed");case 31:case"end":return e.stop()}},e,null,[[2,26]])}))).apply(this,arguments)}function J(e,t,n,r){return Y.apply(this,arguments)}function Y(){return(Y=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,s=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,z(t,n,r,i,a);case 3:return o=e.sent,e.abrupt("return",("mfaPendingCredential"in o&&I(t,"multi-factor-auth-required",{_serverResponse:o}),o));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Q(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?q(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var $=function(){function e(t){var n=this;v(this,e),this.auth=t,this.timer=null,this.promise=new Promise(function(e,t){n.timer=setTimeout(function(){return t(E(n.auth,"network-request-failed"))},B.get())})}return p(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function X(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=E(e,t,r);return i.customData._tokenResponse=n,i}function ee(){return(ee=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function te(e,t){return ne.apply(this,arguments)}function ne(){return(ne=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function re(e,t){return ie.apply(this,arguments)}function ie(){return(ie=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ae(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function oe(){return(oe=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,u,c=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],r=(0,s.m9)(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,D((a=ue(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"==typeof a.firebase?a.firebase:void 0,u=null==o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:ae(se(a.auth_time)),issuedAtTime:ae(se(a.iat)),expirationTime:ae(se(a.exp)),signInProvider:u||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null});case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function se(e){return 1e3*Number(e)}function ue(e){var t=r(e.split("."),3),n=t[0],i=t[1],a=t[2];if(void 0===n||void 0===i||void 0===a)return T("JWT malformed, contained fewer than 3 sections"),null;try{var o=(0,s.tV)(i);return o?JSON.parse(o):(T("Failed to decode base64 JWT payload"),null)}catch(u){return T("Caught error parsing JWT payload as JSON",u),null}}function ce(e,t){return le.apply(this,arguments)}function le(){return(le=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),e.t1=e.t0 instanceof s.ZR&&he(e.t0)&&t.auth.currentUser===t,!e.t1){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}},e,null,[[3,9]])}))).apply(this,arguments)}function he(e){var t=e.code;return"auth/user-disabled"===t||"auth/user-token-expired"===t}var fe=function(){function e(t){v(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return p(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;if(this.isRunning){var n=this.getInterval(e);this.timerId=setTimeout((0,a.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.iteration();case 2:case"end":return e.stop()}},e)})),n)}}},{key:"iteration",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.user.getIdToken(!0);case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return",void("auth/network-request-failed"===t.t0.code&&e.schedule(!0)));case 8:e.schedule();case 9:case"end":return t.stop()}},t,null,[[0,5]])}))()}}]),e}(),de=function(){function e(t,n){v(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return p(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=ae(this.lastLoginAt),this.creationTime=ae(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function pe(e){return ve.apply(this,arguments)}function ve(){return(ve=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,s,u,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,ce(t,re(r,{idToken:i}));case 6:D(null==(a=e.sent)?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?ye(o.providerUserInfo):[],u=me(t.providerData,s),c=!!t.isAnonymous&&!(t.email&&o.passwordHash||(null==u?void 0:u.length)),l={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new de(o.createdAt,o.lastLoginAt),isAnonymous:c},Object.assign(t,l);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ge(){return(ge=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.m9)(t),e.next=3,pe(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function me(e,t){return[].concat(u(e.filter(function(e){return!t.some(function(t){return t.providerId===e.providerId})})),u(t))}function ye(e){return e.map(function(e){var t=e.providerId,n=h(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function ke(){return(ke=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t,{},(0,a.Z)(regeneratorRuntime.mark(function e(){var r,i,a,o,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s.xO)({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Q(t,a,"/v1/token","key=".concat(o)),e.next=7,t._getAdditionalHeaders();case 7:return c=e.sent,e.abrupt("return",(c["Content-Type"]="application/x-www-form-urlencoded",V.fetch()(u,{method:"POST",headers:c,body:r})));case 9:case"end":return e.stop()}},e)})));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var be=function(){function e(){v(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return p(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){D(e.idToken,"internal-error"),D(void 0!==e.idToken,"internal-error"),D(void 0!==e.refreshToken,"internal-error");var t,n,r="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):(t=e.idToken,D(n=ue(t),"internal-error"),D(void 0!==n.exp,"internal-error"),D(void 0!==n.iat,"internal-error"),Number(n.exp)-Number(n.iat));this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}},{key:"getToken",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return(0,a.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(D(!n.accessToken||n.refreshToken,e,"user-token-expired"),!t&&n.accessToken&&!n.isExpired){r.next=12;break}if(!n.refreshToken){r.next=8;break}return r.next=5,n.refresh(e,n.refreshToken);case 5:r.t1=n.accessToken,r.next=9;break;case 8:r.t1=null;case 9:r.t0=r.t1,r.next=13;break;case 12:r.t0=n.accessToken;case 13:return r.abrupt("return",r.t0);case 14:case"end":return r.stop()}},r)}))()}},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(e,t){var n=this;return(0,a.Z)(regeneratorRuntime.mark(function r(){var i,a,o,s;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e,t){return ke.apply(this,arguments)}(e,t);case 2:i=r.sent,a=i.accessToken,o=i.refreshToken,s=i.expiresIn,n.updateTokensAndExpiration(a,o,Number(s));case 7:case"end":return r.stop()}},r)}))()}},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return P("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(D("string"==typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(D("string"==typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(D("number"==typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function we(e,t){D("string"==typeof e||void 0===e,"internal-error",{appName:t})}var _e,xe=function(){function e(t){v(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=h(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?u(a.providerData):[],this.metadata=new de(a.createdAt||void 0,a.lastLoginAt||void 0)}return p(e,[{key:"getIdToken",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ce(t,t.stsTokenManager.getToken(t.auth,e));case 2:if(D(r=n.sent,t.auth,"internal-error"),n.t0=t.accessToken!==r,!n.t0){n.next=10;break}return t.accessToken=r,n.next=9,t.auth._persistUserIfCurrent(t);case 9:t.auth._notifyListenersIfCurrent(t);case 10:return n.abrupt("return",r);case 11:case"end":return n.stop()}},n)}))()}},{key:"getIdTokenResult",value:function(e){return function(e){return oe.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return ge.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(D(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(function(e){return Object.assign({},e)}),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){D(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return(0,a.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(i=!1,e.idToken&&e.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(e),i=!0),r.t0=t,!r.t0){r.next=6;break}return r.next=6,pe(n);case 6:return r.next=8,n.auth._persistUserIfCurrent(n);case 8:i&&n.auth._notifyListenersIfCurrent(n);case 9:case"end":return r.stop()}},r)}))()}},{key:"delete",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getIdToken();case 2:return n=t.sent,t.next=5,ce(e,function(e,t){return ee.apply(this,arguments)}(e.auth,{idToken:n}));case 5:return e.stsTokenManager.clearRefreshToken(),t.abrupt("return",e.auth.signOut());case 7:case"end":return t.stop()}},t)}))()}},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(function(e){return Object.assign({},e)}),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,g=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;D(k&&x,t,"internal-error");var S=be.fromJSON(this.name,x);D("string"==typeof k,t,"internal-error"),we(h,t.name),we(f,t.name),D("boolean"==typeof b,t,"internal-error"),D("boolean"==typeof w,t,"internal-error"),we(d,t.name),we(p,t.name),we(v,t.name),we(g,t.name),we(m,t.name),we(y,t.name);var T=new e({uid:k,auth:t,email:f,emailVerified:b,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:S,createdAt:m,lastLoginAt:y});return _&&Array.isArray(_)&&(T.providerData=_.map(function(e){return Object.assign({},e)})),g&&(T._redirectEventId=g),T}},{key:"_fromIdTokenResponse",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,a.Z)(regeneratorRuntime.mark(function i(){var a,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return(a=new be).updateFromServerResponse(n),o=new e({uid:n.localId,auth:t,stsTokenManager:a,isAnonymous:r}),i.next=5,pe(o);case 5:return i.abrupt("return",o);case 6:case"end":return i.stop()}},i)}))()}}]),e}(),Se=((_e=function(){function e(){v(this,e),this.type="NONE",this.storage={}}return p(e,[{key:"_isAvailable",value:function(){return(0,a.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}},e)}))()}},{key:"_set",value:function(e,t){var n=this;return(0,a.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n.storage[e]=t;case 1:case"end":return r.stop()}},r)}))()}},{key:"_get",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.storage[e],n.abrupt("return",void 0===r?null:r);case 2:case"end":return n.stop()}},n)}))()}},{key:"_remove",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:delete t.storage[e];case 1:case"end":return n.stop()}},n)}))()}},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}()).type="NONE",_e);function Te(e,t,n){return"firebase:".concat(e,":").concat(t,":").concat(n)}var Ie=function(){function e(t,n,r){v(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Te(this.userKey,a.apiKey,o),this.fullPersistenceKey=Te("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return p(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.persistence._get(e.fullUserKey);case 2:return n=t.sent,t.abrupt("return",n?xe._fromJSON(e.auth,n):null);case 4:case"end":return t.stop()}},t)}))()}},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.persistence!==e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.getCurrentUser();case 4:return r=n.sent,n.next=7,t.removeCurrentUser();case 7:return t.persistence=e,n.abrupt("return",r?t.setCurrentUser(r):void 0);case 9:case"end":return n.stop()}},n)}))()}},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";return(0,a.Z)(regeneratorRuntime.mark(function i(){var o,s,u,c,h,f,d,p,v,g;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n.length){i.next=2;break}return i.abrupt("return",new e(L(Se),t,r));case 2:return i.next=4,Promise.all(n.map(function(){var e=(0,a.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 4:o=i.sent.filter(function(e){return e}),s=o[0]||L(Se),u=Te(r,t.config.apiKey,t.name),c=null,h=l(n),i.prev=9,h.s();case 11:if((f=h.n()).done){i.next=27;break}return d=f.value,i.prev=13,i.next=16,d._get(u);case 16:if(!(p=i.sent)){i.next=21;break}return v=xe._fromJSON(t,p),d!==s&&(c=v),s=d,i.abrupt("break",27);case 21:i.next=25;break;case 23:i.prev=23,i.t0=i.catch(13);case 25:i.next=11;break;case 27:i.next=32;break;case 29:i.prev=29,i.t1=i.catch(9),h.e(i.t1);case 32:return i.prev=32,h.f(),i.finish(32);case 35:if(g=o.filter(function(e){return e._shouldAllowMigration}),!s._shouldAllowMigration||!g.length){i.next=47;break}if(s=g[0],i.t3=c,!i.t3){i.next=42;break}return i.next=42,s._set(u,c.toJSON());case 42:return i.next=44,Promise.all(n.map(function(){var e=(0,a.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===s){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}},e,null,[[1,6]])}));return function(t){return e.apply(this,arguments)}}()));case 44:i.t2=new e(s,t,r),i.next=48;break;case 47:i.t2=new e(s,t,r);case 48:return i.abrupt("return",i.t2);case 49:case"end":return i.stop()}},i,null,[[9,29,32,35],[13,23]])}))()}}]),e}();function Ee(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(De(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ce(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Oe(t))return"Blackberry";if(Ne(t))return"Webos";if(Ae(t))return"Safari";if((t.includes("chrome/")||Re(t))&&!t.includes("edge/"))return"Chrome";if(Pe(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null==n?void 0:n.length)?n[1]:"Other"}function Ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.z$)();return/firefox\//i.test(e)}function Ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.z$)(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.z$)();return/crios\//i.test(e)}function De(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.z$)();return/iemobile/i.test(e)}function Pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.z$)();return/android/i.test(e)}function Oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.z$)();return/blackberry/i.test(e)}function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.z$)();return/webos/i.test(e)}function Le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.z$)();return/iphone|ipad|ipod/i.test(e)}function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.z$)();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}function Ze(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.z$)();return Le(e)||Pe(e)||Ne(e)||Oe(e)||/windows phone/i.test(e)||De(e)}function Ue(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ee((0,s.z$)());break;case"Worker":t="".concat(Ee((0,s.z$)()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/JsCore/").concat(c.SDK_VERSION,"/").concat(r)}var Fe=function(){function e(t){v(this,e),this.auth=t,this.queue=[]}return p(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise(function(n,r){try{n(e(t))}catch(i){r(i)}})};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r,i,a,o,s,u,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.auth.currentUser!==e){n.next=2;break}return n.abrupt("return");case 2:r=[],n.prev=3,i=l(t.queue),n.prev=5,i.s();case 7:if((a=i.n()).done){n.next=14;break}return o=a.value,n.next=11,o(e);case 11:o.onAbort&&r.push(o.onAbort);case 12:n.next=7;break;case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(5),i.e(n.t0);case 19:return n.prev=19,i.f(),n.finish(19);case 22:n.next=30;break;case 24:n.prev=24,n.t1=n.catch(3),r.reverse(),s=l(r);try{for(s.s();!(u=s.n()).done;){c=u.value;try{c()}catch(h){}}}catch(f){s.e(f)}finally{s.f()}throw t.auth._errorFactory.create("login-blocked",{originalMessage:n.t1.message});case 30:case"end":return n.stop()}},n,null,[[3,24],[5,16,19,22]])}))()}}]),e}(),qe=function(){function e(t,n,r){v(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new je(this),this.idTokenSubscription=new je(this),this.beforeStateQueue=new Fe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return p(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=L(t)),this._initializationPromise=this.queue((0,a.Z)(regeneratorRuntime.mark(function r(){var i,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=!n._deleted,!r.t0){r.next=6;break}return r.next=4,Ie.create(n,e);case 4:n.persistenceManager=r.sent,r.t0=!n._deleted;case 6:if(!r.t0){r.next=19;break}if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t1=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,n._deleted||(n._isInitialized=!0);case 19:case"end":return r.stop()}},r,null,[[8,13]])}))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._deleted){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.assertedPersistence.getCurrentUser();case 4:if(n=t.sent,!e.currentUser&&!n){t.next=19;break}if(!e.currentUser||!n||e.currentUser.uid!==n.uid){t.next=13;break}return e._currentUser._assign(n),t.next=10,e.currentUser.getIdToken();case 10:t.t1=void t.sent,t.next=16;break;case 13:return t.next=15,e._updateCurrentUser(n,!0);case 15:t.t1=void t.sent;case 16:t.t0=t.t1,t.next=20;break;case 19:t.t0=void 0;case 20:return t.abrupt("return",t.t0);case 21:case"end":return t.stop()}},t)}))()}},{key:"initializeCurrentUser",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r,i,a,o,s,u,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.getCurrentUser();case 2:if(i=n.sent,a=i,o=!1,!e||!t.config.authDomain){n.next=13;break}return n.next=7,t.getOrInitRedirectPersistenceManager();case 7:return s=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,u=null==a?void 0:a._redirectEventId,n.next=11,t.tryRedirectSignIn(e);case 11:c=n.sent,s&&s!==u||!(null==c?void 0:c.user)||(a=c.user,o=!0);case 13:if(a){n.next=15;break}return n.abrupt("return",t.directlySetCurrentUser(null));case 15:if(a._redirectEventId){n.next=26;break}if(!o){n.next=25;break}return n.prev=17,n.next=20,t.beforeStateQueue.runMiddleware(a);case 20:n.next=25;break;case 22:n.prev=22,n.t0=n.catch(17),a=i,t._popupRedirectResolver._overrideRedirectResult(t,function(){return Promise.reject(n.t0)});case 25:return n.abrupt("return",a?t.reloadAndSetCurrentUserOrClear(a):t.directlySetCurrentUser(null));case 26:return D(t._popupRedirectResolver,t,"argument-error"),n.next=29,t.getOrInitRedirectPersistenceManager();case 29:return n.abrupt("return",t.redirectUser&&t.redirectUser._redirectEventId===a._redirectEventId?t.directlySetCurrentUser(a):t.reloadAndSetCurrentUserOrClear(a));case 30:case"end":return n.stop()}},n,null,[[17,22]])}))()}},{key:"tryRedirectSignIn",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=null,n.prev=1,n.next=4,t._popupRedirectResolver._completeRedirectFn(t,e,!0);case 4:r=n.sent,n.next=11;break;case 7:return n.prev=7,n.t0=n.catch(1),n.next=11,t._setRedirectUser(null);case 11:return n.abrupt("return",r);case 12:case"end":return n.stop()}},n,null,[[1,7]])}))()}},{key:"reloadAndSetCurrentUserOrClear",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,pe(e);case 3:n.next=9;break;case 5:if(n.prev=5,n.t0=n.catch(0),"auth/network-request-failed"===n.t0.code){n.next=9;break}return n.abrupt("return",t.directlySetCurrentUser(null));case 9:return n.abrupt("return",t.directlySetCurrentUser(e));case 10:case"end":return n.stop()}},n,null,[[0,5]])}))()}},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"==typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e._deleted=!0;case 1:case"end":return t.stop()}},t)}))()}},{key:"updateCurrentUser",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e?(0,s.m9)(e):null,n.abrupt("return",(r&&D(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))));case 2:case"end":return n.stop()}},n)}))()}},{key:"_updateCurrentUser",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return(0,a.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n._deleted){r.next=7;break}if(e&&D(n.tenantId===e.tenantId,n,"tenant-id-mismatch"),r.t0=t,r.t0){r.next=6;break}return r.next=6,n.beforeStateQueue.runMiddleware(e);case 6:return r.abrupt("return",n.queue((0,a.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.directlySetCurrentUser(e);case 2:n.notifyAuthListeners();case 3:case"end":return t.stop()}},t)}))));case 7:case"end":return r.stop()}},r)}))()}},{key:"signOut",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.beforeStateQueue.runMiddleware(null);case 2:if(t.t0=e.redirectPersistenceManager||e._popupRedirectResolver,!t.t0){t.next=6;break}return t.next=6,e._setRedirectUser(null);case 6:return t.abrupt("return",e._updateCurrentUser(null,!0));case 7:case"end":return t.stop()}},t)}))()}},{key:"setPersistence",value:function(e){var t=this;return this.queue((0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(L(e));case 2:case"end":return n.stop()}},n)})))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new s.LL("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(e,t){var n=this;return(0,a.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.getOrInitRedirectPersistenceManager(t);case 2:return i=r.sent,r.abrupt("return",null===e?i.removeCurrentUser():i.setCurrentUser(e));case 4:case"end":return r.stop()}},r)}))()}},{key:"getOrInitRedirectPersistenceManager",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.redirectPersistenceManager){n.next=9;break}return D(r=e&&L(e)||t._popupRedirectResolver,t,"argument-error"),n.next=5,Ie.create(t,[L(r._redirectPersistence)],"redirectUser");case 5:return t.redirectPersistenceManager=n.sent,n.next=8,t.redirectPersistenceManager.getCurrentUser();case 8:t.redirectUser=n.sent;case 9:return n.abrupt("return",t.redirectPersistenceManager);case 10:case"end":return n.stop()}},n)}))()}},{key:"_redirectUserForId",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=t._isInitialized,!n.t0){n.next=4;break}return n.next=4,t.queue((0,a.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})));case 4:return n.abrupt("return",(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null);case 5:case"end":return n.stop()}},n)}))()}},{key:"_persistUserIfCurrent",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e!==t.currentUser){n.next=2;break}return n.abrupt("return",t.queue((0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.directlySetCurrentUser(e));case 1:case"end":return n.stop()}},n)}))));case 2:case"end":return n.stop()}},n)}))()}},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return D(o,this,"internal-error"),o.then(function(){return a(i.currentUser)}),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.currentUser&&t.currentUser!==e&&(t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh()),t.currentUser=e,!e){n.next=7;break}return n.next=5,t.assertedPersistence.setCurrentUser(e);case 5:n.next=9;break;case 7:return n.next=9,t.assertedPersistence.removeCurrentUser();case 9:case"end":return n.stop()}},n)}))()}},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return D(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ue(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={"X-Client-Version":e.clientVersion},e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId),t.next=4,null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();case 4:return i=t.sent,t.abrupt("return",(i&&(r["X-Firebase-Client"]=i),r));case 6:case"end":return t.stop()}},t)}))()}}]),e}();function Ve(e){return(0,s.m9)(e)}var je=function(){function e(t){var n=this;v(this,e),this.auth=t,this.observer=null,this.addObserver=(0,s.ne)(function(e){return n.observer=e})}return p(e,[{key:"next",get:function(){return D(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Be(e,t,n){var i=Ve(e);D(i._canInitEmulator,i,"emulator-config-failed"),D(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");var a=!!(null==n?void 0:n.disableWarnings),o=He(t),s=function(e){var t=He(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var i=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){var o=a[1];return{host:o,port:ze(i.substr(o.length+1))}}var s=r(i.split(":"),2);return{host:s[0],port:ze(s[1])}}(t),u=s.host,c=s.port;i.config.emulator={url:"".concat(o,"//").concat(u).concat(null===c?"":":".concat(c),"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:u,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})}),a||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function He(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ze(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Ge=function(){function e(t,n){v(this,e),this.providerId=t,this.signInMethod=n}return p(e,[{key:"toJSON",value:function(){return P("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return P("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return P("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return P("not implemented")}}]),e}();function Ke(e,t){return We.apply(this,arguments)}function We(){return(We=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z(t,"POST","/v1/accounts:resetPassword",H(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Je(e,t){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qe(e,t){return $e.apply(this,arguments)}function $e(){return($e=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z(t,"POST","/v1/accounts:update",H(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xe(){return(Xe=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J(t,"POST","/v1/accounts:signInWithPassword",H(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function et(e,t){return tt.apply(this,arguments)}function tt(){return(tt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z(t,"POST","/v1/accounts:sendOobCode",H(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function nt(e,t){return rt.apply(this,arguments)}function rt(){return(rt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",et(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function it(e,t){return at.apply(this,arguments)}function at(){return(at=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",et(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ot(e,t){return st.apply(this,arguments)}function st(){return(st=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",et(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ut(e,t){return ct.apply(this,arguments)}function ct(){return(ct=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",et(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function lt(){return(lt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J(t,"POST","/v1/accounts:signInWithEmailLink",H(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ht(){return(ht=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J(t,"POST","/v1/accounts:signInWithEmailLink",H(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ft=function(e){g(n,e);var t=m(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return v(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return p(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=t.signInMethod,n.next="password"===n.t0?3:"emailLink"===n.t0?4:5;break;case 3:return n.abrupt("return",function(e,t){return Xe.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password}));case 4:return n.abrupt("return",function(e,t){return lt.apply(this,arguments)}(e,{email:t._email,oobCode:t._password}));case 5:I(e,"internal-error");case 6:case"end":return n.stop()}},n)}))()}},{key:"_linkToIdToken",value:function(e,t){var n=this;return(0,a.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=n.signInMethod,r.next="password"===r.t0?3:"emailLink"===r.t0?4:5;break;case 3:return r.abrupt("return",Je(e,{idToken:t,returnSecureToken:!0,email:n._email,password:n._password}));case 4:return r.abrupt("return",function(e,t){return ht.apply(this,arguments)}(e,{idToken:t,email:n._email,oobCode:n._password}));case 5:I(e,"internal-error");case 6:case"end":return r.stop()}},r)}))()}},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Ge);function dt(e,t){return pt.apply(this,arguments)}function pt(){return(pt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J(t,"POST","/v1/accounts:signInWithIdp",H(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var vt=function(e){g(n,e);var t=m(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return p(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return dt(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,dt(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,dt(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,s.xO)(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):I("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=h(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Ge);function gt(e,t){return mt.apply(this,arguments)}function mt(){return(mt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z(t,"POST","/v1/accounts:sendVerificationCode",H(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yt(){return(yt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J(t,"POST","/v1/accounts:signInWithPhoneNumber",H(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function kt(){return(kt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t,"POST","/v1/accounts:signInWithPhoneNumber",H(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw X(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var bt={USER_NOT_FOUND:"user-not-found"};function wt(){return(wt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J(t,"POST","/v1/accounts:signInWithPhoneNumber",H(t,Object.assign(Object.assign({},n),{operation:"REAUTH"})),bt));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var _t=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,"phone","phone")).params=e,r}return p(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return yt.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return kt.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return wt.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Ge),xt=function(){function e(t){var n,r,i,a,o,u;v(this,e);var c=(0,s.zd)((0,s.pd)(t)),l=null!==(n=c.apiKey)&&void 0!==n?n:null,h=null!==(r=c.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);D(l&&h&&f,"argument-error"),this.apiKey=l,this.operation=f,this.code=h,this.continueUrl=null!==(a=c.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=c.tenantId)&&void 0!==u?u:null}return p(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=(0,s.zd)((0,s.pd)(e)).link,n=t?(0,s.zd)((0,s.pd)(t)).deep_link_id:null,r=(0,s.zd)((0,s.pd)(e)).deep_link_id;return(r?(0,s.zd)((0,s.pd)(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}(),St=function(){var e=function(){function e(){v(this,e),this.providerId=e.PROVIDER_ID}return p(e,null,[{key:"credential",value:function(e,t){return ft._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=xt.parseLink(t);return D(n,"argument-error"),ft._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e}(),Tt=function(){function e(t){v(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return p(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),It=function(e){g(n,e);var t=m(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments)).scopes=[],e}return p(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return u(this.scopes)}}]),n}(Tt),Et=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return D(e.idToken||e.accessToken,"argument-error"),vt._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;return D("providerId"in t&&"signInMethod"in t,"argument-error"),vt._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!(i||a||r||o))return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(It),Ct=function(){var e=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.call(this,"facebook.com")}return p(n,null,[{key:"credential",value:function(e){return vt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(It);return e.FACEBOOK_SIGN_IN_METHOD="facebook.com",e.PROVIDER_ID="facebook.com",e}(),At=function(){var e=function(e){g(n,e);var t=m(n);function n(){var e;return v(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return p(n,null,[{key:"credential",value:function(e,t){return vt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(It);return e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com",e}(),Rt=function(){var e=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.call(this,"github.com")}return p(n,null,[{key:"credential",value:function(e){return vt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(It);return e.GITHUB_SIGN_IN_METHOD="github.com",e.PROVIDER_ID="github.com",e}(),Dt=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return p(n,[{key:"_getIdTokenResponse",value:function(e){return dt(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,dt(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,dt(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Ge),Pt=function(e){g(n,e);var t=m(n);function n(e){return v(this,n),D(e.startsWith("saml."),"argument-error"),t.call(this,e)}return p(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Dt.fromJSON(e);return D(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Dt._create(r,n)}catch(i){return null}}}]),n}(Tt),Ot=function(){var e=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.call(this,"twitter.com")}return p(n,null,[{key:"credential",value:function(e,t){return vt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(It);return e.TWITTER_SIGN_IN_METHOD="twitter.com",e.PROVIDER_ID="twitter.com",e}();function Nt(e,t){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J(t,"POST","/v1/accounts:signUp",H(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Mt=function(){function e(t){v(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return p(e,null,[{key:"_fromIdTokenResponse",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,a.Z)(regeneratorRuntime.mark(function a(){var o,s;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,xe._fromIdTokenResponse(t,r,i);case 2:return o=a.sent,s=Zt(r),a.abrupt("return",new e({user:o,providerId:s,_tokenResponse:r,operationType:n}));case 5:case"end":return a.stop()}},a)}))()}},{key:"_forOperation",value:function(t,n,r){return(0,a.Z)(regeneratorRuntime.mark(function i(){var a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t._updateTokensIfNecessary(r,!0);case 2:return a=Zt(r),i.abrupt("return",new e({user:t,providerId:a,_tokenResponse:r,operationType:n}));case 4:case"end":return i.stop()}},i)}))()}}]),e}();function Zt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Ut(e){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ve(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Mt({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Nt(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Mt._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}var qt=function(e){g(n,e);var t=m(n);function n(e,r,i,a){var o,s;return v(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(k(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return p(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(s.ZR);function Vt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(function(n){if("auth/multi-factor-auth-required"===n.code)throw qt._fromErrorAndOperation(e,n,t,r);throw n})}function jt(e){return new Set(e.map(function(e){return e.providerId}).filter(function(e){return!!e}))}function Bt(e,t){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s.m9)(t),e.next=3,Kt(!0,r,n);case 3:return e.t0=te,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=jt(a||[]),r.providerData=r.providerData.filter(function(e){return o.has(e.providerId)}),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function zt(e,t){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=ce,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Mt._forOperation(t,"link",i));case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Kt(e,t,n){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe(n);case 2:i=!1===t?"provider-already-linked":"no-such-provider",D(jt(n.providerData).has(r)===t,n.auth,i);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Jt(e,t){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,u=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=t.auth,e.prev=2,e.next=5,ce(t,Vt(i,"reauthenticate",n,t),r);case 5:return D((a=e.sent).idToken,i,"internal-error"),D(o=ue(a.idToken),i,"internal-error"),s=o.sub,e.abrupt("return",(D(t.uid===s,i,"user-mismatch"),Mt._forOperation(t,"reauthenticate",a)));case 13:throw e.prev=13,e.t0=e.catch(2),"auth/user-not-found"===(null==e.t0?void 0:e.t0.code)&&I(i,"user-mismatch"),e.t0;case 16:case"end":return e.stop()}},e,null,[[2,13]])}))).apply(this,arguments)}function Qt(e,t){return $t.apply(this,arguments)}function $t(){return($t=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]&&o[2],e.next=3,Vt(t,"signIn",n);case 3:return i=e.sent,e.next=6,Mt._fromIdTokenResponse(t,"signIn",i);case 6:if(a=e.sent,e.t0=r,e.t0){e.next=11;break}return e.next=11,t._updateCurrentUser(a.user);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xt(e,t){return en.apply(this,arguments)}function en(){return(en=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qt(Ve(t),n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tn(e,t){return nn.apply(this,arguments)}function nn(){return(nn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s.m9)(t),e.next=3,Kt(!1,r,n.providerId);case 3:return e.abrupt("return",zt(r,n));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rn(e,t){return an.apply(this,arguments)}function an(){return(an=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jt((0,s.m9)(t),n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function on(e,t){return sn.apply(this,arguments)}function sn(){return(sn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J(t,"POST","/v1/accounts:signInWithCustomToken",H(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function un(e,t){return cn.apply(this,arguments)}function cn(){return(cn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ve(t),e.next=3,on(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Mt._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ln=function(){function e(t,n){v(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return p(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?hn._fromServerResponse(e,t):I(e,"internal-error")}}]),e}(),hn=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return p(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ln);function fn(e,t,n){var r;D((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),D(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(D(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(D(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function dn(e,t,n){return pn.apply(this,arguments)}function pn(){return(pn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,s.m9)(t),a={requestType:"PASSWORD_RESET",email:n},r&&fn(i,a,r),e.next=4,it(i,a);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function vn(e,t,n){return gn.apply(this,arguments)}function gn(){return(gn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ke((0,s.m9)(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mn(e,t){return yn.apply(this,arguments)}function yn(){return(yn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe((0,s.m9)(t),{oobCode:n});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function kn(e,t){return bn.apply(this,arguments)}function bn(){return(bn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s.m9)(t),e.next=3,Ke(r,{oobCode:n});case 3:i=e.sent,a=i.requestType,e.t0=(D(a,r,"internal-error"),a),e.next="EMAIL_SIGNIN"===e.t0?8:"VERIFY_AND_CHANGE_EMAIL"===e.t0?9:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?11:12;break;case 8:return e.abrupt("break",13);case 9:return D(i.newEmail,r,"internal-error"),e.abrupt("break",13);case 11:D(i.mfaInfo,r,"internal-error");case 12:D(i.email,r,"internal-error");case 13:return o=null,e.abrupt("return",(i.mfaInfo&&(o=ln._fromServerResponse(Ve(r),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a}));case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function wn(e,t){return _n.apply(this,arguments)}function _n(){return(_n=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kn((0,s.m9)(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function xn(e,t,n){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ve(t),e.next=3,Nt(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Mt._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Tn(e,t,n){return Xt((0,s.m9)(e),St.credential(t,n))}function In(e,t,n){return En.apply(this,arguments)}function En(){return(En=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,s.m9)(t),a={requestType:"EMAIL_SIGNIN",email:n},D(r.handleCodeInApp,i,"argument-error"),r&&fn(i,a,r),e.next=5,ot(i,a);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Cn(e,t){var n=xt.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}function An(e,t,n){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,s.m9)(t),a=St.credentialWithLink(n,r||M()),e.abrupt("return",(D(a._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Xt(i,a)));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Dn(e,t){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z(t,"POST","/v1/accounts:createAuthUri",H(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function On(e,t){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={identifier:n,continueUri:Z()?M():"http://localhost"},e.next=3,Dn((0,s.m9)(t),r);case 3:return i=e.sent,a=i.signinMethods,e.abrupt("return",a||[]);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ln(e,t){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s.m9)(t),e.next=3,t.getIdToken();case 3:return e.t0=e.sent,i={requestType:"VERIFY_EMAIL",idToken:e.t0},n&&fn(r.auth,i,n),e.next=8,nt(r.auth,i);case 8:if(a=e.sent,o=a.email,e.t1=o!==t.email,!e.t1){e.next=14;break}return e.next=14,t.reload();case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Zn(e,t,n){return Un.apply(this,arguments)}function Un(){return(Un=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,s.m9)(t),e.next=3,t.getIdToken();case 3:return e.t0=e.sent,e.t1=n,a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e.t0,newEmail:e.t1},r&&fn(i.auth,a,r),e.next=9,ut(i.auth,a);case 9:if(o=e.sent,u=o.email,e.t2=u!==t.email,!e.t2){e.next=15;break}return e.next=15,t.reload();case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Fn(e,t){return qn.apply(this,arguments)}function qn(){return(qn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Vn(e,t){return jn.apply(this,arguments)}function jn(){return(jn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=(0,s.m9)(t),e.next=6,a.getIdToken();case 6:return e.t0=e.sent,e.t1=r,e.t2=i,e.t3=!0,o={idToken:e.t0,displayName:e.t1,photoUrl:e.t2,returnSecureToken:e.t3},e.next=13,ce(a,Fn(a.auth,o));case 13:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find(function(e){return"password"===e.providerId}))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=19,a._updateTokensIfNecessary(u);case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Bn(e,t){return zn((0,s.m9)(e),t,null)}function Hn(e,t){return zn((0,s.m9)(e),null,t)}function zn(e,t,n){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return e.t0=e.sent,e.t1=!0,a={idToken:e.t0,returnSecureToken:e.t1},n&&(a.email=n),r&&(a.password=r),e.next=9,ce(t,Je(i,a));case 9:return o=e.sent,e.next=12,t._updateTokensIfNecessary(o,!0);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Kn=p(function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};v(this,e),this.isNewUser=t,this.providerId=n,this.profile=r}),Wn=function(e){g(n,e);var t=m(n);function n(e,r,i,a){var o;return v(this,n),(o=t.call(this,e,r,i)).username=a,o}return p(n)}(Kn),Jn=function(e){g(n,e);var t=m(n);function n(e,r){return v(this,n),t.call(this,e,"facebook.com",r)}return p(n)}(Kn),Yn=function(e){g(n,e);var t=m(n);function n(e,r){return v(this,n),t.call(this,e,"github.com",r,"string"==typeof(null==r?void 0:r.login)?null==r?void 0:r.login:null)}return p(n)}(Wn),Qn=function(e){g(n,e);var t=m(n);function n(e,r){return v(this,n),t.call(this,e,"google.com",r)}return p(n)}(Kn),$n=function(e){g(n,e);var t=m(n);function n(e,r,i){return v(this,n),t.call(this,e,"twitter.com",r,i)}return p(n)}(Wn);function Xn(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){var o=null===(n=null===(t=ue(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Kn(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Jn(a,i);case"github.com":return new Yn(a,i);case"google.com":return new Qn(a,i);case"twitter.com":return new $n(a,i,e.screenName||null);case"custom":case"anonymous":return new Kn(a,null);default:return new Kn(a,r,i)}}(n)}var er=function(){function e(t,n){v(this,e),this.type=t,this.credential=n}return p(e,[{key:"toJSON",value:function(){return{multiFactorSession:n({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null==t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),tr=function(){function e(t,n,r){v(this,e),this.session=t,this.hints=n,this.signInResolver=r}return p(e,[{key:"resolveSignIn",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.signInResolver(e));case 1:case"end":return n.stop()}},n)}))()}}],[{key:"_fromError",value:function(t,n){var r=Ve(t),i=n.customData._serverResponse,o=(i.mfaInfo||[]).map(function(e){return ln._fromServerResponse(r,e)});D(i.mfaPendingCredential,r,"internal-error");var s,u=er._fromMfaPendingCredential(i.mfaPendingCredential);return new e(u,o,(s=(0,a.Z)(regeneratorRuntime.mark(function e(t){var a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,u);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,o=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?8:"reauthenticate"===e.t0?14:15;break;case 8:return e.next=10,Mt._fromIdTokenResponse(r,n.operationType,o);case 10:return s=e.sent,e.next=13,r._updateCurrentUser(s.user);case 13:return e.abrupt("return",s);case 14:return e.abrupt("return",(D(n.user,r,"internal-error"),Mt._forOperation(n.user,n.operationType,o)));case 15:I(r,"internal-error");case 16:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)}))}}]),e}();function nr(e,t){var n,r=(0,s.m9)(e),i=t;return D(t.customData.operationType,r,"argument-error"),D(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),tr._fromError(r,i)}function rr(e,t){return z(e,"POST","/v2/accounts/mfaEnrollment:start",H(e,t))}var ir=function(){function e(t){var n=this;v(this,e),this.user=t,this.enrolledFactors=[],t._onReload(function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map(function(e){return ln._fromServerResponse(t.auth,e)}))})}return p(e,[{key:"getSession",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=er,t.next=3,e.user.getIdToken();case 3:return t.t1=t.sent,t.abrupt("return",t.t0._fromIdtoken.call(t.t0,t.t1));case 5:case"end":return t.stop()}},t)}))()}},{key:"enroll",value:function(e,t){var n=this;return(0,a.Z)(regeneratorRuntime.mark(function r(){var i,a,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i=e,r.next=3,n.getSession();case 3:return a=r.sent,r.next=6,ce(n.user,i._process(n.user.auth,a,t));case 6:return o=r.sent,r.next=9,n.user._updateTokensIfNecessary(o);case 9:return r.abrupt("return",n.user.reload());case 10:case"end":return r.stop()}},r)}))()}},{key:"unenroll",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r,i,a,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r="string"==typeof e?e:e.uid,n.next=3,t.user.getIdToken();case 3:return i=n.sent,n.next=6,ce(t.user,z(o=t.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",H(o,{idToken:i,mfaEnrollmentId:r})));case 6:return a=n.sent,t.enrolledFactors=t.enrolledFactors.filter(function(e){return e.uid!==r}),n.next=10,t.user._updateTokensIfNecessary(a);case 10:return n.prev=10,n.next=13,t.user.reload();case 13:n.next=19;break;case 15:if(n.prev=15,n.t0=n.catch(10),"auth/user-token-expired"===n.t0.code){n.next=19;break}throw n.t0;case 19:case"end":return n.stop()}},n,null,[[10,15]])}))()}}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),ar=new WeakMap;function or(e){var t=(0,s.m9)(e);return ar.has(t)||ar.set(t,ir._fromUser(t)),ar.get(t)}var sr,ur,cr=function(){function e(t,n){v(this,e),this.storageRetriever=t,this.type=n}return p(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}(),lr=((ur=function(e){g(n,e);var t=m(n);function n(){var e,r;return v(this,n),(e=t.call(this,function(){return window.localStorage},"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=(Ae(r=(0,s.z$)())||Le(r))&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Ze(),e._shouldAllowMigration=!0,e}return p(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);(0,s.w1)()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys(function(e,n,r){t.notifyListeners(e,r)})}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++)(0,i[r])(t?JSON.parse(t):t)}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(function(){e.forAllChangedKeys(function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(e,t){var r=this,i=this;return(0,a.Z)(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o(S(n.prototype),"_set",r).call(i,e,t);case 2:i.localCache[e]=JSON.stringify(t);case 3:case"end":return a.stop()}},a)}))()}},{key:"_get",value:function(e){var t=this,r=this;return(0,a.Z)(regeneratorRuntime.mark(function i(){var a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,o(S(n.prototype),"_get",t).call(r,e);case 2:return a=i.sent,i.abrupt("return",(r.localCache[e]=JSON.stringify(a),a));case 4:case"end":return i.stop()}},i)}))()}},{key:"_remove",value:function(e){var t=this,r=this;return(0,a.Z)(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,o(S(n.prototype),"_remove",t).call(r,e);case 2:delete r.localCache[e];case 3:case"end":return i.stop()}},i)}))()}}]),n}(cr)).type="LOCAL",ur),hr=((sr=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.call(this,function(){return window.sessionStorage},"SESSION")}return p(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(cr)).type="SESSION",sr),fr=function(){var e=function(){function e(t){v(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return p(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r,i,o,s,u,c,l,h;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=(r=e).data,o=i.eventId,s=i.eventType,u=i.data,null==(c=t.handlersMap[s])?void 0:c.size){n.next=3;break}return n.abrupt("return");case 3:return r.ports[0].postMessage({status:"ack",eventId:o,eventType:s}),l=Array.from(c).map(function(){var e=(0,a.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(r.origin,u));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n.next=7,function(e){return Promise.all(e.map((t=(0,a.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=!0,e.next=4,t;case 4:return e.t1=e.sent,e.abrupt("return",{fulfilled:e.t0,value:e.t1});case 8:return e.prev=8,e.t2=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t2});case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return t.apply(this,arguments)})));var t}(l);case 7:h=n.sent,r.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:h});case 9:case"end":return n.stop()}},n)}))()}},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find(function(e){return e.isListeningto(t)});if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();return e.receivers=[],e}();function dr(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}var pr=function(){function e(t){v(this,e),this.target=t,this.handlers=new Set}return p(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,r=this;return(0,a.Z)(regeneratorRuntime.mark(function i(){var a,o,s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(a="undefined"!=typeof MessageChannel?new MessageChannel:null){i.next=3;break}throw new Error("connection_unavailable");case 3:return i.abrupt("return",new Promise(function(i,u){var c=dr("",20);a.port1.start();var l=setTimeout(function(){u(new Error("unsupported_event"))},n);s={messageChannel:a,onMessage:function(e){var t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),o=setTimeout(function(){u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),i(t.data.response);break;default:clearTimeout(l),clearTimeout(o),u(new Error("invalid_response"))}}},r.handlers.add(s),a.port1.addEventListener("message",s.onMessage),r.target.postMessage({eventType:e,eventId:c,data:t},[a.port2])}).finally(function(){s&&r.removeMessageHandler(s)}));case 4:case"end":return i.stop()}},i)}))()}}]),e}();function vr(){return window}function gr(){return void 0!==vr().WorkerGlobalScope&&"function"==typeof vr().importScripts}function mr(){return(mr=(0,a.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return e.abrupt("return",e.sent.active);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",null);case 11:case"end":return e.stop()}},e,null,[[2,8]])}))).apply(this,arguments)}var yr="firebaseLocalStorageDb",kr=function(){function e(t){v(this,e),this.request=t}return p(e,[{key:"toPromise",value:function(){var e=this;return new Promise(function(t,n){e.request.addEventListener("success",function(){t(e.request.result)}),e.request.addEventListener("error",function(){n(e.request.error)})})}}]),e}();function br(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly").objectStore("firebaseLocalStorage")}function wr(){var e=indexedDB.open(yr,1);return new Promise(function(t,n){e.addEventListener("error",function(){n(e.error)}),e.addEventListener("upgradeneeded",function(){var t=e.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(r){n(r)}}),e.addEventListener("success",(0,a.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=e.result).objectStoreNames.contains("firebaseLocalStorage")){n.next=5;break}t(r),n.next=13;break;case 5:return r.close(),n.next=8,function(){var e=indexedDB.deleteDatabase(yr);return new kr(e).toPromise()}();case 8:return n.t0=t,n.next=11,wr();case 11:n.t1=n.sent,(0,n.t0)(n.t1);case 13:case"end":return n.stop()}},n)})))})}function _r(e,t,n){return xr.apply(this,arguments)}function xr(){return(xr=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=br(t,!0).put({fbase_key:n,value:r}),e.abrupt("return",new kr(i).toPromise());case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Sr(){return(Sr=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=br(t,!1).get(n),e.next=3,new kr(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Tr(e,t){var n=br(e,!0).delete(t);return new kr(n).toPromise()}var Ir,Er=((Ir=function(){function e(){v(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(function(){},function(){})}return p(e,[{key:"_openDb",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.db,t.t0){t.next=5;break}return t.next=4,wr();case 4:e.db=t.sent;case 5:return t.abrupt("return",e.db);case 6:case"end":return t.stop()}},t)}))()}},{key:"_withRetries",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=0;case 1:return n.prev=1,n.next=4,t._openDb();case 4:return i=n.sent,n.next=7,e(i);case 7:return n.abrupt("return",n.sent);case 10:if(n.prev=10,n.t0=n.catch(1),!(r++>3)){n.next=14;break}throw n.t0;case 14:t.db&&(t.db.close(),t.db=void 0);case 15:n.next=1;break;case 17:case"end":return n.stop()}},n,null,[[1,10]])}))()}},{key:"initializeServiceWorkerMessaging",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",gr()?e.initializeReceiver():e.initializeSender());case 1:case"end":return t.stop()}},t)}))()}},{key:"initializeReceiver",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.receiver=fr._getInstance(gr()?self:null),e.receiver._subscribe("keyChanged",function(){var t=(0,a.Z)(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._poll();case 2:return t.t0=t.sent.includes(r.key),t.abrupt("return",{keyProcessed:t.t0});case 4:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()),e.receiver._subscribe("ping",function(){var e=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return t.stop()}},t)}))()}},{key:"initializeSender",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(){return mr.apply(this,arguments)}();case 2:if(e.activeServiceWorker=t.sent,e.activeServiceWorker){t.next=5;break}return t.abrupt("return");case 5:return e.sender=new pr(e.activeServiceWorker),t.next=8,e.sender._send("ping",{},800);case 8:(i=t.sent)&&(null===(n=i[0])||void 0===n?void 0:n.fulfilled)&&(null===(r=i[0])||void 0===r?void 0:r.value.includes("keyChanged"))&&(e.serviceWorkerReceiverAvailable=!0);case 10:case"end":return t.stop()}},t)}))()}},{key:"notifyServiceWorker",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.sender||!t.activeServiceWorker||((null===(r=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===r?void 0:r.controller)||null)!==t.activeServiceWorker){n.next=8;break}return n.prev=1,n.next=4,t.sender._send("keyChanged",{key:e},t.serviceWorkerReceiverAvailable?800:50);case 4:n.next=8;break;case 6:n.prev=6,n.t0=n.catch(1);case 8:case"end":return n.stop()}},n,null,[[1,6]])}))()}},{key:"_isAvailable",value:function(){return(0,a.Z)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,wr();case 5:return t=e.sent,e.next=8,_r(t,"__sak","1");case 8:return e.next=10,Tr(t,"__sak");case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,null,[[0,13]])}))()}},{key:"_withPendingWrite",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.pendingWrites++,n.prev=1,n.next=4,e();case 4:return n.prev=4,t.pendingWrites--,n.finish(4);case 7:case"end":return n.stop()}},n,null,[[1,,4,7]])}))()}},{key:"_set",value:function(e,t){var n=this;return(0,a.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",n._withPendingWrite((0,a.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n._withRetries(function(n){return _r(n,e,t)});case 2:return n.localCache[e]=t,r.abrupt("return",n.notifyServiceWorker(e));case 4:case"end":return r.stop()}},r)}))));case 1:case"end":return r.stop()}},r)}))()}},{key:"_get",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t._withRetries(function(t){return function(e,t){return Sr.apply(this,arguments)}(t,e)});case 2:return r=n.sent,n.abrupt("return",(t.localCache[e]=r,r));case 4:case"end":return n.stop()}},n)}))()}},{key:"_remove",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t._withPendingWrite((0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t._withRetries(function(t){return Tr(t,e)});case 2:return delete t.localCache[e],n.abrupt("return",t.notifyServiceWorker(e));case 4:case"end":return n.stop()}},n)}))));case 1:case"end":return n.stop()}},n)}))()}},{key:"_poll",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a,o,s,u,c,h,f,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._withRetries(function(e){var t=br(e,!1).getAll();return new kr(t).toPromise()});case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return",[]);case 5:if(0===e.pendingWrites){t.next=7;break}return t.abrupt("return",[]);case 7:r=[],i=new Set,a=l(n);try{for(a.s();!(o=a.n()).done;)s=o.value,u=s.fbase_key,c=s.value,i.add(u),JSON.stringify(e.localCache[u])!==JSON.stringify(c)&&(e.notifyListeners(u,c),r.push(u))}catch(p){a.e(p)}finally{a.f()}for(h=0,f=Object.keys(e.localCache);h<f.length;h++)d=f[h],e.localCache[d]&&!i.has(d)&&(e.notifyListeners(d,null),r.push(d));return t.abrupt("return",r);case 12:case"end":return t.stop()}},t)}))()}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++)(0,i[r])(t)}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((0,a.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}},t)})),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}()).type="LOCAL",Ir);function Cr(e,t){return z(e,"POST","/v2/accounts/mfaSignIn:start",H(e,t))}function Ar(){return(Ar=(0,a.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Rr(e){return new Promise(function(t,n){var r,i,a=document.createElement("script");a.setAttribute("src",e),a.onload=t,a.onerror=function(e){var t=E("internal-error");t.customData=e,n(t)},a.type="text/javascript",a.charset="UTF-8",(null!==(i=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==i?i:document).appendChild(a)})}function Dr(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Pr=function(){function e(t){v(this,e),this.auth=t,this.counter=1e12,this._widgets=new Map}return p(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Or(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||1e12;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t;return(null===(t=this._widgets.get(e||1e12))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(null===(r=t._widgets.get(e||1e12))||void 0===r||r.execute(),""));case 1:case"end":return n.stop()}},n)}))()}}]),e}(),Or=function(){function e(t,n,r){var i=this;v(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"==typeof t?document.getElementById(t):t;D(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return p(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<50;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout(function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()},6e4)},500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}(),Nr=Dr("rcb"),Lr=new F(3e4,6e4),Mr=function(){function e(){v(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!vr().grecaptcha}return p(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return D(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(vr().grecaptcha):new Promise(function(r,i){var a=vr().setTimeout(function(){i(E(e,"network-request-failed"))},Lr.get());vr()[Nr]=function(){vr().clearTimeout(a),delete vr()[Nr];var o=vr().grecaptcha;if(o){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(E(e,"internal-error"))},Rr("https://www.google.com/recaptcha/api.js??".concat((0,s.xO)({onload:Nr,render:"explicit",hl:n}))).catch(function(){clearTimeout(a),i(E(e,"internal-error"))})})}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!vr().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}(),Zr=function(){function e(){v(this,e)}return p(e,[{key:"load",value:function(e){return(0,a.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Pr(e));case 1:case"end":return t.stop()}},t)}))()}},{key:"clearedOneInstance",value:function(){}}]),e}(),Ur={theme:"light",type:"image"},Fr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Ur),r=arguments.length>2?arguments[2]:void 0;v(this,e),this.parameters=n,this.type="recaptcha",this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ve(r),this.isInvisible="invisible"===this.parameters.size,D("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"==typeof t?document.getElementById(t):t;D(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Zr:new Mr,this.validateStartingState()}return p(e,[{key:"verify",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.assertNotDestroyed(),t.next=3,e.render();case 3:return n=t.sent,r=e.getAssertedRecaptcha(),t.abrupt("return",r.getResponse(n)||new Promise(function(t){e.tokenChangeListeners.add(function n(r){r&&(e.tokenChangeListeners.delete(n),t(r))}),e.isInvisible&&r.execute(n)}));case 6:case"end":return t.stop()}},t)}))()}},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(function(t){throw e.renderPromise=null,t})),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(function(t){e.container.removeChild(t)})}},{key:"validateStartingState",value:function(){D(!this.parameters.sitekey,this.auth,"argument-error"),D(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),D("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach(function(e){return e(n)}),"function"==typeof e)e(n);else if("string"==typeof e){var r=vr()[e];"function"==typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){D(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:if(e.widgetId){t.next=6;break}n=e.container,e.isInvisible||(r=document.createElement("div"),n.appendChild(r),n=r),e.widgetId=e.getAssertedRecaptcha().render(n,e.parameters);case 6:return t.abrupt("return",e.widgetId);case 7:case"end":return t.stop()}},t)}))()}},{key:"init",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return D(Z()&&!gr(),e.auth,"internal-error"),t.next=3,function(){var e=null;return new Promise(function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()}).catch(function(t){throw e&&window.removeEventListener("load",e),t})}();case 3:return t.next=5,e._recaptchaLoader.load(e.auth,e.auth.languageCode||void 0);case 5:return e.recaptcha=t.sent,t.next=8,function(e){return Ar.apply(this,arguments)}(e.auth);case 8:D(n=t.sent,e.auth,"internal-error"),e.parameters.sitekey=n;case 10:case"end":return t.stop()}},t)}))()}},{key:"getAssertedRecaptcha",value:function(){return D(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}(),qr=function(){function e(t,n){v(this,e),this.verificationId=t,this.onConfirmation=n}return p(e,[{key:"confirm",value:function(e){var t=_t._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Vr(e,t,n){return jr.apply(this,arguments)}function jr(){return(jr=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ve(t),e.next=3,Kr(i,n,(0,s.m9)(r));case 3:return a=e.sent,e.abrupt("return",new qr(a,function(e){return Xt(i,e)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Br(e,t,n){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,s.m9)(t),e.next=3,Kt(!1,i,"phone");case 3:return e.next=5,Kr(i.auth,n,(0,s.m9)(r));case 5:return a=e.sent,e.abrupt("return",new qr(a,function(e){return tn(i,e)}));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function zr(e,t,n){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,s.m9)(t),e.next=3,Kr(i.auth,n,(0,s.m9)(r));case 3:return a=e.sent,e.abrupt("return",new qr(a,function(e){return rn(i,e)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Kr(e,t,n){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s,u,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,D("string"==typeof a,t,"argument-error"),D("recaptcha"===r.type,t,"argument-error"),!("session"in(o="string"==typeof n?{phoneNumber:n}:n))){e.next=17;break}if(s=o.session,!("phoneNumber"in o)){e.next=11;break}return D("enroll"===s.type,t,"internal-error"),e.next=10,rr(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 10:return e.abrupt("return",e.sent.phoneSessionInfo.sessionInfo);case 11:return D("signin"===s.type,t,"internal-error"),D(u=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=16,Cr(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:u,phoneSignInInfo:{recaptchaToken:a}});case 16:return e.abrupt("return",e.sent.phoneResponseInfo.sessionInfo);case 17:return e.next=19,gt(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 19:return c=e.sent,l=c.sessionInfo,e.abrupt("return",l);case 22:return e.prev=22,r._reset(),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[3,,22,25]])}))).apply(this,arguments)}function Jr(e,t){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zt((0,s.m9)(t),n);case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Qr=function(){var e=function(){function e(t){v(this,e),this.providerId=e.PROVIDER_ID,this.auth=Ve(t)}return p(e,[{key:"verifyPhoneNumber",value:function(e,t){return Kr(this.auth,e,(0,s.m9)(t))}}],[{key:"credential",value:function(e,t){return _t._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){return e.credentialFromTaggedObject(t)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?_t._fromTokenResponse(n,r):null}}]),e}();return e.PROVIDER_ID="phone",e.PHONE_SIGN_IN_METHOD="phone",e}();function $r(e,t){return t?L(t):(D(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}var Xr=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,"custom","custom")).params=e,r}return p(n,[{key:"_getIdTokenResponse",value:function(e){return dt(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return dt(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return dt(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Ge);function ei(e){return Qt(e.auth,new Xr(e),e.bypassAuthState)}function ti(e){var t=e.auth,n=e.user;return D(n,t,"internal-error"),Jt(n,new Xr(e),e.bypassAuthState)}function ni(e){return ri.apply(this,arguments)}function ri(){return(ri=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,r=t.user,e.abrupt("return",(D(r,n,"internal-error"),zt(r,new Xr(t),t.bypassAuthState)));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ii=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];v(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return p(e,[{key:"execute",value:function(){var e,t=this;return new Promise((e=(0,a.Z)(regeneratorRuntime.mark(function e(n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.pendingPromise={resolve:n,reject:r},e.prev=1,e.next=4,t.resolver._initialize(t.auth);case 4:return t.eventManager=e.sent,e.next=7,t.onExecution();case 7:t.eventManager.registerConsumer(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t.reject(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])})),function(t,n){return e.apply(this,arguments)}))}},{key:"onAuthEvent",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r,i,a,o,s,u,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.urlResponse,i=e.sessionId,a=e.postBody,o=e.tenantId,s=e.error,u=e.type,!s){n.next=3;break}return n.abrupt("return",void t.reject(s));case 3:return c={auth:t.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:a||void 0,user:t.user,bypassAuthState:t.bypassAuthState},n.prev=4,n.t0=t,n.next=8,t.getIdpTask(u)(c);case 8:n.t1=n.sent,n.t0.resolve.call(n.t0,n.t1),n.next=15;break;case 12:n.prev=12,n.t2=n.catch(4),t.reject(n.t2);case 15:case"end":return n.stop()}},n,null,[[4,12]])}))()}},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ei;case"linkViaPopup":case"linkViaRedirect":return ni;case"reauthViaPopup":case"reauthViaRedirect":return ti;default:I(this.auth,"internal-error")}}},{key:"resolve",value:function(e){O(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){O(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),ai=new F(2e3,1e4);function oi(e,t,n){return si.apply(this,arguments)}function si(){return(si=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ve(t),A(t,n,Tt),a=$r(i,r),e.abrupt("return",new fi(i,"signInViaPopup",n,a).executeNotNull());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ui(e,t,n){return ci.apply(this,arguments)}function ci(){return(ci=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A((i=(0,s.m9)(t)).auth,n,Tt),a=$r(i.auth,r),e.abrupt("return",new fi(i.auth,"reauthViaPopup",n,a,i).executeNotNull());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function li(e,t,n){return hi.apply(this,arguments)}function hi(){return(hi=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A((i=(0,s.m9)(t)).auth,n,Tt),a=$r(i.auth,r),e.abrupt("return",new fi(i.auth,"linkViaPopup",n,a,i).executeNotNull());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var fi=function(){var e=function(e){g(n,e);var t=m(n);function n(e,r,i,a,o){var s;return v(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=k(s),s}return p(n,[{key:"executeNotNull",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.execute();case 2:return n=t.sent,t.abrupt("return",(D(n,e.auth,"internal-error"),n));case 4:case"end":return t.stop()}},t)}))()}},{key:"onExecution",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return O(1===e.filter.length,"Popup operations only handle one event"),n=dr(),t.next=4,e.resolver._openPopup(e.auth,e.provider,e.filter[0],n);case 4:e.authWindow=t.sent,e.authWindow.associatedEvent=n,e.resolver._originValidation(e.auth).catch(function(t){e.reject(t)}),e.resolver._isIframeWebStorageSupported(e.auth,function(t){t||e.reject(E(e.auth,"web-storage-unsupported"))}),e.pollUserCancellation();case 9:case"end":return t.stop()}},t)}))()}},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(E(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;e.pollId=(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?window.setTimeout(function(){e.pollId=null,e.reject(E(e.auth,"popup-closed-by-user"))},2e3):window.setTimeout(t,ai.get())}()}}]),n}(ii);return e.currentPopupAction=null,e}(),di=new Map,pi=function(e){g(n,e);var t=m(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return v(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return p(n,[{key:"execute",value:function(){var e=this,t=this;return(0,a.Z)(regeneratorRuntime.mark(function r(){var i,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(i=di.get(t.auth._key())){r.next=20;break}return r.prev=2,r.next=5,function(e,t){return vi.apply(this,arguments)}(t.resolver,t.auth);case 5:if(!r.sent){r.next=11;break}return r.next=8,o(S(n.prototype),"execute",e).call(t);case 8:r.t0=r.sent,r.next=12;break;case 11:r.t0=null;case 12:a=r.t0,i=function(){return Promise.resolve(a)},r.next=19;break;case 16:r.prev=16,r.t1=r.catch(2),i=function(){return Promise.reject(r.t1)};case 19:di.set(t.auth._key(),i);case 20:return r.abrupt("return",(t.bypassAuthState||di.set(t.auth._key(),function(){return Promise.resolve(null)}),i()));case 21:case"end":return r.stop()}},r,null,[[2,16]])}))()}},{key:"onAuthEvent",value:function(e){var t=this,r=function(){return o(S(n.prototype),"onAuthEvent",t)},i=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("signInViaRedirect"!==e.type){t.next=2;break}return t.abrupt("return",r().call(i,e));case 2:if("unknown"===e.type){t.next=12;break}if(!e.eventId){t.next=10;break}return t.next=6,i.auth._redirectUserForId(e.eventId);case 6:if(!(n=t.sent)){t.next=9;break}return t.abrupt("return",(i.user=n,r().call(i,e)));case 9:i.resolve(null);case 10:t.next=13;break;case 12:i.resolve(null);case 13:case"end":return t.stop()}},t)}))()}},{key:"onExecution",value:function(){return(0,a.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()}},{key:"cleanUp",value:function(){}}]),n}(ii);function vi(){return(vi=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=wi(n),i=bi(t),e.next=3,i._isAvailable();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,i._get(r);case 7:return e.t0=e.sent,a="true"===e.t0,e.next=11,i._remove(r);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gi(e,t){return mi.apply(this,arguments)}function mi(){return(mi=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bi(t)._set(wi(n),"true"));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yi(){di.clear()}function ki(e,t){di.set(e._key(),t)}function bi(e){return L(e._redirectPersistence)}function wi(e){return Te("pendingRedirect",e.config.apiKey,e.name)}function _i(e,t,n){return function(e,t,n){return xi.apply(this,arguments)}(e,t,n)}function xi(){return(xi=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ve(t),A(t,n,Tt),a=$r(i,r),e.next=5,gi(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Si(e,t,n){return function(e,t,n){return Ti.apply(this,arguments)}(e,t,n)}function Ti(){return(Ti=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A((i=(0,s.m9)(t)).auth,n,Tt),a=$r(i.auth,r),e.next=5,gi(a,i.auth);case 5:return e.next=7,Pi(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ii(e,t,n){return function(e,t,n){return Ei.apply(this,arguments)}(e,t,n)}function Ei(){return(Ei=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A((i=(0,s.m9)(t)).auth,n,Tt),a=$r(i.auth,r),e.next=5,Kt(!1,i,n.providerId);case 5:return e.next=7,gi(a,i.auth);case 7:return e.next=9,Pi(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ci(e,t){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve(t)._initializationPromise;case 2:return e.abrupt("return",Ri(t,n,!1));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ri(e,t){return Di.apply(this,arguments)}function Di(){return(Di=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,u=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=Ve(t),a=$r(i,n),o=new pi(i,a,r),e.next=6,o.execute();case 6:if(s=e.sent,e.t0=s&&!r,!e.t0){e.next=14;break}return delete s.user._redirectEventId,e.next=12,i._persistUserIfCurrent(s.user);case 12:return e.next=14,i._setRedirectUser(null,n);case 14:return e.abrupt("return",s);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Pi(e){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=dr("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Ni=function(){function e(t){v(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return p(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach(function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mi(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Mi(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(E(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Li(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Li(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Li(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(function(e){return e}).join("-")}function Mi(e){var t=e.type,n=e.error;return"unknown"===t&&"auth/no-auth-event"===(null==n?void 0:n.code)}function Zi(e){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n,r=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",z(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Fi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qi=/^https?/;function Vi(){return(Vi=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Zi(t);case 4:n=e.sent,r=n.authorizedDomains,i=l(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!ji(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:I(t,"unauthorized-domain");case 29:case"end":return e.stop()}},e,null,[[7,22,25,28],[11,16]])}))).apply(this,arguments)}function ji(e){var t=M(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!qi.test(r))return!1;if(Fi.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Bi=new F(3e4,6e4);function Hi(){var e=vr().___jsl;if(null==e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=u(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var zi=null;function Gi(e){return zi=zi||function(e){return new Promise(function(t,n){var r,i,a;function o(){Hi(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Hi(),n(E(e,"network-request-failed"))},timeout:Bi.get()})}if(null===(i=null===(r=vr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=vr().gapi)||void 0===a?void 0:a.load)){var s=Dr("iframefcb");return vr()[s]=function(){gapi.load?o():n(E(e,"network-request-failed"))},Rr("https://apis.google.com/js/api.js?onload=".concat(s)).catch(function(e){return n(e)})}o()}}).catch(function(e){throw zi=null,e})}(e)}var Ki=new F(5e3,15e3),Wi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ji=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yi(e){var t=e.config;D(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?q(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:c.SDK_VERSION},i=Ji.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat((0,s.xO)(r).slice(1))}function Qi(){return(Qi=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gi(t);case 2:return n=e.sent,r=vr().gapi,e.abrupt("return",(D(r,t,"internal-error"),n.open({where:document.body,url:Yi(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wi,dontclear:!0},function(e){return new Promise((n=(0,a.Z)(regeneratorRuntime.mark(function n(r,i){var a,o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){vr().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=E(t,"network-request-failed"),o=vr().setTimeout(function(){i(a)},Ki.get()),e.ping(s).then(s,function(){i(a)});case 5:case"end":return n.stop()}},n)})),function(e,t){return n.apply(this,arguments)}));var n})));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var $i={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Xi=function(){function e(t){v(this,e),this.window=t,this.associatedEvent=null}return p(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function ea(e,t,n,i,a,o){D(e.config.authDomain,e,"auth-domain-config-required"),D(e.config.apiKey,e,"invalid-api-key");var u={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:c.SDK_VERSION,eventId:a};if(t instanceof Tt){t.setDefaultLanguage(e.languageCode),u.providerId=t.providerId||"",(0,s.xb)(t.getCustomParameters())||(u.customParameters=JSON.stringify(t.getCustomParameters()));for(var l=0,h=Object.entries(o||{});l<h.length;l++){var f=r(h[l],2),d=f[0],p=f[1];u[d]=p}}if(t instanceof It){var v=t.getScopes().filter(function(e){return""!==e});v.length>0&&(u.scopes=v.join(","))}e.tenantId&&(u.tid=e.tenantId);for(var g,m,y=u,k=0,b=Object.keys(y);k<b.length;k++){var w=b[k];void 0===y[w]&&delete y[w]}return"".concat((g=e,m=g.config,m.emulator?q(m,"emulator/auth/handler"):"https://".concat(m.authDomain,"/__/auth/handler")),"?").concat((0,s.xO)(y).slice(1))}var ta=function(){function e(){v(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hr,this._completeRedirectFn=Ri,this._overrideRedirectResult=ki}return p(e,[{key:"_openPopup",value:function(e,t,n,i){var o=this;return(0,a.Z)(regeneratorRuntime.mark(function a(){var u,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return O(null===(u=o.eventManagers[e._key()])||void 0===u?void 0:u.manager,"_initialize() not called before _openPopup()"),c=ea(e,t,n,M(),i),a.abrupt("return",function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,o=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",l=Object.assign(Object.assign({},$i),{width:i.toString(),height:a.toString(),top:o,left:u}),h=(0,s.z$)().toLowerCase();n&&(c=Re(h)?"_blank":n),Ce(h)&&(t=t||"http://localhost",l.scrollbars="yes");var f=Object.entries(l).reduce(function(e,t){var n=r(t,2),i=n[0],a=n[1];return"".concat(e).concat(i,"=").concat(a,",")},"");if(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.z$)();return Le(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(h)&&"_self"!==c)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",c),new Xi(null);var d=window.open(t||"",c,f);D(d,e,"popup-blocked");try{d.focus()}catch(p){}return new Xi(d)}(e,c,dr()));case 3:case"end":return a.stop()}},a)}))()}},{key:"_openRedirect",value:function(e,t,n,r){var i=this;return(0,a.Z)(regeneratorRuntime.mark(function a(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i._originValidation(e);case 2:return o=ea(e,t,n,M(),r),vr().location.href=o,a.abrupt("return",new Promise(function(){}));case 5:case"end":return a.stop()}},a)}))()}},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(O(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch(function(){delete t.eventManagers[n]}),o}},{key:"initAndGetManager",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,function(e){return Qi.apply(this,arguments)}(e);case 2:return r=n.sent,i=new Ni(e),n.abrupt("return",(r.register("authEvent",function(t){return D(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:i.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i));case 5:case"end":return n.stop()}},n)}))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send("webStorageSupport",{type:"webStorageSupport"},function(n){var r,i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),I(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Vi.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Ze()||Ae()||Le()}}]),e}(),na=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,"phone")).credential=e,r}return p(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return z(e,"POST","/v2/accounts/mfaEnrollment:finalize",H(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return z(e,"POST","/v2/accounts/mfaSignIn:finalize",H(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){v(this,e),this.factorId=t}return p(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return P("unexpected MultiFactorSessionType")}}}]),e}()),ra=function(){var e=function(){function e(){v(this,e)}return p(e,null,[{key:"assertion",value:function(e){return na._fromCredential(e)}}]),e}();return e.FACTOR_ID="phone",e}(),ia=function(){function e(t){v(this,e),this.auth=t,this.internalListeners=new Map}return p(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.assertAuthConfigured(),n.next=3,t.auth._initializationPromise;case 3:if(!t.auth.currentUser){n.next=10;break}return n.next=6,t.auth.currentUser.getIdToken(e);case 6:n.t1=n.sent,n.t0={accessToken:n.t1},n.next=11;break;case 10:n.t0=null;case 11:return n.abrupt("return",n.t0);case 12:case"end":return n.stop()}},n)}))()}},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged(function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){D(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();(0,c._registerComponent)(new d.wA("auth",function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){D(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),D(!(null==s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:"Browser",apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ue("Browser")},i=new qe(e,t,r);return function(e,t){var n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(L);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,n){e.getProvider("auth-internal").initialize()})),(0,c._registerComponent)(new d.wA("auth-internal",function(e){return t=Ve(e.getProvider("auth").getImmediate()),new ia(t);var t},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,c.registerVersion)("@firebase/auth","0.20.1",void 0),(0,c.registerVersion)("@firebase/auth","0.20.1","esm2017")},8604:function(e,t,n){"use strict";n.d(t,{wA:function(){return o},H0:function(){return c}});var i=n(6304),a=n(3854),o=function(){function e(t,n,r){v(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return p(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),s=function(){function e(t,n){v(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return p(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new a.BH;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(c){}var t,n=l(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var i=r(t.value,2),a=i[0],o=i[1],s=this.normalizeInstanceIdentifier(a);try{var u=this.getOrInitializeService({instanceIdentifier:s});o.resolve(u)}catch(c){}}}catch(h){n.e(h)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Array.from(e.instances.values()),t.next=3,Promise.all([].concat(u(n.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()})),u(n.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))));case 3:case"end":return t.stop()}},t)}))()}},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error("".concat(this.name,"(").concat(i,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var a,o=this.getOrInitializeService({instanceIdentifier:i,options:n}),s=l(this.instancesDeferred.entries());try{for(s.s();!(a=s.n()).done;){var u=r(a.value,2),c=u[0],h=u[1];i===this.normalizeInstanceIdentifier(c)&&h.resolve(o)}}catch(f){s.e(f)}finally{s.f()}return o}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,"[DEFAULT]"===t?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.component?this.component.multipleInstances?e:"[DEFAULT]":e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}(),c=function(){function e(t){v(this,e),this.name=t,this.providers=new Map}return p(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new s(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}()},9306:function(e,t,r){"use strict";var i;r.d(t,{in:function(){return o},Yd:function(){return f},Ub:function(){return d},Am:function(){return g}});var a=[],o=(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(o||(o={})),o),s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=(n(i={},o.DEBUG,"log"),n(i,o.VERBOSE,"log"),n(i,o.INFO,"info"),n(i,o.WARN,"warn"),n(i,o.ERROR,"error"),i),h=function(e,t){var n;if(!(t<e.logLevel)){var r=(new Date).toISOString(),i=c[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(n=console)[i].apply(n,["[".concat(r,"]  ").concat(e.name,":")].concat(o))}},f=function(){function e(t){v(this,e),this.name=t,this._logLevel=u,this._logHandler=h,this._userLogHandler=null,a.push(this)}return p(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"==typeof e?s[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,o.DEBUG].concat(t)),this._logHandler.apply(this,[this,o.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,o.VERBOSE].concat(t)),this._logHandler.apply(this,[this,o.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,o.INFO].concat(t)),this._logHandler.apply(this,[this,o.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,o.WARN].concat(t)),this._logHandler.apply(this,[this,o.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,o.ERROR].concat(t)),this._logHandler.apply(this,[this,o.ERROR].concat(t))}}]),e}();function d(e){a.forEach(function(t){t.setLogLevel(e)})}function g(e,t){var n,r=l(a);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=s[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];var u=a.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(function(e){return e}).join(" ");n>=(null!=i?i:t.logLevel)&&e({level:o[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(u){r.e(u)}finally{r.f()}}},3854:function(e,t,n){"use strict";n.d(t,{BH:function(){return c},LL:function(){return D},ZR:function(){return R},zI:function(){return A},US:function(){return a},tV:function(){return s},L:function(){return o},$s:function(){return B},r3:function(){return O},Sg:function(){return l},ne:function(){return q},vZ:function(){return L},ZB:function(){return u},pd:function(){return F},m9:function(){return H},z$:function(){return h},jU:function(){return y},ru:function(){return w},d:function(){return x},xb:function(){return N},w1:function(){return S},hl:function(){return E},uI:function(){return f},UG:function(){return d},b$:function(){return _},G6:function(){return I},Mn:function(){return T},xO:function(){return Z},zd:function(){return U},eu:function(){return C}});var i=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=(15&s)<<2|c>>6,h=63&c;u||(h=64,o||(l=64)),r.push(n[a>>2],n[(3&a)<<4|s>>4],n[l],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();r.push(a<<2|o>>4),64!==s&&(r.push(o<<4&240|s>>2),64!==u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},o=function(e){return function(e){var t=i(e);return a.encodeByteArray(t,!0)}(e).replace(/\./g,"")},s=function(e){try{return a.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function u(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=u(e[n],t[n]));return e}var c=function(){function e(){var t=this;v(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return p(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}}}]),e}();function l(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(a)),""].join(".")}function h(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function f(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h())}function d(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function y(){return"object"==typeof self&&self.self===self}function w(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function _(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function x(){return h().indexOf("Electron/")>=0}function S(){var e=h();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function T(){return h().indexOf("MSAppHost/")>=0}function I(){return!d()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function E(){return"object"==typeof indexedDB}function C(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})}function A(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}var R=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(k(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(k(a),D.prototype.create),a}return p(n)}(b(Error)),D=function(){function e(t,n,r){v(this,e),this.service=t,this.serviceName=n,this.errors=r}return p(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(P,function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error";return new R(n,"".concat(this.serviceName,": ").concat(i," (").concat(n,")."),t)}}]),e}(),P=/\{\$([^}]+)}/g;function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function N(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function L(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(M(s)&&M(u)){if(!L(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function M(e){return null!==e&&"object"==typeof e}function Z(e){for(var t=[],n=function(){var e=r(a[i],2),n=e[0],o=e[1];Array.isArray(o)?o.forEach(function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))},i=0,a=Object.entries(e);i<a.length;i++)n();return t.length?"&"+t.join("&"):""}function U(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=r(e.split("="),2),i=n[0],a=n[1];t[decodeURIComponent(i)]=decodeURIComponent(a)}}),t}function F(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function q(e,t){var n=new V(e,t);return n.subscribe.bind(n)}var V=function(){function e(t,n){var r=this;v(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(r)}).catch(function(e){r.error(e)})}return p(e,[{key:"next",value:function(e){this.forEachObserver(function(t){t.next(e)})}},{key:"error",value:function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)}},{key:"complete",value:function(){this.forEachObserver(function(e){e.complete()}),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=j),void 0===r.error&&(r.error=j),void 0===r.complete&&(r.complete=j);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))}}]),e}();function j(){}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function H(e){return e&&e._delegate?e._delegate:e}},2329:function(e,t,n){"use strict";n.d(t,{Mq:function(){return r.getApp},C6:function(){return r.getApps},ZF:function(){return r.initializeApp},KN:function(){return r.registerVersion}});var r=n(279);(0,r.registerVersion)("firebase","9.8.1","app")},7841:function(e,t,n){"use strict";n.d(t,{Z:function(){return r.Z}});var r=n(156);r.Z.registerVersion("firebase","9.8.1","app-compat")},4828:function(e,t,n){"use strict";n.r(t);var r=n(6304),s=n(156),u=n(8882),l=n(3854),f=(n(279),n(9306),n(8604));function d(){return window}function y(){return(y=(0,r.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=d(),o=a.BuildInfo,(0,u.aq)(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,w(n.sessionId);case 4:return s=e.sent,c={},e.abrupt("return",((0,u.ar)()?c.ibi=o.packageName:(0,u.as)()?c.apn=o.packageName:(0,u.at)(t,"operation-not-supported-in-this-environment"),o.displayName&&(c.appDisplayName=o.displayName),c.sessionId=s,(0,u.au)(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,c)));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(){return(k=(0,r.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=d(),r=n.BuildInfo,i={},(0,u.ar)()?i.iosBundleId=r.packageName:(0,u.as)()?i.androidPackageName=r.packageName:(0,u.at)(t,"operation-not-supported-in-this-environment"),e.next=4,(0,u.av)(t,i);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function b(){return(b=(0,r.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=d(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise(function(e,i){var s=null;function c(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"==typeof n&&n(),"function"==typeof(null==r?void 0:r.close)&&r.close()}function l(){s||(s=window.setTimeout(function(){i((0,u.aw)(t,"redirect-cancelled-by-user"))},2e3))}function h(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}n.addPassiveListener(c),document.addEventListener("resume",l,!1),(0,u.as)()&&document.addEventListener("visibilitychange",h,!1),o=function(){n.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",h,!1),s&&window.clearTimeout(s)}});case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}},e,null,[[2,,5,8]])}))).apply(this,arguments)}function w(e){return _.apply(this,arguments)}function _(){return(_=(0,r.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=x(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,e.abrupt("return",Array.from(new Uint8Array(r)).map(function(e){return e.toString(16).padStart(2,"0")}).join(""));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function x(e){if((0,u.aq)(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var T=function(e){g(n,e);var t=m(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise(function(t){e.resolveInialized=t}),e}return p(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach(function(t){return t(e)}),o(S(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=this;return(0,r.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initPromise;case 2:case"end":return t.stop()}},t)}))()}}]),n}(u.aA);function I(e){return E.apply(this,arguments)}function E(){return(E=(0,r.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A()._get(R(t));case 2:if(n=e.sent,e.t0=n,!e.t0){e.next=7;break}return e.next=7,A()._remove(R(t));case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function A(){return(0,u.ay)(u.b)}function R(e){return(0,u.az)("authEvent",e.config.apiKey,e.name)}function D(e){if(!(null==e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=a(t=n)||c(t)||h(t)||i(),o=(r[0],r.slice(1));return(0,l.zd)(o.join("?"))}function P(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,u.aw)("no-auth-event")}}function O(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,l.z$)();return!("file:"!==O()&&"ionic:"!==O()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function L(){try{var e=self.localStorage,t=u.aI();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,l.z$)();return(0,l.w1)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,l.z$)();return/Edge\/\d+/.test(e)}(e)}()||(0,l.hl)()}catch(n){return M()&&(0,l.hl)()}return!1}function M(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Z(){return("http:"===O()||"https:"===O()||(0,l.ru)()||N())&&!((0,l.b$)()||(0,l.UG)())&&L()&&!M()}function U(){return N()&&"undefined"!=typeof document}function F(){return(F=(0,r.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!!U()&&new Promise(function(e){var t=setTimeout(function(){e(!1)},1e3);document.addEventListener("deviceready",function(){clearTimeout(t),e(!0)})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var q={LOCAL:"local",NONE:"none",SESSION:"session"},V=u.ax;function j(e){return B.apply(this,arguments)}function B(){return(B=(0,r.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=H(),r=u.az("persistence",t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function H(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var z=u.ax,G=function(){function e(){v(this,e),this.browserResolver=u.ay(u.k),this.cordovaResolver=u.ay(function(){function e(){v(this,e),this._redirectPersistence=u.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=u.aB,this._overrideRedirectResult=u.aC}return p(e,[{key:"_initialize",value:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e._key(),i=t.eventManagers.get(r),n.abrupt("return",(i||(i=new T(e),t.eventManagers.set(r,i),t.attachCallbackListeners(e,i)),i));case 3:case"end":return n.stop()}},n)}))()}},{key:"_openPopup",value:function(e){(0,u.at)(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(e,t,n,i){var a=this;return(0,r.Z)(regeneratorRuntime.mark(function r(){var o,s,c,l;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return function(e){var t,n,r,i,a,o,s,c,l,h,f=d();(0,u.ax)("function"==typeof(null===(t=null==f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,u.ax)(void 0!==(null===(n=null==f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,u.ax)("function"==typeof(null===(a=null===(i=null===(r=null==f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,u.ax)("function"==typeof(null===(c=null===(s=null===(o=null==f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,u.ax)("function"==typeof(null===(h=null===(l=null==f?void 0:f.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===h?void 0:h.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e),r.next=3,a._initialize(e);case 3:return o=r.sent,r.next=6,o.initialized();case 6:return o.resetRedirect(),(0,u.aD)(),r.next=10,a._originValidation(e);case 10:return s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:C(),postBody:null,tenantId:e.tenantId,error:(0,u.aw)(e,"no-auth-event")}}(e,n,i),r.next=13,function(e,t){return A()._set(R(e),t)}(e,s);case 13:return r.next=15,function(e,t,n){return y.apply(this,arguments)}(e,s,t);case 15:return c=r.sent,r.next=18,function(e){var t=d().cordova;return new Promise(function(n){t.plugins.browsertab.isAvailable(function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,(0,u.ap)()?"_blank":"_system","location=yes"),n(i)})})}(c);case 18:return l=r.sent,r.abrupt("return",function(e,t,n){return b.apply(this,arguments)}(e,o,l));case 20:case"end":return r.stop()}},r)}))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return k.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n,i=d(),a=i.universalLinks,o=i.handleOpenURL,s=i.BuildInfo,c=setTimeout((0,r.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,I(e);case 2:t.onEvent(P());case 3:case"end":return n.stop()}},n)})),500),l=(n=(0,r.Z)(regeneratorRuntime.mark(function n(r){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(c),n.next=3,I(e);case 3:i=n.sent,a=null,i&&(null==r?void 0:r.url)&&(a=function(e,t){var n,r,i=function(e){var t=D(e),n=t.link?decodeURIComponent(t.link):void 0,r=D(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return D(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=D(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null==o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],c=s?(0,u.aw)(s):null;return c?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(i,r.url)),t.onEvent(a||P());case 6:case"end":return n.stop()}},n)})),function(e){return n.apply(this,arguments)});void 0!==a&&"function"==typeof a.subscribe&&a.subscribe(null,l);var h,f=o,p="".concat(s.packageName.toLowerCase(),"://");d().handleOpenURL=(h=(0,r.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(p)&&l({url:t}),"function"==typeof f)try{f(t)}catch(n){console.error(n)}case 1:case"end":return e.stop()}},e)})),function(e){return h.apply(this,arguments)})}}]),e}()),this.underlyingResolver=null,this._redirectPersistence=u.a,this._completeRedirectFn=u.aB,this._overrideRedirectResult=u.aC}return p(e,[{key:"_initialize",value:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.selectUnderlyingResolver();case 2:return n.abrupt("return",t.assertedUnderlyingResolver._initialize(e));case 3:case"end":return n.stop()}},n)}))()}},{key:"_openPopup",value:function(e,t,n,i){var a=this;return(0,r.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.selectUnderlyingResolver();case 2:return r.abrupt("return",a.assertedUnderlyingResolver._openPopup(e,t,n,i));case 3:case"end":return r.stop()}},r)}))()}},{key:"_openRedirect",value:function(e,t,n,i){var a=this;return(0,r.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.selectUnderlyingResolver();case 2:return r.abrupt("return",a.assertedUnderlyingResolver._openRedirect(e,t,n,i));case 3:case"end":return r.stop()}},r)}))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return U()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return z(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=this;return(0,r.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.underlyingResolver){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,function(){return F.apply(this,arguments)}();case 4:n=t.sent,e.underlyingResolver=n?e.cordovaResolver:e.browserResolver;case 6:case"end":return t.stop()}},t)}))()}}]),e}();function K(e){return e.unwrap()}function W(e){var t=(e instanceof l.ZR?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof l.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return u.P.credentialFromResult(e);var n,r=t.providerId;if(!r||r===u.o.PASSWORD)return null;switch(r){case u.o.GOOGLE:n=u.Q;break;case u.o.FACEBOOK:n=u.N;break;case u.o.GITHUB:n=u.T;break;case u.o.TWITTER:n=u.W;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,c=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?u.aL._create(r,s):u.J._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new u.U(r).credential({idToken:i,accessToken:a,rawNonce:c}):null}return e instanceof l.ZR?n.credentialFromError(e):n.credentialFromResult(e)}function J(e,t){return t.catch(function(t){throw t instanceof l.ZR&&function(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new $(e,u.an(e,t));else if(r){var i=W(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}(e,t),t}).then(function(e){var t,n=e.user;return{operationType:e.operationType,credential:(t=e,W(t)),additionalUserInfo:u.al(e),user:X.getOrCreate(n)}})}function Y(e,t){return Q.apply(this,arguments)}function Q(){return(Q=(0,r.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return J(t,r.confirm(e))}});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var $=function(){function e(t,n){v(this,e),this.resolver=n,this.auth=t.wrapped()}return p(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return J(K(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),X=function(){function e(t){v(this,e),this._delegate=t,this.multiFactor=u.ao(t)}return p(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",J(t.auth,u.Z(t._delegate,e)));case 1:case"end":return n.stop()}},n)}))()}},{key:"linkWithPhoneNumber",value:function(e,t){var n=this;return(0,r.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Y(n.auth,u.l(n._delegate,e,t)));case 1:case"end":return r.stop()}},r)}))()}},{key:"linkWithPopup",value:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",J(t.auth,u.d(t._delegate,e,G)));case 1:case"end":return n.stop()}},n)}))()}},{key:"linkWithRedirect",value:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j(u.aE(t.auth));case 2:return n.abrupt("return",u.g(t._delegate,e,G));case 3:case"end":return n.stop()}},n)}))()}},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",J(t.auth,u._(t._delegate,e)));case 1:case"end":return n.stop()}},n)}))()}},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Y(this.auth,u.r(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return J(this.auth,u.e(this._delegate,e,G))}},{key:"reauthenticateWithRedirect",value:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j(u.aE(t.auth));case 2:return n.abrupt("return",u.h(t._delegate,e,G));case 3:case"end":return n.stop()}},n)}))()}},{key:"sendEmailVerification",value:function(e){return u.ab(this._delegate,e)}},{key:"unlink",value:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.ak(t._delegate,e);case 2:return n.abrupt("return",t);case 3:case"end":return n.stop()}},n)}))()}},{key:"updateEmail",value:function(e){return u.ag(this._delegate,e)}},{key:"updatePassword",value:function(e){return u.ah(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return u.u(this._delegate,e)}},{key:"updateProfile",value:function(e){return u.af(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return u.ac(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();X.USER_MAP=new WeakMap;var ee=u.ax,te=function(){var e=function(){function e(t,n){if(v(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;ee(r,"invalid-api-key",{appName:t.name}),ee(r,"invalid-api-key",{appName:t.name});var i="undefined"!=typeof window?G:void 0;this._delegate=n.initialize({options:{persistence:re(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(u.B),this.linkUnderlyingAuth()}return p(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?X.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){u.G(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return u.a2(this._delegate,e)}},{key:"checkActionCode",value:function(e){return u.a3(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return u.a1(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(e,t){var n=this;return(0,r.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",J(n._delegate,u.a5(n._delegate,e,t)));case 1:case"end":return r.stop()}},r)}))()}},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return u.aa(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return u.a8(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=this;return(0,r.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return ee(Z(),e._delegate,"operation-not-supported-in-this-environment"),t.next=3,u.j(e._delegate,G);case 3:return n=t.sent,t.abrupt("return",n?J(e._delegate,Promise.resolve(n)):{credential:null,user:null});case 5:case"end":return t.stop()}},t)}))()}},{key:"addFrameworkForLogging",value:function(e){!function(e,t){(0,u.aE)(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=ne(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=ne(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return u.a7(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return u.a0(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=(function(e,t){V(Object.values(q).includes(t),e,"invalid-persistence-type"),(0,l.b$)()?V(t!==q.SESSION,e,"unsupported-persistence-type"):(0,l.UG)()?V(t===q.NONE,e,"unsupported-persistence-type"):M()?V(t===q.NONE||t===q.LOCAL&&(0,l.hl)(),e,"unsupported-persistence-type"):V(t===q.NONE||L(),e,"unsupported-persistence-type")}(t._delegate,e),e),n.next=n.t0===q.SESSION?3:n.t0===q.LOCAL?5:n.t0===q.NONE?14:16;break;case 3:return r=u.a,n.abrupt("break",17);case 5:return n.next=7,u.ay(u.i)._isAvailable();case 7:if(!n.sent){n.next=11;break}n.t1=u.i,n.next=12;break;case 11:n.t1=u.b;case 12:return r=n.t1,n.abrupt("break",17);case 14:return r=u.L,n.abrupt("break",17);case 16:return n.abrupt("return",u.at("argument-error",{appName:t._delegate.name}));case 17:return n.abrupt("return",t._delegate.setPersistence(r));case 18:case"end":return n.stop()}},n)}))()}},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return J(this._delegate,u.X(this._delegate))}},{key:"signInWithCredential",value:function(e){return J(this._delegate,u.Y(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return J(this._delegate,u.$(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return J(this._delegate,u.a6(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return J(this._delegate,u.a9(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Y(this._delegate,u.s(this._delegate,e,t))}},{key:"signInWithPopup",value:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(ee(Z(),t._delegate,"operation-not-supported-in-this-environment"),J(t._delegate,u.c(t._delegate,e,G))));case 1:case"end":return n.stop()}},n)}))()}},{key:"signInWithRedirect",value:function(e){var t=this;return(0,r.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return ee(Z(),t._delegate,"operation-not-supported-in-this-environment"),n.next=3,j(t._delegate);case 3:return n.abrupt("return",u.f(t._delegate,e,G));case 4:case"end":return n.stop()}},n)}))()}},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return u.a4(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();return e.Persistence=q,e}();function ne(e,t,n){var r,i=e;"function"!=typeof e&&(i=(r=e).next,t=r.error,n=r.complete);var a=i;return{next:function(e){return a(e&&X.getOrCreate(e))},error:t,complete:n}}function re(e,t){var n=function(e,t){var n=H();if(!n)return[];var r=u.az("persistence",e,t);switch(n.getItem(r)){case q.NONE:return[u.L];case q.LOCAL:return[u.i,u.a];case q.SESSION:return[u.a];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(u.i)||n.push(u.i),"undefined"!=typeof window)for(var r=0,i=[u.b,u.a];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(u.L)||n.push(u.L),n}var ie=function(){function e(){v(this,e),this.providerId="phone",this._delegate=new u.P(K(s.Z.auth()))}return p(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return u.P.credential(e,t)}}]),e}();ie.PHONE_SIGN_IN_METHOD=u.P.PHONE_SIGN_IN_METHOD,ie.PROVIDER_ID=u.P.PROVIDER_ID;var ae,oe=u.ax;(ae=s.Z).INTERNAL.registerComponent(new f.wA("auth-compat",function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new te(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:u.A.EMAIL_SIGNIN,PASSWORD_RESET:u.A.PASSWORD_RESET,RECOVER_EMAIL:u.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:u.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:u.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:u.A.VERIFY_EMAIL}},EmailAuthProvider:u.M,FacebookAuthProvider:u.N,GithubAuthProvider:u.T,GoogleAuthProvider:u.Q,OAuthProvider:u.U,SAMLAuthProvider:u.V,PhoneAuthProvider:ie,PhoneMultiFactorGenerator:u.m,RecaptchaVerifier:function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.Z.app();v(this,e),oe(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new u.R(t,n,i.auth()),this.type=this._delegate.type}return p(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}(),TwitterAuthProvider:u.W,Auth:te,AuthCredential:u.H,Error:l.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ae.registerVersion("@firebase/auth-compat","0.2.14")},250:function(e,t){"use strict";var n=function(){function e(t){if(!t)throw new TypeError("Invalid argument; `value` has no value.");this.value=e.EMPTY,t&&e.isGuid(t)&&(this.value=t)}return e.isGuid=function(t){var n=t.toString();return t&&(t instanceof e||e.validator.test(n))},e.create=function(){return new e([e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-"))},e.createEmpty=function(){return new e("emptyguid")},e.parse=function(t){return new e(t)},e.raw=function(){return[e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-")},e.gen=function(e){for(var t="",n=0;n<e;n++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t},e.prototype.equals=function(t){return e.isGuid(t)&&this.value===t.toString()},e.prototype.isEmpty=function(){return this.value===e.EMPTY},e.prototype.toString=function(){return this.value},e.prototype.toJSON=function(){return{value:this.value}},e.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),e.EMPTY="00000000-0000-0000-0000-000000000000",e}();t.i=n},6508:function(e,n,r){"use strict";r.d(n,{Lj:function(){return g},X3:function(){return v}});var i,a,o=r(6304),s=new WeakMap,u=new WeakMap,c=new WeakMap,l=new WeakMap,h=new WeakMap,f={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return u.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return d(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function d(e){if(e instanceof IDBRequest)return t=e,(n=new Promise(function(e,n){var r=function(){t.removeEventListener("success",i),t.removeEventListener("error",a)},i=function(){e(d(t.result)),r()},a=function(){n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",a)})).then(function(e){e instanceof IDBCursor&&s.set(e,t)}).catch(function(){}),h.set(n,t),n;var t,n;if(l.has(e))return l.get(e);var r=function(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(p(this),n),d(s.get(this))}:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return d(t.apply(p(this),n))}:function(e){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];var o=(n=t).call.apply(n,[p(this),e].concat(i));return c.set(o,e.sort?e.sort():[e]),d(o)}:(e instanceof IDBTransaction&&function(e){if(!u.has(e)){var t=new Promise(function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});u.set(e,t)}}(e),n=e,(i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(function(e){return n instanceof e})?new Proxy(e,f):e);var t,n}(e);return r!==e&&(l.set(e,r),h.set(r,e)),r}var p=function(e){return h.get(e)};function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=d(s);return i&&s.addEventListener("upgradeneeded",function(e){i(d(s.result),e.oldVersion,e.newVersion,d(s.transaction))}),r&&s.addEventListener("blocked",function(){return r()}),u.then(function(e){o&&e.addEventListener("close",function(){return o()}),a&&e.addEventListener("versionchange",function(){return a()})}).catch(function(){}),u}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.blocked,r=indexedDB.deleteDatabase(e);return n&&r.addEventListener("blocked",function(){return n()}),d(r).then(function(){})}var m,y=["get","getKey","getAll","getAllKeys","count"],k=["put","add","delete","clear"],b=new Map;function w(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(b.get(t))return b.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=k.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||y.includes(n))){var a,s=(a=(0,o.Z)(regeneratorRuntime.mark(function e(t){var a,o,s,u,c,l,h=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=h[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)});return b.set(t,s),s}}}f=t(t({},m=f),{},{get:function(e,t,n){return w(e,t)||m.get(e,t,n)},has:function(e,t){return!!w(e,t)||m.has(e,t)}})},3098:function(e,t,n){"use strict";n.d(t,{P:function(){return o}});var r=n(9193),i=n(5917),a=n(205),o=function(){function e(t,n,r){v(this,e),this.kind=t,this.value=n,this.error=r,this.hasValue="N"===t}return p(e,[{key:"observe",value:function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}},{key:"do",value:function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}},{key:"accept",value:function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return(0,i.of)(this.value);case"E":return(0,a._)(this.error);case"C":return(0,r.c)()}throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}},{key:"createError",value:function(t){return new e("E",void 0,t)}},{key:"createComplete",value:function(){return e.completeNotification}}]),e}();o.completeNotification=new o("C"),o.undefinedValueNotification=new o("N",void 0)},7574:function(e,t,n){"use strict";n.d(t,{y:function(){return c}});var r=n(7393),i=n(9181),a=n(6490),o=n(6554),s=n(4487),u=n(2494),c=function(){var e=function(e){function t(e){v(this,t),this._isScalar=!1,e&&(this._subscribe=e)}return p(t,[{key:"lift",value:function(e){var n=new t;return n.source=this,n.operator=e,n}},{key:"subscribe",value:function(e,t,n){var o=this.operator,s=function(e,t,n){if(e){if(e instanceof r.L)return e;if(e[i.b])return e[i.b]()}return e||t||n?new r.L(e,t,n):new r.L(a.c)}(e,t,n);if(s.add(o?o.call(s,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),u.v.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){u.v.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,i=t.destination,a=t.isStopped;if(n||a)return!1;e=i&&i instanceof r.L?i:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=l(t))(function(t,r){var i;i=n.subscribe(function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}},r,t)})}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:e,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?this:(0===(r=t).length?s.y:1===r.length?r[0]:function(e){return r.reduce(function(e,t){return t(e)},e)})(this);var r}},{key:"toPromise",value:function(e){var t=this;return new(e=l(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})}}]),t}(o.L);return e.create=function(t){return new e(t)},e}();function l(e){if(e||(e=u.v.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},6490:function(e,t,n){"use strict";n.d(t,{c:function(){return a}});var r=n(2494),i=n(4449),a={closed:!0,next:function(e){},error:function(e){if(r.v.useDeprecatedSynchronousErrorHandling)throw e;(0,i.z)(e)},complete:function(){}}},9765:function(e,t,n){"use strict";n.d(t,{Yc:function(){return l},xQ:function(){return h}});var r=n(7574),i=n(7393),a=n(5319),s=n(7971),u=n(8858),c=n(9181),l=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).destination=e,r}return p(n)}(i.L),h=function(){var e=function(e,t){g(i,e);var n=m(i);function i(){var e;return v(this,i),(e=n.call(this)).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return p(i,[{key:t,value:function(){return new l(this)}},{key:"lift",value:function(e){var t=new f(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new s.N;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)}},{key:"error",value:function(e){if(this.closed)throw new s.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new s.N;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new s.N;return o(S(i.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new s.N;return this.hasError?(e.error(this.thrownError),a.w.EMPTY):this.isStopped?(e.complete(),a.w.EMPTY):(this.observers.push(e),new u.W(this,e))}},{key:"asObservable",value:function(){var e=new r.y;return e.source=this,e}}]),i}(r.y,c.b);return e.create=function(e,t){return new f(e,t)},e}(),f=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).destination=e,i.source=r,i}return p(n,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):a.w.EMPTY}}]),n}(h)},8858:function(e,t,n){"use strict";n.d(t,{W:function(){return r}});var r=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).subject=e,i.subscriber=r,i.closed=!1,i}return p(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}}}]),n}(n(5319).w)},7393:function(e,t,n){"use strict";n.d(t,{L:function(){return l}});var r=n(9105),i=n(6490),a=n(5319),s=n(9181),u=n(2494),c=n(4449),l=function(e,t){g(r,e);var n=m(r);function r(e,t,a){var o;switch(v(this,r),(o=n.call(this)).syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=i.c;break;case 1:if(!e){o.destination=i.c;break}if("object"==typeof e){e instanceof r?(o.syncErrorThrowable=e.syncErrorThrowable,o.destination=e,e.add(k(o))):(o.syncErrorThrowable=!0,o.destination=new h(k(o),e));break}default:o.syncErrorThrowable=!0,o.destination=new h(k(o),e,t,a)}return o}return p(r,[{key:t,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,o(S(r.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}],[{key:"create",value:function(e,t,n){var i=new r(e,t,n);return i.syncErrorThrowable=!1,i}}]),r}(a.w,s.b),h=function(e){g(n,e);var t=m(n);function n(e,a,o,s){var u,c;v(this,n),(u=t.call(this))._parentSubscriber=e;var l=k(u);return(0,r.m)(a)?c=a:a&&(c=a.next,o=a.error,s=a.complete,a!==i.c&&(l=Object.create(a),(0,r.m)(l.unsubscribe)&&u.add(l.unsubscribe.bind(l)),l.unsubscribe=u.unsubscribe.bind(k(u)))),u._context=l,u._next=c,u._error=o,u._complete=s,u}return p(n,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;u.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,n=u.v.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,c.z)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,c.z)(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};u.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),u.v.useDeprecatedSynchronousErrorHandling)throw n;(0,c.z)(n)}}},{key:"__tryOrSetError",value:function(e,t,n){if(!u.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return u.v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):((0,c.z)(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),n}(l)},5319:function(e,t,n){"use strict";n.d(t,{w:function(){return u}});var r,i=n(9796),a=n(1555),o=n(9105),s=function(){function e(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map(function(e,t){return"".concat(t+1,") ").concat(e.toString())}).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),u=function(){function e(t){v(this,e),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return p(e,[{key:"unsubscribe",value:function(){var t;if(!this.closed){var n=this._parentOrParents,r=this._ctorUnsubscribe,u=this._unsubscribe,l=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var h=0;h<n.length;++h)n[h].remove(this);if((0,o.m)(u)){r&&(this._unsubscribe=void 0);try{u.call(this)}catch(v){t=v instanceof s?c(v.errors):[v]}}if((0,i.k)(l))for(var f=-1,d=l.length;++f<d;){var p=l[f];if((0,a.K)(p))try{p.unsubscribe()}catch(v){t=t||[],v instanceof s?t=t.concat(c(v.errors)):t.push(v)}}if(t)throw new s(t)}}},{key:"add",value:function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[n]:a.push(n),n}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}]),e}();function c(e){return e.reduce(function(e,t){return e.concat(t instanceof s?t.errors:t)},[])}u.EMPTY=((r=new u).closed=!0,r)},2494:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:function(e,t,n){"use strict";n.d(t,{IY:function(){return o},Ds:function(){return s},ft:function(){return u}});var r=n(7393),i=n(7574),a=n(7444),o=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this)).parent=e,r}return p(n,[{key:"_next",value:function(e){this.parent.notifyNext(e)}},{key:"_error",value:function(e){this.parent.notifyError(e),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(),this.unsubscribe()}}]),n}(r.L),s=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"notifyNext",value:function(e){this.destination.next(e)}},{key:"notifyError",value:function(e){this.destination.error(e)}},{key:"notifyComplete",value:function(){this.destination.complete()}}]),n}(r.L);function u(e,t){if(!t.closed){if(e instanceof i.y)return e.subscribe(t);var n;try{n=(0,a.s)(e)(t)}catch(r){t.error(r)}return n}}},2441:function(e,t,n){"use strict";n.d(t,{c:function(){return c},N:function(){return l}});var r,i=n(9765),a=n(7574),s=n(5319),u=n(1307),c=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).source=e,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return p(n,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new s.w).add(this.source.subscribe(new h(this.getSubject(),this))),e.closed&&(this._connection=null,e=s.w.EMPTY)),e}},{key:"refCount",value:function(){return(0,u.x)()(this)}}]),n}(a.y),l={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(r=c.prototype)._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}},h=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).connectable=r,i}return p(n,[{key:"_error",value:function(e){this._unsubscribe(),o(S(n.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),o(S(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),n}(i.Yc)},9193:function(e,t,n){"use strict";n.d(t,{E:function(){return i},c:function(){return a}});var r=n(7574),i=new r.y(function(e){return e.complete()});function a(e){return e?function(e){return new r.y(function(t){return e.schedule(function(){return t.complete()})})}(e):i}},4402:function(e,t,n){"use strict";n.d(t,{D:function(){return h}});var r=n(7574),i=n(7444),a=n(5319),o=n(6554),s=n(4087),u=n(377),c=n(4072),l=n(9489);function h(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o.L]}(e))return function(e,t){return new r.y(function(n){var r=new a.w;return r.add(t.schedule(function(){var i=e[o.L]();r.add(i.subscribe({next:function(e){r.add(t.schedule(function(){return n.next(e)}))},error:function(e){r.add(t.schedule(function(){return n.error(e)}))},complete:function(){r.add(t.schedule(function(){return n.complete()}))}}))})),r})}(e,t);if((0,c.t)(e))return function(e,t){return new r.y(function(n){var r=new a.w;return r.add(t.schedule(function(){return e.then(function(e){r.add(t.schedule(function(){n.next(e),r.add(t.schedule(function(){return n.complete()}))}))},function(e){r.add(t.schedule(function(){return n.error(e)}))})})),r})}(e,t);if((0,l.z)(e))return(0,s.r)(e,t);if(function(e){return e&&"function"==typeof e[u.hZ]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y(function(n){var r,i=new a.w;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(t.schedule(function(){r=e[u.hZ](),i.add(t.schedule(function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(a){return void n.error(a)}t?n.complete():(n.next(e),this.schedule())}}))})),i})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof r.y?e:new r.y((0,i.s)(e))}},6693:function(e,t,n){"use strict";n.d(t,{n:function(){return o}});var r=n(7574),i=n(5015),a=n(4087);function o(e,t){return t?(0,a.r)(e,t):new r.y((0,i.V)(e))}},6682:function(e,t,n){"use strict";n.d(t,{T:function(){return s}});var r=n(7574),i=n(4869),a=n(3282),o=n(6693);function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var s=Number.POSITIVE_INFINITY,u=null,c=t[t.length-1];return(0,i.K)(c)?(u=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(s=t.pop())):"number"==typeof c&&(s=t.pop()),null===u&&1===t.length&&t[0]instanceof r.y?t[0]:(0,a.J)(s)((0,o.n)(t,u))}},5917:function(e,t,n){"use strict";n.d(t,{of:function(){return o}});var r=n(4869),i=n(6693),a=n(4087);function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t[t.length-1];return(0,r.K)(o)?(t.pop(),(0,a.r)(t,o)):(0,i.n)(t)}},205:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var r=n(7574);function i(e,t){return new r.y(t?function(n){return t.schedule(a,0,{error:e,subscriber:n})}:function(t){return t.error(e)})}function a(e){var t=e.error;e.subscriber.error(t)}},8002:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(7393);function i(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new a(e,t))}}var a=function(){function e(t,n){v(this,e),this.project=t,this.thisArg=n}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new o(e,this.project,this.thisArg))}}]),e}(),o=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e)).project=r,a.count=0,a.thisArg=i||k(a),a}return p(n,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(r.L)},3282:function(e,t,n){"use strict";n.d(t,{J:function(){return a}});var r=n(9773),i=n(4487);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return(0,r.zg)(i.y,e)}},9773:function(e,t,n){"use strict";n.d(t,{zg:function(){return o}});var r=n(8002),i=n(4402),a=n(5345);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof t?function(a){return a.pipe(o(function(n,a){return(0,i.D)(e(n,a)).pipe((0,r.U)(function(e,r){return t(n,e,a,r)}))},n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new s(e,n))})}var s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;v(this,e),this.project=t,this.concurrent=n}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new u(e,this.project,this.concurrent))}}]),e}(),u=function(e){g(n,e);var t=m(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return v(this,n),(i=t.call(this,e)).project=r,i.concurrent=a,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return p(n,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}},{key:"_innerSub",value:function(e){var t=new a.IY(this),n=this.destination;n.add(t);var r=(0,a.ft)(e,t);r!==t&&n.add(r)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e){this.destination.next(e)}},{key:"notifyComplete",value:function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(a.Ds)},9746:function(e,t,n){"use strict";n.d(t,{QV:function(){return a},ht:function(){return s}});var r=n(7393),i=n(3098);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new o(e,t))}}var o=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;v(this,e),this.scheduler=t,this.delay=n}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new s(e,this.scheduler,this.delay))}}]),e}(),s=function(e){g(n,e);var t=m(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return v(this,n),(i=t.call(this,e)).scheduler=r,i.delay=a,i}return p(n,[{key:"scheduleMessage",value:function(e){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new u(e,this.destination)))}},{key:"_next",value:function(e){this.scheduleMessage(i.P.createNext(e))}},{key:"_error",value:function(e){this.scheduleMessage(i.P.createError(e)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(i.P.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()}}]),n}(r.L),u=p(function e(t,n){v(this,e),this.notification=t,this.destination=n})},1307:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});var r=n(7393);function i(){return function(e){return e.lift(new a(e))}}var a=function(){function e(t){v(this,e),this.connectable=t}return p(e,[{key:"call",value:function(e,t){var n=this.connectable;n._refCount++;var r=new o(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),e}(),o=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).connectable=r,i}return p(n,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),n}(r.L)},9673:function(e,t,n){"use strict";n.d(t,{R:function(){return s}});var r=n(7574),i=n(4581),a=n(6561),o=function(e){g(n,e);var t=m(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.e;return v(this,n),(r=t.call(this)).source=e,r.delayTime=o,r.scheduler=s,(!(0,a.k)(o)||o<0)&&(r.delayTime=0),s&&"function"==typeof s.schedule||(r.scheduler=i.e),r}return p(n,[{key:"_subscribe",value:function(e){return this.scheduler.schedule(n.dispatch,this.delayTime,{source:this.source,subscriber:e})}}],[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.e;return new n(e,t,r)}},{key:"dispatch",value:function(e){var t=e.source,n=e.subscriber;return this.add(t.subscribe(n))}}]),n}(r.y);function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new u(e,t))}}var u=function(){function e(t,n){v(this,e),this.scheduler=t,this.delay=n}return p(e,[{key:"call",value:function(e,t){return new o(t,this.delay,this.scheduler).subscribe(e)}}]),e}()},3342:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(7393);function i(){}var a=n(9105);function o(e,t,n){return function(r){return r.lift(new s(e,t,n))}}var s=function(){function e(t,n,r){v(this,e),this.nextOrObserver=t,this.error=n,this.complete=r}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new u(e,this.nextOrObserver,this.error,this.complete))}}]),e}(),u=function(e){g(n,e);var t=m(n);function n(e,r,o,s){var u;return v(this,n),(u=t.call(this,e))._tapNext=i,u._tapError=i,u._tapComplete=i,u._tapError=o||i,u._tapComplete=s||i,(0,a.m)(r)?(u._context=k(u),u._tapNext=r):r&&(u._context=r,u._tapNext=r.next||i,u._tapError=r.error||i,u._tapComplete=r.complete||i),u}return p(n,[{key:"_next",value:function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}},{key:"_error",value:function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}]),n}(r.L)},4087:function(e,t,n){"use strict";n.d(t,{r:function(){return a}});var r=n(7574),i=n(5319);function a(e,t){return new r.y(function(n){var r=new i.w,a=0;return r.add(t.schedule(function(){a!==e.length?(n.next(e[a++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:function(e,t,n){"use strict";n.d(t,{o:function(){return r}});var r=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i.pending=!1,i}return p(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}},{key:"requestAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(e.flush.bind(e,this),n)}},{key:"recycleAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}},{key:"execute",value:function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(e,t){var n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}},{key:"_unsubscribe",value:function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}]),n}(function(e){g(n,e);var t=m(n);function n(e,r){return v(this,n),t.call(this)}return p(n,[{key:"schedule",value:function(e){return this}}]),n}(n(5319).w))},6102:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});var r=function(){var e=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.now;v(this,e),this.SchedulerAction=t,this.now=n}return p(e,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,e).schedule(n,t)}}]),e}();return e.now=function(){return Date.now()},e}(),i=function(e){g(n,e);var t=m(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.now;return v(this,n),(i=t.call(this,e,function(){return n.delegate&&n.delegate!==k(i)?n.delegate.now():a()})).actions=[],i.active=!1,i.scheduled=void 0,i}return p(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(e,t,r):o(S(n.prototype),"schedule",this).call(this,e,t,r)}},{key:"flush",value:function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}}]),n}(r)},4581:function(e,t,n){"use strict";n.d(t,{e:function(){return f},E:function(){return h}});var r=1,i=Promise.resolve(),a={};function s(e){return e in a&&(delete a[e],!0)}var u=function(e){var t=r++;return a[t]=!0,i.then(function(){return s(t)&&e()}),t},c=function(e){s(e)},l=n(6465),h=new(function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"flush",value:function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}}}]),n}(n(6102).v))(function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i}return p(n,[{key:"requestAsyncId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0?o(S(n.prototype),"requestAsyncId",this).call(this,e,t,r):(e.actions.push(this),e.scheduled||(e.scheduled=u(e.flush.bind(e,null))))}},{key:"recycleAsyncId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==r&&r>0||null===r&&this.delay>0)return o(S(n.prototype),"recycleAsyncId",this).call(this,e,t,r);0===e.actions.length&&(c(t),e.scheduled=void 0)}}]),n}(l.o)),f=h},3637:function(e,t,n){"use strict";n.d(t,{z:function(){return i},P:function(){return a}});var r=n(6465),i=new(n(6102).v)(r.o),a=i},7771:function(e,t,n){"use strict";n.d(t,{c:function(){return a},N:function(){return i}});var r=n(6465),i=new(function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n)}(n(6102).v))(function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i}return p(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t>0?o(S(n.prototype),"schedule",this).call(this,e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}},{key:"execute",value:function(e,t){return t>0||this.closed?o(S(n.prototype),"execute",this).call(this,e,t):this._execute(e,t)}},{key:"requestAsyncId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0||null===r&&this.delay>0?o(S(n.prototype),"requestAsyncId",this).call(this,e,t,r):e.flush(this)}}]),n}(r.o)),a=i},377:function(e,t,n){"use strict";n.d(t,{hZ:function(){return r}});var r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});var r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});var r=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},4449:function(e,t,n){"use strict";function r(e){setTimeout(function(){throw e},0)}n.d(t,{z:function(){return r}})},4487:function(e,t,n){"use strict";function r(e){return e}n.d(t,{y:function(){return r}})},9796:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});var r=Array.isArray||function(e){return e&&"number"==typeof e.length}},9489:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},9105:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,{m:function(){return r}})},6561:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});var r=n(9796);function i(e){return!(0,r.k)(e)&&e-parseFloat(e)+1>=0}},1555:function(e,t,n){"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,{K:function(){return r}})},4072:function(e,t,n){"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:function(){return r}})},4869:function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,{K:function(){return r}})},7444:function(e,t,n){"use strict";n.d(t,{s:function(){return l}});var r=n(5015),i=n(4449),a=n(377),o=n(6554),s=n(9489),u=n(4072),c=n(1555),l=function(e){if(e&&"function"==typeof e[o.L])return l=e,function(e){var t=l[o.L]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if((0,s.z)(e))return(0,r.V)(e);if((0,u.t)(e))return n=e,function(e){return n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,i.z),e};if(e&&"function"==typeof e[a.hZ])return t=e,function(e){for(var n=t[a.hZ]();;){var r=void 0;try{r=n.next()}catch(i){return e.error(i),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e};var t,n,l,h=(0,c.K)(e)?"an invalid object":"'".concat(e,"'");throw new TypeError("You provided ".concat(h," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))}},5015:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var r=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}}},9562:function(e,t,i){"use strict";var a=i(3018),s=null;function c(){return s}var h=new a.OlP("DocumentToken"),f=function(){var e=function(){function e(){v(this,e)}return p(e,[{key:"historyGo",value:function(e){throw new Error("Not implemented")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,a.Yz7)({factory:d,token:e,providedIn:"platform"}),e}();function d(){return(0,a.LFG)(_)}var b=new a.OlP("Location Initialized"),_=function(){var e=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this))._doc=e,r._init(),r}return p(n,[{key:"_init",value:function(){this.location=window.location,this._history=window.history}},{key:"getBaseHrefFromDOM",value:function(){return c().getBaseHref(this._doc)}},{key:"onPopState",value:function(e){var t=c().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),function(){return t.removeEventListener("popstate",e)}}},{key:"onHashChange",value:function(e){var t=c().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),function(){return t.removeEventListener("hashchange",e)}}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(e){this.location.pathname=e}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(e,t,n){x()?this._history.pushState(e,t,n):this.location.hash=n}},{key:"replaceState",value:function(e,t,n){x()?this._history.replaceState(e,t,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"historyGo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._history.go(e)}},{key:"getState",value:function(){return this._history.state}}]),n}(f);return e.\u0275fac=function(t){return new(t||e)(a.LFG(h))},e.\u0275prov=(0,a.Yz7)({factory:T,token:e,providedIn:"platform"}),e}();function x(){return!!window.history.pushState}function T(){return new _((0,a.LFG)(h))}function I(e,t){if(0==e.length)return t;if(0==t.length)return e;var n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function E(e){var t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function C(e){return e&&"?"!==e[0]?"?"+e:e}var A=function(){var e=function(){function e(){v(this,e)}return p(e,[{key:"historyGo",value:function(e){throw new Error("Not implemented")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,a.Yz7)({factory:R,token:e,providedIn:"root"}),e}();function R(e){var t=(0,a.LFG)(h).location;return new P((0,a.LFG)(f),t&&t.origin||"")}var D=new a.OlP("appBaseHref"),P=function(){var e=function(e){g(n,e);var t=m(n);function n(e,r){var i;if(v(this,n),(i=t.call(this))._platformLocation=e,i._removeListenerFns=[],null==r&&(r=i._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return i._baseHref=r,y(i)}return p(n,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(e){return I(this._baseHref,e)}},{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._platformLocation.pathname+C(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?"".concat(t).concat(n):t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+C(r));this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+C(r));this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformLocation).historyGo)||void 0===t||t.call(e,n)}}]),n}(A);return e.\u0275fac=function(t){return new(t||e)(a.LFG(f),a.LFG(D,8))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),O=function(){var e=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this))._platformLocation=e,i._baseHref="",i._removeListenerFns=[],null!=r&&(i._baseHref=r),i}return p(n,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}},{key:"prepareExternalUrl",value:function(e){var t=I(this._baseHref,e);return t.length>0?"#"+t:t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+C(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+C(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformLocation).historyGo)||void 0===t||t.call(e,n)}}]),n}(A);return e.\u0275fac=function(t){return new(t||e)(a.LFG(f),a.LFG(D,8))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),N=function(){var e=function(){function e(t,n){var r=this;v(this,e),this._subject=new a.vpe,this._urlChangeListeners=[],this._platformStrategy=t;var i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=E(M(i)),this._platformStrategy.onPopState(function(e){r._subject.emit({url:r.path(!0),pop:!0,state:e.state,type:e.type})})}return p(e,[{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(e))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(e+C(t))}},{key:"normalize",value:function(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,M(t)))}},{key:"prepareExternalUrl",value:function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+C(t)),n)}},{key:"replaceState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+C(t)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformStrategy).historyGo)||void 0===t||t.call(e,n)}},{key:"onUrlChange",value:function(e){var t=this;this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(function(e){t._notifyUrlChangeListeners(e.url,e.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach(function(n){return n(e,t)})}},{key:"subscribe",value:function(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(A),a.LFG(f))},e.normalizeQueryParams=C,e.joinWithSlash=I,e.stripTrailingSlash=E,e.\u0275prov=(0,a.Yz7)({factory:L,token:e,providedIn:"root"}),e}();function L(){return new N((0,a.LFG)(A),(0,a.LFG)(f))}function M(e){return e.replace(/\/index.html$/,"")}var Z=((Z=Z||{})[Z.Decimal=0]="Decimal",Z[Z.Percent=1]="Percent",Z[Z.Currency=2]="Currency",Z[Z.Scientific=3]="Scientific",Z),U=((U=U||{})[U.Zero=0]="Zero",U[U.One=1]="One",U[U.Two=2]="Two",U[U.Few=3]="Few",U[U.Many=4]="Many",U[U.Other=5]="Other",U),F=((F=F||{})[F.Decimal=0]="Decimal",F[F.Group=1]="Group",F[F.List=2]="List",F[F.PercentSign=3]="PercentSign",F[F.PlusSign=4]="PlusSign",F[F.MinusSign=5]="MinusSign",F[F.Exponential=6]="Exponential",F[F.SuperscriptingExponent=7]="SuperscriptingExponent",F[F.PerMille=8]="PerMille",F[F[1/0]=9]="Infinity",F[F.NaN=10]="NaN",F[F.TimeSeparator=11]="TimeSeparator",F[F.CurrencyDecimal=12]="CurrencyDecimal",F[F.CurrencyGroup=13]="CurrencyGroup",F);function q(e,t){var n=(0,a.cg1)(e),r=n[a.wAp.NumberSymbols][t];if(void 0===r){if(t===F.CurrencyDecimal)return n[a.wAp.NumberSymbols][F.Decimal];if(t===F.CurrencyGroup)return n[a.wAp.NumberSymbols][F.Group]}return r}var V=a.kL8,j=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function B(e){var t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}var H=p(function e(){v(this,e)}),z=function(){var e=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this)).locale=e,r}return p(n,[{key:"getPluralCategory",value:function(e,t){switch(V(t||this.locale)(e)){case U.Zero:return"zero";case U.One:return"one";case U.Two:return"two";case U.Few:return"few";case U.Many:return"many";default:return"other"}}}]),n}(H);return e.\u0275fac=function(t){return new(t||e)(a.LFG(a.soG))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}();function G(e,t){t=encodeURIComponent(t);var n,i=l(e.split(";"));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.indexOf("="),s=r(-1==o?[a,""]:[a.slice(0,o),a.slice(o+1)],2),u=s[0],c=s[1];if(u.trim()===t)return decodeURIComponent(c)}}catch(h){i.e(h)}finally{i.f()}return null}var K=function(){function e(t,n,r,i){v(this,e),this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}return p(e,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),e}(),W=function(){var e=function(){function e(t,n,r){v(this,e),this._viewContainer=t,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return p(e,[{key:"ngForOf",set:function(e){this._ngForOf=e,this._ngForOfDirty=!0}},{key:"ngForTrackBy",get:function(){return this._trackByFn},set:function(e){this._trackByFn=e}},{key:"ngForTemplate",set:function(e){e&&(this._template=e)}},{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(im){throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'. NgFor only supports binding to Iterables such as Arrays."))}}var t;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(e){var t=this,n=[];e.forEachOperation(function(e,r,i){if(null==e.previousIndex){var a=t._viewContainer.createEmbeddedView(t._template,new K(null,t._ngForOf,-1,-1),null===i?void 0:i),o=new J(e,a);n.push(o)}else if(null==i)t._viewContainer.remove(null===r?void 0:r);else if(null!==r){var s=t._viewContainer.get(r);t._viewContainer.move(s,i);var u=new J(e,s);n.push(u)}});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var i=0,a=this._viewContainer.length;i<a;i++){var o=this._viewContainer.get(i);o.context.index=i,o.context.count=a,o.context.ngForOf=this._ngForOf}e.forEachIdentityChange(function(e){t._viewContainer.get(e.currentIndex).context.$implicit=e.item})}},{key:"_perViewChange",value:function(e,t){e.context.$implicit=t.item}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))},e.\u0275dir=a.lG2({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e}(),J=p(function e(t,n){v(this,e),this.record=t,this.view=n}),Y=function(){var e=function(){function e(t,n){v(this,e),this._viewContainer=t,this._context=new Q,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return p(e,[{key:"ngIf",set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}},{key:"ngIfThen",set:function(e){$("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(e){$("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(a.s_b),a.Y36(a.Rgc))},e.\u0275dir=a.lG2({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e}(),Q=p(function e(){v(this,e),this.$implicit=null,this.ngIf=null});function $(e,t){if(t&&!t.createEmbeddedView)throw new Error("".concat(e," must be a TemplateRef, but received '").concat((0,a.AaK)(t),"'."))}function X(e,t){return Error("InvalidPipeArgument: '".concat(t,"' for pipe '").concat((0,a.AaK)(e),"'"))}var ee,te=function(){function e(){v(this,e)}return p(e,[{key:"createSubscription",value:function(e,t){return e.subscribe({next:t,error:function(e){throw e}})}},{key:"dispose",value:function(e){e.unsubscribe()}},{key:"onDestroy",value:function(e){e.unsubscribe()}}]),e}(),ne=new(function(){function e(){v(this,e)}return p(e,[{key:"createSubscription",value:function(e,t){return e.then(t,function(e){throw e})}},{key:"dispose",value:function(e){}},{key:"onDestroy",value:function(e){}}]),e}()),re=new te,ie=((ee=function(){function e(t){v(this,e),this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}return p(e,[{key:"ngOnDestroy",value:function(){this._subscription&&this._dispose()}},{key:"transform",value:function(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}},{key:"_subscribe",value:function(e){var t=this;this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,function(n){return t._updateLatestValue(e,n)})}},{key:"_selectStrategy",value:function(t){if((0,a.QGY)(t))return ne;if((0,a.F4k)(t))return re;throw X(e,t)}},{key:"_dispose",value:function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}},{key:"_updateLatestValue",value:function(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}]),e}()).\u0275fac=function(e){return new(e||ee)(a.Y36(a.sBO,16))},ee.\u0275pipe=a.Yjl({name:"async",type:ee,pure:!1}),ee),ae=function(){var e=function(){function e(t){v(this,e),this._locale=t}return p(e,[{key:"transform",value:function(t,n,r){if(!function(e){return!(null==e||""===e||e!=e)}(t))return null;r=r||this._locale;try{return function(e,t,n){return function(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s="",u=!1;if(isFinite(e)){var c=function(e){var t,n,r,i,a,o=Math.abs(e)+"",s=0;for((n=o.indexOf("."))>-1&&(o=o.replace(".","")),(r=o.search(/e/i))>0?(n<0&&(n=r),n+=+o.slice(r+1),o=o.substring(0,r)):n<0&&(n=o.length),r=0;"0"===o.charAt(r);r++);if(r===(a=o.length))t=[0],n=1;else{for(a--;"0"===o.charAt(a);)a--;for(n-=r,t=[],i=0;r<=a;r++,i++)t[i]=Number(o.charAt(r))}return n>22&&(t=t.splice(0,21),s=n-1,n=1),{digits:t,exponent:s,integerLen:n}}(e);o&&(c=function(e){if(0===e.digits[0])return e;var t=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===t?e.digits.push(0,0):1===t&&e.digits.push(0),e.integerLen+=2),e}(c));var l=t.minInt,h=t.minFrac,f=t.maxFrac;if(a){var d=a.match(j);if(null===d)throw new Error("".concat(a," is not a valid digit info"));var p=d[1],v=d[3],g=d[5];null!=p&&(l=B(p)),null!=v&&(h=B(v)),null!=g?f=B(g):null!=v&&h>f&&(f=h)}!function(e,t,n){if(t>n)throw new Error("The minimum number of digits after fraction (".concat(t,") is higher than the maximum (").concat(n,")."));var r=e.digits,i=r.length-e.integerLen,a=Math.min(Math.max(t,i),n),o=a+e.integerLen,s=r[o];if(o>0){r.splice(Math.max(e.integerLen,o));for(var u=o;u<r.length;u++)r[u]=0}else{i=Math.max(0,i),e.integerLen=1,r.length=Math.max(1,o=a+1),r[0]=0;for(var c=1;c<o;c++)r[c]=0}if(s>=5)if(o-1<0){for(var l=0;l>o;l--)r.unshift(0),e.integerLen++;r.unshift(1),e.integerLen++}else r[o-1]++;for(;i<Math.max(0,a);i++)r.push(0);var h=0!==a,f=t+e.integerLen,d=r.reduceRight(function(e,t,n,r){return r[n]=(t+=e)<10?t:t-10,h&&(0===r[n]&&n>=f?r.pop():h=!1),t>=10?1:0},0);d&&(r.unshift(d),e.integerLen++)}(c,h,f);var m=c.digits,y=c.integerLen,k=c.exponent,b=[];for(u=m.every(function(e){return!e});y<l;y++)m.unshift(0);for(;y<0;y++)m.unshift(0);y>0?b=m.splice(y,m.length):(b=m,m=[0]);var w=[];for(m.length>=t.lgSize&&w.unshift(m.splice(-t.lgSize,m.length).join(""));m.length>t.gSize;)w.unshift(m.splice(-t.gSize,m.length).join(""));m.length&&w.unshift(m.join("")),s=w.join(q(n,r)),b.length&&(s+=q(n,i)+b.join("")),k&&(s+=q(n,F.Exponential)+"+"+k)}else s=q(n,F.Infinity);return s=e<0&&!u?t.negPre+s+t.negSuf:t.posPre+s+t.posSuf}(e,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=e.split(";"),i=r[0],a=r[1],o=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],s=o[0],u=o[1]||"";n.posPre=s.substr(0,s.indexOf("#"));for(var c=0;c<u.length;c++){var l=u.charAt(c);"0"===l?n.minFrac=n.maxFrac=c+1:"#"===l?n.maxFrac=c+1:n.posSuf+=l}var h=s.split(",");if(n.gSize=h[1]?h[1].length:0,n.lgSize=h[2]||h[1]?(h[2]||h[1]).length:0,a){var f=i.length-n.posPre.length-n.posSuf.length,d=a.indexOf("#");n.negPre=a.substr(0,d).replace(/'/g,""),n.negSuf=a.substr(d+f).replace(/'/g,"")}else n.negPre=t+n.posPre,n.negSuf=n.posSuf;return n}(function(e,t){return(0,a.cg1)(e)[a.wAp.NumberFormats][t]}(t,Z.Decimal),q(t,F.MinusSign)),t,F.Group,F.Decimal,n)}(function(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error("".concat(e," is not a number"));return e}(t),r,n)}catch(i){throw X(e,i.message)}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(a.soG,16))},e.\u0275pipe=a.Yjl({name:"number",type:e,pure:!0}),e}(),oe=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[{provide:H,useClass:z}]}),e}();function se(e){return"server"===e}var ue=function(){var e=p(function e(){v(this,e)});return e.\u0275prov=(0,a.Yz7)({token:e,providedIn:"root",factory:function(){return new ce((0,a.LFG)(h),window)}}),e}(),ce=function(){function e(t,n){v(this,e),this.document=t,this.window=n,this.offset=function(){return[0,0]}}return p(e,[{key:"setOffset",value:function(e){this.offset=Array.isArray(e)?function(){return e}:e}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}},{key:"scrollToPosition",value:function(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}},{key:"scrollToAnchor",value:function(e){if(this.supportsScrolling()){var t=function(e,t){var n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow))for(var r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;i;){var a=i.shadowRoot;if(a){var o=a.getElementById(t)||a.querySelector('[name="'.concat(t,'"]'));if(o)return o}i=r.nextNode()}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}}},{key:"setHistoryScrollRestoration",value:function(e){if(this.supportScrollRestoration()){var t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}},{key:"scrollToElement",value:function(e){var t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"attemptFocus",value:function(e){return e.focus(),this.document.activeElement===e}},{key:"supportScrollRestoration",value:function(){try{if(!this.supportsScrolling())return!1;var e=le(this.window.history)||le(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(im){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(im){return!1}}}]),e}();function le(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}var he,fe=p(function e(){v(this,e)}),de=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"onAndCancel",value:function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"remove",value:function(e){e.parentNode&&e.parentNode.removeChild(e)}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getBaseHref",value:function(e){var t=(pe=pe||document.querySelector("base"))?pe.getAttribute("href"):null;return null==t?null:function(e){(he=he||document.createElement("a")).setAttribute("href",e);var t=he.pathname;return"/"===t.charAt(0)?t:"/".concat(t)}(t)}},{key:"resetBaseElement",value:function(){pe=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getCookie",value:function(e){return G(document.cookie,e)}}],[{key:"makeCurrent",value:function(){var e;e=new n,s||(s=e)}}]),n}(function(e){g(n,e);var t=m(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments)).supportsDOMEvents=!0,e}return p(n)}(function(){return p(function e(){v(this,e)})}())),pe=null,ve=new a.OlP("TRANSITION_ID"),ge=[{provide:a.ip1,useFactory:function(e,t,n){return function(){n.get(a.CZH).donePromise.then(function(){var n=c();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(function(t){return t.getAttribute("ng-transition")===e}).forEach(function(e){return n.remove(e)})})}},deps:[ve,h,a.zs3],multi:!0}],me=function(){function e(){v(this,e)}return p(e,[{key:"addToWindow",value:function(e){a.dqk.getAngularTestability=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},a.dqk.getAllAngularTestabilities=function(){return e.getAllTestabilities()},a.dqk.getAllAngularRootElements=function(){return e.getAllRootElements()},a.dqk.frameworkStabilizers||(a.dqk.frameworkStabilizers=[]),a.dqk.frameworkStabilizers.push(function(e){var t=a.dqk.getAllAngularTestabilities(),n=t.length,r=!1,i=function(t){r=r||t,0==--n&&e(r)};t.forEach(function(e){e.whenStable(i)})})}},{key:"findTestabilityInTree",value:function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?c().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}],[{key:"init",value:function(){(0,a.VLi)(new e)}}]),e}(),ye=function(){var e=function(){function e(){v(this,e)}return p(e,[{key:"build",value:function(){return new XMLHttpRequest}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),ke=new a.OlP("EventManagerPlugins"),be=function(){var e=function(){function e(t,n){var r=this;v(this,e),this._zone=n,this._eventNameToPlugin=new Map,t.forEach(function(e){return e.manager=r}),this._plugins=t.slice().reverse()}return p(e,[{key:"addEventListener",value:function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}},{key:"addGlobalEventListener",value:function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event ".concat(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(ke),a.LFG(a.R0b))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),we=function(){function e(t){v(this,e),this._doc=t}return p(e,[{key:"addGlobalEventListener",value:function(e,t,n){var r=c().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(t));return this.addEventListener(r,t,n)}}]),e}(),_e=function(){var e=function(){function e(){v(this,e),this._stylesSet=new Set}return p(e,[{key:"addStyles",value:function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),xe=function(){var e=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this))._doc=e,r._hostNodes=new Map,r._hostNodes.set(e.head,[]),r}return p(n,[{key:"_addStylesToHost",value:function(e,t,n){var r=this;e.forEach(function(e){var i=r._doc.createElement("style");i.textContent=e,n.push(t.appendChild(i))})}},{key:"addHost",value:function(e){var t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}},{key:"removeHost",value:function(e){var t=this._hostNodes.get(e);t&&t.forEach(Se),this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach(function(n,r){t._addStylesToHost(e,r,n)})}},{key:"ngOnDestroy",value:function(){this._hostNodes.forEach(function(e){return e.forEach(Se)})}}]),n}(_e);return e.\u0275fac=function(t){return new(t||e)(a.LFG(h))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}();function Se(e){c().remove(e)}var Te={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ie=/%COMP%/g;function Ee(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?Ee(e,i,n):(i=i.replace(Ie,e),n.push(i))}return n}function Ce(e){return function(t){if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var Ae=function(){var e=function(){function e(t,n,r){v(this,e),this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Re(t)}return p(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case a.ifc.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new De(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case 1:case a.ifc.ShadowDom:return new Pe(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var r=Ee(t.id,t.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(be),a.LFG(xe),a.LFG(a.AFp))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),Re=function(){function e(t){v(this,e),this.eventManager=t,this.data=Object.create(null)}return p(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS(Te[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,n){e&&e.insertBefore(t,n)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(n.textContent=""),n}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,n,r){if(r){t=r+":"+t;var i=Te[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}},{key:"removeAttribute",value:function(e,t,n){if(n){var r=Te[n];r?e.removeAttributeNS(r,t):e.removeAttribute("".concat(n,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,n,r){r&(a.JOm.DashCase|a.JOm.Important)?e.style.setProperty(t,n,r&a.JOm.Important?"important":""):e.style[t]=n}},{key:"removeStyle",value:function(e,t,n){n&a.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,n){e[t]=n}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ce(n)):this.eventManager.addEventListener(e,t,Ce(n))}}]),e}(),De=function(e){g(n,e);var t=m(n);function n(e,r,i,a){var o;v(this,n),(o=t.call(this,e)).component=i;var s=Ee(a+"-"+i.id,i.styles,[]);return r.addStyles(s),o.contentAttr="_ngcontent-%COMP%".replace(Ie,a+"-"+i.id),o.hostAttr="_nghost-%COMP%".replace(Ie,a+"-"+i.id),o}return p(n,[{key:"applyToHost",value:function(e){o(S(n.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,t){var r=o(S(n.prototype),"createElement",this).call(this,e,t);return o(S(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(Re),Pe=function(e){g(n,e);var t=m(n);function n(e,r,i,a){var o;v(this,n),(o=t.call(this,e)).sharedStylesHost=r,o.hostEl=i,o.shadowRoot=i.attachShadow({mode:"open"}),o.sharedStylesHost.addHost(o.shadowRoot);for(var s=Ee(a.id,a.styles,[]),u=0;u<s.length;u++){var c=document.createElement("style");c.textContent=s[u],o.shadowRoot.appendChild(c)}return o}return p(n,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,t){return o(S(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"insertBefore",value:function(e,t,r){return o(S(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),t,r)}},{key:"removeChild",value:function(e,t){return o(S(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(o(S(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),n}(Re),Oe=function(){var e=function(e){g(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e)}return p(n,[{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,n){var r=this;return e.addEventListener(t,n,!1),function(){return r.removeEventListener(e,t,n)}}},{key:"removeEventListener",value:function(e,t,n){return e.removeEventListener(t,n)}}]),n}(we);return e.\u0275fac=function(t){return new(t||e)(a.LFG(h))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),Ne=["alt","control","meta","shift"],Le={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Me={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ze={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},Ue=function(){var e=function(e){g(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e)}return p(n,[{key:"supports",value:function(e){return null!=n.parseEventName(e)}},{key:"addEventListener",value:function(e,t,r){var i=n.parseEventName(t),a=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return c().onAndCancel(e,i.domEventName,a)})}}],[{key:"parseEventName",value:function(e){var t=e.toLowerCase().split("."),r=t.shift();if(0===t.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(t.pop()),a="";if(Ne.forEach(function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),a+=e+".")}),a+=i,0!=t.length||0===i.length)return null;var o={};return o.domEventName=r,o.fullKey=a,o}},{key:"getEventFullKey",value:function(e){var t="",n=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Me.hasOwnProperty(t)&&(t=Me[t]))}return Le[t]||t}(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),Ne.forEach(function(r){r!=n&&(0,Ze[r])(e)&&(t+=r+".")}),t+=n}},{key:"eventCallback",value:function(e,t,r){return function(i){n.getEventFullKey(i)===e&&r.runGuarded(function(){return t(i)})}}},{key:"_normalizeKey",value:function(e){switch(e){case"esc":return"escape";default:return e}}}]),n}(we);return e.\u0275fac=function(t){return new(t||e)(a.LFG(h))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),Fe=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,a.Yz7)({factory:function(){return(0,a.LFG)(Ve)},token:e,providedIn:"root"}),e}();function qe(e){return new Ve(e.get(h))}var Ve=function(){var e=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this))._doc=e,r}return p(n,[{key:"sanitize",value:function(e,t){if(null==t)return null;switch(e){case a.q3G.NONE:return t;case a.q3G.HTML:return(0,a.qzn)(t,"HTML")?(0,a.z3N)(t):(0,a.EiD)(this._doc,String(t)).toString();case a.q3G.STYLE:return(0,a.qzn)(t,"Style")?(0,a.z3N)(t):t;case a.q3G.SCRIPT:if((0,a.qzn)(t,"Script"))return(0,a.z3N)(t);throw new Error("unsafe value used in a script context");case a.q3G.URL:return(0,a.yhl)(t),(0,a.qzn)(t,"URL")?(0,a.z3N)(t):(0,a.mCW)(String(t));case a.q3G.RESOURCE_URL:if((0,a.qzn)(t,"ResourceURL"))return(0,a.z3N)(t);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext ".concat(e," (see https://g.co/ng/security#xss)"))}}},{key:"bypassSecurityTrustHtml",value:function(e){return(0,a.JVY)(e)}},{key:"bypassSecurityTrustStyle",value:function(e){return(0,a.L6k)(e)}},{key:"bypassSecurityTrustScript",value:function(e){return(0,a.eBb)(e)}},{key:"bypassSecurityTrustUrl",value:function(e){return(0,a.LAX)(e)}},{key:"bypassSecurityTrustResourceUrl",value:function(e){return(0,a.pB0)(e)}}]),n}(Fe);return e.\u0275fac=function(t){return new(t||e)(a.LFG(h))},e.\u0275prov=(0,a.Yz7)({factory:function(){return qe((0,a.LFG)(a.gxx))},token:e,providedIn:"root"}),e}(),je=(0,a.eFA)(a._c5,"browser",[{provide:a.Lbi,useValue:"browser"},{provide:a.g9A,useValue:function(){de.makeCurrent(),me.init()},multi:!0},{provide:h,useFactory:function(){return(0,a.RDi)(document),document},deps:[]}]),Be=[[],{provide:a.zSh,useValue:"root"},{provide:a.qLn,useFactory:function(){return new a.qLn},deps:[]},{provide:ke,useClass:Oe,multi:!0,deps:[h,a.R0b,a.Lbi]},{provide:ke,useClass:Ue,multi:!0,deps:[h]},[],{provide:Ae,useClass:Ae,deps:[be,xe,a.AFp]},{provide:a.FYo,useExisting:Ae},{provide:_e,useExisting:xe},{provide:xe,useClass:xe,deps:[h]},{provide:a.dDg,useClass:a.dDg,deps:[a.R0b]},{provide:be,useClass:be,deps:[ke,a.R0b]},{provide:fe,useClass:ye,deps:[]},[]],He=function(){var e=function(){function e(t){if(v(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return p(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:a.AFp,useValue:t.appId},{provide:ve,useExisting:a.AFp},ge]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(e,12))},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:Be,imports:[oe,a.hGG]}),e}();function ze(){return new Ge((0,a.LFG)(h))}var Ge=function(){var e=function(){function e(t){v(this,e),this._doc=t,this._dom=c()}return p(e,[{key:"addTag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?this._getOrCreateElement(e,t):null}},{key:"addTags",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?e.reduce(function(e,r){return r&&e.push(t._getOrCreateElement(r,n)),e},[]):[]}},{key:"getTag",value:function(e){return e&&this._doc.querySelector("meta[".concat(e,"]"))||null}},{key:"getTags",value:function(e){if(!e)return[];var t=this._doc.querySelectorAll("meta[".concat(e,"]"));return t?[].slice.call(t):[]}},{key:"updateTag",value:function(e,t){if(!e)return null;t=t||this._parseSelector(e);var n=this.getTag(t);return n?this._setMetaElementAttributes(e,n):this._getOrCreateElement(e,!0)}},{key:"removeTag",value:function(e){this.removeTagElement(this.getTag(e))}},{key:"removeTagElement",value:function(e){e&&this._dom.remove(e)}},{key:"_getOrCreateElement",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!n){var r=this._parseSelector(e),i=this.getTags(r).filter(function(n){return t._containsAttributes(e,n)})[0];if(void 0!==i)return i}var a=this._dom.createElement("meta");return this._setMetaElementAttributes(e,a),this._doc.getElementsByTagName("head")[0].appendChild(a),a}},{key:"_setMetaElementAttributes",value:function(e,t){var n=this;return Object.keys(e).forEach(function(r){return t.setAttribute(n._getMetaKeyMap(r),e[r])}),t}},{key:"_parseSelector",value:function(e){var t=e.name?"name":"property";return"".concat(t,'="').concat(e[t],'"')}},{key:"_containsAttributes",value:function(e,t){var n=this;return Object.keys(e).every(function(r){return t.getAttribute(n._getMetaKeyMap(r))===e[r]})}},{key:"_getMetaKeyMap",value:function(e){return Ke[e]||e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(h))},e.\u0275prov=(0,a.Yz7)({factory:ze,token:e,providedIn:"root"}),e}(),Ke={httpEquiv:"http-equiv"};"undefined"!=typeof window&&window;var We=i(5917),Je=i(7574),Ye=i(9773);function Qe(e,t){return(0,Ye.zg)(e,t,1)}var $e=i(7393);function Xe(e,t){return function(n){return n.lift(new et(e,t))}}var et=function(){function e(t,n){v(this,e),this.predicate=t,this.thisArg=n}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new tt(e,this.predicate,this.thisArg))}}]),e}(),tt=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e)).predicate=r,a.thisArg=i,a.count=0,a}return p(n,[{key:"_next",value:function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}]),n}($e.L),nt=i(8002),rt=p(function e(){v(this,e)}),it=p(function e(){v(this,e)}),at=function(){function e(t){var n=this;v(this,e),this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){n.headers=new Map,t.split("\n").forEach(function(e){var t=e.indexOf(":");if(t>0){var r=e.slice(0,t),i=r.toLowerCase(),a=e.slice(t+1).trim();n.maybeSetNormalizedName(r,i),n.headers.has(i)?n.headers.get(i).push(a):n.headers.set(i,[a])}})}:function(){n.headers=new Map,Object.keys(t).forEach(function(e){var r=t[e],i=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(n.headers.set(i,r),n.maybeSetNormalizedName(e,i))})}:this.headers=new Map}return p(e,[{key:"has",value:function(e){return this.init(),this.headers.has(e.toLowerCase())}},{key:"get",value:function(e){this.init();var t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(e){return this.init(),this.headers.get(e.toLowerCase())||null}},{key:"append",value:function(e,t){return this.clone({name:e,value:t,op:"a"})}},{key:"set",value:function(e,t){return this.clone({name:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({name:e,value:t,op:"d"})}},{key:"maybeSetNormalizedName",value:function(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}},{key:"init",value:function(){var t=this;this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(e){return t.applyUpdate(e)}),this.lazyUpdate=null))}},{key:"copyFrom",value:function(e){var t=this;e.init(),Array.from(e.headers.keys()).forEach(function(n){t.headers.set(n,e.headers.get(n)),t.normalizedNames.set(n,e.normalizedNames.get(n))})}},{key:"clone",value:function(t){var n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}},{key:"applyUpdate",value:function(e){var t=e.name.toLowerCase();switch(e.op){case"a":case"s":var n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);var r=("a"===e.op?this.headers.get(t):void 0)||[];r.push.apply(r,u(n)),this.headers.set(t,r);break;case"d":var i=e.value;if(i){var a=this.headers.get(t);if(!a)return;0===(a=a.filter(function(e){return-1===i.indexOf(e)})).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}else this.headers.delete(t),this.normalizedNames.delete(t)}}},{key:"forEach",value:function(e){var t=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return e(t.normalizedNames.get(n),t.headers.get(n))})}}]),e}(),ot=function(){function e(){v(this,e)}return p(e,[{key:"encodeKey",value:function(e){return st(e)}},{key:"encodeValue",value:function(e){return st(e)}},{key:"decodeKey",value:function(e){return decodeURIComponent(e)}},{key:"decodeValue",value:function(e){return decodeURIComponent(e)}}]),e}();function st(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function ut(e){return"".concat(e)}var ct=function(){function e(){var t,n,i,a=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(v(this,e),this.updates=null,this.cloneFrom=null,this.encoder=o.encoder||new ot,o.fromString){if(o.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(t=o.fromString,n=this.encoder,i=new Map,t.length>0&&t.replace(/^\?/,"").split("&").forEach(function(e){var t=e.indexOf("="),a=r(-1==t?[n.decodeKey(e),""]:[n.decodeKey(e.slice(0,t)),n.decodeValue(e.slice(t+1))],2),o=a[0],s=a[1],u=i.get(o)||[];u.push(s),i.set(o,u)}),i)}else o.fromObject?(this.map=new Map,Object.keys(o.fromObject).forEach(function(e){var t=o.fromObject[e];a.map.set(e,Array.isArray(t)?t:[t])})):this.map=null}return p(e,[{key:"has",value:function(e){return this.init(),this.map.has(e)}},{key:"get",value:function(e){this.init();var t=this.map.get(e);return t?t[0]:null}},{key:"getAll",value:function(e){return this.init(),this.map.get(e)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(e,t){return this.clone({param:e,value:t,op:"a"})}},{key:"appendAll",value:function(e){var t=[];return Object.keys(e).forEach(function(n){var r=e[n];Array.isArray(r)?r.forEach(function(e){t.push({param:n,value:e,op:"a"})}):t.push({param:n,value:r,op:"a"})}),this.clone(t)}},{key:"set",value:function(e,t){return this.clone({param:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({param:e,value:t,op:"d"})}},{key:"toString",value:function(){var e=this;return this.init(),this.keys().map(function(t){var n=e.encoder.encodeKey(t);return e.map.get(t).map(function(t){return n+"="+e.encoder.encodeValue(t)}).join("&")}).filter(function(e){return""!==e}).join("&")}},{key:"clone",value:function(t){var n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}},{key:"init",value:function(){var e=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(t){return e.map.set(t,e.cloneFrom.map.get(t))}),this.updates.forEach(function(t){switch(t.op){case"a":case"s":var n=("a"===t.op?e.map.get(t.param):void 0)||[];n.push(ut(t.value)),e.map.set(t.param,n);break;case"d":if(void 0===t.value){e.map.delete(t.param);break}var r=e.map.get(t.param)||[],i=r.indexOf(ut(t.value));-1!==i&&r.splice(i,1),r.length>0?e.map.set(t.param,r):e.map.delete(t.param)}}),this.cloneFrom=this.updates=null)}}]),e}(),lt=function(){function e(){v(this,e),this.map=new Map}return p(e,[{key:"set",value:function(e,t){return this.map.set(e,t),this}},{key:"get",value:function(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}},{key:"delete",value:function(e){return this.map.delete(e),this}},{key:"keys",value:function(){return this.map.keys()}}]),e}();function ht(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function ft(e){return"undefined"!=typeof Blob&&e instanceof Blob}function dt(e){return"undefined"!=typeof FormData&&e instanceof FormData}var pt=function(){function e(t,n,r,i){var a;if(v(this,e),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new at),this.context||(this.context=new lt),this.params){var o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{var s=n.indexOf("?");this.urlWithParams=n+(-1===s?"?":s<n.length-1?"&":"")+o}}else this.params=new ct,this.urlWithParams=n}return p(e,[{key:"serializeBody",value:function(){return null===this.body?null:ht(this.body)||ft(this.body)||dt(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof ct?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||dt(this.body)?null:ft(this.body)?this.body.type||null:ht(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ct?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}},{key:"clone",value:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.method||this.method,i=n.url||this.url,a=n.responseType||this.responseType,o=void 0!==n.body?n.body:this.body,s=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,u=void 0!==n.reportProgress?n.reportProgress:this.reportProgress,c=n.headers||this.headers,l=n.params||this.params,h=null!==(t=n.context)&&void 0!==t?t:this.context;return void 0!==n.setHeaders&&(c=Object.keys(n.setHeaders).reduce(function(e,t){return e.set(t,n.setHeaders[t])},c)),n.setParams&&(l=Object.keys(n.setParams).reduce(function(e,t){return e.set(t,n.setParams[t])},l)),new e(r,i,o,{params:l,headers:c,context:h,reportProgress:u,responseType:a,withCredentials:s})}}]),e}(),vt=((vt=vt||{})[vt.Sent=0]="Sent",vt[vt.UploadProgress=1]="UploadProgress",vt[vt.ResponseHeader=2]="ResponseHeader",vt[vt.DownloadProgress=3]="DownloadProgress",vt[vt.Response=4]="Response",vt[vt.User=5]="User",vt),gt=p(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";v(this,e),this.headers=t.headers||new at,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}),mt=function(e){g(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v(this,n),(e=t.call(this,r)).type=vt.ResponseHeader,e}return p(n,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),n}(gt),yt=function(e){g(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v(this,n),(e=t.call(this,r)).type=vt.Response,e.body=void 0!==r.body?r.body:null,e}return p(n,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),n}(gt),kt=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e,0,"Unknown Error")).name="HttpErrorResponse",r.ok=!1,r.message=r.status>=200&&r.status<300?"Http failure during parsing for ".concat(e.url||"(unknown url)"):"Http failure response for ".concat(e.url||"(unknown url)",": ").concat(e.status," ").concat(e.statusText),r.error=e.error||null,r}return p(n)}(gt);function bt(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}var wt=function(){var e=function(){function e(t){v(this,e),this.handler=t}return p(e,[{key:"request",value:function(e,t){var n,r,i,a=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e instanceof pt?n=e:(r=o.headers instanceof at?o.headers:new at(o.headers),o.params&&(i=o.params instanceof ct?o.params:new ct({fromObject:o.params})),n=new pt(e,t,void 0!==o.body?o.body:null,{headers:r,context:o.context,params:i,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials}));var s=(0,We.of)(n).pipe(Qe(function(e){return a.handler.handle(e)}));if(e instanceof pt||"events"===o.observe)return s;var u=s.pipe(Xe(function(e){return e instanceof yt}));switch(o.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return u.pipe((0,nt.U)(function(e){if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return u.pipe((0,nt.U)(function(e){if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return u.pipe((0,nt.U)(function(e){if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return u.pipe((0,nt.U)(function(e){return e.body}))}case"response":return u;default:throw new Error("Unreachable: unhandled observe type ".concat(o.observe,"}"))}}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",e,t)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",e,t)}},{key:"head",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",e,t)}},{key:"jsonp",value:function(e,t){return this.request("JSONP",e,{params:(new ct).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",e,t)}},{key:"patch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",e,bt(n,t))}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",e,bt(n,t))}},{key:"put",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",e,bt(n,t))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(rt))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),_t=function(){function e(t,n){v(this,e),this.next=t,this.interceptor=n}return p(e,[{key:"handle",value:function(e){return this.interceptor.intercept(e,this.next)}}]),e}(),xt=new a.OlP("HTTP_INTERCEPTORS"),St=function(){var e=function(){function e(){v(this,e)}return p(e,[{key:"intercept",value:function(e,t){return t.handle(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),Tt=/^\)\]\}',?\n/,It=function(){var e=function(){function e(t){v(this,e),this.xhrFactory=t}return p(e,[{key:"handle",value:function(e){var t=this;if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Je.y(function(n){var r=t.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach(function(e,t){return r.setRequestHeader(e,t.join(","))}),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){var i=e.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(e.responseType){var a=e.responseType.toLowerCase();r.responseType="json"!==a?a:"text"}var o=e.serializeBody(),s=null,u=function(){if(null!==s)return s;var t=1223===r.status?204:r.status,n=r.statusText||"OK",i=new at(r.getAllResponseHeaders()),a=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(r)||e.url;return s=new mt({headers:i,status:t,statusText:n,url:a})},c=function(){var t=u(),i=t.headers,a=t.status,o=t.statusText,s=t.url,c=null;204!==a&&(c=void 0===r.response?r.responseText:r.response),0===a&&(a=c?200:0);var l=a>=200&&a<300;if("json"===e.responseType&&"string"==typeof c){var h=c;c=c.replace(Tt,"");try{c=""!==c?JSON.parse(c):null}catch(f){c=h,l&&(l=!1,c={error:f,text:c})}}l?(n.next(new yt({body:c,headers:i,status:a,statusText:o,url:s||void 0})),n.complete()):n.error(new kt({error:c,headers:i,status:a,statusText:o,url:s||void 0}))},l=function(e){var t=u().url,i=new kt({error:e,status:r.status||0,statusText:r.statusText||"Unknown Error",url:t||void 0});n.error(i)},h=!1,f=function(t){h||(n.next(u()),h=!0);var i={type:vt.DownloadProgress,loaded:t.loaded};t.lengthComputable&&(i.total=t.total),"text"===e.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},d=function(e){var t={type:vt.UploadProgress,loaded:e.loaded};e.lengthComputable&&(t.total=e.total),n.next(t)};return r.addEventListener("load",c),r.addEventListener("error",l),r.addEventListener("timeout",l),r.addEventListener("abort",l),e.reportProgress&&(r.addEventListener("progress",f),null!==o&&r.upload&&r.upload.addEventListener("progress",d)),r.send(o),n.next({type:vt.Sent}),function(){r.removeEventListener("error",l),r.removeEventListener("abort",l),r.removeEventListener("load",c),r.removeEventListener("timeout",l),e.reportProgress&&(r.removeEventListener("progress",f),null!==o&&r.upload&&r.upload.removeEventListener("progress",d)),r.readyState!==r.DONE&&r.abort()}})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(fe))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),Et=new a.OlP("XSRF_COOKIE_NAME"),Ct=new a.OlP("XSRF_HEADER_NAME"),At=p(function e(){v(this,e)}),Rt=function(){var e=function(){function e(t,n,r){v(this,e),this.doc=t,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return p(e,[{key:"getToken",value:function(){if("server"===this.platform)return null;var e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=G(e,this.cookieName),this.lastCookieString=e),this.lastToken}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(h),a.LFG(a.Lbi),a.LFG(Et))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),Dt=function(){var e=function(){function e(t,n){v(this,e),this.tokenService=t,this.headerName=n}return p(e,[{key:"intercept",value:function(e,t){var n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);var r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(At),a.LFG(Ct))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),Pt=function(){var e=function(){function e(t,n){v(this,e),this.backend=t,this.injector=n,this.chain=null}return p(e,[{key:"handle",value:function(e){if(null===this.chain){var t=this.injector.get(xt,[]);this.chain=t.reduceRight(function(e,t){return new _t(e,t)},this.backend)}return this.chain.handle(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(it),a.LFG(a.zs3))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),Ot=function(){var e=function(){function e(){v(this,e)}return p(e,null,[{key:"disable",value:function(){return{ngModule:e,providers:[{provide:Dt,useClass:St}]}}},{key:"withOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:e,providers:[t.cookieName?{provide:Et,useValue:t.cookieName}:[],t.headerName?{provide:Ct,useValue:t.headerName}:[]]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[Dt,{provide:xt,useExisting:Dt,multi:!0},{provide:At,useClass:Rt},{provide:Et,useValue:"XSRF-TOKEN"},{provide:Ct,useValue:"X-XSRF-TOKEN"}]}),e}(),Nt=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[wt,{provide:rt,useClass:Pt},It,{provide:it,useExisting:It}],imports:[[Ot.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),e}(),Lt=i(2329),Mt=i(4459),Zt=p(function e(t){return v(this,e),t}),Ut=p(function e(){return v(this,e),(0,Lt.C6)()}),Ft=new a.OlP("angularfire2._apps"),qt={provide:Zt,useFactory:function(e){return e&&1===e.length?e[0]:new Zt((0,Lt.Mq)())},deps:[[new a.FiY,Ft]]},Vt={provide:Ut,deps:[[new a.FiY,Ft]]};function jt(e){return function(t,n){var r=t.runOutsideAngular(function(){return e(n)});return new Zt(r)}}var Bt=function(){var e=p(function e(t){v(this,e),(0,Lt.KN)("angularfire",Mt.q4.full,"core"),(0,Lt.KN)("angularfire",Mt.q4.full,"app"),(0,Lt.KN)("angular",a.q4F.full,t.toString())});return e.\u0275fac=function(t){return new(t||e)(a.LFG(a.Lbi))},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[qt,Vt]}),e}();function Ht(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{ngModule:Bt,providers:[{provide:Ft,useFactory:jt(e),multi:!0,deps:[a.R0b,a.zs3,Mt.HU].concat(n)}]}}var zt=(0,Mt.u3)(Lt.ZF,!0);i(8882);var Gt=i(3854),Kt=i(279),Wt=i(9306),Jt=i(8604),Yt=p(function e(){return v(this,e),(0,Mt.vb)("auth")}),Qt=i(6304),$t=new Map,Xt={activated:!1,tokenObservers:[]},en={initialized:!1,enabled:!1};function tn(e){return $t.get(e)||Xt}function nn(e,t){$t.set(e,t)}function rn(){return en}var an=function(){function e(t,n,r,i,a){if(v(this,e),this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}return p(e,[{key:"start",value:function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})}},{key:"stop",value:function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}},{key:"isRunning",value:function(){return!!this.pending}},{key:"process",value:function(e){var t=this;return(0,Qt.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.stop(),n.prev=1,t.pending=new Gt.BH,n.next=5,function(e){return new Promise(function(t){setTimeout(t,e)})}(t.getNextRun(e));case 5:return t.pending.resolve(),n.next=8,t.pending.promise;case 8:return t.pending=new Gt.BH,n.next=11,t.operation();case 11:return t.pending.resolve(),n.next=14,t.pending.promise;case 14:t.process(!0).catch(function(){}),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(1),t.retryPolicy(n.t0)?t.process(!1).catch(function(){}):t.stop();case 20:case"end":return n.stop()}},n,null,[[1,17]])}))()}},{key:"getNextRun",value:function(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}]),e}(),on=new Gt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function sn(e){if(!tn(e).activated)throw on.create("use-before-activation",{appName:e.name})}function un(e,t){return cn.apply(this,arguments)}function cn(){return(cn=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,u,c,l,h,f,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.url,i=t.body,a={"Content-Type":"application/json"},!(o=n.getImmediate({optional:!0}))){e.next=7;break}return e.next=5,o.getHeartbeatsHeader();case 5:(s=e.sent)&&(a["X-Firebase-Client"]=s);case 7:return u={method:"POST",body:JSON.stringify(i),headers:a},e.prev=8,e.next=11,fetch(r,u);case 11:c=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(8),on.create("fetch-network-error",{originalErrorMessage:e.t0.message});case 17:if(200===c.status){e.next=19;break}throw on.create("fetch-status-error",{httpStatus:c.status});case 19:return e.prev=19,e.next=22,c.json();case 22:l=e.sent,e.next=28;break;case 25:throw e.prev=25,e.t1=e.catch(19),on.create("fetch-parse-error",{originalErrorMessage:e.t1.message});case 28:if((h=l.ttl.match(/^([\d.]+)(s)$/))&&h[2]&&!isNaN(Number(h[1]))){e.next=31;break}throw on.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: ".concat(l.ttl)});case 31:return f=1e3*Number(h[1]),d=Date.now(),e.abrupt("return",{token:l.token,expireTimeMillis:d+f,issuedAtTimeMillis:d});case 33:case"end":return e.stop()}},e,null,[[8,14],[19,25]])}))).apply(this,arguments)}function ln(e,t){var n=e.options,r=n.projectId,i=n.appId,a=n.apiKey;return{url:"https://content-firebaseappcheck.googleapis.com/v1/projects/".concat(r,"/apps/").concat(i,":exchangeDebugToken?key=").concat(a),body:{debug_token:t}}}var hn="firebase-app-check-store",fn=null;function dn(){return fn||(fn=new Promise(function(e,t){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(t){e(t.target.result)},n.onerror=function(e){var n;t(on.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(hn,{keyPath:"compositeKey"})}}}catch(r){t(on.create("storage-open",{originalErrorMessage:r.message}))}}))}function pn(){return(pn=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dn();case 2:return r=e.sent.transaction(hn,"readwrite"),i=r.objectStore(hn).put({compositeKey:t,value:n}),e.abrupt("return",new Promise(function(e,t){i.onsuccess=function(t){e()},r.onerror=function(e){var n;t(on.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var vn=new Wt.Yd("@firebase/app-check");function gn(e,t){return(0,Gt.hl)()?function(e,t){return function(e,t){return pn.apply(this,arguments)}(function(e){return"".concat(e.options.appId,"-").concat(e.name)}(e),t)}(e,t).catch(function(e){vn.warn("Failed to write token to IndexedDB. Error: ".concat(e))}):Promise.resolve()}function mn(){return rn().enabled}function yn(){return kn.apply(this,arguments)}function kn(){return(kn=(0,Qt.Z)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=rn()).enabled||!t.token){e.next=3;break}return e.abrupt("return",t.token.promise);case 3:throw Error("\n            Can't get debug token in production mode.\n        ");case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var bn={error:"UNKNOWN_ERROR"};function wn(e){return _n.apply(this,arguments)}function _n(){return(_n=(0,Qt.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,s,u,c,l,h=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]&&h[1],sn(r=t.app),i=tn(r),o=i.token){e.next=10;break}return e.next=8,i.cachedTokenPromise;case 8:(s=e.sent)&&In(s)&&(o=s);case 10:if(n||!o||!In(o)){e.next=12;break}return e.abrupt("return",{token:o.token});case 12:if(c=!1,!mn()){e.next=33;break}if(e.t0=i.exchangeTokenPromise,e.t0){e.next=26;break}return e.t1=un,e.t2=ln,e.t3=r,e.next=21,yn();case 21:e.t4=e.sent,e.t5=(0,e.t2)(e.t3,e.t4),e.t6=t.heartbeatServiceProvider,i.exchangeTokenPromise=(0,e.t1)(e.t5,e.t6).then(function(e){return i.exchangeTokenPromise=void 0,e}),c=!0;case 26:return e.next=28,i.exchangeTokenPromise;case 28:return l=e.sent,e.next=31,gn(r,l);case 31:return nn(r,Object.assign(Object.assign({},i),{token:l})),e.abrupt("return",{token:l.token});case 33:return e.prev=33,i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(function(e){return i.exchangeTokenPromise=void 0,e}),c=!0),e.next=37,i.exchangeTokenPromise;case 37:o=e.sent,e.next=43;break;case 40:e.prev=40,e.t7=e.catch(33),"appCheck/throttled"===e.t7.code?vn.warn(e.t7.message):vn.error(e.t7),a=e.t7;case 43:if(!o){e.next=50;break}return u={token:o.token},nn(r,Object.assign(Object.assign({},i),{token:o})),e.next=48,gn(r,o);case 48:e.next=51;break;case 50:u=En(a);case 51:return c&&Tn(r,u),e.abrupt("return",u);case 53:case"end":return e.stop()}},e,null,[[33,40]])}))).apply(this,arguments)}function xn(e,t){var n=tn(e),r=n.tokenObservers.filter(function(e){return e.next!==t});0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),nn(e,Object.assign(Object.assign({},n),{tokenObservers:r}))}function Sn(e){var t=e.app,n=tn(t),r=n.tokenRefresher;r||(r=function(e){var t=e.app;return new an((0,Qt.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!tn(t).token){n.next=6;break}return n.next=3,wn(e,!0);case 3:n.t0=n.sent,n.next=9;break;case 6:return n.next=8,wn(e);case 8:n.t0=n.sent;case 9:if(!(r=n.t0).error){n.next=12;break}throw r.error;case 12:case"end":return n.stop()}},n)})),function(){return!0},function(){var e=tn(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return n=Math.min(n,e.token.expireTimeMillis-3e5),Math.max(0,n-Date.now())}return 0},3e4,96e4)}(e),nn(t,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Tn(e,t){var n,r=l(tn(e).tokenObservers);try{for(r.s();!(n=r.n()).done;){var i=n.value;try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(a){}}}catch(o){r.e(o)}finally{r.f()}}function In(e){return e.expireTimeMillis-Date.now()>0}function En(e){return{token:(t=bn,Gt.US.encodeString(JSON.stringify(t),!1)),error:e};var t}var Cn=function(){function e(t,n){v(this,e),this.app=t,this.heartbeatServiceProvider=n}return p(e,[{key:"_delete",value:function(){var e,t=l(tn(this.app).tokenObservers);try{for(t.s();!(e=t.n()).done;){var n=e.value;xn(this.app,n.next)}}catch(r){t.e(r)}finally{t.f()}return Promise.resolve()}}]),e}();(0,Kt._registerComponent)(new Jt.wA("app-check",function(e){return t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat"),new Cn(t,n);var t,n},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,n){e.getProvider("app-check-internal").initialize()})),(0,Kt._registerComponent)(new Jt.wA("app-check-internal",function(e){return t=e.getProvider("app-check").getImmediate(),{getToken:function(e){return wn(t,e)},addTokenListener:function(e){return function(e,t,n,r){var i=e.app,a=tn(i),o={next:n,error:void 0,type:"INTERNAL"};if(nn(i,Object.assign(Object.assign({},a),{tokenObservers:[].concat(u(a.tokenObservers),[o])})),a.token&&In(a.token)){var s=a.token;Promise.resolve().then(function(){n({token:s.token}),Sn(e)}).catch(function(){})}a.cachedTokenPromise.then(function(){return Sn(e)})}(t,0,e)},removeTokenListener:function(e){return xn(t.app,e)}};var t},"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Kt.registerVersion)("@firebase/app-check","0.5.8");var An=p(function e(){return v(this,e),(0,Mt.vb)("app-check")});"undefined"!=typeof window&&window;var Rn=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,Dn(e),"Firebase Storage: ".concat(r," (").concat(Dn(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(k(i),n.prototype),i}return p(n,[{key:"_codeEquals",value:function(e){return Dn(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?"".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this._baseMessage}}]),n}(Gt.ZR);function Dn(e){return"storage/"+e}function Pn(){return new Rn("unknown","An unknown error occurred, please check the error payload for server response.")}function On(){return new Rn("canceled","User canceled the upload/download.")}function Nn(){return new Rn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ln(e){return new Rn("invalid-argument",e)}function Mn(){return new Rn("app-deleted","The Firebase app was deleted.")}function Zn(e){return new Rn("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Un(e,t){return new Rn("invalid-format","String does not match format '"+e+"': "+t)}function Fn(e){throw new Rn("internal-error","Internal error: "+e)}var qn=function(){function e(t,n){v(this,e),this.bucket=t,this.path_=n}return p(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new Rn("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}for(var o=n.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://".concat("firebasestorage.googleapis.com"===n?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/([A-Za-z0-9.\\-_]+)/([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:a}],u=0;u<s.length;u++){var c=s[u],l=c.regex.exec(t);if(l){var h=l[c.indices.path];h||(h=""),r=new e(l[c.indices.bucket],h),c.postModify(r);break}}if(null==r)throw function(e){return new Rn("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),Vn=function(){function e(t){v(this,e),this.promise_=Promise.reject(t)}return p(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function jn(e){return"string"==typeof e||e instanceof String}function Bn(e){return Hn()&&e instanceof Blob}function Hn(){return"undefined"!=typeof Blob}function zn(e,t,n,r){if(r<t)throw Ln("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Ln("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Gn(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Kn(e){var t=encodeURIComponent,n="?";for(var r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n=n.slice(0,-1)}var Wn=(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Wn||(Wn={})),Wn),Jn=function(){function e(t,n,r,i,a,o,s,u,c,l,h){var f=this;v(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(function(e,t){f.resolve_=e,f.reject_=t,f.start_()})}return p(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(u){i(u)}else if(null!==a){var s=Pn();s.serverResponse=a.getErrorText(),i(e.errorCallback_?e.errorCallback_(a,s):s)}else i(n.canceled?e.appDelete_?Mn():On():new Rn("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?t(0,new Yn(!1,null,!0)):this.backoffId_=function(t,n,r){var i=1,a=null,o=null,s=!1,u=0;function c(){return 2===u}var l=!1;function h(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];l||(l=!0,n.apply(null,t))}function f(t){a=setTimeout(function(){a=null,function(t,n){if(n)return void t(!1,new Yn(!1,null,!0));var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){null!==e.progressCallback_&&e.progressCallback_(t.loaded,t.lengthComputable?t.total:-1)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then(function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===Wn.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new Yn(o,r))}else{var s=r.getErrorCode()===Wn.ABORT;t(!1,new Yn(!1,null,s))}})}(p,c())},t)}function d(){o&&clearTimeout(o)}function p(e){if(!l){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e||c()||s?(d(),void h.call.apply(h,[null,e].concat(n))):(i<64&&(i*=2),1===u?(u=2,a=0):a=1e3*(i+Math.random()),void f(a));var a}d()}var v=!1;function g(e){v||(v=!0,d(),l||(null!==a?(e||(u=2),clearTimeout(a),f(0)):e||(u=1)))}return f(0),o=setTimeout(function(){s=!0,g(!0)},r),g}(0,t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),Yn=p(function e(t,n,r){v(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r});function Qn(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function $n(){for(var e=Qn(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(Hn())return new Blob(n);throw new Rn("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Xn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},er=p(function e(t,n){v(this,e),this.data=t,this.contentType=n||null});function tr(e,t){switch(e){case Xn.RAW:return new er(nr(t));case Xn.BASE64:case Xn.BASE64URL:return new er(rr(e,t));case Xn.DATA_URL:return new er((n=new ir(t)).base64?rr(Xn.BASE64,n.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw Un(Xn.DATA_URL,"Malformed data URL.")}return nr(t)}(n.rest),new ir(t).contentType)}var n;throw Pn()}function nr(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?n<e.length-1&&56320==(64512&e.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function rr(e,t){switch(e){case Xn.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Un(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Xn.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw Un(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw Un(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var ir=p(function e(t){v(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw Un(Xn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r,i=n[1]||null;null!=i&&(this.base64=(r=i).length>=";base64".length&&";base64"===r.substring(r.length-";base64".length),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}),ar=function(){function e(t,n){v(this,e);var r=0,i="";Bn(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return p(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(Bn(this.data_)){var r=(a=t,o=n,(i=this.data_).webkitSlice?i.webkitSlice(a,o):i.mozSlice?i.mozSlice(a,o):i.slice?i.slice(a,o):null);return null===r?null:new e(r)}var i,a,o,s=new Uint8Array(this.data_.buffer,t,n-t);return new e(s,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Hn()){var i=n.map(function(t){return t instanceof e?t.data_:t});return new e($n.apply(null,i))}var a=n.map(function(e){return jn(e)?tr(Xn.RAW,e).data:e.data_}),o=0;a.forEach(function(e){o+=e.byteLength});var s=new Uint8Array(o),u=0;return a.forEach(function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]}),new e(s,!0)}}]),e}();function or(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"==typeof e&&!Array.isArray(e)}(t)?t:null}function sr(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function ur(e,t){return t}var cr=p(function e(t,n,r,i){v(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||ur}),lr=null;function hr(){if(lr)return lr;var e=[];e.push(new cr("bucket")),e.push(new cr("generation")),e.push(new cr("metageneration")),e.push(new cr("name","fullPath",!0));var t=new cr("name");t.xform=function(e,t){return function(e){return!jn(e)||e.length<2?e:sr(e)}(t)},e.push(t);var n=new cr("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new cr("timeCreated")),e.push(new cr("updated")),e.push(new cr("md5Hash",null,!0)),e.push(new cr("cacheControl",null,!0)),e.push(new cr("contentDisposition",null,!0)),e.push(new cr("contentEncoding",null,!0)),e.push(new cr("contentLanguage",null,!0)),e.push(new cr("contentType",null,!0)),e.push(new cr("metadata","customMetadata",!0)),lr=e}function fr(e,t,n){var r=or(t);return null===r?null:function(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=new qn(e.bucket,e.fullPath);return t._makeStorageReference(n)}})}(r,e),r}(e,r,n)}function dr(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var pr=p(function e(t,n,r,i){v(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]});function vr(e){if(!e)throw Pn()}function gr(e,t){return function(n,r){var i=fr(e,r,t);return vr(null!==i),i}}function mr(e){return function(t,n){var r;return(r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?new Rn("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Rn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?new Rn("quota-exceeded","Quota for bucket '"+e.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===t.getStatus()?new Rn("unauthorized","User does not have permission to access '"+e.path+"'."):n).serverResponse=n.serverResponse,r}}function yr(e){var t=mr(e);return function(n,r){var i=t(n,r);return 404===n.getStatus()&&(i=new Rn("object-not-found","Object '"+e.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function kr(e,t,n){var r=Gn(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new pr(r,"GET",gr(e,n),i);return a.errorHandler=yr(t),a}function br(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}function wr(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=br(t,r,i),c=dr(u,n),l=ar.getBlob("--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+s+"--");if(null===l)throw Nn();var h={name:u.fullPath},f=Gn(a,e.host,e._protocol),d=e.maxUploadRetryTime,p=new pr(f,"POST",gr(e,n),d);return p.urlParams=h,p.headers=o,p.body=l.uploadData(),p.errorHandler=mr(t),p}var _r=p(function e(t,n,r,i){v(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null});function xr(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){vr(!1)}return vr(!!n&&-1!==(t||["active"]).indexOf(n)),n}var Sr={STATE_CHANGED:"state_changed"},Tr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ir(e){switch(e){case"running":case"pausing":case"canceling":return Tr.RUNNING;case"paused":return Tr.PAUSED;case"success":return Tr.SUCCESS;case"canceled":return Tr.CANCELED;case"error":default:return Tr.ERROR}}var Er=p(function e(t,n,r){if(v(this,e),function(e){return"function"==typeof e}(t)||null!=n||null!=r)this.next=t,this.error=null!=n?n:void 0,this.complete=null!=r?r:void 0;else{var i=t;this.next=i.next,this.error=i.error,this.complete=i.complete}});function Cr(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then(function(){return e.apply(void 0,n)})}}var Ar=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(function(){function e(){var t=this;v(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Wn.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=Wn.ABORT,e()}),t.xhr_.addEventListener("error",function(){t.errorCode_=Wn.NETWORK_ERROR,e()}),t.xhr_.addEventListener("load",function(){e()})})}return p(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Fn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Fn("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Fn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Fn("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Fn("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}());function Rr(){return new Ar}var Dr=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;v(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=hr(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise(function(e,t){r._resolve=e,r._reject=t,r._start()}),this._promise.then(null,function(){})}return p(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var i=r(n,2),a=i[0],o=i[1];switch(t._state){case"running":e(a,o);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}})}},{key:"_createResumable",value:function(){var e=this;this._resolveToken(function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=br(t,r,i),s={name:o.fullPath},u=Gn(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=dr(o,n),h=new pr(u,"POST",function(e){var t;xr(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){vr(!1)}return vr(jn(t)),t},e.maxUploadRetryTime);return h.urlParams=s,h.headers=c,h.body=l,h.errorHandler=mr(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Rr,t,n);e._request=i,i.getPromise().then(function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()},e._errorHandler)})}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken(function(n,r){var i=function(e,t,n,r){var i=new pr(n,"POST",function(e){var t=xr(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){vr(!1)}n||vr(!1);var i=Number(n);return vr(!isNaN(i)),new _r(i,r.size(),"final"===t)},e.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=mr(t),i}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,Rr,n,r);e._request=a,a.getPromise().then(function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()},e._errorHandler)})}},{key:"_continueUpload",value:function(){var e=this,t=262144*this._chunkMultiplier,n=new _r(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,a){var o;try{o=function(e,t,n,r,i,a,o,s){var u=new _r(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Rn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(u.current)},d=r.slice(h,h+l);if(null===d)throw Nn();var p=new pr(n,"POST",function(e,n){var i,o=xr(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===o?gr(t,a)(e,n):null,new _r(s,c,"final"===o,i)},t.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=s||null,p.errorHandler=mr(e),p}(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(u){return e._error=u,void e._transition("error")}var s=e._ref.storage._makeRequest(o,Rr,i,a);e._request=s,s.getPromise().then(function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()},e._errorHandler)})}},{key:"_increaseMultiplier",value:function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken(function(t,n){var r=kr(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,Rr,t,n);e._request=i,i.getPromise().then(function(t){e._request=void 0,e._metadata=t,e._transition("success")},e._metadataErrorHandler)})}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken(function(t,n){var r=wr(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Rr,t,n);e._request=i,i.getPromise().then(function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")},e._errorHandler)})}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=On(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=Ir(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new Er(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach(function(t){e._notifyObserver(t)})}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(Ir(this._state)){case Tr.SUCCESS:Cr(this._resolve.bind(null,this.snapshot))();break;case Tr.CANCELED:case Tr.ERROR:Cr(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(Ir(this._state)){case Tr.RUNNING:case Tr.PAUSED:e.next&&Cr(e.next.bind(e,this.snapshot))();break;case Tr.SUCCESS:e.complete&&Cr(e.complete.bind(e))();break;case Tr.CANCELED:case Tr.ERROR:e.error&&Cr(e.error.bind(e,this._error))();break;default:e.error&&Cr(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),Pr=function(){function e(t,n){v(this,e),this._service=t,this._location=n instanceof qn?n:qn.makeFromUrl(n,t.host)}return p(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new qn(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return sr(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new qn(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw Zn(e)}}]),e}();function Or(e,t,n){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,Lr(t,o);case 3:if(s=e.sent,(i=n.prefixes).push.apply(i,u(s.prefixes)),(a=n.items).push.apply(a,u(s.items)),e.t0=null!=s.nextPageToken,!e.t0){e.next=10;break}return e.next=10,Or(t,n,s.nextPageToken);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Lr(e,t){null!=t&&"number"==typeof t.maxResults&&zn("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=function(e,t,n,r,i){var a={};a.prefix=t.isRoot?"":t.path+"/","/".length>0&&(a.delimiter="/"),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=Gn(t.bucketOnlyServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,u=new pr(o,"GET",function(e,t){return function(n,r){var i=function(e,t,n){var r=or(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=l(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),s=e._makeStorageReference(new qn(t,o));r.prefixes.push(s)}}catch(d){a.e(d)}finally{a.f()}}if(n.items){var u,c=l(n.items);try{for(c.s();!(u=c.n()).done;){var h=u.value,f=e._makeStorageReference(new qn(t,h.name));r.items.push(f)}}catch(d){c.e(d)}finally{c.f()}}return r}(e,t,r)}(e,t,r);return vr(null!==i),i}}(e,t.bucket),s);return u.urlParams=a,u.errorHandler=mr(t),u}(e.storage,e._location,0,n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,Rr)}function Mr(e,t){var n=function(e,t){var n=t.split("/").filter(function(e){return e.length>0}).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new qn(e._location.bucket,n);return new Pr(e.storage,r)}function Zr(e,t){if(e instanceof qr){var n=e;if(null==n._bucket)throw new Rn("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Pr(n,n._bucket);return null!=t?Zr(r,t):r}return void 0!==t?Mr(e,t):e}function Ur(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof qr)return new Pr(e,t);throw Ln("To use ref(service, url), the first argument must be a Storage instance.")}return Zr(e,t)}function Fr(e,t){var n=null==t?void 0:t.storageBucket;return null==n?null:qn.makeFromBucketSpec(n,e)}var qr=function(){function e(t,n,r,i,a){v(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host="firebasestorage.googleapis.com",this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?qn.makeFromBucketSpec(i,this._host):Fr(this._host,this.app.options)}return p(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,this._bucket=null!=this._url?qn.makeFromBucketSpec(this._url,e):Fr(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){zn("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){zn("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._overrideAuthToken){t.next=2;break}return t.abrupt("return",e._overrideAuthToken);case 2:if(!(n=e._authProvider.getImmediate({optional:!0}))){t.next=9;break}return t.next=6,n.getToken();case 6:if(null===(r=t.sent)){t.next=9;break}return t.abrupt("return",r.accessToken);case 9:return t.abrupt("return",null);case 10:case"end":return t.stop()}},t)}))()}},{key:"_getAppCheckToken",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e._appCheckProvider.getImmediate({optional:!0}))){t.next=7;break}return t.next=4,n.getToken();case 4:t.t0=t.sent.token,t.next=8;break;case 7:t.t0=null;case 8:return t.abrupt("return",t.t0);case 9:case"end":return t.stop()}},t)}))()}},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(e){return e.cancel()}),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new Pr(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new Vn(Mn());var a=function(e,t,n,r,i,a){var o=Kn(e.urlParams),s=e.url+o,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(u,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new Jn(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(function(){return i._requests.delete(a)},function(){return i._requests.delete(a)}),a}},{key:"makeRequestWithTokens",value:function(e,t){var n=this;return(0,Qt.Z)(regeneratorRuntime.mark(function i(){var a,o,s,u;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Promise.all([n._getAuthToken(),n._getAppCheckToken()]);case 2:return a=i.sent,o=r(a,2),s=o[0],u=o[1],i.abrupt("return",n._makeRequest(e,t,s,u).getPromise());case 7:case"end":return i.stop()}},i)}))()}}]),e}();function Vr(e){return function(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=Gn(t.fullServerUrl(),e.host,e._protocol),r=new pr(n,"DELETE",function(e,t){},e.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=yr(t),r}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Rr)}(e=(0,Gt.m9)(e))}function jr(e,t){return Ur(e=(0,Gt.m9)(e),t)}(0,Kt._registerComponent)(new Jt.wA("storage",function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new qr(r,i,a,n,Kt.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,Kt.registerVersion)("@firebase/storage","0.9.6",""),(0,Kt.registerVersion)("@firebase/storage","0.9.6","esm2017");var Br=p(function e(t){return v(this,e),t}),Hr=new a.OlP("angularfire2.storage-instances");function zr(e){return function(t,n){var r=t.runOutsideAngular(function(){return e(n)});return new Br(r)}}var Gr={provide:p(function e(){return v(this,e),(0,Mt.vb)("storage")}),deps:[[new a.FiY,Hr]]},Kr={provide:Br,useFactory:function(e,t){var n=(0,Mt.JM)("storage",e,t);return n&&new Br(n)},deps:[[new a.FiY,Hr],Zt]},Wr=function(){var e=p(function e(){v(this,e),(0,Lt.KN)("angularfire",Mt.q4.full,"gcs")});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[Kr,Gr]}),e}();function Jr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{ngModule:Wr,providers:[{provide:Hr,useFactory:zr(e),multi:!0,deps:[a.R0b,a.zs3,Mt.HU,Ut,[new a.FiY,Yt],[new a.FiY,An]].concat(n)}]}}var Yr,Qr=(0,Mt.u3)(Vr,!0),$r=(0,Mt.u3)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Kt.getApp)(),t=arguments.length>1?arguments[1]:void 0;return e=(0,Gt.m9)(e),(0,Kt._getProvider)(e,"storage").getImmediate({identifier:t})},!0),Xr=(0,Mt.u3)(jr,!0),ei=(0,Mt.u3)(function(e,t,n,r){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xn.RAW,r=arguments.length>3?arguments[3]:void 0;e._throwIfRoot("uploadString");var i=tr(n,t),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),function(e,t,n){e._throwIfRoot("uploadBytes");var r=wr(e.storage,e._location,hr(),new ar(t,!0),n);return e.storage.makeRequestWithTokens(r,Rr).then(function(t){return{metadata:t,ref:e}})}(e,i.data,a)}(e=(0,Gt.m9)(e),t,n,r)},!0),ti="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ni={},ri=ri||{},ii=ti||self;function ai(){}function oi(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function si(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ui="closure_uid_"+(1e9*Math.random()>>>0),ci=0;function li(e,t,n){return e.call.apply(e.bind,arguments)}function hi(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function fi(e,t,n){return(fi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?li:hi).apply(null,arguments)}function di(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function pi(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function vi(){this.s=this.s,this.o=this.o}var gi={};vi.prototype.s=!1,vi.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,ui)&&e[ui]||(e[ui]=++ci)}(this);delete gi[e]}},vi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var mi=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},yi=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function ki(e){return Array.prototype.concat.apply([],arguments)}function bi(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function wi(e){return/^[\s\xa0]*$/.test(e)}var _i,xi=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Si(e,t){return-1!=e.indexOf(t)}function Ti(e,t){return e<t?-1:e>t?1:0}e:{var Ii=ii.navigator;if(Ii){var Ei=Ii.userAgent;if(Ei){_i=Ei;break e}}_i=""}function Ci(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Ai(e){var t={};for(var n in e)t[n]=e[n];return t}var Ri="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Di(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Ri.length;a++)n=Ri[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Pi(e){return Pi[" "](e),e}Pi[" "]=ai;var Oi,Ni,Li=Si(_i,"Opera"),Mi=Si(_i,"Trident")||Si(_i,"MSIE"),Zi=Si(_i,"Edge"),Ui=Zi||Mi,Fi=Si(_i,"Gecko")&&!(Si(_i.toLowerCase(),"webkit")&&!Si(_i,"Edge"))&&!(Si(_i,"Trident")||Si(_i,"MSIE"))&&!Si(_i,"Edge"),qi=Si(_i.toLowerCase(),"webkit")&&!Si(_i,"Edge");function Vi(){var e=ii.document;return e?e.documentMode:void 0}e:{var ji="",Bi=(Ni=_i,Fi?/rv:([^\);]+)(\)|;)/.exec(Ni):Zi?/Edge\/([\d\.]+)/.exec(Ni):Mi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ni):qi?/WebKit\/(\S+)/.exec(Ni):Li?/(?:Version)[ \/]?(\S+)/.exec(Ni):void 0);if(Bi&&(ji=Bi?Bi[1]:""),Mi){var Hi=Vi();if(null!=Hi&&Hi>parseFloat(ji)){Oi=String(Hi);break e}}Oi=ji}var zi={},Gi=ii.document&&Mi&&(Vi()||parseInt(Oi,10))||void 0,Ki=function(){if(!ii.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{ii.addEventListener("test",ai,t),ii.removeEventListener("test",ai,t)}catch(n){}return e}();function Wi(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Ji(e,t){if(Wi.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Fi){e:{try{Pi(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Yi[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ji.Z.h.call(this)}}Wi.prototype.h=function(){this.defaultPrevented=!0},pi(Ji,Wi);var Yi={2:"touch",3:"pen",4:"mouse"};Ji.prototype.h=function(){Ji.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Qi="closure_listenable_"+(1e6*Math.random()|0),$i=0;function Xi(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++$i,this.ca=this.fa=!1}function ea(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function ta(e){this.src=e,this.g={},this.h=0}function na(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=mi(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ea(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ra(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}ta.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=ra(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Xi(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var ia="closure_lm_"+(1e6*Math.random()|0),aa={};function oa(e,t,n,r,i){if(r&&r.once)return ua(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)oa(e,t[a],n,r,i);return null}return n=va(n),e&&e[Qi]?e.N(t,n,si(r)?!!r.capture:!!r,i):sa(e,t,n,!1,r,i)}function sa(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=si(i)?!!i.capture:!!i,s=da(e);if(s||(e[ia]=s=new ta(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){var e=fa;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ki||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ha(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ua(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ua(e,t[a],n,r,i);return null}return n=va(n),e&&e[Qi]?e.O(t,n,si(r)?!!r.capture:!!r,i):sa(e,t,n,!0,r,i)}function ca(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)ca(e,t[a],n,r,i);else r=si(r)?!!r.capture:!!r,n=va(n),e&&e[Qi]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=ra(a=e.g[t],n,r,i))&&(ea(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--))):e&&(e=da(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ra(t,n,r,i)),(n=-1<e?t[e]:null)&&la(n))}function la(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Qi])na(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ha(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=da(t))?(na(n,e),0==n.h&&(n.src=null,t[ia]=null)):ea(e)}}}function ha(e){return e in aa?aa[e]:aa[e]="on"+e}function fa(e,t){if(e.ca)e=!0;else{t=new Ji(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&la(e),e=n.call(r,t)}return e}function da(e){return(e=e[ia])instanceof ta?e:null}var pa="__closure_events_fn_"+(1e9*Math.random()>>>0);function va(e){return"function"==typeof e?e:(e[pa]||(e[pa]=function(t){return e.handleEvent(t)}),e[pa])}function ga(){vi.call(this),this.i=new ta(this),this.P=this,this.I=null}function ma(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new Wi(t,e);else if(t instanceof Wi)t.target=t.target||e;else{var i=t;Di(t=new Wi(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=ya(o,r,!0,t)&&i}if(i=ya(o=t.g=e,r,!0,t)&&i,i=ya(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=ya(o=t.g=n[a],r,!1,t)&&i}function ya(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&na(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}pi(ga,vi),ga.prototype[Qi]=!0,ga.prototype.removeEventListener=function(e,t,n,r){ca(this,e,t,n,r)},ga.prototype.M=function(){if(ga.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ea(n[r]);delete t.g[e],t.h--}}this.I=null},ga.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ga.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ka=ii.JSON.stringify;function ba(){var e=Ea,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var wa,_a=new(function(){function e(t,n){v(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return p(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())(function(){return new xa},function(e){return e.reset()}),xa=function(){function e(){v(this,e),this.next=this.g=this.h=null}return p(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Sa(e){ii.setTimeout(function(){throw e},0)}function Ta(e,t){wa||function(){var e=ii.Promise.resolve(void 0);wa=function(){e.then(Ca)}}(),Ia||(wa(),Ia=!0),Ea.add(e,t)}var Ia=!1,Ea=new(function(){function e(){v(this,e),this.h=this.g=null}return p(e,[{key:"add",value:function(e,t){var n=_a.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}());function Ca(){for(var e;e=ba();){try{e.h.call(e.g)}catch(n){Sa(n)}var t=_a;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ia=!1}function Aa(e,t){ga.call(this),this.h=e||1,this.g=t||ii,this.j=fi(this.kb,this),this.l=Date.now()}function Ra(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Da(e,t,n){if("function"==typeof e)n&&(e=fi(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=fi(e.handleEvent,e)}return 2147483647<Number(t)?-1:ii.setTimeout(e,t||0)}function Pa(e){e.g=Da(function(){e.g=null,e.i&&(e.i=!1,Pa(e))},e.j);var t=e.h;e.h=null,e.m.apply(null,t)}pi(Aa,ga),(Yr=Aa.prototype).da=!1,Yr.S=null,Yr.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ma(this,"tick"),this.da&&(Ra(this),this.start()))}},Yr.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Yr.M=function(){Aa.Z.M.call(this),Ra(this),delete this.g};var Oa=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return p(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Pa(this)}},{key:"M",value:function(){o(S(n.prototype),"M",this).call(this),this.g&&(ii.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(vi);function Na(e){vi.call(this),this.h=e,this.g={}}pi(Na,vi);var La=[];function Ma(e,t,n,r){Array.isArray(n)||(n&&(La[0]=n.toString()),n=La);for(var i=0;i<n.length;i++){var a=oa(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Za(e){Ci(e.g,function(e,t){this.g.hasOwnProperty(t)&&la(e)},e),e.g={}}function Ua(){this.g=!0}function Fa(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return ka(n)}catch(s){return t}}(e,n)+(r?" "+r:"")})}Na.prototype.M=function(){Na.Z.M.call(this),Za(this)},Na.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ua.prototype.Aa=function(){this.g=!1},Ua.prototype.info=function(){};var qa={},Va=null;function ja(){return Va=Va||new ga}function Ba(e){Wi.call(this,qa.Ma,e)}function Ha(e){var t=ja();ma(t,new Ba(t,e))}function za(e,t){Wi.call(this,qa.STAT_EVENT,e),this.stat=t}function Ga(e){var t=ja();ma(t,new za(t,e))}function Ka(e,t){Wi.call(this,qa.Na,e),this.size=t}function Wa(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return ii.setTimeout(function(){e()},t)}qa.Ma="serverreachability",pi(Ba,Wi),qa.STAT_EVENT="statevent",pi(za,Wi),qa.Na="timingevent",pi(Ka,Wi);var Ja={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ya={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Qa(){}function $a(){}Qa.prototype.h=null;var Xa,eo={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function to(){Wi.call(this,"d")}function no(){Wi.call(this,"c")}function ro(){}function io(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Na(this),this.P=oo,this.W=new Aa(e=Ui?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ao}function ao(){this.i=null,this.g="",this.h=!1}pi(to,Wi),pi(no,Wi),pi(ro,Qa),ro.prototype.g=function(){return new XMLHttpRequest},ro.prototype.i=function(){return{}},Xa=new ro;var oo=45e3,so={},uo={};function co(e,t,n){e.K=1,e.v=Oo(Eo(t)),e.s=n,e.U=!0,lo(e,null)}function lo(e,t){e.F=Date.now(),vo(e),e.A=Eo(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Go(n.h,"t",r),e.C=0,n=e.l.H,e.h=new ao,e.g=Gs(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Oa(fi(e.Ia,e,e.g),e.O)),Ma(e.V,e.g,"readystatechange",e.gb),t=e.H?Ai(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ha(1),function(e,t,n,r,i,a){e.info(function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.X,e.s)}function ho(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function fo(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=po(e,n))==uo){4==t&&(e.o=4,Ga(14),i=!1),Fa(e.j,e.m,null,"[Incomplete Response]");break}if(r==so){e.o=4,Ga(15),Fa(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Fa(e.j,e.m,r,null),bo(e,r)}ho(e)&&r!=uo&&r!=so&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ga(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Us(t),t.L=!0,Ga(11))):(Fa(e.j,e.m,n,"[Invalid Chunked Response]"),ko(e),yo(e))}function po(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?uo:(n=Number(t.substring(n,r)),isNaN(n)?so:(r+=1)+n>t.length?uo:(t=t.substr(r,n),e.C=r+n,t))}function vo(e){e.Y=Date.now()+e.P,go(e,e.P)}function go(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Wa(fi(e.eb,e),t)}function mo(e){e.B&&(ii.clearTimeout(e.B),e.B=null)}function yo(e){0==e.l.G||e.I||Vs(e.l,e)}function ko(e){mo(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Ra(e.W),Za(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function bo(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||$o(n.i,e)))if(n.I=e.N,!e.J&&$o(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;qs(n),As(n)}Zs(n),Ga(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Wa(fi(n.ab,n),6e3));if(1>=Qo(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Bs(n,11)}else if((e.J||n.g==e)&&qs(n),!wi(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(Si(l,"spdy")||Si(l,"quic")||Si(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Xo(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Po(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=zs(r,r.H?r.la:null,r.W),d.J){es(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(mo(p),vo(p)),r.g=d}else Ms(r);0<n.l.length&&Ps(n)}else"stop"!=a[0]&&"close"!=a[0]||Bs(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Bs(n,7):Cs(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Ha(4)}catch(a){}}function wo(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(oi(e)||"string"==typeof e)yi(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(oi(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(oi(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function _o(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof _o)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function xo(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];So(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)So(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function So(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Yr=io.prototype).setTimeout=function(e){this.P=e},Yr.gb=function(e){e=e.target;var t=this.L;t&&3==xs(e)?t.l():this.Ia(e)},Yr.Ia=function(e){try{if(e==this.g)e:{var t=xs(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Ui||this.g&&(this.h.h||this.g.ga()||Ss(this.g)))){this.I||4!=t||7==n||Ha(8==n||0>=r?3:2),mo(this);var i=this.g.ba();this.N=i;t:if(ho(this)){var a=Ss(this.g);e="";var o=a.length,s=4==xs(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ko(this),yo(this);var u="";break t}this.h.i=new ii.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o})}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!wi(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,Ga(12),ko(this),yo(this);break e}Fa(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,bo(this,i)}this.U?(fo(this,t,u),Ui&&this.i&&3==t&&(Ma(this.V,this.W,"tick",this.fb),this.W.start())):(Fa(this.j,this.m,u,null),bo(this,u)),4==t&&ko(this),this.i&&!this.I&&(4==t?Vs(this.l,this):(this.i=!1,vo(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Ga(12)):(this.o=0,Ga(13)),ko(this),yo(this)}}}catch(t){}},Yr.fb=function(){if(this.g){var e=xs(this.g),t=this.g.ga();this.C<t.length&&(mo(this),fo(this,e,t),this.i&&4!=e&&vo(this))}},Yr.cancel=function(){this.I=!0,ko(this)},Yr.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Ha(3),Ga(17)),ko(this),this.o=2,yo(this)):go(this,this.Y-e)},(Yr=_o.prototype).R=function(){xo(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Yr.T=function(){return xo(this),this.g.concat()},Yr.get=function(e,t){return So(this.h,e)?this.h[e]:t},Yr.set=function(e,t){So(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Yr.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var To=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Io(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Io){this.g=void 0!==t?t:e.g,Co(this,e.j),this.s=e.s,Ao(this,e.i),Ro(this,e.m),this.l=e.l,t=e.h;var n=new jo;n.i=t.i,t.g&&(n.g=new _o(t.g),n.h=t.h),Do(this,n),this.o=e.o}else e&&(n=String(e).match(To))?(this.g=!!t,Co(this,n[1]||"",!0),this.s=No(n[2]||""),Ao(this,n[3]||"",!0),Ro(this,n[4]),this.l=No(n[5]||"",!0),Do(this,n[6]||"",!0),this.o=No(n[7]||"")):(this.g=!!t,this.h=new jo(null,this.g))}function Eo(e){return new Io(e)}function Co(e,t,n){e.j=n?No(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ao(e,t,n){e.i=n?No(t,!0):t}function Ro(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Do(e,t,n){t instanceof jo?(e.h=t,function(e,t){t&&!e.j&&(Bo(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Ho(this,t),Go(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=Lo(t,qo)),e.h=new jo(t,e.g))}function Po(e,t,n){e.h.set(t,n)}function Oo(e){return Po(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function No(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Lo(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Mo),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Mo(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Io.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Lo(t,Zo,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Lo(t,Zo,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Lo(n,"/"==n.charAt(0)?Fo:Uo,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Lo(n,Vo)),e.join("")};var Zo=/[#\/\?@]/g,Uo=/[#\?:]/g,Fo=/[#\?]/g,qo=/[#\?@]/g,Vo=/#/g;function jo(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Bo(e){e.g||(e.g=new _o,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Ho(e,t){Bo(e),t=Ko(e,t),So(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,So((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&xo(e)))}function zo(e,t){return Bo(e),t=Ko(e,t),So(e.g.h,t)}function Go(e,t,n){Ho(e,t),0<n.length&&(e.i=null,e.g.set(Ko(e,t),bi(n)),e.h+=n.length)}function Ko(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Wo(e){this.l=e||Jo,e=ii.PerformanceNavigationTiming?0<(e=ii.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(ii.g&&ii.g.Ea&&ii.g.Ea()&&ii.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Yr=jo.prototype).add=function(e,t){Bo(this),this.i=null,e=Ko(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Yr.forEach=function(e,t){Bo(this),this.g.forEach(function(n,r){yi(n,function(n){e.call(t,n,r,this)},this)},this)},Yr.T=function(){Bo(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Yr.R=function(e){Bo(this);var t=[];if("string"==typeof e)zo(this,e)&&(t=ki(t,this.g.get(Ko(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=ki(t,e[n])}return t},Yr.set=function(e,t){return Bo(this),this.i=null,zo(this,e=Ko(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Yr.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Yr.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Jo=10;function Yo(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Qo(e){return e.h?1:e.g?e.g.size:0}function $o(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Xo(e,t){e.g?e.g.add(t):e.h=t}function es(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ts(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=l(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return bi(e.i)}function ns(){}function rs(){this.g=new ns}function is(e,t,n){var r=n||"";try{wo(e,function(e,n){var i=e;si(e)&&(i=ka(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function as(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function os(e){this.l=e.$b||null,this.j=e.ib||!1}function ss(e,t){ga.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=us,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Wo.prototype.cancel=function(){if(this.i=ts(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=l(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},ns.prototype.stringify=function(e){return ii.JSON.stringify(e,void 0)},ns.prototype.parse=function(e){return ii.JSON.parse(e,void 0)},pi(os,Qa),os.prototype.g=function(){return new ss(this.l,this.j)},os.prototype.i=function(e){return function(){return e}}({}),pi(ss,ga);var us=0;function cs(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function ls(e){e.readyState=4,e.l=null,e.j=null,e.A=null,hs(e)}function hs(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Yr=ss.prototype).open=function(e,t){if(this.readyState!=us)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,hs(this)},Yr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||ii).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Yr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ls(this)),this.readyState=us},Yr.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,hs(this)),this.g&&(this.readyState=3,hs(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ii.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cs(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Yr.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ls(this):hs(this),3==this.readyState&&cs(this)}},Yr.Ua=function(e){this.g&&(this.response=this.responseText=e,ls(this))},Yr.Ta=function(e){this.g&&(this.response=e,ls(this))},Yr.ha=function(){this.g&&ls(this)},Yr.setRequestHeader=function(e,t){this.v.append(e,t)},Yr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Yr.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ss.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var fs=ii.JSON.parse;function ds(e){ga.call(this),this.headers=new _o,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ps,this.K=this.L=!1}pi(ds,ga);var ps="",vs=/^https?$/i,gs=["POST","PUT"];function ms(e){return"content-type"==e.toLowerCase()}function ys(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ks(e),ws(e)}function ks(e){e.D||(e.D=!0,ma(e,"complete"),ma(e,"error"))}function bs(e){if(e.h&&void 0!==ri&&(!e.C[1]||4!=xs(e)||2!=e.ba()))if(e.v&&4==xs(e))Da(e.Fa,0,e);else if(ma(e,"readystatechange"),4==xs(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(To)[1]||null;if(!a&&ii.self&&ii.self.location){var o=ii.self.location.protocol;a=o.substr(0,o.length-1)}i=!vs.test(a?a.toLowerCase():"")}t=i}if(t)ma(e,"complete"),ma(e,"success");else{e.m=6;try{var s=2<xs(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",ks(e)}}finally{ws(e)}}}function ws(e,t){if(e.g){_s(e);var n=e.g,r=e.C[0]?ai:null;e.g=null,e.C=null,t||ma(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function _s(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(ii.clearTimeout(e.A),e.A=null)}function xs(e){return e.g?e.g.readyState:0}function Ss(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case ps:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ts(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Ci(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Po(e,t,n))}function Is(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Es(e){this.za=0,this.l=[],this.h=new Ua,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Is("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Is("baseRetryDelayMs",5e3,e),this.$a=Is("retryDelaySeedMs",1e4,e),this.Ya=Is("forwardChannelMaxRetries",2,e),this.ra=Is("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Wo(e&&e.concurrentRequestLimit),this.Ca=new rs,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Cs(e){if(Rs(e),3==e.G){var t=e.V++,n=Eo(e.F);Po(n,"SID",e.J),Po(n,"RID",t),Po(n,"TYPE","terminate"),Ns(e,n),(t=new io(e,e.h,t,void 0)).K=2,t.v=Oo(Eo(n)),n=!1,ii.navigator&&ii.navigator.sendBeacon&&(n=ii.navigator.sendBeacon(t.v.toString(),"")),!n&&ii.Image&&((new Image).src=t.v,n=!0),n||(t.g=Gs(t.l,null),t.g.ea(t.v)),t.F=Date.now(),vo(t)}Hs(e)}function As(e){e.g&&(Us(e),e.g.cancel(),e.g=null)}function Rs(e){As(e),e.u&&(ii.clearTimeout(e.u),e.u=null),qs(e),e.i.cancel(),e.m&&("number"==typeof e.m&&ii.clearTimeout(e.m),e.m=null)}function Ds(e,t){e.l.push(new(function(){return p(function e(t,n){v(this,e),this.h=t,this.g=n})}())(e.Za++,t)),3==e.G&&Ps(e)}function Ps(e){Yo(e.i)||e.m||(e.m=!0,Ta(e.Ha,e),e.C=0)}function Os(e,t){var n;n=t?t.m:e.V++;var r=Eo(e.F);Po(r,"SID",e.J),Po(r,"RID",n),Po(r,"AID",e.U),Ns(e,r),e.o&&e.s&&Ts(r,e.o,e.s),n=new io(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Ls(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Xo(e.i,n),co(n,r,t)}function Ns(e,t){e.j&&wo({},function(e,n){Po(t,n,e)})}function Ls(e,t,n){n=Math.min(e.l.length,n);var r=e.j?fi(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{is(l,o,"req"+c+"_")}catch(ku){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Ms(e){e.g||e.u||(e.Y=1,Ta(e.Ga,e),e.A=0)}function Zs(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=Wa(fi(e.Ga,e),js(e,e.A)),e.A++,0))}function Us(e){null!=e.B&&(ii.clearTimeout(e.B),e.B=null)}function Fs(e){e.g=new io(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Eo(e.oa);Po(t,"RID","rpc"),Po(t,"SID",e.J),Po(t,"CI",e.N?"0":"1"),Po(t,"AID",e.U),Ns(e,t),Po(t,"TYPE","xmlhttp"),e.o&&e.s&&Ts(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Oo(Eo(t)),n.s=null,n.U=!0,lo(n,e)}function qs(e){null!=e.v&&(ii.clearTimeout(e.v),e.v=null)}function Vs(e,t){var n=null;if(e.g==t){qs(e),Us(e),e.g=null;var r=2}else{if(!$o(e.i,t))return;n=t.D,es(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;ma(r=ja(),new Ka(r,n,t,i)),Ps(e)}else Ms(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Qo(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=Wa(fi(e.Ha,e,t),js(e,e.C)),e.C++,0)))}(e,t)||2==r&&Zs(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Bs(e,5);break;case 4:Bs(e,10);break;case 3:Bs(e,6);break;default:Bs(e,2)}}function js(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Bs(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=fi(e.jb,e);n||(n=new Io("//www.google.com/images/cleardot.gif"),ii.location&&"http"==ii.location.protocol||Co(n,"https"),Oo(n)),function(e,t){var n=new Ua;if(ii.Image){var r=new Image;r.onload=di(as,n,r,"TestLoadImage: loaded",!0,t),r.onerror=di(as,n,r,"TestLoadImage: error",!1,t),r.onabort=di(as,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=di(as,n,r,"TestLoadImage: timeout",!1,t),ii.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ga(2);e.G=0,e.j&&e.j.va(t),Hs(e),Rs(e)}function Hs(e){e.G=0,e.I=-1,e.j&&(0==ts(e.i).length&&0==e.l.length||(e.i.i.length=0,bi(e.l),e.l.length=0),e.j.ua())}function zs(e,t,n){var r=function(e){return e instanceof Io?Eo(e):new Io(e,void 0)}(n);if(""!=r.i)t&&Ao(r,t+"."+r.i),Ro(r,r.m);else{var i=ii.location;r=function(e,t,n,r){var i=new Io(null,void 0);return e&&Co(i,e),t&&Ao(i,t),n&&Ro(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Ci(e.aa,function(e,t){Po(r,t,e)}),n=e.sa,(t=e.D)&&n&&Po(r,t,n),Po(r,"VER",e.ma),Ns(e,r),r}function Gs(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new ds(n&&e.Ba&&!e.qa?new os({ib:!0}):e.qa)).L=e.H,t}function Ks(){}function Ws(){if(Mi&&!(10<=Number(Gi)))throw Error("Environmental error: no available transport.")}function Js(e,t){ga.call(this),this.g=new Es(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!wi(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!wi(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new $s(this)}function Ys(e){to.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Qs(){no.call(this),this.status=1}function $s(e){this.g=e}(Yr=ds.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Xa.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:Xa),this.g.onreadystatechange=fi(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void ys(this,a)}e=n||"";var i=new _o(this.headers);r&&wo(r,function(e,t){i.set(t,e)}),r=function(e){e:{for(var t=ms,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=ii.FormData&&e instanceof ii.FormData,!(0<=mi(gs,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{_s(this),0<this.B&&((this.K=function(e){return Mi&&function(){return e=zi,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){for(var e=0,t=xi(String(Oi)).split("."),n=xi("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Ti(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Ti(0==a[2].length,0==o[2].length)||Ti(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}();var e}()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=fi(this.pa,this)):this.A=Da(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){ys(this,a)}},Yr.pa=function(){void 0!==ri&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ma(this,"timeout"),this.abort(8))},Yr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ma(this,"complete"),ma(this,"abort"),ws(this))},Yr.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ws(this,!0)),ds.Z.M.call(this)},Yr.Fa=function(){this.s||(this.F||this.v||this.l?bs(this):this.cb())},Yr.cb=function(){bs(this)},Yr.ba=function(){try{return 2<xs(this)?this.g.status:-1}catch(Ni){return-1}},Yr.ga=function(){try{return this.g?this.g.responseText:""}catch(Ni){return""}},Yr.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),fs(t)}},Yr.Da=function(){return this.m},Yr.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Yr=Es.prototype).ma=8,Yr.G=1,Yr.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Yr.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new io(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Di(n=Ai(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Ls(this,t,r),Po(i=Eo(this.F),"RID",e),Po(i,"CVER",22),this.D&&Po(i,"X-HTTP-Session-Id",this.D),Ns(this,i),this.o&&n&&Ts(i,this.o,n),Xo(this.i,t),this.Ra&&Po(i,"TYPE","init"),this.ja?(Po(i,"$req",r),Po(i,"SID","null"),t.$=!0,co(t,i,null)):co(t,i,r),this.G=2}}else 3==this.G&&(e?Os(this,e):0==this.l.length||Yo(this.i)||Os(this))},Yr.Ga=function(){if(this.u=null,Fs(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Wa(fi(this.bb,this),e)}},Yr.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ga(10),As(this),Fs(this))},Yr.ab=function(){null!=this.v&&(this.v=null,As(this),Zs(this),Ga(19))},Yr.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Ga(2)):(this.h.info("Failed to ping google.com"),Ga(1))},(Yr=Ks.prototype).xa=function(){},Yr.wa=function(){},Yr.va=function(){},Yr.ua=function(){},Yr.Oa=function(){},Ws.prototype.g=function(e,t){return new Js(e,t)},pi(Js,ga),Js.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Ta(fi(e.hb,e,t))),Ga(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=zs(e,null,e.W),Ps(e)},Js.prototype.close=function(){Cs(this.g)},Js.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,Ds(this.g,t)}else this.v?((t={}).__data__=ka(e),Ds(this.g,t)):Ds(this.g,e)},Js.prototype.M=function(){this.g.j=null,delete this.j,Cs(this.g),delete this.g,Js.Z.M.call(this)},pi(Ys,to),pi(Qs,no),pi($s,Ks),$s.prototype.xa=function(){ma(this.g,"a")},$s.prototype.wa=function(e){ma(this.g,new Ys(e))},$s.prototype.va=function(e){ma(this.g,new Qs(e))},$s.prototype.ua=function(){ma(this.g,"b")},Ws.prototype.createWebChannel=Ws.prototype.g,Js.prototype.send=Js.prototype.u,Js.prototype.open=Js.prototype.m,Js.prototype.close=Js.prototype.close,Ja.NO_ERROR=0,Ja.TIMEOUT=8,Ja.HTTP_ERROR=6,Ya.COMPLETE="complete",$a.EventType=eo,eo.OPEN="a",eo.CLOSE="b",eo.ERROR="c",eo.MESSAGE="d",ga.prototype.listen=ga.prototype.N,ds.prototype.listenOnce=ds.prototype.O,ds.prototype.getLastError=ds.prototype.La,ds.prototype.getLastErrorCode=ds.prototype.Da,ds.prototype.getStatus=ds.prototype.ba,ds.prototype.getResponseJson=ds.prototype.Qa,ds.prototype.getResponseText=ds.prototype.ga,ds.prototype.send=ds.prototype.ea;var Xs=ni.createWebChannelTransport=function(){return new Ws},eu=ni.getStatEventTarget=function(){return ja()},tu=ni.ErrorCode=Ja,nu=ni.EventType=Ya,ru=ni.Event=qa,iu=ni.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},au=ni.FetchXmlHttpFactory=os,ou=ni.WebChannel=$a,su=ni.XhrIo=ds,uu=function(){function e(t){v(this,e),this.uid=t}return p(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();uu.UNAUTHENTICATED=new uu(null),uu.GOOGLE_CREDENTIALS=new uu("google-credentials-uid"),uu.FIRST_PARTY=new uu("first-party-uid"),uu.MOCK_USER=new uu("mock-user");var cu="9.8.0",lu=new Wt.Yd("@firebase/firestore");function hu(){return lu.logLevel}function fu(e){if(lu.logLevel<=Wt.in.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(vu);lu.debug.apply(lu,["Firestore (".concat(cu,"): ").concat(e)].concat(u(i)))}}function du(e){if(lu.logLevel<=Wt.in.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(vu);lu.error.apply(lu,["Firestore (".concat(cu,"): ").concat(e)].concat(u(i)))}}function pu(e){if(lu.logLevel<=Wt.in.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(vu);lu.warn.apply(lu,["Firestore (".concat(cu,"): ").concat(e)].concat(u(i)))}}function vu(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function gu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(cu,") INTERNAL ASSERTION FAILED: ")+e;throw du(t),new Error(t)}function mu(e,t){e||gu()}function yu(e,t){return e}var ku={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},bu=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return p(n)}(Gt.ZR),wu=p(function e(){var t=this;v(this,e),this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}),_u=p(function e(t,n){v(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))}),xu=function(){function e(){v(this,e)}return p(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t(uu.UNAUTHENTICATED)})}},{key:"shutdown",value:function(){}}]),e}(),Su=function(){function e(t){v(this,e),this.token=t,this.changeListener=null}return p(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable(function(){return t(n.token.user)})}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Tu=function(){function e(t){v(this,e),this.t=t,this.currentUser=uu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return p(e,[{key:"start",value:function(e,t){var n=this,r=this,i=this.i,a=function(e){return n.i!==i?(i=n.i,t(e)):Promise.resolve()},o=new wu;this.o=function(){n.i++,n.currentUser=n.u(),o.resolve(),o=new wu,e.enqueueRetryable(function(){return a(n.currentUser)})};var s=function(){var t=o;e.enqueueRetryable((0,Qt.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,a(r.currentUser);case 4:case"end":return e.stop()}},e)})))},u=function(e){fu("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),s()};this.t.onInit(function(e){return u(e)}),setTimeout(function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(fu("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new wu)}},0),s()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return e.i!==t?(fu("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(mu("string"==typeof n.accessToken),new _u(n.accessToken,e.currentUser)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return mu(null===e||"string"==typeof e),new uu(e)}}]),e}(),Iu=p(function e(t,n,r){v(this,e),this.type="FirstParty",this.user=uu.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}),Eu=function(){function e(t,n,r){v(this,e),this.h=t,this.l=n,this.m=r}return p(e,[{key:"getToken",value:function(){return Promise.resolve(new Iu(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t(uu.FIRST_PARTY)})}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Cu=p(function e(t){v(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}),Au=function(){function e(t){v(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return p(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&fu("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,fu("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable(function(){return r(t)})};var i=function(e){fu("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit(function(e){return i(e)}),setTimeout(function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):fu("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(function(t){return t?(mu("string"==typeof t.token),e.p=t.token,new Cu(t.token)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Ru=function(){function e(t,n){var r=this;v(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return p(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Du(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Ru.A=-1;var Pu=function(){function e(){v(this,e)}return p(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Du(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Ou(e,t){return e<t?-1:e>t?1:0}function Nu(e,t,n){return e.length===t.length&&e.every(function(e,r){return n(e,t[r])})}function Lu(e){return e+"\0"}var Mu=function(){function e(t,n){if(v(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new bu(ku.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bu(ku.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new bu(ku.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bu(ku.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return p(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Ou(this.nanoseconds,e.nanoseconds):Ou(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Zu=function(){function e(t){v(this,e),this.timestamp=t}return p(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Mu(0,0))}},{key:"max",value:function(){return new e(new Mu(253402300799,999999999))}}]),e}();function Uu(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Fu(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function qu(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Vu=function(){function e(t,n,r){v(this,e),void 0===n?n=0:n>t.length&&gu(),void 0===r?r=t.length-n:r>t.length-n&&gu(),this.segments=t,this.offset=n,this.len=r}return p(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),ju=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new bu(ku.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,u(s.split("/").filter(function(e){return e.length>0})))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Vu),Bu=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Hu=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map(function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Bu.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new bu(ku.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new bu(ku.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new bu(ku.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new bu(ku.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Vu),zu=function(){function e(t){v(this,e),this.fields=t,t.sort(Hu.comparator)}return p(e,[{key:"covers",value:function(e){var t,n=l(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Nu(this.fields,e.fields,function(e,t){return e.isEqual(t)})}}]),e}(),Gu=function(e){function t(e){v(this,t),this.binaryString=e}return p(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return btoa(this.binaryString)}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Ou(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){return new t(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e))}}]),t}();Gu.EMPTY_BYTE_STRING=new Gu("");var Ku=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wu(e){if(mu(!!e),"string"==typeof e){var t=0,n=Ku.exec(e);if(mu(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ju(e.seconds),nanos:Ju(e.nanos)}}function Ju(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Yu(e){return"string"==typeof e?Gu.fromBase64String(e):Gu.fromUint8Array(e)}function Qu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function $u(e){var t=e.mapValue.fields.__previous_value__;return Qu(t)?$u(t):t}function Xu(e){var t=Wu(e.mapValue.fields.__local_write_time__.timestampValue);return new Mu(t.seconds,t.nanos)}var ec=p(function e(t,n,r,i,a,o,s,u){v(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u}),tc=function(){function e(t,n){v(this,e),this.projectId=t,this.database=n||"(default)"}return p(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function nc(e){return null==e}function rc(e){return 0===e&&1/e==-1/0}function ic(e){return"number"==typeof e&&Number.isInteger(e)&&!rc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var ac=function(){function e(t){v(this,e),this.path=t}return p(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===ju.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(ju.fromString(t))}},{key:"fromName",value:function(t){return new e(ju.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(ju.emptyPath())}},{key:"comparator",value:function(e,t){return ju.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new ju(t.slice()))}}]),e}(),oc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},sc={nullValue:"NULL_VALUE"};function uc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Qu(e)?4:_c(e)?9007199254740991:10:gu()}function cc(e,t){if(e===t)return!0;var n=uc(e);if(n!==uc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Xu(e).isEqual(Xu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Wu(e.timestampValue),r=Wu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Yu(e.bytesValue).isEqual(Yu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ju(e.geoPointValue.latitude)===Ju(t.geoPointValue.latitude)&&Ju(e.geoPointValue.longitude)===Ju(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ju(e.integerValue)===Ju(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Ju(e.doubleValue),r=Ju(t.doubleValue);return n===r?rc(n)===rc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Nu(e.arrayValue.values||[],t.arrayValue.values||[],cc);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Uu(n)!==Uu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!cc(n[i],r[i])))return!1;return!0}(e,t);default:return gu()}}function lc(e,t){return void 0!==(e.values||[]).find(function(e){return cc(e,t)})}function hc(e,t){if(e===t)return 0;var n=uc(e),r=uc(t);if(n!==r)return Ou(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ou(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Ju(e.integerValue||e.doubleValue),r=Ju(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return fc(e.timestampValue,t.timestampValue);case 4:return fc(Xu(e),Xu(t));case 5:return Ou(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Yu(e),r=Yu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Ou(n[i],r[i]);if(0!==a)return a}return Ou(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Ou(Ju(e.latitude),Ju(t.latitude));return 0!==n?n:Ou(Ju(e.longitude),Ju(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=hc(n[i],r[i]);if(a)return a}return Ou(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===oc.mapValue&&t===oc.mapValue)return 0;if(e===oc.mapValue)return 1;if(t===oc.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Ou(r[o],a[o]);if(0!==s)return s;var u=hc(n[r[o]],i[a[o]]);if(0!==u)return u}return Ou(r.length,a.length)}(e.mapValue,t.mapValue);default:throw gu()}}function fc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ou(e,t);var n=Wu(e),r=Wu(t),i=Ou(n.seconds,r.seconds);return 0!==i?i:Ou(n.nanos,r.nanos)}function dc(e){return pc(e)}function pc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Wu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Yu(e.bytesValue).toBase64():"referenceValue"in e?ac.fromName(e.referenceValue).toString():"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=l(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=pc(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=l(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(pc(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):gu();var t}function vc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function gc(e){return!!e&&"integerValue"in e}function mc(e){return!!e&&"arrayValue"in e}function yc(e){return!!e&&"nullValue"in e}function kc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function bc(e){return!!e&&"mapValue"in e}function wc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Fu(e.mapValue.fields,function(e,n){return t.mapValue.fields[e]=wc(n)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=wc(e.arrayValue.values[r]);return n}return Object.assign({},e)}function _c(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function xc(e){return"nullValue"in e?sc:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?vc(tc.empty(),ac.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:gu()}function Sc(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?vc(tc.empty(),ac.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?oc:gu()}function Tc(e,t){var n=hc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Ic(e,t){var n=hc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Ec=function(){function e(t){v(this,e),this.value=t}return p(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!bc(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wc(t)}},{key:"setAll",value:function(e){var t=this,n=Hu.emptyPath(),r={},i=[];e.forEach(function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=wc(e):i.push(a.lastSegment())});var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());bc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return cc(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];bc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Fu(t,function(t,n){return e[t]=n});var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(wc(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Cc(e){var t=[];return Fu(e.fields,function(e,n){var r=new Hu([e]);if(bc(n)){var i=Cc(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=l(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)}),new zu(t)}var Ac=function(){function e(t,n,r,i,a,o){v(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return p(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Ec.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Ec.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Zu.min(),Zu.min(),Ec.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Zu.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Zu.min(),Ec.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Zu.min(),Ec.empty(),2)}}]),e}(),Rc=p(function e(t,n,r,i){v(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i});function Dc(e){return e.fields.find(function(e){return 2===e.kind})}function Pc(e){return e.fields.filter(function(e){return 2!==e.kind})}Rc.UNKNOWN_ID=-1;var Oc=p(function e(t,n){v(this,e),this.fieldPath=t,this.kind=n}),Nc=function(){function e(t,n){v(this,e),this.sequenceNumber=t,this.offset=n}return p(e,null,[{key:"empty",value:function(){return new e(0,Zc.min())}}]),e}();function Lc(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Zu.fromTimestamp(1e9===r?new Mu(n+1,0):new Mu(n,r));return new Zc(i,ac.empty(),t)}function Mc(e){return new Zc(e.readTime,e.key,-1)}var Zc=function(){function e(t,n,r){v(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return p(e,null,[{key:"min",value:function(){return new e(Zu.min(),ac.empty(),-1)}},{key:"max",value:function(){return new e(Zu.max(),ac.empty(),-1)}}]),e}();function Uc(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=ac.comparator(e.documentKey,t.documentKey))?n:Ou(e.largestBatchId,t.largestBatchId)}var Fc=function(){function e(t,n){v(this,e),this.comparator=t,this.root=n||Vc.EMPTY}return p(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Vc.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Vc.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})}},{key:"toString",value:function(){var e=[];return this.inorderTraversal(function(t,n){return e.push("".concat(t,":").concat(n)),!1}),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new qc(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new qc(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new qc(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new qc(this.root,e,this.comparator,!0)}}]),e}(),qc=function(){function e(t,n,r,i){v(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return p(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Vc=function(){function e(t,n,r,i,a){v(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return p(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw gu();if(this.right.isRed())throw gu();var e=this.left.check();if(e!==this.right.check())throw gu();return e+(this.isRed()?0:1)}}]),e}();Vc.EMPTY=null,Vc.RED=!0,Vc.BLACK=!1,Vc.EMPTY=new(function(){function e(){v(this,e),this.size=0}return p(e,[{key:"key",get:function(){throw gu()}},{key:"value",get:function(){throw gu()}},{key:"color",get:function(){throw gu()}},{key:"left",get:function(){throw gu()}},{key:"right",get:function(){throw gu()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Vc(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var jc=function(){function e(t){v(this,e),this.comparator=t,this.data=new Fc(this.comparator)}return p(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Bc(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Bc(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach(function(e){t=t.add(e)}),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Bc=function(){function e(t){v(this,e),this.iter=t}return p(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Hc(e){return e.hasNext()?e.getNext():void 0}var zc=p(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;v(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.P=null});function Gc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new zc(e,t,n,r,i,a,o)}function Kc(e){var t=yu(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(e){return(t=e).field.canonicalString()+t.op.toString()+dc(t.value);var t}).join(","),n+="|ob:",n+=t.orderBy.map(function(e){return function(e){return e.field.canonicalString()+e.dir}(e)}).join(","),nc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(function(e){return dc(e)}).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(function(e){return dc(e)}).join(",")),t.P=n}return t.P}function Wc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!ll(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if((i=e.filters[r]).op!==(a=t.filters[r]).op||!i.field.isEqual(a.field)||!cc(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!fl(e.startAt,t.startAt)&&fl(e.endAt,t.endAt)}function Jc(e){return ac.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Yc(e,t){return e.filters.filter(function(e){return e instanceof Xc&&e.field.isEqual(t)})}function Qc(e,t,n){var r,i=sc,a=!0,o=l(Yc(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=sc,c=!0;switch(s.op){case"<":case"<=":u=xc(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=sc}Tc({value:i,inclusive:a},{value:u,inclusive:c})<0&&(i=u,a=c)}}catch(d){o.e(d)}finally{o.f()}if(null!==n)for(var h=0;h<e.orderBy.length;++h)if(e.orderBy[h].field.isEqual(t)){var f=n.position[h];Tc({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function $c(e,t,n){var r,i=oc,a=!0,o=l(Yc(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=oc,c=!0;switch(s.op){case">=":case">":u=Sc(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=oc}Ic({value:i,inclusive:a},{value:u,inclusive:c})>0&&(i=u,a=c)}}catch(d){o.e(d)}finally{o.f()}if(null!==n)for(var h=0;h<e.orderBy.length;++h)if(e.orderBy[h].field.isEqual(t)){var f=n.position[h];Ic({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Xc=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(hc(t,this.value)):null!==t&&uc(this.value)===uc(t)&&this.v(hc(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gu()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new el(e,t,r):"array-contains"===t?new il(e,r):"in"===t?new al(e,r):"not-in"===t?new ol(e,r):"array-contains-any"===t?new sl(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new tl(e,n):new nl(e,n)}}]),n}(function(){return p(function e(){v(this,e)})}()),el=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e,r,i)).key=ac.fromName(i.referenceValue),a}return p(n,[{key:"matches",value:function(e){var t=ac.comparator(e.key,this.key);return this.v(t)}}]),n}(Xc),tl=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,"in",r)).keys=rl(0,r),i}return p(n,[{key:"matches",value:function(e){return this.keys.some(function(t){return t.isEqual(e.key)})}}]),n}(Xc),nl=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,"not-in",r)).keys=rl(0,r),i}return p(n,[{key:"matches",value:function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})}}]),n}(Xc);function rl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(e){return ac.fromName(e.referenceValue)})}var il=function(e){g(n,e);var t=m(n);function n(e,r){return v(this,n),t.call(this,e,"array-contains",r)}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return mc(t)&&lc(t.arrayValue,this.value)}}]),n}(Xc),al=function(e){g(n,e);var t=m(n);function n(e,r){return v(this,n),t.call(this,e,"in",r)}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&lc(this.value.arrayValue,t)}}]),n}(Xc),ol=function(e){g(n,e);var t=m(n);function n(e,r){return v(this,n),t.call(this,e,"not-in",r)}return p(n,[{key:"matches",value:function(e){if(lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!lc(this.value.arrayValue,t)}}]),n}(Xc),sl=function(e){g(n,e);var t=m(n);function n(e,r){return v(this,n),t.call(this,e,"array-contains-any",r)}return p(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!mc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(e){return lc(t.value.arrayValue,e)})}}]),n}(Xc),ul=p(function e(t,n){v(this,e),this.position=t,this.inclusive=n}),cl=p(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";v(this,e),this.field=t,this.dir=n});function ll(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function hl(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?ac.comparator(ac.fromName(o.referenceValue),n.key):hc(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function fl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!cc(e.position[n],t.position[n]))return!1;return!0}var dl=p(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;v(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.D=null,this.C=null});function pl(e,t,n,r,i,a,o,s){return new dl(e,t,n,r,i,a,o,s)}function vl(e){return new dl(e)}function gl(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ml(e){var t,n=l(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function yl(e){return null!==e.collectionGroup}function kl(e){var t=yu(e);if(null===t.D){t.D=[];var n=ml(t),r=gl(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new cl(n)),t.D.push(new cl(Hu.keyField(),"asc"));else{var i,a=!1,o=l(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.D.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new cl(Hu.keyField(),u))}}}return t.D}function bl(e){var t=yu(e);if(!t.C)if("F"===t.limitType)t.C=Gc(t.path,t.collectionGroup,kl(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=l(kl(t));try{for(i.s();!(n=i.n()).done;){var a=n.value;r.push(new cl(a.field,"desc"===a.dir?"asc":"desc"))}}catch(u){i.e(u)}finally{i.f()}var o=t.endAt?new ul(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new ul(t.startAt.position,t.startAt.inclusive):null;t.C=Gc(t.path,t.collectionGroup,r,t.filters,t.limit,o,s)}return t.C}function wl(e,t,n){return new dl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function _l(e,t){return Wc(bl(e),bl(t))&&e.limitType===t.limitType}function xl(e){return"".concat(Kc(bl(e)),"|lt:").concat(e.limitType)}function Sl(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(dc(t.value));var t}).join(", "),"]")),nc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)}).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(function(e){return dc(e)}).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(function(e){return dc(e)}).join(",")),"Target(".concat(t,")")}(bl(e)),"; limitType=").concat(e.limitType,")")}function Tl(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ac.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=l(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=l(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=hl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,kl(e),t)||e.endAt&&!function(e,t,n){var r=hl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,kl(e),t))}(e,t)}function Il(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function El(e){return function(t,n){var r,i=!1,a=l(kl(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=Cl(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function Cl(e,t,n){var r=e.field.isKeyField()?ac.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?hc(r,i):gu()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return gu()}}function Al(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rc(t)?"-0":t}}function Rl(e){return{integerValue:""+e}}function Dl(e,t){return ic(t)?Rl(t):Al(e,t)}var Pl=p(function e(){v(this,e),this._=void 0});function Ol(e,t,n){return e instanceof Ml?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Zl?Ul(e,t):e instanceof Fl?ql(e,t):function(e,t){var n=Ll(e,t),r=jl(n)+jl(e.k);return gc(n)&&gc(e.k)?Rl(r):Al(e.M,r)}(e,t)}function Nl(e,t,n){return e instanceof Zl?Ul(e,t):e instanceof Fl?ql(e,t):n}function Ll(e,t){return e instanceof Vl?gc(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Ml=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n)}(Pl),Zl=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this)).elements=e,r}return p(n)}(Pl);function Ul(e,t){var n,r=Bl(t),i=l(e.elements);try{var a=function(){var e=n.value;r.some(function(t){return cc(t,e)})||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Fl=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this)).elements=e,r}return p(n)}(Pl);function ql(e,t){var n,r=Bl(t),i=l(e.elements);try{var a=function(){var e=n.value;r=r.filter(function(t){return!cc(t,e)})};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Vl=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).M=e,i.k=r,i}return p(n)}(Pl);function jl(e){return Ju(e.integerValue||e.doubleValue)}function Bl(e){return mc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Hl=p(function e(t,n){v(this,e),this.field=t,this.transform=n}),zl=p(function e(t,n){v(this,e),this.version=t,this.transformResults=n}),Gl=function(){function e(t,n){v(this,e),this.updateTime=t,this.exists=n}return p(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Kl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Wl=p(function e(){v(this,e)});function Jl(e,t,n){e instanceof eh?function(e,t,n){var r=e.value.clone(),i=rh(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof th?function(e,t,n){if(Kl(e.precondition,t)){var r=rh(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(nh(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Yl(e,t,n){e instanceof eh?function(e,t,n){if(Kl(e.precondition,t)){var r=e.value.clone(),i=ih(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Xl(t),r).setHasLocalMutations()}}(e,t,n):e instanceof th?function(e,t,n){if(Kl(e.precondition,t)){var r=ih(e.fieldTransforms,n,t),i=t.data;i.setAll(nh(e)),i.setAll(r),t.convertToFoundDocument(Xl(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Kl(e.precondition,t)&&t.convertToNoDocument(Zu.min())}(e,t)}function Ql(e,t){var n,r=null,i=l(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=Ll(a.transform,o||null);null!=s&&(null==r&&(r=Ec.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function $l(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Nu(e,t,function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Zl&&t instanceof Zl||e instanceof Fl&&t instanceof Fl?Nu(e.elements,t.elements,cc):e instanceof Vl&&t instanceof Vl?cc(e.k,t.k):e instanceof Ml&&t instanceof Ml}(e.transform,t.transform)}(e,t)})}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Xl(e){return e.isFoundDocument()?e.version:Zu.min()}var eh=function(e){g(n,e);var t=m(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return v(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return p(n)}(Wl),th=function(e){g(n,e);var t=m(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return v(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return p(n)}(Wl);function nh(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function rh(e,t,n){var r=new Map;mu(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Nl(o,s,n[i]))}return r}function ih(e,t,n){var r,i=new Map,a=l(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,Ol(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var ah,oh,sh=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return p(n)}(Wl),uh=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return p(n)}(Wl),ch=p(function e(t){v(this,e),this.count=t});function lh(e){switch(e){default:return gu();case ku.CANCELLED:case ku.UNKNOWN:case ku.DEADLINE_EXCEEDED:case ku.RESOURCE_EXHAUSTED:case ku.INTERNAL:case ku.UNAVAILABLE:case ku.UNAUTHENTICATED:return!1;case ku.INVALID_ARGUMENT:case ku.NOT_FOUND:case ku.ALREADY_EXISTS:case ku.PERMISSION_DENIED:case ku.FAILED_PRECONDITION:case ku.ABORTED:case ku.OUT_OF_RANGE:case ku.UNIMPLEMENTED:case ku.DATA_LOSS:return!0}}function hh(e){if(void 0===e)return du("GRPC error has no .code"),ku.UNKNOWN;switch(e){case ah.OK:return ku.OK;case ah.CANCELLED:return ku.CANCELLED;case ah.UNKNOWN:return ku.UNKNOWN;case ah.DEADLINE_EXCEEDED:return ku.DEADLINE_EXCEEDED;case ah.RESOURCE_EXHAUSTED:return ku.RESOURCE_EXHAUSTED;case ah.INTERNAL:return ku.INTERNAL;case ah.UNAVAILABLE:return ku.UNAVAILABLE;case ah.UNAUTHENTICATED:return ku.UNAUTHENTICATED;case ah.INVALID_ARGUMENT:return ku.INVALID_ARGUMENT;case ah.NOT_FOUND:return ku.NOT_FOUND;case ah.ALREADY_EXISTS:return ku.ALREADY_EXISTS;case ah.PERMISSION_DENIED:return ku.PERMISSION_DENIED;case ah.FAILED_PRECONDITION:return ku.FAILED_PRECONDITION;case ah.ABORTED:return ku.ABORTED;case ah.OUT_OF_RANGE:return ku.OUT_OF_RANGE;case ah.UNIMPLEMENTED:return ku.UNIMPLEMENTED;case ah.DATA_LOSS:return ku.DATA_LOSS;default:return gu()}}(oh=ah||(ah={}))[oh.OK=0]="OK",oh[oh.CANCELLED=1]="CANCELLED",oh[oh.UNKNOWN=2]="UNKNOWN",oh[oh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oh[oh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oh[oh.NOT_FOUND=5]="NOT_FOUND",oh[oh.ALREADY_EXISTS=6]="ALREADY_EXISTS",oh[oh.PERMISSION_DENIED=7]="PERMISSION_DENIED",oh[oh.UNAUTHENTICATED=16]="UNAUTHENTICATED",oh[oh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oh[oh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oh[oh.ABORTED=10]="ABORTED",oh[oh.OUT_OF_RANGE=11]="OUT_OF_RANGE",oh[oh.UNIMPLEMENTED=12]="UNIMPLEMENTED",oh[oh.INTERNAL=13]="INTERNAL",oh[oh.UNAVAILABLE=14]="UNAVAILABLE",oh[oh.DATA_LOSS=15]="DATA_LOSS";var fh=function(){function e(t,n){v(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return p(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var i,a=l(n);try{for(a.s();!(i=a.n()).done;){var o=r(i.value,2),s=o[0],u=o[1];if(this.equalsFn(s,e))return u}}catch(c){a.e(c)}finally{a.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Fu(this.inner,function(t,n){var i,a=l(n);try{for(a.s();!(i=a.n()).done;){var o=r(i.value,2),s=o[0],u=o[1];e(s,u)}}catch(c){a.e(c)}finally{a.f()}})}},{key:"isEmpty",value:function(){return qu(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),dh=new Fc(ac.comparator);function ph(){return dh}var vh=new Fc(ac.comparator);function gh(){for(var e=vh,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function mh(){return new fh(function(e){return e.toString()},function(e,t){return e.isEqual(t)})}var yh=new Fc(ac.comparator),kh=new jc(ac.comparator);function bh(){for(var e=kh,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var wh=new jc(Ou);function _h(){return wh}var xh=function(){function e(t,n,r,i,a){v(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return p(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Sh.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Zu.min(),r,_h(),ph(),bh())}}]),e}(),Sh=function(){function e(t,n,r,i,a){v(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return p(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Gu.EMPTY_BYTE_STRING,n,bh(),bh(),bh())}}]),e}(),Th=p(function e(t,n,r,i){v(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i}),Ih=p(function e(t,n){v(this,e),this.targetId=t,this.$=n}),Eh=p(function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gu.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;v(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}),Ch=function(){function e(){v(this,e),this.B=0,this.L=Dh(),this.U=Gu.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return p(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=bh(),t=bh(),n=bh();return this.L.forEach(function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:gu()}}),new Sh(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=Dh()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),Ah=function(){function e(t){v(this,e),this.nt=t,this.st=new Map,this.it=ph(),this.rt=Rh(),this.ot=new jc(Ou)}return p(e,[{key:"ut",value:function(e){var t,n=l(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(s){n.e(s)}finally{n.f()}var i,a=l(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(s){a.e(s)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:gu()}})}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach(function(e,r){n.ft(r)&&t(r)})}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(Jc(i))if(0===n){var a=new ac(i.path);this.ct(t,a,Ac.newNoDocument(a,Zu.min()))}else mu(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach(function(r,i){var a=t.wt(i);if(a){if(r.current&&Jc(a.target)){var o=new ac(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,Ac.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}});var r=bh();this.rt.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(e))}),this.it.forEach(function(t,n){return n.setReadTime(e)});var i=new xh(e,n,this.ot,this.it,r);return this.it=ph(),this.rt=Rh(),this.ot=new jc(Ou),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new Ch,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new jc(Ou),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||fu("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new Ch),this.nt.getRemoteKeysForTarget(e).forEach(function(n){t.ct(e,n,null)})}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Rh(){return new Fc(ac.comparator)}function Dh(){return new Fc(ac.comparator)}var Ph={asc:"ASCENDING",desc:"DESCENDING"},Oh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Nh=p(function e(t,n){v(this,e),this.databaseId=t,this.N=n});function Lh(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Mh(e,t){return e.N?t.toBase64():t.toUint8Array()}function Zh(e,t){return Lh(e,t.toTimestamp())}function Uh(e){return mu(!!e),Zu.fromTimestamp(function(e){var t=Wu(e);return new Mu(t.seconds,t.nanos)}(e))}function Fh(e,t){return function(e){return new ju(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function qh(e){var t=ju.fromString(e);return mu(cf(t)),t}function Vh(e,t){return Fh(e.databaseId,t.path)}function jh(e,t){var n=qh(t);if(n.get(1)!==e.databaseId.projectId)throw new bu(ku.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bu(ku.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ac(Gh(n))}function Bh(e,t){return Fh(e.databaseId,t)}function Hh(e){var t=qh(e);return 4===t.length?ju.emptyPath():Gh(t)}function zh(e){return new ju(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Gh(e){return mu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Kh(e,t,n){return{name:Vh(e,t),fields:n.value.mapValue.fields}}function Wh(e,t,n){var r=jh(e,t.name),i=Uh(t.updateTime),a=new Ec({mapValue:{fields:t.fields}}),o=Ac.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Jh(e,t){var n;if(t instanceof eh)n={update:Kh(e,t.key,t.value)};else if(t instanceof sh)n={delete:Vh(e,t.key)};else if(t instanceof th)n={update:Kh(e,t.key,t.data),updateMask:uf(t.fieldMask)};else{if(!(t instanceof uh))return gu();n={verify:Vh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(e){return function(e,t){var n=t.transform;if(n instanceof Ml)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Zl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Fl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Vl)return{fieldPath:t.field.canonicalString(),increment:n.k};throw gu()}(0,e)})),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Zh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:gu()}(e,t.precondition)),n}function Yh(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Gl.updateTime(Uh(e.updateTime)):void 0!==e.exists?Gl.exists(e.exists):Gl.none()}(t.currentDocument):Gl.none(),r=t.updateTransforms?t.updateTransforms.map(function(t){return function(e,t){var n=null;"setToServerValue"in t?(mu("REQUEST_TIME"===t.setToServerValue),n=new Ml):"appendMissingElements"in t?n=new Zl(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new Fl(t.removeAllFromArray.values||[]):"increment"in t?n=new Vl(e,t.increment):gu();var r=Hu.fromServerFormat(t.fieldPath);return new Hl(r,n)}(e,t)}):[];if(t.update){var i=jh(e,t.update.name),a=new Ec({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){return new zu((e.fieldPaths||[]).map(function(e){return Hu.fromServerFormat(e)}))}(t.updateMask);return new th(i,a,o,n,r)}return new eh(i,a,n,r)}if(t.delete){var s=jh(e,t.delete);return new sh(s,n)}if(t.verify){var u=jh(e,t.verify);return new uh(u,n)}return gu()}function Qh(e,t){return{documents:[Bh(e,t.path)]}}function $h(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Bh(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Bh(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map(function(e){return function(e){if("=="===e.op){if(kc(e.value))return{unaryFilter:{field:rf(e.field),op:"IS_NAN"}};if(yc(e.value))return{unaryFilter:{field:rf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(kc(e.value))return{unaryFilter:{field:rf(e.field),op:"IS_NOT_NAN"}};if(yc(e.value))return{unaryFilter:{field:rf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rf(e.field),op:nf(e.op),value:e.value}}}(e)});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map(function(e){return function(e){return{field:rf(e.field),direction:tf(e.dir)}}(e)})}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.N||nc(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Xh(e){var t=Hh(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){mu(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=ef(n.where));var s=[];n.orderBy&&(s=n.orderBy.map(function(e){return function(e){return new cl(af(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}));var u=null;n.limit&&(u=function(e){var t;return nc(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){return new ul(e.values||[],!!e.before)}(n.startAt));var l=null;return n.endAt&&(l=function(e){return new ul(e.values||[],!e.before)}(n.endAt)),pl(t,i,s,o,u,"F",c,l)}function ef(e){return e?void 0!==e.unaryFilter?[sf(e)]:void 0!==e.fieldFilter?[of(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return ef(e)}).reduce(function(e,t){return e.concat(t)}):gu():[]}function tf(e){return Ph[e]}function nf(e){return Oh[e]}function rf(e){return{fieldPath:e.canonicalString()}}function af(e){return Hu.fromServerFormat(e.fieldPath)}function of(e){return Xc.create(af(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gu()}}(e.fieldFilter.op),e.fieldFilter.value)}function sf(e){switch(e.unaryFilter.op){case"IS_NAN":var t=af(e.unaryFilter.field);return Xc.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=af(e.unaryFilter.field);return Xc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=af(e.unaryFilter.field);return Xc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=af(e.unaryFilter.field);return Xc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return gu()}}function uf(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}}function cf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function lf(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=ff(t)),t=hf(e.get(n),t);return ff(t)}function hf(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function ff(e){return e+"\x01\x01"}function df(e){var t=e.length;if(mu(t>=2),2===t)return mu("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ju.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&gu(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:gu()}a=o+2}return new ju(r)}var pf=["userId","batchId"];function vf(e,t){return[e,lf(t)]}function gf(e,t,n){return[e,lf(t),n]}var mf={},yf=["prefixPath","collectionGroup","readTime","documentId"],kf=["prefixPath","collectionGroup","documentId"],bf=["collectionGroup","readTime","prefixPath","documentId"],wf=["canonicalId","targetId"],_f=["targetId","path"],xf=["path","targetId"],Sf=["collectionId","parent"],Tf=["indexId","uid"],If=["uid","sequenceNumber"],Ef=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Cf=["indexId","uid","orderedDocumentKey"],Af=["userId","collectionPath","documentId"],Rf=["userId","collectionPath","largestBatchId"],Df=["userId","collectionGroup","largestBatchId"],Pf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Of=[].concat(Pf,["documentOverlays"]),Nf=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Lf=[].concat(Nf,["indexConfiguration","indexState","indexEntries"]),Mf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Zf=function(){function e(){v(this,e),this.onCommittedListeners=[]}return p(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach(function(e){return e()})}}]),e}(),Uf=function(){function e(t){var n=this;v(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)},function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)})}return p(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&gu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}})}},{key:"toPromise",value:function(){var e=this;return new Promise(function(t,n){e.next(t,n)})}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)}}],[{key:"resolve",value:function(t){return new e(function(e,n){e(t)})}},{key:"reject",value:function(t){return new e(function(e,n){n(t)})}},{key:"waitFor",value:function(t){return new e(function(e,n){var r=0,i=0,a=!1;t.forEach(function(t){++r,t.next(function(){++i,a&&i===r&&e()},function(e){return n(e)})}),a=!0,i===r&&e()})}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=l(t);try{var a=function(){var t=n.value;r=r.next(function(n){return n?e.resolve(n):t()})};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)}}]),e}(),Ff=function(){function e(t,n){var r=this;v(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new wu,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new jf(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=Kf(e.target.error);r.At.reject(new jf(t,n))}}return p(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(fu("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Hf(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new jf(n,t)}}}]),e}(),qf=function(){function e(t,n,r){v(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt((0,Gt.z$)())&&du("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return p(e,[{key:"Nt",value:function(e){var t=this;return(0,Qt.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=t.db,n.t0){n.next=6;break}return fu("SimpleDb","Opening database:",t.name),n.next=5,new Promise(function(n,r){var i=indexedDB.open(t.name,t.version);i.onsuccess=function(e){n(e.target.result)},i.onblocked=function(){r(new jf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;r("VersionError"===n.name?new bu(ku.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new bu(ku.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new jf(e,n))},i.onupgradeneeded=function(e){fu("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',e.oldVersion),t.Pt.kt(e.target.result,i.transaction,e.oldVersion,t.version).next(function(){fu("SimpleDb","Database upgrade to version "+t.version+" complete")})}});case 5:t.db=n.sent;case 6:return t.Mt&&(t.db.onversionchange=function(e){return t.Mt(e)}),n.abrupt("return",t.db);case 8:case"end":return n.stop()}},n)}))()}},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(e,t,n,r){var i=this;return(0,Qt.Z)(regeneratorRuntime.mark(function a(){var o,s,u,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:o="readonly"===t,s=0;case 2:return++s,a.prev=3,a.delegateYield(regeneratorRuntime.mark(function t(){var a,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.Nt(e);case 2:return i.db=t.sent,a=Ff.open(i.db,e,o?"readonly":"readwrite",n),(s=r(a).next(function(e){return a.bt(),e}).catch(function(e){return a.abort(e),Uf.reject(e)}).toPromise()).catch(function(){}),t.next=7,a.Rt;case 7:return t.t0=s,t.abrupt("return",{v:t.t0});case 9:case"end":return t.stop()}},t)})(),"t0",5);case 5:if("object"!=typeof(u=a.t0)){a.next=8;break}return a.abrupt("return",u.v);case 8:a.next=15;break;case 10:if(a.prev=10,a.t1=a.catch(3),c="FirebaseError"!==a.t1.name&&s<3,fu("SimpleDb","Transaction failed with error:",a.t1.message,"Retrying:",c),i.close(),c){a.next=15;break}return a.abrupt("return",Promise.reject(a.t1));case 15:a.next=2;break;case 17:case"end":return a.stop()}},a,null,[[3,10]])}))()}},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return fu("SimpleDb","Removing database:",e),zf(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!(0,Gt.hl)())return!1;if(e.St())return!0;var t=(0,Gt.z$)(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Vf=function(){function e(t){v(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return p(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return zf(this.Ft.delete())}}]),e}(),jf=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,ku.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return p(n)}(bu);function Bf(e){return"IndexedDbTransactionError"===e.name}var Hf=function(){function e(t){v(this,e),this.store=t}return p(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(fu("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(fu("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),zf(n)}},{key:"add",value:function(e){return fu("SimpleDb","ADD",this.store.name,e,e),zf(this.store.add(e))}},{key:"get",value:function(e){var t=this;return zf(this.store.get(e)).next(function(n){return void 0===n&&(n=null),fu("SimpleDb","GET",t.store.name,e,n),n})}},{key:"delete",value:function(e){return fu("SimpleDb","DELETE",this.store.name,e),zf(this.store.delete(e))}},{key:"count",value:function(){return fu("SimpleDb","COUNT",this.store.name),zf(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,function(e,t){i.push(t)}).next(function(){return i})}var a=this.store.getAll(n.range);return new Uf(function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}})}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Uf(function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}})}},{key:"Qt",value:function(e,t){fu("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,function(e,t,n){return n.delete()})}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new Uf(function(n,r){t.onerror=function(e){var t=Kf(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next(function(e){e?r.continue():n()}):n()}})}},{key:"Kt",value:function(e,t){var n=[];return new Uf(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Vf(i),o=t(i.primaryKey,i.value,a);if(o instanceof Uf){var s=o.catch(function(e){return a.done(),Uf.reject(e)});n.push(s)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}}).next(function(){return Uf.waitFor(n)})}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function zf(e){return new Uf(function(t,n){e.onsuccess=function(e){t(e.target.result)},e.onerror=function(e){var t=Kf(e.target.error);n(t)}})}var Gf=!1;function Kf(e){var t=qf.Vt((0,Gt.z$)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new bu("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Gf||(Gf=!0,setTimeout(function(){throw r},0)),r}}return e}var Wf=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return p(n)}(Zf);function Jf(e,t){var n=yu(e);return qf.xt(n.Ht,t)}var Yf=function(){function e(t,n,r,i){v(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return p(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Jl(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=l(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Yl(r,e,this.localWriteTime)}}catch(s){n.e(s)}finally{n.f()}var i,a=l(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Yl(o,e,this.localWriteTime)}}catch(s){a.e(s)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach(function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Zu.min())})}},{key:"keys",value:function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},bh())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Nu(this.mutations,e.mutations,function(e,t){return $l(e,t)})&&Nu(this.baseMutations,e.baseMutations,function(e,t){return $l(e,t)})}}]),e}(),Qf=function(){function e(t,n,r,i){v(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return p(e,null,[{key:"from",value:function(t,n,r){mu(t.mutations.length===r.length);for(var i=yh,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),$f=function(){function e(t,n){v(this,e),this.largestBatchId=t,this.mutation=n}return p(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Xf=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zu.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Zu.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Gu.EMPTY_BYTE_STRING;v(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return p(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),ed=p(function e(t){v(this,e),this.Jt=t});function td(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:nd(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Vh(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Lh(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:rd(t.version)};else{if(!t.isUnknownDocument())return gu();r.unknownDocument={path:n.path.toArray(),version:rd(t.version)}}return r}function nd(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function rd(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function id(e){var t=new Mu(e.seconds,e.nanoseconds);return Zu.fromTimestamp(t)}function ad(e,t){for(var n=(t.baseMutations||[]).map(function(t){return Yh(e.Jt,t)}),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform&&(i.updateTransforms=t.mutations[r+1].transform.fieldTransforms,t.mutations.splice(r+1,1),++r)}var a=t.mutations.map(function(t){return Yh(e.Jt,t)}),o=Mu.fromMillis(t.localWriteTimeMs);return new Yf(t.batchId,o,n,a)}function od(e){var t,n,r=id(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?id(e.lastLimboFreeSnapshotVersion):Zu.min();return void 0!==e.query.documents?(mu(1===(n=e.query).documents.length),t=bl(vl(Hh(n.documents[0])))):t=function(e){return bl(Xh(e))}(e.query),new Xf(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Gu.fromBase64String(e.resumeToken))}function sd(e,t){var n,r=rd(t.snapshotVersion),i=rd(t.lastLimboFreeSnapshotVersion);n=Jc(t.target)?Qh(e.Jt,t.target):$h(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Kc(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function ud(e){var t=Xh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?wl(t,t.limit,"L"):t}function cd(e,t){return new $f(t.largestBatchId,Yh(e.Jt,t.overlayMutation))}function ld(e,t){var n=t.path.lastSegment();return[e,lf(t.path.popLast()),n]}var hd=function(){function e(){v(this,e)}return p(e,[{key:"getBundleMetadata",value:function(e,t){return fd(e).get(t).next(function(e){if(e)return{id:(t=e).bundleId,createTime:id(t.createTime),version:t.version};var t})}},{key:"saveBundleMetadata",value:function(e,t){return fd(e).put({bundleId:(n=t).id,createTime:rd(Uh(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return dd(e).get(t).next(function(e){if(e)return{name:(t=e).name,query:ud(t.bundledQuery),readTime:id(t.readTime)};var t})}},{key:"saveNamedQuery",value:function(e,t){return dd(e).put(function(e){return{name:e.name,readTime:rd(Uh(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function fd(e){return Jf(e,"bundles")}function dd(e){return Jf(e,"namedQueries")}var pd=function(){function e(t,n){v(this,e),this.M=t,this.userId=n}return p(e,[{key:"getOverlay",value:function(e,t){var n=this;return vd(e).get(ld(this.userId,t)).next(function(e){return e?cd(n.M,e):null})}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach(function(n,a){var o=new $f(t,a);i.push(r.Xt(e,o))}),Uf.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach(function(e){return i.add(lf(e.getCollectionPath()))});var a=[];return i.forEach(function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(vd(e).Qt("collectionPathOverlayIndex",i))}),Uf.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=mh(),a=lf(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return vd(e).qt("collectionPathOverlayIndex",o).next(function(e){var t,n=l(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=cd(r.M,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i})}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=mh(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return vd(e).Wt({index:"collectionGroupOverlayIndex",range:s},function(e,t,n){var s=cd(a.M,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()}).next(function(){return o})}},{key:"Xt",value:function(e,t){return vd(e).put(function(e,t,n){var i=r(ld(t,n.mutation.key),3);i[0];return{userId:t,collectionPath:i[1],documentId:i[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Jh(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function vd(e){return Jf(e,"documentOverlays")}var gd=function(){function e(){v(this,e)}return p(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Ju(e.integerValue));else if("doubleValue"in e){var n=Ju(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),rc(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Yu(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?_c(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):gu()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),ac.fromName(e).path.forEach(function(e){n.ne(t,60),n.le(e,t)})}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function md(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function yd(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=md(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}gd.fe=new gd;var kd=function(){function e(){v(this,e),this.buffer=new Uint8Array(1024),this.position=0}return p(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=l(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=l(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=yd(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=yd(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),bd=function(){function e(t){v(this,e),this.De=t}return p(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),wd=function(){function e(t){v(this,e),this.De=t}return p(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),_d=function(){function e(){v(this,e),this.De=new kd,this.Ce=new bd(this.De),this.xe=new wd(this.De)}return p(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),xd=function(){function e(t,n,r,i){v(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return p(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Sd(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Td(e.arrayValue,t.arrayValue))?n:0!==(n=Td(e.directionalValue,t.directionalValue))?n:ac.comparator(e.documentKey,t.documentKey)}function Td(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Id=function(){function e(t){v(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=l(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return p(e,[{key:"$e",value:function(e){var t=Dc(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=Pc(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=l(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),Ed=function(){function e(){v(this,e),this.qe=new Cd}return p(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),Uf.resolve()}},{key:"getCollectionParents",value:function(e,t){return Uf.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Uf.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Uf.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Uf.resolve(null)}},{key:"getIndexType",value:function(e,t){return Uf.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Uf.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Uf.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Uf.resolve(Zc.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Uf.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Uf.resolve()}}]),e}(),Cd=function(){function e(){v(this,e),this.index={}}return p(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new jc(ju.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new jc(ju.comparator)).toArray()}}]),e}(),Ad=new Uint8Array(0),Rd=function(){function e(t,n){v(this,e),this.user=t,this.databaseId=n,this.Ke=new Cd,this.Ge=new fh(function(e){return Kc(e)},function(e,t){return Wc(e,t)}),this.uid=t.uid||""}return p(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(function(){n.Ke.add(t)});var a={collectionId:r,parent:lf(i)};return Dd(e).put(a)}return Uf.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Lu(t),""],!1,!0);return Dd(e).qt(r).next(function(e){var r,i=l(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(df(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n})}},{key:"addFieldIndex",value:function(e,t){var n=Od(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(function(e){return[e.fieldPath.canonicalString(),e.kind]})}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Od(e),r=Nd(e),i=Pd(e);return n.delete(t.indexId).next(function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}).next(function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Pd(e),i=!0,a=new Map;return Uf.forEach(this.Qe(t),function(t){return n.je(e,t).next(function(e){i&&(i=!!e),a.set(t,e)})}).next(function(){if(i){var e=bh(),o=[];return Uf.forEach(a,function(i,a){var s;fu("IndexedDbIndexManager","Using index ".concat((s=i,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map(function(e){return"".concat(e.fieldPath,":").concat(e.kind)}).join(",")))," to execute ").concat(Kc(t)));var u=function(e,t){var n=Dc(t);if(void 0===n)return null;var r,i=l(Yc(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=l(Pc(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=l(Yc(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),h=function(e,t){var n,r=[],i=!0,a=l(Pc(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?Qc(e,o.fieldPath,e.startAt):$c(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new ul(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=l(Pc(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?$c(e,o.fieldPath,e.endAt):Qc(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new ul(r,i)}(a,i),d=n.We(i,a,h),p=n.We(i,a,f),v=n.ze(i,a,c),g=n.He(i.indexId,u,d,h.inclusive,p,f.inclusive,v);return Uf.forEach(g,function(n){return r.Gt(n,t.limit).next(function(t){t.forEach(function(t){var n=ac.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))})})})}).next(function(){return o})}return Uf.resolve(null)})}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"He",value:function(e,t,n,r,i,a,o){for(var s=this,c=(null!=t?t.length:1)*Math.max(n.length,i.length),l=c/(null!=t?t.length:1),h=[],f=function(c){var f=t?s.Je(t[c/l]):Ad,d=s.Ye(e,f,n[c%l],r),p=s.Xe(e,f,i[c%l],a),v=o.map(function(t){return s.Ye(e,f,t,!0)});h.push.apply(h,u(s.createRange(d,p,v)))},d=0;d<c;++d)f(d);return h}},{key:"Ye",value:function(e,t,n,r){var i=new xd(e,ac.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new xd(e,ac.empty(),t,n);return r?i.ke():i}},{key:"je",value:function(e,t){var n=new Id(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(function(e){var t,r=null,i=l(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.$e(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r})}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Uf.forEach(this.Qe(t),function(t){return n.je(e,t).next(function(e){e?0!==r&&e.fields.length<function(e){var t,n=new jc(Hu.comparator),r=!1,i=l(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,s=l(e.orderBy);try{for(s.s();!(o=s.n()).done;){var u=o.value;u.field.isKeyField()||(n=n.add(u.field))}}catch(c){s.e(c)}finally{s.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0})}).next(function(){return r})}},{key:"Ze",value:function(e,t){var n,r=new _d,i=l(Pc(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.Ne(a.kind);gd.fe.Zt(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Se()}},{key:"Je",value:function(e){var t=new _d;return gd.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new _d;return gd.fe.Zt(vc(this.databaseId,t),n.Ne(function(e){var t=Pc(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"ze",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new _d);var i,a=0,o=l(Pc(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],h=l(r);try{for(h.s();!(s=h.n()).done;){var f=s.value;if(this.en(t,u.fieldPath)&&mc(c))r=this.nn(r,u,c);else{var d=f.Ne(u.kind);gd.fe.Zt(c,d)}}}catch(p){h.e(p)}finally{h.f()}}}catch(p){o.e(p)}finally{o.f()}return this.sn(r)}},{key:"We",value:function(e,t,n){return this.ze(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=u(e),a=[],o=l(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,c=r.value,h=l(i);try{for(h.s();!(s=h.n()).done;){var f=s.value,d=new _d;d.seed(f.Se()),gd.fe.Zt(c,d.Ne(t.kind)),a.push(d)}}catch(p){h.e(p)}finally{h.f()}}}catch(p){o.e(p)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find(function(e){return e instanceof Xc&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)})}},{key:"getFieldIndexes",value:function(e,t){var n=this,i=Od(e),a=Nd(e);return(t?i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.qt()).next(function(e){var t=[];return Uf.forEach(e,function(e){return a.get([e.indexId,n.uid]).next(function(n){t.push(function(e,t){var n=t?new Nc(t.sequenceNumber,new Zc(id(t.readTime),new ac(df(t.documentKey)),t.largestBatchId)):Nc.empty(),i=e.fields.map(function(e){var t=r(e,2),n=t[0],i=t[1];return new Oc(Hu.fromServerFormat(n),i)});return new Rc(e.indexId,e.collectionGroup,i,n)}(e,n))})}).next(function(){return t})})}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next(function(e){return 0===e.length?null:(e.sort(function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Ou(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup)})}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Od(e),a=Nd(e);return this.rn(e).next(function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(function(t){return Uf.forEach(t,function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:rd(r.readTime),documentKey:lf(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))})})})}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Uf.forEach(t,function(t,i){var a=r.get(t.collectionGroup);return(a?Uf.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next(function(a){return r.set(t.collectionGroup,a),Uf.forEach(a,function(r){return n.on(e,t,r).next(function(t){var a=n.un(i,r);return t.isEqual(a)?Uf.resolve():n.an(e,i,r,t,a)})})})})}},{key:"cn",value:function(e,t,n,r){return Pd(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return Pd(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=Pd(e),i=new jc(Sd);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},function(e,r){i=i.add(new xd(n.indexId,t,r.arrayValue,r.directionalValue))}).next(function(){return i})}},{key:"un",value:function(e,t){var n=new jc(Sd),r=this.Ze(t,e);if(null==r)return n;var i=Dc(t);if(null!=i){var a=e.data.field(i.fieldPath);if(mc(a)){var o,s=l(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new xd(t.indexId,e.key,this.Je(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new xd(t.indexId,e.key,Ad,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;fu("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=Hc(a),u=Hc(o);s||u;){var c=!1,l=!1;if(s&&u){var h=n(s,u);h<0?l=!0:h>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=Hc(o)):l?(i(s),s=Hc(a)):(s=Hc(a),u=Hc(o))}}(r,i,Sd,function(r){o.push(a.cn(e,t,n,r))},function(r){o.push(a.hn(e,t,n,r))}),Uf.waitFor(o)}},{key:"rn",value:function(e){var t=1;return Nd(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},function(e,n,r){r.done(),t=n.sequenceNumber+1}).next(function(){return t})}},{key:"createRange",value:function(e,t,n){n=n.sort(function(e,t){return Sd(e,t)}).filter(function(e,t,n){return!t||0!==Sd(e,n[t-1])});var r=[];r.push(e);var i,a=l(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=Sd(o,e),u=Sd(o,t);if(0===s)r[0]=e.ke();else if(s>0&&u<0)r.push(o),r.push(o.ke());else if(u>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],h=0;h<r.length;h+=2)c.push(IDBKeyRange.bound([r[h].indexId,this.uid,r[h].arrayValue,r[h].directionalValue,Ad,[]],[r[h+1].indexId,this.uid,r[h+1].arrayValue,r[h+1].directionalValue,Ad,[]]));return c}},{key:"getMinOffset",value:function(e,t){var n,r=this;return Uf.forEach(this.Qe(t),function(t){return r.je(e,t).next(function(e){e?(!n||Uc(e.indexState.offset,n)<0)&&(n=e.indexState.offset):n=Zc.min()})}).next(function(){return n})}}]),e}();function Dd(e){return Jf(e,"collectionParents")}function Pd(e){return Jf(e,"indexEntries")}function Od(e){return Jf(e,"indexConfiguration")}function Nd(e){return Jf(e,"indexState")}var Ld={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Md=function(){function e(t,n,r){v(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return p(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Zd(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Wt({range:o},function(e,t,n){return s++,n.delete()});a.push(u.next(function(){mu(1===s)}));var c,h=[],f=l(n.mutations);try{for(f.s();!(c=f.n()).done;){var d=c.value,p=gf(t,d.key.path,n.batchId);a.push(i.delete(p)),h.push(d.key)}}catch(v){f.e(v)}finally{f.f()}return Uf.waitFor(a).next(function(){return h})}function Ud(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw gu();t=e.noDocument}return JSON.stringify(t).length}Md.DEFAULT_COLLECTION_PERCENTILE=10,Md.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Md.DEFAULT=new Md(41943040,Md.DEFAULT_COLLECTION_PERCENTILE,Md.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Md.DISABLED=new Md(-1,0,0);var Fd=function(){function e(t,n,r,i){v(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return p(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vd(e).Wt({index:"userMutationsIndex",range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=jd(e),o=Vd(e);return o.add({}).next(function(s){mu("number"==typeof s);var u,c=new Yf(s,t,n,r),h=function(e,t,n){var r=n.baseMutations.map(function(t){return Jh(e.Jt,t)}),i=n.mutations.map(function(t){return Jh(e.Jt,t)});return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],d=new jc(function(e,t){return Ou(e.canonicalString(),t.canonicalString())}),p=l(r);try{for(p.s();!(u=p.n()).done;){var v=u.value,g=gf(i.userId,v.key.path,s);d=d.add(v.key.path.popLast()),f.push(o.put(h)),f.push(a.put(g,mf))}}catch(m){p.e(m)}finally{p.f()}return d.forEach(function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(function(){i.ln[s]=c.keys()}),Uf.waitFor(f).next(function(){return c})})}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Vd(e).get(t).next(function(e){return e?(mu(e.userId===n.userId),ad(n.M,e)):null})}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?Uf.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null})}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Vd(e).Wt({index:"userMutationsIndex",range:i},function(e,t,i){t.userId===n.userId&&(mu(t.batchId>=r),a=ad(n.M,t)),i.done()}).next(function(){return a})}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Vd(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},function(e,t,r){n=t.batchId,r.done()}).next(function(){return n})}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vd(e).qt("userMutationsIndex",n).next(function(e){return e.map(function(e){return ad(t.M,e)})})}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,i=vf(this.userId,t.path),a=IDBKeyRange.lowerBound(i),o=[];return jd(e).Wt({range:a},function(i,a,s){var u=r(i,3),c=u[0],l=u[1],h=u[2],f=df(l);if(c===n.userId&&t.path.isEqual(f))return Vd(e).get(h).next(function(e){if(!e)throw gu();mu(e.userId===n.userId),o.push(ad(n.M,e))});s.done()}).next(function(){return o})}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,i=new jc(Ou),a=[];return t.forEach(function(t){var o=vf(n.userId,t.path),s=IDBKeyRange.lowerBound(o),u=jd(e).Wt({range:s},function(e,a,o){var s=r(e,3),u=s[0],c=s[1],l=s[2],h=df(c);u===n.userId&&t.path.isEqual(h)?i=i.add(l):o.done()});a.push(u)}),Uf.waitFor(a).next(function(){return n.dn(e,i)})}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,i=t.path,a=i.length+1,o=vf(this.userId,i),s=IDBKeyRange.lowerBound(o),u=new jc(Ou);return jd(e).Wt({range:s},function(e,t,o){var s=r(e,3),c=s[0],l=s[1],h=s[2],f=df(l);c===n.userId&&i.isPrefixOf(f)?f.length===a&&(u=u.add(h)):o.done()}).next(function(){return n.dn(e,u)})}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(Vd(e).get(t).next(function(e){if(null===e)throw gu();mu(e.userId===n.userId),r.push(ad(n.M,e))}))}),Uf.waitFor(i).next(function(){return r})}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Zd(e.Ht,this.userId,t).next(function(r){return e.addOnCommittedListener(function(){n._n(t.batchId)}),Uf.forEach(r,function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)})})}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return Uf.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return jd(e).Wt({range:r},function(e,n,r){if(e[0]===t.userId){var a=df(e[1]);i.push(a)}else r.done()}).next(function(){mu(0===i.length)})})}},{key:"containsKey",value:function(e,t){return qd(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return Bd(e).get(this.userId).next(function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}})}}],[{key:"Yt",value:function(t,n,r,i){return mu(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function qd(e,t,n){var i=vf(t,n.path),a=i[1],o=IDBKeyRange.lowerBound(i),s=!1;return jd(e).Wt({range:o,jt:!0},function(e,n,i){var o=r(e,3),u=o[0],c=o[1];o[2];u===t&&c===a&&(s=!0),i.done()}).next(function(){return s})}function Vd(e){return Jf(e,"mutations")}function jd(e){return Jf(e,"documentMutations")}function Bd(e){return Jf(e,"mutationQueues")}var Hd=function(){function e(t){v(this,e),this.mn=t}return p(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),zd=function(){function e(t,n){v(this,e),this.referenceDelegate=t,this.M=n}return p(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next(function(n){var r=new Hd(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next(function(){return n.highestTargetId})})}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next(function(e){return Zu.fromTimestamp(new Mu(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next(function(e){return e.highestListenSequenceNumber})}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)})}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next(function(){return n.pn(e).next(function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)})})}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return Gd(e).delete(t.targetId)}).next(function(){return n.pn(e)}).next(function(t){return mu(t.targetCount>0),t.targetCount-=1,n.In(e,t)})}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Gd(e).Wt(function(o,s){var u=od(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))}).next(function(){return Uf.waitFor(a)}).next(function(){return i})}},{key:"forEachTarget",value:function(e,t){return Gd(e).Wt(function(e,n){var r=od(n);t(r)})}},{key:"pn",value:function(e){return Kd(e).get("targetGlobalKey").next(function(e){return mu(null!==e),e})}},{key:"In",value:function(e,t){return Kd(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return Gd(e).put(sd(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next(function(e){return e.targetCount})}},{key:"getTargetData",value:function(e,t){var n=Kc(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Gd(e).Wt({range:r,index:"queryTargetsIndex"},function(e,n,r){var a=od(n);Wc(t,a.target)&&(i=a,r.done())}).next(function(){return i})}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Wd(e);return t.forEach(function(t){var o=lf(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))}),Uf.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Wd(e);return Uf.forEach(t,function(t){var a=lf(t.path);return Uf.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])})}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Wd(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Wd(e),i=bh();return r.Wt({range:n,jt:!0},function(e,t,n){var r=df(e[1]),a=new ac(r);i=i.add(a)}).next(function(){return i})}},{key:"containsKey",value:function(e,t){var n=lf(t.path),i=IDBKeyRange.bound([n],[Lu(n)],!1,!0),a=0;return Wd(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},function(e,t,n){var i=r(e,2),o=i[0];i[1];0!==o&&(a++,n.done())}).next(function(){return a>0})}},{key:"Et",value:function(e,t){return Gd(e).get(t).next(function(e){return e?od(e):null})}}]),e}();function Gd(e){return Jf(e,"targets")}function Kd(e){return Jf(e,"targetGlobal")}function Wd(e){return Jf(e,"targetDocuments")}function Jd(e){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,Qt.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===ku.FAILED_PRECONDITION&&t.message===Mf){e.next=2;break}throw t;case 2:fu("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qd(e,t){var n=r(e,2),i=n[0],a=n[1],o=r(t,2),s=o[0],u=o[1],c=Ou(i,s);return 0===c?Ou(a,u):c}var $d=function(){function e(t){v(this,e),this.An=t,this.buffer=new jc(Qd),this.Rn=0}return p(e,[{key:"bn",value:function(){return++this.Rn}},{key:"Pn",value:function(e){var t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Qd(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Xd=function(){function e(t,n){v(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return p(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;fu("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,Qt.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Bf(n.t0)){n.next=12;break}fu("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Jd(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}},n,null,[[1,6]])})))}}]),e}(),ep=function(){function e(t,n){v(this,e),this.Dn=t,this.params=n}return p(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next(function(e){return Math.floor(t/100*e)})}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Uf.resolve(Ru.A);var r=new $d(t);return this.Dn.forEachTarget(e,function(e){return r.Pn(e.sequenceNumber)}).next(function(){return n.Dn.xn(e,function(e){return r.Pn(e)})}).next(function(){return r.maxValue})}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(fu("LruGarbageCollector","Garbage collection skipped; disabled"),Uf.resolve(Ld)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(fu("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Ld):n.Nn(e,t)})}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return t>c.params.maximumSequenceNumbersToCollect?(fu("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)}).next(function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)}).next(function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)}).next(function(e){return u=Date.now(),hu()<=Wt.in.DEBUG&&fu("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),Uf.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})})}}]),e}(),tp=function(){function e(t,n){v(this,e),this.db=t,this.garbageCollector=function(e,t){return new ep(e,t)}(this,n)}return p(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})}},{key:"kn",value:function(e){var t=0;return this.xn(e,function(e){t++}).next(function(){return t})}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,function(e,n){return t(n)})}},{key:"addReference",value:function(e,t,n){return np(e,n)}},{key:"removeReference",value:function(e,t,n){return np(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return np(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return Bd(e).zt(function(r){return qd(e,r,t).next(function(e){return e&&(n=!0),Uf.resolve(!e)})}).next(function(){return n})}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,function(o,s){if(s<=t){var u=n.On(e,o).next(function(t){if(!t)return a++,r.getEntry(e,o).next(function(){return r.removeEntry(o,Zu.min()),Wd(e).delete([0,lf(o.path)])})});i.push(u)}}).next(function(){return Uf.waitFor(i)}).next(function(){return r.apply(e)}).next(function(){return a})}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return np(e,t)}},{key:"Mn",value:function(e,t){var n,i=Wd(e),a=Ru.A;return i.Wt({index:"documentTargetsIndex"},function(e,i){var o=r(e,2),s=o[0],u=(o[1],i.path),c=i.sequenceNumber;0===s?(a!==Ru.A&&t(new ac(df(n)),a),a=c,n=u):a=Ru.A}).next(function(){a!==Ru.A&&t(new ac(df(n)),a)})}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function np(e,t){return Wd(e).put(function(e,t){return{targetId:0,path:lf(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var rp=function(){function e(){v(this,e),this.changes=new fh(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),this.changesApplied=!1}return p(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Ac.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Uf.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),ip=function(){function e(t){v(this,e),this.M=t}return p(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return sp(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return sp(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],nd(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next(function(r){return r.byteSize+=t,n.Fn(e,r)})}},{key:"getEntry",value:function(e,t){var n=this,r=Ac.newInvalidDocument(t);return sp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(up(t))},function(e,i){r=n.$n(t,i)}).next(function(){return r})}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:Ac.newInvalidDocument(t)};return sp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(up(t))},function(e,i){r={document:n.$n(t,i),size:Ud(i)}}).next(function(){return r})}},{key:"getEntries",value:function(e,t){var n=this,r=ph();return this.Ln(e,t,function(e,t){var i=n.$n(e,t);r=r.insert(e,i)}).next(function(){return r})}},{key:"Un",value:function(e,t){var n=this,r=ph(),i=new Fc(ac.comparator);return this.Ln(e,t,function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,Ud(t))}).next(function(){return{documents:r,qn:i}})}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return Uf.resolve();var r=new jc(lp);t.forEach(function(e){return r=r.add(e)});var i=IDBKeyRange.bound(up(r.first()),up(r.last())),a=r.getIterator(),o=a.getNext();return sp(e).Wt({index:"documentKeyIndex",range:i},function(e,t,r){for(var i=ac.fromSegments([].concat(u(t.prefixPath),[t.collectionGroup,t.documentId]));o&&lp(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(up(o)):r.done()}).next(function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null})}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),nd(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sp(e).qt(IDBKeyRange.bound(i,a,!0)).next(function(e){var t,n=ph(),i=l(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(ac.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(s){i.e(s)}finally{i.f()}return n})}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=ph(),o=cp(t,n),s=cp(t,Zc.max());return sp(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},function(e,t,n){var o=i.$n(ac.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()}).next(function(){return a})}},{key:"newChangeBuffer",value:function(e){return new ap(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next(function(e){return e.byteSize})}},{key:"getMetadata",value:function(e){return op(e).get("remoteDocumentGlobalKey").next(function(e){return mu(!!e),e})}},{key:"Fn",value:function(e,t){return op(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Wh(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=ac.fromSegments(t.noDocument.path),i=id(t.noDocument.readTime);n=Ac.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return gu();var a=ac.fromSegments(t.unknownDocument.path),o=id(t.unknownDocument.version);n=Ac.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Mu(e[0],e[1]);return Zu.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(Zu.min()))return n}return Ac.newInvalidDocument(e)}}]),e}(),ap=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new fh(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),i}return p(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new jc(function(e,t){return Ou(e.canonicalString(),t.canonicalString())});return this.changes.forEach(function(a,o){var s=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=td(t.Kn.M,o);i=i.add(a.path.popLast());var c=Ud(u);r+=c-s.size,n.push(t.Kn.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=td(t.Kn.M,o.convertToNoDocument(Zu.min()));n.push(t.Kn.addEntry(e,a,l))}}),i.forEach(function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))}),n.push(this.Kn.updateMetadata(e,r)),Uf.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next(function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document})}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next(function(e){var t=e.documents;return e.qn.forEach(function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})}),t})}}]),n}(rp);function op(e){return Jf(e,"remoteDocumentGlobal")}function sp(e){return Jf(e,"remoteDocumentsV14")}function up(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function cp(e,t){var n=t.documentKey.path.toArray();return[e,nd(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function lp(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Ou(n[a],r[a]))return i;return(i=Ou(n.length,r.length))||((i=Ou(n[n.length-2],r[r.length-2]))||Ou(n[n.length-1],r[r.length-1]))}var hp=function(){function e(t){v(this,e),this.M=t}return p(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Ff("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pf,{unique:!0}),e.createObjectStore("documentMutations")}(e),fp(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Uf.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),fp(e)),o=o.next(function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Zu.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(e,t){return t.store("mutations").qt().next(function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pf,{unique:!0});var r=t.store("mutations"),i=n.map(function(e){return r.put(e)});return Uf.waitFor(i)})}(e,a)})),o=o.next(function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(o=o.next(function(){return i.Qn(a)})),n<6&&r>=6&&(o=o.next(function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)})),n<7&&r>=7&&(o=o.next(function(){return i.Wn(a)})),n<8&&r>=8&&(o=o.next(function(){return i.zn(e,a)})),n<9&&r>=9&&(o=o.next(function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(o=o.next(function(){return i.Hn(a)})),n<11&&r>=11&&(o=o.next(function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&r>=12&&(o=o.next(function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Af});t.createIndex("collectionPathOverlayIndex",Rf,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Df,{unique:!1})}(e)})),n<13&&r>=13&&(o=o.next(function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:yf});t.createIndex("documentKeyIndex",kf),t.createIndex("collectionGroupIndex",bf)}(e)}).next(function(){return i.Jn(e,a)}).next(function(){return e.deleteObjectStore("remoteDocuments")})),n<14&&r>=14&&(o=o.next(function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Tf}).createIndex("sequenceNumberIndex",If,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Ef}).createIndex("documentKeyIndex",Cf,{unique:!1})}(e)})),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt(function(e,n){t+=Ud(n)}).next(function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next(function(n){return Uf.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next(function(r){return Uf.forEach(r,function(r){mu(r.userId===n.userId);var i=ad(t.M,r);return Zd(e,n.userId,i).next(function(){})})})})})}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(function(e){var r=[];return n.Wt(function(n,i){var a=new ju(n),o=function(e){return[0,lf(e)]}(a);r.push(t.get(o).next(function(n){return n?Uf.resolve():function(n){return t.put({targetId:0,path:lf(n),sequenceNumber:e.highestListenSequenceNumber})}(a)}))}).next(function(){return Uf.waitFor(r)})})}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Sf});var n=t.store("collectionParents"),i=new Cd,a=function(e){if(i.add(e)){var t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:lf(r)})}};return t.store("remoteDocuments").Wt({jt:!0},function(e,t){var n=new ju(e);return a(n.popLast())}).next(function(){return t.store("documentMutations").Wt({jt:!0},function(e,t){var n=r(e,3),i=(n[0],n[1]),o=(n[2],df(i));return a(o.popLast())})})}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt(function(e,r){var i=od(r),a=sd(t.M,i);return n.put(a)})}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt(function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new ac(ju.fromString(i.document.name).popFirst(5)):i.noDocument?ac.fromSegments(i.noDocument.path):i.unknownDocument?ac.fromSegments(i.unknownDocument.path):gu()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(s))}).next(function(){return Uf.waitFor(r)})}}]),e}();function fp(e){e.createObjectStore("targetDocuments",{keyPath:_f}).createIndex("documentTargetsIndex",xf,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wf,{unique:!0}),e.createObjectStore("targetGlobal")}var dp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pp=function(){function e(t,n,r,i,a,o,s,u,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(v(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=s,this.Xn=c,this.Zn=l,this.ts=h,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new bu(ku.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tp(this,i),this.hs=n+"main",this.M=new ed(u),this.ls=new qf(this.hs,this.ts,new hp(this.M)),this.fs=new zd(this.referenceDelegate,this.M),this.ds=function(e){return new ip(e)}(this.M),this._s=new hd,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l&&du("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return p(e,[{key:"start",value:function(){var e=this;return this.gs().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new bu(ku.FAILED_PRECONDITION,dp);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.fs.getHighestSequenceNumber(t)})}).then(function(t){e.es=new Ru(t,e.Xn)}).then(function(){e.ns=!0}).catch(function(t){return e.ls&&e.ls.close(),Promise.reject(t)})}},{key:"Ts",value:function(e){var t,n=this;return this.cs=(t=(0,Qt.Z)(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.started){t.next=2;break}return t.abrupt("return",e(r));case 2:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){var t;this.ls.Ot((t=(0,Qt.Z)(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}))}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Qt.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}},e)}))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(t){return gp(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next(function(){if(e.isPrimary)return e.Es(t).next(function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable(function(){return e.cs(!1)}))})}).next(function(){return e.As(t)}).next(function(n){return e.isPrimary&&!n?e.Rs(t).next(function(){return!1}):!!n&&e.bs(t).next(function(){return!0})})}).catch(function(t){if(Bf(t))return fu("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return fu("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable(function(){return e.cs(t)}),e.isPrimary=t})}},{key:"Es",value:function(e){var t=this;return vp(e).get("owner").next(function(e){return Uf.resolve(t.Ps(e))})}},{key:"Vs",value:function(e){return gp(e).delete(this.clientId)}},{key:"vs",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isPrimary||e.Ss(e.us,18e5)){t.next=6;break}return e.us=Date.now(),t.next=4,e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var n=Jf(t,"clientMetadata");return n.qt().next(function(t){var r=e.Ds(t,18e5),i=t.filter(function(e){return-1===r.indexOf(e)});return Uf.forEach(i,function(e){return n.delete(e.clientId)}).next(function(){return i})})}).catch(function(){return[]});case 4:if(n=t.sent,e.ws){r=l(n);try{for(r.s();!(i=r.n()).done;)a=i.value,e.ws.removeItem(e.Cs(a.clientId))}catch(o){r.e(o)}finally{r.f()}}case 6:case"end":return t.stop()}},t)}))()}},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.gs().then(function(){return e.vs()}).then(function(){return e.Is()})})}},{key:"Ps",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?Uf.resolve(!0):vp(e).get("owner").next(function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.Ps(n)&&t.networkEnabled)return!0;if(!t.Ps(n)){if(!n.allowTabSynchronization)throw new bu(ku.FAILED_PRECONDITION,dp);return!1}}return!(!t.networkEnabled||!t.inForeground)||gp(e).qt().next(function(e){return void 0===t.Ds(e,5e3).find(function(e){if(t.clientId!==e.clientId){var n=!t.inForeground&&e.inForeground,r=t.networkEnabled===e.networkEnabled;if(!t.networkEnabled&&e.networkEnabled||n&&r)return!0}return!1})})}).next(function(e){return t.isPrimary!==e&&fu("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e})}},{key:"shutdown",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),t.next=7,e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],function(t){var n=new Wf(t,Ru.A);return e.Rs(n).next(function(){return e.Vs(n)})});case 7:e.ls.close(),e.Os();case 9:case"end":return t.stop()}},t)}))()}},{key:"Ds",value:function(e,t){var n=this;return e.filter(function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)})}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return gp(t).qt().next(function(t){return e.Ds(t,18e5).map(function(e){return e.clientId})})})}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return Fd.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new Rd(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return pd.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;fu("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=14===(i=this.ts)?Lf:13===i?Nf:12===i?Of:11===i?Pf:void gu();return this.ls.runTransaction(e,o,s,function(i){return a=new Wf(i,r.es?r.es.next():Ru.A),"readwrite-primary"===t?r.Es(a).next(function(e){return!!e||r.As(a)}).next(function(t){if(!t)throw du("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable(function(){return r.cs(!1)}),new bu(ku.FAILED_PRECONDITION,Mf);return n(a)}).next(function(e){return r.bs(a).next(function(){return e})}):r.$s(a).next(function(){return n(a)})}).then(function(e){return a.raiseOnCommittedEvent(),e})}},{key:"$s",value:function(e){var t=this;return vp(e).get("owner").next(function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.Ps(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new bu(ku.FAILED_PRECONDITION,dp)})}},{key:"bs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vp(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=vp(e);return n.get("owner").next(function(e){return t.Ps(e)?(fu("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Uf.resolve()})}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t||e>n&&(du("Detected an update time that is in the future: ".concat(e," > ").concat(n)),1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()})},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),(0,Gt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return fu("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return du("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(pi){du("Failed to set zombie client id.",pi)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(pi){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return qf.vt()}}]),e}();function vp(e){return Jf(e,"owner")}function gp(e){return Jf(e,"clientMetadata")}function mp(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var yp=function(){function e(t,n,r){v(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return p(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.Us(e,t,r)})}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next(function(e){var t,r=l(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e})}},{key:"qs",value:function(e,t){e.forEach(function(e,n){var r,i=l(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}})}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next(function(t){return n.Gs(e,t).next(function(){return t})})}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(e){return n.qs(t,e)})}},{key:"Qs",value:function(e,t,n){return function(e){return ac.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):yl(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new ac(t)).next(function(e){var t=gh();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=gh();return this.indexManager.getCollectionParents(e,i).next(function(o){return Uf.forEach(o,function(o){var s=function(e,t){return new dl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,s,n).next(function(e){e.forEach(function(e,t){a=a.insert(e,t)})})}).next(function(){return a})})}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next(function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)}).next(function(e){var t,n=l(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=l(a.mutations);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.key,c=r.get(u);null==c&&(c=Ac.newInvalidDocument(u),r=r.insert(u,c)),Yl(s,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(u))}}catch(h){o.e(h)}finally{o.f()}}}catch(h){n.e(h)}finally{n.f()}}).next(function(){return r.forEach(function(e,n){Tl(t,n)||(r=r.remove(e))}),r})}}]),e}(),kp=function(){function e(t,n,r,i){v(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return p(e,null,[{key:"Ys",value:function(t,n){var r,i=bh(),a=bh(),o=l(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),bp=function(){function e(){v(this,e),this.Xs=!1}return p(e,[{key:"initialize",value:function(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}},{key:"Qs",value:function(e,t,n,r){var i=this;return this.ti(e,t).next(function(a){return a||i.ei(e,t,r,n)}).next(function(n){return n||i.ni(e,t)})}},{key:"ti",value:function(e,t){return Uf.resolve(null)}},{key:"ei",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Zu.min())?this.ni(e,t):this.Zs.Ks(e,n).next(function(a){var o=i.si(t,a);return i.ii(t,o,n,r)?i.ni(e,t):(hu()<=Wt.in.DEBUG&&fu("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Sl(t)),i.ri(e,o,t,Lc(r,-1)))})}},{key:"si",value:function(e,t){var n=new jc(El(e));return t.forEach(function(t,r){Tl(e,r)&&(n=n.add(r))}),n}},{key:"ii",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ni",value:function(e,t){return hu()<=Wt.in.DEBUG&&fu("QueryEngine","Using full collection scan to execute query:",Sl(t)),this.Zs.Qs(e,t,Zc.min())}},{key:"ri",value:function(e,t,n,r){return this.Zs.Qs(e,n,r).next(function(e){return t.forEach(function(t){e=e.insert(t.key,t)}),e})}}]),e}(),wp=function(){function e(t,n,r,i){v(this,e),this.persistence=t,this.oi=n,this.M=i,this.ui=new Fc(Ou),this.ai=new fh(function(e){return Kc(e)},Wc),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(r)}return p(e,[{key:"li",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new yp(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.ui)})}}]),e}();function _p(e,t,n,r){return new wp(e,t,n,r)}function xp(e,t){return Sp.apply(this,arguments)}function Sp(){return(Sp=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=yu(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",function(e){var t;return r.Bs.getAllMutationBatches(e).next(function(i){return t=i,r.li(n),r.Bs.getAllMutationBatches(e)}).next(function(n){var i,a=[],o=[],s=bh(),u=l(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var h,f=l(c.mutations);try{for(f.s();!(h=f.n()).done;){var d=h.value;s=s.add(d.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){u.e(b)}finally{u.f()}var p,v=l(n);try{for(v.s();!(p=v.n()).done;){var g=p.value;o.push(g.batchId);var m,y=l(g.mutations);try{for(y.s();!(m=y.n()).done;){var k=m.value;s=s.add(k.key)}}catch(b){y.e(b)}finally{y.f()}}}catch(b){v.e(b)}finally{v.f()}return r.fi.Ks(e,s).next(function(e){return{di:e,removedBatchIds:a,addedBatchIds:o}})})});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Tp(e,t){var n=yu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(e){var r=t.batch.keys(),i=n.hi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Uf.resolve();return a.forEach(function(e){o=o.next(function(){return r.getEntry(t,e)}).next(function(t){var a=n.docVersions.get(e);mu(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(function(){return e.Bs.removeMutationBatch(t,i)})}(n,e,t,i).next(function(){return i.apply(e)}).next(function(){return n.Bs.performConsistencyCheck(e)}).next(function(){return n.fi.Ks(e,r)})})}function Ip(e){var t=yu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.fs.getLastRemoteSnapshotVersion(e)})}function Ep(e,t){var n=yu(e),r=t.snapshotVersion,i=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(e){var a=n.hi.newChangeBuffer({trackRemovals:!0});i=n.ui;var o=[];t.targetChanges.forEach(function(a,s){var u=i.get(s);if(u){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,s).next(function(){return n.fs.addMatchingKeys(e,a.addedDocuments,s)}));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(Gu.EMPTY_BYTE_STRING,Zu.min()).withLastLimboFreeSnapshotVersion(Zu.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(u,c,a)&&o.push(n.fs.updateTargetData(e,c))}});var s=ph();if(t.documentUpdates.forEach(function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Cp(e,a,t.documentUpdates).next(function(e){s=e})),!r.isEqual(Zu.min())){var u=n.fs.getLastRemoteSnapshotVersion(e).next(function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)});o.push(u)}return Uf.waitFor(o).next(function(){return a.apply(e)}).next(function(){return n.fi.Gs(e,s)}).next(function(){return s})}).then(function(e){return n.ui=i,e})}function Cp(e,t,n){var r=bh();return n.forEach(function(e){return r=r.add(e)}),t.getEntries(e,r).next(function(e){var r=ph();return n.forEach(function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Zu.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):fu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),r})}function Ap(e,t){var n=yu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)})}function Rp(e,t){var n=yu(e);return n.persistence.runTransaction("Allocate target","readwrite",function(e){var r;return n.fs.getTargetData(e,t).next(function(i){return i?(r=i,Uf.resolve(r)):n.fs.allocateTargetId(e).next(function(i){return r=new Xf(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next(function(){return r})})})}).then(function(e){var r=n.ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ui=n.ui.insert(e.targetId,e),n.ai.set(t,e.targetId)),e})}function Dp(e,t,n){return Pp.apply(this,arguments)}function Pp(){return(Pp=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=yu(t),a=i.ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,function(e){return i.persistence.referenceDelegate.removeTarget(e,a)});case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Bf(e.t1)){e.next=12;break}throw e.t1;case 12:fu("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ui=i.ui.remove(n),i.ai.delete(a.target);case 14:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function Op(e,t,n){var r=yu(e),i=Zu.min(),a=bh();return r.persistence.runTransaction("Execute query","readonly",function(e){return function(e,t,n){var r=yu(e),i=r.ai.get(n);return void 0!==i?Uf.resolve(r.ui.get(i)):r.fs.getTargetData(t,n)}(r,e,bl(t)).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next(function(e){a=e})}).next(function(){return r.oi.Qs(e,t,n?i:Zu.min(),n?a:bh())}).next(function(e){return Mp(r,Il(t),e),{documents:e,_i:a}})})}function Np(e,t){var n=yu(e),r=yu(n.fs),i=n.ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(e){return r.Et(e,t).next(function(e){return e?e.target:null})})}function Lp(e,t){var n=yu(e),r=n.ci.get(t)||Zu.min();return n.persistence.runTransaction("Get new document changes","readonly",function(e){return n.hi.getAllFromCollectionGroup(e,t,Lc(r,-1),Number.MAX_SAFE_INTEGER)}).then(function(e){return Mp(n,t,e),e})}function Mp(e,t,n){var r=Zu.min();n.forEach(function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.ci.set(t,r)}function Zp(){return(Zp=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,s,u,c,h,f,d,p,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=yu(t),o=bh(),s=ph(),u=l(r);try{for(u.s();!(c=u.n()).done;)h=c.value,f=n.wi(h.metadata.name),h.document&&(o=o.add(f)),(d=n.mi(h)).setReadTime(n.gi(h.metadata.readTime)),s=s.insert(f,d)}catch(g){u.e(g)}finally{u.f()}return p=a.hi.newChangeBuffer({trackRemovals:!0}),e.next=7,Rp(a,function(e){return bl(vl(ju.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return Cp(e,p,s).next(function(t){return p.apply(e),t}).next(function(t){return a.fs.removeMatchingKeysForTargetId(e,v.targetId).next(function(){return a.fs.addMatchingKeys(e,o,v.targetId)}).next(function(){return a.fi.Gs(e,t)}).next(function(){return t})})}));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Up(e,t){return Fp.apply(this,arguments)}function Fp(){return(Fp=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:bh(),e.next=3,Rp(t,bl(ud(n.bundledQuery)));case 3:return i=e.sent,a=yu(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",function(e){var t=Uh(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(Gu.EMPTY_BYTE_STRING,t);return a.ui=a.ui.insert(o.targetId,o),a.fs.updateTargetData(e,o).next(function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)}).next(function(){return a.fs.addMatchingKeys(e,r,i.targetId)}).next(function(){return a._s.saveNamedQuery(e,n)})}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var qp=function(){function e(t){v(this,e),this.M=t,this.yi=new Map,this.pi=new Map}return p(e,[{key:"getBundleMetadata",value:function(e,t){return Uf.resolve(this.yi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.yi.set(t.id,{id:(n=t).id,version:n.version,createTime:Uh(n.createTime)}),Uf.resolve()}},{key:"getNamedQuery",value:function(e,t){return Uf.resolve(this.pi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.pi.set(t.name,function(e){return{name:e.name,query:ud(e.bundledQuery),readTime:Uh(e.readTime)}}(t)),Uf.resolve()}}]),e}(),Vp=function(){function e(){v(this,e),this.overlays=new Fc(ac.comparator),this.Ii=new Map}return p(e,[{key:"getOverlay",value:function(e,t){return Uf.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach(function(n,i){r.Xt(e,t,i)}),Uf.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Ii.get(n);return void 0!==i&&(i.forEach(function(e){return r.overlays=r.overlays.remove(e)}),this.Ii.delete(n)),Uf.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=mh(),i=t.length+1,a=new ac(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return Uf.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Fc(function(e,t){return e-t}),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=mh(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=mh(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach(function(e,t){return u.set(e,t)}),!(u.size()>=r)););return Uf.resolve(u)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Ii.get(r.largestBatchId).delete(n.key);this.Ii.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new $f(t,n));var a=this.Ii.get(t);void 0===a&&(a=bh(),this.Ii.set(t,a)),this.Ii.set(t,a.add(n.key))}}}]),e}(),jp=function(){function e(){v(this,e),this.Ti=new jc(Bp.Ei),this.Ai=new jc(Bp.Ri)}return p(e,[{key:"isEmpty",value:function(){return this.Ti.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Bp(e,t);this.Ti=this.Ti.add(n),this.Ai=this.Ai.add(n)}},{key:"bi",value:function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})}},{key:"removeReference",value:function(e,t){this.Pi(new Bp(e,t))}},{key:"Vi",value:function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})}},{key:"vi",value:function(e){var t=this,n=new ac(new ju([])),r=new Bp(n,e),i=new Bp(n,e+1),a=[];return this.Ai.forEachInRange([r,i],function(e){t.Pi(e),a.push(e.key)}),a}},{key:"Si",value:function(){var e=this;this.Ti.forEach(function(t){return e.Pi(t)})}},{key:"Pi",value:function(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}},{key:"Di",value:function(e){var t=new ac(new ju([])),n=new Bp(t,e),r=new Bp(t,e+1),i=bh();return this.Ai.forEachInRange([n,r],function(e){i=i.add(e.key)}),i}},{key:"containsKey",value:function(e){var t=new Bp(e,0),n=this.Ti.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Bp=function(){function e(t,n){v(this,e),this.key=t,this.Ci=n}return p(e,null,[{key:"Ei",value:function(e,t){return ac.comparator(e.key,t.key)||Ou(e.Ci,t.Ci)}},{key:"Ri",value:function(e,t){return Ou(e.Ci,t.Ci)||ac.comparator(e.key,t.key)}}]),e}(),Hp=function(){function e(t,n){v(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.xi=1,this.Ni=new jc(Bp.Ei)}return p(e,[{key:"checkEmpty",value:function(e){return Uf.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.xi;this.xi++;var a=new Yf(i,t,n,r);this.Bs.push(a);var o,s=l(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.Ni=this.Ni.add(new Bp(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return Uf.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Uf.resolve(this.ki(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this.Mi(t+1),r=n<0?0:n;return Uf.resolve(this.Bs.length>r?this.Bs[r]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Uf.resolve(0===this.Bs.length?-1:this.xi-1)}},{key:"getAllMutationBatches",value:function(e){return Uf.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Bp(t,0),i=new Bp(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],function(e){var t=n.ki(e.Ci);a.push(t)}),Uf.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new jc(Ou);return t.forEach(function(e){var t=new Bp(e,0),i=new Bp(e,Number.POSITIVE_INFINITY);n.Ni.forEachInRange([t,i],function(e){r=r.add(e.Ci)})}),Uf.resolve(this.Oi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;ac.isDocumentKey(i)||(i=i.child(""));var a=new Bp(new ac(i),0),o=new jc(Ou);return this.Ni.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Ci)),!0)},a),Uf.resolve(this.Oi(o))}},{key:"Oi",value:function(e){var t=this,n=[];return e.forEach(function(e){var r=t.ki(e);null!==r&&n.push(r)}),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;mu(0===this.Fi(t.batchId,"removed")),this.Bs.shift();var r=this.Ni;return Uf.forEach(t.mutations,function(i){var a=new Bp(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(function(){n.Ni=r})}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Bp(t,0),r=this.Ni.firstAfterOrEqual(n);return Uf.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return Uf.resolve()}},{key:"Fi",value:function(e,t){return this.Mi(e)}},{key:"Mi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"ki",value:function(e){var t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),zp=function(){function e(t){v(this,e),this.$i=t,this.docs=new Fc(ac.comparator),this.size=0}return p(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.$i(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Uf.resolve(n?n.document.mutableCopy():Ac.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=ph();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Ac.newInvalidDocument(e))}),Uf.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=ph(),i=new ac(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||Uc(Mc(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return Uf.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){gu()}},{key:"Bi",value:function(e,t){return Uf.forEach(this.docs,function(e){return t(e)})}},{key:"newChangeBuffer",value:function(e){return new Gp(this)}},{key:"getSize",value:function(e){return Uf.resolve(this.size)}}]),e}(),Gp=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this)).Kn=e,r}return p(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach(function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)}),Uf.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(rp),Kp=function(){function e(t){v(this,e),this.persistence=t,this.Li=new fh(function(e){return Kc(e)},Wc),this.lastRemoteSnapshotVersion=Zu.min(),this.highestTargetId=0,this.Ui=0,this.qi=new jp,this.targetCount=0,this.Ki=Hd.gn()}return p(e,[{key:"forEachTarget",value:function(e,t){return this.Li.forEach(function(e,n){return t(n)}),Uf.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Uf.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Uf.resolve(this.Ui)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ki.next(),Uf.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ui&&(this.Ui=t),Uf.resolve()}},{key:"Tn",value:function(e){this.Li.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ki=new Hd(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,Uf.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),Uf.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,Uf.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Li.forEach(function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Li.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),Uf.waitFor(a).next(function(){return i})}},{key:"getTargetCount",value:function(e){return Uf.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Li.get(t)||null;return Uf.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.qi.bi(t,n),Uf.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.qi.Vi(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.markPotentiallyOrphaned(e,t))}),Uf.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.qi.vi(t),Uf.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.qi.Di(t);return Uf.resolve(n)}},{key:"containsKey",value:function(e,t){return Uf.resolve(this.qi.containsKey(t))}}]),e}(),Wp=function(){function e(t,n){var r=this;v(this,e),this.Gi={},this.overlays={},this.es=new Ru(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new Kp(this),this.indexManager=new Ed,this.ds=new zp(function(e){return r.referenceDelegate.Qi(e)}),this.M=new ed(n),this._s=new qp(this.M)}return p(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Vp,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Gi[e.toKey()];return n||(n=new Hp(t,this.referenceDelegate),this.Gi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;fu("MemoryPersistence","Starting transaction:",e);var i=new Jp(this.es.next());return this.referenceDelegate.ji(),n(i).next(function(e){return r.referenceDelegate.Wi(i).next(function(){return e})}).toPromise().then(function(e){return i.raiseOnCommittedEvent(),e})}},{key:"zi",value:function(e,t){return Uf.or(Object.values(this.Gi).map(function(n){return function(){return n.containsKey(e,t)}}))}}]),e}(),Jp=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return p(n)}(Zf),Yp=function(){function e(t){v(this,e),this.persistence=t,this.Hi=new jp,this.Ji=null}return p(e,[{key:"Xi",get:function(){if(this.Ji)return this.Ji;throw gu()}},{key:"addReference",value:function(e,t,n){return this.Hi.addReference(n,t),this.Xi.delete(n.toString()),Uf.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Hi.removeReference(n,t),this.Xi.add(n.toString()),Uf.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Xi.add(t.toString()),Uf.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Hi.vi(t.targetId).forEach(function(e){return n.Xi.add(e.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.Xi.add(e.toString())})}).next(function(){return r.removeTargetData(e,t)})}},{key:"ji",value:function(){this.Ji=new Set}},{key:"Wi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Uf.forEach(this.Xi,function(r){var i=ac.fromPath(r);return t.Zi(e,i).next(function(e){e||n.removeEntry(i,Zu.min())})}).next(function(){return t.Ji=null,n.apply(e)})}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zi(e,t).next(function(e){e?n.Xi.delete(t.toString()):n.Xi.add(t.toString())})}},{key:"Qi",value:function(e){return 0}},{key:"Zi",value:function(e,t){var n=this;return Uf.or([function(){return Uf.resolve(n.Hi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zi(e,t)}])}}],[{key:"Yi",value:function(t){return new e(t)}}]),e}();function Qp(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function $p(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Xp(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var ev=function(){function e(t,n,r,i){v(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return p(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new bu(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(du("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),tv=function(){function e(t,n,r){v(this,e),this.targetId=t,this.state=n,this.error=r}return p(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new bu(i.error.code,i.error.message))),a?new e(t,i.state,r):(du("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),nv=function(){function e(t,n){v(this,e),this.clientId=t,this.activeTargetIds=n}return p(e,null,[{key:"tr",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=_h(),o=0;i&&o<r.activeTargetIds.length;++o)i=ic(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(du("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),rv=function(){function e(t,n){v(this,e),this.clientId=t,this.onlineState=n}return p(e,null,[{key:"tr",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(du("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),iv=function(){function e(){v(this,e),this.activeTargetIds=_h()}return p(e,[{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"er",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),av=function(){function e(t,n,r,i,a){v(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Fc(Ou),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=Qp(this.persistenceKey,this.ir),this.lr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.ir,new iv),this.dr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this._r=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.wr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.mr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.gr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}return p(e,[{key:"start",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a,o,s,u,c,h,f,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.syncEngine.Fs();case 2:n=t.sent,r=l(n),t.prev=4,r.s();case 6:if((i=r.n()).done){t.next=14;break}if((a=i.value)!==e.ir){t.next=10;break}return t.abrupt("continue",12);case 10:(o=e.getItem(Qp(e.persistenceKey,a)))&&(s=nv.tr(a,o))&&(e.ar=e.ar.insert(s.clientId,s));case 12:t.next=6;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(4),r.e(t.t0);case 19:return t.prev=19,r.f(),t.finish(19);case 22:e.yr(),(u=e.storage.getItem(e.mr))&&(c=e.pr(u))&&e.Ir(c),h=l(e.cr);try{for(h.s();!(f=h.n()).done;)d=f.value,e.ur(d)}catch(p){h.e(p)}finally{h.f()}e.cr=[],e.window.addEventListener("pagehide",function(){return e.shutdown()}),e.started=!0;case 28:case"end":return t.stop()}},t,null,[[4,16,19,22]])}))()}},{key:"writeSequenceNumber",value:function(e){this.setItem(this.lr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Tr(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach(function(n,r){r.activeTargetIds.has(e)&&(t=!0)}),t}},{key:"addPendingMutation",value:function(e){this.Er(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Er(e,t,n),this.Ar(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Xp(this.persistenceKey,e));if(n){var r=tv.tr(e,n);r&&(t=r.state)}}return this.Rr.nr(e),this.yr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Rr.sr(e),this.yr()}},{key:"isLocalQueryTarget",value:function(e){return this.Rr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Xp(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.br(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach(function(e){r.Ar(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})}},{key:"setOnlineState",value:function(e){this.Pr(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return fu("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){fu("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){fu("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ur",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(fu("SharedClientState","EVENT",n.key,n.newValue),n.key===this.hr)return void du("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Qt.Z)(regeneratorRuntime.mark(function e(){var r,i,a,o,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.dr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Sr(r,null));case 6:if(!(i=t.Dr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Sr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t._r.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Cr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Nr(a));case 16:e.next=41;break;case 18:if(!t.wr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.kr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(o));case 23:e.next=41;break;case 25:if(n.key!==t.mr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.pr(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ir(s));case 30:e.next=41;break;case 32:if(n.key!==t.lr){e.next=37;break}(u=function(e){var t=Ru.A;if(null!=e)try{var n=JSON.parse(e);mu("number"==typeof n),t=n}catch(e){du("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==Ru.A&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.gr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map(function(e){return t.syncEngine.Fr(e)}));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}},e)})))}}},{key:"Rr",get:function(){return this.ar.get(this.ir)}},{key:"yr",value:function(){this.setItem(this.hr,this.Rr.er())}},{key:"Er",value:function(e,t,n){var r=new ev(this.currentUser,e,t,n),i=$p(this.persistenceKey,this.currentUser,e);this.setItem(i,r.er())}},{key:"Ar",value:function(e){var t=$p(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Pr",value:function(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}},{key:"br",value:function(e,t,n){var r=Xp(this.persistenceKey,e),i=new tv(e,t,n);this.setItem(r,i.er())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}},{key:"vr",value:function(e){var t=this.dr.exec(e);return t?t[1]:null}},{key:"Dr",value:function(e,t){var n=this.vr(e);return nv.tr(n,t)}},{key:"Cr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return ev.tr(new uu(void 0!==n[2]?n[2]:null),r,t)}},{key:"kr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]);return tv.tr(r,t)}},{key:"pr",value:function(e){return rv.tr(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Nr",value:function(e){var t=this;return(0,Qt.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.user.uid!==t.currentUser.uid){n.next=2;break}return n.abrupt("return",t.syncEngine.$r(e.batchId,e.state,e.error));case 2:fu("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid));case 3:case"end":return n.stop()}},n)}))()}},{key:"Mr",value:function(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}},{key:"Sr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),o=[],s=[];return a.forEach(function(e){i.has(e)||o.push(e)}),i.forEach(function(e){a.has(e)||s.push(e)}),this.syncEngine.Lr(o,s).then(function(){n.ar=r})}},{key:"Ir",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Tr",value:function(e){var t=_h();return e.forEach(function(e,n){t=t.unionWith(n.activeTargetIds)}),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),ov=function(){function e(){v(this,e),this.Ur=new iv,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return p(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.nr(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.sr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new iv,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),sv=function(){function e(){v(this,e)}return p(e,[{key:"Kr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),uv=function(){function e(){var t=this;v(this,e),this.Gr=function(){return t.Qr()},this.jr=function(){return t.Wr()},this.zr=[],this.Hr()}return p(e,[{key:"Kr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}},{key:"Hr",value:function(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}},{key:"Qr",value:function(){fu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=l(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){fu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=l(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),cv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},lv=function(){function e(t){v(this,e),this.Jr=t.Jr,this.Yr=t.Yr}return p(e,[{key:"Xr",value:function(e){this.Zr=e}},{key:"eo",value:function(e){this.no=e}},{key:"onMessage",value:function(e){this.so=e}},{key:"close",value:function(){this.Yr()}},{key:"send",value:function(e){this.Jr(e)}},{key:"io",value:function(){this.Zr()}},{key:"ro",value:function(e){this.no(e)}},{key:"oo",value:function(e){this.so(e)}}]),e}(),hv=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return p(n,[{key:"fo",value:function(e,t,n,r){return new Promise(function(i,a){var o=new su;o.listenOnce(nu.COMPLETE,function(){try{switch(o.getLastErrorCode()){case tu.NO_ERROR:var t=o.getResponseJson();fu("Connection","XHR received:",JSON.stringify(t)),i(t);break;case tu.TIMEOUT:fu("Connection",'RPC "'+e+'" timed out'),a(new bu(ku.DEADLINE_EXCEEDED,"Request time out"));break;case tu.HTTP_ERROR:var n=o.getStatus();if(fu("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(ku).indexOf(t)>=0?t:ku.UNKNOWN}(r.status);a(new bu(s,r.message))}else a(new bu(ku.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new bu(ku.UNAVAILABLE,"Connection failed."));break;default:gu()}}finally{fu("Connection",'RPC "'+e+'" completed.')}});var s=JSON.stringify(r);o.send(t,"POST",s,n,15)})}},{key:"wo",value:function(e,t,n){var r=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Xs(),a=eu(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new au({})),this.lo(o.initMessageHeaders,t,n),(0,Gt.uI)()||(0,Gt.b$)()||(0,Gt.d)()||(0,Gt.w1)()||(0,Gt.Mn)()||(0,Gt.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");fu("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,h=new lv({Jr:function(e){l?fu("Connection","Not sending because WebChannel is closed:",e):(c||(fu("Connection","Opening WebChannel transport."),u.open(),c=!0),fu("Connection","WebChannel sending:",e),u.send(e))},Yr:function(){return u.close()}}),f=function(e,t,n){e.listen(t,function(e){try{n(e)}catch(e){setTimeout(function(){throw e},0)}})};return f(u,ou.EventType.OPEN,function(){l||fu("Connection","WebChannel transport opened.")}),f(u,ou.EventType.CLOSE,function(){l||(l=!0,fu("Connection","WebChannel transport closed"),h.ro())}),f(u,ou.EventType.ERROR,function(e){l||(l=!0,pu("Connection","WebChannel transport errored:",e),h.ro(new bu(ku.UNAVAILABLE,"The operation could not be completed")))}),f(u,ou.EventType.MESSAGE,function(e){var t;if(!l){var n=e.data[0];mu(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){fu("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=ah[e];if(void 0!==t)return hh(t)}(a),s=i.message;void 0===o&&(o=ku.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),l=!0,h.ro(new bu(o,s)),u.close()}else fu("Connection","WebChannel received:",n),h.oo(n)}}),f(a,ru.STAT_EVENT,function(e){e.stat===iu.PROXY?fu("Connection","Detected buffering proxy"):e.stat===iu.NOPROXY&&fu("Connection","Detected no buffering proxy")}),setTimeout(function(){h.io()},0),h}}]),n}(function(){function e(t){v(this,e),this.databaseInfo=t,this.databaseId=t.databaseId,this.uo=(t.ssl?"https":"http")+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return p(e,[{key:"co",value:function(e,t,n,r,i){var a=this.ho(e,t);fu("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then(function(e){return fu("RestConnection","Received: ",e),e},function(t){throw pu("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t})}},{key:"_o",value:function(e,t,n,r,i){return this.co(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+cu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(function(t,n){return e[n]=t}),n&&n.headers.forEach(function(t,n){return e[n]=t})}},{key:"ho",value:function(e,t){return"".concat(this.uo,"/v1/").concat(t,":").concat(cv[e])}}]),e}());function fv(){return"undefined"!=typeof window?window:null}function dv(){return"undefined"!=typeof document?document:null}function pv(e){return new Nh(e,!0)}var vv=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;v(this,e),this.Yn=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return p(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&fu("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,function(){return t.Eo=Date.now(),e()}),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),gv=function(){function e(t,n,r,i,a,o,s,u){v(this,e),this.Yn=t,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new vv(t,n)}return p(e,[{key:"ko",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.ko(),!t.t0){t.next=4;break}return t.next=4,e.close(0);case 4:case"end":return t.stop()}},t)}))()}},{key:"Fo",value:function(){this.state=0,this.No.reset()}},{key:"$o",value:function(){var e=this;this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,function(){return e.Bo()}))}},{key:"Lo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Bo",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.Mo()){t.next=2;break}return t.abrupt("return",e.close(0));case 2:case"end":return t.stop()}},t)}))()}},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"qo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"close",value:function(e,t){var n=this;return(0,Qt.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n.Uo(),n.qo(),n.No.cancel(),n.Do++,4!==e?n.No.reset():t&&t.code===ku.RESOURCE_EXHAUSTED?(du(t.toString()),du("Using maximum backoff delay to prevent overloading the backend."),n.No.Ao()):t&&t.code===ku.UNAUTHENTICATED&&3!==n.state&&(n.authCredentialsProvider.invalidateToken(),n.appCheckCredentialsProvider.invalidateToken()),null!==n.stream&&(n.Ko(),n.stream.close(),n.stream=null),n.state=e,r.next=9,n.listener.eo(t);case 9:case"end":return r.stop()}},r)}))()}},{key:"Ko",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(function(t){var i=r(t,2),a=i[0],o=i[1];e.Do===n&&e.Qo(a,o)},function(n){t(function(){var t=new bu(ku.UNKNOWN,"Fetching auth token failed: "+n.message);return e.jo(t)})})}},{key:"Qo",value:function(e,t){var n=this,r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(function(){r(function(){return n.state=2,n.xo=n.Yn.enqueueAfterDelay(n.vo,1e4,function(){return n.Mo()&&(n.state=3),Promise.resolve()}),n.listener.Xr()})}),this.stream.eo(function(e){r(function(){return n.jo(e)})}),this.stream.onMessage(function(e){r(function(){return n.onMessage(e)})})}},{key:"Oo",value:function(){var e=this;this.state=5,this.No.Ro((0,Qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}},t)})))}},{key:"jo",value:function(e){return fu("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Go",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget(function(){return t.Do===e?n():(fu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}}}]),e}(),mv=function(e){g(n,e);var t=m(n);function n(e,r,i,a,o,s){var u;return v(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).M=o,u}return p(n,[{key:"Wo",value:function(e,t){return this.So.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.No.reset();var t=function(e,t){var n;if("targetChange"in t){var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:gu()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(mu(void 0===t||"string"==typeof t),Gu.fromBase64String(t||"")):(mu(void 0===t||t instanceof Uint8Array),Gu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?ku.UNKNOWN:hh(e.code);return new bu(t,e.message||"")}(o);n=new Eh(r,i,a,s||null)}else if("documentChange"in t){var u=t.documentChange,c=jh(e,u.document.name),l=Uh(u.document.updateTime),h=new Ec({mapValue:{fields:u.document.fields}}),f=Ac.newFoundDocument(c,l,h);n=new Th(u.targetIds||[],u.removedTargetIds||[],f.key,f)}else if("documentDelete"in t){var d=t.documentDelete,p=jh(e,d.document),v=d.readTime?Uh(d.readTime):Zu.min(),g=Ac.newNoDocument(p,v);n=new Th([],d.removedTargetIds||[],g.key,g)}else if("documentRemove"in t){var m=t.documentRemove,y=jh(e,m.document);n=new Th([],m.removedTargetIds||[],y,null)}else{if(!("filter"in t))return gu();var k=t.filter,b=new ch(k.count||0);n=new Ih(k.targetId,b)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Zu.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Zu.min():t.readTime?Uh(t.readTime):Zu.min()}(e);return this.listener.zo(t,n)}},{key:"Ho",value:function(e){var t={};t.database=zh(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=Jc(r)?{documents:Qh(e,r)}:{query:$h(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Mh(e,t.resumeToken):t.snapshotVersion.compareTo(Zu.min())>0&&(n.readTime=Lh(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return gu()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);n&&(t.labels=n),this.Lo(t)}},{key:"Jo",value:function(e){var t={};t.database=zh(this.M),t.removeTarget=e,this.Lo(t)}}]),n}(gv),yv=function(e){g(n,e);var t=m(n);function n(e,r,i,a,o,s){var u;return v(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).M=o,u.Yo=!1,u}return p(n,[{key:"Xo",get:function(){return this.Yo}},{key:"start",value:function(){this.Yo=!1,this.lastStreamToken=void 0,o(S(n.prototype),"start",this).call(this)}},{key:"Ko",value:function(){this.Yo&&this.Zo([])}},{key:"Wo",value:function(e,t){return this.So.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(mu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();var t=function(e,t){return e&&e.length>0?(mu(void 0!==t),e.map(function(e){return function(e,t){var n=Uh(e.updateTime?e.updateTime:t);return n.isEqual(Zu.min())&&(n=Uh(t)),new zl(n,e.transformResults||[])}(e,t)})):[]}(e.writeResults,e.commitTime),n=Uh(e.commitTime);return this.listener.tu(n,t)}return mu(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}},{key:"nu",value:function(){var e={};e.database=zh(this.M),this.Lo(e)}},{key:"Zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map(function(e){return Jh(t.M,e)})};this.Lo(n)}}]),n}(gv),kv=function(e){g(n,e);var t=m(n);function n(e,r,i,a){var o;return v(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.So=i,o.M=a,o.su=!1,o}return p(n,[{key:"iu",value:function(){if(this.su)throw new bu(ku.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var i=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(function(a){var o=r(a,2),s=o[0],u=o[1];return i.So.co(e,t,n,s,u)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===ku.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new bu(ku.UNKNOWN,e.toString())})}},{key:"_o",value:function(e,t,n){var i=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(function(a){var o=r(a,2),s=o[0],u=o[1];return i.So._o(e,t,n,s,u)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===ku.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new bu(ku.UNKNOWN,e.toString())})}},{key:"terminate",value:function(){this.su=!0}}]),n}(function(){return p(function e(){v(this,e)})}()),bv=function(){function e(t,n){v(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}return p(e,[{key:"au",value:function(){var e=this;0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.ou=null,e.hu("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()}))}},{key:"lu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"hu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.uu?(du(t),this.uu=!1):fu("OnlineStateTracker",t)}},{key:"fu",value:function(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}]),e}(),wv=p(function e(t,n,r,i,a){v(this,e);var o=this;this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr(function(e){r.enqueueAndForget((0,Qt.Z)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Pv(o),!e.t0){e.next=5;break}return fu("RemoteStore","Restarting streams for network reachability change."),e.next=5,(t=(0,Qt.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=yu(t)).wu.add(4),e.next=4,Sv(n);case 4:return n.yu.set("Unknown"),n.wu.delete(4),e.next=8,_v(n);case 8:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})(o);case 5:case"end":return e.stop()}},e)})))}),this.yu=new bv(r,i)});function _v(e){return xv.apply(this,arguments)}function xv(){return(xv=(0,Qt.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pv(t)){e.next=18;break}n=l(t.mu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[2,12,15,18]])}))).apply(this,arguments)}function Sv(e){return Tv.apply(this,arguments)}function Tv(){return(Tv=(0,Qt.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=l(t.mu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[1,11,14,17]])}))).apply(this,arguments)}function Iv(e,t){var n=yu(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),Dv(n)?Rv(n):sg(n).Mo()&&Cv(n,t))}function Ev(e,t){var n=yu(e),r=sg(n);n._u.delete(t),r.Mo()&&Av(n,t),0===n._u.size&&(r.Mo()?r.$o():Pv(n)&&n.yu.set("Unknown"))}function Cv(e,t){e.pu.Z(t.targetId),sg(e).Ho(t)}function Av(e,t){e.pu.Z(t),sg(e).Jo(t)}function Rv(e){e.pu=new Ah({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e._u.get(t)||null}}),sg(e).start(),e.yu.au()}function Dv(e){return Pv(e)&&!sg(e).ko()&&e._u.size>0}function Pv(e){return 0===yu(e).wu.size}function Ov(e){e.pu=void 0}function Nv(e){return Lv.apply(this,arguments)}function Lv(){return(Lv=(0,Qt.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t._u.forEach(function(e,n){Cv(t,e)});case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Mv(e,t){return Zv.apply(this,arguments)}function Zv(){return(Zv=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Ov(t),Dv(t)?(t.yu.lu(n),Rv(t)):t.yu.set("Unknown");case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Uv(e,t,n){return Fv.apply(this,arguments)}function Fv(){return(Fv=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.yu.set("Online"),!(n instanceof Eh&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,(a=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=l(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t._u.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t._u.delete(o),t.pu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}},e,null,[[2,16,19,22]])})),function(e,t){return a.apply(this,arguments)})(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),fu("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,qv(t,e.t0);case 11:e.next=29;break;case 13:if(n instanceof Th?t.pu.ut(n):n instanceof Ih?t.pu._t(n):t.pu.ht(n),r.isEqual(Zu.min())){e.next=29;break}return e.prev=14,e.next=17,Ip(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.pu.yt(t);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(function(t){var n=e._u.get(t);if(n){e._u.set(t,n.withResumeToken(Gu.EMPTY_BYTE_STRING,n.snapshotVersion)),Av(e,t);var r=new Xf(n.target,t,1,n.sequenceNumber);Cv(e,r)}}),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 22:e.next=29;break;case 24:return e.prev=24,e.t2=e.catch(14),fu("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,qv(t,e.t2);case 29:case"end":return e.stop()}},e,null,[[1,6],[14,24]])}))).apply(this,arguments)}function qv(e,t,n){return Vv.apply(this,arguments)}function Vv(){return(Vv=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Bf(n)){e.next=2;break}throw n;case 2:return t.wu.add(1),e.next=5,Sv(t);case 5:t.yu.set("Offline"),r||(r=function(){return Ip(t.localStore)}),t.asyncQueue.enqueueRetryable((0,Qt.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return fu("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.wu.delete(1),e.next=6,_v(t);case 6:case"end":return e.stop()}},e)})));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function jv(e,t){return t().catch(function(n){return qv(e,n,t)})}function Bv(e){return Hv.apply(this,arguments)}function Hv(){return(Hv=(0,Qt.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=yu(t),r=ug(n),i=n.du.length>0?n.du[n.du.length-1].batchId:-1;case 2:if(!zv(n)){e.next=19;break}return e.prev=3,e.next=6,Ap(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.du.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,Gv(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,qv(n,e.t0);case 17:e.next=2;break;case 19:Kv(n)&&Wv(n);case 20:case"end":return e.stop()}},e,null,[[3,13]])}))).apply(this,arguments)}function zv(e){return Pv(e)&&e.du.length<10}function Gv(e,t){e.du.push(t);var n=ug(e);n.Mo()&&n.Xo&&n.Zo(t.mutations)}function Kv(e){return Pv(e)&&!ug(e).ko()&&e.du.length>0}function Wv(e){ug(e).start()}function Jv(e){return Yv.apply(this,arguments)}function Yv(){return(Yv=(0,Qt.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ug(t).nu();case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qv(e){return $v.apply(this,arguments)}function $v(){return($v=(0,Qt.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=ug(t),r=l(t.du);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Zo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xv(e,t,n){return eg.apply(this,arguments)}function eg(){return(eg=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.du.shift(),a=Qf.from(i,n,r),e.next=3,jv(t,function(){return t.remoteSyncer.applySuccessfulWrite(a)});case 3:return e.next=5,Bv(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tg(e,t){return ng.apply(this,arguments)}function ng(){return(ng=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&ug(t).Xo,!e.t0){e.next=4;break}return e.next=4,(r=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!lh(i=n.code)||i===ku.ABORTED){e.next=7;break}return r=t.du.shift(),ug(t).Fo(),e.next=5,jv(t,function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)});case 5:return e.next=7,Bv(t);case 7:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)})(t,n);case 4:Kv(t)&&Wv(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rg(e,t){return ig.apply(this,arguments)}function ig(){return(ig=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=yu(t)).asyncQueue.verifyOperationInProgress(),fu("RemoteStore","RemoteStore received new credentials"),i=Pv(r),r.wu.add(3),e.next=6,Sv(r);case 6:return i&&r.yu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.wu.delete(3),e.next=12,_v(r);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ag(e,t){return og.apply(this,arguments)}function og(){return(og=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yu(t),!n){e.next=7;break}return r.wu.delete(2),e.next=5,_v(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.wu.add(2),e.next=12,Sv(r);case 12:r.yu.set("Unknown");case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function sg(e){return e.Iu||(e.Iu=function(e,t,n){var r=yu(e);return r.iu(),new mv(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Nv.bind(null,e),eo:Mv.bind(null,e),zo:Uv.bind(null,e)}),e.mu.push((t=(0,Qt.Z)(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Iu.Fo(),Dv(e)?Rv(e):e.yu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Iu.stop();case 6:Ov(e);case 7:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}))),e.Iu;var t}function ug(e){return e.Tu||(e.Tu=function(e,t,n){var r=yu(e);return r.iu(),new yv(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Jv.bind(null,e),eo:tg.bind(null,e),eu:Qv.bind(null,e),tu:Xv.bind(null,e)}),e.mu.push((t=(0,Qt.Z)(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Tu.Fo(),t.next=4,Bv(e);case 4:t.next=9;break;case 6:return t.next=8,e.Tu.stop();case 8:e.du.length>0&&(fu("RemoteStore","Stopping write stream with ".concat(e.du.length," pending writes")),e.du=[]);case 9:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}))),e.Tu;var t}var cg=function(){function e(t,n,r,i,a){v(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new wu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return p(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new bu(ku.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)})}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function lg(e,t){if(du("AsyncQueue","".concat(t,": ").concat(e)),Bf(e))return new bu(ku.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var hg=function(){function e(t){v(this,e),this.comparator=t?function(e,n){return t(e,n)||ac.comparator(e.key,n.key)}:function(e,t){return ac.comparator(e.key,t.key)},this.keyedMap=gh(),this.sortedSet=new Fc(this.comparator)}return p(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),fg=function(){function e(){v(this,e),this.Eu=new Fc(ac.comparator)}return p(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):gu():this.Eu=this.Eu.insert(t,e)}},{key:"Au",value:function(){var e=[];return this.Eu.inorderTraversal(function(t,n){e.push(n)}),e}}]),e}(),dg=function(){function e(t,n,r,i,a,o,s,u){v(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return p(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_l(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach(function(e){a.push({type:0,doc:e})}),new e(t,n,hg.emptySet(n),a,r,i,!0,!1)}}]),e}(),pg=p(function e(){v(this,e),this.Ru=void 0,this.listeners=[]}),vg=p(function e(){v(this,e),this.queries=new fh(function(e){return xl(e)},_l),this.onlineState="Unknown",this.bu=new Set});function gg(e,t){return mg.apply(this,arguments)}function mg(){return(mg=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yu(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new pg),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Ru=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=lg(e.t0,"Initialization of query '".concat(Sl(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Pu(r.onlineState),o.Ru&&n.Vu(o.Ru)&&_g(r);case 14:case"end":return e.stop()}},e,null,[[3,9]])}))).apply(this,arguments)}function yg(e,t){return kg.apply(this,arguments)}function kg(){return(kg=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yu(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function bg(e,t){var n,r=yu(e),i=!1,a=l(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=r.queries.get(o.query);if(s){var u,c=l(s.listeners);try{for(c.s();!(u=c.n()).done;){u.value.Vu(o)&&(i=!0)}}catch(h){c.e(h)}finally{c.f()}s.Ru=o}}}catch(h){a.e(h)}finally{a.f()}i&&_g(r)}function wg(e,t,n){var r=yu(e),i=r.queries.get(t);if(i){var a,o=l(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function _g(e){e.bu.forEach(function(e){e.next()})}var xg=function(){function e(t,n,r){v(this,e),this.query=t,this.vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}return p(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=l(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new dg(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),a=!0):this.xu(e,this.onlineState)&&(this.Nu(e),a=!0),this.Du=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}},{key:"xu",value:function(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}},{key:"Cu",value:function(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}},{key:"Nu",value:function(e){e=dg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}]),e}(),Sg=function(){function e(t,n){v(this,e),this.payload=t,this.byteLength=n}return p(e,[{key:"Mu",value:function(){return"metadata"in this.payload}}]),e}(),Tg=function(){function e(t){v(this,e),this.M=t}return p(e,[{key:"wi",value:function(e){return jh(this.M,e)}},{key:"mi",value:function(e){return e.metadata.exists?Wh(this.M,e.document,!1):Ac.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}},{key:"gi",value:function(e){return Uh(e)}}]),e}(),Ig=function(){function e(t,n,r){v(this,e),this.Ou=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Eg(t)}return p(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=ju.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new Tg(this.M),i=l(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.wi(a.metadata.name),u=l(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,h=(n.get(c)||bh()).add(s);n.set(c,h)}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(e,t,n,r){return Zp.apply(this,arguments)}(e.localStore,new Tg(e.M),e.documents,e.Ou.id);case 2:n=t.sent,r=e.$u(e.documents),i=l(e.queries),t.prev=5,i.s();case 7:if((a=i.n()).done){t.next=13;break}return o=a.value,t.next=11,Up(e.localStore,o,r.get(o.name));case 11:t.next=7;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),i.e(t.t0);case 18:return t.prev=18,i.f(),t.finish(18);case 21:return t.abrupt("return",(e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:n}));case 22:case"end":return t.stop()}},t,null,[[5,15,18,21]])}))()}}]),e}();function Eg(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Cg=p(function e(t){v(this,e),this.key=t}),Ag=p(function e(t){v(this,e),this.key=t}),Rg=function(){function e(t,n){v(this,e),this.query=t,this.Uu=n,this.qu=null,this.current=!1,this.Ku=bh(),this.mutatedKeys=bh(),this.Gu=El(t),this.Qu=new hg(this.Gu)}return p(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new fg,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(function(e,t){var l=i.get(e),h=Tl(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Hu(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.Gu(h,u)>0||c&&n.Gu(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,ii:s,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Au();a.sort(function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gu()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)}),this.Ju(n);var o=t?this.Yu():[],s=0===this.Ku.size&&this.current?1:0,u=s!==this.qu;return this.qu=s,0!==a.length||u?{snapshot:new dg(this.query,e.Qu,i,a,e.mutatedKeys,0===s,u,!1),Xu:o}:{Xu:o}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new fg,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t.Uu=t.Uu.add(e)}),e.modifiedDocuments.forEach(function(e){}),e.removedDocuments.forEach(function(e){return t.Uu=t.Uu.delete(e)}),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=bh(),this.Qu.forEach(function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))});var n=[];return t.forEach(function(t){e.Ku.has(t)||n.push(new Ag(t))}),this.Ku.forEach(function(e){t.has(e)||n.push(new Cg(e))}),n}},{key:"ta",value:function(e){this.Uu=e._i,this.Ku=bh();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ea",value:function(){return dg.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}]),e}(),Dg=p(function e(t,n,r){v(this,e),this.query=t,this.targetId=n,this.view=r}),Pg=p(function e(t){v(this,e),this.key=t,this.na=!1}),Og=function(){function e(t,n,r,i,a,o){v(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sa={},this.ia=new fh(function(e){return xl(e)},_l),this.ra=new Map,this.oa=new Set,this.ua=new Fc(ac.comparator),this.aa=new Map,this.ca=new jp,this.ha={},this.la=new Map,this.fa=Hd.yn(),this.onlineState="Unknown",this.da=void 0}return p(e,[{key:"isPrimaryClient",get:function(){return!0===this.da}}]),e}();function Ng(e,t){return Lg.apply(this,arguments)}function Lg(){return(Lg=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Sm(t),!(o=r.ia.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ea(),e.next=15;break;case 6:return e.next=8,Rp(r.localStore,bl(n));case 8:return s=e.sent,r.isPrimaryClient&&Iv(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,Mg(r,n,i,"current"===u);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Mg(e,t,n,r){return Zg.apply(this,arguments)}function Zg(){return(Zg=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,s,u,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t._a=function(e,n,r){return(i=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.ii,!e.t0){e.next=6;break}return e.next=5,Op(t.localStore,n.query,!1).then(function(e){var t=e.documents;return n.view.Wu(t,a)});case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(tm(t,n.targetId,s.Xu),s.snapshot));case 8:case"end":return e.stop()}},e)})),function(e,t,n,r){return i.apply(this,arguments)})(t,e,n,r);var i},e.next=3,Op(t.localStore,n,!0);case 3:return a=e.sent,o=new Rg(n,a._i),s=o.Wu(a.documents),u=Sh.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),tm(t,r,c.Xu),l=new Dg(n,r,o),e.abrupt("return",(t.ia.set(n,l),t.ra.has(r)?t.ra.get(r).push(n):t.ra.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ug(e,t){return Fg.apply(this,arguments)}function Fg(){return(Fg=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yu(t),i=r.ia.get(n),!((a=r.ra.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ra.set(i.targetId,a.filter(function(e){return!_l(e,n)})),void r.ia.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Dp(r.localStore,i.targetId,!1).then(function(){r.sharedClientState.clearQueryState(i.targetId),Ev(r.remoteStore,i.targetId),Xg(r,i.targetId)}).catch(Jd);case 9:e.next=14;break;case 11:return Xg(r,i.targetId),e.next=14,Dp(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qg(){return(qg=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Tm(t),e.prev=1,e.next=4,function(e,t){var n,r=yu(e),i=Mu.now(),a=t.reduce(function(e,t){return e.add(t.key)},bh());return r.persistence.runTransaction("Locally write mutations","readwrite",function(e){return r.fi.Ks(e,a).next(function(a){n=a;var o,s=[],u=l(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,h=Ql(c,n.get(c.key));null!=h&&s.push(new th(c.key,h,Cc(h.value.mapValue),Gl.exists(!0)))}}catch(f){u.e(f)}finally{u.f()}return r.Bs.addMutationBatch(e,i,s,t)})}).then(function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}})}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ha[e.currentUser.toKey()];r||(r=new Fc(Ou)),r=r.insert(t,n),e.ha[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,im(i,a.changes);case 9:return e.next=11,Bv(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=lg(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}},e,null,[[1,13]])}))).apply(this,arguments)}function Vg(e,t){return jg.apply(this,arguments)}function jg(){return(jg=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=yu(t),e.prev=1,e.next=4,Ep(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach(function(e,t){var n=r.aa.get(t);n&&(mu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.na=!0:e.modifiedDocuments.size>0?mu(n.na):e.removedDocuments.size>0&&(mu(n.na),n.na=!1))}),e.next=8,im(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Jd(e.t0);case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function Bg(e,t,n){var r=yu(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ia.forEach(function(e,n){var r=n.view.Pu(t);r.snapshot&&i.push(r.snapshot)}),function(e,t){var n=yu(e);n.onlineState=t;var r=!1;n.queries.forEach(function(e,n){var i,a=l(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Pu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}}),r&&_g(n)}(r.eventManager,t),i.length&&r.sa.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Hg(e,t,n){return zg.apply(this,arguments)}function zg(){return(zg=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((i=yu(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.aa.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new Fc(ac.comparator)).insert(o,Ac.newNoDocument(o,Zu.min())),u=bh().add(o),c=new xh(Zu.min(),new Map,new jc(Ou),s,u),e.next=9,Vg(i,c);case 9:i.ua=i.ua.remove(o),i.aa.delete(n),rm(i),e.next=16;break;case 14:return e.next=16,Dp(i.localStore,n,!1).then(function(){return Xg(i,n,r)}).catch(Jd);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Gg(e,t){return Kg.apply(this,arguments)}function Kg(){return(Kg=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=yu(t),i=n.batch.batchId,e.prev=1,e.next=4,Tp(r.localStore,n);case 4:return a=e.sent,$g(r,i,null),Qg(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,im(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Jd(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function Wg(e,t,n){return Jg.apply(this,arguments)}function Jg(){return(Jg=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=yu(t),e.prev=1,e.next=4,function(e,t){var n=yu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var r;return n.Bs.lookupMutationBatch(e,t).next(function(t){return mu(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)}).next(function(){return n.Bs.performConsistencyCheck(e)}).next(function(){return n.fi.Ks(e,r)})})}(i.localStore,n);case 4:return a=e.sent,$g(i,n,r),Qg(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,im(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Jd(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function Yg(){return(Yg=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Pv((r=yu(t)).remoteStore)||fu("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=yu(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)})}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.la.get(i)||[]).push(n),r.la.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=lg(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}},e,null,[[2,12]])}))).apply(this,arguments)}function Qg(e,t){(e.la.get(t)||[]).forEach(function(e){e.resolve()}),e.la.delete(t)}function $g(e,t,n){var r=yu(e),i=r.ha[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ha[r.currentUser.toKey()]=i}}function Xg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=l(e.ra.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ia.delete(a),n&&e.sa.wa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ra.delete(t),e.isPrimaryClient&&e.ca.vi(t).forEach(function(t){e.ca.containsKey(t)||em(e,t)})}function em(e,t){e.oa.delete(t.path.canonicalString());var n=e.ua.get(t);null!==n&&(Ev(e.remoteStore,n),e.ua=e.ua.remove(t),e.aa.delete(n),rm(e))}function tm(e,t,n){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Cg?(e.ca.addReference(a.key,t),nm(e,a)):a instanceof Ag?(fu("SyncEngine","Document no longer in limbo: "+a.key),e.ca.removeReference(a.key,t),e.ca.containsKey(a.key)||em(e,a.key)):gu()}}catch(o){i.e(o)}finally{i.f()}}function nm(e,t){var n=t.key,r=n.path.canonicalString();e.ua.get(n)||e.oa.has(r)||(fu("SyncEngine","New document in limbo: "+n),e.oa.add(r),rm(e))}function rm(e){for(;e.oa.size>0&&e.ua.size<e.maxConcurrentLimboResolutions;){var t=e.oa.values().next().value;e.oa.delete(t);var n=new ac(ju.fromString(t)),r=e.fa.next();e.aa.set(r,new Pg(n)),e.ua=e.ua.insert(n,r),Iv(e.remoteStore,new Xf(bl(vl(n.path)),r,2,Ru.A))}}function im(e,t,n){return am.apply(this,arguments)}function am(){return(am=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=yu(t),a=[],o=[],s=[],e.t0=i.ia.isEmpty(),e.t0){e.next=9;break}return i.ia.forEach(function(e,t){s.push(i._a(t,n,r).then(function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=kp.Ys(t.targetId,e);o.push(n)}}))}),e.next=6,Promise.all(s);case 6:return i.sa.zo(a),e.next=9,(u=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=yu(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(e){return Uf.forEach(n,function(t){return Uf.forEach(t.Hs,function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)}).next(function(){return Uf.forEach(t.Js,function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)})})})});case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Bf(e.t0)){e.next=10;break}throw e.t0;case 10:fu("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=l(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.ui.get(s),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),r.ui=r.ui.insert(s,c))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}},e,null,[[1,6]])})),function(e,t){return u.apply(this,arguments)})(i.localStore,o);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function om(e,t){return sm.apply(this,arguments)}function sm(){return(sm=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=yu(t)).currentUser.isEqual(n)){e.next=11;break}return fu("SyncEngine","User change. New user:",n.toKey()),e.next=5,xp(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.la.forEach(function(e){e.forEach(function(e){e.reject(new bu(ku.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.la.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,im(r,i.di);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function um(e,t){var n=yu(e),r=n.aa.get(t);if(r&&r.na)return bh().add(r.key);var i=bh(),a=n.ra.get(t);if(!a)return i;var o,s=l(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.ia.get(u);i=i.unionWith(c.view.ju)}}catch(h){s.e(h)}finally{s.f()}return i}function cm(e,t){return lm.apply(this,arguments)}function lm(){return(lm=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=yu(t),e.next=3,Op(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ta(i),e.abrupt("return",(r.isPrimaryClient&&tm(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function hm(e,t){return fm.apply(this,arguments)}function fm(){return(fm=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=yu(t),e.abrupt("return",Lp(r.localStore,n).then(function(e){return im(r,e)}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function dm(e,t,n,r){return pm.apply(this,arguments)}function pm(){return(pm=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=yu(t),e.next=3,function(e,t){var n=yu(e),r=yu(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return r.fn(e,t).next(function(t){return t?n.fi.Ks(e,t):Uf.resolve(null)})})}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Bv(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?($g(a,n,i||null),Qg(a,n),function(e,t){yu(yu(e).Bs)._n(t)}(a.localStore,n)):gu();case 11:return e.next=13,im(a,o);case 13:e.next=16;break;case 15:fu("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function vm(){return(vm=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,u,c,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Sm(r=yu(t)),Tm(r),!0!==n||!0===r.da){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,gm(r,i.toArray());case 5:return a=e.sent,r.da=!0,e.next=9,ag(r.remoteStore,!0);case 9:o=l(a);try{for(o.s();!(s=o.n()).done;)u=s.value,Iv(r.remoteStore,u)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.da){e.next=25;break}return c=[],h=Promise.resolve(),r.ra.forEach(function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):h=h.then(function(){return Xg(r,t),Dp(r.localStore,t,!0)}),Ev(r.remoteStore,t)}),e.next=19,h;case 19:return e.next=21,gm(r,c);case 21:return function(e){var t=yu(e);t.aa.forEach(function(e,n){Ev(t.remoteStore,n)}),t.ca.Si(),t.aa=new Map,t.ua=new Fc(ac.comparator)}(r),r.da=!1,e.next=25,ag(r.remoteStore,!1);case 25:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gm(e,t,n){return mm.apply(this,arguments)}function mm(){return(mm=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s,u,c,h,f,d,p,v,g,m,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=yu(t),a=[],o=[],s=l(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,h=void 0,!(f=i.ra.get(c))||0===f.length){e.next=34;break}return e.next=11,Rp(i.localStore,bl(f[0]));case 11:h=e.sent,d=l(f),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,g=i.ia.get(v),e.next=20,cm(i,g);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Np(i.localStore,c);case 36:return y=e.sent,e.next=39,Rp(i.localStore,y);case 39:return h=e.sent,e.next=42,Mg(i,ym(y),c,!1);case 42:a.push(h);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.sa.zo(o),a));case 54:case"end":return e.stop()}},e,null,[[2,47,50,53],[13,26,29,32]])}))).apply(this,arguments)}function ym(e){return pl(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function km(e){var t=yu(e);return yu(yu(t.localStore).persistence).Fs()}function bm(e,t,n,r){return wm.apply(this,arguments)}function wm(){return(wm=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=yu(t)).da){e.next=3;break}return e.abrupt("return",void fu("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ra.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Lp(a.localStore,Il(o[0]));case 10:return s=e.sent,u=xh.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,im(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,Dp(a.localStore,n,!0);case 17:return Xg(a,n,i),e.abrupt("break",20);case 19:gu();case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _m(e,t,n){return xm.apply(this,arguments)}function xm(){return(xm=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s,u,c,h,f,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Sm(t)).da){e.next=45;break}a=l(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.ra.has(s)){e.next=10;break}return fu("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,Np(i.localStore,s);case 12:return u=e.sent,e.next=15,Rp(i.localStore,u);case 15:return c=e.sent,e.next=18,Mg(i,ym(u),c.targetId,!1);case 18:Iv(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:h=l(r),e.prev=30,d=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ra.has(t),!e.t0){e.next=5;break}return e.next=5,Dp(i.localStore,t,!1).then(function(){Ev(i.remoteStore,t),Xg(i,t)}).catch(Jd);case 5:case"end":return e.stop()}},e)}),h.s();case 33:if((f=h.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),h.e(e.t2);case 42:return e.prev=42,h.f(),e.finish(42);case 45:case"end":return e.stop()}},e,null,[[3,23,26,29],[30,39,42,45]])}))).apply(this,arguments)}function Sm(e){var t=yu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Vg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=um.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Hg.bind(null,t),t.sa.zo=bg.bind(null,t.eventManager),t.sa.wa=wg.bind(null,t.eventManager),t}function Tm(e){var t=yu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Gg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Wg.bind(null,t),t}var Im=function(){function e(){v(this,e),this.synchronizeTabs=!1}return p(e,[{key:"initialize",value:function(e){var t=this;return(0,Qt.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.M=pv(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),n.next=5,t.persistence.start();case 5:t.gcScheduler=t.pa(e),t.localStore=t.Ia(e);case 7:case"end":return n.stop()}},n)}))()}},{key:"pa",value:function(e){return null}},{key:"Ia",value:function(e){return _p(this.persistence,new bp,e.initialUser,this.M)}},{key:"ya",value:function(e){return new Wp(Yp.Yi,this.M)}},{key:"ga",value:function(e){return new ov}},{key:"terminate",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.gcScheduler&&e.gcScheduler.stop(),t.next=3,e.sharedClientState.shutdown();case 3:return t.next=5,e.persistence.shutdown();case 5:case"end":return t.stop()}},t)}))()}}]),e}(),Em=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).Ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return p(n,[{key:"initialize",value:function(e){var t=this,r=this;return(0,Qt.Z)(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,o(S(n.prototype),"initialize",t).call(r,e);case 2:return i.next=4,r.Ta.initialize(r,e);case 4:return i.next=6,Tm(r.Ta.syncEngine);case 6:return i.next=8,Bv(r.Ta.remoteStore);case 8:return i.next=10,r.persistence.Ts(function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()});case 10:case"end":return i.stop()}},i)}))()}},{key:"Ia",value:function(e){return _p(this.persistence,new bp,e.initialUser,this.M)}},{key:"pa",value:function(e){return new Xd(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}},{key:"ya",value:function(e){var t=mp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Md.withCacheSize(this.cacheSizeBytes):Md.DEFAULT;return new pp(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,fv(),dv(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"ga",value:function(e){return new ov}}]),n}(Im),Cm=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r,!1)).Ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return p(n,[{key:"initialize",value:function(e){var t=this,r=this;return(0,Qt.Z)(regeneratorRuntime.mark(function i(){var a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,o(S(n.prototype),"initialize",t).call(r,e);case 2:if(a=r.Ta.syncEngine,i.t0=r.sharedClientState instanceof av,!i.t0){i.next=8;break}return r.sharedClientState.syncEngine={$r:dm.bind(null,a),Br:bm.bind(null,a),Lr:_m.bind(null,a),Fs:km.bind(null,a),Fr:hm.bind(null,a)},i.next=8,r.sharedClientState.start();case 8:return i.next=10,r.persistence.Ts(function(){var e=(0,Qt.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e,t){return vm.apply(this,arguments)}(r.Ta.syncEngine,t);case 2:r.gcScheduler&&(t&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):t||r.gcScheduler.stop());case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return i.stop()}},i)}))()}},{key:"ga",value:function(e){var t=fv();if(!av.vt(t))throw new bu(ku.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=mp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new av(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Em),Am=function(){function e(){v(this,e)}return p(e,[{key:"initialize",value:function(e,t){var n=this;return(0,Qt.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=n.localStore,r.t0){r.next=12;break}return n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=function(e){return Bg(n.syncEngine,e,1)},n.remoteStore.remoteSyncer.handleCredentialChange=om.bind(null,n.syncEngine),r.next=12,ag(n.remoteStore,n.syncEngine.isPrimaryClient);case 12:case"end":return r.stop()}},r)}))()}},{key:"createEventManager",value:function(e){return new vg}},{key:"createDatastore",value:function(e){var t=pv(e.databaseInfo.databaseId),n=new hv(e.databaseInfo);return function(e,t,n,r){return new kv(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Bg(o.syncEngine,e,0)},a=uv.vt()?new uv:new sv,new wv(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new Og(e,t,n,r,i,a);return o&&(s.da=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return(e=(0,Qt.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=yu(t),fu("RemoteStore","RemoteStore shutting down."),n.wu.add(5),e.next=5,Sv(n);case 5:n.gu.shutdown(),n.yu.set("Unknown");case 7:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}]),e}();function Rm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return(0,Qt.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}},r)}))()},cancel:function(){return(0,Qt.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Dm=function(){function e(t){v(this,e),this.observer=t,this.muted=!1}return p(e,[{key:"next",value:function(e){this.observer.next&&this.Ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Aa",value:function(){this.muted=!0}},{key:"Ea",value:function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)}}]),e}(),Pm=function(){function e(t,n){var r=this;v(this,e),this.Ra=t,this.M=n,this.metadata=new wu,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(function(e){e&&e.Mu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))},function(e){return r.metadata.reject(e)})}return p(e,[{key:"close",value:function(){return this.Ra.cancel()}},{key:"getMetadata",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.metadata.promise);case 1:case"end":return t.stop()}},t)}))()}},{key:"ma",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMetadata();case 2:return t.abrupt("return",e.Pa());case 3:case"end":return t.stop()}},t)}))()}},{key:"Pa",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Va();case 2:if(null!==(n=t.sent)){t.next=5;break}return t.abrupt("return",null);case 5:return r=e.ba.decode(n),i=Number(r),isNaN(i)&&e.va("length string (".concat(r,") is not valid number")),t.next=9,e.Sa(i);case 9:return a=t.sent,t.abrupt("return",new Sg(JSON.parse(a),n.length+i));case 11:case"end":return t.stop()}},t)}))()}},{key:"Da",value:function(){return this.buffer.findIndex(function(e){return e==="{".charCodeAt(0)})}},{key:"Va",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.Da()<0,!t.t0){t.next=5;break}return t.next=4,e.Ca();case 4:t.t0=!t.sent;case 5:if(!t.t0){t.next=9;break}case 7:t.next=0;break;case 9:if(0!==e.buffer.length){t.next=11;break}return t.abrupt("return",null);case 11:return(n=e.Da())<0&&e.va("Reached the end of bundle when a length string is expected."),r=e.buffer.slice(0,n),t.abrupt("return",(e.buffer=e.buffer.slice(n),r));case 15:case"end":return t.stop()}},t)}))()}},{key:"Sa",value:function(e){var t=this;return(0,Qt.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t.buffer.length<e)){n.next=8;break}return n.next=3,t.Ca();case 3:if(n.t0=n.sent,!n.t0){n.next=6;break}t.va("Reached the end of bundle when more is expected.");case 6:n.next=0;break;case 8:return r=t.ba.decode(t.buffer.slice(0,e)),n.abrupt("return",(t.buffer=t.buffer.slice(e),r));case 10:case"end":return n.stop()}},n)}))()}},{key:"va",value:function(e){throw this.Ra.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ca",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Ra.read();case 2:return(n=t.sent).done||((r=new Uint8Array(e.buffer.length+n.value.length)).set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r),t.abrupt("return",n.done);case 5:case"end":return t.stop()}},t)}))()}}]),e}(),Om=function(){function e(t){v(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return p(e,[{key:"lookup",value:function(e){var t=this;return(0,Qt.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.ensureCommitNotCalled(),!(t.mutations.length>0)){n.next=2;break}throw new bu(ku.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return n.next=4,(i=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=yu(t),i=zh(r.M)+"/documents",a={documents:n.map(function(e){return Vh(r.M,e)})},e.next=5,r._o("BatchGetDocuments",i,a);case 5:return o=e.sent,s=new Map,o.forEach(function(e){var t=function(e,t){return"found"in t?function(e,t){mu(!!t.found);var n=jh(e,t.found.name),r=Uh(t.found.updateTime),i=new Ec({mapValue:{fields:t.found.fields}});return Ac.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){mu(!!t.missing),mu(!!t.readTime);var n=jh(e,t.missing),r=Uh(t.readTime);return Ac.newNoDocument(n,r)}(e,t):gu()}(r.M,e);s.set(t.key.toString(),t)}),u=[],e.abrupt("return",(n.forEach(function(e){var t=s.get(e.toString());mu(!!t),u.push(t)}),u));case 10:case"end":return e.stop()}},e)})),function(e,t){return i.apply(this,arguments)})(t.datastore,e);case 4:return r=n.sent,n.abrupt("return",(r.forEach(function(e){return t.recordVersion(e)}),r));case 6:case"end":return n.stop()}},n)}))()}},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new sh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ensureCommitNotCalled(),!e.lastWriteError){t.next=2;break}throw e.lastWriteError;case 2:return n=e.readVersions,e.mutations.forEach(function(e){n.delete(e.key.toString())}),n.forEach(function(t,n){var r=ac.fromPath(n);e.mutations.push(new uh(r,e.precondition(r)))}),t.next=7,(r=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=yu(t),i=zh(r.M)+"/documents",a={writes:n.map(function(e){return Jh(r.M,e)})},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)})(e.datastore,e.mutations);case 7:e.committed=!0;case 8:case"end":return t.stop()}},t)}))()}},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw gu();t=Zu.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new bu(ku.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Gl.updateTime(t):Gl.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Zu.min()))throw new bu(ku.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gl.updateTime(t)}return Gl.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Nm=function(){function e(t,n,r,i,a){v(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new vv(this.asyncQueue,"transaction_retry")}return p(e,[{key:"run",value:function(){this.xa-=1,this.Na()}},{key:"Na",value:function(){var e=this;this.No.Ro((0,Qt.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=new Om(e.datastore),(r=e.ka(n))&&r.then(function(t){e.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){e.deferred.resolve(t)}).catch(function(t){e.Ma(t)})})}).catch(function(t){e.Ma(t)});case 2:case"end":return t.stop()}},t)})))}},{key:"ka",value:function(e){try{var t=this.updateFunction(e);return!nc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ma",value:function(e){var t=this;this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(function(){return t.Na(),Promise.resolve()})):this.deferred.reject(e)}},{key:"Oa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!lh(t)}return!1}}]),e}(),Lm=function(){function e(t,n,r,i){var a=this;v(this,e);var o,s=this;this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=uu.UNAUTHENTICATED,this.clientId=Pu.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,(o=(0,Qt.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return fu("FirestoreClient","Received user=",t.uid),e.next=3,s.authCredentialListener(t);case 3:s.user=t;case 4:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)})),this.appCheckCredentials.start(r,function(e){return fu("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)})}return p(e,[{key:"getConfiguration",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100});case 1:case"end":return t.stop()}},t)}))()}},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new bu(ku.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new wu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Qt.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=lg(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}},n,null,[[0,14]])}))),t.promise}}]),e}();function Mm(e,t){return Zm.apply(this,arguments)}function Zm(){return(Zm=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),fu("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=(0,Qt.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,xp(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=n;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Um(e,t){return Fm.apply(this,arguments)}function Fm(){return(Fm=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,qm(t);case 3:return r=e.sent,fu("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener(function(e){return rg(n.remoteStore,e)}),t.setAppCheckTokenChangeListener(function(e,t){return rg(n.remoteStore,t)}),t.onlineComponents=n;case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qm(e){return Vm.apply(this,arguments)}function Vm(){return(Vm=(0,Qt.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return fu("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Mm(t,new Im);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function jm(e){return Bm.apply(this,arguments)}function Bm(){return(Bm=(0,Qt.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return fu("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Um(t,new Am);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Hm(e){return qm(e).then(function(e){return e.persistence})}function zm(e){return qm(e).then(function(e){return e.localStore})}function Gm(e){return jm(e).then(function(e){return e.remoteStore})}function Km(e){return jm(e).then(function(e){return e.syncEngine})}function Wm(e){return Jm.apply(this,arguments)}function Jm(){return(Jm=(0,Qt.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jm(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Ng.bind(null,n.syncEngine),r.onUnlisten=Ug.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ym(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new wu;return e.asyncQueue.enqueueAndForget((0,Qt.Z)(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Dm({next:function(a){t.enqueueAndForget(function(){return yg(e,o)});var s=a.docs.has(n);!s&&a.fromCache?i.reject(new bu(ku.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new bu(ku.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new xg(vl(n.path),a,{includeMetadataChanges:!0,ku:!0});return gg(e,o)},i.next=3,Wm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}},i)}))),r.promise}function Qm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new wu;return e.asyncQueue.enqueueAndForget((0,Qt.Z)(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Dm({next:function(n){t.enqueueAndForget(function(){return yg(e,o)}),n.fromCache&&"server"===r.source?i.reject(new bu(ku.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new xg(n,a,{includeMetadataChanges:!0,ku:!0});return gg(e,o)},i.next=3,Wm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}},i)}))),r.promise}var $m=new Map;function Xm(e,t,n){if(!n)throw new bu(ku.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function ey(e,t,n,r){if(!0===t&&!0===r)throw new bu(ku.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function ty(e){if(!ac.isDocumentKey(e))throw new bu(ku.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ny(e){if(ac.isDocumentKey(e))throw new bu(ku.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ry(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":gu()}function iy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bu(ku.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ry(e);throw new bu(ku.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function ay(e,t){if(t<=0)throw new bu(ku.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var oy=function(){function e(t){var n;if(v(this,e),void 0===t.host){if(void 0!==t.ssl)throw new bu(ku.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new bu(ku.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,ey("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return p(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),sy=function(){function e(t,n,r){v(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oy({}),this._settingsFrozen=!1,t instanceof tc?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new bu(ku.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tc(e.options.projectId)}(t))}return p(e,[{key:"app",get:function(){if(!this._app)throw new bu(ku.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new bu(ku.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oy(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new xu;switch(e.type){case"gapi":var t=e.client;return mu(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Eu(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new bu(ku.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=$m.get(e);t&&(fu("ComponentProvider","Removing Datastore"),$m.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}(),uy=function(){function e(t,n,r){v(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return p(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new ly(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),cy=function(){function e(t,n,r){v(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return p(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),ly=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e,r,vl(i)))._path=i,a.type="collection",a}return p(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new uy(this.firestore,null,new ac(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(cy);function hy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,Gt.m9)(e),Xm("collection","path",t),e instanceof sy){var a=ju.fromString.apply(ju,[t].concat(r));return ny(a),new ly(e,null,a)}if(!(e instanceof uy||e instanceof ly))throw new bu(ku.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ju.fromString.apply(ju,[t].concat(r)));return ny(o),new ly(e.firestore,null,o)}function fy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,Gt.m9)(e),1===arguments.length&&(t=Pu.R()),Xm("doc","path",t),e instanceof sy){var a=ju.fromString.apply(ju,[t].concat(r));return ty(a),new uy(e,null,new ac(a))}if(!(e instanceof uy||e instanceof ly))throw new bu(ku.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ju.fromString.apply(ju,[t].concat(r)));return ty(o),new uy(e.firestore,e instanceof ly?e.converter:null,new ac(o))}function dy(e,t){return e=(0,Gt.m9)(e),t=(0,Gt.m9)(t),(e instanceof uy||e instanceof ly)&&(t instanceof uy||t instanceof ly)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function py(e,t){return e=(0,Gt.m9)(e),t=(0,Gt.m9)(t),e instanceof cy&&t instanceof cy&&e.firestore===t.firestore&&_l(e._query,t._query)&&e.converter===t.converter}var vy=function(){function e(){var t=this;v(this,e),this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new vv(this,"async_queue_retry"),this.Qa=function(){var e=dv();e&&fu("AsyncQueue","Visibility state changed to "+e.visibilityState),t.No.Po()};var n=dv();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Qa)}return p(e,[{key:"isShuttingDown",get:function(){return this.Ba}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.ja(),this.Wa(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;var t=dv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.ja(),this.Ba)return new Promise(function(){});var n=new wu;return this.Wa(function(){return t.Ba&&t.Ka?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget(function(){return t.$a.push(e),t.za()})}},{key:"za",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e.$a.length){t.next=14;break}return t.prev=1,t.next=4,e.$a[0]();case 4:e.$a.shift(),e.No.reset(),t.next=13;break;case 8:if(t.prev=8,t.t0=t.catch(1),Bf(t.t0)){t.next=12;break}throw t.t0;case 12:fu("AsyncQueue","Operation failed with retryable error: "+t.t0);case 13:e.$a.length>0&&e.No.Ro(function(){return e.za()});case 14:case"end":return t.stop()}},t,null,[[1,8]])}))()}},{key:"Wa",value:function(e){var t=this,n=this.Fa.then(function(){return t.qa=!0,e().catch(function(e){throw t.Ua=e,t.qa=!1,du("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(function(e){return t.qa=!1,e})});return this.Fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.ja(),this.Ga.indexOf(e)>-1&&(t=0);var i=cg.createAndSchedule(this,e,t,n,function(e){return r.Ha(e)});return this.La.push(i),i}},{key:"ja",value:function(){this.Ua&&gu()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Ja",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.Fa,t.next=3,n;case 3:if(n!==e.Fa){t.next=0;break}case 4:case"end":return t.stop()}},t)}))()}},{key:"Ya",value:function(e){var t,n=l(this.La);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Xa",value:function(e){var t=this;return this.Ja().then(function(){t.La.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});var n,r=l(t.La);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Ja()})}},{key:"Za",value:function(e){this.Ga.push(e)}},{key:"Ha",value:function(e){var t=this.La.indexOf(e);this.La.splice(t,1)}}]),e}();function gy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var a=i[r];if(a in n&&"function"==typeof n[a])return!0}return!1}(e)}var my=function(){function e(){v(this,e),this._progressObserver={},this._taskCompletionResolver=new wu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return p(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),yy=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new vy,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return p(n,[{key:"_terminate",value:function(){return this._firestoreClient||by(this),this._firestoreClient.terminate()}}]),n}(sy);function ky(e){return e._firestoreClient||by(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function by(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new ec(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Lm(e._authCredentials,e._appCheckCredentials,e._queue,r)}function wy(e,t,n){var r=new wu;return e.asyncQueue.enqueue((0,Qt.Z)(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Mm(e,n);case 3:return i.next=5,Um(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===ku.FAILED_PRECONDITION||e.code===ku.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}},i,null,[[0,8]])}))).then(function(){return r.promise})}function _y(e){if(e._initialized||e._terminated)throw new bu(ku.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var xy=function(){function e(){v(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new bu(ku.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hu(n)}return p(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}(),Sy=function(){function e(t){v(this,e),this._byteString=t}return p(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Gu.fromBase64String(t))}catch(t){throw new bu(ku.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Gu.fromUint8Array(t))}}]),e}(),Ty=p(function e(t){v(this,e),this._methodName=t}),Iy=function(){function e(t,n){if(v(this,e),!isFinite(t)||t<-90||t>90)throw new bu(ku.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new bu(ku.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return p(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Ou(this._lat,e._lat)||Ou(this._long,e._long)}}]),e}(),Ey=/^__.*__$/,Cy=function(){function e(t,n,r){v(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return p(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new th(e,this.data,this.fieldMask,t,this.fieldTransforms):new eh(e,this.data,t,this.fieldTransforms)}}]),e}(),Ay=function(){function e(t,n,r){v(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return p(e,[{key:"toMutation",value:function(e,t){return new th(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Ry(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gu()}}var Dy=function(){function e(t,n,r,i,a,o){v(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return p(e,[{key:"path",get:function(){return this.settings.path}},{key:"ec",get:function(){return this.settings.ec}},{key:"nc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.rc(e),r}},{key:"oc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.tc(),r}},{key:"uc",value:function(e){return this.nc({path:void 0,ic:!0})}},{key:"ac",value:function(e){return Qy(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})}},{key:"tc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.rc(this.path.get(e))}},{key:"rc",value:function(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(Ry(this.ec)&&Ey.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}]),e}(),Py=function(){function e(t,n,r){v(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||pv(t)}return p(e,[{key:"lc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Dy({ec:e,methodName:t,hc:n,path:Hu.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function Oy(e){var t=e._freezeSettings(),n=pv(e._databaseId);return new Py(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ny(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.lc(a.merge||a.mergeFields?2:0,t,n,i);Ky("Data must be an object, but it was:",o,r);var s,u,c=zy(r,o);if(a.merge)s=new zu(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var h,f=[],d=l(a.mergeFields);try{for(d.s();!(h=d.n()).done;){var p=h.value,v=Wy(t,p,n);if(!o.contains(v))throw new bu(ku.INVALID_ARGUMENT,"Field '".concat(v,"' is specified in your field mask but missing from your input data."));$y(f,v)||f.push(v)}}catch(g){d.e(g)}finally{d.f()}s=new zu(f),u=o.fieldTransforms.filter(function(e){return s.covers(e.field)})}else s=null,u=o.fieldTransforms;return new Cy(new Ec(c),s,u)}var Ly=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ec)throw e.ac(1===e.ec?"".concat(this._methodName,"() can only appear at the top level of your update data"):"".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Ty);function My(e,t,n){return new Dy({ec:3,hc:t.settings.hc,methodName:e._methodName,ic:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var Zy=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"_toFieldTransform",value:function(e){return new Hl(e.path,new Ml)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Ty),Uy=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).fc=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=My(this,e,!0),n=this.fc.map(function(e){return Hy(e,t)}),r=new Zl(n);return new Hl(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ty),Fy=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).fc=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=My(this,e,!0),n=this.fc.map(function(e){return Hy(e,t)}),r=new Fl(n);return new Hl(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ty),qy=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).dc=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=new Vl(e.M,Dl(e.M,this.dc));return new Hl(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ty);function Vy(e,t,n,r){var i=e.lc(1,t,n);Ky("Data must be an object, but it was:",i,r);var a=[],o=Ec.empty();Fu(r,function(e,r){var s=Yy(t,e,n);r=(0,Gt.m9)(r);var u=i.oc(s);if(r instanceof Ly)a.push(s);else{var c=Hy(r,u);null!=c&&(a.push(s),o.set(s,c))}});var s=new zu(a);return new Ay(o,s,i.fieldTransforms)}function jy(e,t,n,r,i,a){var o=e.lc(1,t,n),s=[Wy(t,r,n)],u=[i];if(a.length%2!=0)throw new bu(ku.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(Wy(t,a[c])),u.push(a[c+1]);for(var l=[],h=Ec.empty(),f=s.length-1;f>=0;--f)if(!$y(l,s[f])){var d=s[f],p=u[f];p=(0,Gt.m9)(p);var v=o.oc(d);if(p instanceof Ly)l.push(d);else{var g=Hy(p,v);null!=g&&(l.push(d),h.set(d,g))}}var m=new zu(l);return new Ay(h,m,o.fieldTransforms)}function By(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Hy(n,e.lc(r?4:3,t))}function Hy(e,t){if(Gy(e=(0,Gt.m9)(e)))return Ky("Unsupported field value:",t,e),zy(e,t);if(e instanceof Ty)return function(e,t){if(!Ry(t.ec))throw t.ac("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ac("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=l(e);try{for(a.s();!(n=a.n()).done;){var o=Hy(n.value,t.uc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=(0,Gt.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Dl(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Mu.fromDate(e);return{timestampValue:Lh(t.M,n)}}if(e instanceof Mu){var r=new Mu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Lh(t.M,r)}}if(e instanceof Iy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Sy)return{bytesValue:Mh(t.M,e._byteString)};if(e instanceof uy){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ac("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Fh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ac("Unsupported field value: ".concat(ry(e)))}(e,t)}function zy(e,t){var n={};return qu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fu(e,function(e,r){var i=Hy(r,t.sc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Gy(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Mu||e instanceof Iy||e instanceof Sy||e instanceof uy||e instanceof Ty)}function Ky(e,t,n){if(!Gy(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=ry(n);throw t.ac("an object"===r?e+" a custom object":e+" "+r)}}function Wy(e,t,n){if((t=(0,Gt.m9)(t))instanceof xy)return t._internalPath;if("string"==typeof t)return Yy(e,t);throw Qy("Field path arguments must be of type string or ",e,!1,void 0,n)}var Jy=new RegExp("[~\\*/\\[\\]]");function Yy(e,t,n){if(t.search(Jy)>=0)throw Qy("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return w(xy,u(t.split(".")))._internalPath}catch(r){throw Qy("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Qy(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new bu(ku.INVALID_ARGUMENT,s+e+u)}function $y(e,t){return e.some(function(e){return e.isEqual(t)})}var Xy=function(){function e(t,n,r,i,a){v(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return p(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new uy(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new ek(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(tk("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),ek=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(){return o(S(n.prototype),"data",this).call(this)}}]),n}(Xy);function tk(e,t){return"string"==typeof t?Yy(e,t):t instanceof xy?t._internalPath:t._delegate._internalPath}var nk=function(){function e(t,n){v(this,e),this.hasPendingWrites=t,this.fromCache=n}return p(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),rk=function(e){g(n,e);var t=m(n);function n(e,r,i,a,o,s){var u;return v(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return p(n,[{key:"exists",value:function(){return o(S(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new ik(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(tk("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Xy),ik=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(S(n.prototype),"data",this).call(this,e)}}]),n}(rk),ak=function(){function e(t,n,r,i){v(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new nk(i.hasPendingWrites,i.fromCache),this.query=r}return p(e,[{key:"docs",get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach(function(r){e.call(t,new ik(n._firestore,n._userDataWriter,r.key,r,new nk(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new bu(ku.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map(function(t){return{type:"added",doc:new ik(e._firestore,e._userDataWriter,t.doc.key,t.doc,new nk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}})}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(function(e){return t||3!==e.type}).map(function(t){var n=new ik(e._firestore,e._userDataWriter,t.doc.key,t.doc,new nk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:ok(t.type),doc:n,oldIndex:i,newIndex:a}})}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function ok(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gu()}}function sk(e,t){return e instanceof rk&&t instanceof rk?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof ak&&t instanceof ak&&e._firestore===t._firestore&&py(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function uk(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new bu(ku.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ck=p(function e(){v(this,e)});function lk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var hk=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this))._c=e,a.wc=r,a.mc=i,a.type="where",a}return p(n,[{key:"_apply",value:function(e){var t=Oy(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new bu(ku.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){yk(o,a);var u,c=[],h=l(o);try{for(h.s();!(u=h.n()).done;){var f=u.value;c.push(mk(r,e,f))}}catch(p){h.e(p)}finally{h.f()}s={arrayValue:{values:c}}}else s=mk(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||yk(o,a),s=By(n,"where",o,"in"===a||"not-in"===a);var d=Xc.create(i,a,s);return function(e,t){if(t.S()){var n=ml(e);if(null!==n&&!n.isEqual(t.field))throw new bu(ku.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=gl(e);null!==r&&kk(0,t.field,r)}var i=function(e,t){var n,r=l(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(p){r.e(p)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw new bu(ku.INVALID_ARGUMENT,i===t.op?"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter."):"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,d),d}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new cy(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new dl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(ck),fk=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this))._c=e,i.gc=r,i.type="orderBy",i}return p(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new bu(ku.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new bu(ku.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new cl(t,n);return function(e,t){if(null===gl(e)){var n=ml(e);null!==n&&kk(0,n,t.field)}}(e,r),r}(e._query,this._c,this.gc);return new cy(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new dl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(ck),dk=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).type=e,a.yc=r,a.Ic=i,a}return p(n,[{key:"_apply",value:function(e){return new cy(e.firestore,e.converter,wl(e._query,this.yc,this.Ic))}}]),n}(ck),pk=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return p(n,[{key:"_apply",value:function(e){var t=gk(e,this.type,this.Tc,this.Ec);return new cy(e.firestore,e.converter,function(e,t){return new dl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(ck),vk=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return p(n,[{key:"_apply",value:function(e){var t=gk(e,this.type,this.Tc,this.Ec);return new cy(e.firestore,e.converter,function(e,t){return new dl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(ck);function gk(e,t,n,r){if(n[0]=(0,Gt.m9)(n[0]),n[0]instanceof Xy)return function(e,t,n,r,i){if(!r)throw new bu(ku.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=l(kl(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(vc(t,r.key));else{var c=r.data.field(u.field);if(Qu(c))throw new bu(ku.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new bu(ku.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(h,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){s.e(f)}finally{s.f()}return new ul(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Oy(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new bu(ku.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new bu(ku.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!yl(e)&&-1!==c.indexOf("/"))throw new bu(ku.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(ju.fromString(c));if(!ac.isDocumentKey(l))throw new bu(ku.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new ac(l);s.push(vc(t,h))}else{var f=By(n,r,c);s.push(f)}}return new ul(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function mk(e,t,n){if("string"==typeof(n=(0,Gt.m9)(n))){if(""===n)throw new bu(ku.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yl(t)&&-1!==n.indexOf("/"))throw new bu(ku.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(ju.fromString(n));if(!ac.isDocumentKey(r))throw new bu(ku.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return vc(e,new ac(r))}if(n instanceof uy)return vc(e,n._key);throw new bu(ku.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(ry(n),"."))}function yk(e,t){if(!Array.isArray(e)||0===e.length)throw new bu(ku.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new bu(ku.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function kk(e,t,n){if(!n.isEqual(t))throw new bu(ku.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var bk={maxAttempts:5},wk=function(){function e(){v(this,e)}return p(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(uc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ju(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw gu()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Fu(e.fields,function(e,i){r[e]=n.convertValue(i,t)}),r}},{key:"convertGeoPoint",value:function(e){return new Iy(Ju(e.latitude),Ju(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map(function(e){return n.convertValue(e,t)})}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=$u(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Xu(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Wu(e);return new Mu(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=ju.fromString(e);mu(cf(n));var r=new tc(n.get(1),n.get(3)),i=new ac(n.popFirst(5));return r.isEqual(t)||du("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function _k(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var xk=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new Sy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new uy(this.firestore,null,t)}}]),n}(wk),Sk=function(){function e(t,n){v(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Oy(t)}return p(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Tk(e,this._firestore),i=_k(r.converter,t,n),a=Ny(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Gl.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Tk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=(0,Gt.m9)(t))||t instanceof xy?jy(this._dataReader,"WriteBatch.update",i._key,t,n,o):Vy(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Gl.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Tk(e,this._firestore);return this._mutations=this._mutations.concat(new sh(t._key,Gl.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new bu(ku.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Tk(e,t){if((e=(0,Gt.m9)(e)).firestore!==t)throw new bu(ku.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Ik(e){e=iy(e,uy);var t=iy(e.firestore,yy);return Ym(ky(t),e._key).then(function(n){return Nk(t,e,n)})}var Ek=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new Sy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new uy(this.firestore,null,t)}}]),n}(wk);function Ck(e){e=iy(e,cy);var t=iy(e.firestore,yy),n=ky(t),r=new Ek(t);return uk(e._query),Qm(n,e._query).then(function(n){return new ak(t,r,e,n)})}function Ak(e,t,n){e=iy(e,uy);var r=iy(e.firestore,yy),i=_k(e.converter,t,n);return Ok(r,[Ny(Oy(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Gl.none())])}function Rk(e,t,n){e=iy(e,uy);for(var r=iy(e.firestore,yy),i=Oy(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return Ok(r,[("string"==typeof(t=(0,Gt.m9)(t))||t instanceof xy?jy(i,"updateDoc",e._key,t,n,o):Vy(i,"updateDoc",e._key,t)).toMutation(e._key,Gl.exists(!0))])}function Dk(e){return Ok(iy(e.firestore,yy),[new sh(e._key,Gl.none())])}function Pk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=(0,Gt.m9)(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||gy(n[u])||(s=n[u],u++);var c,l,h,f={includeMetadataChanges:s.includeMetadataChanges};if(gy(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof uy)l=iy(e.firestore,yy),h=vl(e._key.path),c={next:function(t){n[u]&&n[u](Nk(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=iy(e,cy);l=iy(p.firestore,yy),h=p._query;var v=new Ek(l);c={next:function(e){n[u]&&n[u](new ak(l,v,p,e))},error:n[u+1],complete:n[u+2]},uk(e._query)}return function(e,t,n,r){var i=new Dm(r),a=new xg(t,i,n);return e.asyncQueue.enqueueAndForget((0,Qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=gg,t.next=3,Wm(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)}))),function(){i.Aa(),e.asyncQueue.enqueueAndForget((0,Qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=yg,t.next=3,Wm(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)})))}}(ky(l),h,f,c)}function Ok(e,t){return function(e,t){var n=new wu;return e.asyncQueue.enqueueAndForget((0,Qt.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(e,t,n){return qg.apply(this,arguments)},r.next=3,Km(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(ky(e),t)}function Nk(e,t,n){var r=n.docs.get(t._key),i=new Ek(e);return new rk(e,i,t._key,r,new nk(n.hasPendingWrites,n.fromCache),t.converter)}var Lk=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r))._firestore=e,i}return p(n,[{key:"get",value:function(e){var t=this,r=Tk(e,this._firestore),i=new Ek(this._firestore);return o(S(n.prototype),"get",this).call(this,e).then(function(e){return new rk(t._firestore,i,r._key,e._document,new nk(!1,!1),r.converter)})}}]),n}(function(){function e(t,n){v(this,e),this._firestore=t,this._transaction=n,this._dataReader=Oy(t)}return p(e,[{key:"get",value:function(e){var t=this,n=Tk(e,this._firestore),r=new xk(this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return gu();var i=e[0];if(i.isFoundDocument())return new Xy(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Xy(t._firestore,r,n._key,null,n.converter);throw gu()})}},{key:"set",value:function(e,t,n){var r=Tk(e,this._firestore),i=_k(r.converter,t,n),a=Ny(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Tk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=(0,Gt.m9)(t))||t instanceof xy?jy(this._dataReader,"Transaction.update",i._key,t,n,o):Vy(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Tk(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){cu=e}(Kt.SDK_VERSION),(0,Kt._registerComponent)(new Jt.wA("firestore",function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new yy(i,new Tu(e.getProvider("auth-internal")),new Au(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a},"PUBLIC")),(0,Kt.registerVersion)("@firebase/firestore","3.4.9",e),(0,Kt.registerVersion)("@firebase/firestore","3.4.9","esm2017")}();var Mk=p(function e(t){return v(this,e),t}),Zk=new a.OlP("angularfire2.firestore-instances");function Uk(e){return function(t,n){var r=t.runOutsideAngular(function(){return e(n)});return new Mk(r)}}var Fk={provide:p(function e(){return v(this,e),(0,Mt.vb)("firestore")}),deps:[[new a.FiY,Zk]]},qk={provide:Mk,useFactory:function(e,t){var n=(0,Mt.JM)("firestore",e,t);return n&&new Mk(n)},deps:[[new a.FiY,Zk],Zt]},Vk=function(){var e=p(function e(){v(this,e),(0,Lt.KN)("angularfire",Mt.q4.full,"fst")});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[qk,Fk]}),e}();function jk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{ngModule:Vk,providers:[{provide:Zk,useFactory:Uk(e),multi:!0,deps:[a.R0b,a.zs3,Mt.HU,Ut,[new a.FiY,Yt],[new a.FiY,An]].concat(n)}]}}var Bk=(0,Mt.u3)(hy,!0),Hk=(0,Mt.u3)(Dk,!0),zk=(0,Mt.u3)(fy,!0),Gk=(0,Mt.u3)(Ik,!0),Kk=(0,Mt.u3)(Ck,!0),Wk=(0,Mt.u3)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Kt.getApp)();return(0,Kt._getProvider)(e,"firestore").getImmediate()},!0),Jk=(0,Mt.u3)(lk,!0),Yk=(0,Mt.u3)(Ak,!0),Qk=(0,Mt.u3)(Rk,!0),$k=i(4402),Xk=i(9765),eb=i(7971),tb=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this))._value=e,r}return p(n,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(e){var t=o(S(n.prototype),"_subscribe",this).call(this,e);return t&&!t.closed&&e.next(this._value),t}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new eb.N;return this._value}},{key:"next",value:function(e){o(S(n.prototype),"next",this).call(this,this._value=e)}}]),n}(Xk.xQ),nb=i(4869),rb=i(9796),ib=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),n}($e.L),ab=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).parent=e,a.outerValue=r,a.outerIndex=i,a.index=0,a}return p(n,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}($e.L),ob=i(7444);function sb(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new ab(e,n,r);if(!i.closed)return t instanceof Je.y?t.subscribe(i):(0,ob.s)(t)(i)}var ub=i(6693),cb={},lb=function(){function e(t){v(this,e),this.resultSelector=t}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new hb(e,this.resultSelector))}}]),e}(),hb=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return p(n,[{key:"_next",value:function(e){this.values.push(cb),this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++)this.add(sb(this,e[n],void 0,n))}}},{key:"notifyComplete",value:function(e){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(e,t,n){var r=this.values,i=this.toRespond?r[n]===cb?--this.toRespond:this.toRespond:0;r[n]=t,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}},{key:"_tryResultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(ib),fb=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),db=i(3282);function pb(){return(0,db.J)(1)(We.of.apply(void 0,arguments))}var vb=i(9193);function gb(e){return new Je.y(function(t){var n;try{n=e()}catch(r){return void t.error(r)}return(n?(0,$k.D)(n):(0,vb.c)()).subscribe(t)})}var mb=i(2441),yb=i(5345);function kb(e,t){return"function"==typeof t?function(n){return n.pipe(kb(function(n,r){return(0,$k.D)(e(n,r)).pipe((0,nt.U)(function(e,i){return t(n,e,r,i)}))}))}:function(t){return t.lift(new bb(e))}}var bb=function(){function e(t){v(this,e),this.project=t}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new wb(e,this.project))}}]),e}(),wb=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).project=r,i.index=0,i}return p(n,[{key:"_next",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}},{key:"_innerSub",value:function(e){var t=this.innerSubscription;t&&t.unsubscribe();var n=new yb.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,yb.ft)(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}},{key:"_complete",value:function(){var e=this.innerSubscription;e&&!e.closed||o(S(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=void 0}},{key:"notifyComplete",value:function(){this.innerSubscription=void 0,this.isStopped&&o(S(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(e){this.destination.next(e)}}]),n}(yb.Ds),_b=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}();function xb(e){return function(t){return 0===e?(0,vb.c)():t.lift(new Sb(e))}}var Sb=function(){function e(t){if(v(this,e),this.total=t,this.total<0)throw new _b}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new Tb(e,this.total))}}]),e}(),Tb=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).total=r,i.count=0,i}return p(n,[{key:"_next",value:function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}]),n}($e.L);function Ib(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];return(0,nb.K)(r)?(t.pop(),function(e){return pb(t,e,r)}):function(e){return pb(t,e)}}function Eb(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Cb(e,t,n))}}var Cb=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];v(this,e),this.accumulator=t,this.seed=n,this.hasSeed=r}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new Ab(e,this.accumulator,this.seed,this.hasSeed))}}]),e}(),Ab=function(e){g(n,e);var t=m(n);function n(e,r,i,a){var o;return v(this,n),(o=t.call(this,e)).accumulator=r,o._seed=i,o.hasSeed=a,o.index=0,o}return p(n,[{key:"seed",get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e}},{key:"_next",value:function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(r){this.destination.error(r)}this.seed=t,this.destination.next(t)}}]),n}($e.L);function Rb(e){return function(t){var n=new Db(e),r=t.lift(n);return n.caught=r}}var Db=function(){function e(t){v(this,e),this.selector=t}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new Pb(e,this.selector,this.caught))}}]),e}(),Pb=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e)).selector=r,a.caught=i,a}return p(n,[{key:"error",value:function(e){if(!this.isStopped){var t;try{t=this.selector(e,this.caught)}catch(a){return void o(S(n.prototype),"error",this).call(this,a)}this._unsubscribeAndRecycle();var r=new yb.IY(this);this.add(r);var i=(0,yb.ft)(t,r);i!==r&&this.add(i)}}}]),n}(yb.Ds);function Ob(e){return function(t){return 0===e?(0,vb.c)():t.lift(new Nb(e))}}var Nb=function(){function e(t){if(v(this,e),this.total=t,this.total<0)throw new _b}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new Lb(e,this.total))}}]),e}(),Lb=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).total=r,i.ring=new Array,i.count=0,i}return p(n,[{key:"_next",value:function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}},{key:"_complete",value:function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var a=t++%n;e.next(r[a])}e.complete()}}]),n}($e.L);function Mb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fb;return function(t){return t.lift(new Zb(e))}}var Zb=function(){function e(t){v(this,e),this.errorFactory=t}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new Ub(e,this.errorFactory))}}]),e}(),Ub=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).errorFactory=r,i.hasValue=!1,i}return p(n,[{key:"_next",value:function(e){this.hasValue=!0,this.destination.next(e)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}]),n}($e.L);function Fb(){return new fb}function qb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return t.lift(new Vb(e))}}var Vb=function(){function e(t){v(this,e),this.defaultValue=t}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new jb(e,this.defaultValue))}}]),e}(),jb=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).defaultValue=r,i.isEmpty=!0,i}return p(n,[{key:"_next",value:function(e){this.isEmpty=!1,this.destination.next(e)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}($e.L),Bb=i(4487);function Hb(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Xe(function(t,n){return e(t,n,r)}):Bb.y,xb(1),n?qb(t):Mb(function(){return new fb}))}}var zb=i(3342),Gb=i(1307),Kb=i(5319),Wb=function(){function e(t){v(this,e),this.callback=t}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new Jb(e,this.callback))}}]),e}(),Jb=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).add(new Kb.w(r)),i}return p(n)}($e.L),Yb=p(function e(t,n){v(this,e),this.id=t,this.url=n}),Qb=function(e){g(n,e);var t=m(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return v(this,n),(i=t.call(this,e,r)).navigationTrigger=a,i.restoredState=o,i}return p(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Yb),$b=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e,r)).urlAfterRedirects=i,a}return p(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(Yb),Xb=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e,r)).reason=i,a}return p(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Yb),ew=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e,r)).error=i,a}return p(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(Yb),tw=function(e){g(n,e);var t=m(n);function n(e,r,i,a){var o;return v(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return p(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Yb),nw=function(e){g(n,e);var t=m(n);function n(e,r,i,a){var o;return v(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return p(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Yb),rw=function(e){g(n,e);var t=m(n);function n(e,r,i,a,o){var s;return v(this,n),(s=t.call(this,e,r)).urlAfterRedirects=i,s.state=a,s.shouldActivate=o,s}return p(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(Yb),iw=function(e){g(n,e);var t=m(n);function n(e,r,i,a){var o;return v(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return p(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Yb),aw=function(e){g(n,e);var t=m(n);function n(e,r,i,a){var o;return v(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return p(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Yb),ow=function(){function e(t){v(this,e),this.route=t}return p(e,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),e}(),sw=function(){function e(t){v(this,e),this.route=t}return p(e,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),e}(),uw=function(){function e(t){v(this,e),this.snapshot=t}return p(e,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),cw=function(){function e(t){v(this,e),this.snapshot=t}return p(e,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),lw=function(){function e(t){v(this,e),this.snapshot=t}return p(e,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),hw=function(){function e(t){v(this,e),this.snapshot=t}return p(e,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),fw=function(){function e(t,n,r){v(this,e),this.routerEvent=t,this.position=n,this.anchor=r}return p(e,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),e}(),dw=function(){function e(t){v(this,e),this.params=t||{}}return p(e,[{key:"has",value:function(e){return Object.prototype.hasOwnProperty.call(this.params,e)}},{key:"get",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t[0]:t}return null}},{key:"getAll",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t:[t]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),e}();function pw(e){return new dw(e)}function vw(e){var t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function gw(e,t,n){var r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;for(var i={},a=0;a<r.length;a++){var o=r[a],s=e[a];if(o.startsWith(":"))i[o.substring(1)]=s;else if(o!==s.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function mw(e,t){var n,r=e?Object.keys(e):void 0,i=t?Object.keys(t):void 0;if(!r||!i||r.length!=i.length)return!1;for(var a=0;a<r.length;a++)if(!yw(e[n=r[a]],t[n]))return!1;return!0}function yw(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;var n=u(e).sort(),r=u(t).sort();return n.every(function(e,t){return r[t]===e})}return e===t}function kw(e){return Array.prototype.concat.apply([],e)}function bw(e){return e.length>0?e[e.length-1]:null}function ww(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function _w(e){return(0,a.CqO)(e)?e:(0,a.QGY)(e)?(0,$k.D)(Promise.resolve(e)):(0,We.of)(e)}var xw={exact:function e(t,n,r){if(!Pw(t.segments,n.segments))return!1;if(!Cw(t.segments,n.segments,r))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(var i in n.children){if(!t.children[i])return!1;if(!e(t.children[i],n.children[i],r))return!1}return!0},subset:Iw},Sw={exact:function(e,t){return mw(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(function(n){return yw(e[n],t[n])})},ignored:function(){return!0}};function Tw(e,t,n){return xw[n.paths](e.root,t.root,n.matrixParams)&&Sw[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function Iw(e,t,n){return Ew(e,t,t.segments,n)}function Ew(e,t,n,r){if(e.segments.length>n.length){var i=e.segments.slice(0,n.length);return!!Pw(i,n)&&!t.hasChildren()&&!!Cw(i,n,r)}if(e.segments.length===n.length){if(!Pw(e.segments,n))return!1;if(!Cw(e.segments,n,r))return!1;for(var a in t.children){if(!e.children[a])return!1;if(!Iw(e.children[a],t.children[a],r))return!1}return!0}var o=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!!Pw(e.segments,o)&&!!Cw(e.segments,o,r)&&!!e.children.primary&&Ew(e.children.primary,t,s,r)}function Cw(e,t,n){return t.every(function(t,r){return Sw[n](e[r].parameters,t.parameters)})}var Aw=function(){function e(t,n,r){v(this,e),this.root=t,this.queryParams=n,this.fragment=r}return p(e,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=pw(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return Lw.serialize(this)}}]),e}(),Rw=function(){function e(t,n){var r=this;v(this,e),this.segments=t,this.children=n,this.parent=null,ww(n,function(e,t){return e.parent=r})}return p(e,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return Mw(this)}}]),e}(),Dw=function(){function e(t,n){v(this,e),this.path=t,this.parameters=n}return p(e,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=pw(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return Bw(this)}}]),e}();function Pw(e,t){return e.length===t.length&&e.every(function(e,n){return e.path===t[n].path})}var Ow=p(function e(){v(this,e)}),Nw=function(){function e(){v(this,e)}return p(e,[{key:"parse",value:function(e){var t=new Ww(e);return new Aw(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}},{key:"serialize",value:function(e){var t,n,r;return"/".concat(Zw(e.root,!0)).concat((n=e.queryParams,r=Object.keys(n).map(function(e){var t=n[e];return Array.isArray(t)?t.map(function(t){return"".concat(Fw(e),"=").concat(Fw(t))}).join("&"):"".concat(Fw(e),"=").concat(Fw(t))}).filter(function(e){return!!e}),r.length?"?".concat(r.join("&")):"")).concat("string"==typeof e.fragment?"#".concat((t=e.fragment,encodeURI(t))):"")}}]),e}(),Lw=new Nw;function Mw(e){return e.segments.map(function(e){return Bw(e)}).join("/")}function Zw(e,t){if(!e.hasChildren())return Mw(e);if(t){var n=e.children.primary?Zw(e.children.primary,!1):"",r=[];return ww(e.children,function(e,t){"primary"!==t&&r.push("".concat(t,":").concat(Zw(e,!1)))}),r.length>0?"".concat(n,"(").concat(r.join("//"),")"):n}var i=function(e,t){var n=[];return ww(e.children,function(e,r){"primary"===r&&(n=n.concat(t(e,r)))}),ww(e.children,function(e,r){"primary"!==r&&(n=n.concat(t(e,r)))}),n}(e,function(t,n){return"primary"===n?[Zw(e.children.primary,!1)]:["".concat(n,":").concat(Zw(t,!1))]});return 1===Object.keys(e.children).length&&null!=e.children.primary?"".concat(Mw(e),"/").concat(i[0]):"".concat(Mw(e),"/(").concat(i.join("//"),")")}function Uw(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fw(e){return Uw(e).replace(/%3B/gi,";")}function qw(e){return Uw(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Vw(e){return decodeURIComponent(e)}function jw(e){return Vw(e.replace(/\+/g,"%20"))}function Bw(e){return"".concat(qw(e.path)).concat((t=e.parameters,Object.keys(t).map(function(e){return";".concat(qw(e),"=").concat(qw(t[e]))}).join("")));var t}var Hw=/^[^\/()?;=#]+/;function zw(e){var t=e.match(Hw);return t?t[0]:""}var Gw=/^[^=?&#]+/,Kw=/^[^?&#]+/,Ww=function(){function e(t){v(this,e),this.url=t,this.remaining=t}return p(e,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Rw([],{}):new Rw([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new Rw(e,t)),n}},{key:"parseSegment",value:function(){var e=zw(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(e),new Dw(Vw(e),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e}},{key:"parseParam",value:function(e){var t=zw(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=zw(this.remaining);r&&(n=r,this.capture(n))}e[Vw(t)]=Vw(n)}}},{key:"parseQueryParam",value:function(e){var t=function(e){var t=e.match(Gw);return t?t[0]:""}(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=function(e){var t=e.match(Kw);return t?t[0]:""}(this.remaining);r&&(n=r,this.capture(n))}var i=jw(t),a=jw(n);if(e.hasOwnProperty(i)){var o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(a)}else e[i]=a}}},{key:"parseParens",value:function(e){var t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=zw(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i="primary");var a=this.parseChildren();t[i]=1===Object.keys(a).length?a.primary:new Rw([],a),this.consumeOptional("//")}return t}},{key:"peekStartsWith",value:function(e){return this.remaining.startsWith(e)}},{key:"consumeOptional",value:function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}},{key:"capture",value:function(e){if(!this.consumeOptional(e))throw new Error('Expected "'.concat(e,'".'))}}]),e}(),Jw=function(){function e(t){v(this,e),this._root=t}return p(e,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(e){var t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}},{key:"children",value:function(e){var t=Yw(e,this._root);return t?t.children.map(function(e){return e.value}):[]}},{key:"firstChild",value:function(e){var t=Yw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}},{key:"siblings",value:function(e){var t=Qw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(function(e){return e.value}).filter(function(t){return t!==e})}},{key:"pathFromRoot",value:function(e){return Qw(e,this._root).map(function(e){return e.value})}}]),e}();function Yw(e,t){if(e===t.value)return t;var n,r=l(t.children);try{for(r.s();!(n=r.n()).done;){var i=Yw(e,n.value);if(i)return i}}catch(a){r.e(a)}finally{r.f()}return null}function Qw(e,t){if(e===t.value)return[t];var n,r=l(t.children);try{for(r.s();!(n=r.n()).done;){var i=Qw(e,n.value);if(i.length)return i.unshift(t),i}}catch(a){r.e(a)}finally{r.f()}return[]}var $w=function(){function e(t,n){v(this,e),this.value=t,this.children=n}return p(e,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),e}();function Xw(e){var t={};return e&&e.children.forEach(function(e){return t[e.value.outlet]=e}),t}var e_=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).snapshot=r,o_(k(i),e),i}return p(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(Jw);function t_(e,t){var n=function(e,t){var n=new i_([],{},{},"",{},"primary",t,null,e.root,-1,{});return new a_("",new $w(n,[]))}(e,t),r=new tb([new Dw("",{})]),i=new tb({}),a=new tb({}),o=new tb({}),s=new tb(""),u=new n_(r,i,o,s,a,"primary",t,n.root);return u.snapshot=n.root,new e_(new $w(u,[]),n)}var n_=function(){function e(t,n,r,i,a,o,s,u){v(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=o,this.component=s,this._futureSnapshot=u}return p(e,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe((0,nt.U)(function(e){return pw(e)}))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,nt.U)(function(e){return pw(e)}))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),e}();function r_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=e.pathFromRoot,r=0;if("always"!==t)for(r=n.length-1;r>=1;){var i=n[r],a=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function(e){return e.reduce(function(e,t){return{params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(r))}var i_=function(){function e(t,n,r,i,a,o,s,u,c,l,h){v(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=o,this.component=s,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=l,this._resolve=h}return p(e,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=pw(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=pw(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return"Route(url:'".concat(this.url.map(function(e){return e.toString()}).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}}]),e}(),a_=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,r)).url=e,o_(k(i),r),i}return p(n,[{key:"toString",value:function(){return s_(this._root)}}]),n}(Jw);function o_(e,t){t.value._routerState=e,t.children.forEach(function(t){return o_(e,t)})}function s_(e){var t=e.children.length>0?" { ".concat(e.children.map(s_).join(", ")," } "):"";return"".concat(e.value).concat(t)}function u_(e){if(e.snapshot){var t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,mw(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),mw(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!mw(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),mw(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function c_(e,t){return mw(e.params,t.params)&&function(e,t){return Pw(e,t)&&e.every(function(e,n){return mw(e.parameters,t[n].parameters)})}(e.url,t.url)&&!(!e.parent!=!t.parent)&&(!e.parent||c_(e.parent,t.parent))}function l_(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){var r=n.value;r._futureSnapshot=t.value;var i=function(e,t,n){return t.children.map(function(t){var r,i=l(n.children);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(e.shouldReuseRoute(t.value,a.value.snapshot))return l_(e,t,a)}}catch(o){i.e(o)}finally{i.f()}return l_(e,t)})}(e,t,n);return new $w(r,i)}if(e.shouldAttach(t.value)){var a=e.retrieve(t.value);if(null!==a){var o=a.route;return h_(t,o),o}}var s,u=new n_(new tb((s=t.value).url),new tb(s.params),new tb(s.queryParams),new tb(s.fragment),new tb(s.data),s.outlet,s.component,s),c=t.children.map(function(t){return l_(e,t)});return new $w(u,c)}function h_(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(var n=0;n<e.children.length;++n)h_(e.children[n],t.children[n])}function f_(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function d_(e){return"object"==typeof e&&null!=e&&e.outlets}function p_(e,t,n,r,i){var a={};return r&&ww(r,function(e,t){a[t]=Array.isArray(e)?e.map(function(e){return"".concat(e)}):"".concat(e)}),new Aw(n.root===e?t:v_(n.root,e,t),a,i)}function v_(e,t,n){var r={};return ww(e.children,function(e,i){r[i]=e===t?n:v_(e,t,n)}),new Rw(e.segments,r)}var g_=function(){function e(t,n,r){if(v(this,e),this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&f_(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find(d_);if(i&&i!==bw(r))throw new Error("{outlets:{}} has to be the last command")}return p(e,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),e}(),m_=p(function e(t,n,r){v(this,e),this.segmentGroup=t,this.processChildren=n,this.index=r});function y_(e,t,n){if(e||(e=new Rw([],{})),0===e.segments.length&&e.hasChildren())return k_(e,t,n);var r=function(e,t,n){for(var r=0,i=t,a={match:!1,pathIndex:0,commandIndex:0};i<e.segments.length;){if(r>=n.length)return a;var o=e.segments[i],s=n[r];if(d_(s))break;var u="".concat(s),c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!x_(u,c,o))return a;r+=2}else{if(!x_(u,{},o))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){var a=new Rw(e.segments.slice(0,r.pathIndex),{});return a.children.primary=new Rw(e.segments.slice(r.pathIndex),e.children),k_(a,0,i)}return r.match&&0===i.length?new Rw(e.segments,{}):r.match&&!e.hasChildren()?b_(e,t,n):r.match?k_(e,0,i):b_(e,t,n)}function k_(e,t,n){if(0===n.length)return new Rw(e.segments,{});var r=function(e){return d_(e[0])?e[0].outlets:{primary:e}}(n),i={};return ww(r,function(n,r){"string"==typeof n&&(n=[n]),null!==n&&(i[r]=y_(e.children[r],t,n))}),ww(e.children,function(e,t){void 0===r[t]&&(i[t]=e)}),new Rw(e.segments,i)}function b_(e,t,n){for(var r=e.segments.slice(0,t),i=0;i<n.length;){var a=n[i];if(d_(a)){var o=w_(a.outlets);return new Rw(r,o)}if(0===i&&f_(n[0]))r.push(new Dw(e.segments[t].path,__(n[0]))),i++;else{var s=d_(a)?a.outlets.primary:"".concat(a),u=i<n.length-1?n[i+1]:null;s&&u&&f_(u)?(r.push(new Dw(s,__(u))),i+=2):(r.push(new Dw(s,{})),i++)}}return new Rw(r,{})}function w_(e){var t={};return ww(e,function(e,n){"string"==typeof e&&(e=[e]),null!==e&&(t[n]=b_(new Rw([],{}),0,e))}),t}function __(e){var t={};return ww(e,function(e,n){return t[n]="".concat(e)}),t}function x_(e,t,n){return e==n.path&&mw(t,n.parameters)}var S_=function(){function e(t,n,r,i){v(this,e),this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}return p(e,[{key:"activate",value:function(e){var t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),u_(this.futureState.root),this.activateChildRoutes(t,n,e)}},{key:"deactivateChildRoutes",value:function(e,t,n){var r=this,i=Xw(t);e.children.forEach(function(e){var t=e.value.outlet;r.deactivateRoutes(e,i[t],n),delete i[t]}),ww(i,function(e,t){r.deactivateRouteAndItsChildren(e,n)})}},{key:"deactivateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(r===i)if(r.component){var a=n.getContext(r.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}},{key:"deactivateRouteAndItsChildren",value:function(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}},{key:"detachAndStoreRouteSubtree",value:function(e,t){var n=t.getContext(e.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:r,route:e,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(e,t){for(var n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,i=Xw(e),a=0,o=Object.keys(i);a<o.length;a++){var s=o[a];this.deactivateRouteAndItsChildren(i[s],r)}n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}},{key:"activateChildRoutes",value:function(e,t,n){var r=this,i=Xw(t);e.children.forEach(function(e){r.activateRoutes(e,i[e.value.outlet],n),r.forwardEvent(new hw(e.value.snapshot))}),e.children.length&&this.forwardEvent(new cw(e.value.snapshot))}},{key:"activateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(u_(r),r===i)if(r.component){var a=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,n);else if(r.component){var o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(s.contexts),o.attachRef=s.componentRef,o.route=s.route.value,o.outlet&&o.outlet.attach(s.componentRef,s.route.value),T_(s.route)}else{var u=function(e){for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),c=u?u.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=c,o.outlet&&o.outlet.activateWith(r,c),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,n)}}]),e}();function T_(e){u_(e.value),e.children.forEach(T_)}var I_=p(function e(t,n){v(this,e),this.routes=t,this.module=n});function E_(e){return"function"==typeof e}function C_(e){return e instanceof Aw}var A_=Symbol("INITIAL_VALUE");function R_(){return kb(function(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i;return(0,nb.K)(t[t.length-1])&&(i=t.pop()),"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&(0,rb.k)(t[0])&&(t=t[0]),(0,ub.n)(t,i).lift(new lb(r))}(e.map(function(e){return e.pipe(xb(1),Ib(A_))})).pipe(Eb(function(e,t){var n=!1;return t.reduce(function(e,r,i){if(e!==A_)return e;if(r===A_&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||C_(r))return r}return e},e)},A_),Xe(function(e){return e!==A_}),(0,nt.U)(function(e){return C_(e)?e:!0===e}),xb(1))})}var D_=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&a._UZ(0,"router-outlet")},directives:function(){return[Cx]},encapsulation:2}),e}();function P_(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<e.length;n++){var r=e[n];O_(r,N_(t,r))}}function O_(e,t){e.children&&P_(e.children,t)}function N_(e,t){return t?e||t.path?e&&!t.path?"".concat(e,"/"):!e&&t.path?t.path:"".concat(e,"/").concat(t.path):"":e}function L_(e){var t=e.children&&e.children.map(L_),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=D_),n}function M_(e){return e.outlet||"primary"}function Z_(e,t){var n=e.filter(function(e){return M_(e)===t});return n.push.apply(n,u(e.filter(function(e){return M_(e)!==t}))),n}var U_={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function F_(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},U_):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};var i=(t.matcher||gw)(n,e,t);if(!i)return Object.assign({},U_);var a={};ww(i.posParams,function(e,t){a[t]=e.path});var o=i.consumed.length>0?Object.assign(Object.assign({},a),i.consumed[i.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function q_(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"corrected";if(n.length>0&&function(e,t,n){return n.some(function(n){return V_(e,t,n)&&"primary"!==M_(n)})}(e,n,r)){var a=new Rw(t,function(e,t,n,r){var i={};i.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;var a,o=l(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(""===s.path&&"primary"!==M_(s)){var u=new Rw([],{});u._sourceSegment=e,u._segmentIndexShift=t.length,i[M_(s)]=u}}}catch(c){o.e(c)}finally{o.f()}return i}(e,t,r,new Rw(n,e.children)));return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(function(n){return V_(e,t,n)})}(e,n,r)){var o=new Rw(e.segments,function(e,t,n,r,i,a){var o,s={},u=l(r);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(V_(e,n,c)&&!i[M_(c)]){var h=new Rw([],{});h._sourceSegment=e,h._segmentIndexShift="legacy"===a?e.segments.length:t.length,s[M_(c)]=h}}}catch(f){u.e(f)}finally{u.f()}return Object.assign(Object.assign({},i),s)}(e,t,n,r,e.children,i));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}var s=new Rw(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function V_(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function j_(e,t,n,r){return!!(M_(e)===r||"primary"!==r&&V_(t,n,e))&&("**"===e.path||F_(t,e,n).matched)}function B_(e,t,n){return 0===t.length&&!e.children[n]}var H_=p(function e(t){v(this,e),this.segmentGroup=t||null}),z_=p(function e(t){v(this,e),this.urlTree=t});function G_(e){return new Je.y(function(t){return t.error(new H_(e))})}function K_(e){return new Je.y(function(t){return t.error(new z_(e))})}function W_(e){return new Je.y(function(t){return t.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(e,"'")))})}var J_=function(){function e(t,n,r,i,o){v(this,e),this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(a.h0i)}return p(e,[{key:"apply",value:function(){var e=this,t=q_(this.urlTree.root,[],[],this.config).segmentGroup,n=new Rw(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,n,"primary").pipe((0,nt.U)(function(t){return e.createUrlTree(Y_(t),e.urlTree.queryParams,e.urlTree.fragment)})).pipe(Rb(function(t){if(t instanceof z_)return e.allowRedirects=!1,e.match(t.urlTree);if(t instanceof H_)throw e.noMatchError(t);throw t}))}},{key:"match",value:function(e){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe((0,nt.U)(function(n){return t.createUrlTree(Y_(n),e.queryParams,e.fragment)})).pipe(Rb(function(e){if(e instanceof H_)throw t.noMatchError(e);throw e}))}},{key:"noMatchError",value:function(e){return new Error("Cannot match any routes. URL Segment: '".concat(e.segmentGroup,"'"))}},{key:"createUrlTree",value:function(e,t,n){var r=e.segments.length>0?new Rw([],{primary:e}):e;return new Aw(r,t,n)}},{key:"expandSegmentGroup",value:function(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe((0,nt.U)(function(e){return new Rw([],e)})):this.expandSegment(e,n,t,n.segments,r,!0)}},{key:"expandChildren",value:function(e,t,n){for(var r=this,i=[],a=0,o=Object.keys(n.children);a<o.length;a++){var s=o[a];"primary"===s?i.unshift(s):i.push(s)}return(0,$k.D)(i).pipe(Qe(function(i){var a=n.children[i],o=Z_(t,i);return r.expandSegmentGroup(e,o,a,i).pipe((0,nt.U)(function(e){return{segment:e,outlet:i}}))}),Eb(function(e,t){return e[t.outlet]=t.segment,e},{}),function(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Xe(function(t,n){return e(t,n,r)}):Bb.y,Ob(1),n?qb(t):Mb(function(){return new fb}))}}())}},{key:"expandSegment",value:function(e,t,n,r,i,a){var o=this;return(0,$k.D)(n).pipe(Qe(function(s){return o.expandSegmentAgainstRoute(e,t,n,s,r,i,a).pipe(Rb(function(e){if(e instanceof H_)return(0,We.of)(null);throw e}))}),Hb(function(e){return!!e}),Rb(function(e,n){if(e instanceof fb||"EmptyError"===e.name){if(B_(t,r,i))return(0,We.of)(new Rw([],{}));throw new H_(t)}throw e}))}},{key:"expandSegmentAgainstRoute",value:function(e,t,n,r,i,a,o){return j_(r,t,i,a)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i,a):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,a):G_(t):G_(t)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,a){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,a):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,a)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(e,t,n,r){var i=this,a=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?K_(a):this.lineralizeSegments(n,a).pipe((0,Ye.zg)(function(n){var a=new Rw(n,{});return i.expandSegment(e,a,t,n,r,!1)}))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,a){var o=this,s=F_(t,r,i),u=s.matched,c=s.consumedSegments,l=s.lastChild,h=s.positionalParamSegments;if(!u)return G_(t);var f=this.applyRedirectCommands(c,r.redirectTo,h);return r.redirectTo.startsWith("/")?K_(f):this.lineralizeSegments(r,f).pipe((0,Ye.zg)(function(r){return o.expandSegment(e,t,n,r.concat(i.slice(l)),a,!1)}))}},{key:"matchSegmentAgainstRoute",value:function(e,t,n,r,i){var a=this;if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,We.of)(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe((0,nt.U)(function(e){return n._loadedConfig=e,new Rw(r,{})})):(0,We.of)(new Rw(r,{}));var o=F_(t,n,r),s=o.matched,u=o.consumedSegments,c=o.lastChild;if(!s)return G_(t);var l=r.slice(c);return this.getChildConfig(e,n,r).pipe((0,Ye.zg)(function(e){var r=e.module,o=e.routes,s=q_(t,u,l,o),c=s.segmentGroup,h=s.slicedSegments,f=new Rw(c.segments,c.children);if(0===h.length&&f.hasChildren())return a.expandChildren(r,o,f).pipe((0,nt.U)(function(e){return new Rw(u,e)}));if(0===o.length&&0===h.length)return(0,We.of)(new Rw(u,{}));var d=M_(n)===i;return a.expandSegment(r,f,o,h,d?"primary":i,!0).pipe((0,nt.U)(function(e){return new Rw(u.concat(e.segments),e.children)}))}))}},{key:"getChildConfig",value:function(e,t,n){var r=this;return t.children?(0,We.of)(new I_(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,We.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe((0,Ye.zg)(function(n){return n?r.configLoader.load(e.injector,t).pipe((0,nt.U)(function(e){return t._loadedConfig=e,e})):function(e){return new Je.y(function(t){return t.error(vw("Cannot load children because the guard of the route \"path: '".concat(e.path,"'\" returned false")))})}(t)})):(0,We.of)(new I_([],e))}},{key:"runCanLoadGuards",value:function(e,t,n){var r=this,i=t.canLoad;if(!i||0===i.length)return(0,We.of)(!0);var a=i.map(function(r){var i,a=e.get(r);if(function(e){return e&&E_(e.canLoad)}(a))i=a.canLoad(t,n);else{if(!E_(a))throw new Error("Invalid CanLoad guard");i=a(t,n)}return _w(i)});return(0,We.of)(a).pipe(R_(),(0,zb.b)(function(e){if(C_(e)){var t=vw('Redirecting to "'.concat(r.urlSerializer.serialize(e),'"'));throw t.url=e,t}}),(0,nt.U)(function(e){return!0===e}))}},{key:"lineralizeSegments",value:function(e,t){for(var n=[],r=t.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,We.of)(n);if(r.numberOfChildren>1||!r.children.primary)return W_(e.redirectTo);r=r.children.primary}}},{key:"applyRedirectCommands",value:function(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}},{key:"applyRedirectCreatreUrlTree",value:function(e,t,n,r){var i=this.createSegmentGroup(e,t.root,n,r);return new Aw(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}},{key:"createQueryParams",value:function(e,t){var n={};return ww(e,function(e,r){if("string"==typeof e&&e.startsWith(":")){var i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}},{key:"createSegmentGroup",value:function(e,t,n,r){var i=this,a=this.createSegments(e,t.segments,n,r),o={};return ww(t.children,function(t,a){o[a]=i.createSegmentGroup(e,t,n,r)}),new Rw(a,o)}},{key:"createSegments",value:function(e,t,n,r){var i=this;return t.map(function(t){return t.path.startsWith(":")?i.findPosParam(e,t,r):i.findOrReturn(t,n)})}},{key:"findPosParam",value:function(e,t,n){var r=n[t.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(e,"'. Cannot find '").concat(t.path,"'."));return r}},{key:"findOrReturn",value:function(e,t){var n,r=0,i=l(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.path===e.path)return t.splice(r),a;r++}}catch(o){i.e(o)}finally{i.f()}return e}}]),e}();function Y_(e){for(var t={},n=0,r=Object.keys(e.children);n<r.length;n++){var i=r[n],a=Y_(e.children[i]);(a.segments.length>0||a.hasChildren())&&(t[i]=a)}return function(e){if(1===e.numberOfChildren&&e.children.primary){var t=e.children.primary;return new Rw(e.segments.concat(t.segments),t.children)}return e}(new Rw(e.segments,t))}var Q_=p(function e(t){v(this,e),this.path=t,this.route=this.path[this.path.length-1]}),$_=p(function e(t,n){v(this,e),this.component=t,this.route=n});function X_(e,t,n){var r=e._root;return tx(r,t?t._root:null,n,[r.value])}function ex(e,t,n){var r=function(e){if(!e)return null;for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function tx(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=Xw(t);return e.children.forEach(function(e){!function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=e.value,o=t?t.value:null,s=n?n.getContext(e.value.outlet):null;if(o&&a.routeConfig===o.routeConfig){var u=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Pw(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Pw(e.url,t.url)||!mw(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!c_(e,t)||!mw(e.queryParams,t.queryParams);case"paramsChange":default:return!c_(e,t)}}(o,a,a.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Q_(r)):(a.data=o.data,a._resolvedData=o._resolvedData),tx(e,t,a.component?s?s.children:null:n,r,i),u&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new $_(s.outlet.component,o))}else o&&nx(t,s,i),i.canActivateChecks.push(new Q_(r)),tx(e,null,a.component?s?s.children:null:n,r,i)}(e,a[e.value.outlet],n,r.concat([e.value]),i),delete a[e.value.outlet]}),ww(a,function(e,t){return nx(e,n.getContext(t),i)}),i}function nx(e,t,n){var r=Xw(e),i=e.value;ww(r,function(e,r){nx(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new $_(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}var rx=p(function e(){v(this,e)});function ix(e){return new Je.y(function(t){return t.error(e)})}var ax=function(){function e(t,n,r,i,a,o){v(this,e),this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=o}return p(e,[{key:"recognize",value:function(){var e=q_(this.urlTree.root,[],[],this.config.filter(function(e){return void 0===e.redirectTo}),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,"primary");if(null===t)return null;var n=new i_([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new $w(n,t),i=new a_(this.url,r);return this.inheritParamsAndData(i._root),i}},{key:"inheritParamsAndData",value:function(e){var t=this,n=e.value,r=r_(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(function(e){return t.inheritParamsAndData(e)})}},{key:"processSegmentGroup",value:function(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}},{key:"processChildren",value:function(e,t){for(var n=[],r=0,i=Object.keys(t.children);r<i.length;r++){var a=i[r],o=t.children[a],s=Z_(e,a),c=this.processSegmentGroup(s,o,a);if(null===c)return null;n.push.apply(n,u(c))}var l=ox(n);return l.sort(function(e,t){return"primary"===e.value.outlet?-1:"primary"===t.value.outlet?1:e.value.outlet.localeCompare(t.value.outlet)}),l}},{key:"processSegment",value:function(e,t,n,r){var i,a=l(e);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=this.processSegmentAgainstRoute(o,t,n,r);if(null!==s)return s}}catch(u){a.e(u)}finally{a.f()}return B_(t,n,r)?[]:null}},{key:"processSegmentAgainstRoute",value:function(e,t,n,r){if(e.redirectTo||!j_(e,t,n,r))return null;var i,a=[],o=[];if("**"===e.path){var s=n.length>0?bw(n).parameters:{};i=new i_(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,cx(e),M_(e),e.component,e,sx(t),ux(t)+n.length,lx(e))}else{var u=F_(t,e,n);if(!u.matched)return null;a=u.consumedSegments,o=n.slice(u.lastChild),i=new i_(a,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,cx(e),M_(e),e.component,e,sx(t),ux(t)+a.length,lx(e))}var c=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),l=q_(t,a,o,c.filter(function(e){return void 0===e.redirectTo}),this.relativeLinkResolution),h=l.segmentGroup,f=l.slicedSegments;if(0===f.length&&h.hasChildren()){var d=this.processChildren(c,h);return null===d?null:[new $w(i,d)]}if(0===c.length&&0===f.length)return[new $w(i,[])];var p=M_(e)===r,v=this.processSegment(c,h,f,p?"primary":r);return null===v?null:[new $w(i,v)]}}]),e}();function ox(e){var t,n=[],r=new Set,i=l(e);try{var a=function(){var e,i=t.value;if(!function(e){var t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}(i))return n.push(i),"continue";var a=n.find(function(e){return i.value.routeConfig===e.value.routeConfig});void 0!==a?((e=a.children).push.apply(e,u(i.children)),r.add(a)):n.push(i)};for(i.s();!(t=i.n()).done;)a()}catch(f){i.e(f)}finally{i.f()}var o,s=l(r);try{for(s.s();!(o=s.n()).done;){var c=o.value,h=ox(c.children);n.push(new $w(c.value,h))}}catch(f){s.e(f)}finally{s.f()}return n.filter(function(e){return!r.has(e)})}function sx(e){for(var t=e;t._sourceSegment;)t=t._sourceSegment;return t}function ux(e){for(var t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function cx(e){return e.data||{}}function lx(e){return e.resolve||{}}function hx(e){return kb(function(t){var n=e(t);return n?(0,$k.D)(n).pipe((0,nt.U)(function(){return t})):(0,We.of)(t)})}var fx=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n)}(function(){function e(){v(this,e)}return p(e,[{key:"shouldDetach",value:function(e){return!1}},{key:"store",value:function(e,t){}},{key:"shouldAttach",value:function(e){return!1}},{key:"retrieve",value:function(e){return null}},{key:"shouldReuseRoute",value:function(e,t){return e.routeConfig===t.routeConfig}}]),e}()),dx=new a.OlP("ROUTES"),px=function(){function e(t,n,r,i){v(this,e),this.loader=t,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return p(e,[{key:"load",value:function(e,t){var n=this;if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);var r=this.loadModuleFactory(t.loadChildren).pipe((0,nt.U)(function(r){n.onLoadEndListener&&n.onLoadEndListener(t);var i=r.create(e);return new I_(kw(i.injector.get(dx,void 0,a.XFs.Self|a.XFs.Optional)).map(L_),i)}),Rb(function(e){throw t._loader$=void 0,e}));return t._loader$=new mb.c(r,function(){return new Xk.xQ}).pipe((0,Gb.x)()),t._loader$}},{key:"loadModuleFactory",value:function(e){var t=this;return"string"==typeof e?(0,$k.D)(this.loader.load(e)):_w(e()).pipe((0,Ye.zg)(function(e){return e instanceof a.YKP?(0,We.of)(e):(0,$k.D)(t.compiler.compileModuleAsync(e))}))}}]),e}(),vx=p(function e(){v(this,e),this.outlet=null,this.route=null,this.resolver=null,this.children=new gx,this.attachRef=null}),gx=function(){function e(){v(this,e),this.contexts=new Map}return p(e,[{key:"onChildOutletCreated",value:function(e,t){var n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}},{key:"onChildOutletDestroyed",value:function(e){var t=this.getContext(e);t&&(t.outlet=null)}},{key:"onOutletDeactivated",value:function(){var e=this.contexts;return this.contexts=new Map,e}},{key:"onOutletReAttached",value:function(e){this.contexts=e}},{key:"getOrCreateContext",value:function(e){var t=this.getContext(e);return t||(t=new vx,this.contexts.set(e,t)),t}},{key:"getContext",value:function(e){return this.contexts.get(e)||null}}]),e}(),mx=function(){function e(){v(this,e)}return p(e,[{key:"shouldProcessUrl",value:function(e){return!0}},{key:"extract",value:function(e){return e}},{key:"merge",value:function(e,t){return e}}]),e}();function yx(e){throw e}function kx(e,t,n){return t.parse("/")}function bx(e,t){return(0,We.of)(null)}var wx={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_x={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},xx=function(){var e=function(){function e(t,n,r,i,o,s,u,c){var l=this;v(this,e),this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=r,this.location=i,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Xk.xQ,this.errorHandler=yx,this.malformedUriErrorHandler=kx,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:bx,afterPreactivation:bx},this.urlHandlingStrategy=new mx,this.routeReuseStrategy=new fx,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(a.h0i),this.console=o.get(a.c2e);var h=o.get(a.R0b);this.isNgZoneEnabled=h instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=new Aw(new Rw([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new px(s,u,function(e){return l.triggerEvent(new ow(e))},function(e){return l.triggerEvent(new sw(e))}),this.routerState=t_(this.currentUrlTree,this.rootComponentType),this.transitions=new tb({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return p(e,[{key:"browserPageId",get:function(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}},{key:"setupNavigations",value:function(e){var t=this,n=this.events;return e.pipe(Xe(function(e){return 0!==e.id}),(0,nt.U)(function(e){return Object.assign(Object.assign({},e),{extractedUrl:t.urlHandlingStrategy.extract(e.rawUrl)})}),kb(function(e){var r,i,a,o,s=!1,u=!1;return(0,We.of)(e).pipe((0,zb.b)(function(e){t.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:t.lastSuccessfulNavigation?Object.assign(Object.assign({},t.lastSuccessfulNavigation),{previousNavigation:null}):null}}),kb(function(e){var r,i,a,o,s=!t.navigated||e.extractedUrl.toString()!==t.browserUrlTree.toString();if(("reload"===t.onSameUrlNavigation||s)&&t.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return(0,We.of)(e).pipe(kb(function(e){var r=t.transitions.getValue();return n.next(new Qb(e.id,t.serializeUrl(e.extractedUrl),e.source,e.restoredState)),r!==t.transitions.getValue()?vb.E:Promise.resolve(e)}),(r=t.ngModule.injector,i=t.configLoader,a=t.urlSerializer,o=t.config,kb(function(e){return function(e,t,n,r,i){return new J_(e,t,n,r,i).apply()}(r,i,a,e.extractedUrl,o).pipe((0,nt.U)(function(t){return Object.assign(Object.assign({},e),{urlAfterRedirects:t})}))})),(0,zb.b)(function(e){t.currentNavigation=Object.assign(Object.assign({},t.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,n,r,i,a){return(0,Ye.zg)(function(r){return function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";try{var o=new ax(e,t,n,r,i,a).recognize();return null===o?ix(new rx):(0,We.of)(o)}catch(s){return ix(s)}}(e,n,r.urlAfterRedirects,(o=r.urlAfterRedirects,t.serializeUrl(o)),i,a).pipe((0,nt.U)(function(e){return Object.assign(Object.assign({},r),{targetSnapshot:e})}));var o})}(t.rootComponentType,t.config,0,t.paramsInheritanceStrategy,t.relativeLinkResolution),(0,zb.b)(function(e){"eager"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(e.urlAfterRedirects,e),t.browserUrlTree=e.urlAfterRedirects);var r=new tw(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.next(r)}));if(s&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){var u=e.id,c=e.extractedUrl,l=e.source,h=e.restoredState,f=e.extras,d=new Qb(u,t.serializeUrl(c),l,h);n.next(d);var p=t_(c,t.rootComponentType).snapshot;return(0,We.of)(Object.assign(Object.assign({},e),{targetSnapshot:p,urlAfterRedirects:c,extras:Object.assign(Object.assign({},f),{skipLocationChange:!1,replaceUrl:!1})}))}return t.rawUrlTree=e.rawUrl,t.browserUrlTree=e.urlAfterRedirects,e.resolve(null),vb.E}),hx(function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,a=e.rawUrl,o=e.extras,s=o.skipLocationChange,u=o.replaceUrl;return t.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:a,skipLocationChange:!!s,replaceUrl:!!u})}),(0,zb.b)(function(e){var n=new nw(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}),(0,nt.U)(function(e){return Object.assign(Object.assign({},e),{guards:X_(e.targetSnapshot,e.currentSnapshot,t.rootContexts)})}),function(e,t){return(0,Ye.zg)(function(n){var r=n.targetSnapshot,i=n.currentSnapshot,a=n.guards,o=a.canActivateChecks,s=a.canDeactivateChecks;return 0===s.length&&0===o.length?(0,We.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return(0,$k.D)(e).pipe((0,Ye.zg)(function(e){return function(e,t,n,r,i){var a=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,We.of)(!0);var o=a.map(function(a){var o,s=ex(a,t,i);if(function(e){return e&&E_(e.canDeactivate)}(s))o=_w(s.canDeactivate(e,t,n,r));else{if(!E_(s))throw new Error("Invalid CanDeactivate guard");o=_w(s(e,t,n,r))}return o.pipe(Hb())});return(0,We.of)(o).pipe(R_())}(e.component,e.route,n,t,r)}),Hb(function(e){return!0!==e},!0))}(s,r,i,e).pipe((0,Ye.zg)(function(n){return n&&function(e){return"boolean"==typeof e}(n)?function(e,t,n,r){return(0,$k.D)(t).pipe(Qe(function(t){return pb(function(e,t){return null!==e&&t&&t(new uw(e)),(0,We.of)(!0)}(t.route.parent,r),function(e,t){return null!==e&&t&&t(new lw(e)),(0,We.of)(!0)}(t.route,r),function(e,t,n){var r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(function(e){return function(e){var t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)}).filter(function(e){return null!==e}).map(function(t){return gb(function(){var i=t.guards.map(function(i){var a,o=ex(i,t.node,n);if(function(e){return e&&E_(e.canActivateChild)}(o))a=_w(o.canActivateChild(r,e));else{if(!E_(o))throw new Error("Invalid CanActivateChild guard");a=_w(o(r,e))}return a.pipe(Hb())});return(0,We.of)(i).pipe(R_())})});return(0,We.of)(i).pipe(R_())}(e,t.path,n),function(e,t,n){var r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,We.of)(!0);var i=r.map(function(r){return gb(function(){var i,a=ex(r,t,n);if(function(e){return e&&E_(e.canActivate)}(a))i=_w(a.canActivate(t,e));else{if(!E_(a))throw new Error("Invalid CanActivate guard");i=_w(a(t,e))}return i.pipe(Hb())})});return(0,We.of)(i).pipe(R_())}(e,t.route,n))}),Hb(function(e){return!0!==e},!0))}(r,o,e,t):(0,We.of)(n)}),(0,nt.U)(function(e){return Object.assign(Object.assign({},n),{guardsResult:e})}))})}(t.ngModule.injector,function(e){return t.triggerEvent(e)}),(0,zb.b)(function(e){if(C_(e.guardsResult)){var n=vw('Redirecting to "'.concat(t.serializeUrl(e.guardsResult),'"'));throw n.url=e.guardsResult,n}var r=new rw(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);t.triggerEvent(r)}),Xe(function(e){return!!e.guardsResult||(t.restoreHistory(e),t.cancelNavigationTransition(e,""),!1)}),hx(function(e){if(e.guards.canActivateChecks.length)return(0,We.of)(e).pipe((0,zb.b)(function(e){var n=new iw(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}),kb(function(e){var n,r,i=!1;return(0,We.of)(e).pipe((n=t.paramsInheritanceStrategy,r=t.ngModule.injector,(0,Ye.zg)(function(e){var t=e.targetSnapshot,i=e.guards.canActivateChecks;if(!i.length)return(0,We.of)(e);var a=0;return(0,$k.D)(i).pipe(Qe(function(e){return function(e,t,n,r){return function(e,t,n,r){var i=Object.keys(e);if(0===i.length)return(0,We.of)({});var a={};return(0,$k.D)(i).pipe((0,Ye.zg)(function(i){return function(e,t,n,r){var i=ex(e,t,r);return _w(i.resolve?i.resolve(t,n):i(t,n))}(e[i],t,n,r).pipe((0,zb.b)(function(e){a[i]=e}))}),Ob(1),(0,Ye.zg)(function(){return Object.keys(a).length===i.length?(0,We.of)(a):vb.E}))}(e._resolve,e,t,r).pipe((0,nt.U)(function(t){return e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),r_(e,n).resolve),null}))}(e.route,t,n,r)}),(0,zb.b)(function(){return a++}),Ob(1),(0,Ye.zg)(function(t){return a===i.length?(0,We.of)(e):vb.E}))})),(0,zb.b)({next:function(){return i=!0},complete:function(){i||(t.restoreHistory(e),t.cancelNavigationTransition(e,"At least one route resolver didn't emit any value."))}}))}),(0,zb.b)(function(e){var n=new aw(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}))}),hx(function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,a=e.rawUrl,o=e.extras,s=o.skipLocationChange,u=o.replaceUrl;return t.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:a,skipLocationChange:!!s,replaceUrl:!!u})}),(0,nt.U)(function(e){var n=function(e,t,n){var r=l_(e,t._root,n?n._root:void 0);return new e_(r,t)}(t.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:n})}),(0,zb.b)(function(e){t.currentUrlTree=e.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(t.currentUrlTree,e.rawUrl),t.routerState=e.targetRouterState,"deferred"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,e),t.browserUrlTree=e.urlAfterRedirects)}),(i=t.rootContexts,a=t.routeReuseStrategy,o=function(e){return t.triggerEvent(e)},(0,nt.U)(function(e){return new S_(a,e.targetRouterState,e.currentRouterState,o).activate(i),e})),(0,zb.b)({next:function(){s=!0},complete:function(){s=!0}}),(r=function(){if(!s&&!u){var n="Navigation ID ".concat(e.id," is not equal to the current navigation id ").concat(t.navigationId);"replace"===t.canceledNavigationResolution?(t.restoreHistory(e),t.cancelNavigationTransition(e,n)):t.cancelNavigationTransition(e,n)}t.currentNavigation=null},function(e){return e.lift(new Wb(r))}),Rb(function(r){if(u=!0,(s=r)&&s.ngNavigationCancelingError){var i=C_(r.url);i||(t.navigated=!0,t.restoreHistory(e,!0));var a=new Xb(e.id,t.serializeUrl(e.extractedUrl),r.message);n.next(a),i?setTimeout(function(){var n=t.urlHandlingStrategy.merge(r.url,t.rawUrlTree);t.scheduleNavigation(n,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{t.restoreHistory(e,!0);var o=new ew(e.id,t.serializeUrl(e.extractedUrl),r);n.next(o);try{e.resolve(t.errorHandler(r))}catch(Cc){e.reject(Cc)}}var s;return vb.E}))}))}},{key:"resetRootComponentType",value:function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}},{key:"setTransition",value:function(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(t){var n=e.extractLocationChangeInfoFromEvent(t);e.shouldScheduleNavigation(e.lastLocationChangeInfo,n)&&setTimeout(function(){var t=n.source,r=n.state,i=n.urlTree,a={replaceUrl:!0};if(r){var o=Object.assign({},r);delete o.navigationId,delete o.\u0275routerPageId,0!==Object.keys(o).length&&(a.state=o)}e.scheduleNavigation(i,t,r,a)},0),e.lastLocationChangeInfo=n}))}},{key:"extractLocationChangeInfoFromEvent",value:function(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}},{key:"shouldScheduleNavigation",value:function(e,t){if(!e)return!0;var n=t.urlTree.toString()===e.urlTree.toString();return!(t.transitionId===e.transitionId&&n&&("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source))}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(e){this.events.next(e)}},{key:"resetConfig",value:function(e){P_(e),this.config=e.map(L_),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}},{key:"createUrlTree",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.relativeTo,r=t.queryParams,i=t.fragment,a=t.queryParamsHandling,o=t.preserveFragment,s=n||this.routerState.root,c=o?this.currentUrlTree.fragment:i,l=null;switch(a){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=r||null}return null!==l&&(l=this.removeEmptyProps(l)),function(e,t,n,r,i){if(0===n.length)return p_(t.root,t.root,t,r,i);var a=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new g_(!0,0,e);var t=0,n=!1,r=e.reduce(function(e,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var a={};return ww(r.outlets,function(e,t){a[t]="string"==typeof e?e.split("/"):e}),[].concat(u(e),[{outlets:a}])}if(r.segmentPath)return[].concat(u(e),[r.segmentPath])}return"string"!=typeof r?[].concat(u(e),[r]):0===i?(r.split("/").forEach(function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[].concat(u(e),[r])},[]);return new g_(n,t,r)}(n);if(a.toRoot())return p_(t.root,new Rw([],{}),t,r,i);var o=function(e,t,n){if(e.isAbsolute)return new m_(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){var r=n.snapshot._urlSegment;return new m_(r,r===t.root,0)}var i=f_(e.commands[0])?0:1;return function(e,t,n){for(var r=e,i=t,a=n;a>i;){if(a-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new m_(r,!1,i-a)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,e.numberOfDoubleDots)}(a,t,e),s=o.processChildren?k_(o.segmentGroup,o.index,a.commands):y_(o.segmentGroup,o.index,a.commands);return p_(o.segmentGroup,s,t,r,i)}(s,this.currentUrlTree,e,l,null!=c?c:null)}},{key:"navigateByUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1},n=C_(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(e){for(var t=0;t<e.length;t++){var n=e[t];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(t))}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}},{key:"serializeUrl",value:function(e){return this.urlSerializer.serialize(e)}},{key:"parseUrl",value:function(e){var t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}},{key:"isActive",value:function(e,t){var n;if(n=!0===t?Object.assign({},wx):!1===t?Object.assign({},_x):t,C_(e))return Tw(this.currentUrlTree,e,n);var r=this.parseUrl(e);return Tw(this.currentUrlTree,r,n)}},{key:"removeEmptyProps",value:function(e){return Object.keys(e).reduce(function(t,n){var r=e[n];return null!=r&&(t[n]=r),t},{})}},{key:"processNavigations",value:function(){var e=this;this.navigations.subscribe(function(t){e.navigated=!0,e.lastSuccessfulId=t.id,e.currentPageId=t.targetPageId,e.events.next(new $b(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,t.resolve(!0)},function(t){e.console.warn("Unhandled Navigation Error: ")})}},{key:"scheduleNavigation",value:function(e,t,n,r,i){var a,o;if(this.disposed)return Promise.resolve(!1);var s,u,c,l=this.getTransition(),h="imperative"!==t&&"imperative"===(null==l?void 0:l.source),f=(this.lastSuccessfulId===l.id||this.currentNavigation?l.rawUrl:l.urlAfterRedirects).toString()===e.toString();if(h&&f)return Promise.resolve(!0);i?(s=i.resolve,u=i.reject,c=i.promise):c=new Promise(function(e,t){s=e,u=t});var d,p=++this.navigationId;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),d=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(o=this.browserPageId)&&void 0!==o?o:0)+1):d=0,this.setTransition({id:p,targetPageId:d,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:s,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(function(e){return Promise.reject(e)})}},{key:"setBrowserUrl",value:function(e,t){var n=this.urlSerializer.serialize(e),r=Object.assign(Object.assign({},t.extras.state),this.generateNgRouterState(t.id,t.targetPageId));this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}},{key:"restoreHistory",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("computed"===this.canceledNavigationResolution){var i=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(t=this.currentNavigation)||void 0===t?void 0:t.finalUrl)||0===i?this.currentUrlTree===(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)&&0===i&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}},{key:"resetState",value:function(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}},{key:"cancelNavigationTransition",value:function(e,t){var n=new Xb(e.id,this.serializeUrl(e.extractedUrl),t);this.triggerEvent(n),e.resolve(!1)}},{key:"generateNgRouterState",value:function(e,t){return"computed"===this.canceledNavigationResolution?{navigationId:e,"\u0275routerPageId":t}:{navigationId:e}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(a.DyG),a.LFG(Ow),a.LFG(gx),a.LFG(N),a.LFG(a.zs3),a.LFG(a.v3s),a.LFG(a.Sil),a.LFG(void 0))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),Sx=function(){var e=function(){function e(t,n,r,i,a){v(this,e),this.router=t,this.route=n,this.commands=[],this.onChanges=new Xk.xQ,null==r&&i.setAttribute(a.nativeElement,"tabindex","0")}return p(e,[{key:"ngOnChanges",value:function(e){this.onChanges.next(this)}},{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"onClick",value:function(){var e={skipLocationChange:Ix(this.skipLocationChange),replaceUrl:Ix(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ix(this.preserveFragment)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(xx),a.Y36(n_),a.$8M("tabindex"),a.Y36(a.Qsj),a.Y36(a.SBq))},e.\u0275dir=a.lG2({type:e,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,t){1&e&&a.NdJ("click",function(){return t.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[a.TTD]}),e}(),Tx=function(){var e=function(){function e(t,n,r){var i=this;v(this,e),this.router=t,this.route=n,this.locationStrategy=r,this.commands=[],this.onChanges=new Xk.xQ,this.subscription=t.events.subscribe(function(e){e instanceof $b&&i.updateTargetUrlAndHref()})}return p(e,[{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"ngOnChanges",value:function(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(e,t,n,r,i){if(0!==e||t||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var a={skipLocationChange:Ix(this.skipLocationChange),replaceUrl:Ix(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ix(this.preserveFragment)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(xx),a.Y36(n_),a.Y36(A))},e.\u0275dir=a.lG2({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&a.NdJ("click",function(e){return t.onClick(e.button,e.ctrlKey,e.shiftKey,e.altKey,e.metaKey)}),2&e&&(a.Ikx("href",t.href,a.LSH),a.uIk("target",t.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[a.TTD]}),e}();function Ix(e){return""===e||!!e}var Ex=function(){var e=function(){function e(t,n,r,i,a,o){var s=this;v(this,e),this.router=t,this.element=n,this.renderer=r,this.cdr=i,this.link=a,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(function(e){e instanceof $b&&s.update()})}return p(e,[{key:"ngAfterContentInit",value:function(){var e=this;(0,We.of)(this.links.changes,this.linksWithHrefs.changes,(0,We.of)(null)).pipe((0,db.J)()).subscribe(function(t){e.update(),e.subscribeToEachLinkOnChanges()})}},{key:"subscribeToEachLinkOnChanges",value:function(){var e,t=this;null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe();var n=[].concat(u(this.links.toArray()),u(this.linksWithHrefs.toArray()),[this.link,this.linkWithHref]).filter(function(e){return!!e}).map(function(e){return e.onChanges});this.linkInputChangesSubscription=(0,$k.D)(n).pipe((0,db.J)()).subscribe(function(e){t.isActive!==t.isLinkActive(t.router)(e)&&t.update()})}},{key:"routerLinkActive",set:function(e){var t=Array.isArray(e)?e:e.split(" ");this.classes=t.filter(function(e){return!!e})}},{key:"ngOnChanges",value:function(e){this.update()}},{key:"ngOnDestroy",value:function(){var e;this.routerEventsSubscription.unsubscribe(),null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe()}},{key:"update",value:function(){var e=this;this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(function(){var t=e.hasActiveLinks();e.isActive!==t&&(e.isActive=t,e.cdr.markForCheck(),e.classes.forEach(function(n){t?e.renderer.addClass(e.element.nativeElement,n):e.renderer.removeClass(e.element.nativeElement,n)}))})}},{key:"isLinkActive",value:function(e){var t="paths"in this.routerLinkActiveOptions?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return function(n){return e.isActive(n.urlTree,t)}}},{key:"hasActiveLinks",value:function(){var e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(xx),a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(a.sBO),a.Y36(Sx,8),a.Y36(Tx,8))},e.\u0275dir=a.lG2({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(e,t,n){var r;(1&e&&(a.Suo(n,Sx,5),a.Suo(n,Tx,5)),2&e)&&(a.iGM(r=a.CRH())&&(t.links=r),a.iGM(r=a.CRH())&&(t.linksWithHrefs=r))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[a.TTD]}),e}(),Cx=function(){var e=function(){function e(t,n,r,i,o){v(this,e),this.parentContexts=t,this.location=n,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.name=i||"primary",t.onChildOutletCreated(this.name,this)}return p(e,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e}},{key:"attach",value:function(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}},{key:"deactivate",value:function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}},{key:"activateWith",value:function(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Ax(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(gx),a.Y36(a.s_b),a.Y36(a._Vd),a.$8M("name"),a.Y36(a.sBO))},e.\u0275dir=a.lG2({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e}(),Ax=function(){function e(t,n,r){v(this,e),this.route=t,this.childContexts=n,this.parent=r}return p(e,[{key:"get",value:function(e,t){return e===n_?this.route:e===gx?this.childContexts:this.parent.get(e,t)}}]),e}(),Rx=p(function e(){v(this,e)}),Dx=function(){function e(){v(this,e)}return p(e,[{key:"preload",value:function(e,t){return(0,We.of)(null)}}]),e}(),Px=function(){var e=function(){function e(t,n,r,i,a){v(this,e),this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new px(n,r,function(e){return t.triggerEvent(new ow(e))},function(e){return t.triggerEvent(new sw(e))})}return p(e,[{key:"setUpPreloading",value:function(){var e=this;this.subscription=this.router.events.pipe(Xe(function(e){return e instanceof $b}),Qe(function(){return e.preload()})).subscribe(function(){})}},{key:"preload",value:function(){var e=this.injector.get(a.h0i);return this.processRoutes(e,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(e,t){var n,r=[],i=l(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.loadChildren&&!a.canLoad&&a._loadedConfig){var o=a._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else a.loadChildren&&!a.canLoad?r.push(this.preloadConfig(e,a)):a.children&&r.push(this.processRoutes(e,a.children))}}catch(s){i.e(s)}finally{i.f()}return(0,$k.D)(r).pipe((0,db.J)(),(0,nt.U)(function(e){}))}},{key:"preloadConfig",value:function(e,t){var n=this;return this.preloadingStrategy.preload(t,function(){return(t._loadedConfig?(0,We.of)(t._loadedConfig):n.loader.load(e.injector,t)).pipe((0,Ye.zg)(function(e){return t._loadedConfig=e,n.processRoutes(e.module,e.routes)}))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(xx),a.LFG(a.v3s),a.LFG(a.Sil),a.LFG(a.zs3),a.LFG(Rx))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),Ox=function(){var e=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};v(this,e),this.router=t,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return p(e,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var e=this;return this.router.events.subscribe(function(t){t instanceof Qb?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=t.navigationTrigger,e.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $b&&(e.lastId=t.id,e.scheduleScrollEvent(t,e.router.parseUrl(t.urlAfterRedirects).fragment))})}},{key:"consumeScrollEvents",value:function(){var e=this;return this.router.events.subscribe(function(t){t instanceof fw&&(t.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))})}},{key:"scheduleScrollEvent",value:function(e,t){this.router.triggerEvent(new fw(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(xx),a.LFG(ue),a.LFG(void 0))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),Nx=new a.OlP("ROUTER_CONFIGURATION"),Lx=new a.OlP("ROUTER_FORROOT_GUARD"),Mx=[N,{provide:Ow,useClass:Nw},{provide:xx,useFactory:function(e,t,n,r,i,a,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,l=new xx(null,e,t,n,r,i,a,kw(o));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(s,l),s.enableTracing&&l.events.subscribe(function(e){var t,n;null===(t=console.group)||void 0===t||t.call(console,"Router Event: ".concat(e.constructor.name)),console.log(e.toString()),console.log(e),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[Ow,gx,N,a.zs3,a.v3s,a.Sil,dx,Nx,[function(){return p(function e(){v(this,e)})}(),new a.FiY],[function(){return p(function e(){v(this,e)})}(),new a.FiY]]},gx,{provide:n_,useFactory:function(e){return e.routerState.root},deps:[xx]},{provide:a.v3s,useClass:a.EAV},Px,Dx,function(){function e(){v(this,e)}return p(e,[{key:"preload",value:function(e,t){return t().pipe(Rb(function(){return(0,We.of)(null)}))}}]),e}(),{provide:Nx,useValue:{enableTracing:!1}}];function Zx(){return new a.PXZ("Router",xx)}var Ux=function(){var e=function(){function e(t,n){v(this,e)}return p(e,null,[{key:"forRoot",value:function(t,n){return{ngModule:e,providers:[Mx,jx(t),{provide:Lx,useFactory:Vx,deps:[[xx,new a.FiY,new a.tp0]]},{provide:Nx,useValue:n||{}},{provide:A,useFactory:qx,deps:[f,[new a.tBr(D),new a.FiY],Nx]},{provide:Ox,useFactory:Fx,deps:[xx,ue,Nx]},{provide:Rx,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Dx},{provide:a.PXZ,multi:!0,useFactory:Zx},[Bx,{provide:a.ip1,multi:!0,useFactory:Hx,deps:[Bx]},{provide:Gx,useFactory:zx,deps:[Bx]},{provide:a.tb,multi:!0,useExisting:Gx}]]}}},{key:"forChild",value:function(t){return{ngModule:e,providers:[jx(t)]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(Lx,8),a.LFG(xx,8))},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({}),e}();function Fx(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new Ox(e,t,n)}function qx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new O(e,t):new P(e,t)}function Vx(e){return"guarded"}function jx(e){return[{provide:a.deG,multi:!0,useValue:e},{provide:dx,multi:!0,useValue:e}]}var Bx=function(){var e=function(){function e(t){v(this,e),this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Xk.xQ}return p(e,[{key:"appInitializer",value:function(){var e=this;return this.injector.get(b,Promise.resolve(null)).then(function(){if(e.destroyed)return Promise.resolve(!0);var t=null,n=new Promise(function(e){return t=e}),r=e.injector.get(xx),i=e.injector.get(Nx);return"disabled"===i.initialNavigation?(r.setUpLocationChangeListener(),t(!0)):"enabled"===i.initialNavigation||"enabledBlocking"===i.initialNavigation?(r.hooks.afterPreactivation=function(){return e.initNavigation?(0,We.of)(null):(e.initNavigation=!0,t(!0),e.resultOfPreactivationDone)},r.initialNavigation()):t(!0),n})}},{key:"bootstrapListener",value:function(e){var t=this.injector.get(Nx),n=this.injector.get(Px),r=this.injector.get(Ox),i=this.injector.get(xx),o=this.injector.get(a.z2F);e===o.components[0]&&("enabledNonBlocking"!==t.initialNavigation&&void 0!==t.initialNavigation||i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"ngOnDestroy",value:function(){this.destroyed=!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(a.zs3))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}();function Hx(e){return e.appInitializer.bind(e)}function zx(e){return e.bootstrapListener.bind(e)}var Gx=new a.OlP("Router Initializer"),Kx=i(205),Wx=i(3637),Jx=function(){function e(t,n){v(this,e),this.dueTime=t,this.scheduler=n}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new Yx(e,this.dueTime,this.scheduler))}}]),e}(),Yx=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e)).dueTime=r,a.scheduler=i,a.debouncedSubscription=null,a.lastValue=null,a.hasValue=!1,a}return p(n,[{key:"_next",value:function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Qx,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}},{key:"clearDebounce",value:function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}]),n}($e.L);function Qx(e){e.debouncedNext()}var $x=i(8939),Xx=i(156),eS=function(){function e(t,n,r){v(this,e),this._delegate=t,this.task=n,this.ref=r}return p(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),tS=function(){function e(t,n){v(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return p(e,[{key:"snapshot",get:function(){return new eS(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then(function(t){if(e)return e(new eS(t,n,n._ref))},t)}},{key:"on",value:function(e,t,n,r){var i,a=this;return t&&(i="function"==typeof t?function(e){return t(new eS(e,a,a._ref))}:{next:t.next?function(e){return t.next(new eS(e,a,a._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}]),e}(),nS=function(){function e(t,n){v(this,e),this._delegate=t,this._service=n}return p(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map(function(t){return new rS(t,e._service)})}},{key:"items",get:function(){var e=this;return this._delegate.items.map(function(t){return new rS(t,e._service)})}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),rS=function(){function e(t,n){v(this,e),this._delegate=t,this.storage=n}return p(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){return new e(function(e,t){return Mr(e,t)}(this._delegate,t),this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new tS(function(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Dr(e,new ar(t),n)}(e=(0,Gt.m9)(e),t,n)}(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xn.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=tr(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new tS(new Dr(this._delegate,new ar(r.data,!0),i),this)}},{key:"listAll",value:function(){var e,t=this;return(e=this._delegate,function(e){var t={prefixes:[],items:[]};return Or(e,t).then(function(){return t})}(e=(0,Gt.m9)(e))).then(function(e){return new nS(e,t.storage)})}},{key:"list",value:function(e){var t=this;return function(e,t){return Lr(e=(0,Gt.m9)(e),t)}(this._delegate,e||void 0).then(function(e){return new nS(e,t.storage)})}},{key:"getMetadata",value:function(){return e=this._delegate,function(e){e._throwIfRoot("getMetadata");var t=kr(e.storage,e._location,hr());return e.storage.makeRequestWithTokens(t,Rr)}(e=(0,Gt.m9)(e));var e}},{key:"updateMetadata",value:function(e){return function(e,t){return function(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=Gn(t.fullServerUrl(),e.host,e._protocol),a=dr(n,r),o=e.maxOperationRetryTime,s=new pr(i,"PATCH",gr(e,r),o);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=a,s.errorHandler=yr(t),s}(e.storage,e._location,t,hr());return e.storage.makeRequestWithTokens(n,Rr)}(e=(0,Gt.m9)(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return e=this._delegate,function(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=Gn(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new pr(r,"GET",function(e,t){return function(n,r){var i=fr(e,r,t);return vr(null!==i),function(e,t,n,r){var i=or(t);if(null===i)return null;if(!jn(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map(function(t){var i=e.fullPath;return Gn("/b/"+o(e.bucket)+"/o/"+o(i),n,r)+Kn({alt:"media",token:t})})[0]}(i,r,e.host,e._protocol)}}(e,n),i);return a.errorHandler=yr(t),a}(e.storage,e._location,hr());return e.storage.makeRequestWithTokens(t,Rr).then(function(e){if(null===e)throw new Rn("no-download-url","The given file does not have any download URLs.");return e})}(e=(0,Gt.m9)(e));var e}},{key:"delete",value:function(){return this._throwIfRoot("delete"),Vr(this._delegate)}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw Zn(e)}}]),e}(),iS=function(){function e(t,n){v(this,e),this.app=t,this._delegate=n}return p(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(aS(e))throw Ln("ref() expected a child path but got a URL, use refFromURL instead.");return new rS(jr(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!aS(e))throw Ln("refFromURL() expected a full URL but got a child path, use ref() instead.");try{qn.makeFromUrl(e,this._delegate.host)}catch(t){throw Ln("refFromUrl() expected a valid full URL but got an invalid one.")}return new rS(jr(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"==typeof i?i:(0,Gt.Sg)(i,e.app.options.projectId))}(e,t,n,r)}(this._delegate,e,t,n)}}]),e}();function aS(e){return/^[A-Za-z]+:\/\//.test(e)}function oS(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new iS(r,i)}!function(e){var t={TaskState:Tr,TaskEvent:Sr,StringFormat:Xn,Storage:iS,Reference:rS};e.INTERNAL.registerComponent(new Jt.wA("storage-compat",oS,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.14")}(Xx.Z);var sS=i(7841);function uS(e){var t=function(e){return new Je.y(function(t){var n=function(e){return t.next(e)};n(e.snapshot);var r=e.on("state_changed",n);return e.then(function(e){n(e),t.complete()},function(r){n(e.snapshot),function(e){t.error(e)}(r)}),function(){r()}}).pipe(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wx.P;return function(n){return n.lift(new Jx(e,t))}}(0))}(e);return{task:e,then:e.then.bind(e),catch:e.catch.bind(e),pause:e.pause.bind(e),cancel:e.cancel.bind(e),resume:e.resume.bind(e),snapshotChanges:function(){return t},percentageChanges:function(){return t.pipe((0,nt.U)(function(e){return e.bytesTransferred/e.totalBytes*100}))}}}function cS(e){return{getDownloadURL:function(){return(0,We.of)(void 0).pipe(Mt.fc,kb(function(){return e.getDownloadURL()}),Mt.iC)},getMetadata:function(){return(0,We.of)(void 0).pipe(Mt.fc,kb(function(){return e.getMetadata()}),Mt.iC)},delete:function(){return(0,$k.D)(e.delete())},child:function(t){return cS(e.child(t))},updateMetadata:function(t){return(0,$k.D)(e.updateMetadata(t))},put:function(t,n){return uS(e.put(t,n))},putString:function(t,n,r){return uS(e.putString(t,n,r))},list:function(t){return(0,$k.D)(e.list(t))},listAll:function(){return(0,$k.D)(e.listAll())}}}var lS=new a.OlP("angularfire2.storageBucket"),hS=new a.OlP("angularfire2.storage.maxUploadRetryTime"),fS=new a.OlP("angularfire2.storage.maxOperationRetryTime"),dS=new a.OlP("angularfire2.storage.use-emulator"),pS=function(){var e=function(){function e(t,n,r,i,a,o,s,c,l,h){v(this,e);var f=(0,$x.on)(t,a,n);this.storage=(0,$x.cc)("".concat(f.name,".storage.").concat(r),"AngularFireStorage",f.name,function(){var e=a.runOutsideAngular(function(){return f.storage(r||void 0)}),t=l;return t&&e.useEmulator.apply(e,u(t)),s&&e.setMaxUploadRetryTime(s),c&&e.setMaxOperationRetryTime(c),e},[s,c])}return p(e,[{key:"ref",value:function(e){return cS(this.storage.ref(e))}},{key:"refFromURL",value:function(e){return cS(this.storage.refFromURL(e))}},{key:"upload",value:function(e,t,n){return cS(this.storage.ref(e)).put(t,n)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG($x.Dh),a.LFG($x.xv,8),a.LFG(lS,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Mt.HU),a.LFG(hS,8),a.LFG(fS,8),a.LFG(dS,8),a.LFG(An,8))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e}(),vS=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({}),e}(),gS=function(){var e=p(function e(){v(this,e),sS.Z.registerVersion("angularfire",Mt.q4.full,"gcs-compat")});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[pS],imports:[vS]}),e}(),mS=function(){var e=function(){function e(t,n,r){v(this,e),this.http=t,this.firestore=n,this.firebaseStorage=r,this.liveStories=[],this.liveStories$=new Xk.xQ,this.myStories=[],this.myStories$=new Xk.xQ,this.myJunkies=[],this.myJunkies$=new Xk.xQ,this.allJunkies=[],this.allJunkies$=new Xk.xQ,this.erc721WhiteList=["SJ","OCMONK","DUSK","NFFMP"],this.getMyStories(),this.getStoriesFromStorage(),this.getAllJunkies()}return p(e,[{key:"getMyJunkies",value:function(e){var t=this;this.myJunkies=[],e&&this.http.get("https://api.etherscan.io/api?module=account&action=tokennfttx&address=".concat(e,"&startblock=0&endblock=999999999&sort=asc&apikey=SDHZ9FPMUK55TY5KAU2FBS222DKPIITD65")).subscribe(function(n){n.result.forEach(function(n){if(t.erc721WhiteList.includes(n.tokenSymbol))if(n.to.toLowerCase()===e.toLowerCase())t.myJunkies.push(n.tokenID);else{var r=t.myJunkies.indexOf(n.tokenID);t.myJunkies.splice(r,1)}}),t.myJunkies$.next(t.myJunkies)})}},{key:"getRawStory",value:function(e){return this.http.get("assets/stories/".concat(e,".md"),{responseType:"text"})}},{key:"getStoryContent",value:function(e){return this.http.get(e,{responseType:"text"})}},{key:"getAllJunkies",value:function(){var e=this;this.http.get("assets/junkies.json").subscribe(function(t){e.allJunkies=t,e.allJunkies$.next(e.allJunkies)})}},{key:"getJunkies",value:function(){return this.http.get("assets/junkies.json")}},{key:"saveStory",value:function(e,t){var n=new Date,r=n.toDateString()+" "+n.toLocaleTimeString(),i=!1;""===e.author&&(e.author="Change Me!"),""===e.id?(e.id=n.toJSON(),e.createdOn=r,i=!0):e.modifiedOn=r,e.tags=e.tags.join(" ").toLowerCase().split(" "),e.casts=e.casts.join(" ").toLowerCase().split(" "),e.id.includes(":")?this.saveStoryToLocal(e,i):t.role>2&&this.saveStoryToStorage(e)}},{key:"saveStoryToLocal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)this.myStories.push(e),localStorage.setItem("junkyardStories.local.".concat(e.id),e.content);else{var n=this.myStories.findIndex(function(t){return t.id===e.id});this.myStories[n]=e,this.myStories.find(function(t){return t.id===e.id}),localStorage.setItem("junkyardStories.local.".concat(e.id),e.content)}this.updateMyStories()}},{key:"publishStory",value:function(e){var t=zk(this.firestore,"stories/".concat(e));Qk(t,{state:"published"}),this.getStoriesFromStorage()}},{key:"addStoryViewCount",value:function(e){var t=this;return(0,Qt.Z)(regeneratorRuntime.mark(function n(){var r,i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=zk(t.firestore,"stories",e),n.next=3,Gk(r);case 3:(i=n.sent).exists()&&(a=i.data(),Qk(r,{views:a.views+1}));case 5:case"end":return n.stop()}},n)}))()}},{key:"getLikesByStoryId",value:function(e){var t=this;return(0,Qt.Z)(regeneratorRuntime.mark(function n(){var r,i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=zk(t.firestore,"story-likes",e),n.next=3,Gk(r);case 3:return i=n.sent,a={id:e,addresses:[]},n.abrupt("return",(i.exists()&&(a=i.data()),a));case 6:case"end":return n.stop()}},n)}))()}},{key:"updateStoryLikes",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this;return(0,Qt.Z)(regeneratorRuntime.mark(function i(){var a,o,s,u,c,l,h,f;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=t.toLowerCase(),s=zk(r.firestore,"stories",e),i.next=4,Gk(s);case 4:if(u=i.sent,c={id:e,addresses:[]},!u.exists()){i.next=13;break}return l=zk(r.firestore,"story-likes",e),i.next=10,Gk(l);case 10:(h=i.sent).exists()&&(c=h.data()),n&&!(null===(a=c.addresses)||void 0===a?void 0:a.includes(t))?c.addresses.push(t):!n&&(null===(o=c.addresses)||void 0===o?void 0:o.includes(t))&&(f=c.addresses.indexOf(t,0))>-1&&c.addresses.splice(f,1),Yk(l,{id:c.id,addresses:c.addresses}),Qk(s,{likes:c.addresses.length});case 13:return i.abrupt("return",c);case 14:case"end":return i.stop()}},i)}))()}},{key:"saveStoryToStorage",value:function(e){var t=this;return(0,Qt.Z)(regeneratorRuntime.mark(function n(){var r,i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(r=JSON.parse(JSON.stringify(e))).content="",i=zk(t.firestore,"stories/".concat(r.id)),Yk(i,r),n.next=6,t.getStoriesFromStorage();case 6:return a=Xr(t.firebaseStorage,"stories/".concat(r.id,".md")),n.next=9,ei(a,e.content);case 9:case"end":return n.stop()}},n)}))()}},{key:"getMyStories",value:function(){var e,t=null===(e=localStorage.getItem("junkyardStories.local.myStories"))||void 0===e?void 0:e.toString(),n=JSON.parse(t||"[]");n.forEach(function(e){e.content=localStorage.getItem("junkyardStories.local.".concat(e.id))||""}),this.myStories=n}},{key:"deleteStoryDraft",value:function(e){localStorage.removeItem("junkyardStories.local.".concat(e.id));var t=this.myStories.findIndex(function(t){return t.id===e.id});this.myStories.splice(t,1),this.updateMyStories()}},{key:"deleteStoryFromStorage",value:function(e){var t=this;return(0,Qt.Z)(regeneratorRuntime.mark(function n(){var r,i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=zk(t.firestore,"stories/".concat(e.id)),n.next=4,Hk(r);case 4:n.next=8;break;case 6:n.prev=6,n.t0=n.catch(0);case 8:return n.prev=8,i=zk(t.firestore,"story-likes/".concat(e.id)),n.next=12,Hk(i);case 12:n.next=16;break;case 14:n.prev=14,n.t1=n.catch(8);case 16:return n.prev=16,a=Xr(t.firebaseStorage,"stories/".concat(e.id,".md")),n.next=20,Qr(a);case 20:n.next=24;break;case 22:n.prev=22,n.t2=n.catch(16);case 24:return n.next=26,t.getStoriesFromStorage();case 26:case"end":return n.stop()}},n,null,[[0,6],[8,14],[16,22]])}))()}},{key:"submitForReview",value:function(e,t){var n=zk(this.firestore,"stories/".concat(e.id));Yk(n,e);var r=Xr(this.firebaseStorage,"stories/".concat(e.id,".md"));return ei(r,t)}},{key:"getStoriesFromStorage",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Jk(Bk(e.firestore,"stories")),t.next=3,Kk(n);case 3:r=t.sent,e.liveStories=[],r.forEach(function(t){var n=t.data();e.liveStories.push(n)}),e.liveStories$.next(e.liveStories);case 5:case"end":return t.stop()}},t)}))()}},{key:"getAvatar",value:function(e){return(e=e.toLowerCase().trim()).includes("ocm#")?"https://d3q7x2s6555pey.cloudfront.net/png/".concat(e=e.replace("ocm#",""),".png"):e.includes("dusk#")?"https://duskbreakers.gg/breaker_images/".concat(e=e.replace("dusk#",""),".png"):e.includes("sj#")?(e=e.replace("sj#",""),"https://static.shinji.xyz/unit-00/nft-images/".concat(this.allJunkies[parseInt(e)].hash,".png")):"https://static.shinji.xyz/unit-00/nft-images/".concat(this.allJunkies[parseInt(e)].hash,".png")}},{key:"getAvatarLink",value:function(e){return(e=e.toLowerCase().trim()).includes("ocm#")?"https://onchainmonkey.com/gallery/ocm-genesis/".concat(e=e.replace("ocm#","")):e.includes("dusk#")?"https://duskbreakers.gg/gallery?breakerId=".concat(e=e.replace("dusk#","")):e.includes("sj#")?"https://shonenjunk.xyz/unit-00/gallery/".concat(e=e.replace("sj#","")):"https://shonenjunk.xyz/unit-00/gallery/".concat(e)}},{key:"updateMyStories",value:function(){var e=[];this.myStories.forEach(function(t){e.push({id:t.id,seriesId:t.seriesId,seriesName:t.seriesName,title:t.title,subtitle:t.subtitle,cover:t.cover,description:t.description,authorId:t.authorId,author:t.author,content:"",casts:t.casts,tags:t.tags,likes:t.likes,views:t.views,modifiedOn:t.modifiedOn,createdOn:t.createdOn,state:t.state})}),this.myStories$.next(e),localStorage.setItem("junkyardStories.local.myStories",JSON.stringify(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(wt),a.LFG(Mk),a.LFG(Br))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}(),yS=p(function e(){v(this,e),this.id="",this.role=0,this.name=""}),kS=function(){var e=function(){function e(t,n){var r=this;v(this,e),this.storyboardService=t,this.firestore=n,this.user=new yS,this.user$=new Xk.xQ,this.activeAccount="",this.myJunkies=[],this.hasMetaMask&&(window.ethereum.on("accountsChanged",function(){window.location.reload()}),window.ethereum.on("chainChanged",function(){window.location.reload()})),this.storyboardService.myJunkies$.subscribe(function(e){r.myJunkies=e,r.myJunkies.length>0&&r.user.role<2&&(r.user.role=2,r.user$.next(r.user))})}return p(e,[{key:"hasMetaMask",get:function(){return Boolean(window.ethereum&&window.ethereum.isMetaMask)}},{key:"isGenesisHolder",get:function(){return this.myJunkies.length>0}},{key:"isCorrectChain",get:function(){try{return"0x1"===window.ethereum.chainId}catch(im){return!1}}},{key:"switchNetwork",value:function(){return(0,Qt.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x1"}]});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}},e,null,[[0,5]])}))()}},{key:"requestAccount",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:return t.next=5,e.getSelectedAccount();case 5:t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}},t,null,[[0,7]])}))()}},{key:"getSelectedAccount",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.activeAccount="",!e.hasMetaMask){t.next=9;break}return t.next=3,window.ethereum.request({method:"eth_accounts"});case 3:return n=t.sent,e.activeAccount=n[0]||"",e.user.id=e.activeAccount,e.storyboardService.getMyJunkies(e.activeAccount),t.next=9,e.getUser(e.activeAccount);case 9:case"end":return t.stop()}},t)}))()}},{key:"getUser",value:function(e){var t=this;return(0,Qt.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=Jk(Bk(t.firestore,"users")),n.next=3,Kk(r);case 3:i=n.sent,t.user.id=e,t.user.name=e,t.user.role=1,i.forEach(function(n){var r=n.data();r.id.trim().toLowerCase()===e.trim().toLowerCase()&&(t.user=r)}),t.user$.next(t.user);case 5:case"end":return n.stop()}},n)}))()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(mS),a.LFG(Mk))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}();function bS(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"a",16),a.NdJ("click",function(){return a.CHM(n),a.oxw(2).connect()}),a.TgZ(1,"span",17),a._UZ(2,"img",18),a.qZA(),a.TgZ(3,"strong"),a._uU(4),a.qZA(),a.qZA()}if(2&e){var r=a.oxw(2);a.xp6(4),a.Oqu(r.isCorrectNetwork?"Connect Wallet":"Switch Network")}}function wS(e,t){if(1&e&&(a.TgZ(0,"a",19),a.TgZ(1,"strong"),a._uU(2),a.qZA(),a.qZA()),2&e){var n=a.oxw(2);a.xp6(2),a.Oqu(n.shortEthAccount)}}function _S(e,t){if(1&e&&(a.TgZ(0,"div",11),a.TgZ(1,"div",12),a.TgZ(2,"div",13),a.YNc(3,bS,5,1,"a",14),a.YNc(4,wS,3,1,"a",15),a.qZA(),a.qZA(),a.qZA()),2&e){var n=a.oxw();a.xp6(3),a.Q6J("ngIf",!n.ethAccount),a.xp6(1),a.Q6J("ngIf",n.ethAccount)}}var xS=function(){return["/"]},SS=function(){return["/story-editor"]},TS=function(){return["is-active"]},IS=function(){var e=function(){function e(t){v(this,e),this.accountService=t,this.isProcessing=!1,this.showMenu=!1}return p(e,[{key:"hasMetaMask",get:function(){return this.accountService.hasMetaMask}},{key:"ethAccount",get:function(){return""!==this.accountService.activeAccount}},{key:"isCorrectNetwork",get:function(){return this.accountService.isCorrectChain}},{key:"shortEthAccount",get:function(){return this.accountService.activeAccount?"".concat(this.accountService.activeAccount.substr(0,6),"...").concat(this.accountService.activeAccount.substr(38,4)):""}},{key:"connect",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isProcessing){t.next=15;break}if(e.isProcessing=!0,t.prev=2,t.t0=e.accountService.isCorrectChain,t.t0){t.next=7;break}return t.next=7,e.accountService.switchNetwork();case 7:return t.next=9,e.accountService.requestAccount();case 9:e.isProcessing=!1,t.next=15;break;case 12:t.prev=12,t.t1=t.catch(2),e.isProcessing=!1;case 15:case"end":return t.stop()}},t,null,[[2,12]])}))()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(kS))},e.\u0275cmp=a.Xpm({type:e,selectors:[["navigation-widget"]],decls:15,vars:11,consts:[["role","navigation","aria-label","main navigation",1,"navbar"],[1,"navbar-brand"],[1,"navbar-item","brand",3,"routerLink"],["src","assets/images/shonen_junk_logo.svg","height","30"],[1,"title","heading","is-4"],["role","button","aria-label","menu","aria-expanded","false","data-target","navbarBasicExample",1,"navbar-burger",3,"click"],["aria-hidden","true"],["id","navbarBasicExample",1,"navbar-menu"],[1,"navbar-start"],[1,"navbar-item",3,"routerLink","routerLinkActive"],["class","navbar-end",4,"ngIf"],[1,"navbar-end"],[1,"navbar-item"],[1,"buttons"],["class","button is-info",3,"click",4,"ngIf"],["class","button is-success",4,"ngIf"],[1,"button","is-info",3,"click"],[1,"icon"],["src","assets/images/metamask.svg"],[1,"button","is-success"]],template:function(e,t){1&e&&(a.TgZ(0,"nav",0),a.TgZ(1,"div",1),a.TgZ(2,"a",2),a._UZ(3,"img",3),a.TgZ(4,"h1",4),a._uU(5,"Junkyard Stories"),a.qZA(),a.qZA(),a.TgZ(6,"a",5),a.NdJ("click",function(){return t.showMenu=!t.showMenu}),a._UZ(7,"span",6),a._UZ(8,"span",6),a._UZ(9,"span",6),a.qZA(),a.qZA(),a.TgZ(10,"div",7),a.TgZ(11,"div",8),a.TgZ(12,"a",9),a._uU(13," My Stories "),a.qZA(),a.qZA(),a.YNc(14,_S,5,2,"div",10),a.qZA(),a.qZA()),2&e&&(a.xp6(2),a.Q6J("routerLink",a.DdM(8,xS)),a.xp6(4),a.ekj("is-active",t.showMenu),a.xp6(4),a.ekj("is-active",t.showMenu),a.xp6(2),a.Q6J("routerLink",a.DdM(9,SS))("routerLinkActive",a.DdM(10,TS)),a.xp6(2),a.Q6J("ngIf",t.hasMetaMask))},directives:[Tx,Ex,Y],styles:[".navbar[_ngcontent-%COMP%]{background-color:#333}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.navbar[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{font-family:Bangers}.navbar[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:30px}.navbar[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#ff0;margin-bottom:0}.navbar[_ngcontent-%COMP%]   .navbar-item.is-active[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   .navbar-item[_ngcontent-%COMP%]:active, .navbar[_ngcontent-%COMP%]   .navbar-item[_ngcontent-%COMP%]:focus, .navbar[_ngcontent-%COMP%]   .navbar-item[_ngcontent-%COMP%]:hover{background-color:#0065ff}.navbar[_ngcontent-%COMP%]   .navbar-menu[_ngcontent-%COMP%]{background-color:#333}.navbar[_ngcontent-%COMP%]   .navbar-end[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{font-family:Verdana;letter-spacing:1px}"]}),e}();function ES(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"a",3),a.NdJ("click",function(){return a.CHM(n),a.oxw().activate="in-review"}),a._uU(1,"Review"),a.qZA()}if(2&e){var r=a.oxw();a.ekj("is-active","in-review"===r.activate)}}function CS(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"a",3),a.NdJ("click",function(){return a.CHM(n),a.oxw().activate="published"}),a._uU(1,"Published"),a.qZA()}if(2&e){var r=a.oxw();a.ekj("is-active","published"===r.activate)}}var AS=function(e){return["/storyboard",e]};function RS(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"a",19),a.NdJ("click",function(){var e=a.CHM(n).$implicit;return a.oxw().select(e)}),a.TgZ(1,"div",20),a.TgZ(2,"div",21),a.TgZ(3,"span",12),a.TgZ(4,"a",22),a._uU(5," \u25ba "),a.qZA(),a.TgZ(6,"span",23),a._uU(7),a.qZA(),a.TgZ(8,"span",16),a._uU(9),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){var r=t.$implicit;a.xp6(4),a.Q6J("routerLink",a.VKq(5,AS,r.id)),a.xp6(3),a.Oqu(r.title),a.xp6(1),a.ekj("is-hidden",""===r.subtitle),a.xp6(1),a.Oqu(r.subtitle)}}function DS(e,t){1&e&&(a.TgZ(0,"div",24),a._uU(1," You don't have any "),a.TgZ(2,"strong"),a._uU(3,"Draft"),a.qZA(),a._uU(4," stories yet. "),a.qZA())}function PS(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"a",19),a.NdJ("click",function(){var e=a.CHM(n).$implicit;return a.oxw(2).select(e)}),a.TgZ(1,"div",20),a.TgZ(2,"div",21),a.TgZ(3,"span",12),a.TgZ(4,"a",22),a._uU(5," \u25ba "),a.qZA(),a.TgZ(6,"span",25),a._uU(7),a.qZA(),a.TgZ(8,"span",16),a._uU(9),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){var r=t.$implicit;a.xp6(4),a.Q6J("routerLink",a.VKq(5,AS,r.id)),a.xp6(3),a.Oqu(r.title),a.xp6(1),a.ekj("is-hidden",""===r.subtitle),a.xp6(1),a.Oqu(r.subtitle)}}function OS(e,t){1&e&&(a.TgZ(0,"div",24),a._uU(1," You don't have any stories "),a.TgZ(2,"strong"),a._uU(3,"In-Review"),a.qZA(),a._uU(4," yet. "),a.qZA())}function NS(e,t){if(1&e&&(a.TgZ(0,"div"),a.YNc(1,PS,10,7,"a",8),a.YNc(2,OS,5,0,"div",9),a.qZA()),2&e){var n=a.oxw();a.ekj("is-hidden","in-review"!==n.activate),a.xp6(1),a.Q6J("ngForOf",n.storiesInReview),a.xp6(1),a.Q6J("ngIf",n.storiesInReview.length<1)}}function LS(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"a",19),a.NdJ("click",function(){var e=a.CHM(n).$implicit;return a.oxw(2).select(e)}),a.TgZ(1,"div",20),a.TgZ(2,"div",21),a.TgZ(3,"span",12),a.TgZ(4,"a",22),a._uU(5," \u25ba "),a.qZA(),a.TgZ(6,"span",26),a._uU(7),a.qZA(),a.TgZ(8,"span",16),a._uU(9),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){var r=t.$implicit;a.xp6(4),a.Q6J("routerLink",a.VKq(5,AS,r.id)),a.xp6(3),a.Oqu(r.title),a.xp6(1),a.ekj("is-hidden",""===r.subtitle),a.xp6(1),a.Oqu(r.subtitle)}}function MS(e,t){1&e&&(a.TgZ(0,"div",24),a._uU(1," You don't have any "),a.TgZ(2,"strong"),a._uU(3,"Published"),a.qZA(),a._uU(4," stories yet. "),a.qZA())}function ZS(e,t){if(1&e&&(a.TgZ(0,"div"),a.YNc(1,LS,10,7,"a",8),a.YNc(2,MS,5,0,"div",9),a.qZA()),2&e){var n=a.oxw();a.ekj("is-hidden","published"!==n.activate),a.xp6(1),a.Q6J("ngForOf",n.publishedStories),a.xp6(1),a.Q6J("ngIf",n.publishedStories.length<1)}}var US=function(){var e=function(){function e(t,n){var r=this;v(this,e),this.accountService=t,this.storyboardService=n,this.storySelected=new a.vpe,this.user=new yS,this.activate="drafts",this.myStories=[],this.storiesInReview=[],this.publishedStories=[],this.myStories=n.myStories,this.storyboardService.myStories$.subscribe(function(){r.updateStories()}),this.storyboardService.liveStories$.subscribe(function(){r.updateStories()}),this.accountService.user$.subscribe(function(e){r.user=e,r.updateStories()})}return p(e,[{key:"search",value:function(e){var t;this.updateStories(null!==(t=e.target.value)&&void 0!==t?t:"")}},{key:"select",value:function(e){("published"===e.state||"reviewing"===e.state)&&this.accountService.user.role<3||this.storySelected.emit(e)}},{key:"updateStories",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.myStories=this.storyboardService.myStories.filter(function(e){return e.title.toLowerCase().includes(t.toLowerCase())||e.subtitle.toLowerCase().includes(t.toLowerCase())}),this.accountService.user.role<3?(this.publishedStories=this.storyboardService.liveStories.filter(function(n){return"published"===n.state&&n.authorId.toLowerCase()===e.accountService.user.id.toLowerCase()&&(n.title.toLowerCase().includes(t.toLowerCase())||n.subtitle.toLowerCase().includes(t.toLowerCase()))}),this.storiesInReview=this.storyboardService.liveStories.filter(function(n){return"reviewing"===n.state&&n.authorId.toLowerCase()===e.accountService.user.id.toLowerCase()&&(n.title.toLowerCase().includes(t.toLowerCase())||n.subtitle.toLowerCase().includes(t.toLowerCase()))})):(this.publishedStories=this.storyboardService.liveStories.filter(function(e){return"published"===e.state&&(e.title.toLowerCase().includes(t.toLowerCase())||e.subtitle.toLowerCase().includes(t.toLowerCase()))}),this.storiesInReview=this.storyboardService.liveStories.filter(function(e){return"reviewing"===e.state&&(e.title.toLowerCase().includes(t.toLowerCase())||e.subtitle.toLowerCase().includes(t.toLowerCase()))}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(kS),a.Y36(mS))},e.\u0275cmp=a.Xpm({type:e,selectors:[["my-stories-listing-widget"]],outputs:{storySelected:"storySelected"},decls:165,vars:16,consts:[[1,"panel","is-link",2,"background-color","white"],[1,"panel-heading"],[1,"panel-tabs"],[3,"click"],[3,"is-active","click",4,"ngIf"],[1,"panel-block"],[1,"control"],["type","text","placeholder","Search",1,"input","is-link",3,"keyup"],["class","panel-block is-active",3,"click",4,"ngFor","ngForOf"],["class","notification is-light",4,"ngIf"],[3,"is-hidden",4,"ngIf"],[1,"help",2,"max-height","70vh","overflow-y","scroll"],[1,"heading"],[1,"content"],[1,"tag","is-dark"],[1,"tag","is-info"],[1,"tag"],[1,"tag","is-primary"],[1,"tag","is-warning"],[1,"panel-block","is-active",3,"click"],[1,"columns"],[1,"column"],["target","_blank",1,"button","is-success","is-small","pl-4",3,"routerLink"],[1,"tag","is-dark","ml-3"],[1,"notification","is-light"],[1,"tag","is-info","ml-3"],[1,"tag","is-primary","ml-3"]],template:function(e,t){1&e&&(a.TgZ(0,"article",0),a.TgZ(1,"p",1),a._uU(2," My Stories "),a.qZA(),a.TgZ(3,"p",2),a.TgZ(4,"a",3),a.NdJ("click",function(){return t.activate="drafts"}),a._uU(5,"Local"),a.qZA(),a.YNc(6,ES,2,2,"a",4),a.YNc(7,CS,2,2,"a",4),a.TgZ(8,"a",3),a.NdJ("click",function(){return t.activate="help"}),a._uU(9,"Help?"),a.qZA(),a.qZA(),a.TgZ(10,"div",5),a.TgZ(11,"p",6),a.TgZ(12,"input",7),a.NdJ("keyup",function(e){return t.search(e)}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(13,"div"),a.YNc(14,RS,10,7,"a",8),a.YNc(15,DS,5,0,"div",9),a.qZA(),a.YNc(16,NS,3,4,"div",10),a.YNc(17,ZS,3,4,"div",10),a.TgZ(18,"div",11),a.TgZ(19,"p",12),a._uU(20,"Getting Started"),a.qZA(),a.TgZ(21,"div",13),a._uU(22," The story board player reads the "),a.TgZ(23,"span",14),a._uU(24,"screenplay"),a.qZA(),a._uU(25," line by line in a sequencial manner. Each line constitute as a command. "),a._UZ(26,"br"),a._UZ(27,"br"),a._uU(28,"Don't use multiple commands in a single line. "),a._UZ(29,"br"),a._UZ(30,"br"),a._uU(31,"Don't worry, unsupported command lines will be ignored by the player. "),a.qZA(),a.TgZ(32,"p",12),a._uU(33,"Creating Assets"),a.qZA(),a.TgZ(34,"div",13),a._uU(35," Before junkies and files(images and audio) can be used in your script, they must first be defined. "),a._UZ(36,"br"),a._UZ(37,"br"),a._uU(38,"Use "),a.TgZ(39,"span",15),a._uU(40,"+Junky"),a.qZA(),a._uU(41," or "),a.TgZ(42,"span",15),a._uU(43,"+File"),a.qZA(),a._uU(44," to define them. "),a._UZ(45,"br"),a._UZ(46,"br"),a._uU(47,"Names must be unique. "),a.qZA(),a.TgZ(48,"p",12),a._uU(49,"Using Assets"),a.qZA(),a.TgZ(50,"div",13),a._uU(51," Use "),a.TgZ(52,"span",16),a._uU(53,"[Text Commands]"),a.qZA(),a._uU(54," to show different presentations of texts. Multiple sentences are automatically broken down by the player. "),a._UZ(55,"br"),a.TgZ(56,"span",16),a._uU(57,"Speak"),a.qZA(),a._uU(58," - makes a character speak along with their avatar "),a._UZ(59,"br"),a.TgZ(60,"span",16),a._uU(61,"CC"),a.qZA(),a._uU(62," - closed caption text "),a._UZ(63,"br"),a.TgZ(64,"span",16),a._uU(65,"Narrate"),a.qZA(),a._uU(66," - narrator text "),a._UZ(67,"br"),a.TgZ(68,"span",16),a._uU(69,"Text Effect"),a.qZA(),a._uU(70," - sound effects in text form "),a._UZ(71,"br"),a.TgZ(72,"span",16),a._uU(73,"Title"),a.qZA(),a._uU(74," - show the title and subtitle "),a._UZ(75,"br"),a.TgZ(76,"span",16),a._uU(77,"Scene Title"),a.qZA(),a._uU(78," - show the scene title "),a._UZ(79,"br"),a._UZ(80,"br"),a._uU(81,"Use "),a.TgZ(82,"span",17),a._uU(83,"[File Commands]"),a.qZA(),a._uU(84," to show/hide/play/stop images and audio. "),a._UZ(85,"br"),a.TgZ(86,"span",17),a._uU(87,"Cover"),a.qZA(),a._uU(88," - changes the background image and waits for reader action "),a._UZ(89,"br"),a.TgZ(90,"span",17),a._uU(91,"Backdrop"),a.qZA(),a._uU(92," - changes the background image and proceeds to the next command "),a._UZ(93,"br"),a.TgZ(94,"span",17),a._uU(95,"Popup"),a.qZA(),a._uU(96," - shows an image/gif in the center of the screen "),a._UZ(97,"br"),a.TgZ(98,"span",17),a._uU(99,"BGM"),a.qZA(),a._uU(100," - plays a looping audio "),a._UZ(101,"br"),a.TgZ(102,"span",17),a._uU(103,"Soundclip"),a.qZA(),a._uU(104," - plays an audio once "),a.qZA(),a.TgZ(105,"p",12),a._uU(106,"Environment"),a.qZA(),a.TgZ(107,"div",13),a.TgZ(108,"span",18),a._uU(109,"[Weather Effects]"),a.qZA(),a._uU(110," changes the weather immediately. "),a._UZ(111,"br"),a._uU(112,"e.g. "),a._UZ(113,"br"),a.TgZ(114,"span",16),a._uU(115,"> W|rain"),a.qZA(),a._uU(116," - Raining "),a._UZ(117,"br"),a.TgZ(118,"span",16),a._uU(119,"> W|snow"),a.qZA(),a._uU(120," - Snowing "),a._UZ(121,"br"),a.TgZ(122,"span",16),a._uU(123,"> W|"),a.qZA(),a._uU(124," - Remove weather effects "),a.qZA(),a.TgZ(125,"p",12),a._uU(126,"Tips"),a.qZA(),a.TgZ(127,"div",13),a.TgZ(128,"span",16),a._uU(129,"Speak"),a.qZA(),a._uU(130," follows a specific format and has 3 parameters (position, anonimity, and name). "),a._UZ(131,"br"),a._uU(132,"Position - (required) can be either L, R, X "),a._UZ(133,"br"),a._uU(134,"Anonimity - (optional) can be either ?, ??, ??? "),a._UZ(135,"br"),a._uU(136,"Name - (required) a pre-defined name of Junkie. "),a._UZ(137,"br"),a._uU(138,"e.g. "),a._UZ(139,"br"),a.TgZ(140,"span",16),a._uU(141,"> L|Boppin: Hello!"),a.qZA(),a._uU(142,' - Boppin will appear in the upper left corner and say "Hello!" '),a._UZ(143,"br"),a.TgZ(144,"span",16),a._uU(145,"> R???|Billz: Hi!"),a.qZA(),a._uU(146,' - Billz will appear in the lower right with anonymous face and name and say "Hi!" '),a._UZ(147,"br"),a.TgZ(148,"span",16),a._uU(149,"> X|Boppin"),a.qZA(),a._uU(150," - Bippin exits the scene "),a._UZ(151,"hr"),a.TgZ(152,"span",17),a._uU(153,"[File Commands]"),a.qZA(),a._uU(154," can be removed from the scene on demand by using a blank value "),a._UZ(155,"br"),a._uU(156,"e.g. "),a._UZ(157,"br"),a.TgZ(158,"span",17),a._uU(159,"`bg`: []"),a.qZA(),a._uU(160," - This will remove the current value of th background "),a._UZ(161,"br"),a.TgZ(162,"span",17),a._uU(163,"`bgm`: []"),a.qZA(),a._uU(164," - This will stop the looping bgm "),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(4),a.ekj("is-active","drafts"===t.activate),a.xp6(2),a.Q6J("ngIf",t.user.role>1),a.xp6(1),a.Q6J("ngIf",t.user.role>1),a.xp6(1),a.ekj("is-active","help"===t.activate),a.xp6(2),a.ekj("is-hidden","help"===t.activate),a.xp6(3),a.ekj("is-hidden","drafts"!==t.activate),a.xp6(1),a.Q6J("ngForOf",t.myStories),a.xp6(1),a.Q6J("ngIf",t.myStories.length<1),a.xp6(1),a.Q6J("ngIf",t.user.role>1),a.xp6(1),a.Q6J("ngIf",t.user.role>1),a.xp6(1),a.ekj("is-hidden","help"!==t.activate))},directives:[Y,W,Tx],styles:[".heading[_ngcontent-%COMP%]{font-size:16px}",".help[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Press Start\\ 2P;font-size:12px;letter-spacing:1px}",".help[_ngcontent-%COMP%]{padding:20px}",".content[_ngcontent-%COMP%]{padding-left:20px;border-left:1px solid #bbb;font-family:Verdana;letter-spacing:1px;line-height:18px}"]}),e}(),FS=p(function e(){v(this,e),this.id="",this.seriesId="",this.seriesName="",this.title="",this.subtitle="",this.description="",this.cover="",this.authorId="",this.author="",this.content="",this.casts=[],this.tags=[],this.likes=0,this.views=0,this.createdOn="",this.modifiedOn="",this.state="draft"}),qS=i(250),VS=function(){function e(t,n){v(this,e),this._document=n;var r=this._textarea=this._document.createElement("textarea"),i=r.style;i.position="fixed",i.top=i.opacity="0",i.left="-999em",r.setAttribute("aria-hidden","true"),r.value=t,this._document.body.appendChild(r)}return p(e,[{key:"copy",value:function(){var e=this._textarea,t=!1;try{if(e){var n=this._document.activeElement;e.select(),e.setSelectionRange(0,e.value.length),t=this._document.execCommand("copy"),n&&n.focus()}}catch(r){}return t}},{key:"destroy",value:function(){var e=this._textarea;e&&(e.remove(),this._textarea=void 0)}}]),e}(),jS=function(){var e=function(){function e(t){v(this,e),this._document=t}return p(e,[{key:"copy",value:function(e){var t=this.beginCopy(e),n=t.copy();return t.destroy(),n}},{key:"beginCopy",value:function(e){return new VS(e,this._document)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(h))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),BS=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({}),e}(),HS=i(1555);function zS(e,t){return new Je.y(function(n){var r=e.length;if(0!==r)for(var i=new Array(r),a=0,o=0,s=function(s){var u=(0,$k.D)(e[s]),c=!1;n.add(u.subscribe({next:function(e){c||(c=!0,o++),i[s]=e},error:function(e){return n.error(e)},complete:function(){++a!==r&&c||(o===r&&n.next(t?t.reduce(function(e,t,n){return e[t]=i[n],e},{}):i),n.complete())}}))},u=0;u<r;u++)s(u);else n.complete()})}var GS=function(){var e=function(){function e(t,n){v(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return p(e,[{key:"setProperty",value:function(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"setDisabledState",value:function(e){this.setProperty("disabled",e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(a.Qsj),a.Y36(a.SBq))},e.\u0275dir=a.lG2({type:e}),e}(),KS=function(){var e,t=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n)}(GS);return t.\u0275fac=function(n){return(e||(e=a.n5z(t)))(n||t)},t.\u0275dir=a.lG2({type:t,features:[a.qOj]}),t}(),WS=new a.OlP("NgValueAccessor"),JS={provide:WS,useExisting:(0,a.Gpc)(function(){return QS}),multi:!0},YS=new a.OlP("CompositionEventMode"),QS=function(){var e=function(e){g(n,e);var t=m(n);function n(e,r,i){var a,o;return v(this,n),(a=t.call(this,e,r))._compositionMode=i,a._composing=!1,null==a._compositionMode&&(a._compositionMode=(o=c()?c().getUserAgent():"",!/android (\d+)/.test(o.toLowerCase()))),a}return p(n,[{key:"writeValue",value:function(e){this.setProperty("value",null==e?"":e)}},{key:"_handleInput",value:function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}]),n}(GS);return e.\u0275fac=function(t){return new(t||e)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(YS,8))},e.\u0275dir=a.lG2({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&a.NdJ("input",function(e){return t._handleInput(e.target.value)})("blur",function(){return t.onTouched()})("compositionstart",function(){return t._compositionStart()})("compositionend",function(e){return t._compositionEnd(e.target.value)})},features:[a._Bn([JS]),a.qOj]}),e}(),$S=new a.OlP("NgValidators"),XS=new a.OlP("NgAsyncValidators");function eT(e){return null!=e}function tT(e){var t=(0,a.QGY)(e)?(0,$k.D)(e):e;return(0,a.CqO)(t),t}function nT(e){var t={};return e.forEach(function(e){t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function rT(e,t){return t.map(function(t){return t(e)})}function iT(e){return e.map(function(e){return function(e){return!e.validate}(e)?e:function(t){return e.validate(t)}})}function aT(e){return null!=e?function(e){if(!e)return null;var t=e.filter(eT);return 0==t.length?null:function(e){return nT(rT(e,t))}}(iT(e)):null}function oT(e){return null!=e?function(e){if(!e)return null;var t=e.filter(eT);return 0==t.length?null:function(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];if((0,rb.k)(r))return zS(r,null);if((0,HS.K)(r)&&Object.getPrototypeOf(r)===Object.prototype){var i=Object.keys(r);return zS(i.map(function(e){return r[e]}),i)}}if("function"==typeof t[t.length-1]){var a=t.pop();return zS(t=1===t.length&&(0,rb.k)(t[0])?t[0]:t,null).pipe((0,nt.U)(function(e){return a.apply(void 0,u(e))}))}return zS(t,null)}(rT(e,t).map(tT)).pipe((0,nt.U)(nT))}}(iT(e)):null}function sT(e,t){return null===e?[t]:Array.isArray(e)?[].concat(u(e),[t]):[e,t]}var uT=function(){var e=function(){function e(){v(this,e),this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}return p(e,[{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}},{key:"_setValidators",value:function(e){this._rawValidators=e||[],this._composedValidatorFn=aT(this._rawValidators)}},{key:"_setAsyncValidators",value:function(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=oT(this._rawAsyncValidators)}},{key:"validator",get:function(){return this._composedValidatorFn||null}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn||null}},{key:"_registerOnDestroy",value:function(e){this._onDestroyCallbacks.push(e)}},{key:"_invokeOnDestroyCallbacks",value:function(){this._onDestroyCallbacks.forEach(function(e){return e()}),this._onDestroyCallbacks=[]}},{key:"reset",value:function(e){this.control&&this.control.reset(e)}},{key:"hasError",value:function(e,t){return!!this.control&&this.control.hasError(e,t)}},{key:"getError",value:function(e,t){return this.control?this.control.getError(e,t):null}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=a.lG2({type:e}),e}(),cT=function(){var e,t=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),n}(uT);return t.\u0275fac=function(n){return(e||(e=a.n5z(t)))(n||t)},t.\u0275dir=a.lG2({type:t,features:[a.qOj]}),t}(),lT=function(e){g(n,e);var t=m(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments))._parent=null,e.name=null,e.valueAccessor=null,e}return p(n)}(uT),hT=function(){var e=function(e){g(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e)}return p(n)}(function(){function e(t){v(this,e),this._cd=t}return p(e,[{key:"is",value:function(e){var t,n,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[e])}}]),e}());return e.\u0275fac=function(t){return new(t||e)(a.Y36(lT,2))},e.\u0275dir=a.lG2({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&a.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[a.qOj]}),e}();function fT(e,t){e.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function dT(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function pT(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}function vT(e){return(kT(e)?e.validators:e)||null}function gT(e){return Array.isArray(e)?aT(e):e||null}function mT(e,t){return(kT(t)?t.asyncValidators:e)||null}function yT(e){return Array.isArray(e)?oT(e):e||null}function kT(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var bT=function(){function e(t,n){v(this,e),this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=function(){},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=n,this._composedValidatorFn=gT(this._rawValidators),this._composedAsyncValidatorFn=yT(this._rawAsyncValidators)}return p(e,[{key:"validator",get:function(){return this._composedValidatorFn},set:function(e){this._rawValidators=this._composedValidatorFn=e}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn},set:function(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"setValidators",value:function(e){this._rawValidators=e,this._composedValidatorFn=gT(e)}},{key:"setAsyncValidators",value:function(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=yT(e)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild(function(e){return e.markAllAsTouched()})}},{key:"markAsUntouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"markAsDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}},{key:"markAsPristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"markAsPending",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(function(t){t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(function(e){return e(!0)})}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild(function(t){t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(function(e){return e(!1)})}},{key:"_updateAncestors",value:function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(e){this._parent=e}},{key:"updateValueAndValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}},{key:"_updateTreeValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild(function(t){return t._updateTreeValidity(e)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(e){var t=this;if(this.asyncValidator){this.status="PENDING",this._hasOwnPendingAsyncValidator=!0;var n=tT(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(function(n){t._hasOwnPendingAsyncValidator=!1,t.setErrors(n,{emitEvent:e})})}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}},{key:"setErrors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}},{key:"get",value:function(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;var r=e;return t.forEach(function(e){r=r instanceof _T?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof xT&&r.at(e)||null}),r}(this,e)}},{key:"getError",value:function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}},{key:"hasError",value:function(e,t){return!!this.getError(e,t)}},{key:"root",get:function(){for(var e=this;e._parent;)e=e._parent;return e}},{key:"_updateControlsErrors",value:function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}},{key:"_initObservables",value:function(){this.valueChanges=new a.vpe,this.statusChanges=new a.vpe}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(e){return this._anyControls(function(t){return t.status===e})}},{key:"_anyControlsDirty",value:function(){return this._anyControls(function(e){return e.dirty})}},{key:"_anyControlsTouched",value:function(){return this._anyControls(function(e){return e.touched})}},{key:"_updatePristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"_updateTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"_isBoxedValue",value:function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}},{key:"_registerOnCollectionChange",value:function(e){this._onCollectionChange=e}},{key:"_setUpdateStrategy",value:function(e){kT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}},{key:"_parentMarkedDirty",value:function(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}]),e}(),wT=function(e){g(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return v(this,n),(e=t.call(this,vT(i),mT(a,i)))._onChange=[],e._applyFormState(r),e._setUpdateStrategy(i),e._initObservables(),e.updateValueAndValidity({onlySelf:!0,emitEvent:!!e.asyncValidator}),e}return p(n,[{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(function(e){return e(t.value,!1!==n.emitViewToModelChange)}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(e,t)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(e){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(e){this._onChange.push(e)}},{key:"_unregisterOnChange",value:function(e){pT(this._onChange,e)}},{key:"registerOnDisabledChange",value:function(e){this._onDisabledChange.push(e)}},{key:"_unregisterOnDisabledChange",value:function(e){pT(this._onDisabledChange,e)}},{key:"_forEachChild",value:function(e){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}]),n}(bT),_T=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,vT(r),mT(i,r))).controls=e,a._initObservables(),a._setUpdateStrategy(r),a._setUpControls(),a.updateValueAndValidity({onlySelf:!0,emitEvent:!!a.asyncValidator}),a}return p(n,[{key:"registerControl",value:function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}},{key:"addControl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}},{key:"removeControl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}},{key:"setControl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}},{key:"contains",value:function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),Object.keys(e).forEach(function(r){t._throwIfControlMissing(r),t.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!=e&&(Object.keys(e).forEach(function(r){t.controls[r]&&t.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof wT?t.value:t.getRawValue(),e})}},{key:"_syncPendingControls",value:function(){var e=this._reduceChildren(!1,function(e,t){return!!t._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: ".concat(e,"."))}},{key:"_forEachChild",value:function(e){var t=this;Object.keys(this.controls).forEach(function(n){var r=t.controls[n];r&&e(r,n)})}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild(function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)})}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(e){for(var t=0,n=Object.keys(this.controls);t<n.length;t++){var r=n[t],i=this.controls[r];if(this.contains(r)&&e(i))return!0}return!1}},{key:"_reduceValue",value:function(){var e=this;return this._reduceChildren({},function(t,n,r){return(n.enabled||e.disabled)&&(t[r]=n.value),t})}},{key:"_reduceChildren",value:function(e,t){var n=e;return this._forEachChild(function(e,r){n=t(n,e,r)}),n}},{key:"_allControlsDisabled",value:function(){for(var e=0,t=Object.keys(this.controls);e<t.length;e++){var n=t[e];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))})}}]),n}(bT),xT=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,vT(r),mT(i,r))).controls=e,a._initObservables(),a._setUpdateStrategy(r),a._setUpControls(),a.updateValueAndValidity({onlySelf:!0,emitEvent:!!a.asyncValidator}),a}return p(n,[{key:"at",value:function(e){return this.controls[e]}},{key:"push",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}},{key:"insert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}},{key:"removeAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}},{key:"setControl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}},{key:"length",get:function(){return this.controls.length}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),e.forEach(function(e,r){t._throwIfControlMissing(r),t.at(r).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!=e&&(e.forEach(function(e,r){t.at(r)&&t.at(r).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this.controls.map(function(e){return e instanceof wT?e.value:e.getRawValue()})}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.controls.length<1||(this._forEachChild(function(e){return e._registerOnCollectionChange(function(){})}),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}},{key:"_syncPendingControls",value:function(){var e=this.controls.reduce(function(e,t){return!!t._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index ".concat(e))}},{key:"_forEachChild",value:function(e){this.controls.forEach(function(t,n){e(t,n)})}},{key:"_updateValue",value:function(){var e=this;this.value=this.controls.filter(function(t){return t.enabled||e.disabled}).map(function(e){return e.value})}},{key:"_anyControls",value:function(e){return this.controls.some(function(t){return t.enabled&&e(t)})}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild(function(t){return e._registerControl(t)})}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))})}},{key:"_allControlsDisabled",value:function(){var e,t=l(this.controls);try{for(t.s();!(e=t.n()).done;){if(e.value.enabled)return!1}}catch(n){t.e(n)}finally{t.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}]),n}(bT),ST={provide:lT,useExisting:(0,a.Gpc)(function(){return IT})},TT=Promise.resolve(null),IT=function(){var e=function(e){g(n,e);var t=m(n);function n(e,r,i,o){var s;return v(this,n),(s=t.call(this)).control=new wT,s._registered=!1,s.update=new a.vpe,s._parent=e,s._setValidators(r),s._setAsyncValidators(i),s.valueAccessor=function(e,t){return t?(Array.isArray(t),t.forEach(function(e){e.constructor===QS?n=e:Object.getPrototypeOf(e.constructor)===KS?r=e:i=e}),i||r||n||null):null;var n,r,i}(0,o),s}return p(n,[{key:"ngOnChanges",value:function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,t){if(!e.hasOwnProperty("model"))return!1;var n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"path",get:function(){return this._parent?[].concat(u(this._parent.path),[this.name]):[this.name]}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"viewToModelUpdate",value:function(e){this.viewModel=e,this.update.emit(e)}},{key:"_setUpControl",value:function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}},{key:"_isStandalone",value:function(){return!this._parent||!(!this.options||!this.options.standalone)}},{key:"_setUpStandalone",value:function(){var e,t;(function(e,t){var n=function(e){return e._rawValidators}(e);null!==t.validator?e.setValidators(sT(n,t.validator)):"function"==typeof n&&e.setValidators([n]);var r=function(e){return e._rawAsyncValidators}(e);null!==t.asyncValidator?e.setAsyncValidators(sT(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);var i=function(){return e.updateValueAndValidity()};fT(t._rawValidators,i),fT(t._rawAsyncValidators,i)})(e=this.control,t=this),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(function(n){e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&dT(e,t)})}(e,t),function(e,t){var n=function(e,n){t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)};e.registerOnChange(n),t._registerOnDestroy(function(){e._unregisterOnChange(n)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&dT(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function(e,t){if(t.valueAccessor.setDisabledState){var n=function(e){t.valueAccessor.setDisabledState(e)};e.registerOnDisabledChange(n),t._registerOnDestroy(function(){e._unregisterOnDisabledChange(n)})}}(e,t),this.control.updateValueAndValidity({emitEvent:!1})}},{key:"_checkForErrors",value:function(){this._isStandalone()||this._checkParentType(),this._checkName()}},{key:"_checkParentType",value:function(){}},{key:"_checkName",value:function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}},{key:"_updateValue",value:function(e){var t=this;TT.then(function(){t.control.setValue(e,{emitViewToModelChange:!1})})}},{key:"_updateDisabled",value:function(e){var t=this,n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;TT.then(function(){r&&!t.control.disabled?t.control.disable():!r&&t.control.disabled&&t.control.enable()})}}]),n}(lT);return e.\u0275fac=function(t){return new(t||e)(a.Y36(cT,9),a.Y36($S,10),a.Y36(XS,10),a.Y36(WS,10))},e.\u0275dir=a.lG2({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[a._Bn([ST]),a.qOj,a.TTD]}),e}(),ET=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({}),e}(),CT={provide:WS,useExisting:(0,a.Gpc)(function(){return RT}),multi:!0};function AT(e,t){return null==e?"".concat(t):(t&&"object"==typeof t&&(t="Object"),"".concat(e,": ").concat(t).slice(0,50))}var RT=function(){var e,t=function(e){g(n,e);var t=m(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments))._optionMap=new Map,e._idCounter=0,e._compareWith=Object.is,e}return p(n,[{key:"compareWith",set:function(e){this._compareWith=e}},{key:"writeValue",value:function(e){this.value=e;var t=this._getOptionId(e);null==t&&this.setProperty("selectedIndex",-1);var n=AT(t,e);this.setProperty("value",n)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){t.value=t._getOptionValue(n),e(t.value)}}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(this._compareWith(this._optionMap.get(r),e))return r}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}]),n}(KS);return t.\u0275fac=function(n){return(e||(e=a.n5z(t)))(n||t)},t.\u0275dir=a.lG2({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&a.NdJ("change",function(e){return t.onChange(e.target.value)})("blur",function(){return t.onTouched()})},inputs:{compareWith:"compareWith"},features:[a._Bn([CT]),a.qOj]}),t}(),DT=function(){var e=function(){function e(t,n,r){v(this,e),this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}return p(e,[{key:"ngValue",set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(AT(this.id,e)),this._select.writeValue(this._select.value))}},{key:"value",set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}},{key:"_setElementValue",value:function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}},{key:"ngOnDestroy",value:function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(RT,9))},e.\u0275dir=a.lG2({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e}(),PT={provide:WS,useExisting:(0,a.Gpc)(function(){return NT}),multi:!0};function OT(e,t){return null==e?"".concat(t):("string"==typeof t&&(t="'".concat(t,"'")),t&&"object"==typeof t&&(t="Object"),"".concat(e,": ").concat(t).slice(0,50))}var NT=function(){var e,t=function(e){g(n,e);var t=m(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments))._optionMap=new Map,e._idCounter=0,e._compareWith=Object.is,e}return p(n,[{key:"compareWith",set:function(e){this._compareWith=e}},{key:"writeValue",value:function(e){var t,n=this;if(this.value=e,Array.isArray(e)){var r=e.map(function(e){return n._getOptionId(e)});t=function(e,t){e._setSelected(r.indexOf(t.toString())>-1)}}else t=function(e,t){e._setSelected(!1)};this._optionMap.forEach(t)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){var r=[];if(void 0!==n.selectedOptions)for(var i=n.selectedOptions,a=0;a<i.length;a++){var o=i.item(a),s=t._getOptionValue(o.value);r.push(s)}else for(var u=n.options,c=0;c<u.length;c++){var l=u.item(c);if(l.selected){var h=t._getOptionValue(l.value);r.push(h)}}t.value=r,e(r)}}},{key:"_registerOption",value:function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}},{key:"_getOptionId",value:function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(this._compareWith(this._optionMap.get(r)._value,e))return r}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}}]),n}(KS);return t.\u0275fac=function(n){return(e||(e=a.n5z(t)))(n||t)},t.\u0275dir=a.lG2({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&a.NdJ("change",function(e){return t.onChange(e.target)})("blur",function(){return t.onTouched()})},inputs:{compareWith:"compareWith"},features:[a._Bn([PT]),a.qOj]}),t}(),LT=function(){var e=function(){function e(t,n,r){v(this,e),this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}return p(e,[{key:"ngValue",set:function(e){null!=this._select&&(this._value=e,this._setElementValue(OT(this.id,e)),this._select.writeValue(this._select.value))}},{key:"value",set:function(e){this._select?(this._value=e,this._setElementValue(OT(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}},{key:"_setElementValue",value:function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}},{key:"_setSelected",value:function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}},{key:"ngOnDestroy",value:function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(NT,9))},e.\u0275dir=a.lG2({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e}(),MT={provide:$S,useExisting:(0,a.Gpc)(function(){return ZT}),multi:!0},ZT=function(){var e=function(){function e(){v(this,e),this._required=!1}return p(e,[{key:"required",get:function(){return this._required},set:function(e){this._required=null!=e&&!1!==e&&"false"!="".concat(e),this._onChange&&this._onChange()}},{key:"validate",value:function(e){return this.required?function(e){return null==(t=e.value)||0===t.length?{required:!0}:null;var t}(e):null}},{key:"registerOnValidatorChange",value:function(e){this._onChange=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=a.lG2({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,t){2&e&&a.uIk("required",t.required?"":null)},inputs:{required:"required"},features:[a._Bn([MT])]}),e}(),UT=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[ET]]}),e}(),FT=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[UT]}),e}();function qT(e){return null!=e&&"false"!="".concat(e)}function VT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):t}function jT(e){return e instanceof a.SBq?e.nativeElement:e}var BT=i(9105);function HT(e,t,n,r){return(0,BT.m)(n)&&(r=n,n=void 0),r?HT(e,t,n).pipe((0,nt.U)(function(e){return(0,rb.k)(e)?r.apply(void 0,u(e)):r(e)})):new Je.y(function(r){zT(e,t,function(e){r.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},r,n)})}function zT(e,t,n,r,i){var a;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){var o=e;e.addEventListener(t,n,i),a=function(){return o.removeEventListener(t,n,i)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){var s=e;e.on(t,n),a=function(){return s.off(t,n)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){var u=e;e.addListener(t,n),a=function(){return u.removeListener(t,n)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var c=0,l=e.length;c<l;c++)zT(e[c],t,n,r,i)}r.add(a)}var GT=i(6465),KT=new(function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"flush",value:function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}}}]),n}(i(6102).v))(function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i}return p(n,[{key:"requestAsyncId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0?o(S(n.prototype),"requestAsyncId",this).call(this,e,t,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))}},{key:"recycleAsyncId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==r&&r>0||null===r&&this.delay>0)return o(S(n.prototype),"recycleAsyncId",this).call(this,e,t,r);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}}]),n}(GT.o));i(4581);var WT,JT=function(){function e(t){v(this,e),this.durationSelector=t}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new YT(e,this.durationSelector))}}]),e}(),YT=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).durationSelector=r,i.hasValue=!1,i}return p(n,[{key:"_next",value:function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t;try{t=(0,this.durationSelector)(e)}catch(r){return this.destination.error(r)}var n=(0,yb.ft)(t,new yb.IY(this));!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}},{key:"clearThrottle",value:function(){var e=this.value,t=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}},{key:"notifyNext",value:function(){this.clearThrottle()}},{key:"notifyComplete",value:function(){this.clearThrottle()}}]),n}(yb.Ds),QT=i(6561);function $T(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function XT(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wx.P;return t=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=-1;return(0,QT.k)(t)?r=Number(t)<1?1:Number(t):(0,nb.K)(t)&&(n=t),(0,nb.K)(n)||(n=Wx.P),new Je.y(function(t){var i=(0,QT.k)(e)?e:+e-n.now();return n.schedule($T,i,{index:0,period:r,subscriber:t})})}(e,n)},function(e){return e.lift(new JT(t))}}try{WT="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(zA){WT=!1}var eI,tI,nI=function(){var e=p(function e(t){v(this,e),this._platformId=t,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!WT)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT});return e.\u0275fac=function(t){return new(t||e)(a.LFG(a.Lbi))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function rI(e){return function(){if(null==eI&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return eI=!0}}))}finally{eI=eI||!1}return eI}()?e:!!e.capture}function iI(e){if(function(){if(null==tI){var e="undefined"!=typeof document?document.head:null;tI=!(!e||!e.createShadowRoot&&!e.attachShadow)}return tI}()){var t=e.getRootNode?e.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function aI(e){return e.composedPath?e.composedPath()[0]:e.target}var oI=function(){var e=function(){function e(t,n,r){v(this,e),this._ngZone=t,this._platform=n,this._scrolled=new Xk.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}return p(e,[{key:"register",value:function(e){var t=this;this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(function(){return t._scrolled.next(e)}))}},{key:"deregister",value:function(e){var t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}},{key:"scrolled",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return this._platform.isBrowser?new Je.y(function(n){e._globalSubscription||e._addGlobalListener();var r=t>0?e._scrolled.pipe(XT(t)).subscribe(n):e._scrolled.subscribe(n);return e._scrolledCount++,function(){r.unsubscribe(),e._scrolledCount--,e._scrolledCount||e._removeGlobalListener()}}):(0,We.of)()}},{key:"ngOnDestroy",value:function(){var e=this;this._removeGlobalListener(),this.scrollContainers.forEach(function(t,n){return e.deregister(n)}),this._scrolled.complete()}},{key:"ancestorScrolled",value:function(e,t){var n=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(Xe(function(e){return!e||n.indexOf(e)>-1}))}},{key:"getAncestorScrollContainers",value:function(e){var t=this,n=[];return this.scrollContainers.forEach(function(r,i){t._scrollableContainsElement(i,e)&&n.push(i)}),n}},{key:"_getWindow",value:function(){return this._document.defaultView||window}},{key:"_scrollableContainsElement",value:function(e,t){var n=jT(t),r=e.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}},{key:"_addGlobalListener",value:function(){var e=this;this._globalSubscription=this._ngZone.runOutsideAngular(function(){return HT(e._getWindow().document,"scroll").subscribe(function(){return e._scrolled.next()})})}},{key:"_removeGlobalListener",value:function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(a.R0b),a.LFG(nI),a.LFG(h,8))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),sI=function(){var e=function(){function e(t,n,r){var i=this;v(this,e),this._platform=t,this._change=new Xk.xQ,this._changeListener=function(e){i._change.next(e)},this._document=r,n.runOutsideAngular(function(){if(t.isBrowser){var e=i._getWindow();e.addEventListener("resize",i._changeListener),e.addEventListener("orientationchange",i._changeListener)}i.change().subscribe(function(){return i._viewportSize=null})})}return p(e,[{key:"ngOnDestroy",value:function(){if(this._platform.isBrowser){var e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}},{key:"getViewportSize",value:function(){this._viewportSize||this._updateViewportSize();var e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}},{key:"getViewportRect",value:function(){var e=this.getViewportScrollPosition(),t=this.getViewportSize(),n=t.width,r=t.height;return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}}},{key:"getViewportScrollPosition",value:function(){if(!this._platform.isBrowser)return{top:0,left:0};var e=this._document,t=this._getWindow(),n=e.documentElement,r=n.getBoundingClientRect();return{top:-r.top||e.body.scrollTop||t.scrollY||n.scrollTop||0,left:-r.left||e.body.scrollLeft||t.scrollX||n.scrollLeft||0}}},{key:"change",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return e>0?this._change.pipe(XT(e)):this._change}},{key:"_getWindow",value:function(){return this._document.defaultView||window}},{key:"_updateViewportSize",value:function(){var e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(nI),a.LFG(a.R0b),a.LFG(h,8))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),uI=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({}),e}();function cI(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}var lI=i(6682);function hI(e){return function(t){return t.lift(new fI(e))}}var fI=function(){function e(t){v(this,e),this.notifier=t}return p(e,[{key:"call",value:function(e,t){var n=new dI(e),r=(0,yb.ft)(this.notifier,new yb.IY(n));return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n}}]),e}(),dI=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).seenValue=!1,r}return p(n,[{key:"notifyNext",value:function(){this.seenValue=!0,this.complete()}},{key:"notifyComplete",value:function(){}}]),n}(yb.Ds),pI=new a.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,a.f3M)(h)}}),vI=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,gI=function(){var e=function(){function e(t){if(v(this,e),this.value="ltr",this.change=new a.vpe,t){var n=t.documentElement?t.documentElement.dir:null;this.value=(r=(t.body?t.body.dir:null)||n||"ltr","auto"===(o=(null==r?void 0:r.toLowerCase())||"")&&"undefined"!=typeof navigator&&null!==(i=navigator)&&void 0!==i&&i.language?vI.test(navigator.language)?"rtl":"ltr":"rtl"===o?"rtl":"ltr")}var r,i,o}return p(e,[{key:"ngOnDestroy",value:function(){this.change.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(pI,8))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function mI(e,t,n){for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];i?e.setProperty(r,i,null!=n&&n.has(r)?"important":""):e.removeProperty(r)}return e}function yI(e,t){var n=t?"":"none";mI(e.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":n,"-ms-user-select":n,"-webkit-user-select":n,"-moz-user-select":n})}function kI(e,t,n){mI(e.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},n)}function bI(e,t){return t&&"none"!=t?e+" "+t:e}function wI(e){var t=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*t}function _I(e,t){return e.getPropertyValue(t).split(",").map(function(e){return e.trim()})}function xI(e){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function SI(e,t,n){var r=e.top,i=e.bottom,a=e.left,o=e.right;return n>=r&&n<=i&&t>=a&&t<=o}function TI(e,t,n){e.top+=t,e.bottom=e.top+e.height,e.left+=n,e.right=e.left+e.width}function II(e,t,n,r){var i=e.top,a=e.right,o=e.bottom,s=e.left,u=e.width*t,c=e.height*t;return r>i-c&&r<o+c&&n>s-u&&n<a+u}var EI=function(){function e(t){v(this,e),this._document=t,this.positions=new Map}return p(e,[{key:"clear",value:function(){this.positions.clear()}},{key:"cache",value:function(e){var t=this;this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(function(e){t.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:xI(e)})})}},{key:"handleScroll",value:function(e){var t=aI(e),n=this.positions.get(t);if(!n)return null;var r,i,a=n.scrollPosition;if(t===this._document){var o=this.getViewportScrollPosition();r=o.top,i=o.left}else r=t.scrollTop,i=t.scrollLeft;var s=a.top-r,u=a.left-i;return this.positions.forEach(function(e,n){e.clientRect&&t!==n&&t.contains(n)&&TI(e.clientRect,s,u)}),a.top=r,a.left=i,{top:s,left:u}}},{key:"getViewportScrollPosition",value:function(){return{top:window.scrollY,left:window.scrollX}}}]),e}();function CI(e){var t=e.cloneNode(!0),n=t.querySelectorAll("[id]"),r=e.nodeName.toLowerCase();t.removeAttribute("id");for(var i=0;i<n.length;i++)n[i].removeAttribute("id");return"canvas"===r?PI(e,t):"input"!==r&&"select"!==r&&"textarea"!==r||DI(e,t),AI("canvas",e,t,PI),AI("input, textarea, select",e,t,DI),t}function AI(e,t,n,r){var i=t.querySelectorAll(e);if(i.length)for(var a=n.querySelectorAll(e),o=0;o<i.length;o++)r(i[o],a[o])}var RI=0;function DI(e,t){"file"!==t.type&&(t.value=e.value),"radio"===t.type&&t.name&&(t.name="mat-clone-".concat(t.name,"-").concat(RI++))}function PI(e,t){var n=t.getContext("2d");if(n)try{n.drawImage(e,0,0)}catch(r){}}var OI=rI({passive:!0}),NI=rI({passive:!1}),LI=new Set(["position"]),MI=function(){function e(t,n,r,i,a,o){var s=this;v(this,e),this._config=n,this._document=r,this._ngZone=i,this._viewportRuler=a,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new Xk.xQ,this._pointerMoveSubscription=Kb.w.EMPTY,this._pointerUpSubscription=Kb.w.EMPTY,this._scrollSubscription=Kb.w.EMPTY,this._resizeSubscription=Kb.w.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new Xk.xQ,this.started=new Xk.xQ,this.released=new Xk.xQ,this.ended=new Xk.xQ,this.entered=new Xk.xQ,this.exited=new Xk.xQ,this.dropped=new Xk.xQ,this.moved=this._moveEvents,this._pointerDown=function(e){if(s.beforeStarted.next(),s._handles.length){var t=s._getTargetHandle(e);!t||s._disabledHandles.has(t)||s.disabled||s._initializeDragSequence(t,e)}else s.disabled||s._initializeDragSequence(s._rootElement,e)},this._pointerMove=function(e){var t=s._getPointerPositionOnPage(e);if(s._hasStartedDragging){e.preventDefault();var n=s._getConstrainedPointerPosition(t);if(s._hasMoved=!0,s._lastKnownPointerPosition=t,s._updatePointerDirectionDelta(n),s._dropContainer)s._updateActiveDropContainer(n,t);else{var r=s._activeTransform;r.x=n.x-s._pickupPositionOnPage.x+s._passiveTransform.x,r.y=n.y-s._pickupPositionOnPage.y+s._passiveTransform.y,s._applyRootElementTransform(r.x,r.y)}s._moveEvents.observers.length&&s._ngZone.run(function(){s._moveEvents.next({source:s,pointerPosition:n,event:e,distance:s._getDragDistance(n),delta:s._pointerDirectionDelta})})}else if(Math.abs(t.x-s._pickupPositionOnPage.x)+Math.abs(t.y-s._pickupPositionOnPage.y)>=s._config.dragStartThreshold){var i=Date.now()>=s._dragStartTime+s._getDragStartDelay(e),a=s._dropContainer;if(!i)return void s._endDragSequence(e);a&&(a.isDragging()||a.isReceiving())||(e.preventDefault(),s._hasStartedDragging=!0,s._ngZone.run(function(){return s._startDragSequence(e)}))}},this._pointerUp=function(e){s._endDragSequence(e)},this._nativeDragStart=function(e){if(s._handles.length){var t=s._getTargetHandle(e);!t||s._disabledHandles.has(t)||s.disabled||e.preventDefault()}else s.disabled||e.preventDefault()},this.withRootElement(t).withParent(n.parentDragRef||null),this._parentPositions=new EI(r),o.registerDragItem(this)}return p(e,[{key:"disabled",get:function(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)},set:function(e){var t=qT(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(function(e){return yI(e,t)}))}},{key:"getPlaceholderElement",value:function(){return this._placeholder}},{key:"getRootElement",value:function(){return this._rootElement}},{key:"getVisibleElement",value:function(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}},{key:"withHandles",value:function(e){var t=this;this._handles=e.map(function(e){return jT(e)}),this._handles.forEach(function(e){return yI(e,t.disabled)}),this._toggleNativeDragInteractions();var n=new Set;return this._disabledHandles.forEach(function(e){t._handles.indexOf(e)>-1&&n.add(e)}),this._disabledHandles=n,this}},{key:"withPreviewTemplate",value:function(e){return this._previewTemplate=e,this}},{key:"withPlaceholderTemplate",value:function(e){return this._placeholderTemplate=e,this}},{key:"withRootElement",value:function(e){var t=this,n=jT(e);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(function(){n.addEventListener("mousedown",t._pointerDown,NI),n.addEventListener("touchstart",t._pointerDown,OI),n.addEventListener("dragstart",t._nativeDragStart,NI)}),this._initialTransform=void 0,this._rootElement=n),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}},{key:"withBoundaryElement",value:function(e){var t=this;return this._boundaryElement=e?jT(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(function(){return t._containInsideBoundaryOnResize()})),this}},{key:"withParent",value:function(e){return this._parentDragRef=e,this}},{key:"dispose",value:function(){var e,t;this._removeRootElementListeners(this._rootElement),this.isDragging()&&null!==(e=this._rootElement)&&void 0!==e&&e.remove(),null!==(t=this._anchor)&&void 0!==t&&t.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}},{key:"isDragging",value:function(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}},{key:"reset",value:function(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}},{key:"disableHandle",value:function(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),yI(e,!0))}},{key:"enableHandle",value:function(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),yI(e,this.disabled))}},{key:"withDirection",value:function(e){return this._direction=e,this}},{key:"_withDropContainer",value:function(e){this._dropContainer=e}},{key:"getFreeDragPosition",value:function(){var e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}},{key:"setFreeDragPosition",value:function(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}},{key:"withPreviewContainer",value:function(e){return this._previewContainer=e,this}},{key:"_sortFromLastPointerPosition",value:function(){var e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}},{key:"_removeSubscriptions",value:function(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}},{key:"_destroyPreview",value:function(){var e,t;null!==(e=this._preview)&&void 0!==e&&e.remove(),null!==(t=this._previewRef)&&void 0!==t&&t.destroy(),this._preview=this._previewRef=null}},{key:"_destroyPlaceholder",value:function(){var e,t;null!==(e=this._placeholder)&&void 0!==e&&e.remove(),null!==(t=this._placeholderRef)&&void 0!==t&&t.destroy(),this._placeholder=this._placeholderRef=null}},{key:"_endDragSequence",value:function(e){var t=this;if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(function(){t._cleanupDragArtifacts(e),t._cleanupCachedDimensions(),t._dragDropRegistry.stopDragging(t)});else{this._passiveTransform.x=this._activeTransform.x;var n=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(function(){t.ended.next({source:t,distance:t._getDragDistance(n),dropPoint:n})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}},{key:"_startDragSequence",value:function(e){FI(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();var t=this._dropContainer;if(t){var n=this._rootElement,r=n.parentNode,i=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment(""),o=this._getShadowRoot();r.insertBefore(a,n),this._initialTransform=n.style.transform||"",this._preview=this._createPreviewElement(),kI(n,!1,LI),this._document.body.appendChild(r.replaceChild(i,n)),this._getPreviewInsertionPoint(r,o).appendChild(this._preview),this.started.next({source:this}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}},{key:"_initializeDragSequence",value:function(e,t){var n=this;this._parentDragRef&&t.stopPropagation();var r=this.isDragging(),i=FI(t),a=!i&&0!==t.button,o=this._rootElement,s=aI(t),u=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),c=i?function(e){var t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}(t):function(e){return 0===e.buttons||0===e.offsetX&&0===e.offsetY}(t);if(s&&s.draggable&&"mousedown"===t.type&&t.preventDefault(),!(r||a||u||c)){if(this._handles.length){var l=o.style;this._rootElementTapHighlight=l.webkitTapHighlightColor||"",l.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(function(e){return n._updateOnScroll(e)}),this._boundaryElement&&(this._boundaryRect=xI(this._boundaryElement));var h=this._previewTemplate;this._pickupPositionInElement=h&&h.template&&!h.matchSize?{x:0,y:0}:this._getPointerPositionInElement(e,t);var f=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:f.x,y:f.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}}},{key:"_cleanupDragArtifacts",value:function(e){var t=this;kI(this._rootElement,!0,LI),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(function(){var n=t._dropContainer,r=n.getItemIndex(t),i=t._getPointerPositionOnPage(e),a=t._getDragDistance(i),o=n._isOverContainer(i.x,i.y);t.ended.next({source:t,distance:a,dropPoint:i}),t.dropped.next({item:t,currentIndex:r,previousIndex:t._initialIndex,container:n,previousContainer:t._initialContainer,isPointerOverContainer:o,distance:a,dropPoint:i}),n.drop(t,r,t._initialIndex,t._initialContainer,o,a,i),t._dropContainer=t._initialContainer})}},{key:"_updateActiveDropContainer",value:function(e,t){var n=this,r=e.x,i=e.y,a=t.x,o=t.y,s=this._initialContainer._getSiblingContainerFromPosition(this,r,i);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(r,i)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(function(){n.exited.next({item:n,container:n._dropContainer}),n._dropContainer.exit(n),n._dropContainer=s,n._dropContainer.enter(n,r,i,s===n._initialContainer&&s.sortingDisabled?n._initialIndex:void 0),n.entered.next({item:n,container:s,currentIndex:s.getItemIndex(n)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(a,o),this._dropContainer._sortItem(this,r,i,this._pointerDirectionDelta),this._applyPreviewTransform(r-this._pickupPositionInElement.x,i-this._pickupPositionInElement.y))}},{key:"_createPreviewElement",value:function(){var e,t=this._previewTemplate,n=this.previewClass,r=t?t.template:null;if(r&&t){var i=t.matchSize?this._rootElement.getBoundingClientRect():null,a=t.viewContainer.createEmbeddedView(r,t.context);a.detectChanges(),e=qI(a,this._document),this._previewRef=a,t.matchSize?VI(e,i):e.style.transform=ZI(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{var o=this._rootElement;VI(e=CI(o),o.getBoundingClientRect()),this._initialTransform&&(e.style.transform=this._initialTransform)}return mI(e.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":"".concat(this._config.zIndex||1e3)},LI),yI(e,!1),e.classList.add("cdk-drag-preview"),e.setAttribute("dir",this._direction),n&&(Array.isArray(n)?n.forEach(function(t){return e.classList.add(t)}):e.classList.add(n)),e}},{key:"_animatePreviewToPlaceholder",value:function(){var e=this;if(!this._hasMoved)return Promise.resolve();var t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);var n=function(e){var t=getComputedStyle(e),n=_I(t,"transition-property"),r=n.find(function(e){return"transform"===e||"all"===e});if(!r)return 0;var i=n.indexOf(r),a=_I(t,"transition-duration"),o=_I(t,"transition-delay");return wI(a[i])+wI(o[i])}(this._preview);return 0===n?Promise.resolve():this._ngZone.runOutsideAngular(function(){return new Promise(function(t){var r=function n(r){var a;(!r||aI(r)===e._preview&&"transform"===r.propertyName)&&(null!==(a=e._preview)&&void 0!==a&&a.removeEventListener("transitionend",n),t(),clearTimeout(i))},i=setTimeout(r,1.5*n);e._preview.addEventListener("transitionend",r)})})}},{key:"_createPlaceholderElement",value:function(){var e,t=this._placeholderTemplate,n=t?t.template:null;return n?(this._placeholderRef=t.viewContainer.createEmbeddedView(n,t.context),this._placeholderRef.detectChanges(),e=qI(this._placeholderRef,this._document)):e=CI(this._rootElement),e.style.pointerEvents="none",e.classList.add("cdk-drag-placeholder"),e}},{key:"_getPointerPositionInElement",value:function(e,t){var n=this._rootElement.getBoundingClientRect(),r=e===this._rootElement?null:e,i=r?r.getBoundingClientRect():n,a=FI(t)?t.targetTouches[0]:t,o=this._getViewportScrollPosition();return{x:i.left-n.left+(a.pageX-i.left-o.left),y:i.top-n.top+(a.pageY-i.top-o.top)}}},{key:"_getPointerPositionOnPage",value:function(e){var t=this._getViewportScrollPosition(),n=FI(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,r=n.pageX-t.left,i=n.pageY-t.top;if(this._ownerSVGElement){var a=this._ownerSVGElement.getScreenCTM();if(a){var o=this._ownerSVGElement.createSVGPoint();return o.x=r,o.y=i,o.matrixTransform(a.inverse())}}return{x:r,y:i}}},{key:"_getConstrainedPointerPosition",value:function(e){var t=this._dropContainer?this._dropContainer.lockAxis:null,n=this.constrainPosition?this.constrainPosition(e,this):e,r=n.x,i=n.y;if("x"===this.lockAxis||"x"===t?i=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==t||(r=this._pickupPositionOnPage.x),this._boundaryRect){var a=this._pickupPositionInElement,o=a.x,s=a.y,u=this._boundaryRect,c=this._getPreviewRect(),l=c.width,h=c.height,f=u.top+s,d=u.bottom-(h-s);r=UI(r,u.left+o,u.right-(l-o)),i=UI(i,f,d)}return{x:r,y:i}}},{key:"_updatePointerDirectionDelta",value:function(e){var t=e.x,n=e.y,r=this._pointerDirectionDelta,i=this._pointerPositionAtLastDirectionChange,a=Math.abs(t-i.x),o=Math.abs(n-i.y);return a>this._config.pointerDirectionChangeThreshold&&(r.x=t>i.x?1:-1,i.x=t),o>this._config.pointerDirectionChangeThreshold&&(r.y=n>i.y?1:-1,i.y=n),r}},{key:"_toggleNativeDragInteractions",value:function(){if(this._rootElement&&this._handles){var e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,yI(this._rootElement,e))}}},{key:"_removeRootElementListeners",value:function(e){e.removeEventListener("mousedown",this._pointerDown,NI),e.removeEventListener("touchstart",this._pointerDown,OI),e.removeEventListener("dragstart",this._nativeDragStart,NI)}},{key:"_applyRootElementTransform",value:function(e,t){var n=ZI(e,t),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=bI(n,this._initialTransform)}},{key:"_applyPreviewTransform",value:function(e,t){var n,r=null!==(n=this._previewTemplate)&&void 0!==n&&n.template?void 0:this._initialTransform,i=ZI(e,t);this._preview.style.transform=bI(i,r)}},{key:"_getDragDistance",value:function(e){var t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}},{key:"_cleanupCachedDimensions",value:function(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}},{key:"_containInsideBoundaryOnResize",value:function(){var e=this._passiveTransform,t=e.x,n=e.y;if(!(0===t&&0===n||this.isDragging())&&this._boundaryElement){var r=this._boundaryElement.getBoundingClientRect(),i=this._rootElement.getBoundingClientRect();if(!(0===r.width&&0===r.height||0===i.width&&0===i.height)){var a=r.left-i.left,o=i.right-r.right,s=r.top-i.top,u=i.bottom-r.bottom;r.width>i.width?(a>0&&(t+=a),o>0&&(t-=o)):t=0,r.height>i.height?(s>0&&(n+=s),u>0&&(n-=u)):n=0,t===this._passiveTransform.x&&n===this._passiveTransform.y||this.setFreeDragPosition({y:n,x:t})}}}},{key:"_getDragStartDelay",value:function(e){var t=this.dragStartDelay;return"number"==typeof t?t:FI(e)?t.touch:t?t.mouse:0}},{key:"_updateOnScroll",value:function(e){var t=this._parentPositions.handleScroll(e);if(t){var n=aI(e);this._boundaryRect&&n!==this._boundaryElement&&n.contains(this._boundaryElement)&&TI(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}},{key:"_getViewportScrollPosition",value:function(){var e;return(null===(e=this._parentPositions.positions.get(this._document))||void 0===e?void 0:e.scrollPosition)||this._parentPositions.getViewportScrollPosition()}},{key:"_getShadowRoot",value:function(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=iI(this._rootElement)),this._cachedShadowRoot}},{key:"_getPreviewInsertionPoint",value:function(e,t){var n=this._previewContainer||"global";if("parent"===n)return e;if("global"===n){var r=this._document;return t||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return jT(n)}},{key:"_getPreviewRect",value:function(){return this._previewRect&&(this._previewRect.width||this._previewRect.height)||(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),this._previewRect}},{key:"_getTargetHandle",value:function(e){return this._handles.find(function(t){return e.target&&(e.target===t||t.contains(e.target))})}}]),e}();function ZI(e,t){return"translate3d(".concat(Math.round(e),"px, ").concat(Math.round(t),"px, 0)")}function UI(e,t,n){return Math.max(t,Math.min(n,e))}function FI(e){return"t"===e.type[0]}function qI(e,t){var n=e.rootNodes;if(1===n.length&&n[0].nodeType===t.ELEMENT_NODE)return n[0];var r=t.createElement("div");return n.forEach(function(e){return r.appendChild(e)}),r}function VI(e,t){e.style.width="".concat(t.width,"px"),e.style.height="".concat(t.height,"px"),e.style.transform=ZI(t.left,t.top)}function jI(e,t){return Math.max(0,Math.min(t,e))}var BI=function(){function e(t,n,r,i,a){var o=this;v(this,e),this._dragDropRegistry=n,this._ngZone=i,this._viewportRuler=a,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=function(){return!0},this.sortPredicate=function(){return!0},this.beforeStarted=new Xk.xQ,this.entered=new Xk.xQ,this.exited=new Xk.xQ,this.dropped=new Xk.xQ,this.sorted=new Xk.xQ,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=Kb.w.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new Xk.xQ,this._cachedShadowRoot=null,this._startScrollInterval=function(){o._stopScrolling(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wx.P;return(!(0,QT.k)(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=Wx.P),new Je.y(function(n){return n.add(t.schedule(cI,e,{subscriber:n,counter:0,period:e})),n})}(0,KT).pipe(hI(o._stopScrollTimers)).subscribe(function(){var e=o._scrollNode,t=o.autoScrollStep;1===o._verticalScrollDirection?e.scrollBy(0,-t):2===o._verticalScrollDirection&&e.scrollBy(0,t),1===o._horizontalScrollDirection?e.scrollBy(-t,0):2===o._horizontalScrollDirection&&e.scrollBy(t,0)})},this.element=jT(t),this._document=r,this.withScrollableParents([this.element]),n.registerDropContainer(this),this._parentPositions=new EI(r)}return p(e,[{key:"dispose",value:function(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}},{key:"isDragging",value:function(){return this._isDragging}},{key:"start",value:function(){this._draggingStarted(),this._notifyReceivingSiblings()}},{key:"enter",value:function(e,t,n,r){var i;this._draggingStarted(),null==r?-1===(i=this.sortingDisabled?this._draggables.indexOf(e):-1)&&(i=this._getItemIndexFromPointerPosition(e,t,n)):i=r;var a=this._activeDraggables,o=a.indexOf(e),s=e.getPlaceholderElement(),u=a[i];if(u===e&&(u=a[i+1]),!u&&(null==i||-1===i||i<a.length-1)&&this._shouldEnterAsFirstChild(t,n)&&(u=a[0]),o>-1&&a.splice(o,1),u&&!this._dragDropRegistry.isDragging(u)){var c=u.getRootElement();c.parentElement.insertBefore(s,c),a.splice(i,0,e)}else jT(this.element).appendChild(s),a.push(e);s.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}},{key:"exit",value:function(e){this._reset(),this.exited.next({item:e,container:this})}},{key:"drop",value:function(e,t,n,r,i,a,o){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:n,container:this,previousContainer:r,isPointerOverContainer:i,distance:a,dropPoint:o})}},{key:"withItems",value:function(e){var t=this,n=this._draggables;return this._draggables=e,e.forEach(function(e){return e._withDropContainer(t)}),this.isDragging()&&(n.filter(function(e){return e.isDragging()}).every(function(t){return-1===e.indexOf(t)})?this._reset():this._cacheItems()),this}},{key:"withDirection",value:function(e){return this._direction=e,this}},{key:"connectedTo",value:function(e){return this._siblings=e.slice(),this}},{key:"withOrientation",value:function(e){return this._orientation=e,this}},{key:"withScrollableParents",value:function(e){var t=jT(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t].concat(u(e)):e.slice(),this}},{key:"getScrollableParents",value:function(){return this._scrollableElements}},{key:"getItemIndex",value:function(e){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(function(t){return t.drag===e}):this._draggables.indexOf(e)}},{key:"isReceiving",value:function(){return this._activeSiblings.size>0}},{key:"_sortItem",value:function(e,t,n,r){if(!this.sortingDisabled&&this._clientRect&&II(this._clientRect,.05,t,n)){var i=this._itemPositions,a=this._getItemIndexFromPointerPosition(e,t,n,r);if(!(-1===a&&i.length>0)){var o="horizontal"===this._orientation,s=i.findIndex(function(t){return t.drag===e}),u=i[a],c=u.clientRect,l=s>a?1:-1,h=this._getItemOffsetPx(i[s].clientRect,c,l),f=this._getSiblingOffsetPx(s,i,l),d=i.slice();!function(e,t,n){var r=jI(t,e.length-1),i=jI(n,e.length-1);if(r!==i){for(var a=e[r],o=i<r?-1:1,s=r;s!==i;s+=o)e[s]=e[s+o];e[i]=a}}(i,s,a),this.sorted.next({previousIndex:s,currentIndex:a,container:this,item:e}),i.forEach(function(t,n){if(d[n]!==t){var r=t.drag===e,i=r?h:f,a=r?e.getPlaceholderElement():t.drag.getRootElement();t.offset+=i,o?(a.style.transform=bI("translate3d(".concat(Math.round(t.offset),"px, 0, 0)"),t.initialTransform),TI(t.clientRect,0,i)):(a.style.transform=bI("translate3d(0, ".concat(Math.round(t.offset),"px, 0)"),t.initialTransform),TI(t.clientRect,i,0))}}),this._previousSwap.overlaps=SI(c,t,n),this._previousSwap.drag=u.drag,this._previousSwap.delta=o?r.x:r.y}}}},{key:"_startScrollingIfNecessary",value:function(e,t){var n=this;if(!this.autoScrollDisabled){var i,a=0,o=0;if(this._parentPositions.positions.forEach(function(s,u){var c;u!==n._document&&s.clientRect&&!i&&II(s.clientRect,.05,e,t)&&(c=r(function(e,t,n,r){var i=HI(t,r),a=zI(t,n),o=0,s=0;if(i){var u=e.scrollTop;1===i?u>0&&(o=1):e.scrollHeight-u>e.clientHeight&&(o=2)}if(a){var c=e.scrollLeft;1===a?c>0&&(s=1):e.scrollWidth-c>e.clientWidth&&(s=2)}return[o,s]}(u,s.clientRect,e,t),2),a=c[0],o=c[1],(a||o)&&(i=u))}),!a&&!o){var s=this._viewportRuler.getViewportSize(),u=s.width,c=s.height,l={width:u,height:c,top:0,right:u,bottom:c,left:0};a=HI(l,t),o=zI(l,e),i=window}!i||a===this._verticalScrollDirection&&o===this._horizontalScrollDirection&&i===this._scrollNode||(this._verticalScrollDirection=a,this._horizontalScrollDirection=o,this._scrollNode=i,(a||o)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}}},{key:"_stopScrolling",value:function(){this._stopScrollTimers.next()}},{key:"_draggingStarted",value:function(){var e=jT(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}},{key:"_cacheParentPositions",value:function(){var e=jT(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}},{key:"_cacheItemPositions",value:function(){var e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(function(e){var t=e.getVisibleElement();return{drag:e,offset:0,initialTransform:t.style.transform||"",clientRect:xI(t)}}).sort(function(t,n){return e?t.clientRect.left-n.clientRect.left:t.clientRect.top-n.clientRect.top})}},{key:"_reset",value:function(){var e=this;this._isDragging=!1;var t=jT(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(function(t){var n=t.getRootElement();if(n){var r,i=null===(r=e._itemPositions.find(function(e){return e.drag===t}))||void 0===r?void 0:r.initialTransform;n.style.transform=i||""}}),this._siblings.forEach(function(t){return t._stopReceiving(e)}),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}},{key:"_getSiblingOffsetPx",value:function(e,t,n){var r="horizontal"===this._orientation,i=t[e].clientRect,a=t[e+-1*n],o=i[r?"width":"height"]*n;if(a){var s=r?"left":"top",u=r?"right":"bottom";-1===n?o-=a.clientRect[s]-i[u]:o+=i[s]-a.clientRect[u]}return o}},{key:"_getItemOffsetPx",value:function(e,t,n){var r="horizontal"===this._orientation,i=r?t.left-e.left:t.top-e.top;return-1===n&&(i+=r?t.width-e.width:t.height-e.height),i}},{key:"_shouldEnterAsFirstChild",value:function(e,t){if(!this._activeDraggables.length)return!1;var n=this._itemPositions,r="horizontal"===this._orientation;if(n[0].drag!==this._activeDraggables[0]){var i=n[n.length-1].clientRect;return r?e>=i.right:t>=i.bottom}var a=n[0].clientRect;return r?e<=a.left:t<=a.top}},{key:"_getItemIndexFromPointerPosition",value:function(e,t,n,r){var i=this,a="horizontal"===this._orientation,o=this._itemPositions.findIndex(function(o){var s=o.drag,u=o.clientRect;if(s===e)return!1;if(r){var c=a?r.x:r.y;if(s===i._previousSwap.drag&&i._previousSwap.overlaps&&c===i._previousSwap.delta)return!1}return a?t>=Math.floor(u.left)&&t<Math.floor(u.right):n>=Math.floor(u.top)&&n<Math.floor(u.bottom)});return-1!==o&&this.sortPredicate(o,e,this)?o:-1}},{key:"_cacheItems",value:function(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}},{key:"_isOverContainer",value:function(e,t){return null!=this._clientRect&&SI(this._clientRect,e,t)}},{key:"_getSiblingContainerFromPosition",value:function(e,t,n){return this._siblings.find(function(r){return r._canReceive(e,t,n)})}},{key:"_canReceive",value:function(e,t,n){if(!this._clientRect||!SI(this._clientRect,t,n)||!this.enterPredicate(e,this))return!1;var r=this._getShadowRoot().elementFromPoint(t,n);if(!r)return!1;var i=jT(this.element);return r===i||i.contains(r)}},{key:"_startReceiving",value:function(e,t){var n=this,r=this._activeSiblings;!r.has(e)&&t.every(function(e){return n.enterPredicate(e,n)||n._draggables.indexOf(e)>-1})&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}},{key:"_stopReceiving",value:function(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}},{key:"_listenToScrollEvents",value:function(){var e=this;this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(function(t){if(e.isDragging()){var n=e._parentPositions.handleScroll(t);n&&(e._itemPositions.forEach(function(e){TI(e.clientRect,n.top,n.left)}),e._itemPositions.forEach(function(t){var n=t.drag;e._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()}))}else e.isReceiving()&&e._cacheParentPositions()})}},{key:"_getShadowRoot",value:function(){if(!this._cachedShadowRoot){var e=iI(jT(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}},{key:"_notifyReceivingSiblings",value:function(){var e=this,t=this._activeDraggables.filter(function(e){return e.isDragging()});this._siblings.forEach(function(n){return n._startReceiving(e,t)})}}]),e}();function HI(e,t){var n=e.top,r=e.bottom,i=.05*e.height;return t>=n-i&&t<=n+i?1:t>=r-i&&t<=r+i?2:0}function zI(e,t){var n=e.left,r=e.right,i=.05*e.width;return t>=n-i&&t<=n+i?1:t>=r-i&&t<=r+i?2:0}var GI=rI({passive:!1,capture:!0}),KI=function(){var e=function(){function e(t,n){var r=this;v(this,e),this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=function(e){return e.isDragging()},this.pointerMove=new Xk.xQ,this.pointerUp=new Xk.xQ,this.scroll=new Xk.xQ,this._preventDefaultWhileDragging=function(e){r._activeDragInstances.length>0&&e.preventDefault()},this._persistentTouchmoveListener=function(e){r._activeDragInstances.length>0&&(r._activeDragInstances.some(r._draggingPredicate)&&e.preventDefault(),r.pointerMove.next(e))},this._document=n}return p(e,[{key:"registerDropContainer",value:function(e){this._dropInstances.has(e)||this._dropInstances.add(e)}},{key:"registerDragItem",value:function(e){var t=this;this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(function(){t._document.addEventListener("touchmove",t._persistentTouchmoveListener,GI)})}},{key:"removeDropContainer",value:function(e){this._dropInstances.delete(e)}},{key:"removeDragItem",value:function(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,GI)}},{key:"startDragging",value:function(e,t){var n=this;if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){var r=t.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:function(e){return n.pointerUp.next(e)},options:!0}).set("scroll",{handler:function(e){return n.scroll.next(e)},options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:GI}),r||this._globalListeners.set("mousemove",{handler:function(e){return n.pointerMove.next(e)},options:GI}),this._ngZone.runOutsideAngular(function(){n._globalListeners.forEach(function(e,t){n._document.addEventListener(t,e.handler,e.options)})})}}},{key:"stopDragging",value:function(e){var t=this._activeDragInstances.indexOf(e);t>-1&&(this._activeDragInstances.splice(t,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}},{key:"isDragging",value:function(e){return this._activeDragInstances.indexOf(e)>-1}},{key:"scrolled",value:function(e){var t=this,n=[this.scroll];return e&&e!==this._document&&n.push(new Je.y(function(n){return t._ngZone.runOutsideAngular(function(){var r=function(e){t._activeDragInstances.length&&n.next(e)};return e.addEventListener("scroll",r,!0),function(){e.removeEventListener("scroll",r,!0)}})})),lI.T.apply(void 0,n)}},{key:"ngOnDestroy",value:function(){var e=this;this._dragInstances.forEach(function(t){return e.removeDragItem(t)}),this._dropInstances.forEach(function(t){return e.removeDropContainer(t)}),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}},{key:"_clearGlobalListeners",value:function(){var e=this;this._globalListeners.forEach(function(t,n){e._document.removeEventListener(n,t.handler,t.options)}),this._globalListeners.clear()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(a.R0b),a.LFG(h))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),WI={dragStartThreshold:5,pointerDirectionChangeThreshold:5},JI=function(){var e=function(){function e(t,n,r,i){v(this,e),this._document=t,this._ngZone=n,this._viewportRuler=r,this._dragDropRegistry=i}return p(e,[{key:"createDrag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:WI;return new MI(e,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}},{key:"createDropList",value:function(e){return new BI(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(h),a.LFG(a.R0b),a.LFG(sI),a.LFG(KI))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),YI=new a.OlP("CDK_DRAG_PARENT"),QI=new a.OlP("CdkDropListGroup"),$I=new a.OlP("CDK_DRAG_CONFIG"),XI=0,eE=new a.OlP("CdkDropList"),tE=function(){var e=function(){function e(t,n,r,i,o,s,u){var c=this;v(this,e),this.element=t,this._changeDetectorRef=r,this._scrollDispatcher=i,this._dir=o,this._group=s,this._destroyed=new Xk.xQ,this.connectedTo=[],this.id="cdk-drop-list-"+XI++,this.enterPredicate=function(){return!0},this.sortPredicate=function(){return!0},this.dropped=new a.vpe,this.entered=new a.vpe,this.exited=new a.vpe,this.sorted=new a.vpe,this._unsortedItems=new Set,this._dropListRef=n.createDropList(t),this._dropListRef.data=this,u&&this._assignDefaults(u),this._dropListRef.enterPredicate=function(e,t){return c.enterPredicate(e.data,t.data)},this._dropListRef.sortPredicate=function(e,t,n){return c.sortPredicate(e,t.data,n.data)},this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),e._dropLists.push(this),s&&s._items.add(this)}return p(e,[{key:"disabled",get:function(){return this._disabled||!!this._group&&this._group.disabled},set:function(e){this._dropListRef.disabled=this._disabled=qT(e)}},{key:"addItem",value:function(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}},{key:"removeItem",value:function(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}},{key:"getSortedItems",value:function(){return Array.from(this._unsortedItems).sort(function(e,t){return e._dragRef.getVisibleElement().compareDocumentPosition(t._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1})}},{key:"ngOnDestroy",value:function(){var t=e._dropLists.indexOf(this);t>-1&&e._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}},{key:"_setupInputSyncSubscription",value:function(t){var n=this;this._dir&&this._dir.change.pipe(Ib(this._dir.value),hI(this._destroyed)).subscribe(function(e){return t.withDirection(e)}),t.beforeStarted.subscribe(function(){var r,i=(r=n.connectedTo,Array.isArray(r)?r:[r]).map(function(t){return"string"==typeof t?e._dropLists.find(function(e){return e.id===t}):t});if(n._group&&n._group._items.forEach(function(e){-1===i.indexOf(e)&&i.push(e)}),!n._scrollableParentsResolved){var a=n._scrollDispatcher.getAncestorScrollContainers(n.element).map(function(e){return e.getElementRef().nativeElement});n._dropListRef.withScrollableParents(a),n._scrollableParentsResolved=!0}t.disabled=n.disabled,t.lockAxis=n.lockAxis,t.sortingDisabled=qT(n.sortingDisabled),t.autoScrollDisabled=qT(n.autoScrollDisabled),t.autoScrollStep=VT(n.autoScrollStep,2),t.connectedTo(i.filter(function(e){return e&&e!==n}).map(function(e){return e._dropListRef})).withOrientation(n.orientation)})}},{key:"_handleEvents",value:function(e){var t=this;e.beforeStarted.subscribe(function(){t._syncItemsWithRef(),t._changeDetectorRef.markForCheck()}),e.entered.subscribe(function(e){t.entered.emit({container:t,item:e.item.data,currentIndex:e.currentIndex})}),e.exited.subscribe(function(e){t.exited.emit({container:t,item:e.item.data}),t._changeDetectorRef.markForCheck()}),e.sorted.subscribe(function(e){t.sorted.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,container:t,item:e.item.data})}),e.dropped.subscribe(function(e){t.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,item:e.item.data,isPointerOverContainer:e.isPointerOverContainer,distance:e.distance,dropPoint:e.dropPoint}),t._changeDetectorRef.markForCheck()})}},{key:"_assignDefaults",value:function(e){var t=e.lockAxis,n=e.draggingDisabled,r=e.sortingDisabled,i=e.listAutoScrollDisabled,a=e.listOrientation;this.disabled=null!=n&&n,this.sortingDisabled=null!=r&&r,this.autoScrollDisabled=null!=i&&i,this.orientation=a||"vertical",t&&(this.lockAxis=t)}},{key:"_syncItemsWithRef",value:function(){this._dropListRef.withItems(this.getSortedItems().map(function(e){return e._dragRef}))}}]),e}();return e._dropLists=[],e.\u0275fac=function(t){return new(t||e)(a.Y36(a.SBq),a.Y36(JI),a.Y36(a.sBO),a.Y36(oI),a.Y36(gI,8),a.Y36(QI,12),a.Y36($I,8))},e.\u0275dir=a.lG2({type:e,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(e,t){2&e&&(a.uIk("id",t.id),a.ekj("cdk-drop-list-disabled",t.disabled)("cdk-drop-list-dragging",t._dropListRef.isDragging())("cdk-drop-list-receiving",t._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[a._Bn([{provide:QI,useValue:void 0},{provide:eE,useExisting:e}])]}),e}(),nE=new a.OlP("CdkDragHandle"),rE=new a.OlP("CdkDragPlaceholder"),iE=new a.OlP("CdkDragPreview"),aE=function(){var e=function(){function e(t,n,r,i,o,s,u,c,l,h,f){var d=this;v(this,e),this.element=t,this.dropContainer=n,this._ngZone=i,this._viewContainerRef=o,this._dir=u,this._changeDetectorRef=l,this._selfHandle=h,this._parentDrag=f,this._destroyed=new Xk.xQ,this.started=new a.vpe,this.released=new a.vpe,this.ended=new a.vpe,this.entered=new a.vpe,this.exited=new a.vpe,this.dropped=new a.vpe,this.moved=new Je.y(function(e){var t=d._dragRef.moved.pipe((0,nt.U)(function(e){return{source:d,pointerPosition:e.pointerPosition,event:e.event,delta:e.delta,distance:e.distance}})).subscribe(e);return function(){t.unsubscribe()}}),this._dragRef=c.createDrag(t,{dragStartThreshold:s&&null!=s.dragStartThreshold?s.dragStartThreshold:5,pointerDirectionChangeThreshold:s&&null!=s.pointerDirectionChangeThreshold?s.pointerDirectionChangeThreshold:5,zIndex:null==s?void 0:s.zIndex}),this._dragRef.data=this,e._dragInstances.push(this),s&&this._assignDefaults(s),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}return p(e,[{key:"disabled",get:function(){return this._disabled||this.dropContainer&&this.dropContainer.disabled},set:function(e){this._disabled=qT(e),this._dragRef.disabled=this._disabled}},{key:"getPlaceholderElement",value:function(){return this._dragRef.getPlaceholderElement()}},{key:"getRootElement",value:function(){return this._dragRef.getRootElement()}},{key:"reset",value:function(){this._dragRef.reset()}},{key:"getFreeDragPosition",value:function(){return this._dragRef.getFreeDragPosition()}},{key:"ngAfterViewInit",value:function(){var e=this;this._ngZone.runOutsideAngular(function(){e._ngZone.onStable.pipe(xb(1),hI(e._destroyed)).subscribe(function(){e._updateRootElement(),e._setupHandlesListener(),e.freeDragPosition&&e._dragRef.setFreeDragPosition(e.freeDragPosition)})})}},{key:"ngOnChanges",value:function(e){var t=e.rootElementSelector,n=e.freeDragPosition;t&&!t.firstChange&&this._updateRootElement(),n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}},{key:"ngOnDestroy",value:function(){var t=this;this.dropContainer&&this.dropContainer.removeItem(this);var n=e._dragInstances.indexOf(this);n>-1&&e._dragInstances.splice(n,1),this._ngZone.runOutsideAngular(function(){t._destroyed.next(),t._destroyed.complete(),t._dragRef.dispose()})}},{key:"_updateRootElement",value:function(){var e,t=this.element.nativeElement,n=t;this.rootElementSelector&&(n=void 0!==t.closest?t.closest(this.rootElementSelector):null===(e=t.parentElement)||void 0===e?void 0:e.closest(this.rootElementSelector)),this._dragRef.withRootElement(n||t)}},{key:"_getBoundaryElement",value:function(){var e=this.boundaryElement;return e?"string"==typeof e?this.element.nativeElement.closest(e):jT(e):null}},{key:"_syncInputs",value:function(t){var n=this;t.beforeStarted.subscribe(function(){if(!t.isDragging()){var e=n._dir,r=n.dragStartDelay,i=n._placeholderTemplate?{template:n._placeholderTemplate.templateRef,context:n._placeholderTemplate.data,viewContainer:n._viewContainerRef}:null,a=n._previewTemplate?{template:n._previewTemplate.templateRef,context:n._previewTemplate.data,matchSize:n._previewTemplate.matchSize,viewContainer:n._viewContainerRef}:null;t.disabled=n.disabled,t.lockAxis=n.lockAxis,t.dragStartDelay="object"==typeof r&&r?r:VT(r),t.constrainPosition=n.constrainPosition,t.previewClass=n.previewClass,t.withBoundaryElement(n._getBoundaryElement()).withPlaceholderTemplate(i).withPreviewTemplate(a).withPreviewContainer(n.previewContainer||"global"),e&&t.withDirection(e.value)}}),t.beforeStarted.pipe(xb(1)).subscribe(function(){if(n._parentDrag)t.withParent(n._parentDrag._dragRef);else for(var r=n.element.nativeElement.parentElement;r;){if(r.classList.contains("cdk-drag")){var i;t.withParent((null===(i=e._dragInstances.find(function(e){return e.element.nativeElement===r}))||void 0===i?void 0:i._dragRef)||null);break}r=r.parentElement}})}},{key:"_handleEvents",value:function(e){var t=this;e.started.subscribe(function(){t.started.emit({source:t}),t._changeDetectorRef.markForCheck()}),e.released.subscribe(function(){t.released.emit({source:t})}),e.ended.subscribe(function(e){t.ended.emit({source:t,distance:e.distance,dropPoint:e.dropPoint}),t._changeDetectorRef.markForCheck()}),e.entered.subscribe(function(e){t.entered.emit({container:e.container.data,item:t,currentIndex:e.currentIndex})}),e.exited.subscribe(function(e){t.exited.emit({container:e.container.data,item:t})}),e.dropped.subscribe(function(e){t.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,isPointerOverContainer:e.isPointerOverContainer,item:t,distance:e.distance,dropPoint:e.dropPoint})})}},{key:"_assignDefaults",value:function(e){var t=e.lockAxis,n=e.dragStartDelay,r=e.constrainPosition,i=e.previewClass,a=e.boundaryElement,o=e.draggingDisabled,s=e.rootElementSelector,u=e.previewContainer;this.disabled=null!=o&&o,this.dragStartDelay=n||0,t&&(this.lockAxis=t),r&&(this.constrainPosition=r),i&&(this.previewClass=i),a&&(this.boundaryElement=a),s&&(this.rootElementSelector=s),u&&(this.previewContainer=u)}},{key:"_setupHandlesListener",value:function(){var e=this;this._handles.changes.pipe(Ib(this._handles),(0,zb.b)(function(t){var n=t.filter(function(t){return t._parentDrag===e}).map(function(e){return e.element});e._selfHandle&&e.rootElementSelector&&n.push(e.element),e._dragRef.withHandles(n)}),kb(function(e){return lI.T.apply(void 0,u(e.map(function(e){return e._stateChanges.pipe(Ib(e))})))}),hI(this._destroyed)).subscribe(function(t){var n=e._dragRef,r=t.element.nativeElement;t.disabled?n.disableHandle(r):n.enableHandle(r)})}}]),e}();return e._dragInstances=[],e.\u0275fac=function(t){return new(t||e)(a.Y36(a.SBq),a.Y36(eE,12),a.Y36(h),a.Y36(a.R0b),a.Y36(a.s_b),a.Y36($I,8),a.Y36(gI,8),a.Y36(JI),a.Y36(a.sBO),a.Y36(nE,10),a.Y36(YI,12))},e.\u0275dir=a.lG2({type:e,selectors:[["","cdkDrag",""]],contentQueries:function(e,t,n){var r;(1&e&&(a.Suo(n,iE,5),a.Suo(n,rE,5),a.Suo(n,nE,5)),2&e)&&(a.iGM(r=a.CRH())&&(t._previewTemplate=r.first),a.iGM(r=a.CRH())&&(t._placeholderTemplate=r.first),a.iGM(r=a.CRH())&&(t._handles=r))},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(e,t){2&e&&a.ekj("cdk-drag-disabled",t.disabled)("cdk-drag-dragging",t._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[a._Bn([{provide:YI,useExisting:e}]),a.TTD]}),e}(),oE=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[JI],imports:[uI]}),e}(),sE=(function(e){e[e.None=0]="None",e[e.Wait=1]="Wait",e[e.AddVariable=2]="AddVariable",e[e.SplashShow=3]="SplashShow",e[e.TitleShow=4]="TitleShow",e[e.TitleHide=5]="TitleHide",e[e.ClosedCaptionShow=6]="ClosedCaptionShow",e[e.ClosedCaptionHide=7]="ClosedCaptionHide",e[e.NewScene=8]="NewScene",e[e.SceneTitleHide=9]="SceneTitleHide",e[e.BgImageShow=10]="BgImageShow",e[e.BgImageHide=11]="BgImageHide",e[e.BgEffectsPlay=12]="BgEffectsPlay",e[e.BgEffectsStop=13]="BgEffectsStop",e[e.BgMusicPlay=14]="BgMusicPlay",e[e.BgMusicPause=15]="BgMusicPause",e[e.BgMusicStop=16]="BgMusicStop",e[e.SoundEffectsShow=17]="SoundEffectsShow",e[e.SoundEffectsHide=18]="SoundEffectsHide",e[e.SoundEffectsPlay=19]="SoundEffectsPlay",e[e.SoundEffectsPause=20]="SoundEffectsPause",e[e.SoundEffectsStop=21]="SoundEffectsStop",e[e.CharAdd=22]="CharAdd",e[e.CharRemove=23]="CharRemove",e[e.CharSpeak=24]="CharSpeak",e[e.CharShutup=25]="CharShutup",e[e.CharEffectsPlay=26]="CharEffectsPlay",e[e.CharEffectsStop=27]="CharEffectsStop",e[e.NarratorSpeak=28]="NarratorSpeak",e[e.ImageSnippetShow=29]="ImageSnippetShow",e[e.ImageSnippetHide=30]="ImageSnippetHide",e[e.TextEffectShow=31]="TextEffectShow",e[e.WeatherEffectStart=32]="WeatherEffectStart",e[e.TextEffectHide=33]="TextEffectHide",e[e.DubbingPlay=34]="DubbingPlay"}(sE||(sE={})),sE),uE=p(function e(t,n,r){v(this,e),this.commandType=sE.None,this.waitAfterInMs=1e3,this.commandType=t,this.settings=r,this.waitAfterInMs=n}),cE=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){try{var t=e.indexOf(":"),n=e.substr(1,t-2),r=e.substr(t+1,e.length).replace("<","").replace(">","");return[new uE(sE.AddVariable,0,{name:n,value:r})]}catch(im){return[]}}}]),e}(),lE=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){try{var t={value:e.split(":")[1].replace("[","").replace("]","").trim()};return[new uE(sE.BgImageHide,0,{}),new uE(sE.BgImageShow,0,t)]}catch(im){return[]}}}]),e}(),hE=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){try{var t=e.split(":")[1].replace("[","").replace("]","").trim(),n={value:t,loop:e.split(":")[0].trim().includes("bgm")},r=[];return r.push(new uE(t?sE.BgMusicPlay:sE.BgMusicStop,0,n)),console.log(r),r}catch(im){return[]}}}]),e}(),fE=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){try{var t=e.indexOf("(")>1&&e.indexOf(")")>e.indexOf("("),n={title:e.substr(2,t?e.indexOf("(")-2:e.length-2).trim(),subtitle:t?e.substring(e.indexOf("(")+1,e.indexOf(")")).trim():""};return[new uE(sE.TitleShow,4e3,n),new uE(sE.TitleHide,0,{})]}catch(im){return[]}}}]),e}(),dE=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){try{var t=e.substr(4,e.length).trim();return[new uE(sE.NewScene,3e3,{title:t}),new uE(sE.SceneTitleHide,0,{})]}catch(im){return[]}}}]),e}(),pE=(function(e){e[e.None=0]="None",e[e.Left=1]="Left",e[e.Right=2]="Right"}(pE||(pE={})),pE),vE=["serious","angry","scared","whisper","creepy","redacted"],gE=p(function e(t){v(this,e),this.id="",this.name="",this.tokenId="",this.nft="sj",this.imageUrl="",this.position=pE.None,this.dialogue="",this.dialogueType="normal",this.anonLevel=0,this.id=t.id,this.name=t.name,this.tokenId=t.tokenId,this.nft=t.nft,this.imageUrl=t.imageUrl,this.position=t.position,this.dialogue=t.dialogue,this.anonLevel=t.anonLevel}),mE=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){var t;try{var n=e.split(":"),r=n[0].split("|")[0],i=r.toUpperCase().includes("R")?pE.Right:pE.Left,a=r.split("?").length,o=n[0].split("|")[1].trim(),s=null===(t=n[1])||void 0===t?void 0:t.match(/[^\.!\?]+[\.!\?]+/g),u=[new uE(sE.CharAdd,0,{name:4===a||2===a?"?????:":"".concat(o,":"),position:i,anonLevel:a,id:o,dialogue:""})];if(!s&&n[1].length>0){var c=n[1].trim(),l="normal";vE.forEach(function(e){c.includes("$".concat(e,"$"))&&(l=e,c=c.replace("$".concat(e,"$"),"").trim())});var h={name:4===a||2===a?"?????:":"".concat(o,":"),position:i,anonLevel:a,id:o,dialogueType:l,dialogue:c.trim()};return u.push(new uE(sE.CharSpeak,1e3,h)),u}return null==s||s.forEach(function(e){e=e.trim();var t="normal";vE.forEach(function(n){e.includes("$".concat(n,"$"))&&(t=n,e=e.replace("$".concat(n,"$"),"").trim())});var n={name:4===a||2===a?"?????:":"".concat(o,":"),position:i,anonLevel:a,id:o,dialogueType:t,dialogue:e.trim()};e.trim()&&u.push(new uE(sE.CharSpeak,1e3,n))}),u}catch(f){return[]}}}]),e}(),yE=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){var t;try{var n=e.split(":"),r=null===(t=n[1])||void 0===t?void 0:t.match(/[^\.!\?]+[\.!\?]+/g),i=[];if(!r&&n[1].length>0){var a={dialogue:n[1].trim()};return i.push(new uE(sE.NarratorSpeak,1e3,a)),i}return null==r||r.forEach(function(e){var t={dialogue:e.trim()};e.trim()&&i.push(new uE(sE.NarratorSpeak,1e3,t))}),i.push(new uE(sE.NarratorSpeak,0,{dialogue:""})),i}catch(o){return[]}}}]),e}(),kE=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){try{var t=e.split(":")[1].replace("[","").replace("]","").trim();return[new uE(sE.BgImageShow,5e3,{value:t})]}catch(im){return[]}}}]),e}(),bE=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){try{var t=e.split("|")[1];return[new uE(sE.CharRemove,0,{name:t,id:t})]}catch(im){return[]}}}]),e}(),wE=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){try{var t=e.split(":")[1].replace("[","").replace("]","").trim(),n={value:t};return t?[new uE(sE.ImageSnippetShow,1e3,n)]:[new uE(sE.ImageSnippetHide,0,n)]}catch(im){return[]}}}]),e}(),_E=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){var t;try{var n=e.split(":"),r=null===(t=n[0].split("|"))||void 0===t?void 0:t[1],i=n[1],a=[],o={value:i,posIndex:r,position:"pos-"+r};return i?(a.push(new uE(sE.TextEffectShow,1e3,o)),a.push(new uE(sE.TextEffectHide,0,o))):a.push(new uE(sE.TextEffectHide,0,o)),a}catch(s){return[]}}}]),e}(),xE=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){try{var t=e.split(":"),n=t[1].match(/[^\.!\?]+[\.!\?]+/g),r=[];if(!n&&t[1].length>0){var i={cc:t[1].trim()};return r.push(new uE(sE.ClosedCaptionShow,1e3,i)),i={cc:""},r.push(new uE(sE.ClosedCaptionShow,0,i)),r}return null==n||n.forEach(function(e){var t={cc:e.trim()};e.trim()&&r.push(new uE(sE.ClosedCaptionShow,1e3,t))}),r.push(new uE(sE.ClosedCaptionShow,0,{cc:""})),r}catch(im){return[]}}}]),e}(),SE=function(){function e(){v(this,e)}return p(e,[{key:"composeEvent",value:function(e){try{var t=e.split("|"),n=t.length>1?t[1].toLowerCase():"none",r=[];return r.push(new uE(sE.WeatherEffectStart,0,{value:n})),r}catch(im){return[]}}}]),e}(),TE=function(){var e=function(){function e(){v(this,e),this.eventHandlerMap=new Map([[sE.AddVariable,new cE],[sE.BgImageShow,new lE],[sE.BgMusicPlay,new hE],[sE.ImageSnippetShow,new wE],[sE.TitleShow,new fE],[sE.NewScene,new dE],[sE.CharAdd,new mE],[sE.CharRemove,new bE],[sE.NarratorSpeak,new yE],[sE.SplashShow,new kE],[sE.TextEffectShow,new _E],[sE.ClosedCaptionShow,new xE],[sE.WeatherEffectStart,new SE]])}return p(e,[{key:"getStoryEventCommand",value:function(e){var t,n=this.getCommandType(e);return(null===(t=this.eventHandlerMap.get(n))||void 0===t?void 0:t.composeEvent(e))||[]}},{key:"getCommandType",value:function(e){return 0===e.indexOf("> N:")&&e.length>4?sE.NarratorSpeak:0===e.indexOf("> CC:")&&e.length>5?sE.ClosedCaptionShow:0===e.indexOf("> E|")&&e.length>4?sE.TextEffectShow:0===e.indexOf("> W|")&&e.length>4?sE.WeatherEffectStart:(0===e.indexOf("> L")||0===e.indexOf("> R"))&&e.length>4?sE.CharAdd:0===e.indexOf("> X|")&&e.length>4?sE.CharRemove:0===e.indexOf("`bg`:")?sE.BgImageShow:0===e.indexOf("`bgm`:")||0===e.indexOf("`soundclip`:")?sE.BgMusicPlay:0===e.indexOf("`imgpop`:")?sE.ImageSnippetShow:0===e.indexOf("`cover`:")?sE.SplashShow:0===e.indexOf("[")&&e.indexOf("]:")>1?sE.AddVariable:0===e.indexOf("# ")?sE.TitleShow:0===e.indexOf("### ")?sE.NewScene:sE.None}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}();function IE(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"div",103),a._UZ(1,"div",104),a.TgZ(2,"span",105),a.NdJ("click",function(){var e=a.CHM(n),t=e.index,r=e.$implicit;return a.oxw().removeVariable(t,r)}),a._UZ(3,"i",106),a.qZA(),a.qZA()}if(2&e){var r=t.$implicit,i=a.oxw();a.Q6J("cdkDragData",r),a.xp6(1),a.Q6J("innerHtml",i.getVariableHtml(r),a.oJD)}}function EE(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"div",103),a._UZ(1,"div",104),a.TgZ(2,"span",105),a.NdJ("click",function(){var e=a.CHM(n),t=e.index,r=e.$implicit;return a.oxw().removeScript(t,r)}),a._UZ(3,"i",106),a.qZA(),a.qZA()}if(2&e){var r=t.$implicit,i=t.index,o=a.oxw();a.Q6J("cdkDragData",r),a.xp6(1),a.Q6J("innerHtml",o.getScriptHtml(r,i),a.oJD)}}function CE(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"p",8),a.TgZ(1,"button",40),a.NdJ("click",function(){var e=a.CHM(n).$implicit,t=a.oxw();return t.removeFromScene("dialogue",t.getCharacterAvatarName(e))}),a.TgZ(2,"span",10),a._UZ(3,"img",107),a.qZA(),a.TgZ(4,"span"),a._uU(5),a.qZA(),a.qZA(),a.qZA()}if(2&e){var r=t.$implicit,i=a.oxw();a.ekj("is-hidden",!i.isValidCharacterVariableScript(r)),a.xp6(3),a.Q6J("src",i.getCharacterAvatarUrl(r),a.LSH),a.xp6(2),a.Oqu(i.getCharacterAvatarName(r))}}function AE(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"div",87),a.TgZ(1,"div",108),a.NdJ("click",function(){var e=a.CHM(n).$implicit,t=a.oxw();return t.setFile(e,t.currentSettings.type)}),a.TgZ(2,"div",89),a.TgZ(3,"figure",109),a._UZ(4,"img",110),a.qZA(),a.qZA(),a.TgZ(5,"p",92),a._UZ(6,"i",111),a._uU(7),a.qZA(),a.qZA(),a.qZA()}if(2&e){var r=t.$implicit,i=t.index,o=a.oxw();a.ekj("is-hidden",!o.isCorrectFileToDisplay(r,o.currentSettings.type)),a.xp6(3),a.ekj("is-hidden","bg"!==o.currentSettings.type&&"imgpop"!==o.currentSettings.type),a.xp6(1),a.ekj("selected",o.charManagerSettings.targetCharIndex===i),a.Q6J("src",o.getVariableValue(r),a.LSH),a.xp6(2),a.ekj("is-hidden","bgm"!==o.currentSettings.type&&"soundclip"!==o.currentSettings.type),a.xp6(1),a.hij(" ",o.getVariableName(r)," ")}}function RE(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"p",8),a.TgZ(1,"button",40),a.NdJ("click",function(){var e=a.CHM(n).$implicit,t=a.oxw();return t.selectCharacterToSpeak(t.getCharacterAvatarName(e))}),a.TgZ(2,"span",10),a._UZ(3,"img",107),a.qZA(),a.TgZ(4,"span"),a._uU(5),a.qZA(),a.qZA(),a.qZA()}if(2&e){var r=t.$implicit,i=a.oxw();a.ekj("is-hidden",!i.isValidCharacterVariableScript(r)),a.xp6(1),a.ekj("is-info",i.getCharacterAvatarName(r)===i.currentSettings.name),a.xp6(2),a.Q6J("src",i.getCharacterAvatarUrl(r),a.LSH),a.xp6(2),a.Oqu(i.getCharacterAvatarName(r))}}function DE(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"div",87),a.TgZ(1,"div",108),a.NdJ("click",function(){var e=a.CHM(n).index;return a.oxw().editCharacter(e)}),a.TgZ(2,"div",89),a.TgZ(3,"figure",90),a._UZ(4,"img",112),a.qZA(),a.qZA(),a.TgZ(5,"p",92),a._uU(6),a.qZA(),a.qZA(),a.qZA()}if(2&e){var r=t.$implicit,i=t.index,o=a.oxw();a.ekj("is-hidden",!o.isValidCharacterVariableScript(r)),a.xp6(4),a.ekj("selected",o.charManagerSettings.targetCharIndex===i),a.Q6J("src",o.getCharacterAvatarUrl(r),a.LSH),a.xp6(2),a.hij(" ",o.getCharacterAvatarName(r)," ")}}var PE=function(){var e=function(){function e(t,n,r){v(this,e),this.domSanitizer=t,this.storyboardService=n,this.storyEventService=r,this.dataUpdated=new a.vpe,this._rawScreenplay="",this.variablesData=new Map,this.variables=[],this.scripts=[],this.showDiagOptions=!1,this.fileVariableSettings={name:"",value:""},this.charManagerSettings={visible:!1,targetCollection:"SJ",targetCharIndex:-1,targetCharName:"",tokenId:"",name:"",maxTokenId:9e3,minTokenId:0},this.tempDialogueSetting={type:"none",name:"",position:"right",isHidden:!1,isUnnamed:!1,inputText:"",line:""},this.previousDialogueSetting={type:"none",name:"",position:"right",isHidden:!1,isUnnamed:!1,inputText:"",line:""},this.currentSettings={type:"none",name:"",position:"right",isHidden:!1,isUnnamed:!1,inputText:"",line:""}}return p(e,[{key:"reset",set:function(e){this.charManagerSettings={visible:!1,targetCollection:"SJ",targetCharIndex:-1,targetCharName:"",tokenId:"",name:"",maxTokenId:9e3,minTokenId:0},this.tempDialogueSetting={type:"none",name:"",position:"right",isHidden:!1,isUnnamed:!1,inputText:"",line:""},this.previousDialogueSetting={type:"none",name:"",position:"right",isHidden:!1,isUnnamed:!1,inputText:"",line:""},this.currentSettings={type:"none",name:"",position:"right",isHidden:!1,isUnnamed:!1,inputText:"",line:""}}},{key:"rawScreenplay",get:function(){return this._rawScreenplay},set:function(e){e!==this.rawScreenplay&&(this._rawScreenplay=e,this.breakdownRawScreenplay())}},{key:"drop",value:function(e){e.previousContainer===e.container?this.moveLine(e.previousIndex,e.currentIndex):function(e,t,n,r){var i=jI(n,e.length-1),a=jI(r,t.length);e.length&&t.splice(a,0,e.splice(i,1)[0])}(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex)}},{key:"moveLine",value:function(e,t){var n=this.scripts.splice(e,1);this.scripts.splice(t,0,n[0]),this.remap()}},{key:"noReturnPredicate",value:function(){return!1}},{key:"getVariableHtml",value:function(e){var t=this.storyEventService.getStoryEventCommand(e);if(t.length<1)return'<span class="tag is-danger is-dark">'.concat(e,"</span>");var n=this.isValidUrl(t[0].settings.value)?'<span class="tag is-success is-light"><i class="fas fa-external-link mr-1"></i>'.concat(t[0].settings.value,"</span>"):this.isValidAvatar(t[0].settings.value)?'<a target="_blank" href="'.concat(this.storyboardService.getAvatarLink(t[0].settings.value),'"><img class="circle-radius" width="25px" src="').concat(this.storyboardService.getAvatar(t[0].settings.value),'"></a><span class="tag is-success is-light"><i class="fas fa-id-badge mr-1"></i>').concat(t[0].settings.value,"</span>"):'<span class="tag is-danger">'.concat(t[0].settings.value,"</span>");return'<span class="tag is-info mr-1">'.concat(t[0].settings.name,"</span>\n    ").concat(n)}},{key:"isValidUrl",value:function(e){return 0===e.trim().indexOf("http")}},{key:"isValidAvatar",value:function(e){return!this.isValidUrl(e)&&(e=e.toLowerCase(),!Number.isNaN(Number(e))&&Number.parseInt(e)>=0&&Number.parseInt(e)<=9e3||0===e.trim().indexOf("sj#")&&(e=e.replace("sj#",""),!Number.isNaN(Number(e))&&Number.parseInt(e)>=0&&Number.parseInt(e)<=9e3)||0===e.trim().indexOf("ocm#")&&(e=e.replace("ocm#",""),!Number.isNaN(Number(e))&&Number.parseInt(e)>=1&&Number.parseInt(e)<=1e4)||0===e.trim().indexOf("dusk#")&&(e=e.replace("dusk#",""),!Number.isNaN(Number(e))&&Number.parseInt(e)>=1&&Number.parseInt(e)<=1e4))}},{key:"getDangerHtml",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"No asset found with this ID";return'<span class="tag is-danger mr-1" title="'.concat(t,'">').concat(e,"</span>")}},{key:"getNoAssetSpecifiedHtml",value:function(){return'<span class="tag is-danger mr-1">No asset specified</span>'}},{key:"getAssetLinkHtml",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return'<span class="tag is-info '.concat(t?"is-light":"",' mr-1"><i class="fas fa-external-link mr-1"></i>').concat(e,"</span>")}},{key:"getCharLinkHtml",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return'<span class="tag is-info '.concat(t?"is-light":"",' mr-1"><i class="fas fa-id-badge mr-1"></i>').concat(e,"</span>")}},{key:"getScriptHtml",value:function(e,t){var n=this.storyEventService.getStoryEventCommand(e),r='<span class="tag is-light">'.concat(t,"</span>"),i='<i class="fas fa-exclamation has-text-danger"></i>',a="";if(0===n.length)return"".concat(i,"\n       ").concat(this.getDangerHtml(e,"This line will be ignored by the player."));var o='<span class="tag is-warning is-light mr-1">wait...</span>';switch(n[0].commandType){case sE.TitleShow:a='<span class="tag is-primary is-light mr-1">show</span><span class="tag is-primary mr-1">TITLE</span>',""===n[0].settings.title?(r=i,a+='<span class="tag is-danger" title="Title is missing">EMPTY</span>'):a+="<span>".concat(n[0].settings.title,"</span>"),""!==n[0].settings.subtitle&&(a+='<span class="tag is-primary is-light mr-1">with</span><span class="tag is-primary mr-1">SUB-TITLE</span><span>'.concat(n[0].settings.subtitle,"</span>")),n[0].waitAfterInMs<=0&&(o="");break;case sE.NewScene:a='<span class="tag is-primary is-light mr-1">show</span><span class="tag is-primary mr-1">SCENE TITLE</span>',""===n[0].settings.title?(r=i,a+='<span class="tag is-danger" title="Scene title is missing">EMPTY</span>'):a+="<span>".concat(n[0].settings.title,"</span>"),n[0].waitAfterInMs<=0&&(o="");break;case sE.WeatherEffectStart:var s='<span class="tag is-primary is-light mr-1">set</span><span class="tag is-primary mr-1"> WEATHER</span><span class="tag is-primary is-light mr-1"> to</span>';n[0].settings.value&&"none"===n[0].settings.value?(s='<span class="tag is-danger is-light mr-1">remove </span><span class="tag is-primary mr-1">WEATHER</span>',a+='<span class="tag is-success is-light mr-1">effects</span>'):n[0].settings.value&&["rain","snow"].includes(n[0].settings.value)?a='<span class="tag is-info is-light mr-1">'.concat(n[0].settings.value,"</span>"):(r=i,a=this.getDangerHtml(n[0].settings.value,"Unsupported weather value")),n[0].waitAfterInMs<=0&&(o=""),a=s+a;break;case sE.SplashShow:case sE.BgImageShow:n[0].settings.value?this.isResourceVariable(n[0].settings.value)?a=this.getAssetLinkHtml(n[0].settings.value):0===n[0].settings.value.indexOf("#")?a='<span class="tag is-info is-light mr-1">HEX'.concat(n[0].settings.value,"</span>"):(r=i,a=this.getDangerHtml(n[0].settings.value)):(r=i,a=this.getNoAssetSpecifiedHtml()),n[0].waitAfterInMs<=0&&(o=""),a='<span class="tag is-primary is-light mr-1">set</span><span class="tag is-primary mr-1">BACKGROUND</span><span class="tag is-primary is-light mr-1">to</span>'+a;break;case sE.BgImageHide:if(n.length>1&&n[1]&&n[1].settings.value){n[1].settings.value?this.isResourceVariable(n[1].settings.value)?a=this.getAssetLinkHtml(n[1].settings.value):0===n[1].settings.value.indexOf("#")?a='<span class="tag is-link is-light mr-1">HEX'.concat(n[1].settings.value,"</span>"):(r=i,a=this.getDangerHtml(n[1].settings.value)):(r=i,a=this.getNoAssetSpecifiedHtml()),n[1].waitAfterInMs<=0&&(o=""),a='<span class="tag is-primary is-light mr-1">set</span><span class="tag is-primary mr-1">BACKGROUND</span><span class="tag is-primary is-light mr-1">to</span>'+a;break}a='<span class="tag is-danger is-light mr-1">remove </span><span class="tag is-primary mr-1">BACKGROUND</span>',a+='<span class="tag is-success is-light mr-1">from scene</span>',n[0].waitAfterInMs<=0&&(o="");break;case sE.BgMusicStop:a=n[0].settings.loop?'<span class="tag is-danger is-light mr-1">stop</span><span class="tag is-primary mr-1">BGM</span>':'<span class="tag is-danger is-light mr-1">stop</span><span class="tag is-primary mr-1">SOUND CLIP</span>',n[0].waitAfterInMs<=0&&(o="");break;case sE.BgMusicPlay:var u='<span class="tag is-primary is-light mr-1">'.concat(n[0].settings.loop?"play looping":"play one-time",'</span><span class="tag is-primary mr-1">').concat(n[0].settings.loop?"BGM":"SOUND CLIP","</span>");n[0].settings.value?this.isResourceVariable(n[0].settings.value)?a='<span class="tag is-info mr-1"><i class="fas fa-file-audio mr-1"></i> '.concat(n[0].settings.value,"</span>"):(r=i,a=this.getDangerHtml(n[0].settings.value)):(r=i,a=this.getNoAssetSpecifiedHtml()),n[0].waitAfterInMs<=0&&(o=""),a=u+a;break;case sE.ImageSnippetShow:n[0].settings.value?this.isResourceVariable(n[0].settings.value)?a=this.getAssetLinkHtml(n[0].settings.value):(r=i,a=this.getDangerHtml(n[0].settings.value)):(r=i,a=this.getNoAssetSpecifiedHtml()),n[0].waitAfterInMs<=0&&(o=""),a='<span class="tag is-primary is-light mr-1">show </span><span class="tag is-primary mr-1">POP-UP IMAGE</span>'+a;break;case sE.ImageSnippetHide:a='<span class="tag is-danger is-light mr-1">remove </span><span class="tag is-primary mr-1">POP-UP IMAGE</span>',a+='<span class="tag is-success is-light mr-1">from scene</span>',n[0].waitAfterInMs<=0&&(o="");break;case sE.NarratorSpeak:if(""===n[0].settings.dialogue){r=i,a=this.getDangerHtml(e,"Must use proper sentences.");break}if(n.length>1)for(var c=0;c<n.length;++c)""!==n[c].settings.dialogue&&(a+="<span>".concat(n[c].settings.dialogue,"</span>"));n[0].waitAfterInMs<=0&&(o=""),a='<span class="tag is-primary mr-1">NARRATION:</span>'+a;break;case sE.ClosedCaptionShow:if(""===n[0].settings.cc){r=i,a=this.getDangerHtml(e,"Must use proper sentences.");break}if(n.length>1)for(var l=0;l<n.length;++l)""!==n[l].settings.cc&&(a+="<span>[".concat(n[l].settings.cc,"]</span>"));n[0].waitAfterInMs<=0&&(o=""),a='<span class="tag is-primary mr-1">CAPTION:</span>'+a;break;case sE.TextEffectShow:if(""===n[0].settings.value.trim()||!n[0].settings.posIndex){r=i,a='<span class="tag is-danger is-dark">'.concat(e,"</span>");break}var h=new Map([["1","bottom-left"],["2","bottom-center"],["3","bottom-right"],["4","middle-left"],["5","middle-center"],["6","middle-right"],["7","top-left"],["8","top-center"],["9","top-right"]]);a='<span class="tag is-primary is-light mr-1">show </span><span class="tag is-primary mr-1">TEXT EFFECT</span>',a+='<span class="tag is-light mr-1"><strong>'.concat(n[0].settings.value.toUpperCase(),"</strong></span>"),n[0].settings.posIndex>=1&&n[0].settings.posIndex<=9?a+='<span class="tag is-primary is-light mr-1">in '.concat(h.get(n[0].settings.posIndex),"</span>"):(r=i,a+=this.getDangerHtml("to ".concat(n[0].settings.position),"Invalid position for text effect.")),n[0].waitAfterInMs<=0&&(o="");break;case sE.TextEffectHide:r=i,a=this.getDangerHtml(e,"This line will be ignored by the player."),n[0].waitAfterInMs<=0&&(o="");break;case sE.CharRemove:var f=n[0].settings.id.trim();if(""===f){r=i,a=this.getDangerHtml(f,"Invalid character ID");break}a='<span class="tag is-danger is-light mr-1">remove</span>',this.variablesData.has(f)&&this.isValidAvatar(this.variablesData.get(f))?a+=this.getCharLinkHtml(f):"[]"===f.trim()?a+='<span class="tag is-info is-light mr-1">ALL CHARACTERS</span>':(r=i,a+=this.getDangerHtml(f,"Invalid character ID")),a+='<span class="tag is-success is-light mr-1">from scene</span>',n[0].waitAfterInMs<=0&&(o="");break;case sE.CharAdd:var d=n[0].settings.id.trim();if(""===d){r=i,a=this.getDangerHtml(d,"Invalid character ID");break}var p=n[0].settings.anonLevel>2?"[hidden]":"";p+=2===n[0].settings.anonLevel||4===n[0].settings.anonLevel?"[unnamed]":"";var v="";this.variablesData.has(d)&&this.isValidAvatar(this.variablesData.get(d))?v=this.getCharLinkHtml(p+d):(r=i,v=this.getDangerHtml(d,"Invalid character ID"));var g="";1===n[0].settings.position||2===n[0].settings.position?g='<span class="tag is-primary is-light mr-1">'.concat(1===n[0].settings.position?"left":"right"," side</span>"):(r=i,g=this.getDangerHtml(d,"Invalid position"));var m="";if(n.length>1)for(var y=1;y<n.length;++y)m+="<span>".concat(n[y].settings.dialogue,"</span>");else m+='<span class="tag is-primary mr-1">added to scene</span>';n[n.length-1].waitAfterInMs<=0&&(o=""),a=v+g+m;break;default:return e}return"".concat(r," ").concat(a," ").concat(o)}},{key:"isResourceVariable",value:function(e){return this.variablesData.has(e)&&!this.isCharacterVariable(e)}},{key:"isCharacterVariable",value:function(e){return this.isValidAvatar(this.variablesData.get(e))}},{key:"breakdownRawScreenplay",value:function(){var e=this,t=this.rawScreenplay.split(/[\r\n]+/);this.variablesData.clear(),this.variables=[],this.scripts=[],t.forEach(function(t){if(0===t.indexOf("[")&&t.indexOf("]:")>1){e.variables.push(t);var n=e.storyEventService.getStoryEventCommand(t);n.length>0&&e.variablesData.set(n[0].settings.name,n[0].settings.value)}else t.trim()&&e.scripts.push(t)}),this.tryRemoveDialogueWhenCharacterIsNoLongerAvailable()}},{key:"tryRemoveDialogueWhenCharacterIsNoLongerAvailable",value:function(){""===this.currentSettings.name||this.variablesData.has(this.currentSettings.name)&&this.isValidAvatar(this.variablesData.get(this.currentSettings.name))||(this.currentSettings.name="")}},{key:"removeScript",value:function(e,t){this.scripts.splice(e,1),this.remap()}},{key:"removeVariable",value:function(e,t){this.variables.splice(e,1),this.remap()}},{key:"remap",value:function(){var e="";this.variables.forEach(function(t){e+="".concat(t,"\n")}),e&&(e+="\n"),this.scripts.forEach(function(t){e+="".concat(t,"\n\n")}),this.breakdownRawScreenplay(),this.dataUpdated.emit(e)}},{key:"showDialogueOptions",get:function(){return["narrator","closed caption","dialogue","title","scene"].includes(this.currentSettings.type)}},{key:"textPlaceholder",get:function(){switch(this.currentSettings.type){case"narrator":return"Narrator:";case"closed caption":return"Closed caption:";case"title":return"My Title (Episode 1 - Episode name)";case"scene":return"Scene Title:";case"dialogue":var e=this.currentSettings.isHidden?"[hidden]":"";return e+=this.currentSettings.isUnnamed?"[unnamed]":"",""===this.currentSettings.name?"":"".concat(e).concat(this.currentSettings.name," will appear on the ").concat(this.currentSettings.position," side. Type the dialogue here.");default:return""}}},{key:"selectCharacterToSpeak",value:function(e){this.currentSettings.name=e}},{key:"changeSelectedCollection",value:function(e){this.charManagerSettings.targetCollection=e.target.value,this.charManagerSettings.minTokenId="SJ"===this.charManagerSettings.targetCollection?0:1,this.charManagerSettings.maxTokenId="SJ"===this.charManagerSettings.targetCollection?9e3:1e4}},{key:"tokenIdPlaceHolder",get:function(){return"ID (".concat(this.charManagerSettings.minTokenId," - ").concat(this.charManagerSettings.maxTokenId,")")}},{key:"addCharacter",value:function(){var e="".concat(this.charManagerSettings.targetCollection.toLowerCase(),"#").concat(this.charManagerSettings.tokenId),t=this.charManagerSettings.name.trim();this.charManagerSettings.targetCharIndex>=0?this.variables.splice(this.charManagerSettings.targetCharIndex,1,"[".concat(t,"]: ").concat(e)):this.variables.push("[".concat(t,"]: ").concat(e)),this.resetAddCharFields(),this.remap()}},{key:"editCharacter",value:function(e){var t=this.variables[e];if(this.isValidCharacterVariableScript(t)){this.charManagerSettings.targetCharIndex=e;var n=this.storyEventService.getStoryEventCommand(t);this.charManagerSettings.name=n[0].settings.name,this.charManagerSettings.targetCharName=n[0].settings.name;var r=n[0].settings.value.split("#");this.charManagerSettings.targetCollection=r[0].toUpperCase(),this.charManagerSettings.tokenId=r[1]}}},{key:"resetAddCharFields",value:function(){this.charManagerSettings.targetCharIndex=-1,this.charManagerSettings.name="",this.charManagerSettings.tokenId="",this.charManagerSettings.targetCharName=""}},{key:"isValidCharacterName",value:function(){var e,t=this.charManagerSettings.targetCharIndex>=0&&this.charManagerSettings.targetCharName.toLowerCase()===this.charManagerSettings.name.toLowerCase();return e=this.isValidVariableName(this.charManagerSettings.name),""!==this.charManagerSettings.name&&(e||t)}},{key:"isValidCharacter",value:function(){var e="".concat(this.charManagerSettings.targetCollection.toLowerCase(),"#").concat(this.charManagerSettings.tokenId);return this.isValidAvatar(e)&&this.isValidCharacterName()}},{key:"getTargetAvatar",value:function(){var e="".concat(this.charManagerSettings.targetCollection.toLowerCase(),"#").concat(this.charManagerSettings.tokenId);return this.isValidCharacter()?this.storyboardService.getAvatar(e):"assets/images/silhouette-7.png"}},{key:"isValidCharacterVariableScript",value:function(e){var t=this.storyEventService.getStoryEventCommand(e);return!(t.length<1)&&this.isValidAvatar(t[0].settings.value)}},{key:"getVariableValue",value:function(e){var t=this.storyEventService.getStoryEventCommand(e);return 0===t.length?"#":this.isValidUrl(t[0].settings.value)?this.domSanitizer.bypassSecurityTrustResourceUrl(t[0].settings.value):"#"}},{key:"getVariableName",value:function(e){var t=this.storyEventService.getStoryEventCommand(e);return 0===t.length?"":t[0].settings.name.replace("img_","").replace("aud_","")}},{key:"isValidVariableName",value:function(e){if(""===e.trim())return!1;var t,n=!0,i=l(this.variablesData);try{for(i.s();!(t=i.n()).done;){var a=r(t.value,2),o=a[0];a[1];o.toLowerCase().trim()===e.toLowerCase().trim()&&(n=!1)}}catch(s){i.e(s)}finally{i.f()}return n}},{key:"getCharacterAvatarUrl",value:function(e){var t=this.storyEventService.getStoryEventCommand(e);return this.isValidCharacterVariableScript(e)?this.storyboardService.getAvatar(t[0].settings.value):""}},{key:"getCharacterAvatarName",value:function(e){var t=this.storyEventService.getStoryEventCommand(e);return this.isValidCharacterVariableScript(e)?t[0].settings.name:""}},{key:"submit",value:function(e){var t,n,r,i;if(""!==this.currentSettings.inputText.trim()){switch(this.currentSettings.type){case"narrator":this.scripts.push("> N: ".concat(this.currentSettings.inputText));break;case"closed caption":this.scripts.push("> CC: ".concat(this.currentSettings.inputText));break;case"title":this.scripts.push("# ".concat(this.currentSettings.inputText));break;case"scene":this.scripts.push("### ".concat(this.currentSettings.inputText));break;case"dialogue":var a="";return this.currentSettings.isUnnamed&&(a+="?"),this.currentSettings.isHidden&&(a+="??"),this.scripts.push("> ".concat("right"===this.currentSettings.position?"R":"L").concat(a,"|").concat(this.currentSettings.name,": ").concat(this.currentSettings.inputText.replace("\n",""))),this.tempDialogueSetting.type=this.currentSettings.type,this.tempDialogueSetting.line=this.currentSettings.inputText,this.tempDialogueSetting.name=this.currentSettings.name,this.tempDialogueSetting.isHidden=this.currentSettings.isHidden,this.tempDialogueSetting.isUnnamed=this.currentSettings.isUnnamed,this.tempDialogueSetting.position=this.currentSettings.position,"dialogue"===this.previousDialogueSetting.type&&(this.currentSettings.type=this.previousDialogueSetting.type,this.currentSettings.name=null!==(t=this.previousDialogueSetting.name)&&void 0!==t?t:"",this.currentSettings.isHidden=null!==(n=this.previousDialogueSetting.isHidden)&&void 0!==n&&n,this.currentSettings.isUnnamed=null!==(r=this.previousDialogueSetting.isUnnamed)&&void 0!==r&&r,this.currentSettings.position=null!==(i=this.previousDialogueSetting.position)&&void 0!==i?i:"right"),this.previousDialogueSetting.type="dialogue",this.previousDialogueSetting.line="",this.previousDialogueSetting.name=this.tempDialogueSetting.name,this.previousDialogueSetting.isHidden=this.tempDialogueSetting.isHidden,this.previousDialogueSetting.isUnnamed=this.tempDialogueSetting.isUnnamed,this.previousDialogueSetting.position=this.tempDialogueSetting.position,this.currentSettings.inputText="",this.currentSettings.type="dialogue",this.remap(),void e.preventDefault()}this.currentSettings.inputText="",this.currentSettings.type="none",this.remap()}else this.currentSettings.type="none"}},{key:"setWeather",value:function(e){this.scripts.push("> W|".concat(e)),this.currentSettings.type="none",this.remap()}},{key:"isCorrectFileToDisplay",value:function(e,t){var n=this.storyEventService.getStoryEventCommand(e);if(0===n.length)return!1;var r="";return"bg"===t||"imgpop"===t?r="img_":"bgm"!==t&&"soundclip"!==t||(r="aud_"),0===n[0].settings.name.toLowerCase().indexOf(r)&&this.isValidUrl(n[0].settings.value)}},{key:"addFileVariable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.scripts.push("[".concat(e="bg"===e||"imgpop"===e?"img_":"bgm"===e||"soundclip"===e?"aud_":"").concat(this.fileVariableSettings.name,"]: <").concat(this.fileVariableSettings.value,">")),this.fileVariableSettings.name="",this.fileVariableSettings.value="",this.remap()}},{key:"setFile",value:function(e,t){if("none"!==t){var n=this.storyEventService.getStoryEventCommand(e);n.length>0&&this.variablesData.has(n[0].settings.name)&&this.scripts.push("".concat("`"+t+"`:"," [").concat(n[0].settings.name,"]")),this.currentSettings.type="none",this.remap()}}},{key:"removeFromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";switch(e){case"bg":this.scripts.push("`bg`: []");break;case"imgpop":this.scripts.push("`imgpop`: []");break;case"bgm":this.scripts.push("`bgm`: []");break;case"soundclip":this.scripts.push("`soundclip`: []");break;case"weather":this.scripts.push("> W|none");break;case"dialogue":this.scripts.push("> X|".concat(t));break;default:return}this.remap()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(Fe),a.Y36(mS),a.Y36(TE))},e.\u0275cmp=a.Xpm({type:e,selectors:[["screenplay-editor-widget"]],inputs:{reset:"reset",rawScreenplay:"rawScreenplay"},outputs:{dataUpdated:"dataUpdated"},decls:258,vars:95,consts:[[1,"command-container"],[1,"mb-3","heading","title"],["id","variables","cdkDropList","","cdkDropListConnectedTo","variables",1,"events-list",3,"cdkDropListData","cdkDropListEnterPredicate","cdkDropListDropped"],["class","event-box is-flex is-flex-direction-row is-justify-content-space-between","cdkDrag","",3,"cdkDragData",4,"ngFor","ngForOf"],["id","scripts","cdkDropList","","cdkDropListConnectedTo","scripts",1,"events-list",3,"cdkDropListData","cdkDropListEnterPredicate","cdkDropListDropped"],[1,"event-tool","p-2"],[1,"mb-2"],[1,"field","has-addons","mb-0",2,"flex-wrap","wrap"],[1,"control"],["title","Add dialoge",1,"button","is-small",3,"click"],[1,"icon","is-small"],[1,"fas","fa-comment"],["title","Add narration",1,"button","is-small",3,"click"],[1,"fas","fa-align-justify"],["title","Add closed caption",1,"button","is-small",3,"click"],[1,"fas","fa-closed-captioning"],["title","Add title & subtitles",1,"button","is-small",3,"click"],[1,"fas","fa-tag"],["title","Add/Change background and images",1,"button","is-small",3,"click"],[1,"fas","fa-image"],["title","Add/Change audio and music",1,"button","is-small",3,"click"],[1,"fas","fa-file-audio"],["title","Add/Change weather effects",1,"button","is-small",3,"click"],[1,"fas","fa-cloud"],[1,"fas","fa-align-center"],["title","Remove elements from scene",1,"button","is-small",3,"click"],[1,"fas","fa-broom"],[1,"control","is-hidden"],["title","Add wait event",1,"button","is-small"],[1,"fas","fa-clock"],[1,"heading"],[1,"field","has-addons","mt-2",2,"flex-wrap","wrap"],["title","Remove background image from scene",1,"button",3,"click"],[1,"icon","is-small","has-text-danger"],[1,"fas","fa-ban"],["title","Remove pop-up image from scene",1,"button",3,"click"],["title","Stop background music",1,"button",3,"click"],["title","Stop sound effects",1,"button",3,"click"],["title","Remove weather effects",1,"button",3,"click"],[1,"field","has-addons",2,"flex-wrap","inherit"],[1,"button",3,"click"],["width","50px","src","assets/images/silhouette-7.png",1,"circle-radius"],["class","control",3,"is-hidden",4,"ngFor","ngForOf"],[1,"field","has-addons","mt-2"],["title","Add a new character for your story",1,"button",3,"click"],[1,"fas","fa-cloud-rain"],[1,"fas","fa-snowflake"],[1,"mb-5","mt-4","ml-3","mr-3","is-flex","is-flex-direction-row",2,"flex-wrap","wrap"],[1,"heading",2,"width","100%"],[1,"field","has-addons","mb-4"],[1,"fas","fa-images"],[1,"is-flex","mb-4",2,"width","100%"],[1,"control","has-icons-right"],["type","email","placeholder","Name",1,"input","is-small",3,"ngModel","ngModelChange"],[1,"icon","is-small","is-right","has-text-info"],[1,"fas","fa-check"],[1,"is-flex-grow-4","control","has-icons-left","has-icons-right"],["type","email","placeholder","Input the file URL here.",1,"input","is-small",3,"ngModel","ngModelChange"],[1,"icon","is-small","is-left"],[1,"fas","fa-link"],[1,"button","is-success",3,"disabled","click"],[1,"notification","is-info","is-light",2,"font-size","13px","width","100%"],[1,"columns","is-tablet","is-multiline","is-centered",2,"width","100%"],["class","column is-2 is-one-fifth-tablet",3,"is-hidden",4,"ngFor","ngForOf"],[1,"mt-2","is-flex","is-flex-direction-row",2,"flex-wrap","wrap"],[1,"fas","fa-user-plus"],[3,"click"],[1,"is-flex","is-flex-direction-row"],[1,"field","has-addons","mb-0"],["title","Set character position to the left of the screen",1,"button","is-small",3,"click"],[1,"fas","fa-align-left"],["title","Set character position to the right of the screen",1,"button","is-small",3,"click"],[1,"fas","fa-align-right"],["title","Hide character face",1,"button","is-small","is-responsive",2,"width","100%",3,"click"],[1,"fas","fa-user"],["title","Hide character name",1,"button","is-small",2,"width","100%",3,"click"],[1,"fas","fa-question-circle"],[1,"control","is-flex-grow-1"],[1,"textarea","is-small",2,"min-height","90px","border","3px solid #3f8ed0",3,"placeholder","ngModel","keydown.enter","ngModelChange"],[1,"modal"],[1,"modal-background",3,"click"],[1,"modal-card"],[1,"modal-card-head"],[1,"modal-card-title"],["aria-label","close",1,"delete",3,"click"],[1,"modal-card-body"],[1,"columns","is-tablet","is-multiline","is-centered"],[1,"column","is-2","is-one-fifth-tablet"],[1,"card"],[1,"card-image"],[1,"image","is-2by2"],["alt","Add Character Avatar",1,"circle-radius","selected",3,"src"],[1,"heading",2,"text-align","center"],[1,"modal-card-foot"],[1,"is-flex","is-flex-direction-row","m-1"],[1,"select","is-normal"],[3,"change"],[3,"selected"],[1,"is-flex-grow-2","control","has-icons-right"],["type","text",1,"input","is-normal",3,"placeholder","ngModel","ngModelChange"],[1,"icon","is-normal","is-right","has-text-info"],["type","text","placeholder","Unique name",1,"input","is-normal",3,"ngModel","ngModelChange"],[1,"button","is-small","is-normal","is-responsive",3,"disabled","click"],["cdkDrag","",1,"event-box","is-flex","is-flex-direction-row","is-justify-content-space-between",3,"cdkDragData"],[3,"innerHtml"],["title","Remove this line from script",1,"icon","is-small","is-danger",3,"is-hidden","click"],[1,"fas","fa-trash"],["width","50px",1,"circle-radius",3,"src"],[1,"card",3,"click"],[1,"image","is-5by3"],["alt","Resource",2,"max-height","70px","min-height","70px",3,"src"],[1,"audio-icon","fas","fa-file-audio"],["alt","Avatar",1,"circle-radius",3,"src"]],template:function(e,t){1&e&&(a.TgZ(0,"div"),a.TgZ(1,"div",0),a.TgZ(2,"h2",1),a._uU(3,"Assets"),a.qZA(),a.TgZ(4,"div",2),a.NdJ("cdkDropListDropped",function(e){return t.drop(e)}),a.YNc(5,IE,4,2,"div",3),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",0),a.TgZ(7,"h2",1),a._uU(8,"Events"),a.qZA(),a.TgZ(9,"div",4),a.NdJ("cdkDropListDropped",function(e){return t.drop(e)}),a.YNc(10,EE,4,2,"div",3),a.TgZ(11,"div",5),a.TgZ(12,"div",6),a.TgZ(13,"div",7),a.TgZ(14,"p",8),a.TgZ(15,"button",9),a.NdJ("click",function(){return t.currentSettings.type="dialogue"})("click",function(){return t.showDiagOptions=!0}),a.TgZ(16,"span",10),a._UZ(17,"i",11),a.qZA(),a.TgZ(18,"span"),a._uU(19,"Talk"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(20,"p",8),a.TgZ(21,"button",12),a.NdJ("click",function(){return t.currentSettings.type="narrator"}),a.TgZ(22,"span",10),a._UZ(23,"i",13),a.qZA(),a.TgZ(24,"span"),a._uU(25,"Narrate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(26,"p",8),a.TgZ(27,"button",14),a.NdJ("click",function(){return t.currentSettings.type="closed caption"}),a.TgZ(28,"span",10),a._UZ(29,"i",15),a.qZA(),a.TgZ(30,"span"),a._uU(31,"Caption"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(32,"p",8),a.TgZ(33,"button",16),a.NdJ("click",function(){return t.currentSettings.type="scene"}),a.TgZ(34,"span",10),a._UZ(35,"i",17),a.qZA(),a.TgZ(36,"span"),a._uU(37,"Scene"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(38,"p",8),a.TgZ(39,"button",18),a.NdJ("click",function(){return t.currentSettings.type="bg"}),a.TgZ(40,"span",10),a._UZ(41,"i",19),a.qZA(),a.TgZ(42,"span"),a._uU(43,"Images"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(44,"p",8),a.TgZ(45,"button",20),a.NdJ("click",function(){return t.currentSettings.type="bgm"}),a.TgZ(46,"span",10),a._UZ(47,"i",21),a.qZA(),a.TgZ(48,"span"),a._uU(49,"Audio"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(50,"p",8),a.TgZ(51,"button",22),a.NdJ("click",function(){return t.currentSettings.type="weather"}),a.TgZ(52,"span",10),a._UZ(53,"i",23),a.qZA(),a.TgZ(54,"span"),a._uU(55,"Weather"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(56,"p",8),a.TgZ(57,"button",16),a.NdJ("click",function(){return t.currentSettings.type="title"}),a.TgZ(58,"span",10),a._UZ(59,"i",24),a.qZA(),a.TgZ(60,"span"),a._uU(61,"Title"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(62,"p",8),a.TgZ(63,"button",25),a.NdJ("click",function(){return t.currentSettings.type="remove"}),a.TgZ(64,"span",10),a._UZ(65,"i",26),a.qZA(),a.qZA(),a.qZA(),a.TgZ(66,"p",27),a.TgZ(67,"button",28),a._UZ(68,"i",29),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(69,"div"),a.TgZ(70,"p",30),a._uU(71,"Select object to remove from current scene."),a.qZA(),a.TgZ(72,"div",31),a.TgZ(73,"p",8),a.TgZ(74,"button",32),a.NdJ("click",function(){return t.removeFromScene("bg")}),a.TgZ(75,"span",33),a._UZ(76,"i",34),a.qZA(),a.TgZ(77,"span"),a._uU(78,"Background"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(79,"p",8),a.TgZ(80,"button",35),a.NdJ("click",function(){return t.removeFromScene("imgpop")}),a.TgZ(81,"span",33),a._UZ(82,"i",34),a.qZA(),a.TgZ(83,"span"),a._uU(84,"Pop-up Image"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(85,"p",8),a.TgZ(86,"button",36),a.NdJ("click",function(){return t.removeFromScene("bgm")}),a.TgZ(87,"span",33),a._UZ(88,"i",34),a.qZA(),a.TgZ(89,"span"),a._uU(90,"Music"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(91,"p",8),a.TgZ(92,"button",37),a.NdJ("click",function(){return t.removeFromScene("soundclip")}),a.TgZ(93,"span",33),a._UZ(94,"i",34),a.qZA(),a.TgZ(95,"span"),a._uU(96,"Sound Effects"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(97,"p",8),a.TgZ(98,"button",38),a.NdJ("click",function(){return t.removeFromScene("weather")}),a.TgZ(99,"span",33),a._UZ(100,"i",34),a.qZA(),a.TgZ(101,"span"),a._uU(102,"Weather"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(103,"p",30),a._uU(104,"Select a character to remove from current scene."),a.qZA(),a.TgZ(105,"div",39),a.TgZ(106,"p",8),a.TgZ(107,"button",40),a.NdJ("click",function(){return t.removeFromScene("dialogue","[]")}),a.TgZ(108,"span",10),a._UZ(109,"img",41),a.qZA(),a.TgZ(110,"span"),a._uU(111,"[ALL]"),a.qZA(),a.qZA(),a.qZA(),a.YNc(112,CE,6,4,"p",42),a.qZA(),a.qZA(),a.TgZ(113,"div",43),a.TgZ(114,"p",8),a.TgZ(115,"button",44),a.NdJ("click",function(){return t.setWeather("rain")}),a.TgZ(116,"span",10),a._UZ(117,"i",45),a.qZA(),a.TgZ(118,"span"),a._uU(119,"Rain"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(120,"p",8),a.TgZ(121,"button",44),a.NdJ("click",function(){return t.setWeather("snow")}),a.TgZ(122,"span",10),a._UZ(123,"i",46),a.qZA(),a.TgZ(124,"span"),a._uU(125,"Snow"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(126,"p",8),a.TgZ(127,"button",44),a.NdJ("click",function(){return t.setWeather("none")}),a.TgZ(128,"span",33),a._UZ(129,"i",34),a.qZA(),a.TgZ(130,"span"),a._uU(131,"Stop Weather"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(132,"div",47),a.TgZ(133,"p",48),a._uU(134,"ADD AS"),a.qZA(),a.TgZ(135,"div",49),a.TgZ(136,"p",8),a.TgZ(137,"button",40),a.NdJ("click",function(){return t.currentSettings.type="bg"}),a.TgZ(138,"span",10),a._UZ(139,"i",19),a.qZA(),a.TgZ(140,"span"),a._uU(141,"Background"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(142,"p",8),a.TgZ(143,"button",40),a.NdJ("click",function(){return t.currentSettings.type="imgpop"}),a.TgZ(144,"span",10),a._UZ(145,"i",50),a.qZA(),a.TgZ(146,"span"),a._uU(147,"Pop-up Image"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(148,"div",49),a.TgZ(149,"p",8),a.TgZ(150,"button",40),a.NdJ("click",function(){return t.currentSettings.type="bgm"}),a.TgZ(151,"span",10),a._UZ(152,"i",19),a.qZA(),a.TgZ(153,"span"),a._uU(154,"Background Music"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(155,"p",8),a.TgZ(156,"button",40),a.NdJ("click",function(){return t.currentSettings.type="soundclip"}),a.TgZ(157,"span",10),a._UZ(158,"i",50),a.qZA(),a.TgZ(159,"span"),a._uU(160,"Sound Effects"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(161,"div",51),a.TgZ(162,"div",52),a.TgZ(163,"input",53),a.NdJ("ngModelChange",function(e){return t.fileVariableSettings.name=e}),a.qZA(),a.TgZ(164,"span",54),a._UZ(165,"i",55),a.qZA(),a.qZA(),a.TgZ(166,"div",56),a.TgZ(167,"input",57),a.NdJ("ngModelChange",function(e){return t.fileVariableSettings.value=e}),a.qZA(),a.TgZ(168,"span",58),a._UZ(169,"i",59),a.qZA(),a.TgZ(170,"span",54),a._UZ(171,"i",55),a.qZA(),a.qZA(),a.TgZ(172,"button",60),a.NdJ("click",function(){return t.addFileVariable(t.currentSettings.type)}),a._uU(173,"Create"),a.qZA(),a.qZA(),a.TgZ(174,"div",61),a._uU(175," Choose a file below. Please create one if you don't have one yet. "),a.qZA(),a.TgZ(176,"div",62),a.YNc(177,AE,8,10,"div",63),a.qZA(),a.qZA(),a.TgZ(178,"div"),a.TgZ(179,"div",64),a.TgZ(180,"div",39),a.TgZ(181,"p",8),a.TgZ(182,"button",40),a.NdJ("click",function(){return t.charManagerSettings.visible=!0}),a.TgZ(183,"span",10),a._UZ(184,"i",65),a.qZA(),a.qZA(),a.qZA(),a.YNc(185,RE,6,6,"p",42),a.qZA(),a.TgZ(186,"div",61),a._uU(187," Choose a character or "),a.TgZ(188,"a",66),a.NdJ("click",function(){return t.charManagerSettings.visible=!0}),a._uU(189,"create"),a.qZA(),a._uU(190," a new one. "),a.qZA(),a.qZA(),a.TgZ(191,"div",67),a.TgZ(192,"div"),a.TgZ(193,"div",68),a.TgZ(194,"p",8),a.TgZ(195,"button",69),a.NdJ("click",function(){return t.currentSettings.position="left"}),a.TgZ(196,"span",10),a._UZ(197,"i",70),a.qZA(),a.TgZ(198,"span"),a._uU(199,"Left"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(200,"p",8),a.TgZ(201,"button",71),a.NdJ("click",function(){return t.currentSettings.position="right"}),a.TgZ(202,"span",10),a._UZ(203,"i",72),a.qZA(),a.TgZ(204,"span"),a._uU(205,"Right"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(206,"p",8),a.TgZ(207,"button",73),a.NdJ("click",function(){return t.currentSettings.isHidden=!t.currentSettings.isHidden}),a.TgZ(208,"span",10),a._UZ(209,"i",74),a.qZA(),a.TgZ(210,"span"),a._uU(211,"Hide Face"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(212,"p",8),a.TgZ(213,"button",75),a.NdJ("click",function(){return t.currentSettings.isUnnamed=!t.currentSettings.isUnnamed}),a.TgZ(214,"span",10),a._UZ(215,"i",76),a.qZA(),a.TgZ(216,"span"),a._uU(217,"Hide Name"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(218,"div",77),a.TgZ(219,"textarea",78),a.NdJ("keydown.enter",function(e){return t.submit(e)})("ngModelChange",function(e){return t.currentSettings.inputText=e}),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(220,"div",79),a.TgZ(221,"div",80),a.NdJ("click",function(){return t.charManagerSettings.visible=!1}),a.qZA(),a.TgZ(222,"div",81),a.TgZ(223,"header",82),a.TgZ(224,"p",83),a._uU(225,"Characters"),a.qZA(),a.TgZ(226,"button",84),a.NdJ("click",function(){return t.charManagerSettings.visible=!1}),a.qZA(),a.qZA(),a.TgZ(227,"section",85),a.TgZ(228,"div",86),a.YNc(229,DE,7,6,"div",63),a.TgZ(230,"div",87),a.TgZ(231,"div",88),a.TgZ(232,"div",89),a.TgZ(233,"figure",90),a._UZ(234,"img",91),a.qZA(),a.qZA(),a.TgZ(235,"p",92),a._uU(236),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(237,"footer",93),a.TgZ(238,"div",94),a.TgZ(239,"div",95),a.TgZ(240,"select",96),a.NdJ("change",function(e){return t.changeSelectedCollection(e)}),a.TgZ(241,"option",97),a._uU(242,"SJ"),a.qZA(),a.TgZ(243,"option",97),a._uU(244,"OCM"),a.qZA(),a.TgZ(245,"option",97),a._uU(246,"DUSK"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(247,"div",98),a.TgZ(248,"input",99),a.NdJ("ngModelChange",function(e){return t.charManagerSettings.tokenId=e}),a.qZA(),a.TgZ(249,"span",100),a._UZ(250,"i",55),a.qZA(),a.qZA(),a.TgZ(251,"div",98),a.TgZ(252,"input",101),a.NdJ("ngModelChange",function(e){return t.charManagerSettings.name=e}),a.qZA(),a.TgZ(253,"span",100),a._UZ(254,"i",55),a.qZA(),a.qZA(),a.TgZ(255,"button",102),a.NdJ("click",function(){return t.addCharacter()}),a.TgZ(256,"span"),a._uU(257),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(1),a.ekj("is-hidden",t.variables.length<1),a.xp6(3),a.Q6J("cdkDropListData",t.variables)("cdkDropListEnterPredicate",t.noReturnPredicate),a.xp6(1),a.Q6J("ngForOf",t.variables),a.xp6(4),a.Q6J("cdkDropListData",t.scripts)("cdkDropListEnterPredicate",t.noReturnPredicate),a.xp6(1),a.Q6J("ngForOf",t.scripts),a.xp6(5),a.ekj("is-dark","dialogue"===t.currentSettings.type),a.xp6(6),a.ekj("is-dark","narrator"===t.currentSettings.type),a.xp6(6),a.ekj("is-dark","closed caption"===t.currentSettings.type),a.xp6(6),a.ekj("is-dark","scene"===t.currentSettings.type),a.xp6(6),a.ekj("is-dark","bg"===t.currentSettings.type||"imgpop"===t.currentSettings.type),a.xp6(6),a.ekj("is-dark","bgm"===t.currentSettings.type||"soundclip"===t.currentSettings.type),a.xp6(6),a.ekj("is-dark","weather"===t.currentSettings.type),a.xp6(6),a.ekj("is-dark","title"===t.currentSettings.type),a.xp6(6),a.ekj("is-dark","remove"===t.currentSettings.type),a.xp6(6),a.ekj("is-hidden","remove"!==t.currentSettings.type),a.xp6(43),a.Q6J("ngForOf",t.variables),a.xp6(1),a.ekj("is-hidden","weather"!==t.currentSettings.type),a.xp6(19),a.ekj("is-hidden","bg"!==t.currentSettings.type&&"imgpop"!==t.currentSettings.type&&"bgm"!==t.currentSettings.type&&"soundclip"!==t.currentSettings.type),a.xp6(3),a.ekj("is-hidden","bg"!==t.currentSettings.type&&"imgpop"!==t.currentSettings.type),a.xp6(2),a.ekj("is-info","bg"===t.currentSettings.type),a.xp6(6),a.ekj("is-info","imgpop"===t.currentSettings.type),a.xp6(5),a.ekj("is-hidden","bgm"!==t.currentSettings.type&&"soundclip"!==t.currentSettings.type),a.xp6(2),a.ekj("is-info","bgm"===t.currentSettings.type),a.xp6(6),a.ekj("is-info","soundclip"===t.currentSettings.type),a.xp6(7),a.Q6J("ngModel",t.fileVariableSettings.name),a.xp6(1),a.ekj("is-hidden",!t.isValidVariableName(t.fileVariableSettings.name)),a.xp6(3),a.Q6J("ngModel",t.fileVariableSettings.value),a.xp6(3),a.ekj("is-hidden",!t.isValidUrl(t.fileVariableSettings.value)),a.xp6(2),a.Q6J("disabled",!t.isValidUrl(t.fileVariableSettings.value)||!t.isValidVariableName(t.fileVariableSettings.name)),a.xp6(4),a.ekj("is-hidden","bg"!==t.currentSettings.type&&"imgpop"!==t.currentSettings.type&&"bgm"!==t.currentSettings.type&&"soundclip"!==t.currentSettings.type),a.xp6(1),a.Q6J("ngForOf",t.variables),a.xp6(1),a.ekj("is-hidden",!t.showDialogueOptions),a.xp6(1),a.ekj("is-hidden","dialogue"!==t.currentSettings.type),a.xp6(6),a.Q6J("ngForOf",t.variables),a.xp6(1),a.ekj("is-hidden",""!==t.currentSettings.name),a.xp6(6),a.ekj("is-hidden","dialogue"!==t.currentSettings.type||""===t.currentSettings.name),a.xp6(3),a.ekj("is-info","left"===t.currentSettings.position),a.xp6(6),a.ekj("is-info","right"===t.currentSettings.position),a.xp6(6),a.ekj("is-info",t.currentSettings.isHidden),a.xp6(6),a.ekj("is-info",t.currentSettings.isUnnamed),a.xp6(5),a.ekj("is-hidden","dialogue"===t.currentSettings.type&&""===t.currentSettings.name),a.xp6(1),a.Q6J("placeholder",t.textPlaceholder)("ngModel",t.currentSettings.inputText),a.xp6(1),a.ekj("is-active",t.charManagerSettings.visible),a.xp6(9),a.Q6J("ngForOf",t.variables),a.xp6(1),a.ekj("is-hidden",!t.isValidCharacter()||t.charManagerSettings.targetCharIndex>=0),a.xp6(4),a.Q6J("src",t.getTargetAvatar(),a.LSH),a.xp6(2),a.hij(" ",t.charManagerSettings.targetCharName," "),a.xp6(5),a.Q6J("selected","SJ"===t.charManagerSettings.targetCollection),a.xp6(2),a.Q6J("selected","OCM"===t.charManagerSettings.targetCollection),a.xp6(2),a.Q6J("selected","DUSK"===t.charManagerSettings.targetCollection),a.xp6(3),a.Q6J("placeholder",t.tokenIdPlaceHolder)("ngModel",t.charManagerSettings.tokenId),a.xp6(1),a.ekj("is-hidden",!t.isValidAvatar(t.charManagerSettings.targetCollection+"#"+t.charManagerSettings.tokenId)),a.xp6(3),a.Q6J("ngModel",t.charManagerSettings.name),a.xp6(1),a.ekj("is-hidden",!t.isValidCharacterName()),a.xp6(2),a.Q6J("disabled",!t.isValidCharacter()),a.xp6(2),a.Oqu(t.charManagerSettings.targetCharIndex<0?"Add":"Update"))},directives:[tE,W,QS,hT,IT,DT,LT,aE],styles:[".command-container[_ngcontent-%COMP%]{font-family:Inconsolata;letter-spacing:1px;width:100%;max-width:100%;margin:0 25px 25px 0;display:inline-block;vertical-align:top}.card[_ngcontent-%COMP%]{box-shadow:none}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:3px solid transparent;padding:5px}.card[_ngcontent-%COMP%]   img.selected[_ngcontent-%COMP%]{border:3px solid #06f}.card[_ngcontent-%COMP%]   .audio-icon[_ngcontent-%COMP%]{margin-top:10px;padding:3px;border:2px solid transparent}.card[_ngcontent-%COMP%]   .audio-icon[_ngcontent-%COMP%]:hover{border:6f solid}.card[_ngcontent-%COMP%]:hover{cursor:pointer}.card[_ngcontent-%COMP%]:hover   .audio-icon[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{border:3px solid #06f}.event-tool[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:Inconsolata;font-size:12px;letter-spacing:1px}.events-list[_ngcontent-%COMP%]{border:1px solid #ccc;min-height:30px;background:#fff;overflow:hidden;display:block}.events-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .event-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.event-box[_ngcontent-%COMP%]{padding:8px;border-bottom:1px solid #ccc;color:rgba(0,0,0,.87);display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;box-sizing:border-box;background:#fff;font-size:12px}.event-box[_ngcontent-%COMP%]   .event-tool[_ngcontent-%COMP%]{font-family:Inconsolata;width:100%;margin-top:10px;padding-top:10px;padding-bottom:5px;border-top:1px dashed gray;display:none}.event-box[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:none;cursor:pointer}.event-box[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{color:gray;display:block}.event-box[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]:hover{color:red}.event-box.highlighted[_ngcontent-%COMP%]{-webkit-animation:highlighter 3s 1;animation:highlighter 3s 1}.event-box[_ngcontent-%COMP%]:last-child{border:none}.drag-handle[_ngcontent-%COMP%]{cursor:move}.cdk-drag-preview[_ngcontent-%COMP%]{font-family:Inconsolata;letter-spacing:1px;background-color:#ccc;box-sizing:border-box;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}@-webkit-keyframes highlighter{0%{background-color:#ff0}to{background-color:#fff}}@keyframes highlighter{0%{background-color:#ff0}to{background-color:#fff}}"]}),e}(),OE=["contentTextArea"];function NE(e,t){if(1&e&&(a.TgZ(0,"span",70),a._uU(1),a.qZA()),2&e){var n=t.$implicit;a.xp6(1),a.Oqu(n)}}function LE(e,t){if(1&e&&(a.TgZ(0,"a",72),a._UZ(1,"img",73),a.qZA()),2&e){var n=a.oxw().$implicit,r=a.oxw();a.Q6J("href",r.getAvatarLink(n),a.LSH),a.xp6(1),a.Q6J("src",r.getAvatar(n),a.LSH)}}function ME(e,t){if(1&e&&(a.ynx(0),a.YNc(1,LE,2,2,"a",71),a.BQk()),2&e){var n=t.index;a.xp6(1),a.Q6J("ngIf",n<3)}}function ZE(e,t){1&e&&a._UZ(0,"a",75)}function UE(e,t){1&e&&a._UZ(0,"a",75)}function FE(e,t){if(1&e&&(a.ynx(0),a.YNc(1,ZE,1,0,"a",74),a.YNc(2,UE,1,0,"a",74),a.BQk()),2&e){var n=a.oxw();a.xp6(1),a.Q6J("ngIf",n.story.casts.length<3),a.xp6(1),a.Q6J("ngIf",n.story.casts.length<2)}}function qE(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"button",76),a.NdJ("click",function(){return a.CHM(n),a.oxw().showPublishModal=!0}),a._uU(1," Send for Review "),a.qZA()}}function VE(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"button",76),a.NdJ("click",function(){return a.CHM(n),a.oxw().publish()}),a._uU(1," Publish "),a.qZA()}}function jE(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"button",77),a.NdJ("click",function(){return a.CHM(n),a.oxw().delete()}),a._uU(1,"Delete"),a.qZA()}}function BE(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"button",41),a.NdJ("click",function(){return a.CHM(n),a.oxw().export()}),a._uU(1,"Export"),a.qZA()}}var HE=function(e){return["/storyboard",e]},zE=function(){var e=function(){function e(t,n,r){var i=this;v(this,e),this.clipboard=t,this.storyboardService=n,this.accountService=r,this.playStory=new a.vpe,this.mailBody="",this.isProcessing=!1,this.showNotification=!1,this.notificationType="is-info",this.notificationMessage="",this.fsEditor=!1,this.resetFsEditor=!1,this.user=new yS,this.showPublishModal=!1,this._story=new FS,this._storyUnsaved="",this.accountService.user$.subscribe(function(e){i.user=e}),this._story.content="[img_cover]: <https://wallpapercave.com/wp/wp1809288.jpg>\n",this._story.content+="`bg`: [img_cover]\n\n",this._story.content+="# My First Junkyard Story (Episode 1)\n\n",this._story.title="",this._story.author=""}return p(e,[{key:"story",get:function(){return this._story},set:function(e){null!==e&&(this._story=new FS,this._story.id=e.id,this._story.authorId=e.authorId,this._story.author=e.author,this._story.title=e.title,this._story.subtitle=e.subtitle,this._story.seriesId=e.seriesId,this._story.seriesName=e.seriesName,this._story.cover=e.cover,this._story.casts=e.casts,this._story.tags=e.tags,this._story.content=e.content,this._story.state=e.state,this._story.likes=e.likes,this._story.views=e.views,this._story.modifiedOn=e.modifiedOn,this._story.createdOn=e.createdOn,this.backupStory(this._story))}},{key:"editable",get:function(){return"draft"===this.story.state||("reviewing"===this.story.state||"published"===this.story.state)&&this.user.role>2}},{key:"deletable",get:function(){return"draft"===this.story.state&&""!==this.story.id||("reviewing"===this.story.state||"published"===this.story.state)&&this.user.role>2}},{key:"reviewable",get:function(){return!this.isDirty()&&"draft"===this.story.state&&this.user.role>1}},{key:"publishable",get:function(){return!this.isDirty()&&"reviewing"===this.story.state&&this.user.role>2}},{key:"save",value:function(){if(""===this.story.title){var e=prompt("Please enter a title","A Junkyard Story");if(!e)return;this.story.title=e}this.storyboardService.saveStory(this.story,this.user),this.notify("".concat(this.story.title," successfully saved"),"is-success"),this.backupStory(this.story)}},{key:"notify",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"is-info";this.notificationMessage=e,this.notificationType=n,this.showNotification=!0,setTimeout(function(){t.showNotification=!1},3e3)}},{key:"publish",value:function(){this.user.role<3||!this.publishable||window.confirm("Are you sure you want to publish this story?")&&(this.storyboardService.publishStory(this.story.id),this.notify("".concat(this.story.title," is now published."),"is-success"))}},{key:"submitForReview",value:function(){var e=this;this.isProcessing=!0;var t=JSON.parse(JSON.stringify(this.story));t.content="",t.authorId=this.accountService.activeAccount,t.state="reviewing",t.id=qS.i.create().toString(),this.storyboardService.submitForReview(t,this.story.content).then(function(){e.notify("".concat(e.story.title," successfully submitted for review and publishing."),"is-success"),e.isProcessing=!1,e.storyboardService.getStoriesFromStorage()}).catch(function(t){console.log("Error",t),e.notify("An error occured while trying to submit ".concat(e.story.title," for reivew. Please try again."),"is-danger"),e.isProcessing=!1})}},{key:"play",value:function(){}},{key:"cancel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!e&&this.isDirty()&&window.confirm("You have unsaved changes. Discard changes and start a new story?")&&window.location.reload(),window.location.reload()}},{key:"delete",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=window.confirm("Do you really want to delete this story?"),!t.t0){t.next=14;break}if(e.isProcessing=!0,!e.story.id.includes(":")){t.next=7;break}e.storyboardService.deleteStoryDraft(e.story),t.next=11;break;case 7:if(t.t1=e.user.role>2,!t.t1){t.next=11;break}return t.next=11,e.storyboardService.deleteStoryFromStorage(e.story);case 11:e.isProcessing=!1,e.story=new FS,e.cancel(!0);case 14:case"end":return t.stop()}},t)}))()}},{key:"getCasts",value:function(){return this.story.casts.join(" ")}},{key:"onUpdateCasts",value:function(e){this.story.casts=e.target.value.split(" ")}},{key:"getTags",value:function(){return this.story.tags.join(" ")}},{key:"onUpdateTags",value:function(e){this.story.tags=e.target.value.split(" ")}},{key:"export",value:function(){var e=JSON.parse(JSON.stringify(this.story));this.clipboard.copy(JSON.stringify(e)),this.notify("".concat(this.story.title," successfully exported to clipboard"),"is-info")}},{key:"import",value:function(){var e,t=null!==(e=prompt("Enter data",""))&&void 0!==e?e:"";if(""!==t)try{var n=JSON.parse(t);this.story.id="",this.story.title=n.title,this.story.subtitle=n.subtitle,this.story.authorId=n.authorId,this.story.author=n.author,this.story.seriesId=n.seriesId,this.story.seriesName=n.seriesName,this.story.cover=n.cover,this.story.casts=n.casts,this.story.tags=n.tags,this.story.content=n.content,this.story.likes=0,this.story.views=0,this.story.state="draft",this.notify("".concat(this.story.title," successfully imported."),"is-success")}catch(r){this.notify("Importing failed. Please ensure data format is correct.","is-danger")}}},{key:"exportable",value:function(){return""!==this.story.id&&this.story.casts!==[]&&this.story.tags!==[]&&""!==this.story.cover}},{key:"isDirty",value:function(){return JSON.stringify(this.story)!==this._storyUnsaved}},{key:"isValid",value:function(){return""!==this.story.title&&""!==this.story.author&&""!==this.story.content}},{key:"getAvatar",value:function(e){return e?this.storyboardService.getAvatar(e):""}},{key:"getAvatarLink",value:function(e){return e?this.storyboardService.getAvatarLink(e):""}},{key:"backupStory",value:function(e){this._storyUnsaved=JSON.stringify(e)}},{key:"openFullEditor",value:function(){this.fsEditor=!0,this.resetFsEditor=!this.resetFsEditor,document.getElementsByClassName("html")[0].classList.add("no-scroll")}},{key:"closeFullEditor",value:function(){this.fsEditor=!1,document.getElementsByClassName("html")[0].classList.remove("no-scroll")}},{key:"dataUpdated",value:function(e){this.story.content=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(jS),a.Y36(mS),a.Y36(kS))},e.\u0275cmp=a.Xpm({type:e,selectors:[["story-editor-widget"]],viewQuery:function(e,t){var n;(1&e&&a.Gf(OE,5),2&e)&&(a.iGM(n=a.CRH())&&(t.contentTextArea=n.first))},inputs:{story:"story"},outputs:{playStory:"playStory"},decls:131,vars:76,consts:[[1,"modal"],[1,"modal-background",3,"click"],[1,"modal-card",2,"max-width","25vw","min-width","350px"],[1,"modal-card-head"],[1,"modal-card-title"],["aria-label","close",1,"delete",3,"click"],[1,"modal-card-body"],[1,"card"],["target","_blank",3,"routerLink"],[1,"card-image"],[1,"image","is-3by2"],[3,"src"],[1,"card-content"],[1,"media"],[1,"media-content"],[1,"title","is-6","mb-1",3,"title"],[1,"heading",3,"title"],[1,"subtitle","is-6"],[1,"tag","is-info","is-normal"],[1,""],[1,"tags","are-medium"],["class","tag is-normal",4,"ngFor","ngForOf"],[1,"card-footer"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"message","is-warning",2,"font-family","BlinkMacSystemFont, Roboto","font-size","11px","letter-spacing","1px"],[1,"message-body"],[1,"modal-card-foot"],["type","submit",1,"button","is-success",3,"disabled","click"],[1,"modal-background"],[1,"modal-content"],[1,"notification","is-info","is-dark"],["max","100",1,"progress","is-success","mt-3"],[1,"field","is-grouped","main-controls","is-flex",2,"font-family","Bangers"],[1,"control"],["target","_blank",1,"button","is-small","is-success","pl-4",3,"routerLink"],["type","submit","class","button is-info is-small ml-3",3,"click",4,"ngIf"],["type","submit",1,"button","is-info","is-small","ml-3",3,"disabled","click"],[1,"control",2,"margin-left","auto"],["type","submit","class","button  is-small is-danger",3,"click",4,"ngIf"],["class","button is-link is-small is-light",3,"click",4,"ngIf"],[1,"button","is-link","is-small","is-light",3,"click"],[1,"box"],[1,"field-body"],[1,"field"],[1,"label"],["required","","type","text","placeholder","An awesome title for your story or series",1,"input",3,"ngModel","ngModelChange"],["required","","type","text","placeholder","Your writer name",1,"input",3,"ngModel","ngModelChange"],[1,"field-body","mt-2"],["required","","type","text","placeholder","A subtitle or an episode title",1,"input",3,"ngModel","ngModelChange"],["required","","type","text","placeholder","Image must be 3 x 2 in in size",1,"input",3,"ngModel","ngModelChange"],["required","","type","text","placeholder","e.g. 5123 2213 12 424 2314",1,"input",3,"value","keyup"],["required","","type","text","placeholder","e.g. comedy action mystery",1,"input",3,"value","keyup"],[1,"title","has-text-info"],[1,"full-editor"],[1,"level","pt-4"],[1,"level-left"],[1,"level-item"],[1,"subtitle","is-5"],[1,"level-right"],["title","Play your story","target","_blank",1,"button","is-success","is-small",3,"routerLink"],["title","Save your changes",1,"button","is-info","is-small",3,"click"],["title","Minimize screenplay editor",1,"button","is-light","is-small",3,"click"],["title","Use full screenplay editor",1,"button","is-link","is-light","is-small",3,"click"],[1,"columns"],[1,"column","main-editor"],["required","","placeholder","Now the hard part... write a cool story!","rows","14",1,"textarea",2,"font-size","14px","font-family","Inconsolata",3,"ngModel","ngModelChange"],["contentTextArea",""],[1,"column","event-viewer"],[3,"reset","rawScreenplay","dataUpdated"],[1,"tag","is-normal"],["target","_blank","class","card-footer-item",3,"href",4,"ngIf"],["target","_blank",1,"card-footer-item",3,"href"],[2,"border-radius","50%",3,"src"],["href","#","class","card-footer-item",4,"ngIf"],["href","#",1,"card-footer-item"],["type","submit",1,"button","is-info","is-small","ml-3",3,"click"],["type","submit",1,"button","is-small","is-danger",3,"click"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.NdJ("click",function(){return t.showPublishModal=!1}),a.qZA(),a.TgZ(2,"div",2),a.TgZ(3,"header",3),a.TgZ(4,"p",4),a._uU(5,"Send for Review"),a.qZA(),a.TgZ(6,"button",5),a.NdJ("click",function(){return t.showPublishModal=!1}),a.qZA(),a.qZA(),a.TgZ(7,"section",6),a.TgZ(8,"div",7),a.TgZ(9,"a",8),a.TgZ(10,"div",9),a.TgZ(11,"figure",10),a._UZ(12,"img",11),a.qZA(),a.qZA(),a.qZA(),a.TgZ(13,"div",12),a.TgZ(14,"div",13),a.TgZ(15,"div",14),a.TgZ(16,"p",15),a._uU(17),a.qZA(),a.TgZ(18,"span",16),a._uU(19),a.qZA(),a.TgZ(20,"p",17),a._uU(21,"by "),a.TgZ(22,"span",18),a._uU(23),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(24,"div",19),a.TgZ(25,"div",20),a.YNc(26,NE,2,1,"span",21),a.qZA(),a.qZA(),a.qZA(),a.TgZ(27,"footer",22),a.YNc(28,ME,2,1,"ng-container",23),a.YNc(29,FE,3,2,"ng-container",24),a.qZA(),a.qZA(),a.TgZ(30,"article",25),a.TgZ(31,"div",26),a._uU(32," Please allow at least 24 hours while we review your submission. "),a.qZA(),a.qZA(),a.qZA(),a.TgZ(33,"footer",27),a.TgZ(34,"button",28),a.NdJ("click",function(){return t.submitForReview()}),a._uU(35," Submit "),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(36,"div",0),a._UZ(37,"div",29),a.TgZ(38,"div",30),a.TgZ(39,"div",31),a._uU(40," Please wait while we process your request. "),a.TgZ(41,"progress",32),a._uU(42,"45%"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(43,"div"),a._uU(44),a.qZA(),a.TgZ(45,"div",33),a.TgZ(46,"div",34),a.TgZ(47,"a",35),a._uU(48," \u25ba "),a.qZA(),a.YNc(49,qE,2,0,"button",36),a.TgZ(50,"button",37),a.NdJ("click",function(){return t.save()}),a._uU(51),a.qZA(),a.YNc(52,VE,2,0,"button",36),a.qZA(),a.TgZ(53,"div",38),a.YNc(54,jE,2,0,"button",39),a.qZA(),a.TgZ(55,"div",34),a.YNc(56,BE,2,0,"button",40),a.qZA(),a.TgZ(57,"div",34),a.TgZ(58,"button",41),a.NdJ("click",function(){return t.import()}),a._uU(59,"Import"),a.qZA(),a.qZA(),a.TgZ(60,"div",34),a.TgZ(61,"button",41),a.NdJ("click",function(){return t.cancel()}),a._uU(62,"New"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(63,"div",42),a.TgZ(64,"div",43),a.TgZ(65,"div",44),a.TgZ(66,"label",45),a._uU(67,"Title*"),a.qZA(),a.TgZ(68,"div",34),a.TgZ(69,"input",46),a.NdJ("ngModelChange",function(e){return t.story.title=e}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(70,"div",44),a.TgZ(71,"label",45),a._uU(72,"Author*"),a.qZA(),a.TgZ(73,"div",34),a.TgZ(74,"input",47),a.NdJ("ngModelChange",function(e){return t.story.author=e}),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(75,"div",48),a.TgZ(76,"div",44),a.TgZ(77,"label",45),a._uU(78,"Subtitle"),a.qZA(),a.TgZ(79,"div",34),a.TgZ(80,"input",49),a.NdJ("ngModelChange",function(e){return t.story.subtitle=e}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(81,"div",44),a.TgZ(82,"label",45),a._uU(83,"Cover URL"),a.qZA(),a.TgZ(84,"div",34),a.TgZ(85,"input",50),a.NdJ("ngModelChange",function(e){return t.story.cover=e}),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(86,"div",48),a.TgZ(87,"div",44),a.TgZ(88,"label",45),a._uU(89,"Casts"),a.qZA(),a.TgZ(90,"div",34),a.TgZ(91,"input",51),a.NdJ("keyup",function(e){return t.onUpdateCasts(e)}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(92,"div",44),a.TgZ(93,"label",45),a._uU(94,"Tags"),a.qZA(),a.TgZ(95,"div",34),a.TgZ(96,"input",52),a.NdJ("keyup",function(e){return t.onUpdateTags(e)}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(97,"div",44),a.TgZ(98,"label",45),a._uU(99,"Status"),a.qZA(),a.TgZ(100,"div",34),a.TgZ(101,"label",53),a._uU(102),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(103,"div",54),a.TgZ(104,"nav",55),a.TgZ(105,"div",56),a.TgZ(106,"div",57),a.TgZ(107,"p",58),a.TgZ(108,"span"),a._uU(109,"Screenplay"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(110,"div",59),a.TgZ(111,"p",57),a.TgZ(112,"a",60),a._uU(113,"Play \u25ba"),a.qZA(),a.qZA(),a.TgZ(114,"p",57),a.TgZ(115,"a",61),a.NdJ("click",function(){return t.save()}),a._uU(116),a.qZA(),a.qZA(),a.TgZ(117,"p",57),a.TgZ(118,"a",62),a.NdJ("click",function(){return t.closeFullEditor()}),a._uU(119,"Back"),a.qZA(),a.qZA(),a.TgZ(120,"p",57),a.TgZ(121,"a",63),a.NdJ("click",function(){return t.openFullEditor()}),a._uU(122,"Open Full Editor"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(123,"div",64),a.TgZ(124,"div",65),a.TgZ(125,"div",44),a.TgZ(126,"div",34),a.TgZ(127,"textarea",66,67),a.NdJ("ngModelChange",function(e){return t.story.content=e}),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(129,"div",68),a.TgZ(130,"screenplay-editor-widget",69),a.NdJ("dataUpdated",function(e){return t.dataUpdated(e)}),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.ekj("is-active",t.showPublishModal),a.xp6(9),a.Q6J("routerLink",a.VKq(70,HE,t.story.id)),a.xp6(3),a.Q6J("src",t.story.cover,a.LSH),a.xp6(4),a.Q6J("title",t.story.title),a.xp6(1),a.Oqu(t.story.title),a.xp6(1),a.Q6J("title",t.story.subtitle),a.xp6(1),a.Oqu(t.story.subtitle),a.xp6(4),a.Oqu(t.story.author),a.xp6(3),a.Q6J("ngForOf",t.story.tags),a.xp6(2),a.Q6J("ngForOf",t.story.casts),a.xp6(1),a.Q6J("ngIf",t.story.casts.length>0),a.xp6(5),a.Q6J("disabled",t.isProcessing),a.xp6(2),a.ekj("is-active",t.isProcessing),a.xp6(7),a.Gre("notification ",t.notificationType," is-dark"),a.ekj("hidden",!t.showNotification),a.xp6(1),a.hij(" ",t.notificationMessage,"\n"),a.xp6(3),a.ekj("hidden",t.isDirty()),a.Q6J("routerLink",a.VKq(72,HE,t.story.id)),a.xp6(2),a.Q6J("ngIf",t.reviewable),a.xp6(1),a.ekj("hidden",!t.isDirty()),a.Q6J("disabled",!t.isValid()),a.xp6(1),a.hij(" ",t.story.id?"Update":"Save"," "),a.xp6(1),a.Q6J("ngIf",t.publishable),a.xp6(2),a.Q6J("ngIf",t.deletable),a.xp6(2),a.Q6J("ngIf",t.exportable()),a.xp6(13),a.ekj("is-success",t.story.title),a.Q6J("ngModel",t.story.title),a.xp6(5),a.ekj("is-success",t.story.author),a.Q6J("ngModel",t.story.author),a.xp6(6),a.ekj("is-success",t.story.subtitle),a.Q6J("ngModel",t.story.subtitle),a.xp6(5),a.ekj("is-success",t.story.cover),a.Q6J("ngModel",t.story.cover),a.xp6(6),a.ekj("is-success",t.story.casts.length>0),a.Q6J("value",t.getCasts()),a.xp6(5),a.ekj("is-success",t.story.tags.length>0),a.Q6J("value",t.getTags()),a.xp6(6),a.Oqu(t.story.state),a.xp6(1),a.ekj("is-full",t.fsEditor),a.xp6(9),a.ekj("is-hidden",!t.fsEditor||t.isDirty()),a.Q6J("routerLink",a.VKq(74,HE,t.story.id)),a.xp6(3),a.ekj("is-hidden",!t.fsEditor||!t.isDirty()),a.xp6(1),a.Oqu(t.story.id?"Update":"Save"),a.xp6(2),a.ekj("is-hidden",!t.fsEditor),a.xp6(3),a.ekj("is-hidden",t.fsEditor),a.xp6(6),a.ekj("is-success",t.story.content),a.Q6J("ngModel",t.story.content),a.xp6(2),a.ekj("is-hidden",!t.fsEditor),a.xp6(1),a.Q6J("reset",t.resetFsEditor)("rawScreenplay",t.story.content))},directives:[Tx,W,Y,QS,ZT,hT,IT,PE],styles:["button{font-family:Bangers;letter-spacing:4px}input{font-size:16px;font-family:Inconsolata}.hidden{display:none}.screenplay-controls button{font-family:Verdana;letter-spacing:1px}.screenplay-controls{display:inline-block}.screenplay-controls .control{display:inline-block;margin-bottom:5px}a.hidden{display:none}.full-editor.is-full{padding-left:10px;overflow:hidden;z-index:30;background-color:#fff;position:fixed;top:0;left:0;height:100vh;width:100vw}.full-editor.is-full .column{padding:0;margin:0}.full-editor.is-full .column.main-editor{margin-left:10px}.full-editor.is-full .column.main-editor textarea{min-height:calc(100vh - 70px);max-height:calc(100vh - 70px)}.full-editor.is-full .column.event-viewer{margin-left:10px;margin-right:10px;overflow-y:scroll;overflow-x:hidden;height:calc(100vh - 70px);width:calc(100%-15px)}.html.no-scroll{overflow-y:hidden}"],encapsulation:2}),e}(),GE=function(){var e=function(){function e(t,n){v(this,e),this.storage=t,this.storyboardService=n,this.isProcessing=!1,this.hasError=!1,this.selectedStory$=new Xk.xQ}return p(e,[{key:"storySelected",value:function(e){var t=this;e.id.includes(":")?this.selectedStory$.next(e):(this.isProcessing=!0,this.hasError=!1,this.storage.ref("stories/".concat(e.id,".md")).getDownloadURL().pipe(Rb(function(e){return t.isProcessing=!1,t.hasError=!0,(0,Kx._)(e)})).subscribe(function(n){t.storyboardService.getStoryContent(n).pipe(Rb(function(e){return t.isProcessing=!1,t.hasError=!0,(0,We.of)(void 0)})).subscribe(function(n){e.content=null!=n?n:"",t.selectedStory$.next(e),t.isProcessing=!1})}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(pS),a.Y36(mS))},e.\u0275cmp=a.Xpm({type:e,selectors:[["story-editor"]],decls:22,vars:5,consts:[[1,"modal"],[1,"modal-background"],[1,"modal-content"],[1,"notification","is-info","is-dark"],["max","100",1,"progress","is-success","mt-3"],[1,"container","m-5"],[1,"columns"],[1,"column"],[1,"title","is-4"],[1,"container"],[3,"storySelected"],[1,"column","is-two-thirds-tablet"],[3,"story"]],template:function(e,t){1&e&&(a._UZ(0,"navigation-widget"),a.TgZ(1,"div",0),a._UZ(2,"div",1),a.TgZ(3,"div",2),a.TgZ(4,"div",3),a._uU(5," Please wait while we retrieve your "),a.TgZ(6,"strong"),a._uU(7,"story"),a.qZA(),a._uU(8,". "),a.TgZ(9,"progress",4),a._uU(10,"45%"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"div",5),a.TgZ(12,"div",6),a.TgZ(13,"div",7),a.TgZ(14,"h1",8),a._uU(15,"Story Builder"),a.qZA(),a.TgZ(16,"div",9),a.TgZ(17,"my-stories-listing-widget",10),a.NdJ("storySelected",function(e){return t.storySelected(e)}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(18,"div",11),a.TgZ(19,"div",9),a._UZ(20,"story-editor-widget",12),a.ALo(21,"async"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(1),a.ekj("is-active",t.isProcessing),a.xp6(19),a.Q6J("story",a.lcZ(21,3,t.selectedStory$)))},directives:[IS,US,zE],pipes:[ie],encapsulation:2}),e}(),KE=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Xpm({type:e,selectors:[["not-found"]],decls:1,vars:0,template:function(e,t){1&e&&a._uU(0,"You're lost... go back...")},encapsulation:2}),e}(),WE=p(function e(){v(this,e),this.id="",this.addresses=[]}),JE=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0;v(this,e),this.capacity=t,this.storage=[]}return p(e,[{key:"enqueue",value:function(e){if(this.size()===this.capacity)throw Error("Queue has reached max capacity, you cannot add more items");this.storage.push(e)}},{key:"dequeue",value:function(){return this.storage.shift()}},{key:"size",value:function(){return this.storage.length}}]),e}(),YE=p(function e(){v(this,e),this.hash=0,this.commandIndex=0,this.variables=new Map}),QE=["bgmPlayer"],$E=["audioPlayer"];function XE(e,t){if(1&e&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&e){var n=a.oxw();a.Gre("text-effect ",n.txtEffectPos,""),a.xp6(1),a.Oqu(n.txtEffect)}}function eC(e,t){if(1&e&&(a.TgZ(0,"div",26),a._UZ(1,"img",3),a.qZA()),2&e){var n=a.oxw();a.xp6(1),a.s9C("src",n.imgSnippet,a.LSH)}}function tC(e,t){if(1&e&&(a.TgZ(0,"div",31),a.TgZ(1,"span",32),a._uU(2),a.qZA(),a.qZA()),2&e){var n=a.oxw(2);a.xp6(1),a.ekj("unknown","?????:"===n.lCharCache[0].name),a.xp6(1),a.hij(" ",n.lCharCache[0].name," ")}}function nC(e,t){if(1&e&&(a.TgZ(0,"div",33),a.TgZ(1,"span"),a._uU(2),a.qZA(),a.qZA()),2&e){var n=a.oxw(2);a.xp6(1),a.Gre("dialogue ",n.lCharCache[0].dialogueType,""),a.xp6(1),a.hij(" ",n.lCharCache[0].dialogue," ")}}function rC(e,t){if(1&e&&a._UZ(0,"img",36),2&e){var n=t.$implicit,r=t.index,i=a.oxw(3);a.ekj("speaking",i.lCharCache[0].dialogue)("main",0===r),a.Q6J("src",n.imageUrl,a.LSH)}}function iC(e,t){if(1&e&&(a.TgZ(0,"div",34),a.YNc(1,rC,1,5,"img",35),a.qZA()),2&e){var n=a.oxw(2);a.xp6(1),a.Q6J("ngForOf",n.lCharCache)}}function aC(e,t){if(1&e&&(a.TgZ(0,"div",27),a.YNc(1,tC,3,3,"div",28),a.YNc(2,nC,3,4,"div",29),a.YNc(3,iC,2,1,"div",30),a.qZA()),2&e){var n=a.oxw();a.xp6(1),a.Q6J("ngIf",n.lCharCache[0].name),a.xp6(1),a.Q6J("ngIf",n.lCharCache[0].dialogue),a.xp6(1),a.Q6J("ngIf",n.lCharCache[0])}}function oC(e,t){if(1&e&&(a.TgZ(0,"div",40),a.TgZ(1,"span",32),a._uU(2),a.qZA(),a.qZA()),2&e){var n=a.oxw(2);a.xp6(1),a.ekj("unknown","?????:"===n.rCharCache[0].name),a.xp6(1),a.hij(" ",n.rCharCache[0].name," ")}}function sC(e,t){if(1&e&&(a.TgZ(0,"div",41),a.TgZ(1,"span"),a._uU(2),a.qZA(),a.qZA()),2&e){var n=a.oxw(2);a.xp6(1),a.Gre("dialogue ",n.rCharCache[0].dialogueType,""),a.xp6(1),a.hij(" ",n.rCharCache[0].dialogue," ")}}function uC(e,t){if(1&e&&a._UZ(0,"img",36),2&e){var n=a.oxw(),r=n.index,i=n.count,o=a.oxw(3);a.ekj("speaking",o.rCharCache[0].dialogue)("main",r===i-1),a.Q6J("src",o.rCharCache[i-1-r].imageUrl,a.LSH)}}function cC(e,t){if(1&e&&(a.ynx(0),a.YNc(1,uC,1,5,"img",43),a.BQk()),2&e){var n=t.index;a.xp6(1),a.Q6J("ngIf",n<8)}}function lC(e,t){if(1&e&&(a.TgZ(0,"div",34),a.YNc(1,cC,2,1,"ng-container",42),a.qZA()),2&e){var n=a.oxw(2);a.xp6(1),a.Q6J("ngForOf",n.rCharCache)}}function hC(e,t){if(1&e&&(a.TgZ(0,"div",37),a.YNc(1,oC,3,3,"div",38),a.YNc(2,sC,3,4,"div",39),a.YNc(3,lC,2,1,"div",30),a.qZA()),2&e){var n=a.oxw();a.xp6(1),a.Q6J("ngIf",n.rCharCache[0].name),a.xp6(1),a.Q6J("ngIf",n.rCharCache[0].dialogue),a.xp6(1),a.Q6J("ngIf",n.rCharCache)}}var fC=function(){var e=function(){function e(t,n){v(this,e),this.storyEventService=t,this.storyboardService=n,this.storyEnded=new a.vpe,this._rawStory="",this._junkies=[],this.storyboardEvents=new JE,this.hasStarted=!1,this.title="",this.subtitle="",this.showTitlePanel=!1,this.scenetitle="",this.showScenePanel=!1,this.closedcaption="",this.weatherEffect="",this.imgSnippet="",this.bgm="",this.audio="",this.txtEffect="",this.txtEffectPos="",this.narration="",this.leftName="",this.leftDialogue="",this.rightName="",this.rightDialogue="",this.customBackgroundStyle="",this.charCache=[],this.lCharCache=[],this.rCharCache=[],this.bgImage="",this.state=new YE,this.processing=!1}return p(e,[{key:"handleKeyboardEvent",value:function(e){this.processing||"Enter"!==e.key?!this.processing&&this.hasStarted&&this.processNextEvent():this.storyEnded.emit(0===this.storyboardEvents.size()&&this.hasStarted)}},{key:"rawStory",get:function(){return this._rawStory},set:function(e){null!==e&&(this._rawStory=e,this.state.hash=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=3735928559^n,i=1103547991^n,a=0;a<e.length;a++)t=e.charCodeAt(a),r=Math.imul(r^t,2654435761),i=Math.imul(i^t,1597334677);return r=Math.imul(r^r>>>16,2246822507)^Math.imul(i^i>>>13,3266489909),4294967296*(2097151&(i=Math.imul(i^i>>>16,2246822507)^Math.imul(r^r>>>13,3266489909)))+(r>>>0)}(e),this.storyboardEvents=this.getEvents(e),this.reset(),this.processNextEvent())}},{key:"junkies",get:function(){return this._junkies},set:function(e){null!==e&&(this._junkies=e)}},{key:"getEvents",value:function(e){var t=this,n=new JE;return e.split(/[\r\n]+/).forEach(function(e){t.storyEventService.getStoryEventCommand(e).forEach(function(e){n.enqueue(e)})}),n.enqueue(new uE(sE.Wait,1e3,{})),n}},{key:"processNextEvent",value:function(){if(!this.processing){for(;this.storyboardEvents.size()>0;){this.hasStarted=!0,this.processing=!0;var e=this.storyboardEvents.dequeue();if(e&&(this.processEvent(e),e.waitAfterInMs>0)){this.processing=!1;break}}0===this.storyboardEvents.size()&&this.hasStarted&&this.storyEnded.emit(!0)}}},{key:"processEvent",value:function(e){switch(console.log("Processing ".concat(sE[e.commandType])),null==e?void 0:e.commandType){case sE.AddVariable:this.addVariable(e);break;case sE.BgImageShow:this.showBgImage(e);break;case sE.ImageSnippetShow:this.imageSnippetShow(e);break;case sE.ImageSnippetHide:this.imageSnippetHide();break;case sE.TextEffectShow:this.textEffectShow(e);break;case sE.TextEffectHide:this.textEffectHide();break;case sE.BgMusicPlay:this.bgMusicPlay(e);break;case sE.BgMusicStop:this.bgMusicStop(e);break;case sE.TitleShow:this.showTitle(e);break;case sE.TitleHide:this.hideTitle();break;case sE.ClosedCaptionShow:this.showClosedCaption(e);break;case sE.ClosedCaptionHide:this.hideClosedCaption();break;case sE.NewScene:this.newScene(e);break;case sE.SceneTitleHide:this.hideSceneTitle();break;case sE.NarratorSpeak:this.narratorSpeak(e);break;case sE.ClosedCaptionShow:this.showClosedCaption(e);break;case sE.CharAdd:this.characterAdd(e);break;case sE.CharRemove:this.characterRemove(e);break;case sE.CharSpeak:this.characterSpeak(e);break;case sE.WeatherEffectStart:this.changeWeather(e)}}},{key:"addVariable",value:function(e){this.state.variables.set(e.settings.name,e.settings.value.trim())}},{key:"showBgImage",value:function(e){var t=this.state.variables.get(e.settings.value);this.customBackgroundStyle=/^#([0-9A-F]{3}){1,2}$/i.test(e.settings.value)?"background-color: ".concat(e.settings.value):void 0!==t?"background-image: url(".concat(t,")"):"background-color: #333333"}},{key:"imageSnippetShow",value:function(e){var t=this.state.variables.get(e.settings.value);this.imgSnippet=t}},{key:"imageSnippetHide",value:function(){this.imgSnippet=""}},{key:"textEffectShow",value:function(e){this.txtEffect=e.settings.value,this.txtEffectPos=e.settings.position}},{key:"textEffectHide",value:function(){this.txtEffect=""}},{key:"bgMusicPlay",value:function(e){var t=this.state.variables.get(e.settings.value);e.settings.loop?(this.bgm=t,this.bgmPlayer.nativeElement.load(),this.bgmPlayer.nativeElement.loop=!0,this.bgmPlayer.nativeElement.play()):(this.audio=t,this.audioPlayer.nativeElement.load(),this.audioPlayer.nativeElement.loop=!1,this.audioPlayer.nativeElement.play())}},{key:"bgMusicStop",value:function(e){e.settings.loop?(this.bgm="",this.bgmPlayer.nativeElement.pause()):(this.audio="",this.audioPlayer.nativeElement.pause())}},{key:"showTitle",value:function(e){this.title=e.settings.title,this.subtitle=e.settings.subtitle,this.showTitlePanel=!0}},{key:"hideTitle",value:function(){this.showTitlePanel=!1}},{key:"showClosedCaption",value:function(e){this.closedcaption=e.settings.cc}},{key:"hideClosedCaption",value:function(){this.closedcaption=""}},{key:"newScene",value:function(e){this.charCache=[],this.scenetitle=e.settings.title,this.showScenePanel=!0}},{key:"hideSceneTitle",value:function(){this.scenetitle="",this.showScenePanel=!1}},{key:"changeWeather",value:function(e){this.weatherEffect=e.settings.value}},{key:"narratorSpeak",value:function(e){this.narration=e.settings.dialogue}},{key:"clearDialogue",value:function(){this.charCache.forEach(function(e){e.dialogue=""})}},{key:"characterAdd",value:function(e){var t=e.settings.id;if(void 0!==this.state.variables.get(e.settings.id)){var n=this.state.variables.get(e.settings.id),r=e.settings.anonLevel;this.charCache.find(function(e){return e.id===t})||(this.clearDialogue(),this.charCache.push(new gE({id:t,name:"",tokenId:n,nft:this.getNftType(e.settings.id),imageUrl:this.getCharacterImage(r,e.settings.id),position:e.settings.position,anonLevel:r,dialogue:e.settings.dialogue,dialogueType:e.settings.dialogueType})),this.updateStage())}else alert("You forgot to define: ".concat(e.settings.id))}},{key:"getNftType",value:function(e){return e.includes("ocm#")?"ocm":(e.includes("sj#"),"sj")}},{key:"getCharacterImage",value:function(e,t){if(e>2)return"assets/images/silhouette-20.png";var n=this.state.variables.get(t);return this.storyboardService.getAvatar(n)}},{key:"characterRemove",value:function(e){if("[]"===e.settings.id.trim())this.charCache=[];else{var t=this.charCache.findIndex(function(t){return t.id===e.settings.id});this.charCache.splice(t,1)}this.updateStage()}},{key:"characterSpeak",value:function(e){var t=e.settings.id,n=e.settings.anonLevel,r=this.charCache.findIndex(function(e){return e.id===t});if(this.clearDialogue(),r>=0){var i,a=this.charCache[r];a.name=e.settings.name,a.imageUrl=this.getCharacterImage(n,e.settings.id),a.dialogue=e.settings.dialogue,a.dialogueType=e.settings.dialogueType;var o=this.charCache.findIndex(a.position===pE.Left?function(e){return e.position===pE.Left}:function(e){return e.position===pE.Right});i=[this.charCache[r],this.charCache[o]],this.charCache[o]=i[0],this.charCache[r]=i[1],this.updateStage()}}},{key:"updateStage",value:function(){this.lCharCache=this.charCache.filter(function(e){return e.position===pE.Left}),this.rCharCache=this.charCache.filter(function(e){return e.position===pE.Right})}},{key:"reset",value:function(){this.charCache=[],this.hideTitle(),this.hideSceneTitle(),this.textEffectHide(),this.imageSnippetHide(),this.updateStage()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(TE),a.Y36(mS))},e.\u0275cmp=a.Xpm({type:e,selectors:[["storyboard-widget"]],viewQuery:function(e,t){var n;(1&e&&(a.Gf(QE,5),a.Gf($E,5)),2&e)&&(a.iGM(n=a.CRH())&&(t.bgmPlayer=n.first),a.iGM(n=a.CRH())&&(t.audioPlayer=n.first))},hostBindings:function(e,t){1&e&&a.NdJ("keypress",function(e){return t.handleKeyboardEvent(e)},!1,a.evT)},inputs:{rawStory:"rawStory",junkies:"junkies"},outputs:{storyEnded:"storyEnded"},decls:44,vars:25,consts:[["id","storyboard-wrapper",3,"click"],["autoplay",""],["bgmPlayer",""],[3,"src"],["audioPlayer",""],[1,"hero","is-small","is-dark","slider","title-slider"],["titlePanel",""],[1,"hero-body","brand"],["src","assets/images/shonen_junk_logo.svg"],[1,"title"],[1,"subtitle"],[1,"instruction"],[1,"hero","slider","scene-slider"],["scenePanel",""],[1,"hero-body"],[1,"hero","slider","cc-slider"],[1,"modal","narration"],[1,"modal-background"],[1,"modal-content"],[1,"dialogue","narration"],[1,"stage"],["stagePanel",""],[3,"class",4,"ngIf"],["class","image-snippet",4,"ngIf"],["class","avatar left",4,"ngIf"],["class","avatar right",4,"ngIf"],[1,"image-snippet"],[1,"avatar","left"],["class","name speech-bubble left",4,"ngIf"],["class","speech-bubble left",4,"ngIf"],["class","characters",4,"ngIf"],[1,"name","speech-bubble","left"],[1,"dialogue"],[1,"speech-bubble","left"],[1,"characters"],["class","char",3,"speaking","main","src",4,"ngFor","ngForOf"],[1,"char",3,"src"],[1,"avatar","right"],["class","name speech-bubble right",4,"ngIf"],["class","speech-bubble right",4,"ngIf"],[1,"name","speech-bubble","right"],[1,"speech-bubble","right"],[4,"ngFor","ngForOf"],["class","char",3,"speaking","main","src",4,"ngIf"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.NdJ("click",function(){return t.processNextEvent()}),a.TgZ(1,"audio",1,2),a._UZ(3,"source",3),a.qZA(),a.TgZ(4,"audio",1,4),a._UZ(6,"source",3),a.qZA(),a.TgZ(7,"div"),a.TgZ(8,"section",5,6),a.TgZ(10,"div",7),a.TgZ(11,"div"),a._UZ(12,"img",8),a.TgZ(13,"p"),a._uU(14,"JUNKYARD STORIES "),a.TgZ(15,"span"),a._uU(16,"presents"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(17,"p",9),a._uU(18),a.qZA(),a.TgZ(19,"p",10),a._uU(20),a.qZA(),a.TgZ(21,"p",11),a._uU(22,"[press space key or touch screen]"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(23,"section",12,13),a.TgZ(25,"div",14),a.TgZ(26,"p",10),a._uU(27),a.qZA(),a.qZA(),a.qZA(),a.TgZ(28,"section",15,13),a.TgZ(30,"div",14),a.TgZ(31,"p",10),a._uU(32),a.qZA(),a.qZA(),a.qZA(),a.TgZ(33,"div",16),a._UZ(34,"div",17),a.TgZ(35,"div",18),a.TgZ(36,"span",19),a._uU(37),a.qZA(),a.qZA(),a.qZA(),a.TgZ(38,"div",20,21),a.YNc(40,XE,2,4,"span",22),a.YNc(41,eC,2,1,"div",23),a.YNc(42,aC,4,3,"div",24),a.YNc(43,hC,4,3,"div",25),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(3),a.s9C("src",t.bgm,a.LSH),a.xp6(3),a.s9C("src",t.audio,a.LSH),a.xp6(1),a.Akn(t.customBackgroundStyle),a.Gre("background weather ",t.weatherEffect,""),a.xp6(1),a.ekj("hidden",!t.showTitlePanel),a.xp6(10),a.hij(" ",t.title," "),a.xp6(2),a.hij(" ",t.subtitle," "),a.xp6(3),a.ekj("hidden",!t.showScenePanel),a.xp6(4),a.hij(" ",t.scenetitle," "),a.xp6(1),a.ekj("hidden",!t.closedcaption),a.xp6(4),a.hij(" [",t.closedcaption,"] "),a.xp6(1),a.ekj("is-active",t.narration),a.xp6(4),a.Oqu(t.narration),a.xp6(3),a.Q6J("ngIf",t.txtEffect),a.xp6(1),a.Q6J("ngIf",t.imgSnippet),a.xp6(1),a.Q6J("ngIf",t.lCharCache[0]),a.xp6(1),a.Q6J("ngIf",t.rCharCache[0]))},directives:[Y,W],styles:["html{overflow:hidden}#storyboard-wrapper{height:100vh;background-color:#1e2029}#storyboard-wrapper .hidden{display:none}#storyboard-wrapper .instruction{padding:20px!important;color:#fff!important;font-size:2vh!important;font-family:Press Start\\ 2P,Courier,monospace!important}#storyboard-wrapper .background{display:flex;background-color:#1e2029;background-size:cover;height:100%;width:100%;align-items:center;-webkit-animation:fadeIn 4s;animation:fadeIn 4s}#storyboard-wrapper .background .brand img{width:25vw}#storyboard-wrapper .background .brand p{font-family:Bangers;font-size:4vh;color:#ff0;margin-bottom:20px}#storyboard-wrapper .background .brand p span{color:#fff}#storyboard-wrapper .background .brand .subtitle,#storyboard-wrapper .background .brand .title{text-transform:uppercase;font-size:6vh;font-family:Lalezar}#storyboard-wrapper .background .brand .subtitle{font-size:3vh}#storyboard-wrapper .background .dialogue{font-size:3.5vh;line-height:5vh;padding:.6vw 1vw;color:#fff}#storyboard-wrapper .background .narration{z-index:7;margin:25vh 0;padding:3vw}#storyboard-wrapper .background .narration .modal-content{text-align:center;overflow:hidden;width:80vw}#storyboard-wrapper .background .narration .dialogue{padding:0;margin:0;font-size:4.5vh;line-height:9vh}#storyboard-wrapper .background .stage .image-snippet{width:100vw;text-align:center}#storyboard-wrapper .background .stage .image-snippet img{max-width:70vw;max-height:80vh}#storyboard-wrapper .background .stage .text-effect{z-index:8;font-family:Bangers;font-size:25vh;color:red;text-shadow:-3px 0 #000,0 3px #000,3px 0 #000,0 -3px #000;position:absolute;margin:0 auto}#storyboard-wrapper .background .stage .text-effect.pos-7{top:5vh;left:7vh}#storyboard-wrapper .background .stage .text-effect.pos-8{top:5vh;left:30vw}#storyboard-wrapper .background .stage .text-effect.pos-9{top:5vh;right:7vh}#storyboard-wrapper .background .stage .text-effect.pos-4{top:32vh;left:7vh}#storyboard-wrapper .background .stage .text-effect.pos-5{top:32vh;left:30vw}#storyboard-wrapper .background .stage .text-effect.pos-6{top:32vh;right:7vh}#storyboard-wrapper .background .stage .text-effect.pos-1{bottom:5vh;left:7vh}#storyboard-wrapper .background .stage .text-effect.pos-2{bottom:5vh;left:30vw}#storyboard-wrapper .background .stage .text-effect.pos-3{bottom:5vh;right:7vh}#storyboard-wrapper .background .stage .avatar{position:absolute}#storyboard-wrapper .background .stage .avatar.left{top:5vh;left:0}#storyboard-wrapper .background .stage .avatar.right{bottom:5vh;right:0}#storyboard-wrapper .background .stage .avatar .char{margin:5px;border-radius:50%;max-width:10vw;min-width:10vw}#storyboard-wrapper .background .stage .avatar .char.main{border:10px solid transparent;max-width:20vw;min-width:20vw}#storyboard-wrapper .background .stage .avatar .char.main.speaking{border:10px solid #ff0}#storyboard-wrapper .background .stage .avatar .speech-bubble{font-family:Overpass Mono,Courier,monospace;position:absolute;top:5vh;width:65vw}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue{background-color:#000}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.serious{font-family:Akronim,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.creepy{font-family:Creepster,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.angry{font-size:3vh;line-height:7vh;color:red;font-family:Gloria Hallelujah,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.scared{font-family:Rubik Puddles,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.whisper{font-family:Whisper,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.redacted{font-family:Redacted Script,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble .dialogue.monster{font-family:Eater,Courier,monospace}#storyboard-wrapper .background .stage .avatar .speech-bubble.right{right:20vw;text-align:right}#storyboard-wrapper .background .stage .avatar .speech-bubble.left{left:20vw}#storyboard-wrapper .background .stage .avatar .speech-bubble.name{top:-2vh}#storyboard-wrapper .background .stage .avatar .speech-bubble.name.left .dialogue{background:#0065ff}#storyboard-wrapper .background .stage .avatar .speech-bubble.name.right .dialogue{background:#f26522}#storyboard-wrapper .background .stage .avatar .speech-bubble.name.left .dialogue.unknown,#storyboard-wrapper .background .stage .avatar .speech-bubble.name.right .dialogue.unknown{background:#333}.slider{background-color:#0065ff;width:100%;position:fixed}.title-slider{text-align:center;z-index:10;-webkit-animation:slideDown 4s 1;animation:slideDown 4s 1}.cc-slider{background-color:hsla(0,0%,4%,.86);font-family:Overpass Mono;z-index:9;text-align:left;position:fixed}.cc-slider .subtitle{color:#fff}.cc-slider .hero-body{text-align:center;padding:2vh 3vw}.scene-slider{background-color:#0065ff;z-index:9;position:relative;top:10vh;transform:translateX(100%);text-align:left;position:fixed;-webkit-animation:peek 3.5s 1;animation:peek 3.5s 1}.scene-slider .subtitle{color:#fff}.scene-slider .hero-body{padding:4vh 6vh}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@-webkit-keyframes slideDown{0%{transform:translateY(-300%)}to{transform:translateY(0)}}@keyframes slideDown{0%{transform:translateY(-300%)}to{transform:translateY(0)}}@-webkit-keyframes peek{0%{transform:translateX(100%)}40%{transform:translateX(20%)}80%{transform:translateX(20%)}to{transform:translateX(100%)}}@keyframes peek{0%{transform:translateX(100%)}40%{transform:translateX(20%)}80%{transform:translateX(20%)}to{transform:translateX(100%)}}@-webkit-keyframes typing{0%{width:0}to{width:100%}}@keyframes typing{0%{width:0}to{width:100%}}@-webkit-keyframes blink{0%,to{border-color:transparent}50%{border-color:orange}}@keyframes blink{0%,to{border-color:transparent}50%{border-color:orange}}"],encapsulation:2}),e}(),dC=function(){return["/"]},pC=function(){var e=function(){function e(t,n,r,i,a,o){v(this,e),this.storage=t,this.accountService=n,this.meta=r,this.router=i,this.route=a,this.storyboardService=o,this.authorAddress="",this.showSupport=!1,this.showWarning=!1,this.hasLiked=!1,this.likes=new WE,this.isProcessing=!1,this.hasError=!1,this.storyId="",this.rawStory$=new Xk.xQ,this.junkies$=new Xk.xQ,this.isLocalData=!1,this.isViewed=!1,this.metaDataAdded=!1}return p(e,[{key:"ngAfterViewInit",value:function(){var e=this;setTimeout(function(){e.ngOnInit()})}},{key:"ngOnInit",value:function(){var e=this;this.storyboardService.getJunkies().subscribe(function(t){e.junkies$.next(JSON.parse(JSON.stringify(t)))}),this.route.params.subscribe(function(t){e.storyId=t.id,e.getMetaData(),e.loadStory(e.storyId),e.getLikes(e.storyId)})}},{key:"getMetaData",value:function(){var e=this;this.storyboardService.liveStories$.subscribe(function(t){var n,r=t.find(function(t){return t.id.toLowerCase()===e.storyId.toLowerCase()});r&&!e.metaDataAdded&&(e.metaDataAdded=!0,e.meta.addTags([{name:"twitter:card",content:"summary_large_image"},{name:"twitter:site",content:"shonenjunkmeta"},{name:"twitter:creator",content:r.author},{name:"og:url",content:"https://junkyard-stories.github.io/#/storyboard/".concat(null==r?void 0:r.id,"/")},{name:"og:title",content:r.title},{name:"og:card",content:"Create and share stories with your Shonen Junk and partner NFTs"},{name:"og:image",content:null!==(n=r.cover)&&void 0!==n?n:"https://i.shinji.xyz/static/shonen-junk/i/reveals/800x800/241f242c7abe9bb91fd71dd3f1590daddf5a2fc2de0453c9d13432e0e5c4e62a.png?v=20220327"}]))})}},{key:"getLikes",value:function(e){var t=this;return(0,Qt.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.storyboardService.getLikesByStoryId(e);case 2:t.likes=n.sent,t.accountService.activeAccount&&(t.hasLiked=t.likes.addresses.includes(t.accountService.activeAccount.toLowerCase()),t.authorAddress=t.accountService.activeAccount);case 4:case"end":return n.stop()}},n)}))()}},{key:"loadStory",value:function(e){var t=this;if(this.isLocalData=e.includes(":"),this.isLocalData){var n=localStorage.getItem("junkyardStories.local.".concat(e))||"";this.rawStory$.next(null!=n?n:"")}else this.storage.ref("stories/".concat(e,".md")).getDownloadURL().pipe(Rb(function(e){return t.isProcessing=!1,(0,Kx._)(e)})).subscribe(function(e){t.storyboardService.getStoryContent(e).pipe(Rb(function(e){return t.isProcessing=!1,(0,Kx._)(e)})).subscribe(function(e){t.rawStory$.next(null!=e?e:""),t.isProcessing=!1})})}},{key:"storyEnded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.storyId.includes(":");if(e&&!t)return this.showSupport=!0,void(this.isViewed||(this.storyboardService.addStoryViewCount(this.storyId),this.isViewed=!0));this.isLocalData?window.close():this.router.navigateByUrl("/")}},{key:"fireToggled",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.accountService.user.role<2)){t.next=4;break}e.showWarning=!0,t.next=8;break;case 4:return e.hasLiked=!e.hasLiked,t.next=7,e.storyboardService.updateStoryLikes(e.storyId,"0x5b6141E514A8AC05Ec637c48D0b312F52752C1cB",e.hasLiked);case 7:e.likes=t.sent;case 8:case"end":return t.stop()}},t)}))()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(pS),a.Y36(kS),a.Y36(Ge),a.Y36(xx),a.Y36(n_),a.Y36(mS))},e.\u0275cmp=a.Xpm({type:e,selectors:[["storyboard"]],decls:34,vars:19,consts:[[1,"modal"],[1,"modal-background"],[1,"before"],[1,"after"],[1,"modal-content",2,"width","100%"],[1,"hero","is-info"],[1,"hero-body"],[1,"title","has-text-centered"],[1,"subtitle","has-text-centered"],[1,"level"],[1,"level-item","has-text-centered"],[1,"sj-fire","p-5",3,"click"],[1,"heading"],[1,"title"],[1,"fire","title","far","fa-fire"],[1,"mt-5"],[3,"routerLink"],[1,"modal","is-active"],[1,"modal-background",3,"click"],[1,"modal-content"],[1,"notification","is-info","is-dark","has-text-centered"],[1,"like","title","far","fa-fire","liked"],[3,"rawStory","junkies","storyEnded"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a._UZ(2,"div",2),a._UZ(3,"div",3),a.qZA(),a.TgZ(4,"div",4),a.TgZ(5,"section",5),a.TgZ(6,"div",6),a.TgZ(7,"p",7),a._uU(8," Thank you! "),a.qZA(),a.TgZ(9,"p",8),a._uU(10," Please give this story some fire to show support "),a.qZA(),a.TgZ(11,"nav",9),a.TgZ(12,"div",10),a.TgZ(13,"div"),a.TgZ(14,"div",11),a.NdJ("click",function(){return t.fireToggled()}),a.TgZ(15,"p",12),a._uU(16,"Shonen Fire"),a.qZA(),a.TgZ(17,"p",13),a._uU(18),a.ALo(19,"number"),a._UZ(20,"i",14),a.qZA(),a.qZA(),a.TgZ(21,"p",15),a.TgZ(22,"a",16),a._uU(23,"back to junkyard"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(24,"div",17),a.TgZ(25,"div",18),a.NdJ("click",function(){return t.showWarning=!1}),a.qZA(),a.TgZ(26,"div",19),a.TgZ(27,"div",20),a._uU(28," Sorry, Only Shonen Junk & OnChain Monkey holders can send "),a.TgZ(29,"strong"),a._UZ(30,"i",21),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(31,"storyboard-widget",22),a.NdJ("storyEnded",function(e){return t.storyEnded(e)}),a.ALo(32,"async"),a.ALo(33,"async"),a.qZA()),2&e&&(a.ekj("is-active",t.showSupport),a.xp6(1),a.ekj("pyro",t.hasLiked),a.xp6(13),a.ekj("liked",t.hasLiked),a.xp6(4),a.hij(" ",a.lcZ(19,12,t.likes.addresses.length)," "),a.xp6(4),a.Q6J("routerLink",a.DdM(18,dC)),a.xp6(2),a.ekj("is-active",t.showWarning),a.xp6(7),a.Q6J("rawStory",a.lcZ(32,14,t.rawStory$))("junkies",a.lcZ(33,16,t.junkies$)))},directives:[Tx,fC],pipes:[ae,ie],styles:["html{overflow:hidden}.sj-fire{background-color:#3c3434;border-radius:5%;cursor:pointer}.sj-fire .fire{color:#fff}.sj-fire:hover .fire{color:#ff0}.sj-fire:hover.liked .fire{color:#fff}.sj-fire.liked .fire{color:#ff0}a:focus,a:hover{color:#ff0!important}.pyro>.after,.pyro>.before{position:absolute;width:5px;height:5px;border-radius:50%;box-shadow:-120px -218.66667px blue,248px -16.66667px #00ff84,190px 16.33333px #002bff,-113px -308.66667px #ff009d,-109px -287.66667px #ffb300,-50px -313.66667px #ff006e,226px -31.66667px #ff4000,180px -351.66667px #ff00d0,-12px -338.66667px #00f6ff,220px -388.66667px #9f0,-69px -27.66667px #ff0400,-111px -339.66667px #6200ff,155px -237.66667px #0df,-152px -380.66667px #00ffd0,-50px -37.66667px #0fd,-95px -175.66667px #a6ff00,-88px 10.33333px #0d00ff,112px -309.66667px #005eff,69px -415.66667px #ff00a6,168px -100.66667px #ff004c,-244px 24.33333px #f60,97px -325.66667px #f06,-211px -182.66667px #00ffa2,236px -126.66667px #b700ff,140px -196.66667px #9000ff,125px -175.66667px #0bf,118px -381.66667px #ff002f,144px -111.66667px #ffae00,36px -78.66667px #f600ff,-63px -196.66667px #c800ff,-218px -227.66667px #d4ff00,-134px -377.66667px #ea00ff,-36px -412.66667px #ff00d4,209px -106.66667px #00fff2,91px -278.66667px #000dff,-22px -191.66667px #9dff00,139px -392.66667px #a6ff00,56px -2.66667px #09f,-156px -276.66667px #ea00ff,-163px -233.66667px #00fffb,-238px -346.66667px #00ff73,62px -363.66667px #08f,244px -170.66667px #0062ff,224px -142.66667px #b300ff,141px -208.66667px #9000ff,211px -285.66667px #f60,181px -128.66667px #1e00ff,90px -123.66667px #c800ff,189px 70.33333px #00ffc8,-18px -383.66667px #0f3,100px -6.66667px #ff008c;-webkit-animation:bang 1s ease-out infinite backwards,gravity 1s ease-in infinite backwards,position 5s linear infinite backwards;animation:bang 1s ease-out infinite backwards,gravity 1s ease-in infinite backwards,position 5s linear infinite backwards}.pyro>.after{-webkit-animation-delay:1.25s,1.25s,1.25s;animation-delay:1.25s,1.25s,1.25s;-webkit-animation-duration:1.25s,1.25s,6.25s;animation-duration:1.25s,1.25s,6.25s}@-webkit-keyframes bang{0%{box-shadow:0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff}}@keyframes bang{0%{box-shadow:0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff}}@-webkit-keyframes gravity{to{transform:translateY(200px);-moz-transform:translateY(200px);-webkit-transform:translateY(200px);-o-transform:translateY(200px);-ms-transform:translateY(200px);opacity:0}}@keyframes gravity{to{transform:translateY(200px);-moz-transform:translateY(200px);-webkit-transform:translateY(200px);-o-transform:translateY(200px);-ms-transform:translateY(200px);opacity:0}}@-webkit-keyframes position{0%,19.9%{margin-top:10%;margin-left:40%}20%,39.9%{margin-top:40%;margin-left:30%}40%,59.9%{margin-top:20%;margin-left:70%}60%,79.9%{margin-top:30%;margin-left:20%}80%,99.9%{margin-top:30%;margin-left:80%}}@keyframes position{0%,19.9%{margin-top:10%;margin-left:40%}20%,39.9%{margin-top:40%;margin-left:30%}40%,59.9%{margin-top:20%;margin-left:70%}60%,79.9%{margin-top:30%;margin-left:20%}80%,99.9%{margin-top:30%;margin-left:80%}}"],encapsulation:2}),e}();function vC(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"button",39),a.NdJ("click",function(){a.CHM(n);var e=a.oxw().$implicit;return a.oxw().export(e.id)}),a._uU(1," EXPORT "),a.qZA()}}function gC(e,t){if(1&e&&(a.TgZ(0,"span",40),a._uU(1),a.qZA()),2&e){var n=t.$implicit;a.xp6(1),a.Oqu(n)}}function mC(e,t){if(1&e&&(a.TgZ(0,"a",42),a._UZ(1,"img",43),a.qZA()),2&e){var n=a.oxw().$implicit,r=a.oxw(2);a.Q6J("href",r.getAvatarLink(n),a.LSH),a.xp6(1),a.Q6J("src",r.getAvatar(n),a.LSH)}}function yC(e,t){if(1&e&&(a.ynx(0),a.YNc(1,mC,2,2,"a",41),a.BQk()),2&e){var n=t.index;a.xp6(1),a.Q6J("ngIf",n<3)}}function kC(e,t){1&e&&a._UZ(0,"a",45)}function bC(e,t){1&e&&a._UZ(0,"a",45)}function wC(e,t){if(1&e&&(a.ynx(0),a.YNc(1,kC,1,0,"a",44),a.YNc(2,bC,1,0,"a",44),a.BQk()),2&e){var n=a.oxw().$implicit;a.xp6(1),a.Q6J("ngIf",n.casts.length<3),a.xp6(1),a.Q6J("ngIf",n.casts.length<2)}}var _C=function(e){return["/storyboard",e]};function xC(e,t){if(1&e&&(a.TgZ(0,"div",13),a.TgZ(1,"div",14),a.TgZ(2,"div",15),a.TgZ(3,"figure",16),a.TgZ(4,"a",17),a._UZ(5,"img",18),a.qZA(),a.YNc(6,vC,2,0,"button",19),a._UZ(7,"div",20),a.TgZ(8,"nav",21),a.TgZ(9,"div",22),a.TgZ(10,"div"),a.TgZ(11,"p",23),a._uU(12),a.ALo(13,"number"),a._UZ(14,"i",24),a.qZA(),a.qZA(),a.qZA(),a.TgZ(15,"div",22),a.TgZ(16,"div"),a.TgZ(17,"p",23),a._uU(18),a.ALo(19,"number"),a._UZ(20,"i",25),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(21,"div",26),a.TgZ(22,"div",27),a.TgZ(23,"a",17),a.TgZ(24,"div",28),a.TgZ(25,"p",29),a._uU(26),a.qZA(),a.TgZ(27,"span",30),a._uU(28),a.qZA(),a.TgZ(29,"p",31),a._uU(30,"by "),a.TgZ(31,"span",32),a._uU(32),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(33,"div",33),a.TgZ(34,"div",34),a.YNc(35,gC,2,1,"span",35),a.qZA(),a.qZA(),a.qZA(),a.TgZ(36,"footer",36),a.YNc(37,yC,2,1,"ng-container",37),a.YNc(38,wC,3,2,"ng-container",38),a.qZA(),a.qZA(),a.qZA()),2&e){var n=t.$implicit,r=a.oxw();a.xp6(4),a.Q6J("routerLink",a.VKq(18,_C,n.id)),a.xp6(1),a.Q6J("src",n.cover,a.LSH),a.xp6(1),a.Q6J("ngIf",r.isLoggedIn),a.xp6(6),a.hij("",a.lcZ(13,14,n.views)," "),a.xp6(6),a.hij("",a.lcZ(19,16,n.likes)," "),a.xp6(5),a.Q6J("routerLink",a.VKq(20,_C,n.id)),a.xp6(2),a.Q6J("title",n.title),a.xp6(1),a.Oqu(n.title),a.xp6(1),a.Q6J("title",n.subtitle),a.xp6(1),a.Oqu(n.subtitle),a.xp6(4),a.Oqu(n.author),a.xp6(3),a.Q6J("ngForOf",n.tags),a.xp6(2),a.Q6J("ngForOf",n.casts),a.xp6(1),a.Q6J("ngIf",n.casts.length>0)}}var SC=function(){var e=function(){function e(t,n,r,i,a){v(this,e),this.meta=t,this.storage=n,this.storyboardService=r,this.accountService=i,this.clipboard=a,this.publishedStories=[],this.filteredStories=[],this.isProcessing=!1,this.searchKeyword="",this.sortBy="hottest",this.meta.addTags([{name:"twitter:card",content:"summary_large_image"},{name:"twitter:site",content:"shonenjunkmeta"},{name:"twitter:creator",content:"@zmbby69"},{name:"og:url",content:"https://junkyard-stories.github.io"},{name:"og:title",content:"Junkyard Stories - Screenplay Gallery and Builder"},{name:"og:card",content:"Create and share stories with your Shonen Junk and partner NFTs"},{name:"og:image",content:"https://i.shinji.xyz/static/shonen-junk/i/reveals/800x800/241f242c7abe9bb91fd71dd3f1590daddf5a2fc2de0453c9d13432e0e5c4e62a.png?v=20220327"}])}return p(e,[{key:"isLoggedIn",get:function(){return""!==this.accountService.activeAccount}},{key:"ngOnInit",value:function(){var e=this;this.storyboardService.liveStories$.subscribe(function(t){e.publishedStories=JSON.parse(JSON.stringify(t)).filter(function(e){return"published"===e.state}),e.runSearch(e.searchKeyword,e.sortBy)}),this.storyboardService.getStoriesFromStorage()}},{key:"search",value:function(e){var t;this.searchKeyword=null!==(t=e.target.value)&&void 0!==t?t:"",this.runSearch(this.searchKeyword,this.sortBy)}},{key:"changeSort",value:function(e){this.sortBy=e,this.runSearch(this.searchKeyword,this.sortBy)}},{key:"runSearch",value:function(e,t){var n=this;this.filteredStories=this.publishedStories.filter(function(t){return t.title.toLowerCase().includes(e.toLowerCase())||t.subtitle.toLowerCase().includes(e.toLowerCase())||t.tags.includes(e.toLowerCase())||t.casts.includes(e.toLowerCase())}).sort(function(e,r){return n.sorter(e,r,t)})}},{key:"sorter",value:function(e,t,n){if("hottest"===n){if(e.likes<t.likes)return 1;if(e.likes>t.likes)return-1}else if("most-viewed"===n){if(e.views<t.views)return 1;if(e.views>t.views)return-1}return 0}},{key:"getAvatar",value:function(e){return this.storyboardService.getAvatar(e)}},{key:"getAvatarLink",value:function(e){return this.storyboardService.getAvatarLink(e)}},{key:"export",value:function(e){var t=this;this.isProcessing||(this.isProcessing=!0,this.storage.ref("stories/".concat(e,".md")).getDownloadURL().pipe(Rb(function(e){return t.isProcessing=!1,(0,Kx._)(e)})).subscribe(function(n){t.storyboardService.getStoryContent(n).pipe(Rb(function(e){return t.isProcessing=!1,(0,Kx._)(e)})).subscribe(function(n){var r,i=null!==(r=t.publishedStories.find(function(t){return t.id===e}))&&void 0!==r?r:new FS;i.content=n,t.clipboard.copy(JSON.stringify(i)),alert("Screenplay copied to clipboard."),t.isProcessing=!1})}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(Ge),a.Y36(pS),a.Y36(mS),a.Y36(kS),a.Y36(jS))},e.\u0275cmp=a.Xpm({type:e,selectors:[["junkyard"]],decls:29,vars:11,consts:[[1,"level","mt-5","mb-0","mr-5","ml-5"],[1,"level-left"],[1,"level-item"],[1,"field","has-addons"],[1,"control"],["type","text","placeholder","Title / tags / cast",1,"input",3,"value","keyup"],[1,"button"],[1,"subtitle","is-5"],[1,"level-right"],[1,"button","is-dark",3,"click"],[1,"junkyard","p-5"],[1,"columns","is-multiline","is-tablet"],["class","column is-one-quarter-desktop is-one-third-tablet",4,"ngFor","ngForOf"],[1,"column","is-one-quarter-desktop","is-one-third-tablet"],[1,"card"],[1,"card-image"],[1,"image","is-3by2"],["target","_blank",3,"routerLink"],[3,"src"],["class","export button is-small is-info is-responsive",3,"click",4,"ngIf"],[1,"meta-data","meta-data-panel"],[1,"level","meta-data"],[1,"level-item","has-text-centered"],[1,"title","is-5"],[1,"far","fa-eye"],[1,"like","title","far","fa-fire","liked"],[1,"card-content"],[1,"media"],[1,"media-content"],[1,"title","is-6","mb-1",3,"title"],[1,"heading",3,"title"],[1,"subtitle","is-6"],[1,"tag","is-info","is-normal"],[1,""],[1,"tags","are-medium"],["class","tag is-normal",4,"ngFor","ngForOf"],[1,"card-footer"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"export","button","is-small","is-info","is-responsive",3,"click"],[1,"tag","is-normal"],["target","_blank","class","card-footer-item",3,"href",4,"ngIf"],["target","_blank",1,"card-footer-item",3,"href"],[1,"avatar",3,"src"],["href","#","class","card-footer-item",4,"ngIf"],["href","#",1,"card-footer-item"]],template:function(e,t){1&e&&(a._UZ(0,"navigation-widget"),a.TgZ(1,"nav",0),a.TgZ(2,"div",1),a.TgZ(3,"div",2),a.TgZ(4,"div",3),a.TgZ(5,"p",4),a.TgZ(6,"input",5),a.NdJ("keyup",function(e){return t.search(e)}),a.qZA(),a.qZA(),a.TgZ(7,"p",4),a.TgZ(8,"button",6),a._uU(9," Search "),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(10,"div",2),a.TgZ(11,"p",7),a.TgZ(12,"strong"),a._uU(13),a.ALo(14,"number"),a.qZA(),a._uU(15," storie(s) found "),a.qZA(),a.qZA(),a.qZA(),a.TgZ(16,"div",8),a.TgZ(17,"p",2),a.TgZ(18,"a",9),a.NdJ("click",function(){return t.changeSort("hottest")}),a._uU(19,"Hottest"),a.qZA(),a.qZA(),a.TgZ(20,"p",2),a.TgZ(21,"a",9),a.NdJ("click",function(){return t.changeSort("newest")}),a._uU(22,"Newest"),a.qZA(),a.qZA(),a.TgZ(23,"p",2),a.TgZ(24,"a",9),a.NdJ("click",function(){return t.changeSort("most-viewed")}),a._uU(25,"Most Viewed"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(26,"div",10),a.TgZ(27,"div",11),a.YNc(28,xC,39,22,"div",12),a.qZA(),a.qZA()),2&e&&(a.xp6(6),a.Q6J("value",t.searchKeyword),a.xp6(7),a.Oqu(a.lcZ(14,9,t.filteredStories.length)),a.xp6(5),a.ekj("is-info","hottest"===t.sortBy),a.xp6(3),a.ekj("is-info","newest"===t.sortBy),a.xp6(3),a.ekj("is-info","most-viewed"===t.sortBy),a.xp6(4),a.Q6J("ngForOf",t.filteredStories))},directives:[IS,W,Tx,Y],pipes:[ae],styles:["html{overflow:auto}.navbar{background-color:#333}.navbar a{color:#fff}.navbar .brand{font-family:Bangers}.navbar .brand img{height:30px}.navbar .brand h1{color:#ff0;margin-bottom:0}.media-content p,.media-content span{overflow:hidden;text-overflow:ellipsis}.meta-data{position:absolute;bottom:0;width:100%;height:20%}.export,.meta-data.meta-data-panel{background-color:hsla(0,0%,4%,.8)}.export{position:absolute;top:0;right:0}.level,.level .title{color:#fff}.level i{font-size:.8em}.level i.liked{color:#ff0}.junkyard .card{box-shadow:none}.junkyard .card-footer{background-color:#ff0}.junkyard .card-footer .card-footer-item{padding:0 .05em}.junkyard .card-footer .card-footer-item:not(:last-child){border-right:none}.junkyard .card-footer .card-footer-item .avatar{border-bottom-left-radius:50%;border-bottom-right-radius:50%;box-shadow:0 .5em 1em -.125em hsla(0,0%,4%,.1),0 0 0 1px hsla(0,0%,4%,.02)}"],encapsulation:2}),e}(),TC=[{path:"",component:SC},{path:"story-editor",component:GE},{path:"junkyard",component:SC},{path:"storyboard/:id",component:pC},{path:"story-editor",component:GE},{path:"not-found",component:KE},{path:"**",redirectTo:"not-found"}],IC=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[Ux.forRoot(TC,{useHash:!0})],Ux]}),e}(),EC=function(){var e=function(){function e(t){v(this,e),this.accountService=t,this.title="junkyard-stories"}return p(e,[{key:"ngOnInit",value:function(){var e=this;return(0,Qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.accountService.getSelectedAccount();case 2:case"end":return t.stop()}},t)}))()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(kS))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&a._UZ(0,"router-outlet")},directives:[Cx],styles:[""]}),e}(),CC=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[TE],imports:[[oe,Ux,oE,FT]]}),e}(),AC=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[],imports:[[oe,CC,BS,Ux]]}),e}(),RC=function(){function e(t,n){v(this,e),this.notifier=t,this.source=n}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new DC(e,this.notifier,this.source))}}]),e}(),DC=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e)).notifier=r,a.source=i,a}return p(n,[{key:"error",value:function(e){if(!this.isStopped){var t=this.errors,r=this.retries,i=this.retriesSubscription;if(r)this.errors=void 0,this.retriesSubscription=void 0;else{t=new Xk.xQ;try{r=(0,this.notifier)(t)}catch(a){return o(S(n.prototype),"error",this).call(this,a)}i=(0,yb.ft)(r,new yb.IY(this))}this._unsubscribeAndRecycle(),this.errors=t,this.retries=r,this.retriesSubscription=i,t.next(e)}}},{key:"_unsubscribe",value:function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}},{key:"notifyNext",value:function(){var e=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)}}]),n}(yb.Ds),PC=i(3098),OC=function(){function e(t,n){v(this,e),this.delay=t,this.scheduler=n}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new NC(e,this.delay,this.scheduler))}}]),e}(),NC=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e)).delay=r,a.scheduler=i,a.queue=[],a.active=!1,a.errored=!1,a}return p(n,[{key:"_schedule",value:function(e){this.active=!0,this.destination.add(e.schedule(n.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}},{key:"scheduleNotification",value:function(e){if(!0!==this.errored){var t=this.scheduler,n=new LC(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}}},{key:"_next",value:function(e){this.scheduleNotification(PC.P.createNext(e))}},{key:"_error",value:function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleNotification(PC.P.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(e){for(var t=e.source,n=t.queue,r=e.scheduler,i=e.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var a=Math.max(0,n[0].time-r.now());this.schedule(e,a)}else this.unsubscribe(),t.active=!1}}]),n}($e.L),LC=p(function e(t,n){v(this,e),this.time=t,this.notification=n}),MC=function(){var e=function(){function e(){v(this,e)}return p(e,[{key:"intercept",value:function(e,t){return t.handle(e).pipe((n=function(e){return e.pipe(Qe(function(e,t){return t<=5&&500==e.status?(0,We.of)(e):(0,Kx._)(e)}),function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wx.P,r=(t=e)instanceof Date&&!isNaN(+t)?+e-n.now():Math.abs(e);return function(e){return e.lift(new OC(r,n))}}(1e3))},function(e){return e.lift(new RC(n,e))}));var n}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}();function ZC(){return function(e){return e.lift(new UC)}}var UC=function(){function e(){v(this,e)}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new FC(e))}}]),e}(),FC=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).hasPrev=!1,r}return p(n,[{key:"_next",value:function(e){var t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}]),n}($e.L),qC=function(){function e(t,n){v(this,e),this.compare=t,this.keySelector=n}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new VC(e,this.compare,this.keySelector))}}]),e}(),VC=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e)).keySelector=i,a.hasKey=!1,"function"==typeof r&&(a.compare=r),a}return p(n,[{key:"compare",value:function(e,t){return e===t}},{key:"_next",value:function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(i){return this.destination.error(i)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,t)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}]),n}($e.L);function jC(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new bu("invalid-argument","Invalid options passed to function ".concat(e,'(): You cannot specify both "merge" and "mergeFields".'));return t}function BC(){if("undefined"==typeof Uint8Array)throw new bu("unimplemented","Uint8Arrays are not available in this environment.")}function HC(){if("undefined"==typeof atob)throw new bu("unimplemented","Blobs are unavailable in Firestore in this environment.")}i(4828);var zC=function(){function e(t){v(this,e),this._delegate=t}return p(e,[{key:"toBase64",value:function(){return HC(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return BC(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return HC(),new e(Sy.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return BC(),new e(Sy.fromUint8Array(t))}}]),e}();function GC(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var a=i[r];if(a in n&&"function"==typeof n[a])return!0}return!1}(e)}var KC=function(){function e(){v(this,e)}return p(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){_y(e=iy(e,yy));var n=ky(e),r=e._freezeSettings(),i=new Am;return wy(n,i,new Em(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){_y(e=iy(e,yy));var t=ky(e),n=e._freezeSettings(),r=new Am;return wy(t,r,new Cm(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new bu(ku.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new wu;return e._queue.enqueueAndForgetEvenWhileRestricted((0,Qt.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(r=(0,Qt.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(qf.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,qf.delete(n);case 5:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})(mp(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}},n,null,[[0,6]])}))),t.promise}(e._delegate)}}]),e}(),WC=function(){function e(t,n,r){var i=this;v(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof tc||(this._appCompat=t)}return p(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||pu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=iy(e,sy))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&pu("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=uu.MOCK_USER;else{o=(0,Gt.Sg)(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new bu(ku.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new uu(u)}e._authCredentials=new Su(new _u(o,s))}}(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return function(e){return function(e){return e.asyncQueue.enqueue((0,Qt.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Hm(e);case 2:return n=t.sent,t.next=5,Gm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=yu(e);return t.wu.delete(0),_v(t)}(r)));case 7:case"end":return t.stop()}},t)})))}(ky(e=iy(e,yy)))}(this._delegate)}},{key:"disableNetwork",value:function(){return function(e){return function(e){return e.asyncQueue.enqueue((0,Qt.Z)(regeneratorRuntime.mark(function t(){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Hm(e);case 2:return n=t.sent,t.next=5,Gm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),(i=(0,Qt.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=yu(t)).wu.add(0),e.next=4,Sv(n);case 4:n.yu.set("Offline");case 5:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})(r)));case 7:case"end":return t.stop()}},t)})))}(ky(e=iy(e,yy)))}(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&ey("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new wu;return e.asyncQueue.enqueueAndForget((0,Qt.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){return Yg.apply(this,arguments)},n.next=3,Km(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}},n)}))),t.promise}(ky(e=iy(e,yy)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return function(e,t){return function(e,t){var n=new Dm(t);return e.asyncQueue.enqueueAndForget((0,Qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){yu(e).bu.add(t),t.next()},t.next=3,Wm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)}))),function(){n.Aa(),e.asyncQueue.enqueueAndForget((0,Qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){yu(e).bu.delete(t)},t.next=3,Wm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)})))}}(ky(e=iy(e,yy)),gy(t)?t:{next:t})}(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new bu("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new uA(this,hy(this._delegate,e))}catch(t){throw eA(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new XC(this,fy(this._delegate,e))}catch(t){throw eA(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new aA(this,function(e,t){if(e=iy(e,sy),Xm("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new bu(ku.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new cy(e,null,function(e){return new dl(ju.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw eA(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(n,r,i){n=iy(n,yy);var a=Object.assign(Object.assign({},bk),void 0);return function(e){if(e.maxAttempts<1)throw new bu(ku.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(e,t,n){var r=new wu;return e.asyncQueue.enqueueAndForget((0,Qt.Z)(regeneratorRuntime.mark(function i(){var a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return jm(e).then(function(e){return e.datastore})}(e);case 2:a=i.sent,new Nm(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}},i)}))),r.promise}(ky(n),function(r){return i=new Lk(n,r),e(new YC(t,i));var i},a)}(this._delegate)}},{key:"batch",value:function(){var e=this;return ky(this._delegate),new QC(new Sk(this._delegate,function(t){return Ok(e._delegate,t)}))}},{key:"loadBundle",value:function(e){return function(e,t){var n=ky(e=iy(e,yy)),r=new my;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Pm(e,t)}(function(e,t){if(e instanceof Uint8Array)return Rm(e,t);if(e instanceof ArrayBuffer)return Rm(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,pv(t));e.asyncQueue.enqueueAndForget((0,Qt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t,n){var r,i=yu(e);(r=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=yu(e),r=Uh(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",function(e){return n._s.getBundleMetadata(e,t.id)}).then(function(e){return!!e&&e.createTime.compareTo(r)>=0})}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Eg(i)),a=new Ig(i,t.localStore,n.M),e.next=15,n.ma();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.ma();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,im(t,u.Lu,void 0);case 31:return e.next=33,function(e,t){var n=yu(e);return n.persistence.runTransaction("Save bundle","readwrite",function(e){return n._s.saveBundleMetadata(e,t)})}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(pu("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}},e,null,[[0,37]])})),function(e,t,n){return r.apply(this,arguments)})(i,t,n).then(function(e){i.sharedClientState.notifyBundleLoaded(e)})},t.next=3,Km(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}},t)})))}(n,e._databaseId,t,r),r}(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return function(e,t){return function(e,t){return e.asyncQueue.enqueue((0,Qt.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=yu(e);return n.persistence.runTransaction("Get named query","readonly",function(e){return n._s.getNamedQuery(e,t)})},n.next=3,zm(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}},n)})))}(ky(e=iy(e,yy)),t).then(function(t){return t?new cy(e,null,t.query):null})}(this._delegate,e).then(function(e){return e?new aA(t,e):null})}}]),e}(),JC=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new zC(new Sy(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return XC.forKey(t,this.firestore,null)}}]),n}(wk),YC=function(){function e(t,n){v(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new JC(t)}return p(e,[{key:"get",value:function(e){var t=this,n=cA(e);return this._delegate.get(n).then(function(e){return new rA(t._firestore,new rk(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))})}},{key:"set",value:function(e,t,n){var r=cA(e);return n?(jC("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r,i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];var s=cA(e);return 2===arguments.length?this._delegate.update(s,t):(r=this._delegate).update.apply(r,[s,t,n].concat(a)),this}},{key:"delete",value:function(e){var t=cA(e);return this._delegate.delete(t),this}}]),e}(),QC=function(){function e(t){v(this,e),this._delegate=t}return p(e,[{key:"set",value:function(e,t,n){var r=cA(e);return n?(jC("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r,i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];var s=cA(e);return 2===arguments.length?this._delegate.update(s,t):(r=this._delegate).update.apply(r,[s,t,n].concat(a)),this}},{key:"delete",value:function(e){var t=cA(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),$C=function(){function e(t,n,r){v(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return p(e,[{key:"fromFirestore",value:function(e,t){var n=new ik(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new iA(this._firestore,n),null!=t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new JC(t),n),i.set(n,a)),a}}]),e}();$C.INSTANCES=new WeakMap;var XC=function(){function e(t,n){v(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new JC(t)}return p(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new uA(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new uA(this.firestore,hy(this._delegate,e))}catch(t){throw eA(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=(0,Gt.m9)(e))instanceof uy&&dy(this._delegate,e)}},{key:"set",value:function(e,t){t=jC("DocumentReference.set",t);try{return t?Ak(this._delegate,e,t):Ak(this._delegate,e)}catch(n){throw eA(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Rk(this._delegate,e):Rk.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw eA(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return Dk(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=tA(n),a=nA(n,function(t){return new rA(e.firestore,new rk(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))});return Pk(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=iy(e,uy);var t=iy(e.firestore,yy),n=ky(t),r=new Ek(t);return function(e,t){var n=new wu;return e.asyncQueue.enqueueAndForget((0,Qt.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=(i=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=yu(e);return n.persistence.runTransaction("read document","readonly",function(e){return n.fi.Ls(e,t)})}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new bu(ku.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=lg(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t,n){return i.apply(this,arguments)}),r.next=3,zm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(n,e._key).then(function(n){return new rk(t,r,e._key,n,new nk(null!==n&&n.hasLocalMutations,!0),e.converter)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=iy(e,uy);var t=iy(e.firestore,yy);return Ym(ky(t),e._key,{source:"server"}).then(function(n){return Nk(t,e,n)})}(this._delegate):Ik(this._delegate)).then(function(e){return new rA(t.firestore,new rk(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))})}},{key:"withConverter",value:function(t){return new e(this.firestore,this._delegate.withConverter(t?$C.getInstance(this.firestore,t):null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!=0)throw new bu("invalid-argument","Invalid document reference. Document references must have an even number of segments, but ".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new uy(n._delegate,r,new ac(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new uy(n._delegate,r,t))}}]),e}();function eA(e,t,n){return e.message=e.message.replace(t,n),e}function tA(e){var t,n=l(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"==typeof r&&!GC(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function nA(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=GC(e[0])?e[0]:GC(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var rA=function(){function e(t,n){v(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"ref",get:function(){return new XC(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return sk(this._delegate,e._delegate)}}]),e}(),iA=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||gu()}(void 0!==t),t}}]),n}(rA),aA=function(){function e(t,n){v(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new JC(t)}return p(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,lk(this._delegate,function(e,t,n){var r=t,i=tk("where",e);return new hk(i,r,n)}(t,n,r)))}catch(i){throw eA(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,lk(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=tk("orderBy",e);return new fk(r,n)}(t,n)))}catch(r){throw eA(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,lk(this._delegate,function(e){return ay("limit",e),new dk("limit",e,"F")}(t)))}catch(n){throw eA(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,lk(this._delegate,function(e){return ay("limitToLast",e),new dk("limitToLast",e,"L")}(t)))}catch(n){throw eA(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,lk(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new pk("startAt",t,!0)}).apply(void 0,arguments)))}catch(t){throw eA(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,lk(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new pk("startAfter",t,!1)}).apply(void 0,arguments)))}catch(t){throw eA(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,lk(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new vk("endBefore",t,!1)}).apply(void 0,arguments)))}catch(t){throw eA(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,lk(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new vk("endAt",t,!0)}).apply(void 0,arguments)))}catch(t){throw eA(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return py(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=iy(e,cy);var t=iy(e.firestore,yy),n=ky(t),r=new Ek(t);return function(e,t){var n=new wu;return e.asyncQueue.enqueueAndForget((0,Qt.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=(i=(0,Qt.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Op(t,n,!0);case 3:i=e.sent,a=new Rg(n,i._i),o=a.Wu(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=lg(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}},e,null,[[0,10]])})),function(e,t,n){return i.apply(this,arguments)}),r.next=3,zm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(n,e._query).then(function(n){return new ak(t,r,e,n)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=iy(e,cy);var t=iy(e.firestore,yy),n=ky(t),r=new Ek(t);return Qm(n,e._query,{source:"server"}).then(function(n){return new ak(t,r,e,n)})}(this._delegate):Ck(this._delegate)).then(function(e){return new sA(t.firestore,new ak(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))})}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=tA(n),a=nA(n,function(t){return new sA(e.firestore,new ak(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))});return Pk(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,this._delegate.withConverter(t?$C.getInstance(this.firestore,t):null))}}]),e}(),oA=function(){function e(t,n){v(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new iA(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),sA=function(){function e(t,n){v(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"query",get:function(){return new aA(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map(function(t){return new iA(e._firestore,t)})}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map(function(e){return new oA(t._firestore,e)})}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach(function(r){e.call(t,new iA(n._firestore,r))})}},{key:"isEqual",value:function(e){return sk(this._delegate,e._delegate)}}]),e}(),uA=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return p(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new XC(this.firestore,e):null}},{key:"doc",value:function(e){try{return new XC(this.firestore,void 0===e?fy(this._delegate):fy(this._delegate,e))}catch(t){throw eA(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=iy(e.firestore,yy),r=fy(e),i=_k(e.converter,t);return Ok(n,[Ny(Oy(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Gl.exists(!1))]).then(function(){return r})}(this._delegate,e).then(function(e){return new XC(t.firestore,e)})}},{key:"isEqual",value:function(e){return dy(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,this._delegate.withConverter(e?$C.getInstance(this.firestore,e):null))}}]),n}(aA);function cA(e){return iy(e,uy)}var lA,hA={Firestore:WC,GeoPoint:Iy,Timestamp:Mu,Blob:zC,Transaction:YC,WriteBatch:QC,DocumentReference:XC,DocumentSnapshot:rA,Query:aA,QueryDocumentSnapshot:iA,QuerySnapshot:sA,CollectionReference:uA,FieldPath:function(){function e(){v(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=w(xy,n)}return p(e,[{key:"isEqual",value:function(e){return(e=(0,Gt.m9)(e))instanceof xy&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Hu.keyField().canonicalString())}}]),e}(),FieldValue:function(){function e(t){v(this,e),this._delegate=t}return p(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Zy("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Ly("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Uy("arrayUnion",t)}).apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Fy("arrayRemove",t)}).apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new qy("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),setLogLevel:function(e){!function(e){lu.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(lA=Xx.Z).INTERNAL.registerComponent(new Jt.wA("firestore-compat",function(e){return t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("firestore").getImmediate(),new WC(t,n,new KC);var t,n},"PUBLIC").setServiceProps(Object.assign({},hA))),lA.registerVersion("@firebase/firestore-compat","0.1.18");var fA=i(9746),dA=i(7771),pA=i(8858),vA=function(e){g(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,a=arguments.length>2?arguments[2]:void 0;return v(this,n),(e=t.call(this)).scheduler=a,e._events=[],e._infiniteTimeWindow=!1,e._bufferSize=r<1?1:r,e._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(e._infiniteTimeWindow=!0,e.next=e.nextInfiniteTimeWindow):e.next=e.nextTimeWindow,e}return p(n,[{key:"nextInfiniteTimeWindow",value:function(e){if(!this.isStopped){var t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}o(S(n.prototype),"next",this).call(this,e)}},{key:"nextTimeWindow",value:function(e){this.isStopped||(this._events.push(new gA(this._getNow(),e)),this._trimBufferThenGetEvents()),o(S(n.prototype),"next",this).call(this,e)}},{key:"_subscribe",value:function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,a=r.length;if(this.closed)throw new eb.N;if(this.isStopped||this.hasError?t=Kb.w.EMPTY:(this.observers.push(e),t=new pA.W(this,e)),i&&e.add(e=new fA.ht(e,i)),n)for(var o=0;o<a&&!e.closed;o++)e.next(r[o]);else for(var s=0;s<a&&!e.closed;s++)e.next(r[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t}},{key:"_getNow",value:function(){return(this.scheduler||dA.c).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,a=0;a<i&&!(e-r[a].time<n);)a++;return i>t&&(a=Math.max(a,i-t)),a>0&&r.splice(0,a),r}}]),n}(Xk.xQ),gA=p(function e(t,n){v(this,e),this.time=t,this.value=n});function mA(e,t,n){var r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},function(e){return e.lift(function(e){var t,n,r=e.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,a=e.windowTime,o=void 0===a?Number.POSITIVE_INFINITY:a,s=e.refCount,u=e.scheduler,c=0,l=!1,h=!1;return function(e){var r;c++,!t||l?(l=!1,t=new vA(i,o,u),r=t.subscribe(this),n=e.subscribe({next:function(e){t.next(e)},error:function(e){l=!0,t.error(e)},complete:function(){h=!0,n=void 0,t.complete()}}),h&&(n=void 0)):r=t.subscribe(this),this.add(function(){c--,r.unsubscribe(),r=void 0,n&&!h&&s&&0===c&&(n.unsubscribe(),n=void 0,t=void 0)})}}(r))}}function yA(e,t){return t?kb(function(){return e},t):kb(function(){return e})}var kA=i(9673),bA=new a.OlP("angularfire2.auth.use-emulator"),wA=new a.OlP("angularfire2.auth.settings"),_A=new a.OlP("angularfire2.auth.tenant-id"),xA=new a.OlP("angularfire2.auth.langugage-code"),SA=new a.OlP("angularfire2.auth.use-device-language"),TA=new a.OlP("angularfire.auth.persistence"),IA=function(e,t,n,i,a,o,s,c){return(0,$x.cc)("".concat(e.name,".auth"),"AngularFireAuth",e.name,function(){var l=t.runOutsideAngular(function(){return e.auth()});if(n&&l.useEmulator.apply(l,u(n)),i&&(l.tenantId=i),l.languageCode=a,o&&l.useDeviceLanguage(),s)for(var h=0,f=Object.entries(s);h<f.length;h++){var d=r(f[h],2),p=d[0],v=d[1];l.settings[p]=v}return c&&l.setPersistence(c),l},[n,i,a,o,s,c])},EA=function(){var e=p(function e(t,n,r,a,o,s,u,c,l,h,f,d){v(this,e);var p=new Xk.xQ,g=(0,We.of)(void 0).pipe((0,fA.QV)(o.outsideAngular),kb(function(){return a.runOutsideAngular(function(){return Promise.resolve().then(i.bind(i,4828))})}),(0,nt.U)(function(){return(0,$x.on)(t,a,n)}),(0,nt.U)(function(e){return IA(e,a,s,c,l,h,u,f)}),mA({bufferSize:1,refCount:!1}));if(se(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,We.of)(null);else{g.pipe(Hb()).subscribe();var m=g.pipe(kb(function(e){return e.getRedirectResult().then(function(e){return e},function(){return null})}),Mt.iC,mA({bufferSize:1,refCount:!1})),y=g.pipe(kb(function(e){return new Je.y(function(t){return{unsubscribe:a.runOutsideAngular(function(){return e.onAuthStateChanged(function(e){return t.next(e)},function(e){return t.error(e)},function(){return t.complete()})})}})})),k=g.pipe(kb(function(e){return new Je.y(function(t){return{unsubscribe:a.runOutsideAngular(function(){return e.onIdTokenChanged(function(e){return t.next(e)},function(e){return t.error(e)},function(){return t.complete()})})}})}));this.authState=m.pipe(yA(y),(0,kA.R)(o.outsideAngular),(0,fA.QV)(o.insideAngular)),this.user=m.pipe(yA(k),(0,kA.R)(o.outsideAngular),(0,fA.QV)(o.insideAngular)),this.idToken=this.user.pipe(kb(function(e){return e?(0,$k.D)(e.getIdToken()):(0,We.of)(null)})),this.idTokenResult=this.user.pipe(kb(function(e){return e?(0,$k.D)(e.getIdTokenResult()):(0,We.of)(null)})),this.credential=(0,lI.T)(m,p,this.authState.pipe(Xe(function(e){return!e}))).pipe((0,nt.U)(function(e){return(null==e?void 0:e.user)?e:null}),(0,kA.R)(o.outsideAngular),(0,fA.QV)(o.insideAngular))}return(0,$x.pX)(this,g,a,{spy:{apply:function(e,t,n){(e.startsWith("signIn")||e.startsWith("createUser"))&&n.then(function(e){return p.next(e)})}}})});return e.\u0275fac=function(t){return new(t||e)(a.LFG($x.Dh),a.LFG($x.xv,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Mt.HU),a.LFG(bA,8),a.LFG(wA,8),a.LFG(_A,8),a.LFG(xA,8),a.LFG(SA,8),a.LFG(TA,8),a.LFG(An,8))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e}();function CA(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wx.z;return new Je.y(function(n){var r;return null!=t?t.schedule(function(){r=e.onSnapshot({includeMetadataChanges:!0},n)}):r=e.onSnapshot({includeMetadataChanges:!0},n),function(){null!=r&&r()}})}(e,t)}function AA(e,t){return CA(e,t).pipe((0,nt.U)(function(e){return{payload:e,type:"query"}}))}function RA(e,t){return AA(e,t).pipe(Ib(void 0),ZC(),(0,nt.U)(function(e){var t=r(e,2),n=t[0],i=t[1],a=i.payload.docChanges(),o=a.map(function(e){return{type:e.type,payload:e}});return n&&JSON.stringify(n.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach(function(e,t){var r=a.find(function(t){return t.doc.ref.isEqual(e.ref)}),i=null==n?void 0:n.payload.docs.find(function(t){return t.ref.isEqual(e.ref)});r&&JSON.stringify(r.doc.metadata)===JSON.stringify(e.metadata)||!r&&i&&JSON.stringify(i.metadata)===JSON.stringify(e.metadata)||o.push({type:"modified",payload:{oldIndex:t,newIndex:t,type:"modified",doc:e}})}),o}))}function DA(e,t,n){return RA(e,n).pipe(Eb(function(e,n){return function(e,t,n){return t.forEach(function(t){n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":if(!e[t.newIndex]||!e[t.newIndex].doc.ref.isEqual(t.doc.ref))return PA(e,t.newIndex,0,t);break;case"modified":if(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){var n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}return PA(e,t.newIndex,1,t)}break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return PA(e,t.oldIndex,1)}return e}(e,t))}),e}(e,n.map(function(e){return e.payload}),t)},[]),function(e){return e.lift(new qC(void 0,void 0))},(0,nt.U)(function(e){return e.map(function(e){return{type:e.type,payload:e}})}))}function PA(e,t,n){for(var r=e.slice(),i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];return r.splice.apply(r,[t,n].concat(a)),r}function OA(e){return e&&0!==e.length||(e=["added","removed","modified"]),e}var NA=function(){function e(t,n,r){v(this,e),this.ref=t,this.query=n,this.afs=r}return p(e,[{key:"stateChanges",value:function(e){var t=RA(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,nt.U)(function(t){return t.filter(function(t){return e.indexOf(t.type)>-1})}))),t.pipe(Ib(void 0),ZC(),Xe(function(e){var t=r(e,2),n=t[0];return t[1].length>0||!n}),(0,nt.U)(function(e){var t=r(e,2);t[0];return t[1]}),Mt.iC)}},{key:"auditTrail",value:function(e){return this.stateChanges(e).pipe(Eb(function(e,t){return[].concat(u(e),u(t))},[]))}},{key:"snapshotChanges",value:function(e){var t=OA(e);return DA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Mt.iC)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return AA(this.query,this.afs.schedulers.outsideAngular).pipe((0,nt.U)(function(t){return t.payload.docs.map(function(t){return e.idField?Object.assign(Object.assign({},t.data()),n({},e.idField,t.id)):t.data()})}),Mt.iC)}},{key:"get",value:function(e){return(0,$k.D)(this.query.get(e)).pipe(Mt.iC)}},{key:"add",value:function(e){return this.ref.add(e)}},{key:"doc",value:function(e){return new LA(this.ref.doc(e),this.afs)}}]),e}(),LA=function(){function e(t,n){v(this,e),this.ref=t,this.afs=n}return p(e,[{key:"set",value:function(e,t){return this.ref.set(e,t)}},{key:"update",value:function(e){return this.ref.update(e)}},{key:"delete",value:function(){return this.ref.delete()}},{key:"collection",value:function(e,t){var n=VA(this.ref.collection(e),t),r=n.ref,i=n.query;return new NA(r,i,this.afs)}},{key:"snapshotChanges",value:function(){return(e=this.ref,t=this.afs.schedulers.outsideAngular,CA(e,t).pipe(Ib(void 0),ZC(),(0,nt.U)(function(e){var t=r(e,2),n=t[0],i=t[1];return i.exists?(null==n?void 0:n.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))).pipe(Mt.iC);var e,t}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.snapshotChanges().pipe((0,nt.U)(function(t){var r=t.payload;return e.idField?Object.assign(Object.assign({},r.data()),n({},e.idField,r.id)):r.data()}))}},{key:"get",value:function(e){return(0,$k.D)(this.ref.get(e)).pipe(Mt.iC)}}]),e}(),MA=function(){function e(t,n){v(this,e),this.query=t,this.afs=n}return p(e,[{key:"stateChanges",value:function(e){return e&&0!==e.length?RA(this.query,this.afs.schedulers.outsideAngular).pipe((0,nt.U)(function(t){return t.filter(function(t){return e.indexOf(t.type)>-1})}),Xe(function(e){return e.length>0}),Mt.iC):RA(this.query,this.afs.schedulers.outsideAngular).pipe(Mt.iC)}},{key:"auditTrail",value:function(e){return this.stateChanges(e).pipe(Eb(function(e,t){return[].concat(u(e),u(t))},[]))}},{key:"snapshotChanges",value:function(e){var t=OA(e);return DA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Mt.iC)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return AA(this.query,this.afs.schedulers.outsideAngular).pipe((0,nt.U)(function(t){return t.payload.docs.map(function(t){return e.idField?Object.assign(n({},e.idField,t.id),t.data()):t.data()})}),Mt.iC)}},{key:"get",value:function(e){return(0,$k.D)(this.query.get(e)).pipe(Mt.iC)}}]),e}(),ZA=new a.OlP("angularfire2.enableFirestorePersistence"),UA=new a.OlP("angularfire2.firestore.persistenceSettings"),FA=new a.OlP("angularfire2.firestore.settings"),qA=new a.OlP("angularfire2.firestore.use-emulator");function VA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return{query:t(e),ref:e}}var jA=function(){var e=function(){function e(t,n,i,a,o,s,c,l,h,f,d,p,g,m,y,k,b){var w;v(this,e),this.schedulers=c;var _=(0,$x.on)(t,s,n),x=h;f&&IA(_,s,d,g,m,y,p,k),w=r((0,$x.cc)("".concat(_.name,".firestore"),"AngularFirestore",_.name,function(){var e=s.runOutsideAngular(function(){return _.firestore()});if(a&&e.settings(a),x&&e.useEmulator.apply(e,u(x)),i&&!se(o)){return[e,s.runOutsideAngular(function(){try{return(0,$k.D)(e.enablePersistence(l||void 0).then(function(){return!0},function(){return!1}))}catch(t){return"undefined"!=typeof console&&console.warn(t),(0,We.of)(!1)}})]}return[e,(0,We.of)(!1)]},[a,x,i]),2),this.firestore=w[0],this.persistenceEnabled$=w[1]}return p(e,[{key:"collection",value:function(e,t){var n=VA("string"==typeof e?this.firestore.collection(e):e,t),r=n.ref,i=n.query,a=this.schedulers.ngZone.run(function(){return r});return new NA(a,i,this)}},{key:"collectionGroup",value:function(e,t){var n=t||function(e){return e},r=this.firestore.collectionGroup(e);return new MA(n(r),this)}},{key:"doc",value:function(e){var t;t="string"==typeof e?this.firestore.doc(e):e;var n=this.schedulers.ngZone.run(function(){return t});return new LA(n,this)}},{key:"createId",value:function(){return this.firestore.collection("_").doc().id}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG($x.Dh),a.LFG($x.xv,8),a.LFG(ZA,8),a.LFG(FA,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Mt.HU),a.LFG(UA,8),a.LFG(qA,8),a.LFG(EA,8),a.LFG(bA,8),a.LFG(wA,8),a.LFG(_A,8),a.LFG(xA,8),a.LFG(SA,8),a.LFG(TA,8),a.LFG(An,8))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e}(),BA={apiKey:"AIzaSyCXiM3pRTf1d6CCChySrNyXq-v7I7RacbE",authDomain:"junkyard-stories.firebaseapp.com",projectId:"junkyard-stories",storageBucket:"junkyard-stories.appspot.com",messagingSenderId:"800786856702",appId:"1:800786856702:web:47b317703177830d09c3af"},HA=function(){var e=p(function e(){v(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e,bootstrap:[EC]}),e.\u0275inj=a.cJS({providers:[mS,kS,jA,{provide:A,useClass:O},{provide:xt,useClass:MC,multi:!0}],imports:[[He,Ux.forRoot([]),Ht(function(){return zt(BA)}),Jr(function(){return $r()}),jk(function(){return Wk()}),$x.hO.initializeApp(BA),gS,Nt,IC,FT,AC]]}),e}();(0,a.G48)(),je().bootstrapModule(HA).catch(function(e){return console.error(e)})},6304:function(e,t,n){"use strict";function r(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var o=e.apply(t,n);function s(e){r(o,i,a,s,u,"next",e)}function u(e){r(o,i,a,s,u,"throw",e)}s(void 0)})}}n.d(t,{Z:function(){return i}})}},function(e){"use strict";e(e.s=9562)}])}();